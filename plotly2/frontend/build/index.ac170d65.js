let r,n,i;function a(r,n,i,a){Object.defineProperty(r,n,{get:i,set:a,enumerable:!0,configurable:!0})}function o(r){return r&&r.__esModule?r.default:r}var s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L,C,O,D,P,B,R,z,F,N,U,j,V,H,q,G,W,Y,Z,X,K,J,$,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tc,tu,tf,th,tp,td,ty,tg,tv,tm,tx,tb,t_,tw,tT,tA,tk,tM,tS,tE,tI,tL,tC,tO,tD,tP,tB,tR,tz,tF,tN,tU,tj,tV,tH,tq,tG,tW,tY,tZ,tX,tK,tJ,t$,tQ,t0,t1,t2,t3,t4,t6,t5,t8,t7,t9,et,ee,er,en,ei,ea,eo,es,el,ec,eu,ef,eh,ep,ed,ey,eg,ev,em,ex,eb,e_,ew,eT,eA,ek,eM,eS,eE,eI,eL,eC,eO,eD,eP,eB,eR,ez,eF,eN,eU,ej,eV,eH,eq,eG,eW,eY,eZ,eX,eK,eJ,e$,eQ,e0,e1,e2,e3,e4,e6,e5,e8=globalThis,e7={},e9={},rt=e8.parcelRequired611;null==rt&&((rt=function(r){if(r in e7)return e7[r].exports;if(r in e9){var n=e9[r];delete e9[r];var i={id:r,exports:{}};return e7[r]=i,n.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(r,n){e9[r]=n},e8.parcelRequired611=rt);var re=rt.register;re("9cCWX",function(r,n){a(r.exports,"AsyncMode",()=>i,r=>i=r),a(r.exports,"ConcurrentMode",()=>o,r=>o=r),a(r.exports,"ContextConsumer",()=>s,r=>s=r),a(r.exports,"ContextProvider",()=>l,r=>l=r),a(r.exports,"Element",()=>c,r=>c=r),a(r.exports,"ForwardRef",()=>u,r=>u=r),a(r.exports,"Fragment",()=>f,r=>f=r),a(r.exports,"Lazy",()=>h,r=>h=r),a(r.exports,"Memo",()=>p,r=>p=r),a(r.exports,"Portal",()=>d,r=>d=r),a(r.exports,"Profiler",()=>y,r=>y=r),a(r.exports,"StrictMode",()=>g,r=>g=r),a(r.exports,"Suspense",()=>v,r=>v=r),a(r.exports,"isAsyncMode",()=>m,r=>m=r),a(r.exports,"isConcurrentMode",()=>x,r=>x=r),a(r.exports,"isContextConsumer",()=>b,r=>b=r),a(r.exports,"isContextProvider",()=>_,r=>_=r),a(r.exports,"isElement",()=>w,r=>w=r),a(r.exports,"isForwardRef",()=>T,r=>T=r),a(r.exports,"isFragment",()=>A,r=>A=r),a(r.exports,"isLazy",()=>k,r=>k=r),a(r.exports,"isMemo",()=>M,r=>M=r),a(r.exports,"isPortal",()=>S,r=>S=r),a(r.exports,"isProfiler",()=>E,r=>E=r),a(r.exports,"isStrictMode",()=>I,r=>I=r),a(r.exports,"isSuspense",()=>L,r=>L=r),a(r.exports,"isValidElementType",()=>C,r=>C=r),a(r.exports,"typeOf",()=>O,r=>O=r);var i,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L,C,O,D="function"==typeof Symbol&&Symbol.for,P=D?Symbol.for("react.element"):60103,B=D?Symbol.for("react.portal"):60106,R=D?Symbol.for("react.fragment"):60107,z=D?Symbol.for("react.strict_mode"):60108,F=D?Symbol.for("react.profiler"):60114,N=D?Symbol.for("react.provider"):60109,U=D?Symbol.for("react.context"):60110,j=D?Symbol.for("react.async_mode"):60111,V=D?Symbol.for("react.concurrent_mode"):60111,H=D?Symbol.for("react.forward_ref"):60112,q=D?Symbol.for("react.suspense"):60113,G=D?Symbol.for("react.suspense_list"):60120,W=D?Symbol.for("react.memo"):60115,Y=D?Symbol.for("react.lazy"):60116,Z=D?Symbol.for("react.block"):60121,X=D?Symbol.for("react.fundamental"):60117,K=D?Symbol.for("react.responder"):60118,J=D?Symbol.for("react.scope"):60119;function $(r){if("object"==typeof r&&null!==r){var n=r.$$typeof;switch(n){case P:switch(r=r.type){case j:case V:case R:case F:case z:case q:return r;default:switch(r=r&&r.$$typeof){case U:case H:case Y:case W:case N:return r;default:return n}}case B:return n}}}function Q(r){return $(r)===V}i=j,o=V,s=U,l=N,c=P,u=H,f=R,h=Y,p=W,d=B,y=F,g=z,v=q,m=function(r){return Q(r)||$(r)===j},x=Q,b=function(r){return $(r)===U},_=function(r){return $(r)===N},w=function(r){return"object"==typeof r&&null!==r&&r.$$typeof===P},T=function(r){return $(r)===H},A=function(r){return $(r)===R},k=function(r){return $(r)===Y},M=function(r){return $(r)===W},S=function(r){return $(r)===B},E=function(r){return $(r)===F},I=function(r){return $(r)===z},L=function(r){return $(r)===q},C=function(r){return"string"==typeof r||"function"==typeof r||r===R||r===V||r===F||r===z||r===q||r===G||"object"==typeof r&&null!==r&&(r.$$typeof===Y||r.$$typeof===W||r.$$typeof===N||r.$$typeof===U||r.$$typeof===H||r.$$typeof===X||r.$$typeof===K||r.$$typeof===J||r.$$typeof===Z)},O=$}),re("2pUnB",function(r,n){a(r.exports,"Children",()=>i,r=>i=r),a(r.exports,"Component",()=>o,r=>o=r),a(r.exports,"Fragment",()=>s,r=>s=r),a(r.exports,"Profiler",()=>l,r=>l=r),a(r.exports,"PureComponent",()=>c,r=>c=r),a(r.exports,"StrictMode",()=>u,r=>u=r),a(r.exports,"Suspense",()=>f,r=>f=r),a(r.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>h,r=>h=r),a(r.exports,"cloneElement",()=>p,r=>p=r),a(r.exports,"createContext",()=>d,r=>d=r),a(r.exports,"createElement",()=>y,r=>y=r),a(r.exports,"createFactory",()=>g,r=>g=r),a(r.exports,"createRef",()=>v,r=>v=r),a(r.exports,"forwardRef",()=>m,r=>m=r),a(r.exports,"isValidElement",()=>x,r=>x=r),a(r.exports,"lazy",()=>b,r=>b=r),a(r.exports,"memo",()=>_,r=>_=r),a(r.exports,"useCallback",()=>w,r=>w=r),a(r.exports,"useContext",()=>T,r=>T=r),a(r.exports,"useDebugValue",()=>A,r=>A=r),a(r.exports,"useEffect",()=>k,r=>k=r),a(r.exports,"useImperativeHandle",()=>M,r=>M=r),a(r.exports,"useLayoutEffect",()=>S,r=>S=r),a(r.exports,"useMemo",()=>E,r=>E=r),a(r.exports,"useReducer",()=>I,r=>I=r),a(r.exports,"useRef",()=>L,r=>L=r),a(r.exports,"useState",()=>C,r=>C=r),a(r.exports,"version",()=>O,r=>O=r);var i,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L,C,O,D=rt("8coUR"),P="function"==typeof Symbol&&Symbol.for,B=P?Symbol.for("react.element"):60103,R=P?Symbol.for("react.portal"):60106,z=P?Symbol.for("react.fragment"):60107,F=P?Symbol.for("react.strict_mode"):60108,N=P?Symbol.for("react.profiler"):60114,U=P?Symbol.for("react.provider"):60109,j=P?Symbol.for("react.context"):60110,V=P?Symbol.for("react.forward_ref"):60112,H=P?Symbol.for("react.suspense"):60113,q=P?Symbol.for("react.memo"):60115,G=P?Symbol.for("react.lazy"):60116,W="function"==typeof Symbol&&Symbol.iterator;function Y(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X={};function K(r,n,i){this.props=r,this.context=n,this.refs=X,this.updater=i||Z}function J(){}function $(r,n,i){this.props=r,this.context=n,this.refs=X,this.updater=i||Z}K.prototype.isReactComponent={},K.prototype.setState=function(r,n){if("object"!=typeof r&&"function"!=typeof r&&null!=r)throw Error(Y(85));this.updater.enqueueSetState(this,r,n,"setState")},K.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")},J.prototype=K.prototype;var Q=$.prototype=new J;Q.constructor=$,D(Q,K.prototype),Q.isPureReactComponent=!0;var tt={current:null},te=Object.prototype.hasOwnProperty,tr={key:!0,ref:!0,__self:!0,__source:!0};function tn(r,n,i){var a,o={},s=null,l=null;if(null!=n)for(a in void 0!==n.ref&&(l=n.ref),void 0!==n.key&&(s=""+n.key),n)te.call(n,a)&&!tr.hasOwnProperty(a)&&(o[a]=n[a]);var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}if(r&&r.defaultProps)for(a in c=r.defaultProps)void 0===o[a]&&(o[a]=c[a]);return{$$typeof:B,type:r,key:s,ref:l,props:o,_owner:tt.current}}function ti(r){return"object"==typeof r&&null!==r&&r.$$typeof===B}var ta=/\/+/g,to=[];function ts(r,n,i,a){if(to.length){var o=to.pop();return o.result=r,o.keyPrefix=n,o.func=i,o.context=a,o.count=0,o}return{result:r,keyPrefix:n,func:i,context:a,count:0}}function tl(r){r.result=null,r.keyPrefix=null,r.func=null,r.context=null,r.count=0,10>to.length&&to.push(r)}function tc(r,n,i){return null==r?0:function r(n,i,a,o){var s=typeof n;("undefined"===s||"boolean"===s)&&(n=null);var l=!1;if(null===n)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case B:case R:l=!0}}if(l)return a(o,n,""===i?"."+tu(n,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(n))for(var c=0;c<n.length;c++){var u=i+tu(s=n[c],c);l+=r(s,u,a,o)}else if("function"==typeof(u=null===n||"object"!=typeof n?null:"function"==typeof(u=W&&n[W]||n["@@iterator"])?u:null))for(n=u.call(n),c=0;!(s=n.next()).done;)u=i+tu(s=s.value,c++),l+=r(s,u,a,o);else if("object"===s)throw Error(Y(31,"[object Object]"==(a=""+n)?"object with keys {"+Object.keys(n).join(", ")+"}":a,""));return l}(r,"",n,i)}function tu(r,n){var i,a;return"object"==typeof r&&null!==r&&null!=r.key?(i=r.key,a={"=":"=0",":":"=2"},"$"+(""+i).replace(/[=:]/g,function(r){return a[r]})):n.toString(36)}function tf(r,n){r.func.call(r.context,n,r.count++)}function th(r,n,i){var a,o,s=r.result,l=r.keyPrefix;Array.isArray(r=r.func.call(r.context,n,r.count++))?tp(r,s,i,function(r){return r}):null!=r&&(ti(r)&&(a=r,o=l+(!r.key||n&&n.key===r.key?"":(""+r.key).replace(ta,"$&/")+"/")+i,r={$$typeof:B,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}),s.push(r))}function tp(r,n,i,a,o){var s="";null!=i&&(s=(""+i).replace(ta,"$&/")+"/"),tc(r,th,n=ts(n,s,a,o)),tl(n)}var td={current:null};function ty(){var r=td.current;if(null===r)throw Error(Y(321));return r}i={map:function(r,n,i){if(null==r)return r;var a=[];return tp(r,a,null,n,i),a},forEach:function(r,n,i){if(null==r)return r;tc(r,tf,n=ts(null,null,n,i)),tl(n)},count:function(r){return tc(r,function(){return null},null)},toArray:function(r){var n=[];return tp(r,n,null,function(r){return r}),n},only:function(r){if(!ti(r))throw Error(Y(143));return r}},o=K,s=z,l=N,c=$,u=F,f=H,h={ReactCurrentDispatcher:td,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:tt,IsSomeRendererActing:{current:!1},assign:D},p=function(r,n,i){if(null==r)throw Error(Y(267,r));var a=D({},r.props),o=r.key,s=r.ref,l=r._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,l=tt.current),void 0!==n.key&&(o=""+n.key),r.type&&r.type.defaultProps)var c=r.type.defaultProps;for(u in n)te.call(n,u)&&!tr.hasOwnProperty(u)&&(a[u]=void 0===n[u]&&void 0!==c?c[u]:n[u])}var u=arguments.length-2;if(1===u)a.children=i;else if(1<u){c=Array(u);for(var f=0;f<u;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:B,type:r.type,key:o,ref:s,props:a,_owner:l}},d=function(r,n){return void 0===n&&(n=null),(r={$$typeof:j,_calculateChangedBits:n,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:U,_context:r},r.Consumer=r},y=tn,g=function(r){var n=tn.bind(null,r);return n.type=r,n},v=function(){return{current:null}},m=function(r){return{$$typeof:V,render:r}},x=ti,b=function(r){return{$$typeof:G,_ctor:r,_status:-1,_result:null}},_=function(r,n){return{$$typeof:q,type:r,compare:void 0===n?null:n}},w=function(r,n){return ty().useCallback(r,n)},T=function(r,n){return ty().useContext(r,n)},A=function(){},k=function(r,n){return ty().useEffect(r,n)},M=function(r,n,i){return ty().useImperativeHandle(r,n,i)},S=function(r,n){return ty().useLayoutEffect(r,n)},E=function(r,n){return ty().useMemo(r,n)},I=function(r,n,i){return ty().useReducer(r,n,i)},L=function(r){return ty().useRef(r)},C=function(r){return ty().useState(r)},O="16.14.0"}),re("8coUR",function(r,n){var i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;r.exports=!function(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(r){return n[r]});if("0123456789"!==a.join(""))return!1;var o={};if("abcdefghijklmnopqrst".split("").forEach(function(r){o[r]=r}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},o)).join(""))return!1;return!0}catch(r){return!1}}()?function(r,n){for(var s,l,c=function(r){if(null==r)throw TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(r),u=1;u<arguments.length;u++){for(var f in s=Object(arguments[u]))a.call(s,f)&&(c[f]=s[f]);if(i){l=i(s);for(var h=0;h<l.length;h++)o.call(s,l[h])&&(c[l[h]]=s[l[h]])}}return c}:Object.assign});var rr={};rr=rt("9cCWX");var rn={};rn[rr.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rn[rr.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ri={};ri=rt("2pUnB");/**
 * @license
 * Copyright 2018-2021 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ra={};Object.defineProperty(ra,"__esModule",{value:!0});const ro=new WeakMap,rs=new WeakMap;function rl(r){let n=ro.get(r);return console.assert(null!=n,"'this' is expected an Event object, but got",r),n}function rc(r){if(null!=r.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",r.passiveListener);return}r.event.cancelable&&(r.canceled=!0,"function"==typeof r.event.preventDefault&&r.event.preventDefault())}function ru(r,n){ro.set(this,{eventTarget:r,event:n,eventPhase:2,currentTarget:r,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:n.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let i=Object.keys(n);for(let r=0;r<i.length;++r){let n=i[r];n in this||Object.defineProperty(this,n,rf(n))}}function rf(r){return{get(){return rl(this).event[r]},set(n){rl(this).event[r]=n},configurable:!0,enumerable:!0}}function rh(r,n){rl(r).passiveListener=n}ru.prototype={get type(){return rl(this).event.type},get target(){return rl(this).eventTarget},get currentTarget(){return rl(this).currentTarget},composedPath(){let r=rl(this).currentTarget;return null==r?[]:[r]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return rl(this).eventPhase},stopPropagation(){let r=rl(this);r.stopped=!0,"function"==typeof r.event.stopPropagation&&r.event.stopPropagation()},stopImmediatePropagation(){let r=rl(this);r.stopped=!0,r.immediateStopped=!0,"function"==typeof r.event.stopImmediatePropagation&&r.event.stopImmediatePropagation()},get bubbles(){return!!rl(this).event.bubbles},get cancelable(){return!!rl(this).event.cancelable},preventDefault(){rc(rl(this))},get defaultPrevented(){return rl(this).canceled},get composed(){return!!rl(this).event.composed},get timeStamp(){return rl(this).timeStamp},get srcElement(){return rl(this).eventTarget},get cancelBubble(){return rl(this).stopped},set cancelBubble(value){if(!value)return;let r=rl(this);r.stopped=!0,"boolean"==typeof r.event.cancelBubble&&(r.event.cancelBubble=!0)},get returnValue(){return!rl(this).canceled},set returnValue(value){value||rc(rl(this))},initEvent(){}},Object.defineProperty(ru.prototype,"constructor",{value:ru,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(ru.prototype,window.Event.prototype),rs.set(window.Event.prototype,ru));const rp=new WeakMap;function rd(r){return null!==r&&"object"==typeof r}function ry(r){let n=rp.get(r);if(null==n)throw TypeError("'this' is expected an EventTarget object, but got another value.");return n}function rg(r,n){Object.defineProperty(r,`on${n}`,{get(){let r=ry(this).get(n);for(;null!=r;){if(3===r.listenerType)return r.listener;r=r.next}return null},set(r){"function"==typeof r||rd(r)||(r=null);let i=ry(this),a=null,o=i.get(n);for(;null!=o;)3===o.listenerType?null!==a?a.next=o.next:null!==o.next?i.set(n,o.next):i.delete(n):a=o,o=o.next;if(null!==r){let o={listener:r,listenerType:3,passive:!1,once:!1,next:null};null===a?i.set(n,o):a.next=o}},configurable:!0,enumerable:!0})}function rv(r){function n(){rm.call(this)}n.prototype=Object.create(rm.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i)rg(n.prototype,r[i]);return n}function rm(){if(this instanceof rm){rp.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return rv(arguments[0]);if(arguments.length>0){let r=Array(arguments.length);for(let n=0;n<arguments.length;++n)r[n]=arguments[n];return rv(r)}throw TypeError("Cannot call a class as a function")}rm.prototype={addEventListener(r,n,i){if(null==n)return;if("function"!=typeof n&&!rd(n))throw TypeError("'listener' should be a function or an object.");let a=ry(this),o=rd(i),s=(o?i.capture:i)?1:2,l={listener:n,listenerType:s,passive:o&&!!i.passive,once:o&&!!i.once,next:null},c=a.get(r);if(void 0===c){a.set(r,l);return}let u=null;for(;null!=c;){if(c.listener===n&&c.listenerType===s)return;u=c,c=c.next}u.next=l},removeEventListener(r,n,i){if(null==n)return;let a=ry(this),o=(rd(i)?i.capture:i)?1:2,s=null,l=a.get(r);for(;null!=l;){if(l.listener===n&&l.listenerType===o){null!==s?s.next=l.next:null!==l.next?a.set(r,l.next):a.delete(r);return}s=l,l=l.next}},dispatchEvent(r){if(null==r||"string"!=typeof r.type)throw TypeError('"event.type" should be a string.');let n=ry(this),i=r.type,a=n.get(i);if(null==a)return!0;let o=new(function r(n){if(null==n||n===Object.prototype)return ru;let i=rs.get(n);return null==i&&(i=function(r,n){let i=Object.keys(n);if(0===i.length)return r;function a(n,i){r.call(this,n,i)}a.prototype=Object.create(r.prototype,{constructor:{value:a,configurable:!0,writable:!0}});for(let o=0;o<i.length;++o){let s=i[o];if(!(s in r.prototype)){let r="function"==typeof Object.getOwnPropertyDescriptor(n,s).value;Object.defineProperty(a.prototype,s,r?function(r){return{value(){let n=rl(this).event;return n[r].apply(n,arguments)},configurable:!0,enumerable:!0}}(s):rf(s))}}return a}(r(Object.getPrototypeOf(n)),n),rs.set(n,i)),i}(Object.getPrototypeOf(r)))(this,r),s=null;for(;null!=a;){if(a.once?null!==s?s.next=a.next:null!==a.next?n.set(i,a.next):n.delete(i):s=a,rh(o,a.passive?a.listener:null),"function"==typeof a.listener)try{a.listener.call(this,o)}catch(r){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(r)}else 3!==a.listenerType&&"function"==typeof a.listener.handleEvent&&a.listener.handleEvent(o);if(rl(o).immediateStopped)break;a=a.next}return rh(o,null),rl(o).eventPhase=0,rl(o).currentTarget=null,!o.defaultPrevented}},Object.defineProperty(rm.prototype,"constructor",{value:rm,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(rm.prototype,window.EventTarget.prototype),ra.defineEventAttribute=rg,ra.EventTarget=rm,ra.default=rm,(ra=rm).EventTarget=ra.default=rm,ra.defineEventAttribute=rg;/**
 * @license
 * Copyright 2018-2021 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rx={};Object.defineProperty(rx,"__esModule",{value:!0});var rb={};Object.defineProperty(rb,"__esModule",{value:!0});var r_={};Object.defineProperty(r_,"__esModule",{value:!0});var rw={};rw.Offset,rw.Table,rw.SIZEOF_SHORT=2,rw.SIZEOF_INT=4,rw.FILE_IDENTIFIER_LENGTH=4,rw.Encoding={UTF8_BYTES:1,UTF16_STRING:2},rw.int32=new Int32Array(2),rw.float32=new Float32Array(rw.int32.buffer),rw.float64=new Float64Array(rw.int32.buffer),rw.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],rw.Long=function(r,n){this.low=0|r,this.high=0|n},rw.Long.create=function(r,n){return 0==r&&0==n?rw.Long.ZERO:new rw.Long(r,n)},rw.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},rw.Long.prototype.equals=function(r){return this.low==r.low&&this.high==r.high},rw.Long.ZERO=new rw.Long(0,0),rw.Builder=function(r){if(r)var n=r;else var n=1024;this.bb=rw.ByteBuffer.allocate(n),this.space=n,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},rw.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},rw.Builder.prototype.forceDefaults=function(r){this.force_defaults=r},rw.Builder.prototype.dataBuffer=function(){return this.bb},rw.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},rw.Builder.prototype.prep=function(r,n){r>this.minalign&&(this.minalign=r);for(var i=~(this.bb.capacity()-this.space+n)+1&r-1;this.space<i+r+n;){var a=this.bb.capacity();this.bb=rw.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-a}this.pad(i)},rw.Builder.prototype.pad=function(r){for(var n=0;n<r;n++)this.bb.writeInt8(--this.space,0)},rw.Builder.prototype.writeInt8=function(r){this.bb.writeInt8(this.space-=1,r)},rw.Builder.prototype.writeInt16=function(r){this.bb.writeInt16(this.space-=2,r)},rw.Builder.prototype.writeInt32=function(r){this.bb.writeInt32(this.space-=4,r)},rw.Builder.prototype.writeInt64=function(r){this.bb.writeInt64(this.space-=8,r)},rw.Builder.prototype.writeFloat32=function(r){this.bb.writeFloat32(this.space-=4,r)},rw.Builder.prototype.writeFloat64=function(r){this.bb.writeFloat64(this.space-=8,r)},rw.Builder.prototype.addInt8=function(r){this.prep(1,0),this.writeInt8(r)},rw.Builder.prototype.addInt16=function(r){this.prep(2,0),this.writeInt16(r)},rw.Builder.prototype.addInt32=function(r){this.prep(4,0),this.writeInt32(r)},rw.Builder.prototype.addInt64=function(r){this.prep(8,0),this.writeInt64(r)},rw.Builder.prototype.addFloat32=function(r){this.prep(4,0),this.writeFloat32(r)},rw.Builder.prototype.addFloat64=function(r){this.prep(8,0),this.writeFloat64(r)},rw.Builder.prototype.addFieldInt8=function(r,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(r))},rw.Builder.prototype.addFieldInt16=function(r,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(r))},rw.Builder.prototype.addFieldInt32=function(r,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(r))},rw.Builder.prototype.addFieldInt64=function(r,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(r))},rw.Builder.prototype.addFieldFloat32=function(r,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(r))},rw.Builder.prototype.addFieldFloat64=function(r,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(r))},rw.Builder.prototype.addFieldOffset=function(r,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(r))},rw.Builder.prototype.addFieldStruct=function(r,n,i){n!=i&&(this.nested(n),this.slot(r))},rw.Builder.prototype.nested=function(r){if(r!=this.offset())throw Error("FlatBuffers: struct must be serialized inline.")},rw.Builder.prototype.notNested=function(){if(this.isNested)throw Error("FlatBuffers: object serialization must not be nested.")},rw.Builder.prototype.slot=function(r){this.vtable[r]=this.offset()},rw.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},rw.Builder.growByteBuffer=function(r){var n=r.capacity();if(3221225472&n)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var i=n<<1,a=rw.ByteBuffer.allocate(i);return a.setPosition(i-n),a.bytes().set(r.bytes(),i-n),a},rw.Builder.prototype.addOffset=function(r){this.prep(rw.SIZEOF_INT,0),this.writeInt32(this.offset()-r+rw.SIZEOF_INT)},rw.Builder.prototype.startObject=function(r){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=r;for(var n=0;n<r;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()},rw.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var r=this.offset(),n=this.vtable_in_use-1;n>=0&&0==this.vtable[n];n--);for(var i=n+1;n>=0;n--)this.addInt16(0!=this.vtable[n]?r-this.vtable[n]:0);this.addInt16(r-this.object_start);var a=(i+2)*rw.SIZEOF_SHORT;this.addInt16(a);var o=0,s=this.space;t:for(n=0;n<this.vtables.length;n++){var l=this.bb.capacity()-this.vtables[n];if(a==this.bb.readInt16(l)){for(var c=rw.SIZEOF_SHORT;c<a;c+=rw.SIZEOF_SHORT)if(this.bb.readInt16(s+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-r,this.bb.writeInt32(this.space,o-r)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-r,this.offset()-r)),this.isNested=!1,r},rw.Builder.prototype.finish=function(r,n){if(n){if(this.prep(this.minalign,rw.SIZEOF_INT+rw.FILE_IDENTIFIER_LENGTH),n.length!=rw.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+rw.FILE_IDENTIFIER_LENGTH);for(var i=rw.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(n.charCodeAt(i))}this.prep(this.minalign,rw.SIZEOF_INT),this.addOffset(r),this.bb.setPosition(this.space)},rw.Builder.prototype.requiredField=function(r,n){var i=this.bb.capacity()-r,a=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(a+n)))throw Error("FlatBuffers: field "+n+" must be set")},rw.Builder.prototype.startVector=function(r,n,i){this.notNested(),this.vector_num_elems=n,this.prep(rw.SIZEOF_INT,r*n),this.prep(i,r*n)},rw.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},rw.Builder.prototype.createString=function(r){if(r instanceof Uint8Array)var n=r;else for(var n=[],i=0;i<r.length;){var a,o=r.charCodeAt(i++);(a=o<55296||o>=56320?o:(o<<10)+r.charCodeAt(i++)+-56613888)<128?n.push(a):(a<2048?n.push(a>>6&31|192):(a<65536?n.push(a>>12&15|224):n.push(a>>18&7|240,a>>12&63|128),n.push(a>>6&63|128)),n.push(63&a|128))}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(var i=0,s=this.space,l=this.bb.bytes();i<n.length;i++)l[s++]=n[i];return this.endVector()},rw.Builder.prototype.createLong=function(r,n){return rw.Long.create(r,n)},rw.ByteBuffer=function(r){this.bytes_=r,this.position_=0},rw.ByteBuffer.allocate=function(r){return new rw.ByteBuffer(new Uint8Array(r))},rw.ByteBuffer.prototype.clear=function(){this.position_=0},rw.ByteBuffer.prototype.bytes=function(){return this.bytes_},rw.ByteBuffer.prototype.position=function(){return this.position_},rw.ByteBuffer.prototype.setPosition=function(r){this.position_=r},rw.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},rw.ByteBuffer.prototype.readInt8=function(r){return this.readUint8(r)<<24>>24},rw.ByteBuffer.prototype.readUint8=function(r){return this.bytes_[r]},rw.ByteBuffer.prototype.readInt16=function(r){return this.readUint16(r)<<16>>16},rw.ByteBuffer.prototype.readUint16=function(r){return this.bytes_[r]|this.bytes_[r+1]<<8},rw.ByteBuffer.prototype.readInt32=function(r){return this.bytes_[r]|this.bytes_[r+1]<<8|this.bytes_[r+2]<<16|this.bytes_[r+3]<<24},rw.ByteBuffer.prototype.readUint32=function(r){return this.readInt32(r)>>>0},rw.ByteBuffer.prototype.readInt64=function(r){return new rw.Long(this.readInt32(r),this.readInt32(r+4))},rw.ByteBuffer.prototype.readUint64=function(r){return new rw.Long(this.readUint32(r),this.readUint32(r+4))},rw.ByteBuffer.prototype.readFloat32=function(r){return rw.int32[0]=this.readInt32(r),rw.float32[0]},rw.ByteBuffer.prototype.readFloat64=function(r){return rw.int32[rw.isLittleEndian?0:1]=this.readInt32(r),rw.int32[rw.isLittleEndian?1:0]=this.readInt32(r+4),rw.float64[0]},rw.ByteBuffer.prototype.writeInt8=function(r,n){this.bytes_[r]=n},rw.ByteBuffer.prototype.writeUint8=function(r,n){this.bytes_[r]=n},rw.ByteBuffer.prototype.writeInt16=function(r,n){this.bytes_[r]=n,this.bytes_[r+1]=n>>8},rw.ByteBuffer.prototype.writeUint16=function(r,n){this.bytes_[r]=n,this.bytes_[r+1]=n>>8},rw.ByteBuffer.prototype.writeInt32=function(r,n){this.bytes_[r]=n,this.bytes_[r+1]=n>>8,this.bytes_[r+2]=n>>16,this.bytes_[r+3]=n>>24},rw.ByteBuffer.prototype.writeUint32=function(r,n){this.bytes_[r]=n,this.bytes_[r+1]=n>>8,this.bytes_[r+2]=n>>16,this.bytes_[r+3]=n>>24},rw.ByteBuffer.prototype.writeInt64=function(r,n){this.writeInt32(r,n.low),this.writeInt32(r+4,n.high)},rw.ByteBuffer.prototype.writeUint64=function(r,n){this.writeUint32(r,n.low),this.writeUint32(r+4,n.high)},rw.ByteBuffer.prototype.writeFloat32=function(r,n){rw.float32[0]=n,this.writeInt32(r,rw.int32[0])},rw.ByteBuffer.prototype.writeFloat64=function(r,n){rw.float64[0]=n,this.writeInt32(r,rw.int32[rw.isLittleEndian?0:1]),this.writeInt32(r+4,rw.int32[rw.isLittleEndian?1:0])},rw.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+rw.SIZEOF_INT+rw.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var r="",n=0;n<rw.FILE_IDENTIFIER_LENGTH;n++)r+=String.fromCharCode(this.readInt8(this.position_+rw.SIZEOF_INT+n));return r},rw.ByteBuffer.prototype.__offset=function(r,n){var i=r-this.readInt32(r);return n<this.readInt16(i)?this.readInt16(i+n):0},rw.ByteBuffer.prototype.__union=function(r,n){return r.bb_pos=n+this.readInt32(n),r.bb=this,r},rw.ByteBuffer.prototype.__string=function(r,n){r+=this.readInt32(r);var i=this.readInt32(r),a="",o=0;if(r+=rw.SIZEOF_INT,n===rw.Encoding.UTF8_BYTES)return this.bytes_.subarray(r,r+i);for(;o<i;){var s,l=this.readUint8(r+o++);if(l<192)s=l;else{var c=this.readUint8(r+o++);if(l<224)s=(31&l)<<6|63&c;else{var u=this.readUint8(r+o++);s=l<240?(15&l)<<12|(63&c)<<6|63&u:(7&l)<<18|(63&c)<<12|(63&u)<<6|63&this.readUint8(r+o++)}}s<65536?a+=String.fromCharCode(s):(s-=65536,a+=String.fromCharCode((s>>10)+55296,(1023&s)+56320))}return a},rw.ByteBuffer.prototype.__indirect=function(r){return r+this.readInt32(r)},rw.ByteBuffer.prototype.__vector=function(r){return r+this.readInt32(r)+rw.SIZEOF_INT},rw.ByteBuffer.prototype.__vector_len=function(r){return this.readInt32(r+this.readInt32(r))},rw.ByteBuffer.prototype.__has_identifier=function(r){if(r.length!=rw.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+rw.FILE_IDENTIFIER_LENGTH);for(var n=0;n<rw.FILE_IDENTIFIER_LENGTH;n++)if(r.charCodeAt(n)!=this.readInt8(this.position_+rw.SIZEOF_INT+n))return!1;return!0},rw.ByteBuffer.prototype.createLong=function(r,n){return rw.Long.create(r,n)};var rT={};e2=function(r){var n,i,a=function(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");-1===i&&(i=n);var a=i===n?0:4-i%4;return[i,a]}(r),o=a[0],s=a[1],l=new rM((o+s)*3/4-s),c=0,u=s>0?o-4:o;for(i=0;i<u;i+=4)n=rk[r.charCodeAt(i)]<<18|rk[r.charCodeAt(i+1)]<<12|rk[r.charCodeAt(i+2)]<<6|rk[r.charCodeAt(i+3)],l[c++]=n>>16&255,l[c++]=n>>8&255,l[c++]=255&n;return 2===s&&(n=rk[r.charCodeAt(i)]<<2|rk[r.charCodeAt(i+1)]>>4,l[c++]=255&n),1===s&&(n=rk[r.charCodeAt(i)]<<10|rk[r.charCodeAt(i+1)]<<4|rk[r.charCodeAt(i+2)]>>2,l[c++]=n>>8&255,l[c++]=255&n),l},e3=function(r){for(var n,i=r.length,a=i%3,o=[],s=0,l=i-a;s<l;s+=16383)o.push(function(r,n,i){for(var a,o=[],s=n;s<i;s+=3)o.push(rA[(a=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(255&r[s+2]))>>18&63]+rA[a>>12&63]+rA[a>>6&63]+rA[63&a]);return o.join("")}(r,s,s+16383>l?l:s+16383));return 1===a?o.push(rA[(n=r[i-1])>>2]+rA[n<<4&63]+"=="):2===a&&o.push(rA[(n=(r[i-2]<<8)+r[i-1])>>10]+rA[n>>4&63]+rA[n<<2&63]+"="),o.join("")};for(var rA=[],rk=[],rM="undefined"!=typeof Uint8Array?Uint8Array:Array,rS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rE=0,rI=rS.length;rE<rI;++rE)rA[rE]=rS[rE],rk[rS.charCodeAt(rE)]=rE;rk["-".charCodeAt(0)]=62,rk["_".charCodeAt(0)]=63,e4=function(r,n,i,a,o){var s,l,c=8*o-a-1,u=(1<<c)-1,f=u>>1,h=-7,p=i?o-1:0,d=i?-1:1,y=r[n+p];for(p+=d,s=y&(1<<-h)-1,y>>=-h,h+=c;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===u)return l?NaN:1/0*(y?-1:1);l+=Math.pow(2,a),s-=f}return(y?-1:1)*l*Math.pow(2,s-a)},e6=function(r,n,i,a,o,s){var l,c,u,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,y=a?0:s-1,g=a?1:-1,v=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(c=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-l))<1&&(l--,u*=2),l+p>=1?n+=d/u:n+=d*Math.pow(2,1-p),n*u>=2&&(l++,u/=2),l+p>=h?(c=0,l=h):l+p>=1?(c=(n*u-1)*Math.pow(2,o),l+=p):(c=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+y]=255&c,y+=g,c/=256,o-=8);for(l=l<<o|c,f+=o;f>0;r[i+y]=255&l,y+=g,l/=256,f-=8);r[i+y-g]|=128*v};const rL="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function rC(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');let n=new Uint8Array(r);return Object.setPrototypeOf(n,rO.prototype),n}function rO(r,n,i){if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return rB(r)}return rD(r,n,i)}function rD(r,n,i){if("string"==typeof r)return function(r,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!rO.isEncoding(n))throw TypeError("Unknown encoding: "+n);let i=0|rN(r,n),a=rC(i),o=a.write(r,n);return o!==i&&(a=a.slice(0,o)),a}(r,n);if(ArrayBuffer.isView(r))return function(r){if(r7(r,Uint8Array)){let n=new Uint8Array(r);return rz(n.buffer,n.byteOffset,n.byteLength)}return rR(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(r7(r,ArrayBuffer)||r&&r7(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(r7(r,SharedArrayBuffer)||r&&r7(r.buffer,SharedArrayBuffer)))return rz(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');let a=r.valueOf&&r.valueOf();if(null!=a&&a!==r)return rO.from(a,n,i);let o=function(r){var n;if(rO.isBuffer(r)){let n=0|rF(r.length),i=rC(n);return 0===i.length||r.copy(i,0,0,n),i}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n?rC(0):rR(r):"Buffer"===r.type&&Array.isArray(r.data)?rR(r.data):void 0}(r);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return rO.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function rP(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function rB(r){return rP(r),rC(r<0?0:0|rF(r))}function rR(r){let n=r.length<0?0:0|rF(r.length),i=rC(n);for(let a=0;a<n;a+=1)i[a]=255&r[a];return i}function rz(r,n,i){let a;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),rO.prototype),a}function rF(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function rN(r,n){if(rO.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||r7(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let i=r.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===i)return 0;let o=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return r6(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return r5(r).length;default:if(o)return a?-1:r6(r).length;n=(""+n).toLowerCase(),o=!0}}function rU(r,n,i){let a=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(n>>>=0)))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){let a=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>a)&&(i=a);let o="";for(let a=n;a<i;++a)o+=r9[r[a]];return o}(this,n,i);case"utf8":case"utf-8":return rq(this,n,i);case"ascii":return function(r,n,i){let a="";i=Math.min(r.length,i);for(let o=n;o<i;++o)a+=String.fromCharCode(127&r[o]);return a}(this,n,i);case"latin1":case"binary":return function(r,n,i){let a="";i=Math.min(r.length,i);for(let o=n;o<i;++o)a+=String.fromCharCode(r[o]);return a}(this,n,i);case"base64":var o,s;return o=n,s=i,0===o&&s===this.length?e3(this):e3(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){let a=r.slice(n,i),o="";for(let r=0;r<a.length-1;r+=2)o+=String.fromCharCode(a[r]+256*a[r+1]);return o}(this,n,i);default:if(a)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),a=!0}}function rj(r,n,i){let a=r[n];r[n]=r[i],r[i]=a}function rV(r,n,i,a,o){var s;if(0===r.length)return -1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(o)return -1;i=r.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=rO.from(n,a)),rO.isBuffer(n))return 0===n.length?-1:rH(r,n,i,a,o);if("number"==typeof n)return(n&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):rH(r,[n],i,a,o);throw TypeError("val must be string, number or Buffer")}function rH(r,n,i,a,o){let s,l=1,c=r.length,u=n.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||n.length<2)return -1;l=2,c/=2,u/=2,i/=2}function f(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(o){let a=-1;for(s=i;s<c;s++)if(f(r,s)===f(n,-1===a?0:s-a)){if(-1===a&&(a=s),s-a+1===u)return a*l}else -1!==a&&(s-=s-a),a=-1}else for(i+u>c&&(i=c-u),s=i;s>=0;s--){let i=!0;for(let a=0;a<u;a++)if(f(r,s+a)!==f(n,a)){i=!1;break}if(i)return s}return -1}function rq(r,n,i){i=Math.min(r.length,i);let a=[],o=n;for(;o<i;){let n=r[o],s=null,l=n>239?4:n>223?3:n>191?2:1;if(o+l<=i){let i,a,c,u;switch(l){case 1:n<128&&(s=n);break;case 2:(192&(i=r[o+1]))==128&&(u=(31&n)<<6|63&i)>127&&(s=u);break;case 3:i=r[o+1],a=r[o+2],(192&i)==128&&(192&a)==128&&(u=(15&n)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(s=u);break;case 4:i=r[o+1],a=r[o+2],c=r[o+3],(192&i)==128&&(192&a)==128&&(192&c)==128&&(u=(15&n)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&u<1114112&&(s=u)}}null===s?(s=65533,l=1):s>65535&&(s-=65536,a.push(s>>>10&1023|55296),s=56320|1023&s),a.push(s),o+=l}return function(r){let n=r.length;if(n<=4096)return String.fromCharCode.apply(String,r);let i="",a=0;for(;a<n;)i+=String.fromCharCode.apply(String,r.slice(a,a+=4096));return i}(a)}function rG(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function rW(r,n,i,a,o,s){if(!rO.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+a>r.length)throw RangeError("Index out of range")}function rY(r,n,i,a,o){r1(n,a,o,r,i,7);let s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;let l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function rZ(r,n,i,a,o){r1(n,a,o,r,i,7);let s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;let l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function rX(r,n,i,a,o,s){if(i+a>r.length||i<0)throw RangeError("Index out of range")}function rK(r,n,i,a,o){return n=+n,i>>>=0,o||rX(r,n,i,4,34028234663852886e22,-34028234663852886e22),e6(r,n,i,a,23,4),i+4}function rJ(r,n,i,a,o){return n=+n,i>>>=0,o||rX(r,n,i,8,17976931348623157e292,-17976931348623157e292),e6(r,n,i,a,52,8),i+8}rO.TYPED_ARRAY_SUPPORT=function(){try{let r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),rO.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(rO.prototype,"parent",{enumerable:!0,get:function(){if(rO.isBuffer(this))return this.buffer}}),Object.defineProperty(rO.prototype,"offset",{enumerable:!0,get:function(){if(rO.isBuffer(this))return this.byteOffset}}),rO.poolSize=8192,rO.from=function(r,n,i){return rD(r,n,i)},Object.setPrototypeOf(rO.prototype,Uint8Array.prototype),Object.setPrototypeOf(rO,Uint8Array),rO.alloc=function(r,n,i){return(rP(r),r<=0)?rC(r):void 0!==n?"string"==typeof i?rC(r).fill(n,i):rC(r).fill(n):rC(r)},rO.allocUnsafe=function(r){return rB(r)},rO.allocUnsafeSlow=function(r){return rB(r)},rO.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==rO.prototype},rO.compare=function(r,n){if(r7(r,Uint8Array)&&(r=rO.from(r,r.offset,r.byteLength)),r7(n,Uint8Array)&&(n=rO.from(n,n.offset,n.byteLength)),!rO.isBuffer(r)||!rO.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let i=r.length,a=n.length;for(let o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0},rO.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},rO.concat=function(r,n){let i;if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return rO.alloc(0);if(void 0===n)for(i=0,n=0;i<r.length;++i)n+=r[i].length;let a=rO.allocUnsafe(n),o=0;for(i=0;i<r.length;++i){let n=r[i];if(r7(n,Uint8Array))o+n.length>a.length?(rO.isBuffer(n)||(n=rO.from(n)),n.copy(a,o)):Uint8Array.prototype.set.call(a,n,o);else if(rO.isBuffer(n))n.copy(a,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=n.length}return a},rO.byteLength=rN,rO.prototype._isBuffer=!0,rO.prototype.swap16=function(){let r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<r;n+=2)rj(this,n,n+1);return this},rO.prototype.swap32=function(){let r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<r;n+=4)rj(this,n,n+3),rj(this,n+1,n+2);return this},rO.prototype.swap64=function(){let r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<r;n+=8)rj(this,n,n+7),rj(this,n+1,n+6),rj(this,n+2,n+5),rj(this,n+3,n+4);return this},rO.prototype.toString=function(){let r=this.length;return 0===r?"":0==arguments.length?rq(this,0,r):rU.apply(this,arguments)},rO.prototype.toLocaleString=rO.prototype.toString,rO.prototype.equals=function(r){if(!rO.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===rO.compare(this,r)},rO.prototype.inspect=function(){let r="";return r=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(r+=" ... "),"<Buffer "+r+">"},rL&&(rO.prototype[rL]=rO.prototype.inspect),rO.prototype.compare=function(r,n,i,a,o){if(r7(r,Uint8Array)&&(r=rO.from(r,r.offset,r.byteLength)),!rO.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),n<0||i>r.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&n>=i)return 0;if(a>=o)return -1;if(n>=i)return 1;if(n>>>=0,i>>>=0,a>>>=0,o>>>=0,this===r)return 0;let s=o-a,l=i-n,c=Math.min(s,l),u=this.slice(a,o),f=r.slice(n,i);for(let r=0;r<c;++r)if(u[r]!==f[r]){s=u[r],l=f[r];break}return s<l?-1:l<s?1:0},rO.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},rO.prototype.indexOf=function(r,n,i){return rV(this,r,n,i,!0)},rO.prototype.lastIndexOf=function(r,n,i){return rV(this,r,n,i,!1)},rO.prototype.write=function(r,n,i,a){var o,s,l,c,u,f,h,p;if(void 0===n)a="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)a=n,i=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-n;if((void 0===i||i>d)&&(i=d),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let y=!1;for(;;)switch(a){case"hex":return function(r,n,i,a){let o;i=Number(i)||0;let s=r.length-i;a?(a=Number(a))>s&&(a=s):a=s;let l=n.length;for(a>l/2&&(a=l/2),o=0;o<a;++o){let a=parseInt(n.substr(2*o,2),16);if(a!=a)break;r[i+o]=a}return o}(this,r,n,i);case"utf8":case"utf-8":return o=n,s=i,r8(r6(r,this.length-o),this,o,s);case"ascii":case"latin1":case"binary":return l=n,c=i,r8(function(r){let n=[];for(let i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,c);case"base64":return u=n,f=i,r8(r5(r),this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=n,p=i,r8(function(r,n){let i,a;let o=[];for(let s=0;s<r.length&&!((n-=2)<0);++s)a=(i=r.charCodeAt(s))>>8,o.push(i%256),o.push(a);return o}(r,this.length-h),this,h,p);default:if(y)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),y=!0}},rO.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},rO.prototype.slice=function(r,n){let i=this.length;r=~~r,n=void 0===n?i:~~n,r<0?(r+=i)<0&&(r=0):r>i&&(r=i),n<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);let a=this.subarray(r,n);return Object.setPrototypeOf(a,rO.prototype),a},rO.prototype.readUintLE=rO.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||rG(r,n,this.length);let a=this[r],o=1,s=0;for(;++s<n&&(o*=256);)a+=this[r+s]*o;return a},rO.prototype.readUintBE=rO.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||rG(r,n,this.length);let a=this[r+--n],o=1;for(;n>0&&(o*=256);)a+=this[r+--n]*o;return a},rO.prototype.readUint8=rO.prototype.readUInt8=function(r,n){return r>>>=0,n||rG(r,1,this.length),this[r]},rO.prototype.readUint16LE=rO.prototype.readUInt16LE=function(r,n){return r>>>=0,n||rG(r,2,this.length),this[r]|this[r+1]<<8},rO.prototype.readUint16BE=rO.prototype.readUInt16BE=function(r,n){return r>>>=0,n||rG(r,2,this.length),this[r]<<8|this[r+1]},rO.prototype.readUint32LE=rO.prototype.readUInt32LE=function(r,n){return r>>>=0,n||rG(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},rO.prototype.readUint32BE=rO.prototype.readUInt32BE=function(r,n){return r>>>=0,n||rG(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},rO.prototype.readBigUInt64LE=nt(function(r){r2(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&r3(r,this.length-8);let a=n+256*this[++r]+65536*this[++r]+16777216*this[++r],o=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(a)+(BigInt(o)<<BigInt(32))}),rO.prototype.readBigUInt64BE=nt(function(r){r2(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&r3(r,this.length-8);let a=16777216*n+65536*this[++r]+256*this[++r]+this[++r],o=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(a)<<BigInt(32))+BigInt(o)}),rO.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||rG(r,n,this.length);let a=this[r],o=1,s=0;for(;++s<n&&(o*=256);)a+=this[r+s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*n)),a},rO.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||rG(r,n,this.length);let a=n,o=1,s=this[r+--a];for(;a>0&&(o*=256);)s+=this[r+--a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},rO.prototype.readInt8=function(r,n){return(r>>>=0,n||rG(r,1,this.length),128&this[r])?-((255-this[r]+1)*1):this[r]},rO.prototype.readInt16LE=function(r,n){r>>>=0,n||rG(r,2,this.length);let i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},rO.prototype.readInt16BE=function(r,n){r>>>=0,n||rG(r,2,this.length);let i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},rO.prototype.readInt32LE=function(r,n){return r>>>=0,n||rG(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},rO.prototype.readInt32BE=function(r,n){return r>>>=0,n||rG(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},rO.prototype.readBigInt64LE=nt(function(r){r2(r>>>=0,"offset");let n=this[r],i=this[r+7];return(void 0===n||void 0===i)&&r3(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),rO.prototype.readBigInt64BE=nt(function(r){r2(r>>>=0,"offset");let n=this[r],i=this[r+7];return(void 0===n||void 0===i)&&r3(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),rO.prototype.readFloatLE=function(r,n){return r>>>=0,n||rG(r,4,this.length),e4(this,r,!0,23,4)},rO.prototype.readFloatBE=function(r,n){return r>>>=0,n||rG(r,4,this.length),e4(this,r,!1,23,4)},rO.prototype.readDoubleLE=function(r,n){return r>>>=0,n||rG(r,8,this.length),e4(this,r,!0,52,8)},rO.prototype.readDoubleBE=function(r,n){return r>>>=0,n||rG(r,8,this.length),e4(this,r,!1,52,8)},rO.prototype.writeUintLE=rO.prototype.writeUIntLE=function(r,n,i,a){if(r=+r,n>>>=0,i>>>=0,!a){let a=Math.pow(2,8*i)-1;rW(this,r,n,i,a,0)}let o=1,s=0;for(this[n]=255&r;++s<i&&(o*=256);)this[n+s]=r/o&255;return n+i},rO.prototype.writeUintBE=rO.prototype.writeUIntBE=function(r,n,i,a){if(r=+r,n>>>=0,i>>>=0,!a){let a=Math.pow(2,8*i)-1;rW(this,r,n,i,a,0)}let o=i-1,s=1;for(this[n+o]=255&r;--o>=0&&(s*=256);)this[n+o]=r/s&255;return n+i},rO.prototype.writeUint8=rO.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,1,255,0),this[n]=255&r,n+1},rO.prototype.writeUint16LE=rO.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},rO.prototype.writeUint16BE=rO.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},rO.prototype.writeUint32LE=rO.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},rO.prototype.writeUint32BE=rO.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},rO.prototype.writeBigUInt64LE=nt(function(r,n=0){return rY(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),rO.prototype.writeBigUInt64BE=nt(function(r,n=0){return rZ(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),rO.prototype.writeIntLE=function(r,n,i,a){if(r=+r,n>>>=0,!a){let a=Math.pow(2,8*i-1);rW(this,r,n,i,a-1,-a)}let o=0,s=1,l=0;for(this[n]=255&r;++o<i&&(s*=256);)r<0&&0===l&&0!==this[n+o-1]&&(l=1),this[n+o]=(r/s>>0)-l&255;return n+i},rO.prototype.writeIntBE=function(r,n,i,a){if(r=+r,n>>>=0,!a){let a=Math.pow(2,8*i-1);rW(this,r,n,i,a-1,-a)}let o=i-1,s=1,l=0;for(this[n+o]=255&r;--o>=0&&(s*=256);)r<0&&0===l&&0!==this[n+o+1]&&(l=1),this[n+o]=(r/s>>0)-l&255;return n+i},rO.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},rO.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},rO.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},rO.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},rO.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||rW(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},rO.prototype.writeBigInt64LE=nt(function(r,n=0){return rY(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),rO.prototype.writeBigInt64BE=nt(function(r,n=0){return rZ(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),rO.prototype.writeFloatLE=function(r,n,i){return rK(this,r,n,!0,i)},rO.prototype.writeFloatBE=function(r,n,i){return rK(this,r,n,!1,i)},rO.prototype.writeDoubleLE=function(r,n,i){return rJ(this,r,n,!0,i)},rO.prototype.writeDoubleBE=function(r,n,i){return rJ(this,r,n,!1,i)},rO.prototype.copy=function(r,n,i,a){if(!rO.isBuffer(r))throw TypeError("argument should be a Buffer");if(i||(i=0),a||0===a||(a=this.length),n>=r.length&&(n=r.length),n||(n=0),a>0&&a<i&&(a=i),a===i||0===r.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-n<a-i&&(a=r.length-n+i);let o=a-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,a):Uint8Array.prototype.set.call(r,this.subarray(i,a),n),o},rO.prototype.fill=function(r,n,i,a){let o;if("string"==typeof r){if("string"==typeof n?(a=n,n=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!rO.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===r.length){let n=r.charCodeAt(0);("utf8"===a&&n<128||"latin1"===a)&&(r=n)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(o=n;o<i;++o)this[o]=r;else{let s=rO.isBuffer(r)?r:rO.from(r,a),l=s.length;if(0===l)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<i-n;++o)this[o+n]=s[o%l]}return this};const r$={};function rQ(r,n,i){r$[r]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}function r0(r){let n="",i=r.length,a="-"===r[0]?1:0;for(;i>=a+4;i-=3)n=`_${r.slice(i-3,i)}${n}`;return`${r.slice(0,i)}${n}`}function r1(r,n,i,a,o,s){if(r>i||r<n){let a;let o="bigint"==typeof n?"n":"";throw a=s>3?0===n||n===BigInt(0)?`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:`>= ${n}${o} and <= ${i}${o}`,new r$.ERR_OUT_OF_RANGE("value",a,r)}r2(o,"offset"),(void 0===a[o]||void 0===a[o+s])&&r3(o,a.length-(s+1))}function r2(r,n){if("number"!=typeof r)throw new r$.ERR_INVALID_ARG_TYPE(n,"number",r)}function r3(r,n,i){if(Math.floor(r)!==r)throw r2(r,i),new r$.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new r$.ERR_BUFFER_OUT_OF_BOUNDS;throw new r$.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${n}`,r)}rQ("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rQ("ERR_INVALID_ARG_TYPE",function(r,n){return`The "${r}" argument must be of type number. Received type ${typeof n}`},TypeError),rQ("ERR_OUT_OF_RANGE",function(r,n,i){let a=`The value of "${r}" is out of range.`,o=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?o=r0(String(i)):"bigint"==typeof i&&(o=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(o=r0(o)),o+="n"),a+=` It must be ${n}. Received ${o}`},RangeError);const r4=/[^+/0-9A-Za-z-_]/g;function r6(r,n){let i;n=n||1/0;let a=r.length,o=null,s=[];for(let l=0;l<a;++l){if((i=r.charCodeAt(l))>55295&&i<57344){if(!o){if(i>56319||l+1===a){(n-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function r5(r){return e2(function(r){if((r=(r=r.split("=")[0]).trim().replace(r4,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function r8(r,n,i,a){let o;for(o=0;o<a&&!(o+i>=n.length)&&!(o>=r.length);++o)n[o+i]=r[o];return o}function r7(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}const r9=function(){let r="0123456789abcdef",n=Array(256);for(let i=0;i<16;++i){let a=16*i;for(let o=0;o<16;++o)n[a+o]=r[i]+r[o]}return n}();function nt(r){return"undefined"==typeof BigInt?ne:r}function ne(){throw Error("BigInt not supported")}function nr(r,n,i){return n<=r&&r<=i}function nn(r){if(void 0===r)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function ni(r){this.tokens=[].slice.call(r)}function na(r,n){if(r)throw TypeError("Decoder error");return n||65533}Object.defineProperty(rT,"__esModule",{value:!0}),ni.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(r){if(Array.isArray(r))for(;r.length;)this.tokens.unshift(r.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(;r.length;)this.tokens.push(r.shift());else this.tokens.push(r)}};var no="utf-8";function ns(r,n){if(!(this instanceof ns))return new ns(r,n);if((r=void 0!==r?String(r).toLowerCase():no)!==no)throw Error("Encoding not supported. Only utf-8 is supported");n=nn(n),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!n.fatal,this._ignoreBOM=!!n.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function nl(r,n){if(!(this instanceof nl))return new nl(r,n);if((r=void 0!==r?String(r).toLowerCase():no)!==no)throw Error("Encoding not supported. Only utf-8 is supported");n=nn(n),this._streaming=!1,this._encoder=null,this._options={fatal:!!n.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function nc(r){var n=r.fatal,i=0,a=0,o=0,s=128,l=191;this.handler=function(r,c){if(-1===c&&0!==o)return o=0,na(n);if(-1===c)return -1;if(0===o){if(nr(c,0,127))return c;if(nr(c,194,223))o=1,i=c-192;else if(nr(c,224,239))224===c&&(s=160),237===c&&(l=159),o=2,i=c-224;else{if(!nr(c,240,244))return na(n);240===c&&(s=144),244===c&&(l=143),o=3,i=c-240}return i<<=6*o,null}if(!nr(c,s,l))return i=o=a=0,s=128,l=191,r.prepend(c),na(n);if(s=128,l=191,a+=1,i+=c-128<<6*(o-a),a!==o)return null;var u=i;return i=o=a=0,u}}function nu(r){r.fatal,this.handler=function(r,n){if(-1===n)return -1;if(nr(n,0,127))return n;nr(n,128,2047)?(i=1,a=192):nr(n,2048,65535)?(i=2,a=224):nr(n,65536,1114111)&&(i=3,a=240);for(var i,a,o=[(n>>6*i)+a];i>0;){var s=n>>6*(i-1);o.push(128|63&s),i-=1}return o}}ns.prototype={decode:function(r,n){i="object"==typeof r&&r instanceof ArrayBuffer?new Uint8Array(r):"object"==typeof r&&"buffer"in r&&r.buffer instanceof ArrayBuffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(0),n=nn(n),this._streaming||(this._decoder=new nc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i,a,o=new ni(i),s=[];!o.endOfStream()&&-1!==(a=this._decoder.handler(o,o.read()));)null!==a&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));if(!this._streaming){do{if(-1===(a=this._decoder.handler(o,o.read())))break;if(null===a)continue;Array.isArray(a)?s.push.apply(s,a):s.push(a)}while(!o.endOfStream())this._decoder=null}return!s.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),function(r){for(var n="",i=0;i<r.length;++i){var a=r[i];a<=65535?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode((a>>10)+55296,(1023&a)+56320))}return n}(s)}},nl.prototype={encode:function(r,n){r=r?String(r):"",n=nn(n),this._streaming||(this._encoder=new nu(this._options)),this._streaming=!!n.stream;for(var i,a=[],o=new ni(function(r){for(var n=String(r),i=n.length,a=0,o=[];a<i;){var s=n.charCodeAt(a);if(s<55296||s>57343)o.push(s);else if(56320<=s&&s<=57343)o.push(65533);else if(55296<=s&&s<=56319){if(a===i-1)o.push(65533);else{var l=r.charCodeAt(a+1);if(56320<=l&&l<=57343){var c=1023&s,u=1023&l;o.push(65536+(c<<10)+u),a+=1}else o.push(65533)}}a+=1}return o}(r));!o.endOfStream()&&-1!==(i=this._encoder.handler(o,o.read()));)Array.isArray(i)?a.push.apply(a,i):a.push(i);if(!this._streaming){for(;-1!==(i=this._encoder.handler(o,o.read()));)Array.isArray(i)?a.push.apply(a,i):a.push(i);this._encoder=null}return new Uint8Array(a)}};const nf="function"==typeof TextDecoder&&"function"==typeof TextEncoder;rT.decodeUtf8=(r=>{if(nf||!rO){let n=new r("utf-8");return r=>n.decode(r)}return r=>{let{buffer:n,byteOffset:i,length:a}=r_.toUint8Array(r);return rO.from(n,i,a).toString()}})("undefined"!=typeof TextDecoder?TextDecoder:ns),rT.encodeUtf8=(r=>{if(nf||!rO){let n=new r;return r=>n.encode(r)}return (r="")=>r_.toUint8Array(rO.from(r,"utf8"))})("undefined"!=typeof TextEncoder?TextEncoder:nl);var nh=rw.ByteBuffer,np={};Object.defineProperty(np,"__esModule",{value:!0});var nd={};Object.defineProperty(nd,"__esModule",{value:!0}),nd.ITERATOR_DONE=Object.freeze({done:!0,value:void 0}),nd.ArrowJSON=class{constructor(r){this._json=r}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}};class ny{tee(){return this._getDOMStream().tee()}pipe(r,n){return this._getNodeStream().pipe(r,n)}pipeTo(r,n){return this._getDOMStream().pipeTo(r,n)}pipeThrough(r,n){return this._getDOMStream().pipeThrough(r,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}nd.ReadableInterop=ny;class ng extends ny{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}get closed(){return this._closedPromise}async cancel(r){await this.return(r)}write(r){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(r):this.resolvers.shift().resolve({done:!1,value:r}))}abort(r){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:r}:this.resolvers.shift().reject({done:!0,value:r}))}close(){if(this._closedPromiseResolve){let{resolvers:r}=this;for(;r.length>0;)r.shift().resolve(nd.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(r){return rb.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,r)}toNodeStream(r){return rb.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,r)}async throw(r){return await this.abort(r),nd.ITERATOR_DONE}async return(r){return await this.close(),nd.ITERATOR_DONE}async read(r){return(await this.next(r,"read")).value}async peek(r){return(await this.next(r,"peek")).value}next(...r){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,n)=>{this.resolvers.push({resolve:r,reject:n})}):Promise.resolve(nd.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error(`${this} is closed`)}}nd.AsyncQueue=ng;const[nv,nm]=(()=>{let r=()=>{throw Error("BigInt is not available in this environment")};function n(){throw r()}return n.asIntN=()=>{throw r()},n.asUintN=()=>{throw r()},"undefined"!=typeof BigInt?[BigInt,!0]:[n,!1]})();np.BigInt=nv,np.BigIntAvailable=nm;const[nx,nb]=(()=>{let r=()=>{throw Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}},!1]})();np.BigInt64Array=nx,np.BigInt64ArrayAvailable=nb;const[n_,nw]=(()=>{let r=()=>{throw Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}},!1]})();np.BigUint64Array=n_,np.BigUint64ArrayAvailable=nw;const nT=r=>"number"==typeof r,nA=r=>"boolean"==typeof r,nk=r=>"function"==typeof r;np.isObject=r=>null!=r&&Object(r)===r,np.isPromise=r=>np.isObject(r)&&nk(r.then),np.isObservable=r=>np.isObject(r)&&nk(r.subscribe),np.isIterable=r=>np.isObject(r)&&nk(r[Symbol.iterator]),np.isAsyncIterable=r=>np.isObject(r)&&nk(r[Symbol.asyncIterator]),np.isArrowJSON=r=>np.isObject(r)&&np.isObject(r.schema),np.isArrayLike=r=>np.isObject(r)&&nT(r.length),np.isIteratorResult=r=>np.isObject(r)&&"done"in r&&"value"in r,np.isUnderlyingSink=r=>np.isObject(r)&&nk(r.abort)&&nk(r.close)&&nk(r.start)&&nk(r.write),np.isFileHandle=r=>np.isObject(r)&&nk(r.stat)&&nT(r.fd),np.isFSReadStream=r=>np.isReadableNodeStream(r)&&nT(r.bytesRead),np.isFetchResponse=r=>np.isObject(r)&&np.isReadableDOMStream(r.body),np.isWritableDOMStream=r=>np.isObject(r)&&nk(r.abort)&&nk(r.getWriter)&&!(r instanceof nd.ReadableInterop),np.isReadableDOMStream=r=>np.isObject(r)&&nk(r.cancel)&&nk(r.getReader)&&!(r instanceof nd.ReadableInterop),np.isWritableNodeStream=r=>np.isObject(r)&&nk(r.end)&&nk(r.write)&&nA(r.writable)&&!(r instanceof nd.ReadableInterop),np.isReadableNodeStream=r=>np.isObject(r)&&nk(r.read)&&nk(r.pipe)&&nA(r.readable)&&!(r instanceof nd.ReadableInterop);const nM="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function nS(r,n,i=0,a=n.byteLength){let o=r.byteLength,s=new Uint8Array(r.buffer,r.byteOffset,o),l=new Uint8Array(n.buffer,n.byteOffset,Math.min(a,o));return s.set(l,i),r}function nE(r,n){let i=np.isIteratorResult(n)?n.value:n;return i instanceof r?r===Uint8Array?new r(i.buffer,i.byteOffset,i.byteLength):i:i?("string"==typeof i&&(i=rT.encodeUtf8(i)),i instanceof ArrayBuffer||i instanceof nM)?new r(i):i instanceof nh?nE(r,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new r(0):new r(i.buffer,i.byteOffset,i.byteLength/r.BYTES_PER_ELEMENT):r.from(i):new r(0)}r_.memcpy=nS,r_.joinUint8Arrays=function(r,n){let i,a,o,s=function(r){let n,i,a,o,s=r[0]?[r[0]]:[];for(let l,c,u=0,f=0,h=r.length;++u<h;){if(l=s[f],c=r[u],!l||!c||l.buffer!==c.buffer||c.byteOffset<l.byteOffset||({byteOffset:n,byteLength:a}=l,{byteOffset:i,byteLength:o}=c,n+a<i||i+o<n)){c&&(s[++f]=c);continue}s[f]=new Uint8Array(l.buffer,n,i-n+o)}return s}(r),l=s.reduce((r,n)=>r+n.byteLength,0),c=0,u=-1,f=Math.min(n||1/0,l);for(let r=s.length;++u<r;){if(a=(i=s[u]).subarray(0,Math.min(i.length,f-c)),f<=c+a.length){a.length<i.length?s[u]=i.subarray(a.length):a.length===i.length&&u++,o?nS(o,a,c):o=a;break}nS(o||(o=new Uint8Array(f)),a,c),c+=a.length}return[o||new Uint8Array(0),s.slice(u),l-(o?o.byteLength:0)]},r_.toArrayBufferView=nE,r_.toInt8Array=r=>nE(Int8Array,r),r_.toInt16Array=r=>nE(Int16Array,r),r_.toInt32Array=r=>nE(Int32Array,r),r_.toBigInt64Array=r=>nE(np.BigInt64Array,r),r_.toUint8Array=r=>nE(Uint8Array,r),r_.toUint16Array=r=>nE(Uint16Array,r),r_.toUint32Array=r=>nE(Uint32Array,r),r_.toBigUint64Array=r=>nE(np.BigUint64Array,r),r_.toFloat32Array=r=>nE(Float32Array,r),r_.toFloat64Array=r=>nE(Float64Array,r),r_.toUint8ClampedArray=r=>nE(Uint8ClampedArray,r);const nI=r=>(r.next(),r);function*nL(r,n){let i=function*(r){yield r},a="string"==typeof n?i(n):ArrayBuffer.isView(n)?i(n):n instanceof ArrayBuffer?i(n):n instanceof nM?i(n):np.isIterable(n)?n:i(n);yield*nI(function*(n){let i=null;do i=n.next((yield nE(r,i)));while(!i.done)}(a[Symbol.iterator]()))}async function*nC(r,n){if(np.isPromise(n))return yield*nC(r,await n);let i=async function*(r){yield await r},a=async function*(r){yield*nI(function*(r){let n=null;do n=r.next((yield n&&n.value));while(!n.done)}(r[Symbol.iterator]()))},o="string"==typeof n?i(n):ArrayBuffer.isView(n)?i(n):n instanceof ArrayBuffer?i(n):n instanceof nM?i(n):np.isIterable(n)?a(n):np.isAsyncIterable(n)?n:i(n);yield*nI(async function*(n){let i=null;do i=await n.next((yield nE(r,i)));while(!i.done)}(o[Symbol.asyncIterator]()))}r_.toArrayBufferViewIterator=nL,r_.toInt8ArrayIterator=r=>nL(Int8Array,r),r_.toInt16ArrayIterator=r=>nL(Int16Array,r),r_.toInt32ArrayIterator=r=>nL(Int32Array,r),r_.toUint8ArrayIterator=r=>nL(Uint8Array,r),r_.toUint16ArrayIterator=r=>nL(Uint16Array,r),r_.toUint32ArrayIterator=r=>nL(Uint32Array,r),r_.toFloat32ArrayIterator=r=>nL(Float32Array,r),r_.toFloat64ArrayIterator=r=>nL(Float64Array,r),r_.toUint8ClampedArrayIterator=r=>nL(Uint8ClampedArray,r),r_.toArrayBufferViewAsyncIterator=nC,r_.toInt8ArrayAsyncIterator=r=>nC(Int8Array,r),r_.toInt16ArrayAsyncIterator=r=>nC(Int16Array,r),r_.toInt32ArrayAsyncIterator=r=>nC(Int32Array,r),r_.toUint8ArrayAsyncIterator=r=>nC(Uint8Array,r),r_.toUint16ArrayAsyncIterator=r=>nC(Uint16Array,r),r_.toUint32ArrayAsyncIterator=r=>nC(Uint32Array,r),r_.toFloat32ArrayAsyncIterator=r=>nC(Float32Array,r),r_.toFloat64ArrayAsyncIterator=r=>nC(Float64Array,r),r_.toUint8ClampedArrayAsyncIterator=r=>nC(Uint8ClampedArray,r),r_.rebaseValueOffsets=function(r,n,i){if(0!==r){i=i.slice(0,n+1);for(let a=-1;++a<=n;)i[a]+=r}return i},r_.compareArrayLike=function(r,n){let i=0,a=r.length;if(a!==n.length)return!1;if(a>0)do if(r[i]!==n[i])return!1;while(++i<a)return!0},rb.default={fromIterable:r=>nO(function*(r){let n,i=!1,a=[],o,s,l,c=0;({cmd:s,size:l}=yield null);let u=r_.toUint8ArrayIterator(r)[Symbol.iterator]();try{do if({done:n,value:o}=isNaN(l-c)?u.next(void 0):u.next(l-c),!n&&o.byteLength>0&&(a.push(o),c+=o.byteLength),n||l<=c)do({cmd:s,size:l}=yield"peek"===s?r_.joinUint8Arrays(a,l)[0]:([o,a,c]=r_.joinUint8Arrays(a,l),o));while(l<c)while(!n)}catch(r){i=!0,"function"==typeof u.throw&&u.throw(r)}finally{!1===i&&"function"==typeof u.return&&u.return()}}(r)),fromAsyncIterable:r=>nO(nD(r)),fromDOMStream:r=>nO(nP(r)),fromNodeStream:r=>nO(nF(r)),toDOMStream(r,n){throw Error('"toDOMStream" not available in this environment')},toNodeStream(r,n){throw Error('"toNodeStream" not available in this environment')}};const nO=r=>(r.next(),r);async function*nD(r){let n,i=!1,a=[],o,s,l,c=0;({cmd:s,size:l}=yield null);let u=r_.toUint8ArrayAsyncIterator(r)[Symbol.asyncIterator]();try{do if({done:n,value:o}=isNaN(l-c)?await u.next(void 0):await u.next(l-c),!n&&o.byteLength>0&&(a.push(o),c+=o.byteLength),n||l<=c)do({cmd:s,size:l}=yield"peek"===s?r_.joinUint8Arrays(a,l)[0]:([o,a,c]=r_.joinUint8Arrays(a,l),o));while(l<c)while(!n)}catch(r){i=!0,"function"==typeof u.throw&&await u.throw(r)}finally{!1===i&&"function"==typeof u.return&&await u.return()}}async function*nP(r){let n=!1,i=!1,a=[],o,s,l,c=0;({cmd:s,size:l}=yield null);let u=new nB(r);try{do if({done:n,value:o}=isNaN(l-c)?await u.read(void 0):await u.read(l-c),!n&&o.byteLength>0&&(a.push(r_.toUint8Array(o)),c+=o.byteLength),n||l<=c)do({cmd:s,size:l}=yield"peek"===s?r_.joinUint8Arrays(a,l)[0]:([o,a,c]=r_.joinUint8Arrays(a,l),o));while(l<c)while(!n)}catch(r){i=!0,await u.cancel(r)}finally{!1===i?await u.cancel():r.locked&&u.releaseLock()}}class nB{constructor(r){this.source=r,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(r){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(r){let{reader:n,source:i}=this;n&&await n.cancel(r).catch(()=>{}),i&&i.locked&&this.releaseLock()}async read(r){if(0===r)return{done:null==this.reader,value:new Uint8Array(0)};let n=this.supportsBYOB&&"number"==typeof r?await this.readFromBYOBReader(r):await this.getDefaultReader().read();return n.done||(n.value=r_.toUint8Array(n)),n}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}async readFromBYOBReader(r){return await nR(this.getBYOBReader(),new ArrayBuffer(r),0,r)}}async function nR(r,n,i,a){if(i>=a)return{done:!1,value:new Uint8Array(n,0,a)};let{done:o,value:s}=await r.read(new Uint8Array(n,i,a-i));return(i+=s.byteLength)<a&&!o?await nR(r,s.buffer,i,a):{done:o,value:new Uint8Array(s.buffer,0,i)}}const nz=(r,n)=>{let i,a=r=>i([n,r]);return[n,a,new Promise(o=>(i=o)&&r.once(n,a))]};async function*nF(r){let n=[],i="error",a=!1,o=null,s,l,c=0,u=[],f;if({cmd:s,size:l}=yield null,r.isTTY)return yield new Uint8Array(0);try{n[0]=nz(r,"end"),n[1]=nz(r,"error");do{if(n[2]=nz(r,"readable"),[i,o]=await Promise.race(n.map(r=>r[2])),"error"===i)break;if((a="end"===i)||(isFinite(l-c)?(f=r_.toUint8Array(r.read(l-c))).byteLength<l-c&&(f=r_.toUint8Array(r.read(void 0))):f=r_.toUint8Array(r.read(void 0)),f.byteLength>0&&(u.push(f),c+=f.byteLength)),a||l<=c)do({cmd:s,size:l}=yield"peek"===s?r_.joinUint8Arrays(u,l)[0]:([f,u,c]=r_.joinUint8Arrays(u,l),f));while(l<c)}while(!a)}finally{var h;await (h="error"===i?o:null,f=u=null,new Promise(async(i,a)=>{for(let[i,a]of n)r.off(i,a);try{let n=r.destroy;n&&n.call(r,h),h=void 0}catch(r){h=r||h}finally{null!=h?a(h):i()}}))}}var nN={};Object.defineProperty(nN,"__esModule",{value:!0});var nU={};Object.defineProperty(nU,"__esModule",{value:!0});var nj={};Object.defineProperty(nj,"__esModule",{value:!0});class nV{}nj.AbstractVector=nV,nj.Vector=nV;var nH={};Object.defineProperty(nH,"__esModule",{value:!0});var nq={};Object.defineProperty(nq,"__esModule",{value:!0}),(f=(u=(c=(l=(s=nq.org||(nq.org={})).apache||(s.apache={})).arrow||(l.arrow={})).flatbuf||(c.flatbuf={})).MetadataVersion||(u.MetadataVersion={}))[f.V1=0]="V1",f[f.V2=1]="V2",f[f.V3=2]="V3",f[f.V4=3]="V4",(g=(y=(d=(p=(h=nq.org||(nq.org={})).apache||(h.apache={})).arrow||(p.arrow={})).flatbuf||(d.flatbuf={})).UnionMode||(y.UnionMode={}))[g.Sparse=0]="Sparse",g[g.Dense=1]="Dense",(_=(b=(x=(m=(v=nq.org||(nq.org={})).apache||(v.apache={})).arrow||(m.arrow={})).flatbuf||(x.flatbuf={})).Precision||(b.Precision={}))[_.HALF=0]="HALF",_[_.SINGLE=1]="SINGLE",_[_.DOUBLE=2]="DOUBLE",(M=(k=(A=(T=(w=nq.org||(nq.org={})).apache||(w.apache={})).arrow||(T.arrow={})).flatbuf||(A.flatbuf={})).DateUnit||(k.DateUnit={}))[M.DAY=0]="DAY",M[M.MILLISECOND=1]="MILLISECOND",(C=(L=(I=(E=(S=nq.org||(nq.org={})).apache||(S.apache={})).arrow||(E.arrow={})).flatbuf||(I.flatbuf={})).TimeUnit||(L.TimeUnit={}))[C.SECOND=0]="SECOND",C[C.MILLISECOND=1]="MILLISECOND",C[C.MICROSECOND=2]="MICROSECOND",C[C.NANOSECOND=3]="NANOSECOND",(R=(B=(P=(D=(O=nq.org||(nq.org={})).apache||(O.apache={})).arrow||(D.arrow={})).flatbuf||(P.flatbuf={})).IntervalUnit||(B.IntervalUnit={}))[R.YEAR_MONTH=0]="YEAR_MONTH",R[R.DAY_TIME=1]="DAY_TIME",(j=(U=(N=(F=(z=nq.org||(nq.org={})).apache||(z.apache={})).arrow||(F.arrow={})).flatbuf||(N.flatbuf={})).Type||(U.Type={}))[j.NONE=0]="NONE",j[j.Null=1]="Null",j[j.Int=2]="Int",j[j.FloatingPoint=3]="FloatingPoint",j[j.Binary=4]="Binary",j[j.Utf8=5]="Utf8",j[j.Bool=6]="Bool",j[j.Decimal=7]="Decimal",j[j.Date=8]="Date",j[j.Time=9]="Time",j[j.Timestamp=10]="Timestamp",j[j.Interval=11]="Interval",j[j.List=12]="List",j[j.Struct_=13]="Struct_",j[j.Union=14]="Union",j[j.FixedSizeBinary=15]="FixedSizeBinary",j[j.FixedSizeList=16]="FixedSizeList",j[j.Map=17]="Map",j[j.Duration=18]="Duration",j[j.LargeBinary=19]="LargeBinary",j[j.LargeUtf8=20]="LargeUtf8",j[j.LargeList=21]="LargeList",(W=(G=(q=(H=(V=nq.org||(nq.org={})).apache||(V.apache={})).arrow||(H.arrow={})).flatbuf||(q.flatbuf={})).Endianness||(G.Endianness={}))[W.Little=0]="Little",W[W.Big=1]="Big",function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsNull(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startNull(r){r.startObject(0)}static endNull(r){return r.endObject()}static createNull(r){return n.startNull(r),n.endNull(r)}}r.Null=n}((X=(Z=(Y=nq.org||(nq.org={})).apache||(Y.apache={})).arrow||(Z.arrow={})).flatbuf||(X.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsStruct_(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startStruct_(r){r.startObject(0)}static endStruct_(r){return r.endObject()}static createStruct_(r){return n.startStruct_(r),n.endStruct_(r)}}r.Struct_=n}(($=(J=(K=nq.org||(nq.org={})).apache||(K.apache={})).arrow||(J.arrow={})).flatbuf||($.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsList(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startList(r){r.startObject(0)}static endList(r){return r.endObject()}static createList(r){return n.startList(r),n.endList(r)}}r.List=n}((te=(tt=(Q=nq.org||(nq.org={})).apache||(Q.apache={})).arrow||(tt.arrow={})).flatbuf||(te.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsLargeList(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startLargeList(r){r.startObject(0)}static endLargeList(r){return r.endObject()}static createLargeList(r){return n.startLargeList(r),n.endLargeList(r)}}r.LargeList=n}((ti=(tn=(tr=nq.org||(nq.org={})).apache||(tr.apache={})).arrow||(tn.arrow={})).flatbuf||(ti.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsFixedSizeList(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}listSize(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}static startFixedSizeList(r){r.startObject(1)}static addListSize(r,n){r.addFieldInt32(0,n,0)}static endFixedSizeList(r){return r.endObject()}static createFixedSizeList(r,i){return n.startFixedSizeList(r),n.addListSize(r,i),n.endFixedSizeList(r)}}r.FixedSizeList=n}((ts=(to=(ta=nq.org||(nq.org={})).apache||(ta.apache={})).arrow||(to.arrow={})).flatbuf||(ts.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsMap(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}keysSorted(){let r=this.bb.__offset(this.bb_pos,4);return!!r&&!!this.bb.readInt8(this.bb_pos+r)}static startMap(r){r.startObject(1)}static addKeysSorted(r,n){r.addFieldInt8(0,+n,0)}static endMap(r){return r.endObject()}static createMap(r,i){return n.startMap(r),n.addKeysSorted(r,i),n.endMap(r)}}r.Map=n}((tu=(tc=(tl=nq.org||(nq.org={})).apache||(tl.apache={})).arrow||(tc.arrow={})).flatbuf||(tu.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsUnion(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}mode(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tf.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(r){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+4*r):0}typeIdsLength(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__vector_len(this.bb_pos+r):0}typeIdsArray(){let r=this.bb.__offset(this.bb_pos,6);return r?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+r),this.bb.__vector_len(this.bb_pos+r)):null}static startUnion(r){r.startObject(2)}static addMode(r,n){r.addFieldInt16(0,n,tf.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(r,n){r.addFieldOffset(1,n,0)}static createTypeIdsVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addInt32(n[i]);return r.endVector()}static startTypeIdsVector(r,n){r.startVector(4,n,4)}static endUnion(r){return r.endObject()}static createUnion(r,i,a){return n.startUnion(r),n.addMode(r,i),n.addTypeIds(r,a),n.endUnion(r)}}r.Union=n}((tp=(th=(tf=nq.org||(nq.org={})).apache||(tf.apache={})).arrow||(th.arrow={})).flatbuf||(tp.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsInt(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}bitWidth(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}isSigned(){let r=this.bb.__offset(this.bb_pos,6);return!!r&&!!this.bb.readInt8(this.bb_pos+r)}static startInt(r){r.startObject(2)}static addBitWidth(r,n){r.addFieldInt32(0,n,0)}static addIsSigned(r,n){r.addFieldInt8(1,+n,0)}static endInt(r){return r.endObject()}static createInt(r,i,a){return n.startInt(r),n.addBitWidth(r,i),n.addIsSigned(r,a),n.endInt(r)}}r.Int=n}((tg=(ty=(td=nq.org||(nq.org={})).apache||(td.apache={})).arrow||(ty.arrow={})).flatbuf||(tg.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsFloatingPoint(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}precision(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tv.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(r){r.startObject(1)}static addPrecision(r,n){r.addFieldInt16(0,n,tv.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(r){return r.endObject()}static createFloatingPoint(r,i){return n.startFloatingPoint(r),n.addPrecision(r,i),n.endFloatingPoint(r)}}r.FloatingPoint=n}((tx=(tm=(tv=nq.org||(nq.org={})).apache||(tv.apache={})).arrow||(tm.arrow={})).flatbuf||(tx.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsUtf8(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startUtf8(r){r.startObject(0)}static endUtf8(r){return r.endObject()}static createUtf8(r){return n.startUtf8(r),n.endUtf8(r)}}r.Utf8=n}((tw=(t_=(tb=nq.org||(nq.org={})).apache||(tb.apache={})).arrow||(t_.arrow={})).flatbuf||(tw.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsBinary(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startBinary(r){r.startObject(0)}static endBinary(r){return r.endObject()}static createBinary(r){return n.startBinary(r),n.endBinary(r)}}r.Binary=n}((tk=(tA=(tT=nq.org||(nq.org={})).apache||(tT.apache={})).arrow||(tA.arrow={})).flatbuf||(tk.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsLargeUtf8(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startLargeUtf8(r){r.startObject(0)}static endLargeUtf8(r){return r.endObject()}static createLargeUtf8(r){return n.startLargeUtf8(r),n.endLargeUtf8(r)}}r.LargeUtf8=n}((tE=(tS=(tM=nq.org||(nq.org={})).apache||(tM.apache={})).arrow||(tS.arrow={})).flatbuf||(tE.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsLargeBinary(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startLargeBinary(r){r.startObject(0)}static endLargeBinary(r){return r.endObject()}static createLargeBinary(r){return n.startLargeBinary(r),n.endLargeBinary(r)}}r.LargeBinary=n}((tC=(tL=(tI=nq.org||(nq.org={})).apache||(tI.apache={})).arrow||(tL.arrow={})).flatbuf||(tC.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsFixedSizeBinary(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}byteWidth(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}static startFixedSizeBinary(r){r.startObject(1)}static addByteWidth(r,n){r.addFieldInt32(0,n,0)}static endFixedSizeBinary(r){return r.endObject()}static createFixedSizeBinary(r,i){return n.startFixedSizeBinary(r),n.addByteWidth(r,i),n.endFixedSizeBinary(r)}}r.FixedSizeBinary=n}((tP=(tD=(tO=nq.org||(nq.org={})).apache||(tO.apache={})).arrow||(tD.arrow={})).flatbuf||(tP.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsBool(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}static startBool(r){r.startObject(0)}static endBool(r){return r.endObject()}static createBool(r){return n.startBool(r),n.endBool(r)}}r.Bool=n}((tz=(tR=(tB=nq.org||(nq.org={})).apache||(tB.apache={})).arrow||(tR.arrow={})).flatbuf||(tz.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsDecimal(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}precision(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}scale(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb_pos+r):0}static startDecimal(r){r.startObject(2)}static addPrecision(r,n){r.addFieldInt32(0,n,0)}static addScale(r,n){r.addFieldInt32(1,n,0)}static endDecimal(r){return r.endObject()}static createDecimal(r,i,a){return n.startDecimal(r),n.addPrecision(r,i),n.addScale(r,a),n.endDecimal(r)}}r.Decimal=n}((tU=(tN=(tF=nq.org||(nq.org={})).apache||(tF.apache={})).arrow||(tN.arrow={})).flatbuf||(tU.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsDate(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}unit(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tj.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(r){r.startObject(1)}static addUnit(r,n){r.addFieldInt16(0,n,tj.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(r){return r.endObject()}static createDate(r,i){return n.startDate(r),n.addUnit(r,i),n.endDate(r)}}r.Date=n}((tH=(tV=(tj=nq.org||(nq.org={})).apache||(tj.apache={})).arrow||(tV.arrow={})).flatbuf||(tH.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsTime(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}unit(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tq.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb_pos+r):32}static startTime(r){r.startObject(2)}static addUnit(r,n){r.addFieldInt16(0,n,tq.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(r,n){r.addFieldInt32(1,n,32)}static endTime(r){return r.endObject()}static createTime(r,i,a){return n.startTime(r),n.addUnit(r,i),n.addBitWidth(r,a),n.endTime(r)}}r.Time=n}((tW=(tG=(tq=nq.org||(nq.org={})).apache||(tq.apache={})).arrow||(tG.arrow={})).flatbuf||(tW.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsTimestamp(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}unit(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tY.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(r){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,r):null}static startTimestamp(r){r.startObject(2)}static addUnit(r,n){r.addFieldInt16(0,n,tY.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(r,n){r.addFieldOffset(1,n,0)}static endTimestamp(r){return r.endObject()}static createTimestamp(r,i,a){return n.startTimestamp(r),n.addUnit(r,i),n.addTimezone(r,a),n.endTimestamp(r)}}r.Timestamp=n}((tX=(tZ=(tY=nq.org||(nq.org={})).apache||(tY.apache={})).arrow||(tZ.arrow={})).flatbuf||(tX.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsInterval(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}unit(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tK.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(r){r.startObject(1)}static addUnit(r,n){r.addFieldInt16(0,n,tK.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(r){return r.endObject()}static createInterval(r,i){return n.startInterval(r),n.addUnit(r,i),n.endInterval(r)}}r.Interval=n}((t$=(tJ=(tK=nq.org||(nq.org={})).apache||(tK.apache={})).arrow||(tJ.arrow={})).flatbuf||(t$.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsDuration(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}unit(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):tQ.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(r){r.startObject(1)}static addUnit(r,n){r.addFieldInt16(0,n,tQ.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(r){return r.endObject()}static createDuration(r,i){return n.startDuration(r),n.addUnit(r,i),n.endDuration(r)}}r.Duration=n}((t1=(t0=(tQ=nq.org||(nq.org={})).apache||(tQ.apache={})).arrow||(t0.arrow={})).flatbuf||(t1.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsKeyValue(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}key(r){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,r):null}value(r){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,r):null}static startKeyValue(r){r.startObject(2)}static addKey(r,n){r.addFieldOffset(0,n,0)}static addValue(r,n){r.addFieldOffset(1,n,0)}static endKeyValue(r){return r.endObject()}static createKeyValue(r,i,a){return n.startKeyValue(r),n.addKey(r,i),n.addValue(r,a),n.endKeyValue(r)}}r.KeyValue=n}((t4=(t3=(t2=nq.org||(nq.org={})).apache||(t2.apache={})).arrow||(t3.arrow={})).flatbuf||(t4.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsDictionaryEncoding(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}id(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):this.bb.createLong(0,0)}indexType(r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new t6.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){let r=this.bb.__offset(this.bb_pos,8);return!!r&&!!this.bb.readInt8(this.bb_pos+r)}static startDictionaryEncoding(r){r.startObject(3)}static addId(r,n){r.addFieldInt64(0,n,r.createLong(0,0))}static addIndexType(r,n){r.addFieldOffset(1,n,0)}static addIsOrdered(r,n){r.addFieldInt8(2,+n,0)}static endDictionaryEncoding(r){return r.endObject()}static createDictionaryEncoding(r,i,a,o){return n.startDictionaryEncoding(r),n.addId(r,i),n.addIndexType(r,a),n.addIsOrdered(r,o),n.endDictionaryEncoding(r)}}r.DictionaryEncoding=n}((t8=(t5=(t6=nq.org||(nq.org={})).apache||(t6.apache={})).arrow||(t5.arrow={})).flatbuf||(t8.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsField(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}name(r){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,r):null}nullable(){let r=this.bb.__offset(this.bb_pos,6);return!!r&&!!this.bb.readInt8(this.bb_pos+r)}typeType(){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.readUint8(this.bb_pos+r):t7.apache.arrow.flatbuf.Type.NONE}type(r){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(r,this.bb_pos+n):null}dictionary(r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new t7.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(r,n){let i=this.bb.__offset(this.bb_pos,14);return i?(n||new t7.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*r),this.bb):null}childrenLength(){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__vector_len(this.bb_pos+r):0}customMetadata(r,n){let i=this.bb.__offset(this.bb_pos,16);return i?(n||new t7.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*r),this.bb):null}customMetadataLength(){let r=this.bb.__offset(this.bb_pos,16);return r?this.bb.__vector_len(this.bb_pos+r):0}static startField(r){r.startObject(7)}static addName(r,n){r.addFieldOffset(0,n,0)}static addNullable(r,n){r.addFieldInt8(1,+n,0)}static addTypeType(r,n){r.addFieldInt8(2,n,t7.apache.arrow.flatbuf.Type.NONE)}static addType(r,n){r.addFieldOffset(3,n,0)}static addDictionary(r,n){r.addFieldOffset(4,n,0)}static addChildren(r,n){r.addFieldOffset(5,n,0)}static createChildrenVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addOffset(n[i]);return r.endVector()}static startChildrenVector(r,n){r.startVector(4,n,4)}static addCustomMetadata(r,n){r.addFieldOffset(6,n,0)}static createCustomMetadataVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addOffset(n[i]);return r.endVector()}static startCustomMetadataVector(r,n){r.startVector(4,n,4)}static endField(r){return r.endObject()}static createField(r,i,a,o,s,l,c,u){return n.startField(r),n.addName(r,i),n.addNullable(r,a),n.addTypeType(r,o),n.addType(r,s),n.addDictionary(r,l),n.addChildren(r,c),n.addCustomMetadata(r,u),n.endField(r)}}r.Field=n}((et=(t9=(t7=nq.org||(nq.org={})).apache||(t7.apache={})).arrow||(t9.arrow={})).flatbuf||(et.flatbuf={})),((en=(er=(ee=nq.org||(nq.org={})).apache||(ee.apache={})).arrow||(er.arrow={})).flatbuf||(en.flatbuf={})).Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(r,n,i){return r.prep(8,16),r.writeInt64(i),r.writeInt64(n),r.offset()}},function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsSchema(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}endianness(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):ei.apache.arrow.flatbuf.Endianness.Little}fields(r,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new ei.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*r),this.bb):null}fieldsLength(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__vector_len(this.bb_pos+r):0}customMetadata(r,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new ei.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*r),this.bb):null}customMetadataLength(){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__vector_len(this.bb_pos+r):0}static startSchema(r){r.startObject(3)}static addEndianness(r,n){r.addFieldInt16(0,n,ei.apache.arrow.flatbuf.Endianness.Little)}static addFields(r,n){r.addFieldOffset(1,n,0)}static createFieldsVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addOffset(n[i]);return r.endVector()}static startFieldsVector(r,n){r.startVector(4,n,4)}static addCustomMetadata(r,n){r.addFieldOffset(2,n,0)}static createCustomMetadataVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addOffset(n[i]);return r.endVector()}static startCustomMetadataVector(r,n){r.startVector(4,n,4)}static endSchema(r){return r.endObject()}static finishSchemaBuffer(r,n){r.finish(n)}static createSchema(r,i,a,o){return n.startSchema(r),n.addEndianness(r,i),n.addFields(r,a),n.addCustomMetadata(r,o),n.endSchema(r)}}r.Schema=n}((eo=(ea=(ei=nq.org||(nq.org={})).apache||(ei.apache={})).arrow||(ea.arrow={})).flatbuf||(eo.flatbuf={}));var nG={};Object.defineProperty(nG,"__esModule",{value:!0}),((ec=(el=(es=nG.org||(nG.org={})).apache||(es.apache={})).arrow||(el.arrow={})).flatbuf||(ec.flatbuf={})).Schema=nq.org.apache.arrow.flatbuf.Schema,(ed=(ep=(eh=(ef=(eu=nG.org||(nG.org={})).apache||(eu.apache={})).arrow||(ef.arrow={})).flatbuf||(eh.flatbuf={})).MessageHeader||(ep.MessageHeader={}))[ed.NONE=0]="NONE",ed[ed.Schema=1]="Schema",ed[ed.DictionaryBatch=2]="DictionaryBatch",ed[ed.RecordBatch=3]="RecordBatch",ed[ed.Tensor=4]="Tensor",ed[ed.SparseTensor=5]="SparseTensor",((ev=(eg=(ey=nG.org||(nG.org={})).apache||(ey.apache={})).arrow||(eg.arrow={})).flatbuf||(ev.flatbuf={})).FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(r,n,i){return r.prep(8,16),r.writeInt64(i),r.writeInt64(n),r.offset()}},function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsRecordBatch(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}length(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):this.bb.createLong(0,0)}nodes(r,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new em.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*r,this.bb):null}nodesLength(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__vector_len(this.bb_pos+r):0}buffers(r,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new nq.org.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+i)+16*r,this.bb):null}buffersLength(){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__vector_len(this.bb_pos+r):0}static startRecordBatch(r){r.startObject(3)}static addLength(r,n){r.addFieldInt64(0,n,r.createLong(0,0))}static addNodes(r,n){r.addFieldOffset(1,n,0)}static startNodesVector(r,n){r.startVector(16,n,8)}static addBuffers(r,n){r.addFieldOffset(2,n,0)}static startBuffersVector(r,n){r.startVector(16,n,8)}static endRecordBatch(r){return r.endObject()}static createRecordBatch(r,i,a,o){return n.startRecordBatch(r),n.addLength(r,i),n.addNodes(r,a),n.addBuffers(r,o),n.endRecordBatch(r)}}r.RecordBatch=n}((eb=(ex=(em=nG.org||(nG.org={})).apache||(em.apache={})).arrow||(ex.arrow={})).flatbuf||(eb.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsDictionaryBatch(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}id(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):this.bb.createLong(0,0)}data(r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new e_.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){let r=this.bb.__offset(this.bb_pos,8);return!!r&&!!this.bb.readInt8(this.bb_pos+r)}static startDictionaryBatch(r){r.startObject(3)}static addId(r,n){r.addFieldInt64(0,n,r.createLong(0,0))}static addData(r,n){r.addFieldOffset(1,n,0)}static addIsDelta(r,n){r.addFieldInt8(2,+n,0)}static endDictionaryBatch(r){return r.endObject()}static createDictionaryBatch(r,i,a,o){return n.startDictionaryBatch(r),n.addId(r,i),n.addData(r,a),n.addIsDelta(r,o),n.endDictionaryBatch(r)}}r.DictionaryBatch=n}((eT=(ew=(e_=nG.org||(nG.org={})).apache||(e_.apache={})).arrow||(ew.arrow={})).flatbuf||(eT.flatbuf={})),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsMessage(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}version(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):nq.org.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readUint8(this.bb_pos+r):eA.apache.arrow.flatbuf.MessageHeader.NONE}header(r){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(r,this.bb_pos+n):null}bodyLength(){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb_pos+r):this.bb.createLong(0,0)}customMetadata(r,n){let i=this.bb.__offset(this.bb_pos,12);return i?(n||new nq.org.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*r),this.bb):null}customMetadataLength(){let r=this.bb.__offset(this.bb_pos,12);return r?this.bb.__vector_len(this.bb_pos+r):0}static startMessage(r){r.startObject(5)}static addVersion(r,n){r.addFieldInt16(0,n,nq.org.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(r,n){r.addFieldInt8(1,n,eA.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(r,n){r.addFieldOffset(2,n,0)}static addBodyLength(r,n){r.addFieldInt64(3,n,r.createLong(0,0))}static addCustomMetadata(r,n){r.addFieldOffset(4,n,0)}static createCustomMetadataVector(r,n){r.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)r.addOffset(n[i]);return r.endVector()}static startCustomMetadataVector(r,n){r.startVector(4,n,4)}static endMessage(r){return r.endObject()}static finishMessageBuffer(r,n){r.finish(n)}static createMessage(r,i,a,o,s,l){return n.startMessage(r),n.addVersion(r,i),n.addHeaderType(r,a),n.addHeader(r,o),n.addBodyLength(r,s),n.addCustomMetadata(r,l),n.endMessage(r)}}r.Message=n}((eM=(ek=(eA=nG.org||(nG.org={})).apache||(eA.apache={})).arrow||(ek.arrow={})).flatbuf||(eM.flatbuf={})),nH.ArrowType=nq.org.apache.arrow.flatbuf.Type,nH.DateUnit=nq.org.apache.arrow.flatbuf.DateUnit,nH.TimeUnit=nq.org.apache.arrow.flatbuf.TimeUnit,nH.Precision=nq.org.apache.arrow.flatbuf.Precision,nH.UnionMode=nq.org.apache.arrow.flatbuf.UnionMode,nH.IntervalUnit=nq.org.apache.arrow.flatbuf.IntervalUnit,nH.MessageHeader=nG.org.apache.arrow.flatbuf.MessageHeader,nH.MetadataVersion=nq.org.apache.arrow.flatbuf.MetadataVersion,(eS=nH.Type||(nH.Type={}))[eS.NONE=0]="NONE",eS[eS.Null=1]="Null",eS[eS.Int=2]="Int",eS[eS.Float=3]="Float",eS[eS.Binary=4]="Binary",eS[eS.Utf8=5]="Utf8",eS[eS.Bool=6]="Bool",eS[eS.Decimal=7]="Decimal",eS[eS.Date=8]="Date",eS[eS.Time=9]="Time",eS[eS.Timestamp=10]="Timestamp",eS[eS.Interval=11]="Interval",eS[eS.List=12]="List",eS[eS.Struct=13]="Struct",eS[eS.Union=14]="Union",eS[eS.FixedSizeBinary=15]="FixedSizeBinary",eS[eS.FixedSizeList=16]="FixedSizeList",eS[eS.Map=17]="Map",eS[eS.Dictionary=-1]="Dictionary",eS[eS.Int8=-2]="Int8",eS[eS.Int16=-3]="Int16",eS[eS.Int32=-4]="Int32",eS[eS.Int64=-5]="Int64",eS[eS.Uint8=-6]="Uint8",eS[eS.Uint16=-7]="Uint16",eS[eS.Uint32=-8]="Uint32",eS[eS.Uint64=-9]="Uint64",eS[eS.Float16=-10]="Float16",eS[eS.Float32=-11]="Float32",eS[eS.Float64=-12]="Float64",eS[eS.DateDay=-13]="DateDay",eS[eS.DateMillisecond=-14]="DateMillisecond",eS[eS.TimestampSecond=-15]="TimestampSecond",eS[eS.TimestampMillisecond=-16]="TimestampMillisecond",eS[eS.TimestampMicrosecond=-17]="TimestampMicrosecond",eS[eS.TimestampNanosecond=-18]="TimestampNanosecond",eS[eS.TimeSecond=-19]="TimeSecond",eS[eS.TimeMillisecond=-20]="TimeMillisecond",eS[eS.TimeMicrosecond=-21]="TimeMicrosecond",eS[eS.TimeNanosecond=-22]="TimeNanosecond",eS[eS.DenseUnion=-23]="DenseUnion",eS[eS.SparseUnion=-24]="SparseUnion",eS[eS.IntervalDayTime=-25]="IntervalDayTime",eS[eS.IntervalYearMonth=-26]="IntervalYearMonth",(eE=nH.BufferType||(nH.BufferType={}))[eE.OFFSET=0]="OFFSET",eE[eE.DATA=1]="DATA",eE[eE.VALIDITY=2]="VALIDITY",eE[eE.TYPE=3]="TYPE";var nW={};Object.defineProperty(nW,"__esModule",{value:!0});var nY={};function nZ(r,n,i,a){return(i&1<<a)!=0}function nX(r,n,i,a){return(i&1<<a)>>a}function nK(r){let n=[],i=0,a=0,o=0;for(let s of r)s&&(o|=1<<a),8==++a&&(n[i++]=o,o=a=0);(0===i||a>0)&&(n[i++]=o);let s=new Uint8Array(n.length+7&-8);return s.set(n),s}function*nJ(r,n,i,a,o){let s=n%8,l=n>>3,c=0,u=i;for(;u>0;s=0){let n=r[l++];do yield o(a,c++,n,s);while(--u>0&&++s<8)}}function n$(r,n,i){let a=0,o=0|n,s=new DataView(r.buffer,r.byteOffset,r.byteLength),l=void 0===i?r.byteLength:o+i;for(;l-o>=4;)a+=nQ(s.getUint32(o)),o+=4;for(;l-o>=2;)a+=nQ(s.getUint16(o)),o+=2;for(;l-o>=1;)a+=nQ(s.getUint8(o)),o+=1;return a}function nQ(r){let n=0|r;return n-=n>>>1&1431655765,((n=(858993459&n)+(n>>>2&858993459))+(n>>>4)&252645135)*16843009>>>24}Object.defineProperty(nY,"__esModule",{value:!0}),nY.getBool=nZ,nY.getBit=nX,nY.setBool=function(r,n,i){return i?!!(r[n>>3]|=1<<n%8)||!0:!(r[n>>3]&=~(1<<n%8))&&!1},nY.truncateBitmap=function(r,n,i){let a=i.byteLength+7&-8;if(r>0||i.byteLength<a){let o=new Uint8Array(a);return o.set(r%8==0?i.subarray(r>>3):nK(nJ(i,r,n,null,nZ)).subarray(0,a)),o}return i},nY.packBools=nK,nY.iterateBits=nJ,nY.popcnt_bit_range=function r(n,i,a){if(a-i<=0)return 0;if(a-i<8){let r=0;for(let o of nJ(n,i,a-i,n,nX))r+=o;return r}let o=a>>3<<3,s=i+(i%8==0?0:8-i%8);return r(n,i,s)+r(n,o,a)+n$(n,s>>3,o-s>>3)},nY.popcnt_array=n$,nY.popcnt_uint32=nQ;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});var n1={};Object.defineProperty(n1,"__esModule",{value:!0});var n2={};Object.defineProperty(n2,"__esModule",{value:!0});class n3{visitMany(r,...n){return r.map((r,i)=>this.visit(r,...n.map(r=>r[i])))}visit(...r){return this.getVisitFn(r[0],!1).apply(this,r)}getVisitFn(r,n=!0){return function(r,n,i=!0){let a=null,o=nH.Type.NONE;switch(n instanceof nW.Data?o=n4(n.type):n instanceof nj.Vector?o=n4(n.type):n instanceof n0.DataType?o=n4(n):"number"!=typeof(o=n)&&(o=nH.Type[n]),o){case nH.Type.Null:a=r.visitNull;break;case nH.Type.Bool:a=r.visitBool;break;case nH.Type.Int:a=r.visitInt;break;case nH.Type.Int8:a=r.visitInt8||r.visitInt;break;case nH.Type.Int16:a=r.visitInt16||r.visitInt;break;case nH.Type.Int32:a=r.visitInt32||r.visitInt;break;case nH.Type.Int64:a=r.visitInt64||r.visitInt;break;case nH.Type.Uint8:a=r.visitUint8||r.visitInt;break;case nH.Type.Uint16:a=r.visitUint16||r.visitInt;break;case nH.Type.Uint32:a=r.visitUint32||r.visitInt;break;case nH.Type.Uint64:a=r.visitUint64||r.visitInt;break;case nH.Type.Float:a=r.visitFloat;break;case nH.Type.Float16:a=r.visitFloat16||r.visitFloat;break;case nH.Type.Float32:a=r.visitFloat32||r.visitFloat;break;case nH.Type.Float64:a=r.visitFloat64||r.visitFloat;break;case nH.Type.Utf8:a=r.visitUtf8;break;case nH.Type.Binary:a=r.visitBinary;break;case nH.Type.FixedSizeBinary:a=r.visitFixedSizeBinary;break;case nH.Type.Date:a=r.visitDate;break;case nH.Type.DateDay:a=r.visitDateDay||r.visitDate;break;case nH.Type.DateMillisecond:a=r.visitDateMillisecond||r.visitDate;break;case nH.Type.Timestamp:a=r.visitTimestamp;break;case nH.Type.TimestampSecond:a=r.visitTimestampSecond||r.visitTimestamp;break;case nH.Type.TimestampMillisecond:a=r.visitTimestampMillisecond||r.visitTimestamp;break;case nH.Type.TimestampMicrosecond:a=r.visitTimestampMicrosecond||r.visitTimestamp;break;case nH.Type.TimestampNanosecond:a=r.visitTimestampNanosecond||r.visitTimestamp;break;case nH.Type.Time:a=r.visitTime;break;case nH.Type.TimeSecond:a=r.visitTimeSecond||r.visitTime;break;case nH.Type.TimeMillisecond:a=r.visitTimeMillisecond||r.visitTime;break;case nH.Type.TimeMicrosecond:a=r.visitTimeMicrosecond||r.visitTime;break;case nH.Type.TimeNanosecond:a=r.visitTimeNanosecond||r.visitTime;break;case nH.Type.Decimal:a=r.visitDecimal;break;case nH.Type.List:a=r.visitList;break;case nH.Type.Struct:a=r.visitStruct;break;case nH.Type.Union:a=r.visitUnion;break;case nH.Type.DenseUnion:a=r.visitDenseUnion||r.visitUnion;break;case nH.Type.SparseUnion:a=r.visitSparseUnion||r.visitUnion;break;case nH.Type.Dictionary:a=r.visitDictionary;break;case nH.Type.Interval:a=r.visitInterval;break;case nH.Type.IntervalDayTime:a=r.visitIntervalDayTime||r.visitInterval;break;case nH.Type.IntervalYearMonth:a=r.visitIntervalYearMonth||r.visitInterval;break;case nH.Type.FixedSizeList:a=r.visitFixedSizeList;break;case nH.Type.Map:a=r.visitMap}if("function"==typeof a)return a;if(!i)return()=>null;throw Error(`Unrecognized type '${nH.Type[o]}'`)}(this,r,n)}visitNull(r,...n){return null}visitBool(r,...n){return null}visitInt(r,...n){return null}visitFloat(r,...n){return null}visitUtf8(r,...n){return null}visitBinary(r,...n){return null}visitFixedSizeBinary(r,...n){return null}visitDate(r,...n){return null}visitTimestamp(r,...n){return null}visitTime(r,...n){return null}visitDecimal(r,...n){return null}visitList(r,...n){return null}visitStruct(r,...n){return null}visitUnion(r,...n){return null}visitDictionary(r,...n){return null}visitInterval(r,...n){return null}visitFixedSizeList(r,...n){return null}visitMap(r,...n){return null}}function n4(r){switch(r.typeId){case nH.Type.Null:return nH.Type.Null;case nH.Type.Int:let{bitWidth:n,isSigned:i}=r;switch(n){case 8:return i?nH.Type.Int8:nH.Type.Uint8;case 16:return i?nH.Type.Int16:nH.Type.Uint16;case 32:return i?nH.Type.Int32:nH.Type.Uint32;case 64:return i?nH.Type.Int64:nH.Type.Uint64}return nH.Type.Int;case nH.Type.Float:switch(r.precision){case nH.Precision.HALF:return nH.Type.Float16;case nH.Precision.SINGLE:return nH.Type.Float32;case nH.Precision.DOUBLE:return nH.Type.Float64}return nH.Type.Float;case nH.Type.Binary:return nH.Type.Binary;case nH.Type.Utf8:return nH.Type.Utf8;case nH.Type.Bool:return nH.Type.Bool;case nH.Type.Decimal:return nH.Type.Decimal;case nH.Type.Time:switch(r.unit){case nH.TimeUnit.SECOND:return nH.Type.TimeSecond;case nH.TimeUnit.MILLISECOND:return nH.Type.TimeMillisecond;case nH.TimeUnit.MICROSECOND:return nH.Type.TimeMicrosecond;case nH.TimeUnit.NANOSECOND:return nH.Type.TimeNanosecond}return nH.Type.Time;case nH.Type.Timestamp:switch(r.unit){case nH.TimeUnit.SECOND:return nH.Type.TimestampSecond;case nH.TimeUnit.MILLISECOND:return nH.Type.TimestampMillisecond;case nH.TimeUnit.MICROSECOND:return nH.Type.TimestampMicrosecond;case nH.TimeUnit.NANOSECOND:return nH.Type.TimestampNanosecond}return nH.Type.Timestamp;case nH.Type.Date:switch(r.unit){case nH.DateUnit.DAY:return nH.Type.DateDay;case nH.DateUnit.MILLISECOND:return nH.Type.DateMillisecond}return nH.Type.Date;case nH.Type.Interval:switch(r.unit){case nH.IntervalUnit.DAY_TIME:return nH.Type.IntervalDayTime;case nH.IntervalUnit.YEAR_MONTH:return nH.Type.IntervalYearMonth}return nH.Type.Interval;case nH.Type.Map:return nH.Type.Map;case nH.Type.List:return nH.Type.List;case nH.Type.Struct:return nH.Type.Struct;case nH.Type.Union:switch(r.mode){case nH.UnionMode.Dense:return nH.Type.DenseUnion;case nH.UnionMode.Sparse:return nH.Type.SparseUnion}return nH.Type.Union;case nH.Type.FixedSizeBinary:return nH.Type.FixedSizeBinary;case nH.Type.FixedSizeList:return nH.Type.FixedSizeList;case nH.Type.Dictionary:return nH.Type.Dictionary}throw Error(`Unrecognized type '${nH.Type[r.typeId]}'`)}n2.Visitor=n3,n3.prototype.visitInt8=null,n3.prototype.visitInt16=null,n3.prototype.visitInt32=null,n3.prototype.visitInt64=null,n3.prototype.visitUint8=null,n3.prototype.visitUint16=null,n3.prototype.visitUint32=null,n3.prototype.visitUint64=null,n3.prototype.visitFloat16=null,n3.prototype.visitFloat32=null,n3.prototype.visitFloat64=null,n3.prototype.visitDateDay=null,n3.prototype.visitDateMillisecond=null,n3.prototype.visitTimestampSecond=null,n3.prototype.visitTimestampMillisecond=null,n3.prototype.visitTimestampMicrosecond=null,n3.prototype.visitTimestampNanosecond=null,n3.prototype.visitTimeSecond=null,n3.prototype.visitTimeMillisecond=null,n3.prototype.visitTimeMicrosecond=null,n3.prototype.visitTimeNanosecond=null,n3.prototype.visitDenseUnion=null,n3.prototype.visitSparseUnion=null,n3.prototype.visitIntervalDayTime=null,n3.prototype.visitIntervalYearMonth=null;class n6 extends n2.Visitor{compareSchemas(r,n){return r===n||n instanceof r.constructor&&n1.instance.compareFields(r.fields,n.fields)}compareFields(r,n){return r===n||Array.isArray(r)&&Array.isArray(n)&&r.length===n.length&&r.every((r,i)=>n1.instance.compareField(r,n[i]))}compareField(r,n){return r===n||n instanceof r.constructor&&r.name===n.name&&r.nullable===n.nullable&&n1.instance.visit(r.type,n.type)}}function n5(r,n){return n instanceof r.constructor}function n8(r,n){return r===n||n5(r,n)}function n7(r,n){return r===n||n5(r,n)&&r.bitWidth===n.bitWidth&&r.isSigned===n.isSigned}function n9(r,n){return r===n||n5(r,n)&&r.precision===n.precision}function it(r,n){return r===n||n5(r,n)&&r.unit===n.unit}function ie(r,n){return r===n||n5(r,n)&&r.unit===n.unit&&r.timezone===n.timezone}function ir(r,n){return r===n||n5(r,n)&&r.unit===n.unit&&r.bitWidth===n.bitWidth}function ii(r,n){return r===n||n5(r,n)&&r.mode===n.mode&&r.typeIds.every((r,i)=>r===n.typeIds[i])&&n1.instance.compareFields(r.children,n.children)}function ia(r,n){return r===n||n5(r,n)&&r.unit===n.unit}n1.TypeComparator=n6,n6.prototype.visitNull=n8,n6.prototype.visitBool=n8,n6.prototype.visitInt=n7,n6.prototype.visitInt8=n7,n6.prototype.visitInt16=n7,n6.prototype.visitInt32=n7,n6.prototype.visitInt64=n7,n6.prototype.visitUint8=n7,n6.prototype.visitUint16=n7,n6.prototype.visitUint32=n7,n6.prototype.visitUint64=n7,n6.prototype.visitFloat=n9,n6.prototype.visitFloat16=n9,n6.prototype.visitFloat32=n9,n6.prototype.visitFloat64=n9,n6.prototype.visitUtf8=n8,n6.prototype.visitBinary=n8,n6.prototype.visitFixedSizeBinary=function(r,n){return r===n||n5(r,n)&&r.byteWidth===n.byteWidth},n6.prototype.visitDate=it,n6.prototype.visitDateDay=it,n6.prototype.visitDateMillisecond=it,n6.prototype.visitTimestamp=ie,n6.prototype.visitTimestampSecond=ie,n6.prototype.visitTimestampMillisecond=ie,n6.prototype.visitTimestampMicrosecond=ie,n6.prototype.visitTimestampNanosecond=ie,n6.prototype.visitTime=ir,n6.prototype.visitTimeSecond=ir,n6.prototype.visitTimeMillisecond=ir,n6.prototype.visitTimeMicrosecond=ir,n6.prototype.visitTimeNanosecond=ir,n6.prototype.visitDecimal=n8,n6.prototype.visitList=function(r,n){return r===n||n5(r,n)&&r.children.length===n.children.length&&n1.instance.compareFields(r.children,n.children)},n6.prototype.visitStruct=function(r,n){return r===n||n5(r,n)&&r.children.length===n.children.length&&n1.instance.compareFields(r.children,n.children)},n6.prototype.visitUnion=ii,n6.prototype.visitDenseUnion=ii,n6.prototype.visitSparseUnion=ii,n6.prototype.visitDictionary=function(r,n){return r===n||n5(r,n)&&r.id===n.id&&r.isOrdered===n.isOrdered&&n1.instance.visit(r.indices,n.indices)&&n1.instance.visit(r.dictionary,n.dictionary)},n6.prototype.visitInterval=ia,n6.prototype.visitIntervalDayTime=ia,n6.prototype.visitIntervalYearMonth=ia,n6.prototype.visitFixedSizeList=function(r,n){return r===n||n5(r,n)&&r.listSize===n.listSize&&r.children.length===n.children.length&&n1.instance.compareFields(r.children,n.children)},n6.prototype.visitMap=function(r,n){return r===n||n5(r,n)&&r.keysSorted===n.keysSorted&&r.children.length===n.children.length&&n1.instance.compareFields(r.children,n.children)},n1.instance=new n6;class io{static isNull(r){return r&&r.typeId===nH.Type.Null}static isInt(r){return r&&r.typeId===nH.Type.Int}static isFloat(r){return r&&r.typeId===nH.Type.Float}static isBinary(r){return r&&r.typeId===nH.Type.Binary}static isUtf8(r){return r&&r.typeId===nH.Type.Utf8}static isBool(r){return r&&r.typeId===nH.Type.Bool}static isDecimal(r){return r&&r.typeId===nH.Type.Decimal}static isDate(r){return r&&r.typeId===nH.Type.Date}static isTime(r){return r&&r.typeId===nH.Type.Time}static isTimestamp(r){return r&&r.typeId===nH.Type.Timestamp}static isInterval(r){return r&&r.typeId===nH.Type.Interval}static isList(r){return r&&r.typeId===nH.Type.List}static isStruct(r){return r&&r.typeId===nH.Type.Struct}static isUnion(r){return r&&r.typeId===nH.Type.Union}static isFixedSizeBinary(r){return r&&r.typeId===nH.Type.FixedSizeBinary}static isFixedSizeList(r){return r&&r.typeId===nH.Type.FixedSizeList}static isMap(r){return r&&r.typeId===nH.Type.Map}static isDictionary(r){return r&&r.typeId===nH.Type.Dictionary}get typeId(){return nH.Type.NONE}compareTo(r){return n1.instance.visit(this,r)}}io[Symbol.toStringTag]=((eI=io.prototype).children=null,eI.ArrayType=Array,eI[Symbol.toStringTag]="DataType"),n0.DataType=io;class is extends io{toString(){return"Null"}get typeId(){return nH.Type.Null}}is[Symbol.toStringTag]=is.prototype[Symbol.toStringTag]="Null",n0.Null=is;class il extends io{constructor(r,n){super(),this.isSigned=r,this.bitWidth=n}get typeId(){return nH.Type.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}il[Symbol.toStringTag]=((eL=il.prototype).isSigned=null,eL.bitWidth=null,eL[Symbol.toStringTag]="Int"),n0.Int=il;class ic extends il{constructor(){super(!0,8)}}n0.Int8=ic;class iu extends il{constructor(){super(!0,16)}}n0.Int16=iu;class ih extends il{constructor(){super(!0,32)}}n0.Int32=ih;class ip extends il{constructor(){super(!0,64)}}n0.Int64=ip;class id extends il{constructor(){super(!1,8)}}n0.Uint8=id;class iy extends il{constructor(){super(!1,16)}}n0.Uint16=iy;class ig extends il{constructor(){super(!1,32)}}n0.Uint32=ig;class iv extends il{constructor(){super(!1,64)}}n0.Uint64=iv,Object.defineProperty(ic.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(iu.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(ih.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(ip.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(id.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(iy.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ig.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(iv.prototype,"ArrayType",{value:Uint32Array});class im extends io{constructor(r){super(),this.precision=r}get typeId(){return nH.Type.Float}get ArrayType(){switch(this.precision){case nH.Precision.HALF:return Uint16Array;case nH.Precision.SINGLE:return Float32Array;case nH.Precision.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}im[Symbol.toStringTag]=((eC=im.prototype).precision=null,eC[Symbol.toStringTag]="Float"),n0.Float=im;class ix extends im{constructor(){super(nH.Precision.HALF)}}n0.Float16=ix;class ib extends im{constructor(){super(nH.Precision.SINGLE)}}n0.Float32=ib;class i_ extends im{constructor(){super(nH.Precision.DOUBLE)}}n0.Float64=i_,Object.defineProperty(ix.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ib.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(i_.prototype,"ArrayType",{value:Float64Array});class iw extends io{constructor(){super()}get typeId(){return nH.Type.Binary}toString(){return"Binary"}}iw[Symbol.toStringTag]=((eO=iw.prototype).ArrayType=Uint8Array,eO[Symbol.toStringTag]="Binary"),n0.Binary=iw;class iT extends io{constructor(){super()}get typeId(){return nH.Type.Utf8}toString(){return"Utf8"}}iT[Symbol.toStringTag]=((eD=iT.prototype).ArrayType=Uint8Array,eD[Symbol.toStringTag]="Utf8"),n0.Utf8=iT;class iA extends io{constructor(){super()}get typeId(){return nH.Type.Bool}toString(){return"Bool"}}iA[Symbol.toStringTag]=((eP=iA.prototype).ArrayType=Uint8Array,eP[Symbol.toStringTag]="Bool"),n0.Bool=iA;class ik extends io{constructor(r,n){super(),this.scale=r,this.precision=n}get typeId(){return nH.Type.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}ik[Symbol.toStringTag]=((eB=ik.prototype).scale=null,eB.precision=null,eB.ArrayType=Uint32Array,eB[Symbol.toStringTag]="Decimal"),n0.Decimal=ik;class iM extends io{constructor(r){super(),this.unit=r}get typeId(){return nH.Type.Date}toString(){return`Date${(this.unit+1)*32}<${nH.DateUnit[this.unit]}>`}}iM[Symbol.toStringTag]=((eR=iM.prototype).unit=null,eR.ArrayType=Int32Array,eR[Symbol.toStringTag]="Date"),n0.Date_=iM,n0.DateDay=class extends iM{constructor(){super(nH.DateUnit.DAY)}},n0.DateMillisecond=class extends iM{constructor(){super(nH.DateUnit.MILLISECOND)}};class iS extends io{constructor(r,n){super(),this.unit=r,this.bitWidth=n}get typeId(){return nH.Type.Time}toString(){return`Time${this.bitWidth}<${nH.TimeUnit[this.unit]}>`}}iS[Symbol.toStringTag]=((ez=iS.prototype).unit=null,ez.bitWidth=null,ez.ArrayType=Int32Array,ez[Symbol.toStringTag]="Time"),n0.Time=iS,n0.TimeSecond=class extends iS{constructor(){super(nH.TimeUnit.SECOND,32)}},n0.TimeMillisecond=class extends iS{constructor(){super(nH.TimeUnit.MILLISECOND,32)}},n0.TimeMicrosecond=class extends iS{constructor(){super(nH.TimeUnit.MICROSECOND,64)}},n0.TimeNanosecond=class extends iS{constructor(){super(nH.TimeUnit.NANOSECOND,64)}};class iE extends io{constructor(r,n){super(),this.unit=r,this.timezone=n}get typeId(){return nH.Type.Timestamp}toString(){return`Timestamp<${nH.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}iE[Symbol.toStringTag]=((eF=iE.prototype).unit=null,eF.timezone=null,eF.ArrayType=Int32Array,eF[Symbol.toStringTag]="Timestamp"),n0.Timestamp=iE,n0.TimestampSecond=class extends iE{constructor(r){super(nH.TimeUnit.SECOND,r)}},n0.TimestampMillisecond=class extends iE{constructor(r){super(nH.TimeUnit.MILLISECOND,r)}},n0.TimestampMicrosecond=class extends iE{constructor(r){super(nH.TimeUnit.MICROSECOND,r)}},n0.TimestampNanosecond=class extends iE{constructor(r){super(nH.TimeUnit.NANOSECOND,r)}};class iI extends io{constructor(r){super(),this.unit=r}get typeId(){return nH.Type.Interval}toString(){return`Interval<${nH.IntervalUnit[this.unit]}>`}}iI[Symbol.toStringTag]=((eN=iI.prototype).unit=null,eN.ArrayType=Int32Array,eN[Symbol.toStringTag]="Interval"),n0.Interval=iI,n0.IntervalDayTime=class extends iI{constructor(){super(nH.IntervalUnit.DAY_TIME)}},n0.IntervalYearMonth=class extends iI{constructor(){super(nH.IntervalUnit.YEAR_MONTH)}};class iL extends io{constructor(r){super(),this.children=[r]}get typeId(){return nH.Type.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}iL[Symbol.toStringTag]=((eU=iL.prototype).children=null,eU[Symbol.toStringTag]="List"),n0.List=iL;class iC extends io{constructor(r){super(),this.children=r}get typeId(){return nH.Type.Struct}toString(){return`Struct<{${this.children.map(r=>`${r.name}:${r.type}`).join(", ")}}>`}}iC[Symbol.toStringTag]=((ej=iC.prototype).children=null,ej[Symbol.toStringTag]="Struct"),n0.Struct=iC;class iO extends io{constructor(r,n,i){super(),this.mode=r,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,n,i)=>(r[n]=i)&&r||r,Object.create(null))}get typeId(){return nH.Type.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(r=>`${r.type}`).join(" | ")}>`}}iO[Symbol.toStringTag]=((eV=iO.prototype).mode=null,eV.typeIds=null,eV.children=null,eV.typeIdToChildIndex=null,eV.ArrayType=Int8Array,eV[Symbol.toStringTag]="Union"),n0.Union=iO,n0.DenseUnion=class extends iO{constructor(r,n){super(nH.UnionMode.Dense,r,n)}},n0.SparseUnion=class extends iO{constructor(r,n){super(nH.UnionMode.Sparse,r,n)}};class iD extends io{constructor(r){super(),this.byteWidth=r}get typeId(){return nH.Type.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}iD[Symbol.toStringTag]=((eH=iD.prototype).byteWidth=null,eH.ArrayType=Uint8Array,eH[Symbol.toStringTag]="FixedSizeBinary"),n0.FixedSizeBinary=iD;class iP extends io{constructor(r,n){super(),this.listSize=r,this.children=[n]}get typeId(){return nH.Type.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}iP[Symbol.toStringTag]=((eq=iP.prototype).children=null,eq.listSize=null,eq[Symbol.toStringTag]="FixedSizeList"),n0.FixedSizeList=iP;class iB extends io{constructor(r,n=!1){super(),this.children=[r],this.keysSorted=n}get typeId(){return nH.Type.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(r=>`${r.name}:${r.type}`).join(", ")}}>`}}iB[Symbol.toStringTag]=((eG=iB.prototype).children=null,eG.keysSorted=null,eG[Symbol.toStringTag]="Map_"),n0.Map_=iB;const iR=(n=-1,()=>++n);class iz extends io{constructor(r,n,i,a){super(),this.indices=n,this.dictionary=r,this.isOrdered=a||!1,this.id=null==i?iR():"number"==typeof i?i:i.low}get typeId(){return nH.Type.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}iz[Symbol.toStringTag]=((eW=iz.prototype).id=null,eW.indices=null,eW.isOrdered=null,eW.dictionary=null,eW[Symbol.toStringTag]="Dictionary"),n0.Dictionary=iz,n0.strideForType=function(r){switch(r.typeId){case nH.Type.Decimal:return 4;case nH.Type.Timestamp:return 2;case nH.Type.Date:case nH.Type.Interval:return 1+r.unit;case nH.Type.Int:case nH.Type.Time:return 1+ +(r.bitWidth>32);case nH.Type.FixedSizeList:return r.listSize;case nH.Type.FixedSizeBinary:return r.byteWidth;default:return 1}},nW.kUnknownNullCount=-1;class iF{constructor(r,n,i,a,o,s,l){let c;this.type=r,this.dictionary=l,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(a||0,-1)),this.childData=(s||[]).map(r=>r instanceof iF?r:r.data),o instanceof iF?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=n0.strideForType(r),o&&((c=o[0])&&(this.valueOffsets=c),(c=o[1])&&(this.values=c),(c=o[2])&&(this.nullBitmap=c),(c=o[3])&&(this.typeIds=c)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let r=0,{valueOffsets:n,values:i,nullBitmap:a,typeIds:o}=this;return n&&(r+=n.byteLength),i&&(r+=i.byteLength),a&&(r+=a.byteLength),o&&(r+=o.byteLength),this.childData.reduce((r,n)=>r+n.byteLength,r)}get nullCount(){let r,n=this._nullCount;return n<=nW.kUnknownNullCount&&(r=this.nullBitmap)&&(this._nullCount=n=this.length-nY.popcnt_bit_range(r,this.offset,this.offset+this.length)),n}clone(r,n=this.offset,i=this.length,a=this._nullCount,o=this,s=this.childData){return new iF(r,n,i,a,o,s,this.dictionary)}slice(r,n){let{stride:i,typeId:a,childData:o}=this,s=+(0===this._nullCount)-1,l=16===a?i:1,c=this._sliceBuffers(r,n,i,a);return this.clone(this.type,this.offset+r,n,s,c,!o.length||this.valueOffsets?o:this._sliceChildren(o,l*r,l*n))}_changeLengthAndBackfillNullBitmap(r){if(this.typeId===nH.Type.Null)return this.clone(this.type,0,r,0);let{length:n,nullCount:i}=this,a=new Uint8Array((r+63&-64)>>3).fill(255,0,n>>3);a[n>>3]=(1<<n-(-8&n))-1,i>0&&a.set(nY.truncateBitmap(this.offset,n,this.nullBitmap),0);let o=this.buffers;return o[nH.BufferType.VALIDITY]=a,this.clone(this.type,0,r,i+(r-n),o)}_sliceBuffers(r,n,i,a){let o,{buffers:s}=this;return(o=s[nH.BufferType.TYPE])&&(s[nH.BufferType.TYPE]=o.subarray(r,r+n)),(o=s[nH.BufferType.OFFSET])&&(s[nH.BufferType.OFFSET]=o.subarray(r,r+n+1))||(o=s[nH.BufferType.DATA])&&(s[nH.BufferType.DATA]=6===a?o:o.subarray(i*r,i*(r+n))),s}_sliceChildren(r,n,i){return r.map(r=>r.slice(n,i))}static new(r,n,i,a,o,s,l){switch(o instanceof iF?o=o.buffers:o||(o=[]),r.typeId){case nH.Type.Null:return iF.Null(r,n,i);case nH.Type.Int:return iF.Int(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Dictionary:return iF.Dictionary(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[],l);case nH.Type.Float:return iF.Float(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Bool:return iF.Bool(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Decimal:return iF.Decimal(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Date:return iF.Date(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Time:return iF.Time(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Timestamp:return iF.Timestamp(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Interval:return iF.Interval(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.FixedSizeBinary:return iF.FixedSizeBinary(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.DATA]||[]);case nH.Type.Binary:return iF.Binary(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.OFFSET]||[],o[nH.BufferType.DATA]||[]);case nH.Type.Utf8:return iF.Utf8(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.OFFSET]||[],o[nH.BufferType.DATA]||[]);case nH.Type.List:return iF.List(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.OFFSET]||[],(s||[])[0]);case nH.Type.FixedSizeList:return iF.FixedSizeList(r,n,i,a||0,o[nH.BufferType.VALIDITY],(s||[])[0]);case nH.Type.Struct:return iF.Struct(r,n,i,a||0,o[nH.BufferType.VALIDITY],s||[]);case nH.Type.Map:return iF.Map(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.OFFSET]||[],(s||[])[0]);case nH.Type.Union:return iF.Union(r,n,i,a||0,o[nH.BufferType.VALIDITY],o[nH.BufferType.TYPE]||[],o[nH.BufferType.OFFSET]||s,s)}throw Error(`Unrecognized typeId ${r.typeId}`)}static Null(r,n,i){return new iF(r,n,i,0)}static Int(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Dictionary(r,n,i,a,o,s,l){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.indices.ArrayType,s),r_.toUint8Array(o)],[],l)}static Float(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Bool(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Decimal(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Date(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Time(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Timestamp(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Interval(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static FixedSizeBinary(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,r_.toArrayBufferView(r.ArrayType,s),r_.toUint8Array(o)])}static Binary(r,n,i,a,o,s,l){return new iF(r,n,i,a,[r_.toInt32Array(s),r_.toUint8Array(l),r_.toUint8Array(o)])}static Utf8(r,n,i,a,o,s,l){return new iF(r,n,i,a,[r_.toInt32Array(s),r_.toUint8Array(l),r_.toUint8Array(o)])}static List(r,n,i,a,o,s,l){return new iF(r,n,i,a,[r_.toInt32Array(s),void 0,r_.toUint8Array(o)],[l])}static FixedSizeList(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,void 0,r_.toUint8Array(o)],[s])}static Struct(r,n,i,a,o,s){return new iF(r,n,i,a,[void 0,void 0,r_.toUint8Array(o)],s)}static Map(r,n,i,a,o,s,l){return new iF(r,n,i,a,[r_.toInt32Array(s),void 0,r_.toUint8Array(o)],[l])}static Union(r,n,i,a,o,s,l,c){let u=[void 0,void 0,r_.toUint8Array(o),r_.toArrayBufferView(r.ArrayType,s)];return r.mode===nH.UnionMode.Sparse?new iF(r,n,i,a,u,l):(u[nH.BufferType.OFFSET]=r_.toInt32Array(l),new iF(r,n,i,a,u,c))}}nW.Data=iF,iF.prototype.childData=Object.freeze([]);var iN={};Object.defineProperty(iN,"__esModule",{value:!0});var iU={};Object.defineProperty(iU,"__esModule",{value:!0});const ij=void 0;iU.valueToString=function(r){if(null===r)return"null";if(r===ij)return"undefined";switch(typeof r){case"number":case"bigint":return`${r}`;case"string":return`"${r}"`}return"function"==typeof r[Symbol.toPrimitive]?r[Symbol.toPrimitive]("string"):ArrayBuffer.isView(r)?`[${r}]`:JSON.stringify(r)},iN.createIsValidFunction=function(r){if(!r||r.length<=0)return function(r){return!0};let n="",i=r.filter(r=>r==r);return i.length>0&&(n=`
    switch (x) {${i.map(r=>`
        case ${"bigint"!=typeof r?iU.valueToString(r):np.BigIntAvailable?`${iU.valueToString(r)}n`:`"${iU.valueToString(r)}"`}:`).join("")}
            return false;
    }`),r.length!==i.length&&(n=`if (x !== x) return false;
${n}`),Function("x",`${n}
return true;`)};var iV={};Object.defineProperty(iV,"__esModule",{value:!0});const iH=(r,n)=>(r*n+63&-64||64)/n,iq=(r,n=0)=>r.length>=n?r.subarray(0,n):r_.memcpy(new r.constructor(n),r,0);class iG{constructor(r,n=1){this.buffer=r,this.stride=n,this.BYTES_PER_ELEMENT=r.BYTES_PER_ELEMENT,this.ArrayType=r.constructor,this._resize(this.length=r.length/n|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(r,n){return this}append(r){return this.set(this.length,r)}reserve(r){if(r>0){this.length+=r;let n=this.stride,i=this.length*n,a=this.buffer.length;i>=a&&this._resize(0===a?iH(1*i,this.BYTES_PER_ELEMENT):iH(2*i,this.BYTES_PER_ELEMENT))}return this}flush(r=this.length){r=iH(r*this.stride,this.BYTES_PER_ELEMENT);let n=iq(this.buffer,r);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(r){return this.buffer=r_.memcpy(new this.ArrayType(r),this.buffer)}}iV.BufferBuilder=iG,iG.prototype.offset=0;class iW extends iG{last(){return this.get(this.length-1)}get(r){return this.buffer[r]}set(r,n){return this.reserve(r-this.length+1),this.buffer[r*this.stride]=n,this}}iV.DataBufferBuilder=iW,iV.BitmapBufferBuilder=class extends iW{constructor(r=new Uint8Array(0)){super(r,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(r){return this.buffer[r>>3]>>r%8&1}set(r,n){let{buffer:i}=this.reserve(r-this.length+1),a=r>>3,o=r%8,s=i[a]>>o&1;return n?0===s&&(i[a]|=1<<o,++this.numValid):1===s&&(i[a]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}},iV.OffsetsBufferBuilder=class extends iW{constructor(r=new Int32Array(1)){super(r,1)}append(r){return this.set(this.length-1,r)}set(r,n){let i=this.length-1,a=this.reserve(r-i+1).buffer;return i<r++&&a.fill(a[i],i,r),a[r]=a[r-1]+n,this}flush(r=this.length-1){return r>this.length&&this.set(r-1,0),super.flush(r+1)}},iV.WideBufferBuilder=class extends iG{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?np.BigInt64Array:np.BigUint64Array)}set(r,n){switch(this.reserve(r-this.length+1),typeof n){case"bigint":this.buffer64[r]=n;break;case"number":this.buffer[r*this.stride]=n;break;default:this.buffer.set(n,r*this.stride)}return this}_resize(r){let n=super._resize(r),i=n.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return np.BigIntAvailable&&(this.buffer64=new this.ArrayType64(n.buffer,n.byteOffset,i)),n}};class iY{constructor({type:r,nullValues:n}){this.length=0,this.finished=!1,this.type=r,this.children=[],this.nullValues=n,this.stride=n0.strideForType(r),this._nulls=new iV.BitmapBufferBuilder,n&&n.length>0&&(this._isValid=iN.createIsValidFunction(n))}static new(r){}static throughNode(r){throw Error('"throughNode" not available in this environment')}static throughDOM(r){throw Error('"throughDOM" not available in this environment')}static throughIterable(r){return function(r){let{queueingStrategy:n="count"}=r,{highWaterMark:i="bytes"!==n?1e3:16384}=r,a="bytes"!==n?"length":"byteLength";return function*(n){let o=0,s=iY.new(r);for(let r of n)s.append(r)[a]>=i&&++o&&(yield s.toVector());(s.finish().length>0||0===o)&&(yield s.toVector())}}(r)}static throughAsyncIterable(r){return function(r){let{queueingStrategy:n="count"}=r,{highWaterMark:i="bytes"!==n?1e3:16384}=r,a="bytes"!==n?"length":"byteLength";return async function*(n){let o=0,s=iY.new(r);for await(let r of n)s.append(r)[a]>=i&&++o&&(yield s.toVector());(s.finish().length>0||0===o)&&(yield s.toVector())}}(r)}toVector(){return nj.Vector.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let r=0;return this._offsets&&(r+=this._offsets.byteLength),this._values&&(r+=this._values.byteLength),this._nulls&&(r+=this._nulls.byteLength),this._typeIds&&(r+=this._typeIds.byteLength),this.children.reduce((r,n)=>r+n.byteLength,r)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let r=0;return this._offsets&&(r+=this._offsets.reservedByteLength),this._values&&(r+=this._values.reservedByteLength),this._nulls&&(r+=this._nulls.reservedByteLength),this._typeIds&&(r+=this._typeIds.reservedByteLength),this.children.reduce((r,n)=>r+n.reservedByteLength,r)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(r){return this.set(this.length,r)}isValid(r){return this._isValid(r)}set(r,n){return this.setValid(r,this.isValid(n))&&this.setValue(r,n),this}setValue(r,n){this._setValue(this,r,n)}setValid(r,n){return this.length=this._nulls.set(r,+n).length,n}addChild(r,n=`${this.numChildren}`){throw Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(r){return this.children[r]||null}flush(){let r=[],n=this._values,i=this._offsets,a=this._typeIds,{length:o,nullCount:s}=this;a?(r[nH.BufferType.TYPE]=a.flush(o),i&&(r[nH.BufferType.OFFSET]=i.flush(o))):i?(n&&(r[nH.BufferType.DATA]=n.flush(i.last())),r[nH.BufferType.OFFSET]=i.flush(o)):n&&(r[nH.BufferType.DATA]=n.flush(o)),s>0&&(r[nH.BufferType.VALIDITY]=this._nulls.flush(o));let l=nW.Data.new(this.type,0,o,s,r,this.children.map(r=>r.flush()));return this.clear(),l}finish(){return this.finished=!0,this.children.forEach(r=>r.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(r=>r.clear()),this}}nU.Builder=iY,iY.prototype.length=1,iY.prototype.stride=1,iY.prototype.children=null,iY.prototype.finished=!1,iY.prototype.nullValues=null,iY.prototype._isValid=()=>!0,nU.FixedWidthBuilder=class extends iY{constructor(r){super(r),this._values=new iV.DataBufferBuilder(new this.ArrayType(0),this.stride)}setValue(r,n){let i=this._values;return i.reserve(r-i.length+1),super.setValue(r,n)}},nU.VariableWidthBuilder=class extends iY{constructor(r){super(r),this._pendingLength=0,this._offsets=new iV.OffsetsBufferBuilder}setValue(r,n){let i=this._pending||(this._pending=new Map),a=i.get(r);a&&(this._pendingLength-=a.length),this._pendingLength+=n.length,i.set(r,n)}setValid(r,n){return!!super.setValid(r,n)||((this._pending||(this._pending=new Map)).set(r,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let r=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,r&&r.size>0&&this._flushPending(r,n),this}},nN.Builder=nU.Builder;var iZ={};Object.defineProperty(iZ,"__esModule",{value:!0});class iX extends nU.Builder{constructor(r){super(r),this._values=new iV.BitmapBufferBuilder}setValue(r,n){this._values.set(r,+n)}}iZ.BoolBuilder=iX,nN.BoolBuilder=iZ.BoolBuilder;var iK={};Object.defineProperty(iK,"__esModule",{value:!0});class iJ extends nU.Builder{setValue(r,n){}setValid(r,n){return this.length=Math.max(r+1,this.length),n}}iK.NullBuilder=iJ,nN.NullBuilder=iK.NullBuilder;var i$={};Object.defineProperty(i$,"__esModule",{value:!0});class iQ extends nU.FixedWidthBuilder{}i$.DateBuilder=iQ,i$.DateDayBuilder=class extends iQ{},i$.DateMillisecondBuilder=class extends iQ{},nN.DateBuilder=i$.DateBuilder,nN.DateDayBuilder=i$.DateDayBuilder,nN.DateMillisecondBuilder=i$.DateMillisecondBuilder;var i0={};Object.defineProperty(i0,"__esModule",{value:!0});class i1 extends nU.FixedWidthBuilder{}i0.DecimalBuilder=i1,nN.DecimalBuilder=i0.DecimalBuilder;var i2={};Object.defineProperty(i2,"__esModule",{value:!0});class i3 extends nU.Builder{constructor({type:r,nullValues:n,dictionaryHashFunction:i}){super({type:new n0.Dictionary(r.dictionary,r.indices,r.id,r.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=nU.Builder.new({type:this.type.indices,nullValues:n}),this.dictionary=nU.Builder.new({type:this.type.dictionary,nullValues:null}),"function"==typeof i&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(r){return this.indices.isValid(r)}setValid(r,n){let i=this.indices;return n=i.setValid(r,n),this.length=i.length,n}setValue(r,n){let i=this._keysToIndices,a=this.valueToKey(n),o=i[a];return void 0===o&&(i[a]=o=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(r,o)}flush(){let r=this.type,n=this._dictionary,i=this.dictionary.toVector(),a=this.indices.flush().clone(r);return a.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=a.dictionary,this.clear(),a}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(r){return"string"==typeof r?r:`${r}`}}i2.DictionaryBuilder=i3,nN.DictionaryBuilder=i2.DictionaryBuilder;var i4={};Object.defineProperty(i4,"__esModule",{value:!0});class i6 extends nU.FixedWidthBuilder{}i4.FixedSizeBinaryBuilder=i6,nN.FixedSizeBinaryBuilder=i4.FixedSizeBinaryBuilder;var i5={};Object.defineProperty(i5,"__esModule",{value:!0});var i8={};Object.defineProperty(i8,"__esModule",{value:!0});const i7=new Float64Array(1),i9=new Uint32Array(i7.buffer);i8.uint16ToFloat64=function(r){let n=(31744&r)>>10,i=(1023&r)/1024,a=(-1)**((32768&r)>>15);switch(n){case 31:return a*(i?NaN:1/0);case 0:return a*(i?6103515625e-14*i:0)}return a*2**(n-15)*(1+i)},i8.float64ToUint16=function(r){if(r!=r)return 32256;i7[0]=r;let n=(2147483648&i9[1])>>16&65535,i=2146435072&i9[1],a=0;return i>=1089470464?i9[0]>0?i=31744:(i=(2080374784&i)>>16,a=(1048575&i9[1])>>10):i<=1056964608?(a=1048576+((a=1048576+(1048575&i9[1]))<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,a=(1048575&i9[1])+512>>10),n|i|65535&a};class at extends nU.FixedWidthBuilder{}i5.FloatBuilder=at,i5.Float16Builder=class extends at{setValue(r,n){this._values.set(r,i8.float64ToUint16(n))}},i5.Float32Builder=class extends at{setValue(r,n){this._values.set(r,n)}},i5.Float64Builder=class extends at{setValue(r,n){this._values.set(r,n)}},nN.FloatBuilder=i5.FloatBuilder,nN.Float16Builder=i5.Float16Builder,nN.Float32Builder=i5.Float32Builder,nN.Float64Builder=i5.Float64Builder;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});var ar={};function an(r,...n){return 0===n.length?Object.setPrototypeOf(r_.toArrayBufferView(this.TypedArray,r),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(r,...n),this.constructor.prototype)}function ai(...r){return an.apply(this,r)}function aa(...r){return an.apply(this,r)}function ao(...r){return an.apply(this,r)}function as(r){let{buffer:n,byteOffset:i,length:a,signed:o}=r,s=new Int32Array(n,i,a),l=0,c=0,u=s.length,f,h;for(;c<u;)h=s[c++],f=s[c++],o||(f>>>=0),l+=(h>>>0)+f*c**32;return l}function al(r){let n="",i=new Uint32Array(2),a=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),o=new Uint32Array((a=new Uint16Array(a).reverse()).buffer),s=-1,l=a.length-1;do{for(i[0]=a[s=0];s<l;)a[s++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+a[s];a[s]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],n=`${i[0]}${n}`}while(o[0]||o[1]||o[2]||o[3])return n||"0"}Object.defineProperty(ar,"__esModule",{value:!0}),ar.isArrowBigNumSymbol=Symbol.for("isArrowBigNum"),an.prototype[ar.isArrowBigNumSymbol]=!0,an.prototype.toJSON=function(){return`"${ar.bignumToString(this)}"`},an.prototype.valueOf=function(){return as(this)},an.prototype.toString=function(){return ar.bignumToString(this)},an.prototype[Symbol.toPrimitive]=function(r="default"){switch(r){case"number":return as(this);case"string":break;case"default":return ar.bignumToBigInt(this)}return ar.bignumToString(this)},Object.setPrototypeOf(ai.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(aa.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(ao.prototype,Object.create(Uint32Array.prototype)),Object.assign(ai.prototype,an.prototype,{constructor:ai,signed:!0,TypedArray:Int32Array,BigIntArray:np.BigInt64Array}),Object.assign(aa.prototype,an.prototype,{constructor:aa,signed:!1,TypedArray:Uint32Array,BigIntArray:np.BigUint64Array}),Object.assign(ao.prototype,an.prototype,{constructor:ao,signed:!0,TypedArray:Uint32Array,BigIntArray:np.BigUint64Array}),np.BigIntAvailable?(ar.bignumToBigInt=r=>8===r.byteLength?new r.BigIntArray(r.buffer,r.byteOffset,1)[0]:al(r),ar.bignumToString=r=>8===r.byteLength?`${new r.BigIntArray(r.buffer,r.byteOffset,1)[0]}`:al(r)):(ar.bignumToString=al,ar.bignumToBigInt=ar.bignumToString);class ac{constructor(r,n){return ac.new(r,n)}static new(r,n){switch(n){case!0:return new ai(r);case!1:return new aa(r)}switch(r.constructor){case Int8Array:case Int16Array:case Int32Array:case np.BigInt64Array:return new ai(r)}return 16===r.byteLength?new ao(r):new aa(r)}static signed(r){return new ai(r)}static unsigned(r){return new aa(r)}static decimal(r){return new ao(r)}}ar.BN=ac;class au extends nU.FixedWidthBuilder{setValue(r,n){this._values.set(r,n)}}ae.IntBuilder=au,ae.Int8Builder=class extends au{},ae.Int16Builder=class extends au{},ae.Int32Builder=class extends au{},ae.Int64Builder=class extends au{constructor(r){r.nullValues&&(r.nullValues=r.nullValues.map(af)),super(r),this._values=new iV.WideBufferBuilder(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(r){return super.isValid(af(r))}},ae.Uint8Builder=class extends au{},ae.Uint16Builder=class extends au{},ae.Uint32Builder=class extends au{},ae.Uint64Builder=class extends au{constructor(r){r.nullValues&&(r.nullValues=r.nullValues.map(af)),super(r),this._values=new iV.WideBufferBuilder(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(r){return super.isValid(af(r))}};const af=(i={BigIntArray:np.BigInt64Array},r=>(ArrayBuffer.isView(r)&&(i.buffer=r.buffer,i.byteOffset=r.byteOffset,i.byteLength=r.byteLength,r=ar.bignumToBigInt(i),i.buffer=null),r));nN.IntBuilder=ae.IntBuilder,nN.Int8Builder=ae.Int8Builder,nN.Int16Builder=ae.Int16Builder,nN.Int32Builder=ae.Int32Builder,nN.Int64Builder=ae.Int64Builder,nN.Uint8Builder=ae.Uint8Builder,nN.Uint16Builder=ae.Uint16Builder,nN.Uint32Builder=ae.Uint32Builder,nN.Uint64Builder=ae.Uint64Builder;var ah={};Object.defineProperty(ah,"__esModule",{value:!0});class ap extends nU.FixedWidthBuilder{}ah.TimeBuilder=ap,ah.TimeSecondBuilder=class extends ap{},ah.TimeMillisecondBuilder=class extends ap{},ah.TimeMicrosecondBuilder=class extends ap{},ah.TimeNanosecondBuilder=class extends ap{},nN.TimeBuilder=ah.TimeBuilder,nN.TimeSecondBuilder=ah.TimeSecondBuilder,nN.TimeMillisecondBuilder=ah.TimeMillisecondBuilder,nN.TimeMicrosecondBuilder=ah.TimeMicrosecondBuilder,nN.TimeNanosecondBuilder=ah.TimeNanosecondBuilder;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});class ay extends nU.FixedWidthBuilder{}ad.TimestampBuilder=ay,ad.TimestampSecondBuilder=class extends ay{},ad.TimestampMillisecondBuilder=class extends ay{},ad.TimestampMicrosecondBuilder=class extends ay{},ad.TimestampNanosecondBuilder=class extends ay{},nN.TimestampBuilder=ad.TimestampBuilder,nN.TimestampSecondBuilder=ad.TimestampSecondBuilder,nN.TimestampMillisecondBuilder=ad.TimestampMillisecondBuilder,nN.TimestampMicrosecondBuilder=ad.TimestampMicrosecondBuilder,nN.TimestampNanosecondBuilder=ad.TimestampNanosecondBuilder;var ag={};Object.defineProperty(ag,"__esModule",{value:!0});class av extends nU.FixedWidthBuilder{}ag.IntervalBuilder=av,ag.IntervalDayTimeBuilder=class extends av{},ag.IntervalYearMonthBuilder=class extends av{},nN.IntervalBuilder=ag.IntervalBuilder,nN.IntervalDayTimeBuilder=ag.IntervalDayTimeBuilder,nN.IntervalYearMonthBuilder=ag.IntervalYearMonthBuilder;var am={};Object.defineProperty(am,"__esModule",{value:!0});var ax={};Object.defineProperty(ax,"__esModule",{value:!0});class ab extends nU.VariableWidthBuilder{constructor(r){super(r),this._values=new iV.BufferBuilder(new Uint8Array(0))}get byteLength(){let r=this._pendingLength+4*this.length;return this._offsets&&(r+=this._offsets.byteLength),this._values&&(r+=this._values.byteLength),this._nulls&&(r+=this._nulls.byteLength),r}setValue(r,n){return super.setValue(r,r_.toUint8Array(n))}_flushPending(r,n){let i=this._offsets,a=this._values.reserve(n).buffer,o=0,s=0,l=0,c;for([o,c]of r)void 0===c?i.set(o,0):(s=c.length,a.set(c,l),i.set(o,s),l+=s)}}ax.BinaryBuilder=ab;class a_ extends nU.VariableWidthBuilder{constructor(r){super(r),this._values=new iV.BufferBuilder(new Uint8Array(0))}get byteLength(){let r=this._pendingLength+4*this.length;return this._offsets&&(r+=this._offsets.byteLength),this._values&&(r+=this._values.byteLength),this._nulls&&(r+=this._nulls.byteLength),r}setValue(r,n){return super.setValue(r,rT.encodeUtf8(n))}_flushPending(r,n){}}am.Utf8Builder=a_,a_.prototype._flushPending=ax.BinaryBuilder.prototype._flushPending,nN.Utf8Builder=am.Utf8Builder,nN.BinaryBuilder=ax.BinaryBuilder;var aw={};Object.defineProperty(aw,"__esModule",{value:!0});var aT={};Object.defineProperty(aT,"__esModule",{value:!0}),aT.Run=class{get length(){return this._values.length}get(r){return this._values[r]}clear(){return this._values=null,this}bind(r){return r instanceof nj.Vector?r:(this._values=r,this)}};var aA={};Object.defineProperty(aA,"__esModule",{value:!0});var ak={};Object.defineProperty(ak,"__esModule",{value:!0});var aM={};Object.defineProperty(aM,"__esModule",{value:!0});var aS={};Object.defineProperty(aS,"__esModule",{value:!0});var aE={};Object.defineProperty(aE,"__esModule",{value:!0});var aI={};Object.defineProperty(aI,"__esModule",{value:!0});const aL=Symbol.for("parent"),aC=Symbol.for("rowIndex"),aO=Symbol.for("keyToIdx"),aD=Symbol.for("idxToVal"),aP=Symbol.for("nodejs.util.inspect.custom");class aB{constructor(r,n){this[aL]=r,this.size=n}entries(){return this[Symbol.iterator]()}has(r){return void 0!==this.get(r)}get(r){let n;if(null!=r){let i=this[aO]||(this[aO]=new Map),a=i.get(r);if(void 0!==a){let r=this[aD]||(this[aD]=Array(this.size));void 0!==(n=r[a])||(r[a]=n=this.getValue(a))}else if((a=this.getIndex(r))>-1){i.set(r,a);let o=this[aD]||(this[aD]=Array(this.size));void 0!==(n=o[a])||(o[a]=n=this.getValue(a))}}return n}set(r,n){if(null!=r){let i=this[aO]||(this[aO]=new Map),a=i.get(r);void 0===a&&i.set(r,a=this.getIndex(r)),a>-1&&((this[aD]||(this[aD]=Array(this.size)))[a]=this.setValue(a,n))}return this}clear(){throw Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(r){throw Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){let r=this.keys(),n=this.values(),i=this[aO]||(this[aO]=new Map),a=this[aD]||(this[aD]=Array(this.size));for(let o,s,l=0,c,u;!((c=r.next()).done||(u=n.next()).done);++l)o=c.value,s=u.value,a[l]=s,i.has(o)||i.set(o,l),yield[o,s]}forEach(r,n){let i=this.keys(),a=this.values(),o=void 0===n?r:(i,a,o)=>r.call(n,i,a,o),s=this[aO]||(this[aO]=new Map),l=this[aD]||(this[aD]=Array(this.size));for(let r,n,c=0,u,f;!((u=i.next()).done||(f=a.next()).done);++c)r=u.value,n=f.value,l[c]=n,s.has(r)||s.set(r,c),o(n,r,this)}toArray(){return[...this.values()]}toJSON(){let r={};return this.forEach((n,i)=>r[i]=n),r}inspect(){return this.toString()}[aP](){return this.toString()}toString(){let r=[];return this.forEach((n,i)=>{i=iU.valueToString(i),n=iU.valueToString(n),r.push(`${i}: ${n}`)}),`{ ${r.join(", ")} }`}}aB[Symbol.toStringTag]=(Object.defineProperties(eY=aB.prototype,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[aL]:{writable:!0,enumerable:!1,configurable:!1,value:null},[aC]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),eY[Symbol.toStringTag]="Row"),aI.MapRow=class extends aB{constructor(r){return super(r,r.length),az(this)}keys(){return this[aL].getChildAt(0)[Symbol.iterator]()}values(){return this[aL].getChildAt(1)[Symbol.iterator]()}getKey(r){return this[aL].getChildAt(0).get(r)}getIndex(r){return this[aL].getChildAt(0).indexOf(r)}getValue(r){return this[aL].getChildAt(1).get(r)}setValue(r,n){this[aL].getChildAt(1).set(r,n)}},aI.StructRow=class extends aB{constructor(r){return super(r,r.type.children.length),aR(this)}*keys(){for(let r of this[aL].type.children)yield r.name}*values(){for(let r of this[aL].type.children)yield this[r.name]}getKey(r){return this[aL].type.children[r].name}getIndex(r){return this[aL].type.children.findIndex(n=>n.name===r)}getValue(r){return this[aL].getChildAt(r).get(this[aC])}setValue(r,n){return this[aL].getChildAt(r).set(this[aC],n)}},Object.setPrototypeOf(aB.prototype,Map.prototype);const aR=(()=>{let r={enumerable:!0,configurable:!1,get:null,set:null};return n=>{let i=-1,a=n[aO]||(n[aO]=new Map),o=r=>function(){return this.get(r)},s=r=>function(n){return this.set(r,n)};for(let l of n.keys())a.set(l,++i),r.get=o(l),r.set=s(l),n.hasOwnProperty(l)||(r.enumerable=!0,Object.defineProperty(n,l,r)),n.hasOwnProperty(i)||(r.enumerable=!1,Object.defineProperty(n,i,r));return r.get=r.set=null,n}})(),az=(()=>{if("undefined"==typeof Proxy)return aR;let r=aB.prototype.has,n=aB.prototype.get,i=aB.prototype.set,a=aB.prototype.getKey,o={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:r=>[...r.keys()].map(r=>`${r}`),has(r,n){switch(n){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case aL:case aC:case aD:case aO:case aP:return!0}return"number"!=typeof n||r.has(n)||(n=r.getKey(n)),r.has(n)},get(i,o,s){switch(o){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case aL:case aC:case aD:case aO:case aP:return Reflect.get(i,o,s)}return"number"!=typeof o||r.call(s,o)||(o=a.call(s,o)),n.call(s,o)},set(n,o,s,l){switch(o){case aL:case aC:case aD:case aO:return Reflect.set(n,o,s,l);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof o||r.call(l,o)||(o=a.call(l,o)),!!r.call(l,o)&&!!i.call(l,o,s)}};return r=>new Proxy(r,o)})();aE.clampIndex=function(r,n,i){let a=r.length,o=n>-1?n:a+n%a;return i?i(r,o):o},aE.clampRange=function(n,i,a,o){let{length:s=0}=n,l="number"!=typeof i?0:i,c="number"!=typeof a?s:a;return l<0&&(l=(l%s+s)%s),c<0&&(c=(c%s+s)%s),c<l&&(r=l,l=c,c=r),c>s&&(c=s),o?o(n,l,c):[l,c]};const aF=np.BigIntAvailable?np.BigInt(0):0,aN=r=>r!=r;function aU(r,n){return i=>{if(!i||"object"!=typeof i)return!1;switch(i.constructor){case Array:return function(r,n){let i=r.length;if(n.length!==i)return!1;for(let a=-1;++a<i;)if(!r[a](n[a]))return!1;return!0}(r,i);case Map:case aI.MapRow:case aI.StructRow:return aj(r,i,i.keys());case Object:case void 0:return aj(r,i,n||Object.keys(i))}return i instanceof nj.Vector&&function(r,n){let i=r.length;if(n.length!==i)return!1;for(let a=-1;++a<i;)if(!r[a](n.get(a)))return!1;return!0}(r,i)}}function aj(r,n,i){let a=i[Symbol.iterator](),o=n instanceof Map?n.keys():Object.keys(n)[Symbol.iterator](),s=n instanceof Map?n.values():Object.values(n)[Symbol.iterator](),l=0,c=r.length,u=s.next(),f=a.next(),h=o.next();for(;l<c&&!f.done&&!h.done&&!u.done&&f.value===h.value&&r[l](u.value);++l,f=a.next(),h=o.next(),u=s.next());return l===c&&!!f.done&&!!h.done&&!!u.done||(a.return&&a.return(),o.return&&o.return(),s.return&&s.return(),!1)}aE.createElementComparator=function r(n){let i=typeof n;if("object"!==i||null===n)return aN(n)?aN:"bigint"!==i?r=>r===n:r=>aF+r===n;if(n instanceof Date){let r=n.valueOf();return n=>n instanceof Date&&n.valueOf()===r}return ArrayBuffer.isView(n)?r=>!!r&&r_.compareArrayLike(n,r):n instanceof Map?function(n){let i=-1,a=[];return n.forEach(n=>a[++i]=r(n)),aU(a)}(n):Array.isArray(n)?function(n){let i=[];for(let a=-1,o=n.length;++a<o;)i[a]=r(n[a]);return aU(i)}(n):n instanceof nj.Vector?function(n){let i=[];for(let a=-1,o=n.length;++a<o;)i[a]=r(n.get(a));return aU(i)}(n):function(n){let i=Object.keys(n);if(0===i.length)return()=>!1;let a=[];for(let o=-1,s=i.length;++o<s;)a[o]=r(n[i[o]]);return aU(a,i)}(n)};class aV extends nj.AbstractVector{constructor(r,n=[],i=function(r){let n=new Uint32Array((r||[]).length+1),i=n[0]=0,a=n.length;for(let o=0;++o<a;)n[o]=i+=r[o-1].length;return n}(n)){super(),this._nullCount=-1,this._type=r,this._chunks=n,this._chunkOffsets=i,this._length=i[i.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...r){return ak.selectChunkArgs(nj.Vector,r)}static concat(...r){let n=aV.flatten(...r);return new aV(n[0].type,n)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((r,n)=>r+n.byteLength,0)}get nullCount(){let r=this._nullCount;return r<0&&(this._nullCount=r=this._chunks.reduce((r,{nullCount:n})=>r+n,0)),r}get indices(){if(n0.DataType.isDictionary(this._type)){if(!this._indices){let r=this._chunks;this._indices=1===r.length?r[0].indices:aV.concat(...r.map(r=>r.indices))}return this._indices}return null}get dictionary(){return n0.DataType.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(let r of this._chunks)yield*r}clone(r=this._chunks){return new aV(this._type,r)}concat(...r){return this.clone(aV.flatten(this,...r))}slice(r,n){return aE.clampRange(this,r,n,this._sliceInternal)}getChildAt(r){let n,i,a;if(r<0||r>=this._numChildren)return null;let o=this._children||(this._children=[]);return(n=o[r])?n:(i=(this._type.children||[])[r])&&(a=this._chunks.map(n=>n.getChildAt(r)).filter(r=>null!=r)).length>0?o[r]=new aV(i.type,a):null}search(r,n){let i=this._chunkOffsets,a=i.length-1;if(r<0||r>=i[a])return null;if(a<=1)return n?n(this,0,r):[0,r];let o=0,s=0,l=0;do{if(o+1===a)return n?n(this,o,r-s):[o,r-s];r>=i[l=o+(a-o)/2|0]?o=l:a=l}while(r<i[a]&&r>=(s=i[o]))return null}isValid(r){return!!this.search(r,this.isValidInternal)}get(r){return this.search(r,this.getInternal)}set(r,n){this.search(r,({chunks:r},i,a)=>r[i].set(a,n))}indexOf(r,n){return n&&"number"==typeof n?this.search(n,(n,i,a)=>this.indexOfInternal(n,i,a,r)):this.indexOfInternal(this,0,Math.max(0,n||0),r)}toArray(){let{chunks:r}=this,n=r.length,i=this._type.ArrayType;if(n<=0)return new i(0);if(n<=1)return r[0].toArray();let a=0,o=Array(n);for(let i=-1;++i<n;)a+=(o[i]=r[i].toArray()).length;i!==o[0].constructor&&(i=o[0].constructor);let s=new i(a),l=i===Array?aq:aH;for(let r=-1,i=0;++r<n;)i=l(o[r],s,i);return s}getInternal({_chunks:r},n,i){return r[n].get(i)}isValidInternal({_chunks:r},n,i){return r[n].isValid(i)}indexOfInternal({_chunks:r},n,i,a){let o=n-1,s=r.length,l=i,c=0,u=-1;for(;++o<s;){if(~(u=r[o].indexOf(a,l)))return c+u;l=0,c+=r[o].length}return -1}_sliceInternal(r,n,i){let a=[],{chunks:o,_chunkOffsets:s}=r;for(let r=-1,l=o.length;++r<l;){let l=o[r],c=l.length,u=s[r];if(u>=i)break;if(n>=u+c)continue;if(u>=n&&u+c<=i){a.push(l);continue}let f=Math.max(0,n-u),h=Math.min(i-u,c);a.push(l.slice(f,h))}return r.clone(a)}}aS.Chunked=aV;const aH=(r,n,i)=>(n.set(r,i),i+r.length),aq=(r,n,i)=>{let a=i;for(let i=-1,o=r.length;++i<o;)n[a++]=r[i];return a};class aG extends aS.Chunked{constructor(r,n=[],i){if(super(r.type,n=aS.Chunked.flatten(...n),i),this._field=r,1===n.length&&!(this instanceof aW))return new aW(r,n[0],this._chunkOffsets)}static new(r,n,...i){let a=aS.Chunked.flatten(Array.isArray(n)?[...n,...i]:n instanceof nj.Vector?[n,...i]:[nj.Vector.new(n,...i)]);if("string"==typeof r){let n=a[0].data.type;r=new aA.Field(r,n,!0)}else!r.nullable&&a.some(({nullCount:r})=>r>0)&&(r=r.clone({nullable:!0}));return new aG(r,a)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(r=this._chunks){return new aG(this._field,r)}getChildAt(r){let n,i,a;if(r<0||r>=this.numChildren)return null;let o=this._children||(this._children=[]);return(n=o[r])?n:(i=(this.type.children||[])[r])&&(a=this._chunks.map(n=>n.getChildAt(r)).filter(r=>null!=r)).length>0?o[r]=new aG(i,a):null}}aM.Column=aG;class aW extends aG{constructor(r,n,i){super(r,[n],i),this._chunk=n}search(r,n){return n?n(this,0,r):[0,r]}isValid(r){return this._chunk.isValid(r)}get(r){return this._chunk.get(r)}set(r,n){this._chunk.set(r,n)}indexOf(r,n){return this._chunk.indexOf(r,n)}}const aY=Array.isArray;function aZ(r,n,i,a){let o,s=a,l=-1,c=n.length;for(;++l<c;)aY(o=n[l])?s=aZ(r,o,i,s).length:o instanceof r&&(i[s++]=o);return i}ak.selectArgs=(r,n)=>aZ(r,n,[],0),ak.selectColumnArgs=r=>{let[n,i]=aK(r,[[],[]]);return i.map((r,i)=>r instanceof aM.Column?aM.Column.new(r.field.clone(n[i]),r):r instanceof nj.Vector?aM.Column.new(n[i],r):aM.Column.new(n[i],[]))},ak.selectFieldArgs=r=>aK(r,[[],[]]),ak.selectChunkArgs=(r,n)=>(function r(n,i,a,o){let s,l=o,c=-1,u=i.length;for(;++c<u;)aY(s=i[c])?l=r(n,s,a,l).length:s instanceof aS.Chunked?l=r(n,s.chunks,a,l).length:s instanceof n&&(a[l++]=s);return a})(r,n,[],0),ak.selectVectorChildrenArgs=(r,n)=>(function r(n,i,a,o){let s,l=o,c=-1,u=i.length;for(;++c<u;)aY(s=i[c])?l=r(n,s,a,l).length:s instanceof n?l=aZ(nj.Vector,s.schema.fields.map((r,n)=>s.getChildAt(n)),a,l).length:s instanceof nj.Vector&&(a[l++]=s);return a})(r,n,[],0),ak.selectColumnChildrenArgs=(r,n)=>(function r(n,i,a,o){let s,l=o,c=-1,u=i.length;for(;++c<u;)aY(s=i[c])?l=r(n,s,a,l).length:s instanceof n?l=aZ(aM.Column,s.schema.fields.map((r,n)=>aM.Column.new(r,s.getChildAt(n))),a,l).length:s instanceof aM.Column&&(a[l++]=s);return a})(r,n,[],0);const aX=(r,[n,i],a)=>(r[0][a]=n,r[1][a]=i,r);function aK(r,n){let i,a,o,s;switch(a=r.length){case 0:return n;case 1:if(i=n[0],!r[0])return n;if(aY(r[0]))return aK(r[0],n);r[0]instanceof nW.Data||r[0]instanceof nj.Vector||r[0]instanceof n0.DataType||([i,r]=Object.entries(r[0]).reduce(aX,n));break;default:aY(i=r[a-1])?r=aY(r[0])?r[0]:r.slice(0,a-1):(r=aY(r[0])?r[0]:r,i=[])}let l=-1,c=-1,u=-1,f=r.length,[h,p]=n;for(;++u<f;)(s=r[u])instanceof aM.Column&&(p[++c]=s)?h[++l]=s.field.clone(i[u],s.type,!0):({[u]:o=u}=i,s instanceof n0.DataType&&(p[++c]=s)?h[++l]=aA.Field.new(o,s,!0):s&&s.type&&(p[++c]=s)&&(s instanceof nW.Data&&(p[c]=s=nj.Vector.new(s)),h[++l]=aA.Field.new(o,s.type,!0)));return n}class aJ{constructor(r=[],n,i){this.fields=r||[],this.metadata=n||new Map,i||(i=a0(r)),this.dictionaries=i}static from(...r){return aJ.new(r[0],r[1])}static new(...r){return new aJ(ak.selectFieldArgs(r)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((r,n)=>`${n}: ${r}`).join(", ")} }>`}compareTo(r){return n1.instance.compareSchemas(this,r)}select(...r){let n=r.reduce((r,n)=>(r[n]=!0,r),Object.create(null));return new aJ(this.fields.filter(r=>n[r.name]),this.metadata)}selectAt(...r){return new aJ(r.map(r=>this.fields[r]).filter(Boolean),this.metadata)}assign(...r){let n=r[0]instanceof aJ?r[0]:new aJ(ak.selectArgs(a$,r)),i=[...this.fields],a=aQ(aQ(new Map,this.metadata),n.metadata),o=n.fields.filter(r=>{let n=i.findIndex(n=>n.name===r.name);return!~n||(i[n]=r.clone({metadata:aQ(aQ(new Map,i[n].metadata),r.metadata)}))&&!1}),s=a0(o,new Map);return new aJ([...i,...o],a,new Map([...this.dictionaries,...s]))}}aA.Schema=aJ;class a${constructor(r,n,i=!1,a){this.name=r,this.type=n,this.nullable=i,this.metadata=a||new Map}static new(...r){let[n,i,a,o]=r;return r[0]&&"object"==typeof r[0]&&({name:n}=r[0],void 0===i&&(i=r[0].type),void 0===a&&(a=r[0].nullable),void 0===o&&(o=r[0].metadata)),new a$(`${n}`,i,a,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(r){return n1.instance.compareField(this,r)}clone(...r){let[n,i,a,o]=r;return r[0]&&"object"==typeof r[0]?{name:n=this.name,type:i=this.type,nullable:a=this.nullable,metadata:o=this.metadata}=r[0]:[n=this.name,i=this.type,a=this.nullable,o=this.metadata]=r,a$.new(n,i,a,o)}}function aQ(r,n){return new Map([...r||new Map,...n||new Map])}function a0(r,n=new Map){for(let i=-1,a=r.length;++i<a;){let a=r[i].type;if(n0.DataType.isDictionary(a)){if(n.has(a.id)){if(n.get(a.id)!==a.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else n.set(a.id,a.dictionary)}a.children&&a.children.length>0&&a0(a.children,n)}return n}aA.Field=a$,aJ.prototype.fields=null,aJ.prototype.metadata=null,aJ.prototype.dictionaries=null,a$.prototype.type=null,a$.prototype.name=null,a$.prototype.nullable=null,a$.prototype.metadata=null;class a1 extends nU.VariableWidthBuilder{constructor(r){super(r),this._run=new aT.Run,this._offsets=new iV.OffsetsBufferBuilder}addChild(r,n="0"){if(this.numChildren>0)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=r,this.type=new n0.List(new aA.Field(n,r.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(r){let n=this._run,i=this._offsets,a=this._setValue,o=0,s;for([o,s]of r)void 0===s?i.set(o,0):(i.set(o,s.length),a(this,o,n.bind(s)))}}aw.ListBuilder=a1,nN.ListBuilder=aw.ListBuilder;var a2={};Object.defineProperty(a2,"__esModule",{value:!0});class a3 extends nU.Builder{constructor(){super(...arguments),this._run=new aT.Run}setValue(r,n){super.setValue(r,this._run.bind(n))}addChild(r,n="0"){if(this.numChildren>0)throw Error("FixedSizeListBuilder can only have one child.");let i=this.children.push(r);return this.type=new n0.FixedSizeList(this.type.listSize,new aA.Field(n,r.type,!0)),i}clear(){return this._run.clear(),super.clear()}}a2.FixedSizeListBuilder=a3,nN.FixedSizeListBuilder=a2.FixedSizeListBuilder;var a4={};Object.defineProperty(a4,"__esModule",{value:!0});class a6 extends nU.VariableWidthBuilder{set(r,n){return super.set(r,n)}setValue(r,n){n=n instanceof Map?n:new Map(Object.entries(n));let i=this._pending||(this._pending=new Map),a=i.get(r);a&&(this._pendingLength-=a.size),this._pendingLength+=n.size,i.set(r,n)}addChild(r,n=`${this.numChildren}`){if(this.numChildren>0)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=r,this.type=new n0.Map_(new aA.Field(n,r.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(r){let n=this._offsets,i=this._setValue;r.forEach((r,a)=>{void 0===r?n.set(a,0):(n.set(a,r.size),i(this,a,r))})}}a4.MapBuilder=a6,nN.MapBuilder=a4.MapBuilder;var a5={};Object.defineProperty(a5,"__esModule",{value:!0});class a8 extends nU.Builder{addChild(r,n=`${this.numChildren}`){let i=this.children.push(r);return this.type=new n0.Struct([...this.type.children,new aA.Field(n,r.type,!0)]),i}}a5.StructBuilder=a8,nN.StructBuilder=a5.StructBuilder;var a7={};Object.defineProperty(a7,"__esModule",{value:!0});class a9 extends nU.Builder{constructor(r){super(r),this._typeIds=new iV.DataBufferBuilder(new Int8Array(0),1),"function"==typeof r.valueToChildTypeId&&(this._valueToChildTypeId=r.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(r,n){return this.set(this.length,r,n)}set(r,n,i){return void 0===i&&(i=this._valueToChildTypeId(this,n,r)),this.setValid(r,this.isValid(n))&&this.setValue(r,n,i),this}setValue(r,n,i){this._typeIds.set(r,i),super.setValue(r,n)}addChild(r,n=`${this.children.length}`){let i=this.children.push(r),{type:{children:a,mode:o,typeIds:s}}=this,l=[...a,new aA.Field(n,r.type)];return this.type=new n0.Union(o,[...s,i],l),i}_valueToChildTypeId(r,n,i){throw Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}a7.UnionBuilder=a9,a7.SparseUnionBuilder=class extends a9{},a7.DenseUnionBuilder=class extends a9{constructor(r){super(r),this._offsets=new iV.DataBufferBuilder(new Int32Array(0))}setValue(r,n,i){let a=this.type.typeIdToChildIndex[i];return this._offsets.set(r,this.getChildAt(a).length),super.setValue(r,n,i)}},nN.UnionBuilder=a7.UnionBuilder,nN.SparseUnionBuilder=a7.SparseUnionBuilder,nN.DenseUnionBuilder=a7.DenseUnionBuilder;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});class oe extends n2.Visitor{}ot.SetVisitor=oe;const or=(r,n,i)=>{r[n]=i/864e5|0},on=(r,n,i)=>{r[n]=i%4294967296|0,r[n+1]=i/4294967296|0},oi=(r,n,i)=>{r[n]=1e3*i%4294967296|0,r[n+1]=1e3*i/4294967296|0},oa=(r,n,i)=>{r[n]=1e6*i%4294967296|0,r[n+1]=1e6*i/4294967296|0},oo=(r,n,i,a)=>{let{[i]:o,[i+1]:s}=n;null!=o&&null!=s&&r.set(a.subarray(0,s-o),o)},os=({values:r},n,i)=>{or(r,n,i.valueOf())},ol=({values:r},n,i)=>{on(r,2*n,i.valueOf())},oc=({stride:r,values:n},i,a)=>{n[r*i]=a},ou=({stride:r,values:n},i,a)=>{n[r*i]=i8.float64ToUint16(a)},of=(r,n,i)=>{switch(typeof i){case"bigint":r.values64[n]=i;break;case"number":r.values[n*r.stride]=i;break;default:let{stride:a,ArrayType:o}=r,s=r_.toArrayBufferView(o,i);r.values.set(s.subarray(0,a),a*n)}},oh=({values:r},n,i)=>on(r,2*n,i/1e3),op=({values:r},n,i)=>on(r,2*n,i),od=({values:r},n,i)=>oi(r,2*n,i),oy=({values:r},n,i)=>oa(r,2*n,i),og=({values:r,stride:n},i,a)=>{r[n*i]=a},ov=({values:r,stride:n},i,a)=>{r[n*i]=a},om=({values:r},n,i)=>{r.set(i.subarray(0,2),2*n)},ox=({values:r},n,i)=>{r.set(i.subarray(0,2),2*n)},ob=(r,n)=>(i,a,o)=>i&&i.set(r,n[o]),o_=(r,n)=>(i,a,o)=>i&&i.set(r,n.get(o)),ow=(r,n)=>(i,a,o)=>i&&i.set(r,n.get(a.name)),oT=(r,n)=>(i,a,o)=>i&&i.set(r,n[a.name]),oA=(r,n,i)=>{let a=r.typeIdToChildIndex[r.typeIds[n]],o=r.getChildAt(a);o&&o.set(r.valueOffsets[n],i)},ok=(r,n,i)=>{let a=r.typeIdToChildIndex[r.typeIds[n]],o=r.getChildAt(a);o&&o.set(n,i)},oM=({values:r},n,i)=>{r.set(i.subarray(0,2),2*n)},oS=({values:r},n,i)=>{r[n]=12*i[0]+i[1]%12};oe.prototype.visitBool=({offset:r,values:n},i,a)=>{let o=r+i;a?n[o>>3]|=1<<o%8:n[o>>3]&=~(1<<o%8)},oe.prototype.visitInt=(r,n,i)=>{r.type.bitWidth<64?oc(r,n,i):of(r,n,i)},oe.prototype.visitInt8=oc,oe.prototype.visitInt16=oc,oe.prototype.visitInt32=oc,oe.prototype.visitInt64=of,oe.prototype.visitUint8=oc,oe.prototype.visitUint16=oc,oe.prototype.visitUint32=oc,oe.prototype.visitUint64=of,oe.prototype.visitFloat=(r,n,i)=>{r.type.precision!==nH.Precision.HALF?oc(r,n,i):ou(r,n,i)},oe.prototype.visitFloat16=ou,oe.prototype.visitFloat32=oc,oe.prototype.visitFloat64=oc,oe.prototype.visitUtf8=({values:r,valueOffsets:n},i,a)=>{oo(r,n,i,rT.encodeUtf8(a))},oe.prototype.visitBinary=({values:r,valueOffsets:n},i,a)=>oo(r,n,i,a),oe.prototype.visitFixedSizeBinary=({stride:r,values:n},i,a)=>{n.set(a.subarray(0,r),r*i)},oe.prototype.visitDate=(r,n,i)=>{r.type.unit===nH.DateUnit.DAY?os(r,n,i):ol(r,n,i)},oe.prototype.visitDateDay=os,oe.prototype.visitDateMillisecond=ol,oe.prototype.visitTimestamp=(r,n,i)=>{switch(r.type.unit){case nH.TimeUnit.SECOND:return oh(r,n,i);case nH.TimeUnit.MILLISECOND:return op(r,n,i);case nH.TimeUnit.MICROSECOND:return od(r,n,i);case nH.TimeUnit.NANOSECOND:return oy(r,n,i)}},oe.prototype.visitTimestampSecond=oh,oe.prototype.visitTimestampMillisecond=op,oe.prototype.visitTimestampMicrosecond=od,oe.prototype.visitTimestampNanosecond=oy,oe.prototype.visitTime=(r,n,i)=>{switch(r.type.unit){case nH.TimeUnit.SECOND:return og(r,n,i);case nH.TimeUnit.MILLISECOND:return ov(r,n,i);case nH.TimeUnit.MICROSECOND:return om(r,n,i);case nH.TimeUnit.NANOSECOND:return ox(r,n,i)}},oe.prototype.visitTimeSecond=og,oe.prototype.visitTimeMillisecond=ov,oe.prototype.visitTimeMicrosecond=om,oe.prototype.visitTimeNanosecond=ox,oe.prototype.visitDecimal=({values:r},n,i)=>{r.set(i.subarray(0,4),4*n)},oe.prototype.visitList=(r,n,i)=>{let a=r.getChildAt(0),o=r.valueOffsets;for(let r=-1,s=o[n],l=o[n+1];s<l;)a.set(s++,i.get(++r))},oe.prototype.visitStruct=(r,n,i)=>{let a=i instanceof Map?ow(n,i):i instanceof nj.Vector?o_(n,i):Array.isArray(i)?ob(n,i):oT(n,i);r.type.children.forEach((n,i)=>a(r.getChildAt(i),n,i))},oe.prototype.visitUnion=(r,n,i)=>{r.type.mode===nH.UnionMode.Dense?oA(r,n,i):ok(r,n,i)},oe.prototype.visitDenseUnion=oA,oe.prototype.visitSparseUnion=ok,oe.prototype.visitDictionary=(r,n,i)=>{let a=r.getKey(n);null!==a&&r.setValue(a,i)},oe.prototype.visitInterval=(r,n,i)=>{r.type.unit===nH.IntervalUnit.DAY_TIME?oM(r,n,i):oS(r,n,i)},oe.prototype.visitIntervalDayTime=oM,oe.prototype.visitIntervalYearMonth=oS,oe.prototype.visitFixedSizeList=(r,n,i)=>{let a=r.getChildAt(0),{stride:o}=r;for(let r=-1,s=n*o;++r<o;)a.set(s+r,i.get(r))},oe.prototype.visitMap=(r,n,i)=>{let a=r.getChildAt(0),o=r.valueOffsets,s=i instanceof Map?[...i]:Object.entries(i);for(let r=-1,i=o[n],l=o[n+1];i<l;)a.set(i++,s[++r])},ot.instance=new oe;var oE={};Object.defineProperty(oE,"__esModule",{value:!0});class oI extends n2.Visitor{visitNull(){return iK.NullBuilder}visitBool(){return iZ.BoolBuilder}visitInt(){return ae.IntBuilder}visitInt8(){return ae.Int8Builder}visitInt16(){return ae.Int16Builder}visitInt32(){return ae.Int32Builder}visitInt64(){return ae.Int64Builder}visitUint8(){return ae.Uint8Builder}visitUint16(){return ae.Uint16Builder}visitUint32(){return ae.Uint32Builder}visitUint64(){return ae.Uint64Builder}visitFloat(){return i5.FloatBuilder}visitFloat16(){return i5.Float16Builder}visitFloat32(){return i5.Float32Builder}visitFloat64(){return i5.Float64Builder}visitUtf8(){return am.Utf8Builder}visitBinary(){return ax.BinaryBuilder}visitFixedSizeBinary(){return i4.FixedSizeBinaryBuilder}visitDate(){return i$.DateBuilder}visitDateDay(){return i$.DateDayBuilder}visitDateMillisecond(){return i$.DateMillisecondBuilder}visitTimestamp(){return ad.TimestampBuilder}visitTimestampSecond(){return ad.TimestampSecondBuilder}visitTimestampMillisecond(){return ad.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return ad.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return ad.TimestampNanosecondBuilder}visitTime(){return ah.TimeBuilder}visitTimeSecond(){return ah.TimeSecondBuilder}visitTimeMillisecond(){return ah.TimeMillisecondBuilder}visitTimeMicrosecond(){return ah.TimeMicrosecondBuilder}visitTimeNanosecond(){return ah.TimeNanosecondBuilder}visitDecimal(){return i0.DecimalBuilder}visitList(){return aw.ListBuilder}visitStruct(){return a5.StructBuilder}visitUnion(){return a7.UnionBuilder}visitDenseUnion(){return a7.DenseUnionBuilder}visitSparseUnion(){return a7.SparseUnionBuilder}visitDictionary(){return i2.DictionaryBuilder}visitInterval(){return ag.IntervalBuilder}visitIntervalDayTime(){return ag.IntervalDayTimeBuilder}visitIntervalYearMonth(){return ag.IntervalYearMonthBuilder}visitFixedSizeList(){return a2.FixedSizeListBuilder}visitMap(){return a4.MapBuilder}}oE.GetBuilderCtor=oI,oE.instance=new oI,nU.Builder.new=function r(n){let i=n.type,a=new(oE.instance.getVisitFn(i)())(n);if(i.children&&i.children.length>0){let o=n.children||[],s={nullValues:n.nullValues},l=Array.isArray(o)?(r,n)=>o[n]||s:({name:r})=>o[r]||s;i.children.forEach((n,i)=>{let{type:o}=n,s=l(n,i);a.children.push(r({...s,type:o}))})}return a},Object.keys(nH.Type).map(r=>nH.Type[r]).filter(r=>"number"==typeof r&&r!==nH.Type.NONE).forEach(r=>{oE.instance.visit(r).prototype._setValue=ot.instance.getVisitFn(r)}),am.Utf8Builder.prototype._setValue=ot.instance.visitBinary;var oL={};Object.defineProperty(oL,"__esModule",{value:!0});var oC={};Object.defineProperty(oC,"__esModule",{value:!0});var oO={};Object.defineProperty(oO,"__esModule",{value:!0}),function(r){class n{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}static getRootAsFooter(r,i){return(i||new n).__init(r.readInt32(r.position())+r.position(),r)}version(){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):nq.org.apache.arrow.flatbuf.MetadataVersion.V1}schema(r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new nq.org.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(r,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new eZ.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*r,this.bb):null}dictionariesLength(){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__vector_len(this.bb_pos+r):0}recordBatches(r,n){let i=this.bb.__offset(this.bb_pos,10);return i?(n||new eZ.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*r,this.bb):null}recordBatchesLength(){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__vector_len(this.bb_pos+r):0}static startFooter(r){r.startObject(4)}static addVersion(r,n){r.addFieldInt16(0,n,nq.org.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(r,n){r.addFieldOffset(1,n,0)}static addDictionaries(r,n){r.addFieldOffset(2,n,0)}static startDictionariesVector(r,n){r.startVector(24,n,8)}static addRecordBatches(r,n){r.addFieldOffset(3,n,0)}static startRecordBatchesVector(r,n){r.startVector(24,n,8)}static endFooter(r){return r.endObject()}static finishFooterBuffer(r,n){r.finish(n)}static createFooter(r,i,a,o,s){return n.startFooter(r),n.addVersion(r,i),n.addSchema(r,a),n.addDictionaries(r,o),n.addRecordBatches(r,s),n.endFooter(r)}}r.Footer=n}((eK=(eX=(eZ=oO.org||(oO.org={})).apache||(eZ.apache={})).arrow||(eX.arrow={})).flatbuf||(eK.flatbuf={})),((eQ=(e$=(eJ=oO.org||(oO.org={})).apache||(eJ.apache={})).arrow||(e$.arrow={})).flatbuf||(eQ.flatbuf={})).Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(r,n){return this.bb_pos=r,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(r,n,i,a){return r.prep(8,24),r.writeInt64(a),r.pad(4),r.writeInt32(i),r.writeInt64(n),r.offset()}};var oD=rw.Long,oP=rw.Builder,oB=rw.ByteBuffer,oR=oO.org.apache.arrow.flatbuf.Block,oz=oO.org.apache.arrow.flatbuf.Footer;class oF{constructor(r,n=nH.MetadataVersion.V4,i,a){this.schema=r,this.version=n,i&&(this._recordBatches=i),a&&(this._dictionaryBatches=a)}static decode(r){r=new oB(r_.toUint8Array(r));let n=oz.getRootAsFooter(r);return new oN(aA.Schema.decode(n.schema()),n)}static encode(r){let n=new oP,i=aA.Schema.encode(n,r.schema);oz.startRecordBatchesVector(n,r.numRecordBatches),[...r.recordBatches()].slice().reverse().forEach(r=>oU.encode(n,r));let a=n.endVector();oz.startDictionariesVector(n,r.numDictionaries),[...r.dictionaryBatches()].slice().reverse().forEach(r=>oU.encode(n,r));let o=n.endVector();return oz.startFooter(n),oz.addSchema(n,i),oz.addVersion(n,nH.MetadataVersion.V4),oz.addRecordBatches(n,a),oz.addDictionaries(n,o),oz.finishFooterBuffer(n,oz.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let r,n=-1,i=this.numRecordBatches;++n<i;)(r=this.getRecordBatch(n))&&(yield r)}*dictionaryBatches(){for(let r,n=-1,i=this.numDictionaries;++n<i;)(r=this.getDictionaryBatch(n))&&(yield r)}getRecordBatch(r){return r>=0&&r<this.numRecordBatches&&this._recordBatches[r]||null}getDictionaryBatch(r){return r>=0&&r<this.numDictionaries&&this._dictionaryBatches[r]||null}}oC.Footer=oF;class oN extends oF{constructor(r,n){super(r,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(r){if(r>=0&&r<this.numRecordBatches){let n=this._footer.recordBatches(r);if(n)return oU.decode(n)}return null}getDictionaryBatch(r){if(r>=0&&r<this.numDictionaries){let n=this._footer.dictionaries(r);if(n)return oU.decode(n)}return null}}class oU{static decode(r){return new oU(r.metaDataLength(),r.bodyLength(),r.offset())}static encode(r,n){let{metaDataLength:i}=n,a=new oD(n.offset,0),o=new oD(n.bodyLength,0);return oR.createBlock(r,a,i,o)}constructor(r,n,i){this.metaDataLength=r,this.offset="number"==typeof i?i:i.low,this.bodyLength="number"==typeof n?n:n.low}}oC.FileBlock=oU;var oj={};Object.defineProperty(oj,"__esModule",{value:!0});class oV extends nd.AsyncQueue{write(r){if((r=r_.toUint8Array(r)).byteLength>0)return super.write(r)}toString(r=!1){return r?rT.decodeUtf8(this.toUint8Array(!0)):this.toUint8Array(!1).then(rT.decodeUtf8)}toUint8Array(r=!1){return r?r_.joinUint8Arrays(this._values)[0]:(async()=>{let r=[],n=0;for await(let i of this)r.push(i),n+=i.byteLength;return r_.joinUint8Arrays(r,n)[0]})()}}oj.AsyncByteQueue=oV;class oH{constructor(r){r&&(this.source=new oG(rb.default.fromIterable(r)))}[Symbol.iterator](){return this}next(r){return this.source.next(r)}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}peek(r){return this.source.peek(r)}read(r){return this.source.read(r)}}oj.ByteStream=oH;class oq{constructor(r){r instanceof oq?this.source=r.source:r instanceof oV?this.source=new oW(rb.default.fromAsyncIterable(r)):np.isReadableNodeStream(r)?this.source=new oW(rb.default.fromNodeStream(r)):np.isReadableDOMStream(r)?this.source=new oW(rb.default.fromDOMStream(r)):np.isFetchResponse(r)?this.source=new oW(rb.default.fromDOMStream(r.body)):np.isIterable(r)?this.source=new oW(rb.default.fromIterable(r)):np.isPromise(r)?this.source=new oW(rb.default.fromAsyncIterable(r)):np.isAsyncIterable(r)&&(this.source=new oW(rb.default.fromAsyncIterable(r)))}[Symbol.asyncIterator](){return this}next(r){return this.source.next(r)}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}get closed(){return this.source.closed}cancel(r){return this.source.cancel(r)}peek(r){return this.source.peek(r)}read(r){return this.source.read(r)}}oj.AsyncByteStream=oq;class oG{constructor(r){this.source=r}cancel(r){this.return(r)}peek(r){return this.next(r,"peek").value}read(r){return this.next(r,"read").value}next(r,n="read"){return this.source.next({cmd:n,size:r})}throw(r){return Object.create(this.source.throw&&this.source.throw(r)||nd.ITERATOR_DONE)}return(r){return Object.create(this.source.return&&this.source.return(r)||nd.ITERATOR_DONE)}}class oW{constructor(r){this.source=r,this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}async cancel(r){await this.return(r)}get closed(){return this._closedPromise}async read(r){return(await this.next(r,"read")).value}async peek(r){return(await this.next(r,"peek")).value}async next(r,n="read"){return await this.source.next({cmd:n,size:r})}async throw(r){let n=this.source.throw&&await this.source.throw(r)||nd.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)}async return(r){let n=this.source.return&&await this.source.return(r)||nd.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)}}var oY={};Object.defineProperty(oY,"__esModule",{value:!0});class oZ extends oj.ByteStream{constructor(r,n){super(),this.position=0,this.buffer=r_.toUint8Array(r),this.size=void 0===n?this.buffer.byteLength:n}readInt32(r){let{buffer:n,byteOffset:i}=this.readAt(r,4);return new DataView(n,i).getInt32(0,!0)}seek(r){return this.position=Math.min(r,this.size),r<this.size}read(r){let{buffer:n,size:i,position:a}=this;return n&&a<i?("number"!=typeof r&&(r=1/0),this.position=Math.min(i,a+Math.min(i-a,r)),n.subarray(a,this.position)):null}readAt(r,n){let i=this.buffer,a=Math.min(this.size,r+n);return i?i.subarray(r,a):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(r){return this.close(),{done:!0,value:r}}return(r){return this.close(),{done:!0,value:r}}}oY.RandomAccessFile=oZ;class oX extends oj.AsyncByteStream{constructor(r,n){super(),this.position=0,this._handle=r,"number"==typeof n?this.size=n:this._pending=(async()=>{this.size=(await r.stat()).size,delete this._pending})()}async readInt32(r){let{buffer:n,byteOffset:i}=await this.readAt(r,4);return new DataView(n,i).getInt32(0,!0)}async seek(r){return this._pending&&await this._pending,this.position=Math.min(r,this.size),r<this.size}async read(r){this._pending&&await this._pending;let{_handle:n,size:i,position:a}=this;if(n&&a<i){"number"!=typeof r&&(r=1/0);let o=a,s=0,l=0,c=Math.min(i,o+Math.min(i-o,r)),u=new Uint8Array(Math.max(0,(this.position=c)-o));for(;(o+=l)<c&&(s+=l)<u.byteLength;)({bytesRead:l}=await n.read(u,s,u.byteLength-s,o));return u}return null}async readAt(r,n){this._pending&&await this._pending;let{_handle:i,size:a}=this;if(i&&r+n<a){let o=new Uint8Array(Math.min(a,r+n)-r);return(await i.read(o,0,n,r)).buffer}return new Uint8Array(n)}async close(){let r=this._handle;this._handle=null,r&&await r.close()}async throw(r){return await this.close(),{done:!0,value:r}}async return(r){return await this.close(),{done:!0,value:r}}}oY.AsyncRandomAccessFile=oX;var oK={};Object.defineProperty(oK,"__esModule",{value:!0});var oJ={};function o$(r){return r<0&&(r=4294967295+r+1),`0x${r.toString(16)}`}Object.defineProperty(oJ,"__esModule",{value:!0});const oQ=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class o0{constructor(r){this.buffer=r}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(r){let n=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([r.buffer[1]>>>16,65535&r.buffer[1],r.buffer[0]>>>16,65535&r.buffer[0]]),a=n[3]*i[3];this.buffer[0]=65535&a;let o=a>>>16;return o+=(a=n[2]*i[3])+(a=n[3]*i[2]>>>0),this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<a?65536:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(r){let n=this.buffer[0]+r.buffer[0]>>>0;this.buffer[1]+=r.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(r){return this.buffer[1]<r.buffer[1]||this.buffer[1]===r.buffer[1]&&this.buffer[0]<r.buffer[0]}equals(r){return this.buffer[1]===r.buffer[1]&&this.buffer[0]==r.buffer[0]}greaterThan(r){return r.lessThan(this)}hex(){return`${o$(this.buffer[1])} ${o$(this.buffer[0])}`}}oJ.BaseInt64=o0;class o1 extends o0{times(r){return this._times(r),this}plus(r){return this._plus(r),this}static from(r,n=new Uint32Array(2)){return o1.fromString("string"==typeof r?r:r.toString(),n)}static fromNumber(r,n=new Uint32Array(2)){return o1.fromString(r.toString(),n)}static fromString(r,n=new Uint32Array(2)){let i=r.length,a=new o1(n);for(let n=0;n<i;){let o=8<i-n?8:i-n,s=new o1(new Uint32Array([parseInt(r.substr(n,o),10),0])),l=new o1(new Uint32Array([oQ[o],0]));a.times(l),a.plus(s),n+=o}return a}static convertArray(r){let n=new Uint32Array(2*r.length);for(let i=-1,a=r.length;++i<a;)o1.from(r[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(r,n){return new o1(new Uint32Array(r.buffer)).times(n)}static add(r,n){return new o1(new Uint32Array(r.buffer)).plus(n)}}oJ.Uint64=o1;class o2 extends o0{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(r){return this._times(r),this}plus(r){return this._plus(r),this}lessThan(r){let n=this.buffer[1]<<0,i=r.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<r.buffer[0]}static from(r,n=new Uint32Array(2)){return o2.fromString("string"==typeof r?r:r.toString(),n)}static fromNumber(r,n=new Uint32Array(2)){return o2.fromString(r.toString(),n)}static fromString(r,n=new Uint32Array(2)){let i=r.startsWith("-"),a=r.length,o=new o2(n);for(let n=i?1:0;n<a;){let i=8<a-n?8:a-n,s=new o2(new Uint32Array([parseInt(r.substr(n,i),10),0])),l=new o2(new Uint32Array([oQ[i],0]));o.times(l),o.plus(s),n+=i}return i?o.negate():o}static convertArray(r){let n=new Uint32Array(2*r.length);for(let i=-1,a=r.length;++i<a;)o2.from(r[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(r,n){return new o2(new Uint32Array(r.buffer)).times(n)}static add(r,n){return new o2(new Uint32Array(r.buffer)).plus(n)}}oJ.Int64=o2;class o3{constructor(r){this.buffer=r}high(){return new o2(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new o2(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(r){let n=new o1(new Uint32Array([this.buffer[3],0])),i=new o1(new Uint32Array([this.buffer[2],0])),a=new o1(new Uint32Array([this.buffer[1],0])),o=new o1(new Uint32Array([this.buffer[0],0])),s=new o1(new Uint32Array([r.buffer[3],0])),l=new o1(new Uint32Array([r.buffer[2],0])),c=new o1(new Uint32Array([r.buffer[1],0])),u=new o1(new Uint32Array([r.buffer[0],0])),f=o1.multiply(o,u);this.buffer[0]=f.low();let h=new o1(new Uint32Array([f.high(),0]));return f=o1.multiply(a,u),h.plus(f),f=o1.multiply(o,c),h.plus(f),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(f)?1:0,this.buffer[2]=h.high(),new o1(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(o1.multiply(i,u)).plus(o1.multiply(a,c)).plus(o1.multiply(o,l)),this.buffer[3]+=o1.multiply(n,u).plus(o1.multiply(i,c)).plus(o1.multiply(a,l)).plus(o1.multiply(o,s)).low(),this}plus(r){let n=new Uint32Array(4);return n[3]=this.buffer[3]+r.buffer[3]>>>0,n[2]=this.buffer[2]+r.buffer[2]>>>0,n[1]=this.buffer[1]+r.buffer[1]>>>0,n[0]=this.buffer[0]+r.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${o$(this.buffer[3])} ${o$(this.buffer[2])} ${o$(this.buffer[1])} ${o$(this.buffer[0])}`}static multiply(r,n){return new o3(new Uint32Array(r.buffer)).times(n)}static add(r,n){return new o3(new Uint32Array(r.buffer)).plus(n)}static from(r,n=new Uint32Array(4)){return o3.fromString("string"==typeof r?r:r.toString(),n)}static fromNumber(r,n=new Uint32Array(4)){return o3.fromString(r.toString(),n)}static fromString(r,n=new Uint32Array(4)){let i=r.startsWith("-"),a=r.length,o=new o3(n);for(let n=i?1:0;n<a;){let i=8<a-n?8:a-n,s=new o3(new Uint32Array([parseInt(r.substr(n,i),10),0,0,0])),l=new o3(new Uint32Array([oQ[i],0,0,0]));o.times(l),o.plus(s),n+=i}return i?o.negate():o}static convertArray(r){let n=new Uint32Array(4*r.length);for(let i=-1,a=r.length;++i<a;)o3.from(r[i],new Uint32Array(n.buffer,n.byteOffset+16*i,4));return n}}oJ.Int128=o3;class o4 extends n2.Visitor{constructor(r,n,i,a){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=r,this.nodes=n,this.buffers=i,this.dictionaries=a}visit(r){return super.visit(r instanceof aA.Field?r.type:r)}visitNull(r,{length:n}=this.nextFieldNode()){return nW.Data.Null(r,0,n)}visitBool(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Bool(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitInt(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Int(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitFloat(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Float(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitUtf8(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Utf8(r,0,n,i,this.readNullBitmap(r,i),this.readOffsets(r),this.readData(r))}visitBinary(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Binary(r,0,n,i,this.readNullBitmap(r,i),this.readOffsets(r),this.readData(r))}visitFixedSizeBinary(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.FixedSizeBinary(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitDate(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Date(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitTimestamp(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Timestamp(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitTime(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Time(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitDecimal(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Decimal(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitList(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.List(r,0,n,i,this.readNullBitmap(r,i),this.readOffsets(r),this.visit(r.children[0]))}visitStruct(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Struct(r,0,n,i,this.readNullBitmap(r,i),this.visitMany(r.children))}visitUnion(r){return r.mode===nH.UnionMode.Sparse?this.visitSparseUnion(r):this.visitDenseUnion(r)}visitDenseUnion(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Union(r,0,n,i,this.readNullBitmap(r,i),this.readTypeIds(r),this.readOffsets(r),this.visitMany(r.children))}visitSparseUnion(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Union(r,0,n,i,this.readNullBitmap(r,i),this.readTypeIds(r),this.visitMany(r.children))}visitDictionary(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Dictionary(r,0,n,i,this.readNullBitmap(r,i),this.readData(r.indices),this.readDictionary(r))}visitInterval(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Interval(r,0,n,i,this.readNullBitmap(r,i),this.readData(r))}visitFixedSizeList(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.FixedSizeList(r,0,n,i,this.readNullBitmap(r,i),this.visit(r.children[0]))}visitMap(r,{length:n,nullCount:i}=this.nextFieldNode()){return nW.Data.Map(r,0,n,i,this.readNullBitmap(r,i),this.readOffsets(r),this.visit(r.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(r,n,i=this.nextBufferRange()){return n>0&&this.readData(r,i)||new Uint8Array(0)}readOffsets(r,n){return this.readData(r,n)}readTypeIds(r,n){return this.readData(r,n)}readData(r,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(r){return this.dictionaries.get(r.id)}}oK.VectorLoader=o4,oK.JSONVectorLoader=class extends o4{constructor(r,n,i,a){super(new Uint8Array(0),n,i,a),this.sources=r}readNullBitmap(r,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):nY.packBools(this.sources[i])}readOffsets(r,{offset:n}=this.nextBufferRange()){return r_.toArrayBufferView(Uint8Array,r_.toArrayBufferView(Int32Array,this.sources[n]))}readTypeIds(r,{offset:n}=this.nextBufferRange()){return r_.toArrayBufferView(Uint8Array,r_.toArrayBufferView(r.ArrayType,this.sources[n]))}readData(r,{offset:n}=this.nextBufferRange()){let{sources:i}=this;if(n0.DataType.isTimestamp(r)||(n0.DataType.isInt(r)||n0.DataType.isTime(r))&&64===r.bitWidth||n0.DataType.isDate(r)&&r.unit===nH.DateUnit.MILLISECOND)return r_.toArrayBufferView(Uint8Array,oJ.Int64.convertArray(i[n]));if(n0.DataType.isDecimal(r))return r_.toArrayBufferView(Uint8Array,oJ.Int128.convertArray(i[n]));if(n0.DataType.isBinary(r)||n0.DataType.isFixedSizeBinary(r))return function(r){let n=r.join(""),i=new Uint8Array(n.length/2);for(let r=0;r<n.length;r+=2)i[r>>1]=parseInt(n.substr(r,2),16);return i}(i[n]);if(n0.DataType.isBool(r))return nY.packBools(i[n]);if(n0.DataType.isUtf8(r))return rT.encodeUtf8(i[n].join(""));return r_.toArrayBufferView(Uint8Array,r_.toArrayBufferView(r.ArrayType,i[n].map(r=>+r)))}};var o6={};Object.defineProperty(o6,"__esModule",{value:!0});var o5={};Object.defineProperty(o5,"__esModule",{value:!0});var o8={};Object.defineProperty(o8,"__esModule",{value:!0});var o7={};Object.defineProperty(o7,"__esModule",{value:!0});var o9=rw.ByteBuffer,st={};Object.defineProperty(st,"__esModule",{value:!0});var se={};Object.defineProperty(se,"__esModule",{value:!0});var sr=rw.Long,sn=nq.org.apache.arrow.flatbuf.Null,si=nq.org.apache.arrow.flatbuf.Int,sa=nq.org.apache.arrow.flatbuf.FloatingPoint,so=nq.org.apache.arrow.flatbuf.Binary,ss=nq.org.apache.arrow.flatbuf.Bool,sl=nq.org.apache.arrow.flatbuf.Utf8,sc=nq.org.apache.arrow.flatbuf.Decimal,su=nq.org.apache.arrow.flatbuf.Date,sf=nq.org.apache.arrow.flatbuf.Time,sh=nq.org.apache.arrow.flatbuf.Timestamp,sp=nq.org.apache.arrow.flatbuf.Interval,sd=nq.org.apache.arrow.flatbuf.List,sy=nq.org.apache.arrow.flatbuf.Struct_,sg=nq.org.apache.arrow.flatbuf.Union,sv=nq.org.apache.arrow.flatbuf.DictionaryEncoding,sm=nq.org.apache.arrow.flatbuf.FixedSizeBinary,sx=nq.org.apache.arrow.flatbuf.FixedSizeList,sb=nq.org.apache.arrow.flatbuf.Map;class s_ extends n2.Visitor{visit(r,n){return null==r||null==n?void 0:super.visit(r,n)}visitNull(r,n){return sn.startNull(n),sn.endNull(n)}visitInt(r,n){return si.startInt(n),si.addBitWidth(n,r.bitWidth),si.addIsSigned(n,r.isSigned),si.endInt(n)}visitFloat(r,n){return sa.startFloatingPoint(n),sa.addPrecision(n,r.precision),sa.endFloatingPoint(n)}visitBinary(r,n){return so.startBinary(n),so.endBinary(n)}visitBool(r,n){return ss.startBool(n),ss.endBool(n)}visitUtf8(r,n){return sl.startUtf8(n),sl.endUtf8(n)}visitDecimal(r,n){return sc.startDecimal(n),sc.addScale(n,r.scale),sc.addPrecision(n,r.precision),sc.endDecimal(n)}visitDate(r,n){return su.startDate(n),su.addUnit(n,r.unit),su.endDate(n)}visitTime(r,n){return sf.startTime(n),sf.addUnit(n,r.unit),sf.addBitWidth(n,r.bitWidth),sf.endTime(n)}visitTimestamp(r,n){let i=r.timezone&&n.createString(r.timezone)||void 0;return sh.startTimestamp(n),sh.addUnit(n,r.unit),void 0!==i&&sh.addTimezone(n,i),sh.endTimestamp(n)}visitInterval(r,n){return sp.startInterval(n),sp.addUnit(n,r.unit),sp.endInterval(n)}visitList(r,n){return sd.startList(n),sd.endList(n)}visitStruct(r,n){return sy.startStruct_(n),sy.endStruct_(n)}visitUnion(r,n){sg.startTypeIdsVector(n,r.typeIds.length);let i=sg.createTypeIdsVector(n,r.typeIds);return sg.startUnion(n),sg.addMode(n,r.mode),sg.addTypeIds(n,i),sg.endUnion(n)}visitDictionary(r,n){let i=this.visit(r.indices,n);return sv.startDictionaryEncoding(n),sv.addId(n,new sr(r.id,0)),sv.addIsOrdered(n,r.isOrdered),void 0!==i&&sv.addIndexType(n,i),sv.endDictionaryEncoding(n)}visitFixedSizeBinary(r,n){return sm.startFixedSizeBinary(n),sm.addByteWidth(n,r.byteWidth),sm.endFixedSizeBinary(n)}visitFixedSizeList(r,n){return sx.startFixedSizeList(n),sx.addListSize(n,r.listSize),sx.endFixedSizeList(n)}visitMap(r,n){return sb.startMap(n),sb.addKeysSorted(n,r.keysSorted),sb.endMap(n)}}se.TypeAssembler=s_,se.instance=new s_;var sw={};function sT(r){return new st.RecordBatch(r.count,function r(n){return(n||[]).reduce((n,i)=>[...n,new st.FieldNode(i.count,(i.VALIDITY||[]).reduce((r,n)=>r+ +(0===n),0)),...r(i.children)],[])}(r.columns),function r(n,i=[]){for(let a=-1,o=(n||[]).length;++a<o;){let o=n[a];o.VALIDITY&&i.push(new st.BufferRegion(i.length,o.VALIDITY.length)),o.TYPE&&i.push(new st.BufferRegion(i.length,o.TYPE.length)),o.OFFSET&&i.push(new st.BufferRegion(i.length,o.OFFSET.length)),o.DATA&&i.push(new st.BufferRegion(i.length,o.DATA.length)),i=r(o.children,i)}return i}(r.columns))}function sA(r,n){return(r.children||[]).filter(Boolean).map(r=>aA.Field.fromJSON(r,n))}function sk(r){return new Map(Object.entries(r||{}))}function sM(r){return new n0.Int(r.isSigned,r.bitWidth)}function sS(r,n){let i=r.type.name;switch(i){case"NONE":case"null":return new n0.Null;case"binary":return new n0.Binary;case"utf8":return new n0.Utf8;case"bool":return new n0.Bool;case"list":return new n0.List((n||[])[0]);case"struct":case"struct_":return new n0.Struct(n||[])}switch(i){case"int":{let n=r.type;return new n0.Int(n.isSigned,n.bitWidth)}case"floatingpoint":{let n=r.type;return new n0.Float(nH.Precision[n.precision])}case"decimal":{let n=r.type;return new n0.Decimal(n.scale,n.precision)}case"date":{let n=r.type;return new n0.Date_(nH.DateUnit[n.unit])}case"time":{let n=r.type;return new n0.Time(nH.TimeUnit[n.unit],n.bitWidth)}case"timestamp":{let n=r.type;return new n0.Timestamp(nH.TimeUnit[n.unit],n.timezone)}case"interval":{let n=r.type;return new n0.Interval(nH.IntervalUnit[n.unit])}case"union":{let i=r.type;return new n0.Union(nH.UnionMode[i.mode],i.typeIds||[],n||[])}case"fixedsizebinary":{let n=r.type;return new n0.FixedSizeBinary(n.byteWidth)}case"fixedsizelist":{let i=r.type;return new n0.FixedSizeList(i.listSize,(n||[])[0])}case"map":{let i=r.type;return new n0.Map_((n||[])[0],i.keysSorted)}}throw Error(`Unrecognized type: "${i}"`)}Object.defineProperty(sw,"__esModule",{value:!0}),sw.schemaFromJSON=function(r,n=new Map){return new aA.Schema((r.fields||[]).filter(Boolean).map(r=>aA.Field.fromJSON(r,n)),sk(r.customMetadata),n)},sw.recordBatchFromJSON=sT,sw.dictionaryBatchFromJSON=function(r){return new st.DictionaryBatch(sT(r.data),r.id,r.isDelta)},sw.fieldFromJSON=function(r,n){let i,a,o,s,l,c;return n&&(s=r.dictionary)?(n.has(i=s.id)?(a=(a=s.indexType)?sM(a):new n0.Int32,c=new n0.Dictionary(n.get(i),a,i,s.isOrdered)):(a=(a=s.indexType)?sM(a):new n0.Int32,n.set(i,l=sS(r,sA(r,n))),c=new n0.Dictionary(l,a,i,s.isOrdered)),o=new aA.Field(r.name,c,r.nullable,sk(r.customMetadata))):(l=sS(r,sA(r,n)),o=new aA.Field(r.name,l,r.nullable,sk(r.customMetadata))),o||null};var sE=rw.Long,sI=rw.Builder,sL=rw.ByteBuffer,sC=nq.org.apache.arrow.flatbuf.Type,sO=nq.org.apache.arrow.flatbuf.Field,sD=nq.org.apache.arrow.flatbuf.Schema,sP=nq.org.apache.arrow.flatbuf.Buffer,sB=nG.org.apache.arrow.flatbuf.Message,sR=nq.org.apache.arrow.flatbuf.KeyValue,sz=nG.org.apache.arrow.flatbuf.FieldNode,sF=nq.org.apache.arrow.flatbuf.Endianness,sN=nG.org.apache.arrow.flatbuf.RecordBatch,sU=nG.org.apache.arrow.flatbuf.DictionaryBatch;class sj{constructor(r,n,i,a){this._version=n,this._headerType=i,this.body=new Uint8Array(0),a&&(this._createHeader=()=>a),this._bodyLength="number"==typeof r?r:r.low}static fromJSON(r,n){let i=new sj(0,nH.MetadataVersion.V4,n);return i._createHeader=()=>{switch(n){case nH.MessageHeader.Schema:return aA.Schema.fromJSON(r);case nH.MessageHeader.RecordBatch:return sV.fromJSON(r);case nH.MessageHeader.DictionaryBatch:return sH.fromJSON(r)}throw Error(`Unrecognized Message type: { name: ${nH.MessageHeader[n]}, type: ${n} }`)},i}static decode(r){r=new sL(r_.toUint8Array(r));let n=sB.getRootAsMessage(r),i=n.bodyLength(),a=n.version(),o=n.headerType(),s=new sj(i,a,o);return s._createHeader=()=>{switch(o){case nH.MessageHeader.Schema:return aA.Schema.decode(n.header(new sD));case nH.MessageHeader.RecordBatch:return sV.decode(n.header(new sN),n.version());case nH.MessageHeader.DictionaryBatch:return sH.decode(n.header(new sU),n.version())}throw Error(`Unrecognized Message type: { name: ${nH.MessageHeader[o]}, type: ${o} }`)},s}static encode(r){let n=new sI,i=-1;return r.isSchema()?i=aA.Schema.encode(n,r.header()):r.isRecordBatch()?i=sV.encode(n,r.header()):r.isDictionaryBatch()&&(i=sH.encode(n,r.header())),sB.startMessage(n),sB.addVersion(n,nH.MetadataVersion.V4),sB.addHeader(n,i),sB.addHeaderType(n,r.headerType),sB.addBodyLength(n,new sE(r.bodyLength,0)),sB.finishMessageBuffer(n,sB.endMessage(n)),n.asUint8Array()}static from(r,n=0){if(r instanceof aA.Schema)return new sj(0,nH.MetadataVersion.V4,nH.MessageHeader.Schema,r);if(r instanceof sV)return new sj(n,nH.MetadataVersion.V4,nH.MessageHeader.RecordBatch,r);if(r instanceof sH)return new sj(n,nH.MetadataVersion.V4,nH.MessageHeader.DictionaryBatch,r);throw Error(`Unrecognized Message header: ${r}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===nH.MessageHeader.Schema}isRecordBatch(){return this.headerType===nH.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===nH.MessageHeader.DictionaryBatch}}st.Message=sj;class sV{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(r,n,i){this._nodes=n,this._buffers=i,this._length="number"==typeof r?r:r.low}}st.RecordBatch=sV;class sH{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(r,n,i=!1){this._data=r,this._isDelta=i,this._id="number"==typeof n?n:n.low}}st.DictionaryBatch=sH;class sq{constructor(r,n){this.offset="number"==typeof r?r:r.low,this.length="number"==typeof n?n:n.low}}st.BufferRegion=sq;class sG{constructor(r,n){this.length="number"==typeof r?r:r.low,this.nullCount="number"==typeof n?n:n.low}}function sW(r,n){let i=[];for(let a,o=-1,s=-1,l=r.childrenLength();++o<l;)(a=r.children(o))&&(i[++s]=aA.Field.decode(a,n));return i}function sY(r){let n=new Map;if(r)for(let i,a,o=-1,s=0|r.customMetadataLength();++o<s;)(i=r.customMetadata(o))&&null!=(a=i.key())&&n.set(a,i.value());return n}function sZ(r){return new n0.Int(r.isSigned(),r.bitWidth())}function sX(r,n){let i=r.typeType();switch(i){case sC.NONE:case sC.Null:return new n0.Null;case sC.Binary:return new n0.Binary;case sC.Utf8:return new n0.Utf8;case sC.Bool:return new n0.Bool;case sC.List:return new n0.List((n||[])[0]);case sC.Struct_:return new n0.Struct(n||[])}switch(i){case sC.Int:{let n=r.type(new nq.org.apache.arrow.flatbuf.Int);return new n0.Int(n.isSigned(),n.bitWidth())}case sC.FloatingPoint:{let n=r.type(new nq.org.apache.arrow.flatbuf.FloatingPoint);return new n0.Float(n.precision())}case sC.Decimal:{let n=r.type(new nq.org.apache.arrow.flatbuf.Decimal);return new n0.Decimal(n.scale(),n.precision())}case sC.Date:{let n=r.type(new nq.org.apache.arrow.flatbuf.Date);return new n0.Date_(n.unit())}case sC.Time:{let n=r.type(new nq.org.apache.arrow.flatbuf.Time);return new n0.Time(n.unit(),n.bitWidth())}case sC.Timestamp:{let n=r.type(new nq.org.apache.arrow.flatbuf.Timestamp);return new n0.Timestamp(n.unit(),n.timezone())}case sC.Interval:{let n=r.type(new nq.org.apache.arrow.flatbuf.Interval);return new n0.Interval(n.unit())}case sC.Union:{let i=r.type(new nq.org.apache.arrow.flatbuf.Union);return new n0.Union(i.mode(),i.typeIdsArray()||[],n||[])}case sC.FixedSizeBinary:{let n=r.type(new nq.org.apache.arrow.flatbuf.FixedSizeBinary);return new n0.FixedSizeBinary(n.byteWidth())}case sC.FixedSizeList:{let i=r.type(new nq.org.apache.arrow.flatbuf.FixedSizeList);return new n0.FixedSizeList(i.listSize(),(n||[])[0])}case sC.Map:{let i=r.type(new nq.org.apache.arrow.flatbuf.Map);return new n0.Map_((n||[])[0],i.keysSorted())}}throw Error(`Unrecognized type: "${sC[i]}" (${i})`)}st.FieldNode=sG,aA.Field.encode=function(r,n){let i=-1,a=-1,o=-1,s=n.type,l=n.typeId;n0.DataType.isDictionary(s)?(l=s.dictionary.typeId,o=se.instance.visit(s,r),a=se.instance.visit(s.dictionary,r)):a=se.instance.visit(s,r);let c=(s.children||[]).map(n=>aA.Field.encode(r,n)),u=sO.createChildrenVector(r,c),f=n.metadata&&n.metadata.size>0?sO.createCustomMetadataVector(r,[...n.metadata].map(([n,i])=>{let a=r.createString(`${n}`),o=r.createString(`${i}`);return sR.startKeyValue(r),sR.addKey(r,a),sR.addValue(r,o),sR.endKeyValue(r)})):-1;return n.name&&(i=r.createString(n.name)),sO.startField(r),sO.addType(r,a),sO.addTypeType(r,l),sO.addChildren(r,u),sO.addNullable(r,!!n.nullable),-1!==i&&sO.addName(r,i),-1!==o&&sO.addDictionary(r,o),-1!==f&&sO.addCustomMetadata(r,f),sO.endField(r)},aA.Field.decode=function(r,n){let i,a,o,s,l,c;return n&&(c=r.dictionary())?(n.has(i=c.id().low)?(s=(s=c.indexType())?sZ(s):new n0.Int32,l=new n0.Dictionary(n.get(i),s,i,c.isOrdered())):(s=(s=c.indexType())?sZ(s):new n0.Int32,n.set(i,o=sX(r,sW(r,n))),l=new n0.Dictionary(o,s,i,c.isOrdered())),a=new aA.Field(r.name(),l,r.nullable(),sY(r))):(o=sX(r,sW(r,n)),a=new aA.Field(r.name(),o,r.nullable(),sY(r))),a||null},aA.Field.fromJSON=sw.fieldFromJSON,aA.Schema.encode=function(r,n){let i=n.fields.map(n=>aA.Field.encode(r,n));sD.startFieldsVector(r,i.length);let a=sD.createFieldsVector(r,i),o=n.metadata&&n.metadata.size>0?sD.createCustomMetadataVector(r,[...n.metadata].map(([n,i])=>{let a=r.createString(`${n}`),o=r.createString(`${i}`);return sR.startKeyValue(r),sR.addKey(r,a),sR.addValue(r,o),sR.endKeyValue(r)})):-1;return sD.startSchema(r),sD.addFields(r,a),sD.addEndianness(r,sK?sF.Little:sF.Big),-1!==o&&sD.addCustomMetadata(r,o),sD.endSchema(r)},aA.Schema.decode=function(r,n=new Map){let i=function(r,n){let i=[];for(let a,o=-1,s=-1,l=r.fieldsLength();++o<l;)(a=r.fields(o))&&(i[++s]=aA.Field.decode(a,n));return i}(r,n);return new aA.Schema(i,sY(r),n)},aA.Schema.fromJSON=sw.schemaFromJSON,sV.encode=function(r,n){let i=n.nodes||[],a=n.buffers||[];sN.startNodesVector(r,i.length),i.slice().reverse().forEach(n=>sG.encode(r,n));let o=r.endVector();sN.startBuffersVector(r,a.length),a.slice().reverse().forEach(n=>sq.encode(r,n));let s=r.endVector();return sN.startRecordBatch(r),sN.addLength(r,new sE(n.length,0)),sN.addNodes(r,o),sN.addBuffers(r,s),sN.endRecordBatch(r)},sV.decode=function(r,n=nH.MetadataVersion.V4){return new sV(r.length(),function(r){let n=[];for(let i,a=-1,o=-1,s=r.nodesLength();++a<s;)(i=r.nodes(a))&&(n[++o]=sG.decode(i));return n}(r),function(r,n){let i=[];for(let a,o=-1,s=-1,l=r.buffersLength();++o<l;)(a=r.buffers(o))&&(n<nH.MetadataVersion.V4&&(a.bb_pos+=8*(o+1)),i[++s]=sq.decode(a));return i}(r,n))},sV.fromJSON=sw.recordBatchFromJSON,sH.encode=function(r,n){let i=sV.encode(r,n.data);return sU.startDictionaryBatch(r),sU.addId(r,new sE(n.id,0)),sU.addIsDelta(r,n.isDelta),sU.addData(r,i),sU.endDictionaryBatch(r)},sH.decode=function(r,n=nH.MetadataVersion.V4){return new sH(sV.decode(r.data(),n),r.id(),r.isDelta())},sH.fromJSON=sw.dictionaryBatchFromJSON,sG.encode=function(r,n){return sz.createFieldNode(r,new sE(n.length,0),new sE(n.nullCount,0))},sG.decode=function(r){return new sG(r.length(),r.nullCount())},sq.encode=function(r,n){return sP.createBuffer(r,new sE(n.offset,0),new sE(n.length,0))},sq.decode=function(r){return new sq(r.offset(),r.length())};const sK=function(){let r=new ArrayBuffer(2);return new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0]}(),sJ=r=>`Expected ${nH.MessageHeader[r]} Message in stream, but was null or length 0.`,s$=r=>`Header pointer of flatbuffer-encoded ${nH.MessageHeader[r]} Message is null or length 0.`,sQ=(r,n)=>`Expected to read ${r} metadata bytes, but only read ${n}.`,s0=(r,n)=>`Expected to read ${r} bytes for message body, but only read ${n}.`;class s1{constructor(r){this.source=r instanceof oj.ByteStream?r:new oj.ByteStream(r)}[Symbol.iterator](){return this}next(){let r;return(r=this.readMetadataLength()).done||-1===r.value&&(r=this.readMetadataLength()).done||(r=this.readMetadata(r.value)).done?nd.ITERATOR_DONE:r}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}readMessage(r){let n;if((n=this.next()).done)return null;if(null!=r&&n.value.headerType!==r)throw Error(sJ(r));return n.value}readMessageBody(r){if(r<=0)return new Uint8Array(0);let n=r_.toUint8Array(this.source.read(r));if(n.byteLength<r)throw Error(s0(r,n.byteLength));return n.byteOffset%8==0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(r=!1){let n=nH.MessageHeader.Schema,i=this.readMessage(n),a=i&&i.header();if(r&&!a)throw Error(s$(n));return a}readMetadataLength(){let r=this.source.read(o7.PADDING),n=r&&new o9(r),i=n&&n.readInt32(0)||0;return{done:0===i,value:i}}readMetadata(r){let n=this.source.read(r);if(!n)return nd.ITERATOR_DONE;if(n.byteLength<r)throw Error(sQ(r,n.byteLength));return{done:!1,value:st.Message.decode(n)}}}o7.MessageReader=s1;class s2{constructor(r,n){this.source=r instanceof oj.AsyncByteStream?r:np.isFileHandle(r)?new oY.AsyncRandomAccessFile(r,n):new oj.AsyncByteStream(r)}[Symbol.asyncIterator](){return this}async next(){let r;return(r=await this.readMetadataLength()).done||-1===r.value&&(r=await this.readMetadataLength()).done||(r=await this.readMetadata(r.value)).done?nd.ITERATOR_DONE:r}async throw(r){return await this.source.throw(r)}async return(r){return await this.source.return(r)}async readMessage(r){let n;if((n=await this.next()).done)return null;if(null!=r&&n.value.headerType!==r)throw Error(sJ(r));return n.value}async readMessageBody(r){if(r<=0)return new Uint8Array(0);let n=r_.toUint8Array(await this.source.read(r));if(n.byteLength<r)throw Error(s0(r,n.byteLength));return n.byteOffset%8==0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}async readSchema(r=!1){let n=nH.MessageHeader.Schema,i=await this.readMessage(n),a=i&&i.header();if(r&&!a)throw Error(s$(n));return a}async readMetadataLength(){let r=await this.source.read(o7.PADDING),n=r&&new o9(r),i=n&&n.readInt32(0)||0;return{done:0===i,value:i}}async readMetadata(r){let n=await this.source.read(r);if(!n)return nd.ITERATOR_DONE;if(n.byteLength<r)throw Error(sQ(r,n.byteLength));return{done:!1,value:st.Message.decode(n)}}}o7.AsyncMessageReader=s2,o7.JSONMessageReader=class extends s1{constructor(r){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=r instanceof nd.ArrowJSON?r:new nd.ArrowJSON(r)}next(){let{_json:r}=this;if(!this._schema)return this._schema=!0,{done:!1,value:st.Message.fromJSON(r.schema,nH.MessageHeader.Schema)};if(this._dictionaryIndex<r.dictionaries.length){let n=r.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:st.Message.fromJSON(n,nH.MessageHeader.DictionaryBatch)}}if(this._batchIndex<r.batches.length){let n=r.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:st.Message.fromJSON(n,nH.MessageHeader.RecordBatch)}}return this._body=[],nd.ITERATOR_DONE}readMessageBody(r){return function r(n){return(n||[]).reduce((n,i)=>[...n,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...r(i.children)],[])}(this._body)}readMessage(r){let n;if((n=this.next()).done)return null;if(null!=r&&n.value.headerType!==r)throw Error(sJ(r));return n.value}readSchema(){let r=nH.MessageHeader.Schema,n=this.readMessage(r),i=n&&n.header();if(!n||!i)throw Error(s$(r));return i}},o7.PADDING=4,o7.MAGIC_STR="ARROW1",o7.MAGIC=new Uint8Array(o7.MAGIC_STR.length);for(let r=0;r<o7.MAGIC_STR.length;r+=1)o7.MAGIC[r]=o7.MAGIC_STR.charCodeAt(r);o7.checkForMagicArrowString=function(r,n=0){for(let i=-1,a=o7.MAGIC.length;++i<a;)if(o7.MAGIC[i]!==r[n+i])return!1;return!0},o7.magicLength=o7.MAGIC.length,o7.magicAndPadding=o7.magicLength+o7.PADDING,o7.magicX2AndPadding=2*o7.magicLength+o7.PADDING;var s3={};Object.defineProperty(s3,"__esModule",{value:!0});class s4 extends n2.Visitor{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...r){let n=new s4,i=ak.selectVectorChildrenArgs(o6.RecordBatch,r),[a=n]=n.visitMany(i);return a}visit(r){if(!n0.DataType.isDictionary(r.type)){let{data:n,length:i,nullCount:a}=r;if(i>2147483647)throw RangeError("Cannot write arrays larger than 2^31 - 1 in length");n0.DataType.isNull(r.type)||s6.call(this,a<=0?new Uint8Array(0):nY.truncateBitmap(n.offset,i,n.nullBitmap)),this.nodes.push(new st.FieldNode(i,a))}return super.visit(r)}visitNull(r){return this}visitDictionary(r){return this.visit(r.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function s6(r){let n=r.byteLength+7&-8;return this.buffers.push(r),this.bufferRegions.push(new st.BufferRegion(this._byteLength,n)),this._byteLength+=n,this}function s5(r){return s6.call(this,r.values.subarray(0,r.length*r.stride))}function s8(r){let{length:n,values:i,valueOffsets:a}=r,o=a[0],s=Math.min(a[n]-o,i.byteLength-o);return s6.call(this,r_.rebaseValueOffsets(-a[0],n,a)),s6.call(this,i.subarray(o,o+s)),this}function s7(r){let{length:n,valueOffsets:i}=r;return i&&s6.call(this,r_.rebaseValueOffsets(i[0],n,i)),this.visit(r.getChildAt(0))}function s9(r){return this.visitMany(r.type.children.map((n,i)=>r.getChildAt(i)).filter(Boolean))[0]}s3.VectorAssembler=s4,s4.prototype.visitBool=function(r){let n;return r.nullCount>=r.length?s6.call(this,new Uint8Array(0)):(n=r.values)instanceof Uint8Array?s6.call(this,nY.truncateBitmap(r.offset,r.length,n)):s6.call(this,nY.packBools(r))},s4.prototype.visitInt=s5,s4.prototype.visitFloat=s5,s4.prototype.visitUtf8=s8,s4.prototype.visitBinary=s8,s4.prototype.visitFixedSizeBinary=s5,s4.prototype.visitDate=s5,s4.prototype.visitTimestamp=s5,s4.prototype.visitTime=s5,s4.prototype.visitDecimal=s5,s4.prototype.visitList=s7,s4.prototype.visitStruct=s9,s4.prototype.visitUnion=function(r){let{type:n,length:i,typeIds:a,valueOffsets:o}=r;if(s6.call(this,a),n.mode===nH.UnionMode.Sparse)return s9.call(this,r);if(n.mode===nH.UnionMode.Dense){if(r.offset<=0)return s6.call(this,o),s9.call(this,r);{let s=a.reduce((r,n)=>Math.max(r,n),a[0]),l=new Int32Array(s+1),c=new Int32Array(s+1).fill(-1),u=new Int32Array(i),f=r_.rebaseValueOffsets(-o[0],i,o);for(let r,n,o=-1;++o<i;)-1===(n=c[r=a[o]])&&(n=c[r]=f[r]),u[o]=f[o]-n,++l[r];s6.call(this,u);for(let a,o=-1,s=n.children.length;++o<s;)if(a=r.getChildAt(o)){let r=n.typeIds[o],s=Math.min(i,l[r]);this.visit(a.slice(c[r],s))}}}return this},s4.prototype.visitInterval=s5,s4.prototype.visitFixedSizeList=s7,s4.prototype.visitMap=s7;var lt={};Object.defineProperty(lt,"__esModule",{value:!0});class le extends n2.Visitor{visit(r){return null==r?void 0:super.visit(r)}visitNull({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitInt({typeId:r,bitWidth:n,isSigned:i}){return{name:nH.ArrowType[r].toLowerCase(),bitWidth:n,isSigned:i}}visitFloat({typeId:r,precision:n}){return{name:nH.ArrowType[r].toLowerCase(),precision:nH.Precision[n]}}visitBinary({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitBool({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitUtf8({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitDecimal({typeId:r,scale:n,precision:i}){return{name:nH.ArrowType[r].toLowerCase(),scale:n,precision:i}}visitDate({typeId:r,unit:n}){return{name:nH.ArrowType[r].toLowerCase(),unit:nH.DateUnit[n]}}visitTime({typeId:r,unit:n,bitWidth:i}){return{name:nH.ArrowType[r].toLowerCase(),unit:nH.TimeUnit[n],bitWidth:i}}visitTimestamp({typeId:r,timezone:n,unit:i}){return{name:nH.ArrowType[r].toLowerCase(),unit:nH.TimeUnit[i],timezone:n}}visitInterval({typeId:r,unit:n}){return{name:nH.ArrowType[r].toLowerCase(),unit:nH.IntervalUnit[n]}}visitList({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitStruct({typeId:r}){return{name:nH.ArrowType[r].toLowerCase()}}visitUnion({typeId:r,mode:n,typeIds:i}){return{name:nH.ArrowType[r].toLowerCase(),mode:nH.UnionMode[n],typeIds:[...i]}}visitDictionary(r){return this.visit(r.dictionary)}visitFixedSizeBinary({typeId:r,byteWidth:n}){return{name:nH.ArrowType[r].toLowerCase(),byteWidth:n}}visitFixedSizeList({typeId:r,listSize:n}){return{name:nH.ArrowType[r].toLowerCase(),listSize:n}}visitMap({typeId:r,keysSorted:n}){return{name:nH.ArrowType[r].toLowerCase(),keysSorted:n}}}lt.JSONTypeAssembler=le;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});class ln extends n2.Visitor{static assemble(...r){return new ln().visitMany(ak.selectColumnChildrenArgs(o6.RecordBatch,r))}visit(r){let{data:n,name:i,length:a}=r,{offset:o,nullCount:s,nullBitmap:l}=n,c=n0.DataType.isDictionary(r.type)?r.type.indices:r.type,u=Object.assign([],n.buffers,{[nH.BufferType.VALIDITY]:void 0});return{name:i,count:a,VALIDITY:n0.DataType.isNull(c)?void 0:s<=0?Array.from({length:a},()=>1):[...nY.iterateBits(l,o,a,null,nY.getBit)],...super.visit(nj.Vector.new(n.clone(c,o,a,0,u)))}}visitNull(){return{}}visitBool({values:r,offset:n,length:i}){return{DATA:[...nY.iterateBits(r,n,i,null,nY.getBool)]}}visitInt(r){return{DATA:r.type.bitWidth<64?[...r.values]:[...la(r.values,2)]}}visitFloat(r){return{DATA:[...r.values]}}visitUtf8(r){return{DATA:[...r],OFFSET:[...r.valueOffsets]}}visitBinary(r){return{DATA:[...li(r)],OFFSET:[...r.valueOffsets]}}visitFixedSizeBinary(r){return{DATA:[...li(r)]}}visitDate(r){return{DATA:r.type.unit===nH.DateUnit.DAY?[...r.values]:[...la(r.values,2)]}}visitTimestamp(r){return{DATA:[...la(r.values,2)]}}visitTime(r){return{DATA:r.type.unit<nH.TimeUnit.MICROSECOND?[...r.values]:[...la(r.values,2)]}}visitDecimal(r){return{DATA:[...la(r.values,4)]}}visitList(r){return{OFFSET:[...r.valueOffsets],children:r.type.children.map((n,i)=>this.visit(new aM.Column(n,[r.getChildAt(i)])))}}visitStruct(r){return{children:r.type.children.map((n,i)=>this.visit(new aM.Column(n,[r.getChildAt(i)])))}}visitUnion(r){return{TYPE:[...r.typeIds],OFFSET:r.type.mode===nH.UnionMode.Dense?[...r.valueOffsets]:void 0,children:r.type.children.map((n,i)=>this.visit(new aM.Column(n,[r.getChildAt(i)])))}}visitInterval(r){return{DATA:[...r.values]}}visitFixedSizeList(r){return{children:r.type.children.map((n,i)=>this.visit(new aM.Column(n,[r.getChildAt(i)])))}}visitMap(r){return{OFFSET:[...r.valueOffsets],children:r.type.children.map((n,i)=>this.visit(new aM.Column(n,[r.getChildAt(i)])))}}}function*li(r){for(let n of r)yield n.reduce((r,n)=>`${r}${("0"+(255&n).toString(16)).slice(-2)}`,"").toUpperCase()}function*la(r,n){for(let i=-1,a=r.length/n;++i<a;)yield`${ar.BN.new(r.subarray((i+0)*n,(i+1)*n),!1)}`}lr.JSONVectorAssembler=ln;class lo extends nd.ReadableInterop{constructor(r){super(),this._position=0,this._started=!1,this._sink=new oj.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,np.isObject(r)||(r={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof r.autoDestroy||r.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof r.writeLegacyIpcFormat&&r.writeLegacyIpcFormat}static throughNode(r){throw Error('"throughNode" not available in this environment')}static throughDOM(r,n){throw Error('"throughDOM" not available in this environment')}toString(r=!1){return this._sink.toString(r)}toUint8Array(r=!1){return this._sink.toUint8Array(r)}writeAll(r){return np.isPromise(r)?r.then(r=>this.writeAll(r)):np.isAsyncIterable(r)?lf(this,r):lu(this,r)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(r){return this._sink.toDOMStream(r)}toNodeStream(r){return this._sink.toNodeStream(r)}close(){return this.reset()._sink.close()}abort(r){return this.reset()._sink.abort(r)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(r=this._sink,n=null){return r===this._sink||r instanceof oj.AsyncByteQueue?this._sink=r:(this._sink=new oj.AsyncByteQueue,r&&np.isWritableDOMStream(r)?this.toDOMStream({type:"bytes"}).pipeTo(r):r&&np.isWritableNodeStream(r)&&this.toNodeStream({objectMode:!1}).pipe(r)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,n&&n.compareTo(this._schema)||(null===n?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(r){let n=null;if(this._sink){if(null==r)return this.finish()&&void 0;if(r instanceof o5.Table&&!(n=r.schema))return this.finish()&&void 0;if(r instanceof o6.RecordBatch&&!(n=r.schema))return this.finish()&&void 0}else throw Error("RecordBatchWriter is closed");if(n&&!n.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}r instanceof o6.RecordBatch?r instanceof o6._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(r):r instanceof o5.Table?this.writeAll(r.chunks):np.isIterable(r)&&this.writeAll(r)}_writeMessage(r,n=8){let i=n-1,a=st.Message.encode(r),o=a.byteLength,s=this._writeLegacyIpcFormat?4:8,l=o+s+i&~i,c=l-o-s;return r.headerType===nH.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new oC.FileBlock(l,r.bodyLength,this._position)):r.headerType===nH.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new oC.FileBlock(l,r.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(l-s)),o>0&&this._write(a),this._writePadding(c)}_write(r){if(this._started){let n=r_.toUint8Array(r);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(r){return this._writeMessage(st.Message.from(r))}_writeFooter(r){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(o7.MAGIC)}_writePadding(r){return r>0?this._write(new Uint8Array(r)):this}_writeRecordBatch(r){let{byteLength:n,nodes:i,bufferRegions:a,buffers:o}=s3.VectorAssembler.assemble(r),s=new st.RecordBatch(r.length,i,a),l=st.Message.from(s,n);return this._writeDictionaries(r)._writeMessage(l)._writeBodyBuffers(o)}_writeDictionaryBatch(r,n,i=!1){this._dictionaryDeltaOffsets.set(n,r.length+(this._dictionaryDeltaOffsets.get(n)||0));let{byteLength:a,nodes:o,bufferRegions:s,buffers:l}=s3.VectorAssembler.assemble(r),c=new st.RecordBatch(r.length,o,s),u=new st.DictionaryBatch(c,n,i),f=st.Message.from(u,a);return this._writeMessage(f)._writeBodyBuffers(l)}_writeBodyBuffers(r){let n,i,a;for(let o=-1,s=r.length;++o<s;)(n=r[o])&&(i=n.byteLength)>0&&(this._write(n),(a=(i+7&-8)-i)>0&&this._writePadding(a));return this}_writeDictionaries(r){for(let[n,i]of r.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(0===r||(i=i.slice(r)).length>0)for(let a of"chunks"in i?i.chunks:[i])this._writeDictionaryBatch(a,n,r>0),r+=a.length}return this}}o8.RecordBatchWriter=lo;class ls extends lo{static writeAll(r,n){let i=new ls(n);return np.isPromise(r)?r.then(r=>i.writeAll(r)):np.isAsyncIterable(r)?lf(i,r):lu(i,r)}}o8.RecordBatchStreamWriter=ls;class ll extends lo{constructor(){super(),this._autoDestroy=!0}static writeAll(r){let n=new ll;return np.isPromise(r)?r.then(r=>n.writeAll(r)):np.isAsyncIterable(r)?lf(n,r):lu(n,r)}_writeSchema(r){return this._writeMagic()._writePadding(2)}_writeFooter(r){let n=oC.Footer.encode(new oC.Footer(r,nH.MetadataVersion.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(r)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}o8.RecordBatchFileWriter=ll;class lc extends lo{constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}static writeAll(r){return new lc().writeAll(r)}_writeMessage(){return this}_writeFooter(r){return this}_writeSchema(r){return this._write(`{
  "schema": ${JSON.stringify({fields:r.fields.map(lh)},null,2)}`)}_writeDictionaries(r){return r.dictionaries.size>0&&this._dictionaries.push(r),this}_writeDictionaryBatch(r,n,i=!1){return this._dictionaryDeltaOffsets.set(n,r.length+(this._dictionaryDeltaOffsets.get(n)||0)),this._write(0===this._dictionaryBlocks.length?"    ":`,
    `),this._write(`${function(r,n,i=!1){let a=new aA.Field(`${n}`,r.type,r.nullCount>0),o=lr.JSONVectorAssembler.assemble(new aM.Column(a,[r]));return JSON.stringify({id:n,isDelta:i,data:{count:r.length,columns:o}},null,2)}(r,n,i)}`),this._dictionaryBlocks.push(new oC.FileBlock(0,0,0)),this}_writeRecordBatch(r){return this._writeDictionaries(r),this._recordBatches.push(r),this}close(){if(this._dictionaries.length>0){for(let r of(this._write(`,
  "dictionaries": [
`),this._dictionaries))super._writeDictionaries(r);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let n=-1,i=this._recordBatches.length;++n<i;){var r;this._write(0===n?`,
  "batches": [
    `:`,
    `),this._write(`${JSON.stringify({count:(r=this._recordBatches[n]).length,columns:lr.JSONVectorAssembler.assemble(r)},null,2)}`),this._recordBatchBlocks.push(new oC.FileBlock(0,0,0))}this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}function lu(r,n){let i=n;for(let a of(n instanceof o5.Table&&(i=n.chunks,r.reset(void 0,n.schema)),i))r.write(a);return r.finish()}async function lf(r,n){for await(let i of n)r.write(i);return r.finish()}function lh({name:r,type:n,nullable:i}){let a=new lt.JSONTypeAssembler;return{name:r,nullable:i,type:a.visit(n),children:(n.children||[]).map(lh),dictionary:n0.DataType.isDictionary(n)?{id:n.id,isOrdered:n.isOrdered,indexType:a.visit(n.indices)}:void 0}}o8.RecordBatchJSONWriter=lc;var lp={};Object.defineProperty(lp,"__esModule",{value:!0});const ld=new Uint8Array(0),ly=r=>[ld,ld,new Uint8Array(r),ld];function lg(r,n){return function(r,n){let i=[...r.fields],a=[],o={numBatches:n.reduce((r,n)=>Math.max(r,n.length),0)},s=0,l=0,c=-1,u=n.length,f,h=[];for(;o.numBatches-- >0;){for(l=Number.POSITIVE_INFINITY,c=-1;++c<u;)h[c]=f=n[c].shift(),l=Math.min(l,f?f.length:l);isFinite(l)&&(h=function(r,n,i,a,o){let s,l;let c=0,u=-1,f=a.length,h=(n+63&-64)>>3;for(;++u<f;)(s=i[u])&&(c=s.length)>=n?c===n?i[u]=s:(i[u]=s.slice(0,n),s=s.slice(n,c-n),o.numBatches=Math.max(o.numBatches,a[u].unshift(s))):((l=r[u]).nullable||(r[u]=l.clone({nullable:!0})),i[u]=s?s._changeLengthAndBackfillNullBitmap(n):nW.Data.new(l.type,0,n,n,ly(h)));return i}(i,l,h,n,o),l>0&&(a[s++]=[l,h.slice()]))}return[r=new aA.Schema(i,r.metadata),a.map(n=>new o6.RecordBatch(r,...n))]}(r,n.map(r=>r instanceof aS.Chunked?r.chunks.map(r=>r.data):[r.data]))}lp.ensureSameLengthData=function(r,n,i=n.reduce((r,n)=>Math.max(r,n.length),0)){let a,o;let s=-1,l=n.length,c=[...r.fields],u=[],f=(i+63&-64)>>3;for(;++s<l;)(a=n[s])&&a.length===i?u[s]=a:((o=c[s]).nullable||(c[s]=c[s].clone({nullable:!0})),u[s]=a?a._changeLengthAndBackfillNullBitmap(i):nW.Data.new(o.type,0,i,i,ly(f)));return[new aA.Schema(c),i,u]},lp.distributeColumnsIntoRecordBatches=function(r){return lg(new aA.Schema(r.map(({field:r})=>r)),r)},lp.distributeVectorsIntoRecordBatches=lg;var lv={};Object.defineProperty(lv,"__esModule",{value:!0}),lv.Vector=nj.Vector;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});class lx extends nj.AbstractVector{constructor(r,n){super(),this._children=n,this.numChildren=r.childData.length,this._bindDataAccessors(this.data=r)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${nH.Type[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(r,n=this._children){return nj.Vector.new(r,n)}concat(...r){return aS.Chunked.concat(this,...r)}slice(r,n){return aE.clampRange(this,r,n,this._sliceInternal)}isValid(r){if(this.nullCount>0){let n=this.offset+r;return 0!=(this.nullBitmap[n>>3]&1<<n%8)}return!0}getChildAt(r){return r<0||r>=this.numChildren?null:(this._children||(this._children=[]))[r]||(this._children[r]=nj.Vector.new(this.data.childData[r]))}toJSON(){return[...this]}_sliceInternal(r,n,i){return r.clone(r.data.slice(n,i-n),null)}_bindDataAccessors(r){}}lm.BaseVector=lx,lx.prototype[Symbol.isConcatSpreadable]=!0,lv.BaseVector=lm.BaseVector;var lb={};Object.defineProperty(lb,"__esModule",{value:!0});class l_ extends lm.BaseVector{asUtf8(){return nj.Vector.new(this.data.clone(new n0.Utf8))}}lb.BinaryVector=l_,lv.BinaryVector=lb.BinaryVector;var lw={};Object.defineProperty(lw,"__esModule",{value:!0});class lT extends lm.BaseVector{static from(r){return lv.vectorFromValuesWithType(()=>new n0.Bool,r)}}lw.BoolVector=lT,lv.BoolVector=lw.BoolVector,lv.Chunked=aS.Chunked;var lA={};Object.defineProperty(lA,"__esModule",{value:!0});class lk extends lm.BaseVector{static from(...r){return 2===r.length?lv.vectorFromValuesWithType(()=>r[1]===nH.DateUnit.DAY?new n0.DateDay:new n0.DateMillisecond,r[0]):lv.vectorFromValuesWithType(()=>new n0.DateMillisecond,r[0])}}lA.DateVector=lk,lA.DateDayVector=class extends lk{},lA.DateMillisecondVector=class extends lk{},lv.DateVector=lA.DateVector,lv.DateDayVector=lA.DateDayVector,lv.DateMillisecondVector=lA.DateMillisecondVector;var lM={};Object.defineProperty(lM,"__esModule",{value:!0});class lS extends lm.BaseVector{}lM.DecimalVector=lS,lv.DecimalVector=lM.DecimalVector;var lE={};Object.defineProperty(lE,"__esModule",{value:!0});class lI extends lm.BaseVector{constructor(r){super(r),this.indices=nj.Vector.new(r.clone(this.type.indices))}static from(...r){if(3===r.length){let[n,i,a]=r,o=new n0.Dictionary(n.type,i,null,null);return nj.Vector.new(nW.Data.Dictionary(o,0,a.length,0,null,a,n))}return lv.vectorFromValuesWithType(()=>r[0].type,r[0])}get dictionary(){return this.data.dictionary}reverseLookup(r){return this.dictionary.indexOf(r)}getKey(r){return this.indices.get(r)}getValue(r){return this.dictionary.get(r)}setKey(r,n){return this.indices.set(r,n)}setValue(r,n){return this.dictionary.set(r,n)}}lE.DictionaryVector=lI,lI.prototype.indices=null,lv.DictionaryVector=lE.DictionaryVector;var lL={};Object.defineProperty(lL,"__esModule",{value:!0});class lC extends lm.BaseVector{}lL.FixedSizeBinaryVector=lC,lv.FixedSizeBinaryVector=lL.FixedSizeBinaryVector;var lO={};Object.defineProperty(lO,"__esModule",{value:!0});class lD extends lm.BaseVector{}lO.FixedSizeListVector=lD,lv.FixedSizeListVector=lO.FixedSizeListVector;var lP={};Object.defineProperty(lP,"__esModule",{value:!0});class lB extends lm.BaseVector{static from(r){let n=lj(this);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)){let i=lU(r.constructor)||n;if(null===n&&(n=i),n&&n===i){let i=new n,a=r.byteLength/i.ArrayType.BYTES_PER_ELEMENT;if(!lN(n,r.constructor))return nj.Vector.new(nW.Data.Float(i,0,a,0,null,r))}}if(n)return lv.vectorFromValuesWithType(()=>new n,r);if(r instanceof DataView||r instanceof ArrayBuffer)throw TypeError(`Cannot infer float type from instance of ${r.constructor.name}`);throw TypeError("Unrecognized FloatVector input")}}lP.FloatVector=lB;class lR extends lB{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}lP.Float16Vector=lR;class lz extends lB{}lP.Float32Vector=lz;class lF extends lB{}lP.Float64Vector=lF;const lN=(r,n)=>r===n0.Float16&&n!==Uint16Array,lU=r=>{switch(r){case Uint16Array:return n0.Float16;case Float32Array:return n0.Float32;case Float64Array:return n0.Float64;default:return null}},lj=r=>{switch(r){case lR:return n0.Float16;case lz:return n0.Float32;case lF:return n0.Float64;default:return null}};lv.FloatVector=lP.FloatVector,lv.Float16Vector=lP.Float16Vector,lv.Float32Vector=lP.Float32Vector,lv.Float64Vector=lP.Float64Vector;var lV={};Object.defineProperty(lV,"__esModule",{value:!0});class lH extends lm.BaseVector{}lV.IntervalVector=lH,lV.IntervalDayTimeVector=class extends lH{},lV.IntervalYearMonthVector=class extends lH{},lv.IntervalVector=lV.IntervalVector,lv.IntervalDayTimeVector=lV.IntervalDayTimeVector,lv.IntervalYearMonthVector=lV.IntervalYearMonthVector;var lq={};Object.defineProperty(lq,"__esModule",{value:!0});class lG extends lm.BaseVector{static from(...r){let[n,i=!1]=r,a=l2(this,i);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)){let r=l1(n.constructor,i)||a;if(null===a&&(a=r),a&&a===r){let r=new a,i=n.byteLength/r.ArrayType.BYTES_PER_ELEMENT;return l0(a,n.constructor)&&(i*=.5),nj.Vector.new(nW.Data.Int(r,0,i,0,null,n))}}if(a)return lv.vectorFromValuesWithType(()=>new a,n);if(n instanceof DataView||n instanceof ArrayBuffer)throw TypeError(`Cannot infer integer type from instance of ${n.constructor.name}`);throw TypeError("Unrecognized IntVector input")}}lq.IntVector=lG;class lW extends lG{}lq.Int8Vector=lW;class lY extends lG{}lq.Int16Vector=lY;class lZ extends lG{}lq.Int32Vector=lZ;class lX extends lG{toBigInt64Array(){return r_.toBigInt64Array(this.values)}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}lq.Int64Vector=lX;class lK extends lG{}lq.Uint8Vector=lK;class lJ extends lG{}lq.Uint16Vector=lJ;class l$ extends lG{}lq.Uint32Vector=l$;class lQ extends lG{toBigUint64Array(){return r_.toBigUint64Array(this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}lq.Uint64Vector=lQ;const l0=(r,n)=>(r===n0.Int64||r===n0.Uint64)&&(n===Int32Array||n===Uint32Array),l1=(r,n)=>{switch(r){case Int8Array:return n0.Int8;case Int16Array:return n0.Int16;case Int32Array:return n?n0.Int64:n0.Int32;case np.BigInt64Array:return n0.Int64;case Uint8Array:return n0.Uint8;case Uint16Array:return n0.Uint16;case Uint32Array:return n?n0.Uint64:n0.Uint32;case np.BigUint64Array:return n0.Uint64;default:return null}},l2=(r,n)=>{switch(r){case lW:return n0.Int8;case lY:return n0.Int16;case lZ:return n?n0.Int64:n0.Int32;case lX:return n0.Int64;case lK:return n0.Uint8;case lJ:return n0.Uint16;case l$:return n?n0.Uint64:n0.Uint32;case lQ:return n0.Uint64;default:return null}};lv.IntVector=lq.IntVector,lv.Int8Vector=lq.Int8Vector,lv.Int16Vector=lq.Int16Vector,lv.Int32Vector=lq.Int32Vector,lv.Int64Vector=lq.Int64Vector,lv.Uint8Vector=lq.Uint8Vector,lv.Uint16Vector=lq.Uint16Vector,lv.Uint32Vector=lq.Uint32Vector,lv.Uint64Vector=lq.Uint64Vector;var l3={};Object.defineProperty(l3,"__esModule",{value:!0});class l4 extends lm.BaseVector{}l3.ListVector=l4,lv.ListVector=l3.ListVector;var l6={};Object.defineProperty(l6,"__esModule",{value:!0});class l5 extends lm.BaseVector{asList(){let r=this.type.children[0];return nj.Vector.new(this.data.clone(new n0.List(r)))}bind(r){let n=this.getChildAt(0),{[r]:i,[r+1]:a}=this.valueOffsets;return new aI.MapRow(n.slice(i,a))}}l6.MapVector=l5,lv.MapVector=l6.MapVector;var l8={};Object.defineProperty(l8,"__esModule",{value:!0});class l7 extends lm.BaseVector{}l8.NullVector=l7,lv.NullVector=l8.NullVector;var l9={};Object.defineProperty(l9,"__esModule",{value:!0});const ct=Symbol.for("rowIndex");class ce extends lm.BaseVector{bind(r){let n=Object.create(this._row||(this._row=new aI.StructRow(this)));return n[ct]=r,n}}l9.StructVector=ce,lv.StructVector=l9.StructVector;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});class cn extends lm.BaseVector{}cr.TimestampVector=cn,cr.TimestampSecondVector=class extends cn{},cr.TimestampMillisecondVector=class extends cn{},cr.TimestampMicrosecondVector=class extends cn{},cr.TimestampNanosecondVector=class extends cn{},lv.TimestampVector=cr.TimestampVector,lv.TimestampSecondVector=cr.TimestampSecondVector,lv.TimestampMillisecondVector=cr.TimestampMillisecondVector,lv.TimestampMicrosecondVector=cr.TimestampMicrosecondVector,lv.TimestampNanosecondVector=cr.TimestampNanosecondVector;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});class ca extends lm.BaseVector{}ci.TimeVector=ca,ci.TimeSecondVector=class extends ca{},ci.TimeMillisecondVector=class extends ca{},ci.TimeMicrosecondVector=class extends ca{},ci.TimeNanosecondVector=class extends ca{},lv.TimeVector=ci.TimeVector,lv.TimeSecondVector=ci.TimeSecondVector,lv.TimeMillisecondVector=ci.TimeMillisecondVector,lv.TimeMicrosecondVector=ci.TimeMicrosecondVector,lv.TimeNanosecondVector=ci.TimeNanosecondVector;var co={};Object.defineProperty(co,"__esModule",{value:!0});class cs extends lm.BaseVector{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}co.UnionVector=cs,co.DenseUnionVector=class extends cs{get valueOffsets(){return this.data.valueOffsets}},co.SparseUnionVector=class extends cs{},lv.UnionVector=co.UnionVector,lv.DenseUnionVector=co.DenseUnionVector,lv.SparseUnionVector=co.SparseUnionVector;var cl={};Object.defineProperty(cl,"__esModule",{value:!0});class cc extends lm.BaseVector{static from(r){return lv.vectorFromValuesWithType(()=>new n0.Utf8,r)}asBinary(){return nj.Vector.new(this.data.clone(new n0.Binary))}}cl.Utf8Vector=cc,lv.Utf8Vector=cl.Utf8Vector,lv.MapRow=aI.MapRow,lv.StructRow=aI.StructRow;var cu={};Object.defineProperty(cu,"__esModule",{value:!0}),cu.partial0=function(r){return function(){return r(this)}},cu.partial1=function(r){return function(n){return r(this,n)}},cu.partial2=function(r){return function(n,i){return r(this,n,i)}};var cf={};Object.defineProperty(cf,"__esModule",{value:!0});class ch extends n2.Visitor{}cf.GetVisitor=ch;const cp=(r,n)=>864e5*r[n],cd=(r,n)=>4294967296*r[n+1]+(r[n]>>>0),cy=(r,n)=>4294967296*(r[n+1]/1e3)+(r[n]>>>0)/1e3,cg=(r,n)=>4294967296*(r[n+1]/1e6)+(r[n]>>>0)/1e6,cv=r=>new Date(r),cm=(r,n)=>cv(cp(r,n)),cx=(r,n)=>cv(cd(r,n)),cb=(r,n,i)=>{let{[i]:a,[i+1]:o}=n;return null!=a&&null!=o?r.subarray(a,o):null},c_=({values:r},n)=>cm(r,n),cw=({values:r},n)=>cx(r,2*n),cT=({stride:r,values:n},i)=>n[r*i],cA=({stride:r,values:n},i)=>i8.uint16ToFloat64(n[r*i]),ck=({stride:r,values:n,type:i},a)=>ar.BN.new(n.subarray(r*a,r*(a+1)),i.isSigned),cM=({values:r},n)=>1e3*cd(r,2*n),cS=({values:r},n)=>cd(r,2*n),cE=({values:r},n)=>cy(r,2*n),cI=({values:r},n)=>cg(r,2*n),cL=({values:r,stride:n},i)=>r[n*i],cC=({values:r,stride:n},i)=>r[n*i],cO=({values:r},n)=>ar.BN.signed(r.subarray(2*n,2*(n+1))),cD=({values:r},n)=>ar.BN.signed(r.subarray(2*n,2*(n+1))),cP=(r,n)=>{let i=r.typeIdToChildIndex[r.typeIds[n]],a=r.getChildAt(i);return a?a.get(r.valueOffsets[n]):null},cB=(r,n)=>{let i=r.typeIdToChildIndex[r.typeIds[n]],a=r.getChildAt(i);return a?a.get(n):null},cR=({values:r},n)=>r.subarray(2*n,2*(n+1)),cz=({values:r},n)=>{let i=r[n],a=new Int32Array(2);return a[0]=i/12|0,a[1]=i%12|0,a};ch.prototype.visitNull=(r,n)=>null,ch.prototype.visitBool=({offset:r,values:n},i)=>{let a=r+i;return(n[a>>3]&1<<a%8)!=0},ch.prototype.visitInt=(r,n)=>r.type.bitWidth<64?cT(r,n):ck(r,n),ch.prototype.visitInt8=cT,ch.prototype.visitInt16=cT,ch.prototype.visitInt32=cT,ch.prototype.visitInt64=ck,ch.prototype.visitUint8=cT,ch.prototype.visitUint16=cT,ch.prototype.visitUint32=cT,ch.prototype.visitUint64=ck,ch.prototype.visitFloat=(r,n)=>r.type.precision!==nH.Precision.HALF?cT(r,n):cA(r,n),ch.prototype.visitFloat16=cA,ch.prototype.visitFloat32=cT,ch.prototype.visitFloat64=cT,ch.prototype.visitUtf8=({values:r,valueOffsets:n},i)=>{let a=cb(r,n,i);return null!==a?rT.decodeUtf8(a):null},ch.prototype.visitBinary=({values:r,valueOffsets:n},i)=>cb(r,n,i),ch.prototype.visitFixedSizeBinary=({stride:r,values:n},i)=>n.subarray(r*i,r*(i+1)),ch.prototype.visitDate=(r,n)=>r.type.unit===nH.DateUnit.DAY?c_(r,n):cw(r,n),ch.prototype.visitDateDay=c_,ch.prototype.visitDateMillisecond=cw,ch.prototype.visitTimestamp=(r,n)=>{switch(r.type.unit){case nH.TimeUnit.SECOND:return cM(r,n);case nH.TimeUnit.MILLISECOND:return cS(r,n);case nH.TimeUnit.MICROSECOND:return cE(r,n);case nH.TimeUnit.NANOSECOND:return cI(r,n)}},ch.prototype.visitTimestampSecond=cM,ch.prototype.visitTimestampMillisecond=cS,ch.prototype.visitTimestampMicrosecond=cE,ch.prototype.visitTimestampNanosecond=cI,ch.prototype.visitTime=(r,n)=>{switch(r.type.unit){case nH.TimeUnit.SECOND:return cL(r,n);case nH.TimeUnit.MILLISECOND:return cC(r,n);case nH.TimeUnit.MICROSECOND:return cO(r,n);case nH.TimeUnit.NANOSECOND:return cD(r,n)}},ch.prototype.visitTimeSecond=cL,ch.prototype.visitTimeMillisecond=cC,ch.prototype.visitTimeMicrosecond=cO,ch.prototype.visitTimeNanosecond=cD,ch.prototype.visitDecimal=({values:r},n)=>ar.BN.decimal(r.subarray(4*n,4*(n+1))),ch.prototype.visitList=(r,n)=>{let i=r.getChildAt(0),{valueOffsets:a,stride:o}=r;return i.slice(a[n*o],a[n*o+1])},ch.prototype.visitStruct=(r,n)=>r.bind(n),ch.prototype.visitUnion=(r,n)=>r.type.mode===nH.UnionMode.Dense?cP(r,n):cB(r,n),ch.prototype.visitDenseUnion=cP,ch.prototype.visitSparseUnion=cB,ch.prototype.visitDictionary=(r,n)=>r.getValue(r.getKey(n)),ch.prototype.visitInterval=(r,n)=>r.type.unit===nH.IntervalUnit.DAY_TIME?cR(r,n):cz(r,n),ch.prototype.visitIntervalDayTime=cR,ch.prototype.visitIntervalYearMonth=cz,ch.prototype.visitFixedSizeList=(r,n)=>{let i=r.getChildAt(0),{stride:a}=r;return i.slice(n*a,(n+1)*a)},ch.prototype.visitMap=(r,n)=>r.bind(n),cf.instance=new ch;var cF={};Object.defineProperty(cF,"__esModule",{value:!0});class cN extends n2.Visitor{}function cU(r,n,i){if(void 0===n)return -1;if(null===n)return function(r,n){let{nullBitmap:i}=r;if(!i||r.nullCount<=0)return -1;let a=0;for(let o of nY.iterateBits(i,r.data.offset+(n||0),r.length,i,nY.getBool)){if(!o)return a;++a}return -1}(r,i);let a=aE.createElementComparator(n);for(let n=(i||0)-1,o=r.length;++n<o;)if(a(r.get(n)))return n;return -1}function cj(r,n,i){let a=aE.createElementComparator(n);for(let n=(i||0)-1,o=r.length;++n<o;)if(a(r.get(n)))return n;return -1}cF.IndexOfVisitor=cN,cN.prototype.visitNull=function(r,n){return null===n&&r.length>0?0:-1},cN.prototype.visitBool=cU,cN.prototype.visitInt=cU,cN.prototype.visitInt8=cU,cN.prototype.visitInt16=cU,cN.prototype.visitInt32=cU,cN.prototype.visitInt64=cU,cN.prototype.visitUint8=cU,cN.prototype.visitUint16=cU,cN.prototype.visitUint32=cU,cN.prototype.visitUint64=cU,cN.prototype.visitFloat=cU,cN.prototype.visitFloat16=cU,cN.prototype.visitFloat32=cU,cN.prototype.visitFloat64=cU,cN.prototype.visitUtf8=cU,cN.prototype.visitBinary=cU,cN.prototype.visitFixedSizeBinary=cU,cN.prototype.visitDate=cU,cN.prototype.visitDateDay=cU,cN.prototype.visitDateMillisecond=cU,cN.prototype.visitTimestamp=cU,cN.prototype.visitTimestampSecond=cU,cN.prototype.visitTimestampMillisecond=cU,cN.prototype.visitTimestampMicrosecond=cU,cN.prototype.visitTimestampNanosecond=cU,cN.prototype.visitTime=cU,cN.prototype.visitTimeSecond=cU,cN.prototype.visitTimeMillisecond=cU,cN.prototype.visitTimeMicrosecond=cU,cN.prototype.visitTimeNanosecond=cU,cN.prototype.visitDecimal=cU,cN.prototype.visitList=cU,cN.prototype.visitStruct=cU,cN.prototype.visitUnion=cU,cN.prototype.visitDenseUnion=cj,cN.prototype.visitSparseUnion=cj,cN.prototype.visitDictionary=cU,cN.prototype.visitInterval=cU,cN.prototype.visitIntervalDayTime=cU,cN.prototype.visitIntervalYearMonth=cU,cN.prototype.visitFixedSizeList=cU,cN.prototype.visitMap=cU,cF.instance=new cN;var cV={};Object.defineProperty(cV,"__esModule",{value:!0});var cH={};Object.defineProperty(cH,"__esModule",{value:!0});class cq extends n2.Visitor{}function cG(r){if(r.nullCount>0)return function(r){let n=cf.instance.getVisitFn(r);return nY.iterateBits(r.nullBitmap,r.offset,r.length,r,(r,i,a,o)=>(a&1<<o)!=0?n(r,i):null)}(r);let{type:n,typeId:i,length:a}=r;return 1===r.stride&&(i===nH.Type.Timestamp||i===nH.Type.Int&&64!==n.bitWidth||i===nH.Type.Time&&64!==n.bitWidth||i===nH.Type.Float&&n.precision>0)?r.values.subarray(0,a)[Symbol.iterator]():function*(n){for(let i=-1;++i<a;)yield n(r,i)}(cf.instance.getVisitFn(r))}cH.IteratorVisitor=cq,cq.prototype.visitNull=cG,cq.prototype.visitBool=cG,cq.prototype.visitInt=cG,cq.prototype.visitInt8=cG,cq.prototype.visitInt16=cG,cq.prototype.visitInt32=cG,cq.prototype.visitInt64=cG,cq.prototype.visitUint8=cG,cq.prototype.visitUint16=cG,cq.prototype.visitUint32=cG,cq.prototype.visitUint64=cG,cq.prototype.visitFloat=cG,cq.prototype.visitFloat16=cG,cq.prototype.visitFloat32=cG,cq.prototype.visitFloat64=cG,cq.prototype.visitUtf8=cG,cq.prototype.visitBinary=cG,cq.prototype.visitFixedSizeBinary=cG,cq.prototype.visitDate=cG,cq.prototype.visitDateDay=cG,cq.prototype.visitDateMillisecond=cG,cq.prototype.visitTimestamp=cG,cq.prototype.visitTimestampSecond=cG,cq.prototype.visitTimestampMillisecond=cG,cq.prototype.visitTimestampMicrosecond=cG,cq.prototype.visitTimestampNanosecond=cG,cq.prototype.visitTime=cG,cq.prototype.visitTimeSecond=cG,cq.prototype.visitTimeMillisecond=cG,cq.prototype.visitTimeMicrosecond=cG,cq.prototype.visitTimeNanosecond=cG,cq.prototype.visitDecimal=cG,cq.prototype.visitList=cG,cq.prototype.visitStruct=cG,cq.prototype.visitUnion=cG,cq.prototype.visitDenseUnion=cG,cq.prototype.visitSparseUnion=cG,cq.prototype.visitDictionary=cG,cq.prototype.visitInterval=cG,cq.prototype.visitIntervalDayTime=cG,cq.prototype.visitIntervalYearMonth=cG,cq.prototype.visitFixedSizeList=cG,cq.prototype.visitMap=cG,cH.instance=new cq;class cW extends n2.Visitor{}function cY(r){let{type:n,length:i,stride:a}=r;switch(n.typeId){case nH.Type.Int:case nH.Type.Float:case nH.Type.Decimal:case nH.Type.Time:case nH.Type.Timestamp:return r.values.subarray(0,i*a)}return[...cH.instance.visit(r)]}cV.ToArrayVisitor=cW,cW.prototype.visitNull=cY,cW.prototype.visitBool=cY,cW.prototype.visitInt=cY,cW.prototype.visitInt8=cY,cW.prototype.visitInt16=cY,cW.prototype.visitInt32=cY,cW.prototype.visitInt64=cY,cW.prototype.visitUint8=cY,cW.prototype.visitUint16=cY,cW.prototype.visitUint32=cY,cW.prototype.visitUint64=cY,cW.prototype.visitFloat=cY,cW.prototype.visitFloat16=cY,cW.prototype.visitFloat32=cY,cW.prototype.visitFloat64=cY,cW.prototype.visitUtf8=cY,cW.prototype.visitBinary=cY,cW.prototype.visitFixedSizeBinary=cY,cW.prototype.visitDate=cY,cW.prototype.visitDateDay=cY,cW.prototype.visitDateMillisecond=cY,cW.prototype.visitTimestamp=cY,cW.prototype.visitTimestampSecond=cY,cW.prototype.visitTimestampMillisecond=cY,cW.prototype.visitTimestampMicrosecond=cY,cW.prototype.visitTimestampNanosecond=cY,cW.prototype.visitTime=cY,cW.prototype.visitTimeSecond=cY,cW.prototype.visitTimeMillisecond=cY,cW.prototype.visitTimeMicrosecond=cY,cW.prototype.visitTimeNanosecond=cY,cW.prototype.visitDecimal=cY,cW.prototype.visitList=cY,cW.prototype.visitStruct=cY,cW.prototype.visitUnion=cY,cW.prototype.visitDenseUnion=cY,cW.prototype.visitSparseUnion=cY,cW.prototype.visitDictionary=cY,cW.prototype.visitInterval=cY,cW.prototype.visitIntervalDayTime=cY,cW.prototype.visitIntervalYearMonth=cY,cW.prototype.visitFixedSizeList=cY,cW.prototype.visitMap=cY,cV.instance=new cW;var cZ={};Object.defineProperty(cZ,"__esModule",{value:!0});const cX=(r,n)=>r+n,cK=r=>`Cannot compute the byte width of variable-width column ${r}`;class cJ extends n2.Visitor{visitNull(r){return 0}visitInt(r){return r.bitWidth/8}visitFloat(r){return r.ArrayType.BYTES_PER_ELEMENT}visitBinary(r){throw Error(cK(r))}visitUtf8(r){throw Error(cK(r))}visitBool(r){return 1/8}visitDecimal(r){return 16}visitDate(r){return(r.unit+1)*4}visitTime(r){return r.bitWidth/8}visitTimestamp(r){return r.unit===nH.TimeUnit.SECOND?4:8}visitInterval(r){return(r.unit+1)*4}visitList(r){throw Error(cK(r))}visitStruct(r){return this.visitFields(r.children).reduce(cX,0)}visitUnion(r){return this.visitFields(r.children).reduce(cX,0)}visitFixedSizeBinary(r){return r.byteWidth}visitFixedSizeList(r){return r.listSize*this.visitFields(r.children).reduce(cX,0)}visitMap(r){return this.visitFields(r.children).reduce(cX,0)}visitDictionary(r){return this.visit(r.indices)}visitFields(r){return(r||[]).map(r=>this.visit(r.type))}visitSchema(r){return this.visitFields(r.fields).reduce(cX,0)}}cZ.ByteWidthVisitor=cJ,cZ.instance=new cJ;var c$={};Object.defineProperty(c$,"__esModule",{value:!0});class cQ extends n2.Visitor{visitNull(){return l8.NullVector}visitBool(){return lw.BoolVector}visitInt(){return lq.IntVector}visitInt8(){return lq.Int8Vector}visitInt16(){return lq.Int16Vector}visitInt32(){return lq.Int32Vector}visitInt64(){return lq.Int64Vector}visitUint8(){return lq.Uint8Vector}visitUint16(){return lq.Uint16Vector}visitUint32(){return lq.Uint32Vector}visitUint64(){return lq.Uint64Vector}visitFloat(){return lP.FloatVector}visitFloat16(){return lP.Float16Vector}visitFloat32(){return lP.Float32Vector}visitFloat64(){return lP.Float64Vector}visitUtf8(){return cl.Utf8Vector}visitBinary(){return lb.BinaryVector}visitFixedSizeBinary(){return lL.FixedSizeBinaryVector}visitDate(){return lA.DateVector}visitDateDay(){return lA.DateDayVector}visitDateMillisecond(){return lA.DateMillisecondVector}visitTimestamp(){return cr.TimestampVector}visitTimestampSecond(){return cr.TimestampSecondVector}visitTimestampMillisecond(){return cr.TimestampMillisecondVector}visitTimestampMicrosecond(){return cr.TimestampMicrosecondVector}visitTimestampNanosecond(){return cr.TimestampNanosecondVector}visitTime(){return ci.TimeVector}visitTimeSecond(){return ci.TimeSecondVector}visitTimeMillisecond(){return ci.TimeMillisecondVector}visitTimeMicrosecond(){return ci.TimeMicrosecondVector}visitTimeNanosecond(){return ci.TimeNanosecondVector}visitDecimal(){return lM.DecimalVector}visitList(){return l3.ListVector}visitStruct(){return l9.StructVector}visitUnion(){return co.UnionVector}visitDenseUnion(){return co.DenseUnionVector}visitSparseUnion(){return co.SparseUnionVector}visitDictionary(){return lE.DictionaryVector}visitInterval(){return lV.IntervalVector}visitIntervalDayTime(){return lV.IntervalDayTimeVector}visitIntervalYearMonth(){return lV.IntervalYearMonthVector}visitFixedSizeList(){return lO.FixedSizeListVector}visitMap(){return l6.MapVector}}c$.GetVectorConstructor=cQ,c$.instance=new cQ,nj.Vector.new=function(r,...n){return new(c$.instance.getVisitFn(r)())(r,...n)},nj.Vector.from=function(r){let{values:n=[],...i}={nullValues:[null,void 0],...r};if(np.isIterable(n)){let r=[...nU.Builder.throughIterable(i)(n)];return 1===r.length?r[0]:aS.Chunked.concat(r)}return(async r=>{for await(let a of nU.Builder.throughAsyncIterable(i)(n))r.push(a);return 1===r.length?r[0]:aS.Chunked.concat(r)})([])},lv.vectorFromValuesWithType=function(r,n){if(np.isIterable(n)||np.isAsyncIterable(n))return nj.Vector.from({nullValues:[null,void 0],type:r(),values:n});let{values:i=[],type:a=r(),nullValues:o=[null,void 0]}={...n};return np.isIterable(i),nj.Vector.from({nullValues:o,...n,type:a})},lm.BaseVector.prototype.get=function(r){return cf.instance.visit(this,r)},lm.BaseVector.prototype.set=function(r,n){return ot.instance.visit(this,r,n)},lm.BaseVector.prototype.indexOf=function(r,n){return cF.instance.visit(this,r,n)},lm.BaseVector.prototype.toArray=function(){return cV.instance.visit(this)},lm.BaseVector.prototype.getByteWidth=function(){return cZ.instance.visit(this.type)},lm.BaseVector.prototype[Symbol.iterator]=function(){return cH.instance.visit(this)},lm.BaseVector.prototype._bindDataAccessors=function(){let r=this.nullBitmap;if(r&&r.byteLength>0){var n,i;this.get=(n=this.get,function(r){return this.isValid(r)?n.call(this,r):null}),this.set=(i=this.set,function(r,n){nY.setBool(this.nullBitmap,this.offset+r,null!=n)&&i.call(this,r,n)})}},Object.keys(nH.Type).map(r=>nH.Type[r]).filter(r=>"number"==typeof r).filter(r=>r!==nH.Type.NONE).forEach(r=>{var n;let i=c$.instance.visit(r);i.prototype.get=cu.partial1(cf.instance.getVisitFn(r)),i.prototype.set=cu.partial2(ot.instance.getVisitFn(r)),i.prototype.indexOf=cu.partial2(cF.instance.getVisitFn(r)),i.prototype.toArray=cu.partial0(cV.instance.getVisitFn(r)),i.prototype.getByteWidth=(n=cZ.instance.getVisitFn(r),function(){return n(this.type)}),i.prototype[Symbol.iterator]=cu.partial0(cH.instance.getVisitFn(r))});class c0 extends lv.Chunked{constructor(...r){let n=null;r[0]instanceof aA.Schema&&(n=r.shift());let i=ak.selectArgs(o6.RecordBatch,r);if(!n&&!(n=i[0]&&i[0].schema))throw TypeError("Table must be initialized with a Schema or at least one RecordBatch");i[0]||(i[0]=new o6._InternalEmptyPlaceholderRecordBatch(n)),super(new n0.Struct(n.fields),i),this._schema=n,this._chunks=i}static empty(r=new aA.Schema([])){return new c0(r,[])}static from(r){if(!r)return c0.empty();if("object"==typeof r){let n=np.isIterable(r.values)?function(r){let{type:n}=r;return n instanceof n0.Struct?c0.fromStruct(lv.StructVector.from(r)):null}(r):np.isAsyncIterable(r.values)?function(r){let{type:n}=r;return n instanceof n0.Struct?lv.StructVector.from(r).then(r=>c0.fromStruct(r)):null}(r):null;if(null!==n)return n}let n=oL.RecordBatchReader.from(r);return np.isPromise(n)?(async()=>await c0.from(await n))():n.isSync()&&(n=n.open())?n.schema?new c0(n.schema,[...n]):c0.empty():(async r=>{let n=await r,i=n.schema,a=[];if(i){for await(let r of n)a.push(r);return new c0(i,a)}return c0.empty()})(n.open())}static async fromAsync(r){return await c0.from(r)}static fromStruct(r){return c0.new(r.data.childData,r.type.children)}static new(...r){return new c0(...lp.distributeColumnsIntoRecordBatches(ak.selectColumnArgs(r)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(r=this._chunks){return new c0(this._schema,r)}getColumn(r){return this.getColumnAt(this.getColumnIndex(r))}getColumnAt(r){return this.getChildAt(r)}getColumnIndex(r){return this._schema.fields.findIndex(n=>n.name===r)}getChildAt(r){let n,i;if(r<0||r>=this.numChildren)return null;let a=this._schema.fields,o=this._children||(this._children=[]);if(i=o[r])return i;if(n=a[r]){let i=this._chunks.map(n=>n.getChildAt(r)).filter(r=>null!=r);if(i.length>0)return o[r]=new aM.Column(n,i)}return null}serialize(r="binary",n=!0){return(n?o8.RecordBatchStreamWriter:o8.RecordBatchFileWriter).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...r){let n=this._schema.fields.reduce((r,n,i)=>r.set(n.name,i),new Map);return this.selectAt(...r.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(...r){let n=this._schema.selectAt(...r);return new c0(n,this._chunks.map(({length:i,data:{childData:a}})=>new o6.RecordBatch(n,i,r.map(r=>a[r]).filter(Boolean))))}assign(r){let n=this._schema.fields,[i,a]=r.schema.fields.reduce((r,i,a)=>{let[o,s]=r,l=n.findIndex(r=>r.name===i.name);return~l?s[l]=a:o.push(a),r},[[],[]]),o=this._schema.assign(r.schema),s=[...n.map((n,i,o,s=a[i])=>void 0===s?this.getColumnAt(i):r.getColumnAt(s)),...i.map(n=>r.getColumnAt(n))].filter(Boolean);return new c0(...lp.distributeVectorsIntoRecordBatches(o,s))}}o5.Table=c0;class c1 extends lv.StructVector{constructor(...r){let n,i;let a=r[0];if(r[1]instanceof nW.Data)[,n,i]=r;else{let i=a.fields,[,o,s]=r;n=nW.Data.Struct(new n0.Struct(i),0,o,0,null,s)}super(n,i),this._schema=a}static from(r){return np.isIterable(r.values),o5.Table.from(r)}static new(...r){let[n,i]=ak.selectFieldArgs(r),a=i.filter(r=>r instanceof nj.Vector);return new c1(...lp.ensureSameLengthData(new aA.Schema(n),a.map(r=>r.data)))}clone(r,n=this._children){return new c1(this._schema,r,n)}concat(...r){let n=this._schema,i=aS.Chunked.flatten(this,...r);return new o5.Table(n,i.map(({data:r})=>new c1(n,r)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=c2.collect(this))}select(...r){let n=this._schema.fields.reduce((r,n,i)=>r.set(n.name,i),new Map);return this.selectAt(...r.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(...r){let n=this._schema.selectAt(...r),i=r.map(r=>this.data.childData[r]).filter(Boolean);return new c1(n,this.length,i)}}o6.RecordBatch=c1,o6._InternalEmptyPlaceholderRecordBatch=class extends c1{constructor(r){super(r,0,r.fields.map(r=>nW.Data.new(r.type,0,0,0)))}};class c2 extends n2.Visitor{constructor(){super(...arguments),this.dictionaries=new Map}static collect(r){return new c2().visit(r.data,new n0.Struct(r.schema.fields)).dictionaries}visit(r,n){return n0.DataType.isDictionary(n)?this.visitDictionary(r,n):(r.childData.forEach((r,i)=>this.visit(r,n.children[i].type)),this)}visitDictionary(r,n){let i=r.dictionary;return i&&i.length>0&&this.dictionaries.set(n.id,i),this}}class c3 extends nd.ReadableInterop{constructor(r){super(),this._impl=r}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(r){return this._impl.throw(r)}return(r){return this._impl.return(r)}cancel(){return this._impl.cancel()}reset(r){return this._impl.reset(r),this._DOMStream=void 0,this._nodeStream=void 0,this}open(r){let n=this._impl.open(r);return np.isPromise(n)?n.then(()=>this):this}readRecordBatch(r){return this._impl.isFile()?this._impl.readRecordBatch(r):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return rb.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return rb.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(r){throw Error('"throughNode" not available in this environment')}static throughDOM(r,n){throw Error('"throughDOM" not available in this environment')}static from(r){return r instanceof c3?r:np.isArrowJSON(r)?new c4(new un(r)):np.isFileHandle(r)?ul(r):np.isPromise(r)?(async()=>await c3.from(await r))():np.isFetchResponse(r)||np.isReadableDOMStream(r)||np.isReadableNodeStream(r)||np.isAsyncIterable(r)?us(new oj.AsyncByteStream(r)):function(r){let n=r.peek(o7.magicLength+7&-8);return n&&n.byteLength>=4?o7.checkForMagicArrowString(n)?new c5(new ue(r.read())):new c4(new c9(r)):new c4(new c9(function*(){}()))}(new oj.ByteStream(r))}static readAll(r){return r instanceof c3?r.isSync()?ua(r):uo(r):np.isArrowJSON(r)||ArrayBuffer.isView(r)||np.isIterable(r)||np.isIteratorResult(r)?ua(r):uo(r)}}oL.RecordBatchReader=c3;class c4 extends c3{constructor(r){super(r),this._impl=r}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async *[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}oL.RecordBatchStreamReader=c4;class c6 extends c3{constructor(r){super(r),this._impl=r}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}oL.AsyncRecordBatchStreamReader=c6;class c5 extends c4{constructor(r){super(r),this._impl=r}}oL.RecordBatchFileReader=c5;class c8 extends c6{constructor(r){super(r),this._impl=r}}oL.AsyncRecordBatchFileReader=c8;class c7{constructor(r=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=r}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(r){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=r,this.dictionaries=new Map,this}_loadRecordBatch(r,n){return new o6.RecordBatch(this.schema,r.length,this._loadVectors(r,n,this.schema.fields))}_loadDictionaryBatch(r,n){let{id:i,isDelta:a,data:o}=r,{dictionaries:s,schema:l}=this,c=s.get(i);if(a||!c){let r=l.dictionaries.get(i);return c&&a?c.concat(nj.Vector.new(this._loadVectors(o,n,[r])[0])):nj.Vector.new(this._loadVectors(o,n,[r])[0])}return c}_loadVectors(r,n,i){return new oK.VectorLoader(n,r.nodes,r.buffers,this.dictionaries).visitMany(i)}}class c9 extends c7{constructor(r,n){super(n),this._reader=np.isArrowJSON(r)?new o7.JSONMessageReader(this._handle=r):new o7.MessageReader(this._handle=r)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(r){return this.closed||(this.autoDestroy=ui(this,r),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(r):nd.ITERATOR_DONE}return(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(r):nd.ITERATOR_DONE}next(){if(this.closed)return nd.ITERATOR_DONE;let r,{_reader:n}=this;for(;r=this._readNextMessageAndValidate();)if(r.isSchema())this.reset(r.header());else if(r.isRecordBatch()){this._recordBatchIndex++;let i=r.header(),a=n.readMessageBody(r.bodyLength);return{done:!1,value:this._loadRecordBatch(i,a)}}else if(r.isDictionaryBatch()){this._dictionaryIndex++;let i=r.header(),a=n.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(i,a);this.dictionaries.set(i.id,o)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new o6._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(r){return this._reader.readMessage(r)}}class ut extends c7{constructor(r,n){super(n),this._reader=new o7.AsyncMessageReader(this._handle=r)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(r){return this.closed||(this.autoDestroy=ui(this,r),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(r):nd.ITERATOR_DONE}async return(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(r):nd.ITERATOR_DONE}async next(){if(this.closed)return nd.ITERATOR_DONE;let r,{_reader:n}=this;for(;r=await this._readNextMessageAndValidate();)if(r.isSchema())await this.reset(r.header());else if(r.isRecordBatch()){this._recordBatchIndex++;let i=r.header(),a=await n.readMessageBody(r.bodyLength);return{done:!1,value:this._loadRecordBatch(i,a)}}else if(r.isDictionaryBatch()){this._dictionaryIndex++;let i=r.header(),a=await n.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(i,a);this.dictionaries.set(i.id,o)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new o6._InternalEmptyPlaceholderRecordBatch(this.schema)}):await this.return()}async _readNextMessageAndValidate(r){return await this._reader.readMessage(r)}}class ue extends c9{constructor(r,n){super(r instanceof oY.RandomAccessFile?r:new oY.RandomAccessFile(r),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(r){if(!this.closed&&!this._footer)for(let r of(this.schema=(this._footer=this._readFooter()).schema,this._footer.dictionaryBatches()))r&&this._readDictionaryBatch(this._dictionaryIndex++);return super.open(r)}readRecordBatch(r){if(this.closed)return null;this._footer||this.open();let n=this._footer&&this._footer.getRecordBatch(r);if(n&&this._handle.seek(n.offset)){let r=this._reader.readMessage(nH.MessageHeader.RecordBatch);if(r&&r.isRecordBatch()){let n=r.header(),i=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(n,i)}}return null}_readDictionaryBatch(r){let n=this._footer&&this._footer.getDictionaryBatch(r);if(n&&this._handle.seek(n.offset)){let r=this._reader.readMessage(nH.MessageHeader.DictionaryBatch);if(r&&r.isDictionaryBatch()){let n=r.header(),i=this._reader.readMessageBody(r.bodyLength),a=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,a)}}}_readFooter(){let{_handle:r}=this,n=r.size-o7.magicAndPadding,i=r.readInt32(n),a=r.readAt(n-i,i);return oC.Footer.decode(a)}_readNextMessageAndValidate(r){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(r)}return null}}class ur extends ut{constructor(r,...n){super(r instanceof oY.AsyncRandomAccessFile?r:new oY.AsyncRandomAccessFile(r,"number"!=typeof n[0]?n.shift():void 0),n[0]instanceof Map?n.shift():void 0)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(r){if(!this.closed&&!this._footer)for(let r of(this.schema=(this._footer=await this._readFooter()).schema,this._footer.dictionaryBatches()))r&&await this._readDictionaryBatch(this._dictionaryIndex++);return await super.open(r)}async readRecordBatch(r){if(this.closed)return null;this._footer||await this.open();let n=this._footer&&this._footer.getRecordBatch(r);if(n&&await this._handle.seek(n.offset)){let r=await this._reader.readMessage(nH.MessageHeader.RecordBatch);if(r&&r.isRecordBatch()){let n=r.header(),i=await this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(n,i)}}return null}async _readDictionaryBatch(r){let n=this._footer&&this._footer.getDictionaryBatch(r);if(n&&await this._handle.seek(n.offset)){let r=await this._reader.readMessage(nH.MessageHeader.DictionaryBatch);if(r&&r.isDictionaryBatch()){let n=r.header(),i=await this._reader.readMessageBody(r.bodyLength),a=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,a)}}}async _readFooter(){let{_handle:r}=this;r._pending&&await r._pending;let n=r.size-o7.magicAndPadding,i=await r.readInt32(n),a=await r.readAt(n-i,i);return oC.Footer.decode(a)}async _readNextMessageAndValidate(r){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&await this._handle.seek(n.offset))return await this._reader.readMessage(r)}return null}}class un extends c9{constructor(r,n){super(r,n)}_loadVectors(r,n,i){return new oK.JSONVectorLoader(n,r.nodes,r.buffers,this.dictionaries).visitMany(i)}}function ui(r,n){return n&&"boolean"==typeof n.autoDestroy?n.autoDestroy:r.autoDestroy}function*ua(r){let n=c3.from(r);try{if(!n.open({autoDestroy:!1}).closed)do yield n;while(!n.reset().open().closed)}finally{n.cancel()}}async function*uo(r){let n=await c3.from(r);try{if(!(await n.open({autoDestroy:!1})).closed)do yield n;while(!(await n.reset().open()).closed)}finally{await n.cancel()}}async function us(r){let n=await r.peek(o7.magicLength+7&-8);return n&&n.byteLength>=4?o7.checkForMagicArrowString(n)?new c5(new ue(await r.read())):new c6(new ut(r)):new c6(new ut(async function*(){}()))}async function ul(r){let{size:n}=await r.stat(),i=new oY.AsyncRandomAccessFile(r,n);return n>=o7.magicX2AndPadding&&o7.checkForMagicArrowString(await i.readAt(0,o7.magicLength+7&-8))?new c8(new ur(i)):new c6(new ut(i))}var uc={};Object.defineProperty(uc,"__esModule",{value:!0}),uc.toDOMStream=function(r,n){if(np.isAsyncIterable(r))return function(r,n){let i=null,a=n&&"bytes"===n.type||!1,o=n&&n.highWaterMark||16777216;return new ReadableStream({...n,async start(n){await s(n,i||(i=r[Symbol.asyncIterator]()))},async pull(r){i?await s(r,i):r.close()},async cancel(){i&&i.return&&await i.return(),i=null}},{highWaterMark:a?o:void 0,...n});async function s(r,n){let i;let o=null,s=r.desiredSize||null;for(;!(o=await n.next(a?s:null)).done;)if(ArrayBuffer.isView(o.value)&&(i=r_.toUint8Array(o.value))&&(null!=s&&a&&(s=s-i.byteLength+1),o.value=i),r.enqueue(o.value),null!=s&&--s<=0)return;r.close()}}(r,n);if(np.isIterable(r))return function(r,n){let i=null,a=n&&"bytes"===n.type||!1,o=n&&n.highWaterMark||16777216;return new ReadableStream({...n,start(n){s(n,i||(i=r[Symbol.iterator]()))},pull(r){i?s(r,i):r.close()},cancel(){i&&i.return&&i.return(),i=null}},{highWaterMark:a?o:void 0,...n});function s(r,n){let i;let o=null,s=r.desiredSize||null;for(;!(o=n.next(a?s:null)).done;)if(ArrayBuffer.isView(o.value)&&(i=r_.toUint8Array(o.value))&&(null!=s&&a&&(s=s-i.byteLength+1),o.value=i),r.enqueue(o.value),null!=s&&--s<=0)return;r.close()}}(r,n);throw Error("toDOMStream() must be called with an Iterable or AsyncIterable")};var uu={};Object.defineProperty(uu,"__esModule",{value:!0}),uu.builderThroughDOMStream=function(r){return new uf(r)};class uf{constructor(r){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{readableStrategy:n,writableStrategy:i,queueingStrategy:a="count",...o}=r;this._controller=null,this._builder=nN.Builder.new(o),this._getSize="bytes"!==a?uh:up;let{highWaterMark:s="bytes"===a?16384:1e3}={...n},{highWaterMark:l="bytes"===a?16384:1e3}={...i};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:r=>{this._maybeFlush(this._builder,this._controller=r)},start:r=>{this._maybeFlush(this._builder,this._controller=r)}},{highWaterMark:s,size:"bytes"!==a?uh:up}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:l,size:r=>this._writeValueAndReturnChunkSize(r)})}_writeValueAndReturnChunkSize(r){let n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(r)),this._bufferedSize-n}_maybeFlush(r,n){null!==n&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,r.toVector()),r.finished&&((r.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(n,r.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(r,n){this._bufferedSize=0,this._controller=null,null===n?r.close():r.enqueue(n)}}uu.BuilderTransform=uf;const uh=r=>r.length,up=r=>r.byteLength;var ud={};Object.defineProperty(ud,"__esModule",{value:!0}),ud.recordBatchReaderThroughDOMStream=function(r,n){let i=new oj.AsyncByteQueue,a=null,o=new ReadableStream({async cancel(){await i.close()},async start(r){await l(r,a||(a=await s()))},async pull(r){a?await l(r,a):r.close()}});return{writable:new WritableStream(i,{highWaterMark:16384,...r}),readable:o};async function s(){return await (await oL.RecordBatchReader.from(i)).open(n)}async function l(r,n){let i=r.desiredSize,a=null;for(;!(a=await n.next()).done;)if(r.enqueue(a.value),null!=i&&--i<=0)return;r.close()}};var uy={};Object.defineProperty(uy,"__esModule",{value:!0}),uy.recordBatchWriterThroughDOMStream=function(r,n){let i=new this(r),a=new oj.AsyncByteStream(i),o=new ReadableStream({type:"bytes",async cancel(){await a.cancel()},async pull(r){await s(r)},async start(r){await s(r)}},{highWaterMark:16384,...n});return{writable:new WritableStream(i,r),readable:o};async function s(r){let n=null,i=r.desiredSize;for(;n=await a.read(i||null);)if(r.enqueue(n),null!=i&&(i-=n.byteLength)<=0)return;r.close()}},rb.default.toDOMStream=uc.toDOMStream,nN.Builder.throughDOM=uu.builderThroughDOMStream,oL.RecordBatchReader.throughDOM=ud.recordBatchReaderThroughDOMStream,o8.RecordBatchWriter.throughDOM=uy.recordBatchWriterThroughDOMStream;var ug={};Object.defineProperty(ug,"__esModule",{value:!0}),ug.ArrowType=nH.ArrowType,ug.DateUnit=nH.DateUnit,ug.IntervalUnit=nH.IntervalUnit,ug.MessageHeader=nH.MessageHeader,ug.MetadataVersion=nH.MetadataVersion,ug.Precision=nH.Precision,ug.TimeUnit=nH.TimeUnit,ug.Type=nH.Type,ug.UnionMode=nH.UnionMode,ug.BufferType=nH.BufferType,ug.Data=nW.Data,ug.DataType=n0.DataType,ug.Null=n0.Null,ug.Bool=n0.Bool,ug.Int=n0.Int,ug.Int8=n0.Int8,ug.Int16=n0.Int16,ug.Int32=n0.Int32,ug.Int64=n0.Int64,ug.Uint8=n0.Uint8,ug.Uint16=n0.Uint16,ug.Uint32=n0.Uint32,ug.Uint64=n0.Uint64,ug.Float=n0.Float,ug.Float16=n0.Float16,ug.Float32=n0.Float32,ug.Float64=n0.Float64,ug.Utf8=n0.Utf8,ug.Binary=n0.Binary,ug.FixedSizeBinary=n0.FixedSizeBinary,ug.Date_=n0.Date_,ug.DateDay=n0.DateDay,ug.DateMillisecond=n0.DateMillisecond,ug.Timestamp=n0.Timestamp,ug.TimestampSecond=n0.TimestampSecond,ug.TimestampMillisecond=n0.TimestampMillisecond,ug.TimestampMicrosecond=n0.TimestampMicrosecond,ug.TimestampNanosecond=n0.TimestampNanosecond,ug.Time=n0.Time,ug.TimeSecond=n0.TimeSecond,ug.TimeMillisecond=n0.TimeMillisecond,ug.TimeMicrosecond=n0.TimeMicrosecond,ug.TimeNanosecond=n0.TimeNanosecond,ug.Decimal=n0.Decimal,ug.List=n0.List,ug.Struct=n0.Struct,ug.Union=n0.Union,ug.DenseUnion=n0.DenseUnion,ug.SparseUnion=n0.SparseUnion,ug.Dictionary=n0.Dictionary,ug.Interval=n0.Interval,ug.IntervalDayTime=n0.IntervalDayTime,ug.IntervalYearMonth=n0.IntervalYearMonth,ug.FixedSizeList=n0.FixedSizeList,ug.Map_=n0.Map_,ug.Table=o5.Table,ug.Column=aM.Column,ug.Visitor=n2.Visitor,ug.Schema=aA.Schema,ug.Field=aA.Field,ug.Vector=lv.Vector,ug.BaseVector=lv.BaseVector,ug.BinaryVector=lv.BinaryVector,ug.BoolVector=lv.BoolVector,ug.Chunked=lv.Chunked,ug.DateVector=lv.DateVector,ug.DateDayVector=lv.DateDayVector,ug.DateMillisecondVector=lv.DateMillisecondVector,ug.DecimalVector=lv.DecimalVector,ug.DictionaryVector=lv.DictionaryVector,ug.FixedSizeBinaryVector=lv.FixedSizeBinaryVector,ug.FixedSizeListVector=lv.FixedSizeListVector,ug.FloatVector=lv.FloatVector,ug.Float16Vector=lv.Float16Vector,ug.Float32Vector=lv.Float32Vector,ug.Float64Vector=lv.Float64Vector,ug.IntervalVector=lv.IntervalVector,ug.IntervalDayTimeVector=lv.IntervalDayTimeVector,ug.IntervalYearMonthVector=lv.IntervalYearMonthVector,ug.IntVector=lv.IntVector,ug.Int8Vector=lv.Int8Vector,ug.Int16Vector=lv.Int16Vector,ug.Int32Vector=lv.Int32Vector,ug.Int64Vector=lv.Int64Vector,ug.Uint8Vector=lv.Uint8Vector,ug.Uint16Vector=lv.Uint16Vector,ug.Uint32Vector=lv.Uint32Vector,ug.Uint64Vector=lv.Uint64Vector,ug.ListVector=lv.ListVector,ug.MapVector=lv.MapVector,ug.NullVector=lv.NullVector,ug.StructVector=lv.StructVector,ug.TimestampVector=lv.TimestampVector,ug.TimestampSecondVector=lv.TimestampSecondVector,ug.TimestampMillisecondVector=lv.TimestampMillisecondVector,ug.TimestampMicrosecondVector=lv.TimestampMicrosecondVector,ug.TimestampNanosecondVector=lv.TimestampNanosecondVector,ug.TimeVector=lv.TimeVector,ug.TimeSecondVector=lv.TimeSecondVector,ug.TimeMillisecondVector=lv.TimeMillisecondVector,ug.TimeMicrosecondVector=lv.TimeMicrosecondVector,ug.TimeNanosecondVector=lv.TimeNanosecondVector,ug.UnionVector=lv.UnionVector,ug.DenseUnionVector=lv.DenseUnionVector,ug.SparseUnionVector=lv.SparseUnionVector,ug.Utf8Vector=lv.Utf8Vector,ug.Builder=nN.Builder,ug.BinaryBuilder=nN.BinaryBuilder,ug.BoolBuilder=nN.BoolBuilder,ug.DateBuilder=nN.DateBuilder,ug.DateDayBuilder=nN.DateDayBuilder,ug.DateMillisecondBuilder=nN.DateMillisecondBuilder,ug.DecimalBuilder=nN.DecimalBuilder,ug.DictionaryBuilder=nN.DictionaryBuilder,ug.FixedSizeBinaryBuilder=nN.FixedSizeBinaryBuilder,ug.FixedSizeListBuilder=nN.FixedSizeListBuilder,ug.FloatBuilder=nN.FloatBuilder,ug.Float16Builder=nN.Float16Builder,ug.Float32Builder=nN.Float32Builder,ug.Float64Builder=nN.Float64Builder,ug.IntervalBuilder=nN.IntervalBuilder,ug.IntervalDayTimeBuilder=nN.IntervalDayTimeBuilder,ug.IntervalYearMonthBuilder=nN.IntervalYearMonthBuilder,ug.IntBuilder=nN.IntBuilder,ug.Int8Builder=nN.Int8Builder,ug.Int16Builder=nN.Int16Builder,ug.Int32Builder=nN.Int32Builder,ug.Int64Builder=nN.Int64Builder,ug.Uint8Builder=nN.Uint8Builder,ug.Uint16Builder=nN.Uint16Builder,ug.Uint32Builder=nN.Uint32Builder,ug.Uint64Builder=nN.Uint64Builder,ug.ListBuilder=nN.ListBuilder,ug.MapBuilder=nN.MapBuilder,ug.NullBuilder=nN.NullBuilder,ug.StructBuilder=nN.StructBuilder,ug.TimestampBuilder=nN.TimestampBuilder,ug.TimestampSecondBuilder=nN.TimestampSecondBuilder,ug.TimestampMillisecondBuilder=nN.TimestampMillisecondBuilder,ug.TimestampMicrosecondBuilder=nN.TimestampMicrosecondBuilder,ug.TimestampNanosecondBuilder=nN.TimestampNanosecondBuilder,ug.TimeBuilder=nN.TimeBuilder,ug.TimeSecondBuilder=nN.TimeSecondBuilder,ug.TimeMillisecondBuilder=nN.TimeMillisecondBuilder,ug.TimeMicrosecondBuilder=nN.TimeMicrosecondBuilder,ug.TimeNanosecondBuilder=nN.TimeNanosecondBuilder,ug.UnionBuilder=nN.UnionBuilder,ug.DenseUnionBuilder=nN.DenseUnionBuilder,ug.SparseUnionBuilder=nN.SparseUnionBuilder,ug.Utf8Builder=nN.Utf8Builder,ug.ByteStream=oj.ByteStream,ug.AsyncByteStream=oj.AsyncByteStream,ug.AsyncByteQueue=oj.AsyncByteQueue,ug.RecordBatchReader=oL.RecordBatchReader,ug.RecordBatchFileReader=oL.RecordBatchFileReader,ug.RecordBatchStreamReader=oL.RecordBatchStreamReader,ug.AsyncRecordBatchFileReader=oL.AsyncRecordBatchFileReader,ug.AsyncRecordBatchStreamReader=oL.AsyncRecordBatchStreamReader,ug.RecordBatchWriter=o8.RecordBatchWriter,ug.RecordBatchFileWriter=o8.RecordBatchFileWriter,ug.RecordBatchStreamWriter=o8.RecordBatchStreamWriter,ug.RecordBatchJSONWriter=o8.RecordBatchJSONWriter,ug.MessageReader=o7.MessageReader,ug.AsyncMessageReader=o7.AsyncMessageReader,ug.JSONMessageReader=o7.JSONMessageReader,ug.Message=st.Message,ug.RecordBatch=o6.RecordBatch;var uv={};Object.defineProperty(uv,"__esModule",{value:!0});var um={};Object.defineProperty(um,"__esModule",{value:!0});class ux{eq(r){return r instanceof ux||(r=new ub(r)),new uS(this,r)}le(r){return r instanceof ux||(r=new ub(r)),new uE(this,r)}ge(r){return r instanceof ux||(r=new ub(r)),new uI(this,r)}lt(r){return new uL(this.ge(r))}gt(r){return new uL(this.le(r))}ne(r){return new uL(this.eq(r))}}um.Value=ux;class ub extends ux{constructor(r){super(),this.v=r}}um.Literal=ub;class u_ extends ux{constructor(r){super(),this.name=r}bind(r){if(!this.colidx){this.colidx=-1;let n=r.schema.fields;for(let r=-1;++r<n.length;)if(n[r].name===this.name){this.colidx=r;break}if(this.colidx<0)throw Error(`Failed to bind Col "${this.name}"`)}let n=this.vector=r.getChildAt(this.colidx);return r=>n.get(r)}}um.Col=u_;class uw{and(...r){return new uk(this,...r)}or(...r){return new uM(this,...r)}not(){return new uL(this)}}um.Predicate=uw;class uT extends uw{constructor(r,n){super(),this.left=r,this.right=n}bind(r){return this.left instanceof ub?this.right instanceof ub?this._bindLitLit(r,this.left,this.right):this._bindLitCol(r,this.left,this.right):this.right instanceof ub?this._bindColLit(r,this.left,this.right):this._bindColCol(r,this.left,this.right)}}um.ComparisonPredicate=uT;class uA extends uw{constructor(...r){super(),this.children=r}}um.CombinationPredicate=uA,uA.prototype.children=Object.freeze([]);class uk extends uA{constructor(...r){super(...r=r.reduce((r,n)=>r.concat(n instanceof uk?n.children:n),[]))}bind(r){let n=this.children.map(n=>n.bind(r));return(r,i)=>n.every(n=>n(r,i))}}um.And=uk;class uM extends uA{constructor(...r){super(...r=r.reduce((r,n)=>r.concat(n instanceof uM?n.children:n),[]))}bind(r){let n=this.children.map(n=>n.bind(r));return(r,i)=>n.some(n=>n(r,i))}}um.Or=uM;class uS extends uT{_bindLitLit(r,n,i){let a=n.v==i.v;return()=>a}_bindColCol(r,n,i){let a=n.bind(r),o=i.bind(r);return(r,n)=>a(r,n)==o(r,n)}_bindColLit(r,n,i){let a=n.bind(r);if(!(n.vector instanceof lE.DictionaryVector))return(r,n)=>a(r,n)==i.v;{let r;let a=n.vector;return(a.dictionary!==this.lastDictionary?(r=a.reverseLookup(i.v),this.lastDictionary=a.dictionary,this.lastKey=r):r=this.lastKey,-1===r)?()=>!1:n=>a.getKey(n)===r}}_bindLitCol(r,n,i){return this._bindColLit(r,i,n)}}um.Equals=uS;class uE extends uT{_bindLitLit(r,n,i){let a=n.v<=i.v;return()=>a}_bindColCol(r,n,i){let a=n.bind(r),o=i.bind(r);return(r,n)=>a(r,n)<=o(r,n)}_bindColLit(r,n,i){let a=n.bind(r);return(r,n)=>a(r,n)<=i.v}_bindLitCol(r,n,i){let a=i.bind(r);return(r,i)=>n.v<=a(r,i)}}um.LTeq=uE;class uI extends uT{_bindLitLit(r,n,i){let a=n.v>=i.v;return()=>a}_bindColCol(r,n,i){let a=n.bind(r),o=i.bind(r);return(r,n)=>a(r,n)>=o(r,n)}_bindColLit(r,n,i){let a=n.bind(r);return(r,n)=>a(r,n)>=i.v}_bindLitCol(r,n,i){let a=i.bind(r);return(r,i)=>n.v>=a(r,i)}}um.GTeq=uI;class uL extends uw{constructor(r){super(),this.child=r}bind(r){let n=this.child.bind(r);return(r,i)=>!n(r,i)}}um.Not=uL;class uC extends uw{constructor(r,n){super(),this.next=r,this.bind_=n}bind(r){return this.bind_(r),this.next}}um.CustomPredicate=uC,um.lit=function(r){return new ub(r)},um.col=function(r){return new u_(r)},um.and=function(...r){return new uk(...r)},um.or=function(...r){return new uM(...r)},um.custom=function(r,n){return new uC(r,n)},o5.Table.prototype.countBy=function(r){return new uO(this.chunks).countBy(r)},o5.Table.prototype.scan=function(r,n){return new uO(this.chunks).scan(r,n)},o5.Table.prototype.scanReverse=function(r,n){return new uO(this.chunks).scanReverse(r,n)},o5.Table.prototype.filter=function(r){return new uO(this.chunks).filter(r)};class uO extends o5.Table{filter(r){return new uP(this.chunks,r)}scan(r,n){let i=this.chunks,a=i.length;for(let o=-1;++o<a;){let a=i[o];n&&n(a);for(let n=-1,i=a.length;++n<i;)r(n,a)}}scanReverse(r,n){let i=this.chunks,a=i.length;for(let o=a;--o>=0;){let a=i[o];n&&n(a);for(let n=a.length;--n>=0;)r(n,a)}}countBy(r){let n=this.chunks,i=n.length,a="string"==typeof r?new um.Col(r):r;a.bind(n[i-1]);let o=a.vector;if(!n0.DataType.isDictionary(o.type))throw Error("countBy currently only supports dictionary-encoded columns");let s=Math.ceil(Math.log(o.length)/Math.log(256)),l=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(o.dictionary.length);for(let r=-1;++r<i;){let i=n[r];a.bind(i);let o=a.vector.indices;for(let r=-1,n=i.length;++r<n;){let n=o.get(r);null!==n&&l[n]++}}return new uD(o.dictionary,lq.IntVector.from(l))}}uv.DataFrame=uO;class uD extends o5.Table{constructor(r,n){super(new o6.RecordBatch(new aA.Schema([new aA.Field("values",r.type),new aA.Field("counts",n.type)]),n.length,[r,n]))}toJSON(){let r=this.getColumnAt(0),n=this.getColumnAt(1),i={};for(let a=-1;++a<this.length;)i[r.get(a)]=n.get(a);return i}}uv.CountByResult=uD;class uP extends uO{constructor(r,n){super(r),this._predicate=n}scan(r,n){let i=this._chunks,a=i.length;for(let o=-1;++o<a;){let a=i[o],s=this._predicate.bind(a),l=!1;for(let i=-1,o=a.length;++i<o;)s(i,a)&&(n&&!l&&(n(a),l=!0),r(i,a))}}scanReverse(r,n){let i=this._chunks,a=i.length;for(let o=a;--o>=0;){let a=i[o],s=this._predicate.bind(a),l=!1;for(let i=a.length;--i>=0;)s(i,a)&&(n&&!l&&(n(a),l=!0),r(i,a))}}count(){let r=0,n=this._chunks,i=n.length;for(let a=-1;++a<i;){let i=n[a],o=this._predicate.bind(i);for(let n=-1,a=i.length;++n<a;)o(n,i)&&++r}return r}*[Symbol.iterator](){let r=this._chunks,n=r.length;for(let i=-1;++i<n;){let n=r[i],a=this._predicate.bind(n);for(let r=-1,i=n.length;++r<i;)a(r,n)&&(yield n.get(r))}}filter(r){return new uP(this._chunks,this._predicate.and(r))}countBy(r){let n=this._chunks,i=n.length,a="string"==typeof r?new um.Col(r):r;a.bind(n[i-1]);let o=a.vector;if(!n0.DataType.isDictionary(o.type))throw Error("countBy currently only supports dictionary-encoded columns");let s=Math.ceil(Math.log(o.length)/Math.log(256)),l=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(o.dictionary.length);for(let r=-1;++r<i;){let i=n[r],o=this._predicate.bind(i);a.bind(i);let s=a.vector.indices;for(let r=-1,n=i.length;++r<n;){let n=s.get(r);null!==n&&o(r,i)&&l[n]++}}return new uD(o.dictionary,lq.IntVector.from(l))}}uv.FilteredDataFrame=uP,ug.DataFrame=uv.DataFrame,ug.FilteredDataFrame=uv.FilteredDataFrame,ug.CountByResult=uv.CountByResult,ug.predicate=um,ug.util={...ar,...oJ,...nY,...i8,...r_,...aE},rx.ArrowType=ug.ArrowType,rx.DateUnit=ug.DateUnit,rx.IntervalUnit=ug.IntervalUnit,rx.MessageHeader=ug.MessageHeader,rx.MetadataVersion=ug.MetadataVersion,rx.Precision=ug.Precision,rx.TimeUnit=ug.TimeUnit,rx.Type=ug.Type,rx.UnionMode=ug.UnionMode,rx.BufferType=ug.BufferType,rx.Data=ug.Data,rx.DataType=ug.DataType,rx.Null=ug.Null,rx.Bool=ug.Bool,rx.Int=ug.Int,rx.Int8=ug.Int8,rx.Int16=ug.Int16,rx.Int32=ug.Int32,rx.Int64=ug.Int64,rx.Uint8=ug.Uint8,rx.Uint16=ug.Uint16,rx.Uint32=ug.Uint32,rx.Uint64=ug.Uint64,rx.Float=ug.Float,rx.Float16=ug.Float16,rx.Float32=ug.Float32,rx.Float64=ug.Float64,rx.Utf8=ug.Utf8,rx.Binary=ug.Binary,rx.FixedSizeBinary=ug.FixedSizeBinary,rx.Date_=ug.Date_,rx.DateDay=ug.DateDay,rx.DateMillisecond=ug.DateMillisecond,rx.Timestamp=ug.Timestamp,rx.TimestampSecond=ug.TimestampSecond,rx.TimestampMillisecond=ug.TimestampMillisecond,rx.TimestampMicrosecond=ug.TimestampMicrosecond,rx.TimestampNanosecond=ug.TimestampNanosecond,rx.Time=ug.Time,rx.TimeSecond=ug.TimeSecond,rx.TimeMillisecond=ug.TimeMillisecond,rx.TimeMicrosecond=ug.TimeMicrosecond,rx.TimeNanosecond=ug.TimeNanosecond,rx.Decimal=ug.Decimal,rx.List=ug.List,rx.Struct=ug.Struct,rx.Union=ug.Union,rx.DenseUnion=ug.DenseUnion,rx.SparseUnion=ug.SparseUnion,rx.Dictionary=ug.Dictionary,rx.Interval=ug.Interval,rx.IntervalDayTime=ug.IntervalDayTime,rx.IntervalYearMonth=ug.IntervalYearMonth,rx.FixedSizeList=ug.FixedSizeList,rx.Map_=ug.Map_,rx.Table=ug.Table,rx.Column=ug.Column,rx.Schema=ug.Schema,rx.Field=ug.Field,rx.Visitor=ug.Visitor,rx.Vector=ug.Vector,rx.BaseVector=ug.BaseVector,rx.BinaryVector=ug.BinaryVector,rx.BoolVector=ug.BoolVector,rx.Chunked=ug.Chunked,rx.DateVector=ug.DateVector,rx.DateDayVector=ug.DateDayVector,rx.DateMillisecondVector=ug.DateMillisecondVector,rx.DecimalVector=ug.DecimalVector,rx.DictionaryVector=ug.DictionaryVector,rx.FixedSizeBinaryVector=ug.FixedSizeBinaryVector,rx.FixedSizeListVector=ug.FixedSizeListVector,rx.FloatVector=ug.FloatVector,rx.Float16Vector=ug.Float16Vector,rx.Float32Vector=ug.Float32Vector,rx.Float64Vector=ug.Float64Vector,rx.IntervalVector=ug.IntervalVector,rx.IntervalDayTimeVector=ug.IntervalDayTimeVector,rx.IntervalYearMonthVector=ug.IntervalYearMonthVector,rx.IntVector=ug.IntVector,rx.Int8Vector=ug.Int8Vector,rx.Int16Vector=ug.Int16Vector,rx.Int32Vector=ug.Int32Vector,rx.Int64Vector=ug.Int64Vector,rx.Uint8Vector=ug.Uint8Vector,rx.Uint16Vector=ug.Uint16Vector,rx.Uint32Vector=ug.Uint32Vector,rx.Uint64Vector=ug.Uint64Vector,rx.ListVector=ug.ListVector,rx.MapVector=ug.MapVector,rx.NullVector=ug.NullVector,rx.StructVector=ug.StructVector,rx.TimestampVector=ug.TimestampVector,rx.TimestampSecondVector=ug.TimestampSecondVector,rx.TimestampMillisecondVector=ug.TimestampMillisecondVector,rx.TimestampMicrosecondVector=ug.TimestampMicrosecondVector,rx.TimestampNanosecondVector=ug.TimestampNanosecondVector,rx.TimeVector=ug.TimeVector,rx.TimeSecondVector=ug.TimeSecondVector,rx.TimeMillisecondVector=ug.TimeMillisecondVector,rx.TimeMicrosecondVector=ug.TimeMicrosecondVector,rx.TimeNanosecondVector=ug.TimeNanosecondVector,rx.UnionVector=ug.UnionVector,rx.DenseUnionVector=ug.DenseUnionVector,rx.SparseUnionVector=ug.SparseUnionVector,rx.Utf8Vector=ug.Utf8Vector,rx.ByteStream=ug.ByteStream,rx.AsyncByteStream=ug.AsyncByteStream,rx.AsyncByteQueue=ug.AsyncByteQueue,rx.RecordBatchReader=ug.RecordBatchReader,rx.RecordBatchFileReader=ug.RecordBatchFileReader,rx.RecordBatchStreamReader=ug.RecordBatchStreamReader,rx.AsyncRecordBatchFileReader=ug.AsyncRecordBatchFileReader,rx.AsyncRecordBatchStreamReader=ug.AsyncRecordBatchStreamReader,rx.RecordBatchWriter=ug.RecordBatchWriter,rx.RecordBatchFileWriter=ug.RecordBatchFileWriter,rx.RecordBatchStreamWriter=ug.RecordBatchStreamWriter,rx.RecordBatchJSONWriter=ug.RecordBatchJSONWriter,rx.MessageReader=ug.MessageReader,rx.AsyncMessageReader=ug.AsyncMessageReader,rx.JSONMessageReader=ug.JSONMessageReader,rx.Message=ug.Message,rx.RecordBatch=ug.RecordBatch,rx.DataFrame=ug.DataFrame,rx.FilteredDataFrame=ug.FilteredDataFrame,rx.CountByResult=ug.CountByResult,rx.predicate=ug.predicate,rx.util=ug.util,rx.Builder=ug.Builder,rx.BinaryBuilder=ug.BinaryBuilder,rx.BoolBuilder=ug.BoolBuilder,rx.DateBuilder=ug.DateBuilder,rx.DateDayBuilder=ug.DateDayBuilder,rx.DateMillisecondBuilder=ug.DateMillisecondBuilder,rx.DecimalBuilder=ug.DecimalBuilder,rx.DictionaryBuilder=ug.DictionaryBuilder,rx.FixedSizeBinaryBuilder=ug.FixedSizeBinaryBuilder,rx.FixedSizeListBuilder=ug.FixedSizeListBuilder,rx.FloatBuilder=ug.FloatBuilder,rx.Float16Builder=ug.Float16Builder,rx.Float32Builder=ug.Float32Builder,rx.Float64Builder=ug.Float64Builder,rx.IntervalBuilder=ug.IntervalBuilder,rx.IntervalDayTimeBuilder=ug.IntervalDayTimeBuilder,rx.IntervalYearMonthBuilder=ug.IntervalYearMonthBuilder,rx.IntBuilder=ug.IntBuilder,rx.Int8Builder=ug.Int8Builder,rx.Int16Builder=ug.Int16Builder,rx.Int32Builder=ug.Int32Builder,rx.Int64Builder=ug.Int64Builder,rx.Uint8Builder=ug.Uint8Builder,rx.Uint16Builder=ug.Uint16Builder,rx.Uint32Builder=ug.Uint32Builder,rx.Uint64Builder=ug.Uint64Builder,rx.ListBuilder=ug.ListBuilder,rx.MapBuilder=ug.MapBuilder,rx.NullBuilder=ug.NullBuilder,rx.StructBuilder=ug.StructBuilder,rx.TimestampBuilder=ug.TimestampBuilder,rx.TimestampSecondBuilder=ug.TimestampSecondBuilder,rx.TimestampMillisecondBuilder=ug.TimestampMillisecondBuilder,rx.TimestampMicrosecondBuilder=ug.TimestampMicrosecondBuilder,rx.TimestampNanosecondBuilder=ug.TimestampNanosecondBuilder,rx.TimeBuilder=ug.TimeBuilder,rx.TimeSecondBuilder=ug.TimeSecondBuilder,rx.TimeMillisecondBuilder=ug.TimeMillisecondBuilder,rx.TimeMicrosecondBuilder=ug.TimeMicrosecondBuilder,rx.TimeNanosecondBuilder=ug.TimeNanosecondBuilder,rx.UnionBuilder=ug.UnionBuilder,rx.DenseUnionBuilder=ug.DenseUnionBuilder,rx.SparseUnionBuilder=ug.SparseUnionBuilder,rx.Utf8Builder=ug.Utf8Builder;var uB=function(){function r(r,n,i,a){var o=this;this.getCell=function(r,n){var i=r<o.headerRows&&n<o.headerColumns,a=r>=o.headerRows&&n<o.headerColumns,s=r<o.headerRows&&n>=o.headerColumns;if(i){var l=["blank"];return n>0&&l.push("level"+r),{type:"blank",classNames:l.join(" "),content:""}}if(s){var c=n-o.headerColumns,l=["col_heading","level"+r,"col"+c];return{type:"columns",classNames:l.join(" "),content:o.getContent(o.columnsTable,c,r)}}if(a){var u=r-o.headerRows,l=["row_heading","level"+n,"row"+u];return{type:"index",id:"T_"+o.uuid+"level"+n+"_row"+u,classNames:l.join(" "),content:o.getContent(o.indexTable,u,n)}}var u=r-o.headerRows,c=n-o.headerColumns,l=["data","row"+u,"col"+c],f=o.styler?o.getContent(o.styler.displayValuesTable,u,c):o.getContent(o.dataTable,u,c);return{type:"data",id:"T_"+o.uuid+"row"+u+"_col"+c,classNames:l.join(" "),content:f}},this.getContent=function(r,n,i){var a=r.getColumnAt(i);return null===a?"":o.getColumnTypeId(r,i)===rx.Type.Timestamp?o.nanosToDate(a.get(n)):a.get(n)},this.dataTable=(0,rx.Table).from(r),this.indexTable=(0,rx.Table).from(n),this.columnsTable=(0,rx.Table).from(i),this.styler=a?{caption:a.caption,displayValuesTable:(0,rx.Table).from(a.displayValues),styles:a.styles,uuid:a.uuid}:void 0}return Object.defineProperty(r.prototype,"rows",{get:function(){return this.indexTable.length+this.columnsTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataRows",{get:function(){return this.dataTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"table",{get:function(){return this.dataTable},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this.indexTable},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!0,configurable:!0}),r.prototype.serialize=function(){return{data:this.dataTable.serialize(),index:this.indexTable.serialize(),columns:this.columnsTable.serialize()}},r.prototype.getColumnTypeId=function(r,n){return r.schema.fields[n].type.typeId},r.prototype.nanosToDate=function(r){return new Date(r/1e6)},r}(),uR=function(){return(uR=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++)for(var o in n=arguments[i])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)};(e0=e5||(e5={})).COMPONENT_READY="streamlit:componentReady",e0.SET_COMPONENT_VALUE="streamlit:setComponentValue",e0.SET_FRAME_HEIGHT="streamlit:setFrameHeight";var uz=function(){function r(){}return r.API_VERSION=1,r.RENDER_EVENT="streamlit:render",r.events=new ra.EventTarget,r.registeredMessageListener=!1,r.setComponentReady=function(){r.registeredMessageListener||(window.addEventListener("message",r.onMessageEvent),r.registeredMessageListener=!0),r.sendBackMsg(e5.COMPONENT_READY,{apiVersion:r.API_VERSION})},r.setFrameHeight=function(n){void 0===n&&(n=document.body.scrollHeight),n!==r.lastFrameHeight&&(r.lastFrameHeight=n,r.sendBackMsg(e5.SET_FRAME_HEIGHT,{height:n}))},r.setComponentValue=function(n){var i;n instanceof uB?(i="dataframe",n=n.serialize()):function(r){var n=!1;try{n=r instanceof BigInt64Array||r instanceof BigUint64Array}catch(r){}return r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array||n}(n)?(i="bytes",n=new Uint8Array(n.buffer)):n instanceof ArrayBuffer?(i="bytes",n=new Uint8Array(n)):i="json",r.sendBackMsg(e5.SET_COMPONENT_VALUE,{value:n,dataType:i})},r.onMessageEvent=function(n){n.data.type===r.RENDER_EVENT&&r.onRenderMessage(n.data)},r.onRenderMessage=function(n){var i=n.args;null==i&&(console.error("Got null args in onRenderMessage. This should never happen"),i={});var a=n.dfs&&n.dfs.length>0?r.argsDataframeToObject(n.dfs):{};i=uR(uR({},i),a);var o=!!n.disabled,s=n.theme;s&&uF(s);var l={disabled:o,args:i,theme:s},c=new CustomEvent(r.RENDER_EVENT,{detail:l});r.events.dispatchEvent(c)},r.argsDataframeToObject=function(n){return Object.fromEntries(n.map(function(n){var i=n.key,a=n.value;return[i,r.toArrowTable(a)]}))},r.toArrowTable=function(r){var n=r.data;return new uB(n.data,n.index,n.columns,n.styler)},r.sendBackMsg=function(r,n){window.parent.postMessage(uR({isStreamlitMessage:!0,type:r},n),"*")},r}(),uF=function(r){var n=document.createElement("style");document.head.appendChild(n),n.innerHTML="\n    :root {\n      --primary-color: "+r.primaryColor+";\n      --background-color: "+r.backgroundColor+";\n      --secondary-background-color: "+r.secondaryBackgroundColor+";\n      --text-color: "+r.textColor+";\n      --font: "+r.font+";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  "},uN=(e1=function(r,n){return(e1=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)},function(r,n){function i(){this.constructor=r}e1(r,n),r.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});!function(r){function n(){return null!==r&&r.apply(this,arguments)||this}uN(n,r),n.prototype.componentDidMount=function(){uz.setFrameHeight()},n.prototype.componentDidUpdate=function(){uz.setFrameHeight()}}(o(ri).PureComponent);var uU={};self,uU=function(){var r={79288:function(r,n,i){var a=i(3400),o={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in o){var l=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(l,o[s])}},86712:function(r,n,i){r.exports=i(84224)},37240:function(r,n,i){r.exports=i(51132)},29744:function(r,n,i){r.exports=i(94456)},29352:function(r,n,i){r.exports=i(67244)},96144:function(r,n,i){r.exports=i(97776)},53219:function(r,n,i){r.exports=i(61712)},4624:function(r,n,i){r.exports=i(95856)},54543:function(r,n,i){r.exports=i(54272)},45e3:function(r,n,i){r.exports=i(85404)},62300:function(r,n,i){r.exports=i(26048)},6920:function(r,n,i){r.exports=i(66240)},10264:function(r,n,i){r.exports=i(40448)},32016:function(r,n,i){r.exports=i(64884)},27528:function(r,n,i){r.exports=i(15088)},75556:function(r,n,i){r.exports=i(76744)},39204:function(r,n,i){r.exports=i(94704)},73996:function(r,n,i){r.exports=i(62396)},16489:function(r,n,i){r.exports=i(32028)},5e3:function(r,n,i){r.exports=i(81932)},77280:function(r,n,i){r.exports=i(45536)},33992:function(r,n,i){r.exports=i(42600)},17600:function(r,n,i){r.exports=i(21536)},49116:function(r,n,i){r.exports=i(65664)},46808:function(r,n,i){r.exports=i(29044)},36168:function(r,n,i){r.exports=i(48928)},13792:function(r,n,i){var a=i(32016);a.register([i(37240),i(29352),i(5e3),i(33992),i(17600),i(49116),i(6920),i(67484),i(79440),i(39204),i(83096),i(36168),i(20260),i(63560),i(65832),i(46808),i(73996),i(48824),i(89904),i(25120),i(13752),i(4340),i(62300),i(29800),i(8363),i(54543),i(86636),i(42192),i(32140),i(77280),i(89296),i(56816),i(70192),i(45e3),i(27528),i(84764),i(3920),i(50248),i(4624),i(69967),i(10264),i(86152),i(53219),i(81604),i(63796),i(29744),i(89336),i(86712),i(75556),i(16489),i(97312),i(96144)]),r.exports=a},3920:function(r,n,i){r.exports=i(43480)},25120:function(r,n,i){r.exports=i(6296)},4340:function(r,n,i){r.exports=i(7404)},86152:function(r,n,i){r.exports=i(65456)},56816:function(r,n,i){r.exports=i(22020)},89296:function(r,n,i){r.exports=i(29928)},20260:function(r,n,i){r.exports=i(75792)},32140:function(r,n,i){r.exports=i(156)},84764:function(r,n,i){r.exports=i(45499)},48824:function(r,n,i){r.exports=i(3296)},69967:function(r,n,i){r.exports=i(4184)},8363:function(r,n,i){r.exports=i(36952)},86636:function(r,n,i){r.exports=i(38983)},70192:function(r,n,i){r.exports=i(11572)},81604:function(r,n,i){r.exports=i(76924)},63796:function(r,n,i){r.exports=i(62944)},89336:function(r,n,i){r.exports=i(95443)},67484:function(r,n,i){r.exports=i(34864)},97312:function(r,n,i){r.exports=i(76272)},42192:function(r,n,i){r.exports=i(97924)},29800:function(r,n,i){r.exports=i(15436)},63560:function(r,n,i){r.exports=i(5621)},89904:function(r,n,i){r.exports=i(91304)},50248:function(r,n,i){r.exports=i(41724)},65832:function(r,n,i){r.exports=i(31991)},79440:function(r,n,i){r.exports=i(22869)},13752:function(r,n,i){r.exports=i(67776)},83096:function(r,n,i){r.exports=i(95952)},72196:function(r){r.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(r,n,i){var a=i(72196),o=i(25376),s=i(33816),l=i(31780).templatedArray;i(36208),r.exports=l("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:o({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(r,n,i){var a=i(3400),o=i(54460),s=i(23816).draw;function l(r){var n=r._fullLayout;a.filterVisible(n.annotations).forEach(function(n){var i=o.getFromId(r,n.xref),a=o.getFromId(r,n.yref),s=o.getRefType(n.xref),l=o.getRefType(n.yref);n._extremes={},"range"===s&&c(n,i),"range"===l&&c(n,a)})}function c(r,n){var i,a=n._id,s=a.charAt(0),l=r[s],c=r["a"+s],u=r[s+"ref"],f=r["a"+s+"ref"],h=r["_"+s+"padplus"],p=r["_"+s+"padminus"],d={x:1,y:-1}[s]*r[s+"shift"],y=3*r.arrowsize*r.arrowwidth||0,g=y+d,v=y-d,m=3*r.startarrowsize*r.arrowwidth||0,x=m+d,b=m-d;if(f===u){var _=o.findExtremes(n,[n.r2c(l)],{ppadplus:g,ppadminus:v}),w=o.findExtremes(n,[n.r2c(c)],{ppadplus:Math.max(h,x),ppadminus:Math.max(p,b)});i={min:[_.min[0],w.min[0]],max:[_.max[0],w.max[0]]}}else x=c?x+c:x,b=c?b-c:b,i=o.findExtremes(n,[n.r2c(l)],{ppadplus:Math.max(h,g,x),ppadminus:Math.max(p,v,b)});r._extremes[a]=i}r.exports=function(r){var n=r._fullLayout;if(a.filterVisible(n.annotations).length&&r._fullData.length)return a.syncOrAsync([s,l],r)}},42300:function(r,n,i){var a=i(3400),o=i(24040),s=i(31780).arrayEditor;function l(r,n){var i,a,o,s,l,u,f,h=r._fullLayout.annotations,p=[],d=[],y=[],g=(n||[]).length;for(i=0;i<h.length;i++)if(s=(o=h[i]).clicktoshow){for(a=0;a<g;a++)if(u=(l=n[a]).xaxis,f=l.yaxis,u._id===o.xref&&f._id===o.yref&&u.d2r(l.x)===c(o._xclick,u)&&f.d2r(l.y)===c(o._yclick,f)){(o.visible?"onout"===s?d:y:p).push(i);break}a===g&&o.visible&&"onout"===s&&d.push(i)}return{on:p,off:d,explicitOff:y}}function c(r,n){return"log"===n.type?n.l2r(r):n.d2r(r)}r.exports={hasClickToShow:function(r,n){var i=l(r,n);return i.on.length>0||i.explicitOff.length>0},onClick:function(r,n){var i,c,u=l(r,n),f=u.on,h=u.off.concat(u.explicitOff),p={},d=r._fullLayout.annotations;if(f.length||h.length){for(i=0;i<f.length;i++)(c=s(r.layout,"annotations",d[f[i]])).modifyItem("visible",!0),a.extendFlat(p,c.getUpdateObj());for(i=0;i<h.length;i++)(c=s(r.layout,"annotations",d[h[i]])).modifyItem("visible",!1),a.extendFlat(p,c.getUpdateObj());return o.call("update",r,{},p)}}}},87192:function(r,n,i){var a=i(3400),o=i(76308);r.exports=function(r,n,i,s){s("opacity");var l=s("bgcolor"),c=s("bordercolor"),u=o.opacity(c);s("borderpad");var f=s("borderwidth"),h=s("showarrow");if(s("text",h?" ":i._dfltTitle.annotation),s("textangle"),a.coerceFont(s,"font",i.font),s("width"),s("align"),s("height")&&s("valign"),h){var p,d,y=s("arrowside");-1!==y.indexOf("end")&&(p=s("arrowhead"),d=s("arrowsize")),-1!==y.indexOf("start")&&(s("startarrowhead",p),s("startarrowsize",d)),s("arrowcolor",u?n.bordercolor:o.defaultLine),s("arrowwidth",2*(u&&f||1)),s("standoff"),s("startstandoff")}var g=s("hovertext"),v=i.hoverlabel||{};if(g){var m=s("hoverlabel.bgcolor",v.bgcolor||(o.opacity(l)?o.rgb(l):o.defaultLine)),x=s("hoverlabel.bordercolor",v.bordercolor||o.contrast(m)),b=a.extendFlat({},v.font);b.color||(b.color=x),a.coerceFont(s,"hoverlabel.font",b)}s("captureevents",!!g)}},26828:function(r,n,i){var a=i(38248),o=i(36896);r.exports=function(r,n,i,s){n=n||{};var l="log"===i&&"linear"===n.type,c="linear"===i&&"log"===n.type;if(l||c)for(var u,f,h=r._fullLayout.annotations,p=n._id.charAt(0),d=0;d<h.length;d++)u=h[d],f="annotations["+d+"].",u[p+"ref"]===n._id&&y(p),u["a"+p+"ref"]===n._id&&y("a"+p);function y(r){var i=u[r],c=null;a(c=l?o(i,n.range):Math.pow(10,i))||(c=null),s(f+r,c)}}},45216:function(r,n,i){var a=i(3400),o=i(54460),s=i(51272),l=i(87192),c=i(13916);function u(r,n,i){function s(i,o){return a.coerce(r,n,c,i,o)}var u=s("visible"),f=s("clicktoshow");if(u||f){l(r,n,i,s);for(var h=n.showarrow,p=["x","y"],d=[-10,-30],y={_fullLayout:i},g=0;g<2;g++){var v=p[g],m=o.coerceRef(r,n,y,v,"","paper");if("paper"!==m&&o.getFromId(y,m)._annIndices.push(n._index),o.coercePosition(n,y,s,m,v,.5),h){var x="a"+v,b=o.coerceRef(r,n,y,x,"pixel",["pixel","paper"]);"pixel"!==b&&b!==m&&(b=n[x]="pixel");var _="pixel"===b?d[g]:.4;o.coercePosition(n,y,s,b,x,_)}s(v+"anchor"),s(v+"shift")}if(a.noneOrAll(r,n,["x","y"]),h&&a.noneOrAll(r,n,["ax","ay"]),f){var w=s("xclick"),T=s("yclick");n._xclick=void 0===w?n.x:o.cleanPosition(w,y,n.xref),n._yclick=void 0===T?n.y:o.cleanPosition(T,y,n.yref)}}}r.exports=function(r,n){s(r,n,{name:"annotations",handleItemDefaults:u})}},23816:function(r,n,i){var a=i(33428),o=i(24040),s=i(7316),l=i(3400),c=l.strTranslate,u=i(54460),f=i(76308),h=i(43616),p=i(93024),d=i(72736),y=i(93972),g=i(86476),v=i(31780).arrayEditor,m=i(33652);function x(r,n){var i=r._fullLayout.annotations[n]||{},a=u.getFromId(r,i.xref),o=u.getFromId(r,i.yref);a&&a.setScale(),o&&o.setScale(),_(r,i,n,!1,a,o)}function b(r,n,i,a,o){var s=o[i],l=o[i+"ref"],c=-1!==i.indexOf("y"),f="domain"===u.getRefType(l),h=c?a.h:a.w;return r?f?s+(c?-n:n)/r._length:r.p2r(r.r2p(s)+n):s+(c?-n:n)/h}function _(r,n,i,s,x,_){var w,T,A=r._fullLayout,k=r._fullLayout._size,M=r._context.edits;s?(w="annotation-"+s,T=s+".annotations"):(w="annotation",T="annotations");var S=v(r.layout,T,n),E=S.modifyBase,I=S.modifyItem,L=S.getUpdateObj;A._infolayer.selectAll("."+w+'[data-index="'+i+'"]').remove();var C="clip"+A._uid+"_ann"+i;if(n._input&&!1!==n.visible){var O={x:{},y:{}},D=+n.textangle||0,P=A._infolayer.append("g").classed(w,!0).attr("data-index",String(i)).style("opacity",n.opacity),B=P.append("g").classed("annotation-text-g",!0),R=M[n.showarrow?"annotationTail":"annotationPosition"],z=n.captureevents||M.annotationText||R,F=B.append("g").style("pointer-events",z?"all":null).call(y,"pointer").on("click",function(){r._dragging=!1,r.emit("plotly_clickannotation",Z(a.event))});n.hovertext&&F.on("mouseover",function(){var i=n.hoverlabel,a=i.font,o=this.getBoundingClientRect(),s=r.getBoundingClientRect();p.loneHover({x0:o.left-s.left,x1:o.right-s.left,y:(o.top+o.bottom)/2-s.top,text:n.hovertext,color:i.bgcolor,borderColor:i.bordercolor,fontFamily:a.family,fontSize:a.size,fontColor:a.color,fontWeight:a.weight,fontStyle:a.style,fontVariant:a.variant,fontShadow:a.fontShadow,fontLineposition:a.fontLineposition,fontTextcase:a.fontTextcase},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:r})}).on("mouseout",function(){p.loneUnhover(A._hoverlayer.node())});var N=n.borderwidth,U=n.borderpad,j=N+U,V=F.append("rect").attr("class","bg").style("stroke-width",N+"px").call(f.stroke,n.bordercolor).call(f.fill,n.bgcolor),H=n.width||n.height,q=A._topclips.selectAll("#"+C).data(H?[0]:[]);q.enter().append("clipPath").classed("annclip",!0).attr("id",C).append("rect"),q.exit().remove();var G=n.font,W=A._meta?l.templateString(n.text,A._meta):n.text,Y=F.append("text").classed("annotation-text",!0).text(W);M.annotationText?Y.call(d.makeEditable,{delegate:F,gd:r}).call(X).on("edit",function(i){n.text=i,this.call(X),I("text",i),x&&x.autorange&&E(x._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0),o.call("_guiRelayout",r,L())}):Y.call(X)}else a.selectAll("#"+C).remove();function Z(r){var a={index:i,annotation:n._input,fullAnnotation:n,event:r};return s&&(a.subplotId=s),a}function X(i){return i.call(h.font,G).attr({"text-anchor":{left:"start",right:"end"}[n.align]||"middle"}),d.convertToTspans(i,r,K),i}function K(){var i=Y.selectAll("a");1===i.size()&&i.text()===Y.text()&&F.insert("a",":first-child").attr({"xlink:xlink:href":i.attr("xlink:href"),"xlink:xlink:show":i.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(V.node());var a=F.select(".annotation-text-math-group"),p=!a.empty(),v=h.bBox((p?a:Y).node()),w=v.width,T=v.height,S=n.width||w,z=n.height||T,U=Math.round(S+2*j),G=Math.round(z+2*j);function W(r,n){return"auto"===n&&(n=r<1/3?"left":r>2/3?"right":"center"),({center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5})[n]}for(var X=!1,K=["x","y"],J=0;J<K.length;J++){var $,Q,tt,te,tr,tn=K[J],ti=n[tn+"ref"]||tn,ta=n["a"+tn+"ref"],to={x:x,y:_}[tn],ts=(D+("x"===tn?0:-90))*Math.PI/180,tl=U*Math.cos(ts),tc=G*Math.sin(ts),tu=Math.abs(tl)+Math.abs(tc),tf=n[tn+"anchor"],th=n[tn+"shift"]*("x"===tn?1:-1),tp=O[tn],td=u.getRefType(ti);if(to&&"domain"!==td){var ty=to.r2fraction(n[tn]);(ty<0||ty>1)&&(ta===ti?((ty=to.r2fraction(n["a"+tn]))<0||ty>1)&&(X=!0):X=!0),$=to._offset+to.r2p(n[tn]),te=.5}else{var tg="domain"===td;"x"===tn?(tt=n[tn],$=tg?to._offset+to._length*tt:$=k.l+k.w*tt):(tt=1-n[tn],$=tg?to._offset+to._length*tt:$=k.t+k.h*tt),te=n.showarrow?.5:tt}if(n.showarrow){tp.head=$;var tv=n["a"+tn];if(tr=tl*W(.5,n.xanchor)-tc*W(.5,n.yanchor),ta===ti){var tm=u.getRefType(ta);"domain"===tm?("y"===tn&&(tv=1-tv),tp.tail=to._offset+to._length*tv):"paper"===tm?"y"===tn?(tv=1-tv,tp.tail=k.t+k.h*tv):tp.tail=k.l+k.w*tv:tp.tail=to._offset+to.r2p(tv),Q=tr}else tp.tail=$+tv,Q=tr+tv;tp.text=tp.tail+tr;var tx=A["x"===tn?"width":"height"];if("paper"===ti&&(tp.head=l.constrain(tp.head,1,tx-1)),"pixel"===ta){var tb=-Math.max(tp.tail-3,tp.text),t_=Math.min(tp.tail+3,tp.text)-tx;tb>0?(tp.tail+=tb,tp.text+=tb):t_>0&&(tp.tail-=t_,tp.text-=t_)}tp.tail+=th,tp.head+=th}else Q=tr=tu*W(te,tf),tp.text=$+tr;tp.text+=th,tr+=th,Q+=th,n["_"+tn+"padplus"]=tu/2+Q,n["_"+tn+"padminus"]=tu/2-Q,n["_"+tn+"size"]=tu,n["_"+tn+"shift"]=tr}if(X)F.remove();else{var tw=0,tT=0;if("left"!==n.align&&(tw=(S-w)*("center"===n.align?.5:1)),"top"!==n.valign&&(tT=(z-T)*("middle"===n.valign?.5:1)),p)a.select("svg").attr({x:j+tw-1,y:j+tT}).call(h.setClipUrl,H?C:null,r);else{var tA=j+tT-v.top,tk=j+tw-v.left;Y.call(d.positionText,tk,tA).call(h.setClipUrl,H?C:null,r)}q.select("rect").call(h.setRect,j,j,S,z),V.call(h.setRect,N/2,N/2,U-N,G-N),F.call(h.setTranslate,Math.round(O.x.text-U/2),Math.round(O.y.text-G/2)),B.attr({transform:"rotate("+D+","+O.x.text+","+O.y.text+")"});var tM,tS=function(i,a){P.selectAll(".annotation-arrow-g").remove();var u=O.x.head,p=O.y.head,d=O.x.tail+i,y=O.y.tail+a,v=O.x.text+i,w=O.y.text+a,T=l.rotationXYMatrix(D,v,w),A=l.apply2DTransform(T),S=l.apply2DTransform2(T),C=+V.attr("width"),R=+V.attr("height"),z=v-.5*C,N=z+C,U=w-.5*R,j=U+R,H=[[z,U,z,j],[z,j,N,j],[N,j,N,U],[N,U,z,U]].map(S);if(!H.reduce(function(r,n){return!!l.segmentsIntersect(u,p,u+1e6,p+1e6,n[0],n[1],n[2],n[3])^r},!1)){H.forEach(function(r){var n=l.segmentsIntersect(d,y,u,p,r[0],r[1],r[2],r[3]);n&&(d=n.x,y=n.y)});var q=n.arrowwidth,G=n.arrowcolor,W=n.arrowside,Y=P.append("g").style({opacity:f.opacity(G)}).classed("annotation-arrow-g",!0),Z=Y.append("path").attr("d","M"+d+","+y+"L"+u+","+p).style("stroke-width",q+"px").call(f.stroke,f.rgb(G));if(m(Z,W,n),M.annotationPosition&&Z.node().parentNode&&!s){var X=u,K=p;if(n.standoff){var J=Math.sqrt(Math.pow(u-d,2)+Math.pow(p-y,2));X+=n.standoff*(d-u)/J,K+=n.standoff*(y-p)/J}var $,Q,tt=Y.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-X)+","+(y-K),transform:c(X,K)}).style("stroke-width",q+6+"px").call(f.stroke,"rgba(0,0,0,0)").call(f.fill,"rgba(0,0,0,0)");g.init({element:tt.node(),gd:r,prepFn:function(){var r=h.getTranslate(F);$=r.x,Q=r.y,x&&x.autorange&&E(x._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0)},moveFn:function(r,i){var a=A($,Q),o=a[0]+r,s=a[1]+i;F.call(h.setTranslate,o,s),I("x",b(x,r,"x",k,n)),I("y",b(_,i,"y",k,n)),n.axref===n.xref&&I("ax",b(x,r,"ax",k,n)),n.ayref===n.yref&&I("ay",b(_,i,"ay",k,n)),Y.attr("transform",c(r,i)),B.attr({transform:"rotate("+D+","+o+","+s+")"})},doneFn:function(){o.call("_guiRelayout",r,L());var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}})}}};n.showarrow&&tS(0,0),R&&g.init({element:F.node(),gd:r,prepFn:function(){tM=B.attr("transform")},moveFn:function(r,i){var a="pointer";if(n.showarrow)n.axref===n.xref?I("ax",b(x,r,"ax",k,n)):I("ax",n.ax+r),n.ayref===n.yref?I("ay",b(_,i,"ay",k.w,n)):I("ay",n.ay+i),tS(r,i);else{if(s)return;if(x)o=b(x,r,"x",k,n);else{var o,l,u=n._xsize/k.w,f=n.x+(n._xshift-n.xshift)/k.w-u/2;o=g.align(f+r/k.w,u,0,1,n.xanchor)}if(_)l=b(_,i,"y",k,n);else{var h=n._ysize/k.h,p=n.y-(n._yshift+n.yshift)/k.h-h/2;l=g.align(p-i/k.h,h,0,1,n.yanchor)}I("x",o),I("y",l),x&&_||(a=g.getCursor(x?.5:o,_?.5:l,n.xanchor,n.yanchor))}B.attr({transform:c(r,i)+tM}),y(F,a)},clickFn:function(i,a){n.captureevents&&r.emit("plotly_clickannotation",Z(a))},doneFn:function(){y(F),o.call("_guiRelayout",r,L());var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}})}}}r.exports={draw:function(r){var n=r._fullLayout;n._infolayer.selectAll(".annotation").remove();for(var i=0;i<n.annotations.length;i++)n.annotations[i].visible&&x(r,i);return s.previousPromises(r)},drawOne:x,drawRaw:_}},33652:function(r,n,i){var a=i(33428),o=i(76308),s=i(72196),l=i(3400),c=l.strScale,u=l.strRotate,f=l.strTranslate;r.exports=function(r,n,i){var l,h,p,d,y=r.node(),g=s[i.arrowhead||0],v=s[i.startarrowhead||0],m=(i.arrowwidth||1)*(i.arrowsize||1),x=(i.arrowwidth||1)*(i.startarrowsize||1),b=n.indexOf("start")>=0,_=n.indexOf("end")>=0,w=g.backoff*m+i.standoff,T=v.backoff*x+i.startstandoff;if("line"===y.nodeName){l={x:+r.attr("x1"),y:+r.attr("y1")},h={x:+r.attr("x2"),y:+r.attr("y2")};var A=l.x-h.x,k=l.y-h.y;if(d=(p=Math.atan2(k,A))+Math.PI,w&&T&&w+T>Math.sqrt(A*A+k*k))return void R();if(w){if(w*w>A*A+k*k)return void R();var M=w*Math.cos(p),S=w*Math.sin(p);h.x+=M,h.y+=S,r.attr({x2:h.x,y2:h.y})}if(T){if(T*T>A*A+k*k)return void R();var E=T*Math.cos(p),I=T*Math.sin(p);l.x-=E,l.y-=I,r.attr({x1:l.x,y1:l.y})}}else if("path"===y.nodeName){var L=y.getTotalLength(),C="";if(L<w+T)return void R();var O=y.getPointAtLength(0),D=y.getPointAtLength(.1);p=Math.atan2(O.y-D.y,O.x-D.x),l=y.getPointAtLength(Math.min(T,L)),C="0px,"+T+"px,";var P=y.getPointAtLength(L),B=y.getPointAtLength(L-.1);d=Math.atan2(P.y-B.y,P.x-B.x),h=y.getPointAtLength(Math.max(0,L-w)),C+=L-(C?T+w:w)+"px,"+L+"px",r.style("stroke-dasharray",C)}function R(){r.style("stroke-dasharray","0px,100px")}function z(n,s,l,h){n.path&&(n.noRotate&&(l=0),a.select(y.parentNode).append("path").attr({class:r.attr("class"),d:n.path,transform:f(s.x,s.y)+u(180*l/Math.PI)+c(h)}).style({fill:o.rgb(i.arrowcolor),"stroke-width":0}))}b&&z(v,l,p,x),_&&z(g,h,d,m)}},79180:function(r,n,i){var a=i(23816),o=i(42300);r.exports={moduleType:"component",name:"annotations",layoutAttributes:i(13916),supplyLayoutDefaults:i(45216),includeBasePlot:i(36632)("annotations"),calcAutorange:i(90272),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:o.hasClickToShow,onClick:o.onClick,convertCoords:i(26828)}},45899:function(r,n,i){var a=i(13916),o=i(67824).overrideAll,s=i(31780).templatedArray;r.exports=o(s("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},42456:function(r,n,i){var a=i(3400),o=i(54460);r.exports=function(r){for(var n=r.fullSceneLayout.annotations,i=0;i<n.length;i++)!function(r,n){var i=n.fullSceneLayout.domain,s=n.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};r._xa={},a.extendFlat(r._xa,l),o.setConvert(r._xa),r._xa._offset=s.l+i.x[0]*s.w,r._xa.l2p=function(){return .5*(1+r._pdata[0]/r._pdata[3])*s.w*(i.x[1]-i.x[0])},r._ya={},a.extendFlat(r._ya,l),o.setConvert(r._ya),r._ya._offset=s.t+(1-i.y[1])*s.h,r._ya.l2p=function(){return .5*(1-r._pdata[1]/r._pdata[3])*s.h*(i.y[1]-i.y[0])}}(n[i],r);r.fullLayout._infolayer.selectAll(".annotation-"+r.id).remove()}},52808:function(r,n,i){var a=i(3400),o=i(54460),s=i(51272),l=i(87192),c=i(45899);function u(r,n,i,s){function u(i,o){return a.coerce(r,n,c,i,o)}function f(r){var a=r+"axis",s={_fullLayout:{}};return s._fullLayout[a]=i[a],o.coercePosition(n,s,u,r,r,.5)}u("visible")&&(l(r,n,s.fullLayout,u),f("x"),f("y"),f("z"),a.noneOrAll(r,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",u("ax",-10),u("ay",-30),a.noneOrAll(r,n,["ax","ay"])))}r.exports=function(r,n,i){s(r,n,{name:"annotations",handleItemDefaults:u,fullLayout:i.fullLayout})}},71836:function(r,n,i){var a=i(23816).drawRaw,o=i(94424),s=["x","y","z"];r.exports=function(r){for(var n=r.fullSceneLayout,i=r.dataScale,l=n.annotations,c=0;c<l.length;c++){for(var u=l[c],f=!1,h=0;h<3;h++){var p=s[h],d=u[p],y=n[p+"axis"].r2fraction(d);if(y<0||y>1){f=!0;break}}f?r.fullLayout._infolayer.select(".annotation-"+r.id+'[data-index="'+c+'"]').remove():(u._pdata=o(r.glplot.cameraParams,[n.xaxis.r2l(u.x)*i[0],n.yaxis.r2l(u.y)*i[1],n.zaxis.r2l(u.z)*i[2]]),a(r.graphDiv,u,c,r.id,u._xa,u._ya))}}},56864:function(r,n,i){var a=i(24040),o=i(3400);r.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:i(45899)}}},layoutAttributes:i(45899),handleDefaults:i(52808),includeBasePlot:function(r,n){var i=a.subplotsRegistry.gl3d;if(i)for(var s=i.attrRegex,l=Object.keys(r),c=0;c<l.length;c++){var u=l[c];s.test(u)&&(r[u].annotations||[]).length&&(o.pushUnique(n._basePlotModules,i),o.pushUnique(n._subplots.gl3d,u))}},convert:i(42456),draw:i(71836)}},54976:function(r,n,i){r.exports=i(38700),i(15168),i(67020),i(89792),i(55668),i(65168),i(2084),i(26368),i(24747),i(65616),i(30632),i(73040),i(1104),i(51456),i(4592),i(45348)},97776:function(r,n,i){var a=i(54976),o=i(3400),s=i(39032),l=s.EPOCHJD,c=s.ONEDAY,u={valType:"enumerated",values:o.sortObjectKeys(a.calendars),editType:"calc",dflt:"gregorian"},f=function(r,n,i,a){var s={};return s[i]=u,o.coerce(r,n,s,i,a)},h={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},p={};function d(r){return p[r]||(p[r]=a.instance(r))}function y(r){return o.extendFlat({},u,{description:r})}function g(r){return"Sets the calendar system to use with `"+r+"` date data."}var v={xcalendar:y(g("x"))},m=o.extendFlat({},v,{ycalendar:y(g("y"))}),x=o.extendFlat({},m,{zcalendar:y(g("z"))}),b=y("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");r.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:x,surface:x,mesh3d:x,scattergl:m,ohlc:v,candlestick:v},layout:{calendar:y("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:y("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),targetcalendar:y("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:u,handleDefaults:f,handleTraceDefaults:function(r,n,i,a){for(var o=0;o<i.length;o++)f(r,n,i[o]+"calendar",a.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(r,n,i){for(var a,o,s,u,f,p=Math.floor((n+.05)/c)+l,y=d(i).fromJD(p),g=0;-1!==(g=r.indexOf("%",g));)"0"===(a=r.charAt(g+1))||"-"===a||"_"===a?(s=3,o=r.charAt(g+2),"_"===a&&(a="-")):(o=a,a="0",s=2),(u=h[o])?(f="##"===u?"##":y.formatDate(u[a]),r=r.substr(0,g)+f+r.substr(g+s),g+=f.length):g+=s;return r}}},22548:function(r,n){n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},76308:function(r,n,i){var a=i(49760),o=i(38248),s=i(38116).isTypedArray,l=r.exports={},c=i(22548);l.defaults=c.defaults;var u=l.defaultLine=c.defaultLine;l.lightLine=c.lightLine;var f=l.background=c.background;function h(r){if(o(r)||"string"!=typeof r)return r;var n=r.trim();if("rgb"!==n.substr(0,3))return r;var i=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return r;var a=i[1].trim().split(/\s*[\s,]\s*/),s="a"===n.charAt(3)&&4===a.length;if(!s&&3!==a.length)return r;for(var l=0;l<a.length;l++){if(!a[l].length||(a[l]=Number(a[l]),!(a[l]>=0)))return r;if(3===l)a[l]>1&&(a[l]=1);else if(a[l]>=1)return r}var c=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return s?"rgba("+c+", "+a[3]+")":"rgb("+c+")"}l.tinyRGB=function(r){var n=r.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},l.rgb=function(r){return l.tinyRGB(a(r))},l.opacity=function(r){return r?a(r).getAlpha():0},l.addOpacity=function(r,n){var i=a(r).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+n+")"},l.combine=function(r,n){var i=a(r).toRgb();if(1===i.a)return a(r).toRgbString();var o=a(n||f).toRgb(),s=1===o.a?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a};return a({r:s.r*(1-i.a)+i.r*i.a,g:s.g*(1-i.a)+i.g*i.a,b:s.b*(1-i.a)+i.b*i.a}).toRgbString()},l.interpolate=function(r,n,i){var o=a(r).toRgb(),s=a(n).toRgb();return a({r:i*o.r+(1-i)*s.r,g:i*o.g+(1-i)*s.g,b:i*o.b+(1-i)*s.b}).toRgbString()},l.contrast=function(r,n,i){var o=a(r);return 1!==o.getAlpha()&&(o=a(l.combine(r,f))),(o.isDark()?n?o.lighten(n):f:i?o.darken(i):u).toString()},l.stroke=function(r,n){var i=a(n);r.style({stroke:l.tinyRGB(i),"stroke-opacity":i.getAlpha()})},l.fill=function(r,n){var i=a(n);r.style({fill:l.tinyRGB(i),"fill-opacity":i.getAlpha()})},l.clean=function(r){if(r&&"object"==typeof r){var n,i,a,o,c=Object.keys(r);for(n=0;n<c.length;n++)if(o=r[a=c[n]],"color"===a.substr(a.length-5)){if(Array.isArray(o))for(i=0;i<o.length;i++)o[i]=h(o[i]);else r[a]=h(o)}else if("colorscale"===a.substr(a.length-10)&&Array.isArray(o))for(i=0;i<o.length;i++)Array.isArray(o[i])&&(o[i][1]=h(o[i][1]));else if(Array.isArray(o)){var u=o[0];if(!Array.isArray(u)&&u&&"object"==typeof u)for(i=0;i<o.length;i++)l.clean(o[i])}else o&&"object"==typeof o&&!s(o)&&l.clean(o)}}},42996:function(r,n,i){var a=i(94724),o=i(25376),s=i(92880).extendFlat,l=i(67824).overrideAll;r.exports=l({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.minor.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:s({},a.ticks,{dflt:""}),ticklabeloverflow:s({},a.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,labelalias:a.labelalias,tickfont:o({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,title:{text:{valType:"string"},font:o({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:o({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(r){r.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(r,n,i){var a=i(3400),o=i(31780),s=i(26332),l=i(25404),c=i(95936),u=i(42568),f=i(42996);r.exports=function(r,n,i){var h=o.newContainer(n,"colorbar"),p=r.colorbar||{};function d(r,n){return a.coerce(p,h,f,r,n)}var y=i.margin||{t:0,b:0,l:0,r:0},g=i.width-y.l-y.r,v=i.height-y.t-y.b,m="v"===d("orientation"),x=d("thicknessmode");d("thickness","fraction"===x?30/(m?g:v):30);var b=d("lenmode");d("len","fraction"===b?1:m?v:g);var _,w,T,A="paper"===d("yref"),k="paper"===d("xref"),M="left";m?(T="middle",M=k?"left":"right",_=k?1.02:1,w=.5):(T=A?"bottom":"top",M="center",_=.5,w=A?1.02:1),a.coerce(p,h,{x:{valType:"number",min:k?-2:0,max:k?3:1,dflt:_}},"x"),a.coerce(p,h,{y:{valType:"number",min:A?-2:0,max:A?3:1,dflt:w}},"y"),d("xanchor",M),d("xpad"),d("yanchor",T),d("ypad"),a.noneOrAll(p,h,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var S=a.coerce(p,h,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==S.indexOf("inside")?"hide past domain":"hide past div"),s(p,h,d,"linear");var E=i.font,I={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:E};-1!==S.indexOf("inside")&&(I.bgColor="black"),u(p,h,d,"linear",I),c(p,h,d,"linear",I),l(p,h,d,"linear",I),d("title.text",i._dfltTitle.colorbar);var L=h.showticklabels?h.tickfont:E,C=a.extendFlat({},E,{family:L.family,size:a.bigFont(L.size)});a.coerceFont(d,"title.font",C),d("title.side",m?"top":"right")}},37848:function(r,n,i){var a=i(33428),o=i(49760),s=i(7316),l=i(24040),c=i(54460),u=i(86476),f=i(3400),h=f.strTranslate,p=i(92880).extendFlat,d=i(93972),y=i(43616),g=i(76308),v=i(81668),m=i(72736),x=i(94288).flipScale,b=i(28336),_=i(37668),w=i(94724),T=i(84284),A=T.LINE_SPACING,k=T.FROM_TL,M=T.FROM_BR,S=i(63964).cn;r.exports={draw:function(r){var n=r._fullLayout._infolayer.selectAll("g."+S.colorbar).data(function(r){var n,i,a,o,s=r._fullLayout,l=r.calcdata,c=[];function u(r){return p(r,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function f(){"function"==typeof o.calc?o.calc(r,a,n):(n._fillgradient=i.reversescale?x(i.colorscale):i.colorscale,n._zrange=[i[o.min],i[o.max]])}for(var h=0;h<l.length;h++)if((a=l[h][0].trace)._module){var d=a._module.colorbar;if(!0===a.visible&&d)for(var y=Array.isArray(d),g=y?d:[d],v=0;v<g.length;v++){var m=(o=g[v]).container;(i=m?a[m]:a)&&i.showscale&&((n=u(i.colorbar))._id="cb"+a.uid+(y&&m?"-"+m:""),n._traceIndex=a.index,n._propPrefix=(m?m+".":"")+"colorbar.",n._meta=a._meta,f(),c.push(n))}}for(var b in s._colorAxes)if((i=s[b]).showscale){var _=s._colorAxes[b];(n=u(i.colorbar))._id="cb"+b,n._propPrefix=b+".colorbar.",n._meta=s._meta,o={min:"cmin",max:"cmax"},"heatmap"!==_[0]&&(a=_[1],o.calc=a._module.colorbar.calc),f(),c.push(n)}return c}(r),function(r){return r._id});n.enter().append("g").attr("class",function(r){return r._id}).classed(S.colorbar,!0),n.each(function(n){var i,x,T,E,I,L=a.select(this);f.ensureSingle(L,"rect",S.cbbg),f.ensureSingle(L,"g",S.cbfills),f.ensureSingle(L,"g",S.cblines),f.ensureSingle(L,"g",S.cbaxis,function(r){r.classed(S.crisp,!0)}),f.ensureSingle(L,"g",S.cbtitleunshift,function(r){r.append("g").classed(S.cbtitle,!0)}),f.ensureSingle(L,"rect",S.cboutline);var C=function(r,n,i){var l="v"===n.orientation,u=n.len,d=n.lenmode,x=n.thickness,T=n.thicknessmode,E=n.outlinewidth,I=n.borderwidth,L=n.bgcolor,C=n.xanchor,O=n.yanchor,D=n.xpad,P=n.ypad,B=n.x,R=l?n.y:1-n.y,z="paper"===n.yref,F="paper"===n.xref,N=i._fullLayout,U=N._size,j=n._fillcolor,V=n._line,H=n.title,q=H.side,G=n._zrange||a.extent(("function"==typeof j?j:V.color).domain()),W="function"==typeof V.color?V.color:function(){return V.color},Y="function"==typeof j?j:function(){return j},Z=n._levels,X=function(r,n,i){var a,o,s=n._levels,l=[],c=[],u=s.end+s.size/100,f=s.size,h=1.001*i[0]-.001*i[1],p=1.001*i[1]-.001*i[0];for(o=0;o<1e5&&(a=s.start+o*f,!(f>0?a>=u:a<=u));o++)a>h&&a<p&&l.push(a);if(n._fillgradient)c=[0];else if("function"==typeof n._fillcolor){var d=n._filllevels;if(d)for(u=d.end+d.size/100,f=d.size,o=0;o<1e5&&(a=d.start+o*f,!(f>0?a>=u:a<=u));o++)a>i[0]&&a<i[1]&&c.push(a);else(c=l.map(function(r){return r-s.size/2})).push(c[c.length-1]+s.size)}else n._fillcolor&&"string"==typeof n._fillcolor&&(c=[0]);return s.size<0&&(l.reverse(),c.reverse()),{line:l,fill:c}}(0,n,G),K=X.fill,J=X.line,$=Math.round(x*("fraction"===T?l?U.w:U.h:1)),Q=$/(l?U.w:U.h),tt=Math.round(u*("fraction"===d?l?U.h:U.w:1)),te=tt/(l?U.h:U.w),tr=F?U.w:i._fullLayout.width,tn=z?U.h:i._fullLayout.height,ti=Math.round(l?B*tr+D:R*tn+P),ta={center:.5,right:1}[C]||0,to={top:1,middle:.5}[O]||0,ts=l?B-ta*Q:R-to*Q,tl=l?R-to*te:B-ta*te,tc=Math.round(l?tn*(1-tl):tr*tl);n._lenFrac=te,n._thickFrac=Q,n._uFrac=ts,n._vFrac=tl;var tu=n._axis=function(r,n,i){var a=r._fullLayout,o="v"===n.orientation,s={type:"linear",range:i,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,labelalias:n.labelalias,ticklabelposition:n.ticklabelposition,ticklabeloverflow:n.ticklabeloverflow,ticklabelstep:n.ticklabelstep,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,showline:!0,anchor:"free",side:o?"right":"bottom",position:1},l=o?"y":"x",c={type:"linear",_id:l+n._id},u={letter:l,font:a.font,noAutotickangles:"y"===l,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:a.calendar};function h(r,n){return f.coerce(s,c,w,r,n)}return b(s,c,h,u,a),_(s,c,h,u),c}(i,n,G);tu.position=Q+(l?B+D/U.w:R+P/U.h);var tf=-1!==["top","bottom"].indexOf(q);if(l&&tf&&(tu.title.side=q,tu.titlex=B+D/U.w,tu.titley=tl+("top"===H.side?te-P/U.h:P/U.h)),l||tf||(tu.title.side=q,tu.titley=R+P/U.h,tu.titlex=tl+D/U.w),V.color&&"auto"===n.tickmode){tu.tickmode="linear",tu.tick0=Z.start;var th=Z.size,tp=f.constrain(tt/50,4,15)+1,td=(G[1]-G[0])/((n.nticks||tp)*th);if(td>1){var ty=Math.pow(10,Math.floor(Math.log(td)/Math.LN10));th*=ty*f.roundUp(td/ty,[2,5,10]),(Math.abs(Z.start)/Z.size+1e-6)%1<2e-6&&(tu.tick0=0)}tu.dtick=th}tu.domain=l?[tl+P/U.h,tl+te-P/U.h]:[tl+D/U.w,tl+te-D/U.w],tu.setScale(),r.attr("transform",h(Math.round(U.l),Math.round(U.t)));var tg,tv=r.select("."+S.cbtitleunshift).attr("transform",h(-Math.round(U.l),-Math.round(U.t))),tm=tu.ticklabelposition,tx=tu.title.font.size,tb=r.select("."+S.cbaxis),t_=0,tw=0;function tT(a,o){var s={propContainer:tu,propName:n._propPrefix+"title",traceIndex:n._traceIndex,_meta:n._meta,placeholder:N._dfltTitle.colorbar,containerGroup:r.select("."+S.cbtitle)},l="h"===a.charAt(0)?a.substr(1):"h"+a;r.selectAll("."+l+",."+l+"-math-group").remove(),v.draw(i,a,p(s,o||{}))}return f.syncOrAsync([s.previousPromises,function(){var r,n;(l&&tf||!l&&!tf)&&("top"===q&&(r=D+U.l+tr*B,n=P+U.t+tn*(1-tl-te)+3+.75*tx),"bottom"===q&&(r=D+U.l+tr*B,n=P+U.t+tn*(1-tl)-3-.25*tx),"right"===q&&(n=P+U.t+tn*R+3+.75*tx,r=D+U.l+tr*tl),tT(tu._id+"title",{attributes:{x:r,y:n,"text-anchor":l?"start":"middle"}}))},function(){if(!l&&!tf||l&&tf){var s,u=r.select("."+S.cbtitle),p=u.select("text"),d=[-E/2,E/2],g=u.select(".h"+tu._id+"title-math-group").node(),v=15.6;if(p.node()&&(v=parseInt(p.node().style.fontSize,10)*A),g?(tw=(s=y.bBox(g)).width,(t_=s.height)>v&&(d[1]-=(t_-v)/2)):p.node()&&!p.classed(S.jsPlaceholder)&&(tw=(s=y.bBox(p.node())).width,t_=s.height),l){if(t_){if(t_+=5,"top"===q)tu.domain[1]-=t_/U.h,d[1]*=-1;else{tu.domain[0]+=t_/U.h;var x=m.lineCount(p);d[1]+=(1-x)*v}u.attr("transform",h(d[0],d[1])),tu.setScale()}}else tw&&("right"===q&&(tu.domain[0]+=(tw+tx/2)/U.w),u.attr("transform",h(d[0],d[1])),tu.setScale())}r.selectAll("."+S.cbfills+",."+S.cblines).attr("transform",l?h(0,Math.round(U.h*(1-tu.domain[1]))):h(Math.round(U.w*tu.domain[0]),0)),tb.attr("transform",l?h(0,Math.round(-U.t)):h(Math.round(-U.l),0));var b=r.select("."+S.cbfills).selectAll("rect."+S.cbfill).attr("style","").data(K);b.enter().append("rect").classed(S.cbfill,!0).attr("style",""),b.exit().remove();var _=G.map(tu.c2p).map(Math.round).sort(function(r,n){return r-n});b.each(function(r,s){var c=[0===s?G[0]:(K[s]+K[s-1])/2,s===K.length-1?G[1]:(K[s]+K[s+1])/2].map(tu.c2p).map(Math.round);l&&(c[1]=f.constrain(c[1]+(c[1]>c[0])?1:-1,_[0],_[1]));var u=a.select(this).attr(l?"x":"y",ti).attr(l?"y":"x",a.min(c)).attr(l?"width":"height",Math.max($,2)).attr(l?"height":"width",Math.max(a.max(c)-a.min(c),2));if(n._fillgradient)y.gradient(u,i,n._id,l?"vertical":"horizontalreversed",n._fillgradient,"fill");else{var h=Y(r).replace("e-","");u.attr("fill",o(h).toHexString())}});var w=r.select("."+S.cblines).selectAll("path."+S.cbline).data(V.color&&V.width?J:[]);w.enter().append("path").classed(S.cbline,!0),w.exit().remove(),w.each(function(r){var n=Math.round(tu.c2p(r))+V.width/2%1;a.select(this).attr("d","M"+(l?ti+","+n:n+","+ti)+(l?"h":"v")+$).call(y.lineGroupStyle,V.width,W(r),V.dash)}),tb.selectAll("g."+tu._id+"tick,path").remove();var T=ti+$+(E||0)/2-("outside"===n.ticks?1:0),k=c.calcTicks(tu),M=c.getTickSigns(tu)[2];return c.drawTicks(i,tu,{vals:"inside"===tu.ticks?c.clipEnds(tu,k):k,layer:tb,path:c.makeTickPath(tu,T,M),transFn:c.makeTransTickFn(tu)}),c.drawLabels(i,tu,{vals:k,layer:tb,transFn:c.makeTransTickLabelFn(tu),labelFns:c.makeLabelFns(tu,T)})},function(){if(l&&!tf||!l&&tf){var r,o,s=tu.position||0,c=tu._offset+tu._length/2;if("right"===q)o=c,r=U.l+tr*s+10+tx*(tu.showticklabels?1:.5);else if(r=c,"bottom"===q&&(o=U.t+tn*s+10+(-1===tm.indexOf("inside")?tu.tickfont.size:0)+("intside"!==tu.ticks&&n.ticklen||0)),"top"===q){var u=H.text.split("<br>").length;o=U.t+tn*s+10-$-A*tx*u}tT((l?"h":"v")+tu._id+"title",{avoid:{selection:a.select(i).selectAll("g."+tu._id+"tick"),side:q,offsetTop:l?0:U.t,offsetLeft:l?U.l:0,maxShift:l?N.width:N.height},attributes:{x:r,y:o,"text-anchor":"middle"},transform:{rotate:l?-90:0,offset:0}})}},s.previousPromises,function(){var a,c=$+E/2;-1===tm.indexOf("inside")&&(a=y.bBox(tb.node()),c+=l?a.width:a.height),tg=tv.select("text");var f=0,p=l&&"top"===q,v=!l&&"right"===q,m=0;if(tg.node()&&!tg.classed(S.jsPlaceholder)){var b,_=tv.select(".h"+tu._id+"title-math-group").node();_&&(l&&tf||!l&&!tf)?(f=(a=y.bBox(_)).width,b=a.height):(f=(a=y.bBox(tv.node())).right-U.l-(l?ti:tc),b=a.bottom-U.t-(l?tc:ti),l||"top"!==q||(c+=a.height,m=a.height)),v&&(tg.attr("transform",h(f/2+tx/2,0)),f*=2),c=Math.max(c,l?f:b)}var w=2*(l?D:P)+c+I+E/2,A=0;!l&&H.text&&"bottom"===O&&R<=0&&(w+=A=w/2,m+=A),N._hColorbarMoveTitle=A,N._hColorbarMoveCBTitle=m;var j=I+E,V=(l?ti:tc)-j/2-(l?D:0),G=(l?tc:ti)-(l?tt:P+m-A);r.select("."+S.cbbg).attr("x",V).attr("y",G).attr(l?"width":"height",Math.max(w-A,2)).attr(l?"height":"width",Math.max(tt+j,2)).call(g.fill,L).call(g.stroke,n.bordercolor).style("stroke-width",I);var W=v?Math.max(f-10,0):0;r.selectAll("."+S.cboutline).attr("x",(l?ti:tc+D)+W).attr("y",(l?tc+P-tt:ti)+(p?t_:0)).attr(l?"width":"height",Math.max($,2)).attr(l?"height":"width",Math.max(tt-(l?2*P+t_:2*D+W),2)).call(g.stroke,n.outlinecolor).style({fill:"none","stroke-width":E});var Y=l?ta*w:0,Z=l?0:(1-to)*w-m;if(Y=F?U.l-Y:-Y,Z=z?U.t-Z:-Z,r.attr("transform",h(Y,Z)),!l&&(I||o(L).getAlpha()&&!o.equals(N.paper_bgcolor,L))){var X=tb.selectAll("text"),K=X[0].length,J=r.select("."+S.cbbg).node(),Q=y.bBox(J),te=y.getTranslate(r);X.each(function(r,n){var i=K-1;if(0===n||n===i){var a,o=y.bBox(this),s=y.getTranslate(this);if(n===i){var l=o.right+s.x;(a=Q.right+te.x+tc-I-2+B-l)>0&&(a=0)}else if(0===n){var c=o.left+s.x;(a=Q.left+te.x+tc+I+2-c)<0&&(a=0)}a&&(K<3?this.setAttribute("transform","translate("+a+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var tr={},tn=k[C],ts=M[C],tl=k[O],th=M[O],tp=w-$;l?("pixels"===d?(tr.y=R,tr.t=tt*tl,tr.b=tt*th):(tr.t=tr.b=0,tr.yt=R+u*tl,tr.yb=R-u*th),"pixels"===T?(tr.x=B,tr.l=w*tn,tr.r=w*ts):(tr.l=tp*tn,tr.r=tp*ts,tr.xl=B-x*tn,tr.xr=B+x*ts)):("pixels"===d?(tr.x=B,tr.l=tt*tn,tr.r=tt*ts):(tr.l=tr.r=0,tr.xl=B+u*tn,tr.xr=B-u*ts),"pixels"===T?(tr.y=1-R,tr.t=w*tl,tr.b=w*th):(tr.t=tp*tl,tr.b=tp*th,tr.yt=R-x*tl,tr.yb=R+x*th));var td=n.y<.5?"b":"t",ty=n.x<.5?"l":"r";i._fullLayout._reservedMargin[n._id]={};var tw={r:N.width-V-Y,l:V+tr.r,b:N.height-G-Z,t:G+tr.b};F&&z?s.autoMargin(i,n._id,tr):F?i._fullLayout._reservedMargin[n._id][td]=tw[td]:z||l?i._fullLayout._reservedMargin[n._id][ty]=tw[ty]:i._fullLayout._reservedMargin[n._id][td]=tw[td]}],i)}(L,n,r);C&&C.then&&(r._promises||[]).push(C),r._context.edits.colorbarPosition&&(E="v"===n.orientation,I=r._fullLayout._size,u.init({element:L.node(),gd:r,prepFn:function(){i=L.attr("transform"),d(L)},moveFn:function(r,a){L.attr("transform",i+h(r,a)),x=u.align((E?n._uFrac:n._vFrac)+r/I.w,E?n._thickFrac:n._lenFrac,0,1,n.xanchor),T=u.align((E?n._vFrac:1-n._uFrac)-a/I.h,E?n._lenFrac:n._thickFrac,0,1,n.yanchor),d(L,u.getCursor(x,T,n.xanchor,n.yanchor))},doneFn:function(){if(d(L),void 0!==x&&void 0!==T){var i={};i[n._propPrefix+"x"]=x,i[n._propPrefix+"y"]=T,void 0!==n._traceIndex?l.call("_guiRestyle",r,i,n._traceIndex):l.call("_guiRelayout",r,i)}}}))}),n.exit().each(function(n){s.autoMargin(r,n._id)}).remove(),n.order()}}},90553:function(r,n,i){var a=i(3400);r.exports=function(r){return a.isPlainObject(r.colorbar)}},55080:function(r,n,i){r.exports={moduleType:"component",name:"colorbar",attributes:i(42996),supplyDefaults:i(64013),draw:i(37848).draw,hasColorbar:i(90553)}},49084:function(r,n,i){var a=i(42996),o=i(53756).counter,s=i(95376),l=i(88304).scales;function c(r){return"`"+r+"`"}s(l),r.exports=function(r,n){r=r||"";var i,s=(n=n||{}).cLetter||"c",u=("onlyIfNumerical"in n&&n.onlyIfNumerical,"noScale"in n?n.noScale:"marker.line"===r),f="showScaleDflt"in n?n.showScaleDflt:"z"===s,h="string"==typeof n.colorscaleDflt?l[n.colorscaleDflt]:null,p=n.editTypeOverride||"",d=r?r+".":"";"colorAttr"in n?(i=n.colorAttr,n.colorAttr):c(d+(i=({z:"z",c:"color"})[s]));var y=s+"auto",g=s+"min",v=s+"max",m=(c(d+y),c(d+g),c(d+v),{});m[g]=m[v]=void 0;var x={};x[y]=!1;var b={};return"color"===i&&(b.color={valType:"color",arrayOk:!0,editType:p||"style"},n.anim&&(b.color.anim=!0)),b[y]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},b[g]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:x},b[v]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:x},b[s+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},b.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:!1!==n.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},u||(b.showscale={valType:"boolean",dflt:f,editType:"calc"},b.colorbar=a),n.noColorAxis||(b.coloraxis={valType:"subplotid",regex:o("coloraxis"),dflt:null,editType:"calc"}),b}},47128:function(r,n,i){var a=i(38248),o=i(3400),s=i(94288).extractOpts;r.exports=function(r,n,i){var l,c=r._fullLayout,u=i.vals,f=i.containerStr,h=f?o.nestedProperty(n,f).get():n,p=s(h),d=!1!==p.auto,y=p.min,g=p.max,v=p.mid,m=function(){return o.aggNums(Math.min,null,u)},x=function(){return o.aggNums(Math.max,null,u)};void 0===y?y=m():d&&(y=h._colorAx&&a(y)?Math.min(y,m()):m()),void 0===g?g=x():d&&(g=h._colorAx&&a(g)?Math.max(g,x()):x()),d&&void 0!==v&&(g-v>v-y?y=v-(g-v):g-v<v-y&&(g=v+(v-y))),y===g&&(y-=.5,g+=.5),p._sync("min",y),p._sync("max",g),p.autocolorscale&&(l=y*g<0?c.colorscale.diverging:y>=0?c.colorscale.sequential:c.colorscale.sequentialminus,p._sync("colorscale",l))}},95504:function(r,n,i){var a=i(3400),o=i(94288).hasColorscale,s=i(94288).extractOpts;r.exports=function(r,n){function i(r,n){var i=r["_"+n];void 0!==i&&(r[n]=i)}function l(r,o){var l=o.container?a.nestedProperty(r,o.container).get():r;if(l){if(l.coloraxis)l._colorAx=n[l.coloraxis];else{var c=s(l),u=c.auto;(u||void 0===c.min)&&i(l,o.min),(u||void 0===c.max)&&i(l,o.max),c.autocolorscale&&i(l,"colorscale")}}}for(var c=0;c<r.length;c++){var u=r[c],f=u._module.colorbar;if(f){if(Array.isArray(f))for(var h=0;h<f.length;h++)l(u,f[h]);else l(u,f)}o(u,"marker.line")&&l(u,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in n._colorAxes)l(n[p],{min:"cmin",max:"cmax"})}},27260:function(r,n,i){var a=i(38248),o=i(3400),s=i(90553),l=i(64013),c=i(88304).isValid,u=i(24040).traceIs;function f(r,n){var i=n.slice(0,n.length-1);return n?o.nestedProperty(r,i).get()||{}:r}r.exports=function r(n,i,h,p,d){var y=d.prefix,g=d.cLetter,v="_module"in i,m=f(n,y),x=f(i,y),b=f(i._template||{},y)||{},_=function(){return delete n.coloraxis,delete i.coloraxis,r(n,i,h,p,d)};if(v){var w=h._colorAxes||{},T=p(y+"coloraxis");if(T){var A=u(i,"contour")&&o.nestedProperty(i,"contours.coloring").get()||"heatmap",k=w[T];return void(k?(k[2].push(_),k[0]!==A&&(k[0]=!1,o.warn(["Ignoring coloraxis:",T,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[T]=[A,i,[_]])}}var M=m[g+"min"],S=m[g+"max"];p(y+g+"auto",!(a(M)&&a(S)&&M<S))?p(y+g+"mid"):(p(y+g+"min"),p(y+g+"max"));var E,I,L=m.colorscale,C=b.colorscale;void 0!==L&&(E=!c(L)),void 0!==C&&(E=!c(C)),p(y+"autocolorscale",E),p(y+"colorscale"),p(y+"reversescale"),"marker.line."!==y&&(y&&v&&(I=s(m)),p(y+"showscale",I)&&(y&&b&&(x._template=b),l(m,x,h)))}},94288:function(r,n,i){var a=i(33428),o=i(49760),s=i(38248),l=i(3400),c=i(76308),u=i(88304).isValid,f=["showscale","autocolorscale","colorscale","reversescale","colorbar"],h=["min","max","mid","auto"];function p(r){var n,i,a,o,s=r._colorAx,l=s||r,c={};for(a=0;a<f.length;a++)c[o=f[a]]=l[o];if(s)for(i="c",a=0;a<h.length;a++)c[o=h[a]]=l["c"+o];else{for(a=0;a<h.length;a++)((n="c"+(o=h[a]))in l||(n="z"+o)in l)&&(c[o]=l[n]);i=n.charAt(0)}return c._sync=function(r,n){var a=-1!==h.indexOf(r)?i+r:r;l[a]=l["_"+a]=n},c}function d(r){for(var n=p(r),i=n.min,a=n.max,o=n.reversescale?y(n.colorscale):n.colorscale,s=o.length,l=Array(s),c=Array(s),u=0;u<s;u++){var f=o[u];l[u]=i+f[0]*(a-i),c[u]=f[1]}return{domain:l,range:c}}function y(r){for(var n=r.length,i=Array(n),a=n-1,o=0;a>=0;a--,o++){var s=r[a];i[o]=[1-s[0],s[1]]}return i}function g(r,n){n=n||{};for(var i=r.domain,l=r.range,u=l.length,f=Array(u),h=0;h<u;h++){var p=o(l[h]).toRgb();f[h]=[p.r,p.g,p.b,p.a]}var d,y=a.scale.linear().domain(i).range(f).clamp(!0),g=n.noNumericCheck,m=n.returnArray;return(d=g&&m?y:g?function(r){return v(y(r))}:m?function(r){return s(r)?y(r):o(r).isValid()?r:c.defaultLine}:function(r){return s(r)?v(y(r)):o(r).isValid()?r:c.defaultLine}).domain=y.domain,d.range=function(){return l},d}function v(r){return o({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}r.exports={hasColorscale:function(r,n,i){var a=n?l.nestedProperty(r,n).get()||{}:r,o=a[i||"color"];o&&o._inputArray&&(o=o._inputArray);var c=!1;if(l.isArrayOrTypedArray(o)){for(var f=0;f<o.length;f++)if(s(o[f])){c=!0;break}}return l.isPlainObject(a)&&(c||!0===a.showscale||s(a.cmin)&&s(a.cmax)||u(a.colorscale)||l.isPlainObject(a.colorbar))},extractOpts:p,extractScale:d,flipScale:y,makeColorScaleFunc:g,makeColorScaleFuncFromTrace:function(r,n){return g(d(r),n)}}},8932:function(r,n,i){var a=i(88304),o=i(94288);r.exports={moduleType:"component",name:"colorscale",attributes:i(49084),layoutAttributes:i(92332),supplyLayoutDefaults:i(51608),handleDefaults:i(27260),crossTraceDefaults:i(95504),calc:i(47128),scales:a.scales,defaultScale:a.defaultScale,getScale:a.get,isValidScale:a.isValid,hasColorscale:o.hasColorscale,extractOpts:o.extractOpts,extractScale:o.extractScale,flipScale:o.flipScale,makeColorScaleFunc:o.makeColorScaleFunc,makeColorScaleFuncFromTrace:o.makeColorScaleFuncFromTrace}},92332:function(r,n,i){var a=i(92880).extendFlat,o=i(49084),s=i(88304).scales;r.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:s.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:s.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:s.RdBu,editType:"calc"}},coloraxis:a({_isSubplotObj:!0,editType:"calc"},o("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(r,n,i){var a=i(3400),o=i(31780),s=i(92332),l=i(27260);r.exports=function(r,n){function i(i,o){return a.coerce(r,n,s,i,o)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var c,u,f=n._colorAxes;function h(r,n){return a.coerce(c,u,s.coloraxis,r,n)}for(var p in f){var d=f[p];if(d[0])c=r[p]||{},(u=o.newContainer(n,p,"coloraxis"))._name=p,l(c,u,n,h,{prefix:"",cLetter:"c"});else{for(var y=0;y<d[2].length;y++)d[2][y]();delete n._colorAxes[p]}}}},88304:function(r,n,i){var a=i(49760),o={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},s=o.RdBu;function l(r){var n=0;if(!Array.isArray(r)||r.length<2||!r[0]||!r[r.length-1]||0!=+r[0][0]||1!=+r[r.length-1][0])return!1;for(var i=0;i<r.length;i++){var o=r[i];if(2!==o.length||+o[0]<n||!a(o[1]).isValid())return!1;n=+o[0]}return!0}r.exports={scales:o,defaultScale:s,get:function(r,n){if(n||(n=s),!r)return n;function i(){try{r=o[r]||JSON.parse(r)}catch(i){r=n}}return"string"==typeof r&&(i(),"string"==typeof r&&i()),l(r)?r:n},isValid:function(r){return void 0!==o[r]||l(r)}}},78316:function(r){r.exports=function(r,n,i,a,o){var s=(r-i)/(a-i),l=s+n/(a-i),c=(s+l)/2;return"left"===o||"bottom"===o?s:"center"===o||"middle"===o?c:"right"===o||"top"===o?l:s<2/3-c?s:l>4/3-c?l:c}},67416:function(r,n,i){var a=i(3400),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];r.exports=function(r,n,i,s){return r="left"===i?0:"center"===i?1:"right"===i?2:a.constrain(Math.floor(3*r),0,2),o[n="bottom"===s?0:"middle"===s?1:"top"===s?2:a.constrain(Math.floor(3*n),0,2)][r]}},72760:function(r,n){n.selectMode=function(r){return"lasso"===r||"select"===r},n.drawMode=function(r){return"drawclosedpath"===r||"drawopenpath"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},n.openMode=function(r){return"drawline"===r||"drawopenpath"===r},n.rectMode=function(r){return"select"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},n.freeMode=function(r){return"lasso"===r||"drawclosedpath"===r||"drawopenpath"===r},n.selectingOrDrawing=function(r){return n.freeMode(r)||n.rectMode(r)}},86476:function(r,n,i){var a=i(29128),o=i(52264),s=i(89184),l=i(3400).removeElement,c=i(33816),u=r.exports={};u.align=i(78316),u.getCursor=i(67416);var f=i(2616);function h(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function p(r){return a(r.changedTouches?r.changedTouches[0]:r,document.body)}u.unhover=f.wrapped,u.unhoverRaw=f.raw,u.init=function(r){var n,i,a,f,d,y,g,v,m=r.gd,x=1,b=m._context.doubleClickDelay,_=r.element;m._mouseDownTime||(m._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=T,s?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=T,_.addEventListener("touchstart",T,{passive:!1})):_.ontouchstart=T;var w=r.clampFn||function(r,n,i){return Math.abs(r)<i&&(r=0),Math.abs(n)<i&&(n=0),[r,n]};function T(s){m._dragged=!1,m._dragging=!0;var l=p(s);n=l[0],i=l[1],g=s.target,y=s,v=2===s.buttons||s.ctrlKey,void 0===s.clientX&&void 0===s.clientY&&(s.clientX=n,s.clientY=i),(a=(new Date).getTime())-m._mouseDownTime<b?x+=1:(x=1,m._mouseDownTime=a),r.prepFn&&r.prepFn(s,n,i),o&&!v?(d=h()).style.cursor=window.getComputedStyle(_).cursor:o||(d=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),!1!==r.dragmode&&(s.preventDefault(),document.addEventListener("mousemove",A),document.addEventListener("touchmove",A,{passive:!1}))}function A(a){a.preventDefault();var o=p(a),s=r.minDrag||c.MINDRAG,l=w(o[0]-n,o[1]-i,s),f=l[0],h=l[1];(f||h)&&(m._dragged=!0,u.unhover(m,a)),m._dragged&&r.moveFn&&!v&&(m._dragdata={element:_,dx:f,dy:h},r.moveFn(f,h))}function k(n){if(delete m._dragdata,!1!==r.dragmode&&(n.preventDefault(),document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",A)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),o?l(d):f&&(d.documentElement.style.cursor=f,f=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>b&&(x=Math.max(x-1,1)),m._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(x,y),!v){var i;try{i=new MouseEvent("click",n)}catch(r){var a=p(n);(i=document.createEvent("MouseEvents")).initMouseEvent("click",n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,a[0],a[1],n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}g.dispatchEvent(i)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},u.coverSlip=h},2616:function(r,n,i){var a=i(95924),o=i(91200),s=i(52200).getGraphDiv,l=i(92456),c=r.exports={};c.wrapped=function(r,n,i){(r=s(r))._fullLayout&&o.clear(r._fullLayout._uid+l.HOVERID),c.raw(r,n,i)},c.raw=function(r,n){var i=r._fullLayout,o=r._hoverdata;n||(n={}),n.target&&!r._dragged&&!1===a.triggerHandler(r,"plotly_beforehover",n)||(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,n.target&&o&&r.emit("plotly_unhover",{event:n,points:o}))}},98192:function(r,n){n.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(r,n,i){var a=i(33428),o=i(3400),s=o.numberFormat,l=i(38248),c=i(49760),u=i(24040),f=i(76308),h=i(8932),p=o.strTranslate,d=i(72736),y=i(9616),g=i(84284).LINE_SPACING,v=i(13448).DESELECTDIM,m=i(43028),x=i(7152),b=i(10624).appendArrayPointValue,_=r.exports={};function w(r){return"none"===r?void 0:r}_.font=function(r,n){var i=n.variant,a=n.style,o=n.weight,s=n.color,l=n.size,c=n.family,u=n.shadow,h=n.lineposition,p=n.textcase;c&&r.style("font-family",c),l+1&&r.style("font-size",l+"px"),s&&r.call(f.fill,s),o&&r.style("font-weight",o),a&&r.style("font-style",a),i&&r.style("font-variant",i),p&&r.style("text-transform",w(T[p])),u&&r.style("text-shadow","auto"===u?d.makeTextShadow(f.contrast(s)):w(u)),h&&r.style("text-decoration-line",w(h.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")))};var T={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function A(r,n,i,a){var o=n.fillpattern,s=n.fillgradient,l=o&&_.getPatternAttr(o.shape,0,"");if(l){var c=_.getPatternAttr(o.bgcolor,0,null),u=_.getPatternAttr(o.fgcolor,0,null),h=o.fgopacity,p=_.getPatternAttr(o.size,0,8),d=_.getPatternAttr(o.solidity,0,.3),y=n.uid;_.pattern(r,"point",i,y,l,p,d,void 0,o.fillmode,c,u,h)}else if(s&&"none"!==s.type){var g,v,m=s.type,x="scatterfill-"+n.uid;a&&(x="legendfill-"+n.uid),a||void 0===s.start&&void 0===s.stop?("horizontal"===m&&(m+="reversed"),r.call(_.gradient,i,x,m,s.colorscale,"fill")):("horizontal"===m?(g={x:s.start,y:0},v={x:s.stop,y:0}):"vertical"===m&&(g={x:0,y:s.start},v={x:0,y:s.stop}),g.x=n._xA.c2p(void 0===g.x?n._extremes.x.min[0].val:g.x,!0),g.y=n._yA.c2p(void 0===g.y?n._extremes.y.min[0].val:g.y,!0),v.x=n._xA.c2p(void 0===v.x?n._extremes.x.max[0].val:v.x,!0),v.y=n._yA.c2p(void 0===v.y?n._extremes.y.max[0].val:v.y,!0),r.call(L,i,x,"linear",s.colorscale,"fill",g,v,!0,!1))}else n.fillcolor&&r.call(f.fill,n.fillcolor)}_.setPosition=function(r,n,i){r.attr("x",n).attr("y",i)},_.setSize=function(r,n,i){r.attr("width",n).attr("height",i)},_.setRect=function(r,n,i,a,o){r.call(_.setPosition,n,i).call(_.setSize,a,o)},_.translatePoint=function(r,n,i,a){var o=i.c2p(r.x),s=a.c2p(r.y);return!!(l(o)&&l(s)&&n.node())&&("text"===n.node().nodeName?n.attr("x",o).attr("y",s):n.attr("transform",p(o,s)),!0)},_.translatePoints=function(r,n,i){r.each(function(r){var o=a.select(this);_.translatePoint(r,o,n,i)})},_.hideOutsideRangePoint=function(r,n,i,a,o,s){n.attr("display",i.isPtWithinRange(r,o)&&a.isPtWithinRange(r,s)?null:"none")},_.hideOutsideRangePoints=function(r,n){if(n._hasClipOnAxisFalse){var i=n.xaxis,o=n.yaxis;r.each(function(n){var s=n[0].trace,l=s.xcalendar,c=s.ycalendar,f=u.traceIs(s,"bar-like")?".bartext":".point,.textpoint";r.selectAll(f).each(function(r){_.hideOutsideRangePoint(r,a.select(this),i,o,l,c)})})}},_.crispRound=function(r,n,i){return n&&l(n)?r._context.staticPlot?n:n<1?1:Math.round(n):i||0},_.singleLineStyle=function(r,n,i,a,o){n.style("fill","none");var s=(((r||[])[0]||{}).trace||{}).line||{},l=i||s.width||0,c=o||s.dash||"";f.stroke(n,a||s.color),_.dashLine(n,c,l)},_.lineGroupStyle=function(r,n,i,o){r.style("fill","none").each(function(r){var s=(((r||[])[0]||{}).trace||{}).line||{},l=n||s.width||0,c=o||s.dash||"";a.select(this).call(f.stroke,i||s.color).call(_.dashLine,c,l)})},_.dashLine=function(r,n,i){i=+i||0,n=_.dashStyle(n,i),r.style({"stroke-dasharray":n,"stroke-width":i+"px"})},_.dashStyle=function(r,n){var i=Math.max(n=+n||1,3);return"solid"===r?r="":"dot"===r?r=i+"px,"+i+"px":"dash"===r?r=3*i+"px,"+3*i+"px":"longdash"===r?r=5*i+"px,"+5*i+"px":"dashdot"===r?r=3*i+"px,"+i+"px,"+i+"px,"+i+"px":"longdashdot"===r&&(r=5*i+"px,"+2*i+"px,"+i+"px,"+2*i+"px"),r},_.singleFillStyle=function(r,n){var i=a.select(r.node());A(r,((i.data()[0]||[])[0]||{}).trace||{},n,!1)},_.fillGroupStyle=function(r,n,i){r.style("stroke-width",0).each(function(r){var o=a.select(this);r[0].trace&&A(o,r[0].trace,n,i)})};var k=i(71984);_.symbolNames=[],_.symbolFuncs=[],_.symbolBackOffs=[],_.symbolNeedLines={},_.symbolNoDot={},_.symbolNoFill={},_.symbolList=[],Object.keys(k).forEach(function(r){var n=k[r],i=n.n;_.symbolList.push(i,String(i),r,i+100,String(i+100),r+"-open"),_.symbolNames[i]=r,_.symbolFuncs[i]=n.f,_.symbolBackOffs[i]=n.backoff||0,n.needLine&&(_.symbolNeedLines[i]=!0),n.noDot?_.symbolNoDot[i]=!0:_.symbolList.push(i+200,String(i+200),r+"-dot",i+300,String(i+300),r+"-open-dot"),n.noFill&&(_.symbolNoFill[i]=!0)});var M=_.symbolNames.length;function S(r,n,i,a){return _.symbolFuncs[r%100](n,i,a)+(r>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}_.symbolNumber=function(r){if(l(r))r=+r;else if("string"==typeof r){var n=0;r.indexOf("-open")>0&&(n=100,r=r.replace("-open","")),r.indexOf("-dot")>0&&(n+=200,r=r.replace("-dot","")),(r=_.symbolNames.indexOf(r))>=0&&(r+=n)}return r%100>=M||r>=400?0:Math.floor(Math.max(r,0))};var E=s("~f"),I={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function L(r,n,i,s,l,u,h,p,d,y){var g,v=l.length;"linear"===s?g={node:"linearGradient",attrs:{x1:h.x,y1:h.y,x2:p.x,y2:p.y,gradientUnits:d?"userSpaceOnUse":"objectBoundingBox"},reversed:y}:"radial"===s&&(g={node:"radialGradient",reversed:y});for(var m=Array(v),x=0;x<v;x++)g.reversed?m[v-1-x]=[E(100*(1-l[x][0])),l[x][1]]:m[x]=[E(100*l[x][0]),l[x][1]];var b=n._fullLayout,_="g"+b._uid+"-"+i,w=b._defs.select(".gradients").selectAll("#"+_).data([s+m.join(";")],o.identity);w.exit().remove(),w.enter().append(g.node).each(function(){var r=a.select(this);g.attrs&&r.attr(g.attrs),r.attr("id",_);var n=r.selectAll("stop").data(m);n.exit().remove(),n.enter().append("stop"),n.each(function(r){var n=c(r[1]);a.select(this).attr({offset:r[0]+"%","stop-color":f.tinyRGB(n),"stop-opacity":n.getAlpha()})})}),r.style(u,G(_,n)).style(u+"-opacity",null),r.classed("gradient_filled",!0)}_.gradient=function(r,n,i,a,o,s){var l=I[a];return L(r,n,i,l.type,o,s,l.start,l.stop,!1,l.reversed)},_.pattern=function(r,n,i,s,l,u,h,p,d,y,g,v){var m="legend"===n;p&&("overlay"===d?(y=p,g=f.contrast(y)):(y=void 0,g=p));var x,b,_,w,T,A,k,M=i._fullLayout,S="p"+M._uid+"-"+s,E={},I=c(g),L=f.tinyRGB(I),C=v*I.getAlpha();switch(l){case"/":T="path",E={d:_="M-"+(x=u*Math.sqrt(2))/4+","+(b=u*Math.sqrt(2))/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2,opacity:C,stroke:L,"stroke-width":h*u+"px"};break;case"\\":T="path",E={d:_="M"+(x=u*Math.sqrt(2))/4*3+",-"+(b=u*Math.sqrt(2))/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,opacity:C,stroke:L,"stroke-width":h*u+"px"};break;case"x":_="M-"+(x=u*Math.sqrt(2))/4+","+(b=u*Math.sqrt(2))/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2+"M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,T="path",E={d:_,opacity:C,stroke:L,"stroke-width":u-u*Math.sqrt(1-h)+"px"};break;case"|":T="path",T="path",E={d:_="M"+(x=u)/2+",0L"+x/2+","+(b=u),opacity:C,stroke:L,"stroke-width":h*u+"px"};break;case"-":T="path",T="path",E={d:_="M0,"+(b=u)/2+"L"+(x=u)+","+b/2,opacity:C,stroke:L,"stroke-width":h*u+"px"};break;case"+":T="path",_="M"+(x=u)/2+",0L"+x/2+","+(b=u)+"M0,"+b/2+"L"+x+","+b/2,T="path",E={d:_,opacity:C,stroke:L,"stroke-width":u-u*Math.sqrt(1-h)+"px"};break;case".":x=u,b=u,h<Math.PI/4?w=Math.sqrt(h*u*u/Math.PI):(A=Math.PI/4,w=(k=u/2)+(u/Math.sqrt(2)-k)*(h-A)/(1-A)),T="circle",E={cx:x/2,cy:b/2,r:w,opacity:C,fill:L}}var O=[l||"noSh",y||"noBg",g||"noFg",u,h].join(";"),D=M._defs.select(".patterns").selectAll("#"+S).data([O],o.identity);D.exit().remove(),D.enter().append("pattern").each(function(){var r=a.select(this);if(r.attr({id:S,width:x+"px",height:b+"px",patternUnits:"userSpaceOnUse",patternTransform:m?"scale(0.8)":""}),y){var n=c(y),i=f.tinyRGB(n),o=n.getAlpha(),s=r.selectAll("rect").data([0]);s.exit().remove(),s.enter().append("rect").attr({width:x+"px",height:b+"px",fill:i,"fill-opacity":o})}var l=r.selectAll(T).data([0]);l.exit().remove(),l.enter().append(T).attr(E)}),r.style("fill",G(S,i)).style("fill-opacity",null),r.classed("pattern_filled",!0)},_.initGradients=function(r){var n=r._fullLayout;o.ensureSingle(n._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),a.select(r).selectAll(".gradient_filled").classed("gradient_filled",!1)},_.initPatterns=function(r){var n=r._fullLayout;o.ensureSingle(n._defs,"g","patterns").selectAll("pattern").remove(),a.select(r).selectAll(".pattern_filled").classed("pattern_filled",!1)},_.getPatternAttr=function(r,n,i){return r&&o.isArrayOrTypedArray(r)?n<r.length?r[n]:i:r},_.pointStyle=function(r,n,i,o){if(r.size()){var s=_.makePointStyleFns(n);r.each(function(r){_.singlePointStyle(r,a.select(this),n,s,i,o)})}},_.singlePointStyle=function(r,n,i,a,s,l){var c=i.marker,u=c.line;if(l&&l.i>=0&&void 0===r.i&&(r.i=l.i),n.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(r):void 0===r.mo?c.opacity:r.mo),a.ms2mrc){h="various"===r.ms||"various"===c.size?3:a.ms2mrc(r.ms),r.mrc=h,a.selectedSizeFn&&(h=r.mrc=a.selectedSizeFn(r));var h,p=_.symbolNumber(r.mx||c.symbol)||0;r.om=p%200>=100;var d=ta(r,i),y=Z(r,i);n.attr("d",S(p,h,d,y))}var g,v,m,x=!1;if(r.so)m=u.outlierwidth,v=u.outliercolor,g=c.outliercolor;else{var b=(u||{}).width;m=(r.mlw+1||b+1||(r.trace?(r.trace.marker.line||{}).width:0)+1)-1||0,v="mlc"in r?r.mlcc=a.lineScale(r.mlc):o.isArrayOrTypedArray(u.color)?f.defaultLine:u.color,o.isArrayOrTypedArray(c.color)&&(g=f.defaultLine,x=!0),g="mc"in r?r.mcc=a.markerScale(r.mc):c.color||c.colors||"rgba(0,0,0,0)",a.selectedColorFn&&(g=a.selectedColorFn(r))}if(r.om)n.call(f.stroke,g).style({"stroke-width":(m||1)+"px",fill:"none"});else{n.style("stroke-width",(r.isBlank?0:m)+"px");var w=c.gradient,T=r.mgt;T?x=!0:T=w&&w.type,o.isArrayOrTypedArray(T)&&(I[T=T[0]]||(T=0));var A=c.pattern,k=A&&_.getPatternAttr(A.shape,r.i,"");if(T&&"none"!==T){var M=r.mgc;M?x=!0:M=w.color;var E=i.uid;x&&(E+="-"+r.i),_.gradient(n,s,E,T,[[0,M],[1,g]],"fill")}else if(k){var L=!1,C=A.fgcolor;!C&&l&&l.color&&(C=l.color,L=!0);var O=_.getPatternAttr(C,r.i,l&&l.color||null),D=_.getPatternAttr(A.bgcolor,r.i,null),P=A.fgopacity,B=_.getPatternAttr(A.size,r.i,8),R=_.getPatternAttr(A.solidity,r.i,.3);L=L||r.mcc||o.isArrayOrTypedArray(A.shape)||o.isArrayOrTypedArray(A.bgcolor)||o.isArrayOrTypedArray(A.fgcolor)||o.isArrayOrTypedArray(A.size)||o.isArrayOrTypedArray(A.solidity);var z=i.uid;L&&(z+="-"+r.i),_.pattern(n,"point",s,z,k,B,R,r.mcc,A.fillmode,D,O,P)}else o.isArrayOrTypedArray(g)?f.fill(n,g[r.i]):f.fill(n,g);m&&f.stroke(n,v)}},_.makePointStyleFns=function(r){var n={},i=r.marker;return n.markerScale=_.tryColorscale(i,""),n.lineScale=_.tryColorscale(i,"line"),u.traceIs(r,"symbols")&&(n.ms2mrc=m.isBubble(r)?x(r):function(){return(i.size||6)/2}),r.selectedpoints&&o.extendFlat(n,_.makeSelectedPointStyleFns(r)),n},_.makeSelectedPointStyleFns=function(r){var n={},i=r.selected||{},a=r.unselected||{},s=r.marker||{},l=i.marker||{},c=a.marker||{},f=s.opacity,h=l.opacity,p=c.opacity,d=void 0!==h,y=void 0!==p;(o.isArrayOrTypedArray(f)||d||y)&&(n.selectedOpacityFn=function(r){var n=void 0===r.mo?s.opacity:r.mo;return r.selected?d?h:n:y?p:v*n});var g=s.color,m=l.color,x=c.color;(m||x)&&(n.selectedColorFn=function(r){var n=r.mcc||g;return r.selected?m||n:x||n});var b=s.size,_=l.size,w=c.size,T=void 0!==_,A=void 0!==w;return u.traceIs(r,"symbols")&&(T||A)&&(n.selectedSizeFn=function(r){var n=r.mrc||b/2;return r.selected?T?_/2:n:A?w/2:n}),n},_.makeSelectedTextStyleFns=function(r){var n={},i=r.selected||{},a=r.unselected||{},o=r.textfont||{},s=i.textfont||{},l=a.textfont||{},c=o.color,u=s.color,h=l.color;return n.selectedTextColorFn=function(r){var n=r.tc||c;return r.selected?u||n:h||(u?n:f.addOpacity(n,v))},n},_.selectedPointStyle=function(r,n){if(r.size()&&n.selectedpoints){var i=_.makeSelectedPointStyleFns(n),o=n.marker||{},s=[];i.selectedOpacityFn&&s.push(function(r,n){r.style("opacity",i.selectedOpacityFn(n))}),i.selectedColorFn&&s.push(function(r,n){f.fill(r,i.selectedColorFn(n))}),i.selectedSizeFn&&s.push(function(r,a){var s=a.mx||o.symbol||0,l=i.selectedSizeFn(a);r.attr("d",S(_.symbolNumber(s),l,ta(a,n),Z(a,n))),a.mrc2=l}),s.length&&r.each(function(r){for(var n=a.select(this),i=0;i<s.length;i++)s[i](n,r)})}},_.tryColorscale=function(r,n){var i=n?o.nestedProperty(r,n).get():r;if(i){var a=i.color;if((i.colorscale||i._colorAx)&&o.isArrayOrTypedArray(a))return h.makeColorScaleFuncFromTrace(i)}return o.identity};var C,O,D={start:1,end:-1,middle:0,bottom:1,top:-1};function P(r,n,i,o,s){var l=a.select(r.node().parentNode),c=-1!==n.indexOf("top")?"top":-1!==n.indexOf("bottom")?"bottom":"middle",u=-1!==n.indexOf("left")?"end":-1!==n.indexOf("right")?"start":"middle",f=o?o/.8+1:0,h=(d.lineCount(r)-1)*g+1,y=D[u]*f,v=.75*i+D[c]*f+(D[c]-1)*h*i/2;r.attr("text-anchor",u),s||l.attr("transform",p(y,v))}function B(r,n){var i=r.ts||n.textfont.size;return l(i)&&i>0?i:0}function R(r,n,i){return i&&(r=V(r)),n?F(r[1]):z(r[0])}function z(r){var n=a.round(r,2);return C=n,n}function F(r){var n=a.round(r,2);return O=n,n}function N(r,n,i,a){var o=r[0]-n[0],s=r[1]-n[1],l=i[0]-n[0],c=i[1]-n[1],u=Math.pow(o*o+s*s,.25),f=Math.pow(l*l+c*c,.25),h=(f*f*o-u*u*l)*a,p=(f*f*s-u*u*c)*a,d=3*f*(u+f),y=3*u*(u+f);return[[z(n[0]+(d&&h/d)),F(n[1]+(d&&p/d))],[z(n[0]-(y&&h/y)),F(n[1]-(y&&p/y))]]}_.textPointStyle=function(r,n,i){if(r.size()){if(n.selectedpoints){var s;s=_.makeSelectedTextStyleFns(n).selectedTextColorFn}var l=n.texttemplate,c=i._fullLayout;r.each(function(r){var u=a.select(this),f=l?o.extractOption(r,n,"txt","texttemplate"):o.extractOption(r,n,"tx","text");if(f||0===f){if(l){var h=n._module.formatLabels,p=h?h(r,n,c):{},y={};b(y,n,r.i);var g=n._meta||{};f=o.texttemplateString(f,p,c._d3locale,y,r,g)}var v=r.tp||n.textposition,m=B(r,n),x=s?s(r):r.tc||n.textfont.color;u.call(_.font,{family:r.tf||n.textfont.family,weight:r.tw||n.textfont.weight,style:r.ty||n.textfont.style,variant:r.tv||n.textfont.variant,textcase:r.tC||n.textfont.textcase,lineposition:r.tE||n.textfont.lineposition,shadow:r.tS||n.textfont.shadow,size:m,color:x}).text(f).call(d.convertToTspans,i).call(P,v,m,r.mrc)}else u.remove()})}},_.selectedTextStyle=function(r,n){if(r.size()&&n.selectedpoints){var i=_.makeSelectedTextStyleFns(n);r.each(function(r){var o=a.select(this),s=i.selectedTextColorFn(r),l=r.tp||n.textposition,c=B(r,n);f.fill(o,s);var h=u.traceIs(n,"bar-like");P(o,l,c,r.mrc2||r.mrc,h)})}},_.smoothopen=function(r,n){if(r.length<3)return"M"+r.join("L");var i,a="M"+r[0],o=[];for(i=1;i<r.length-1;i++)o.push(N(r[i-1],r[i],r[i+1],n));for(a+="Q"+o[0][0]+" "+r[1],i=2;i<r.length-1;i++)a+="C"+o[i-2][1]+" "+o[i-1][0]+" "+r[i];return a+"Q"+o[r.length-3][1]+" "+r[r.length-1]},_.smoothclosed=function(r,n){if(r.length<3)return"M"+r.join("L")+"Z";var i,a="M"+r[0],o=r.length-1,s=[N(r[o],r[0],r[1],n)];for(i=1;i<o;i++)s.push(N(r[i-1],r[i],r[i+1],n));for(s.push(N(r[o-1],r[o],r[0],n)),i=1;i<=o;i++)a+="C"+s[i-1][1]+" "+s[i][0]+" "+r[i];return a+"C"+s[o][1]+" "+s[0][0]+" "+r[0]+"Z"};var U={hv:function(r,n,i){return"H"+z(n[0])+"V"+R(n,1,i)},vh:function(r,n,i){return"V"+F(n[1])+"H"+R(n,0,i)},hvh:function(r,n,i){return"H"+z((r[0]+n[0])/2)+"V"+F(n[1])+"H"+R(n,0,i)},vhv:function(r,n,i){return"V"+F((r[1]+n[1])/2)+"H"+z(n[0])+"V"+R(n,1,i)}},j=function(r,n,i){return"L"+R(n,0,i)+","+R(n,1,i)};function V(r,n){var i=r.backoff,a=r.trace,s=r.d,l=r.i;if(i&&a&&a.marker&&a.marker.angle%360==0&&a.line&&"spline"!==a.line.shape){var c=o.isArrayOrTypedArray(i),u=r,f=n?n[0]:C||0,h=n?n[1]:O||0,p=u[0],d=u[1],y=Math.atan2(d-h,p-f),g=c?i[l]:i;if("auto"===g){var v=u.i;"scatter"===a.type&&v--;var m=u.marker,x=m.symbol;o.isArrayOrTypedArray(x)&&(x=x[v]);var b=m.size;o.isArrayOrTypedArray(b)&&(b=b[v]),g=(m?_.symbolBackOffs[_.symbolNumber(x)]*b:0)+(_.getMarkerStandoff(s[v],a)||0)}var w=p-g*Math.cos(y),T=d-g*Math.sin(y);(w<=p&&w>=f||w>=p&&w<=f)&&(T<=d&&T>=h||T>=d&&T<=h)&&(r=[w,T])}return r}_.steps=function(r){var n=U[r]||j;return function(r){for(var i="M"+z(r[0][0])+","+F(r[0][1]),a=r.length,o=1;o<a;o++)i+=n(r[o-1],r[o],o===a-1);return i}},_.applyBackoff=V,_.makeTester=function(){var r=o.ensureSingleById(a.select("body"),"svg","js-plotly-tester",function(r){r.attr(y.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),n=o.ensureSingle(r,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});_.tester=r,_.testref=n},_.savedBBoxes={};var H=0;function q(r){var n=r.getAttribute("data-unformatted");if(null!==n)return n+r.getAttribute("data-math")+r.getAttribute("text-anchor")+r.getAttribute("style")}function G(r,n){if(!r)return null;var i=n._context,a=i._exportedPlot?"":i._baseUrl||"";return a?"url('"+a+"#"+r+"')":"url(#"+r+")"}_.bBox=function(r,n,i){if(i||(i=q(r)),i){if(s=_.savedBBoxes[i])return o.extendFlat({},s)}else if(1===r.childNodes.length){var s,l,c,u=r.childNodes[0];if(i=q(u)){var f=+u.getAttribute("x")||0,h=+u.getAttribute("y")||0,p=u.getAttribute("transform");if(!p){var y=_.bBox(u,!1,i);return f&&(y.left+=f,y.right+=f),h&&(y.top+=h,y.bottom+=h),y}if(i+="~"+f+"~"+h+"~"+p,s=_.savedBBoxes[i])return o.extendFlat({},s)}}n?l=r:(c=_.tester.node(),l=r.cloneNode(!0),c.appendChild(l)),a.select(l).attr("transform",null).call(d.positionText,0,0);var g=l.getBoundingClientRect(),v=_.testref.node().getBoundingClientRect();n||c.removeChild(l);var m={height:g.height,width:g.width,left:g.left-v.left,top:g.top-v.top,right:g.right-v.left,bottom:g.bottom-v.top};return H>=1e4&&(_.savedBBoxes={},H=0),i&&(_.savedBBoxes[i]=m),H++,o.extendFlat({},m)},_.setClipUrl=function(r,n,i){r.attr("clip-path",G(n,i))},_.getTranslate=function(r){var n=(r[r.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(r,n,i){return[n,i].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}},_.setTranslate=function(r,n,i){var a=r.attr?"attr":"getAttribute",o=r.attr?"attr":"setAttribute",s=r[a]("transform")||"";return n=n||0,i=i||0,s=(s=s.replace(/(\btranslate\(.*?\);?)/,"").trim()+p(n,i)).trim(),r[o]("transform",s),s},_.getScale=function(r){var n=(r[r.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(r,n,i){return[n,i].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}},_.setScale=function(r,n,i){var a=r.attr?"attr":"getAttribute",o=r.attr?"attr":"setAttribute",s=r[a]("transform")||"";return n=n||1,i=i||1,s=(s=s.replace(/(\bscale\(.*?\);?)/,"").trim()+("scale("+n+",")+i+")").trim(),r[o]("transform",s),s};var W=/\s*sc.*/;_.setPointGroupScale=function(r,n,i){if(n=n||1,i=i||1,r){var a=1===n&&1===i?"":"scale("+n+","+i+")";r.each(function(){var r=(this.getAttribute("transform")||"").replace(W,"");r=(r+=a).trim(),this.setAttribute("transform",r)})}};var Y=/translate\([^)]*\)\s*$/;function Z(r,n){var i;return r&&(i=r.mf),void 0===i&&(i=n.marker&&n.marker.standoff||0),n._geo||n._xA?i:-i}_.setTextPointsScale=function(r,n,i){r&&r.each(function(){var r,o=a.select(this),s=o.select("text");if(s.node()){var l=parseFloat(s.attr("x")||0),c=parseFloat(s.attr("y")||0),u=(o.attr("transform")||"").match(Y);r=1===n&&1===i?[]:[p(l,c),"scale("+n+","+i+")",p(-l,-c)],u&&r.push(u),o.attr("transform",r.join(""))}})},_.getMarkerStandoff=Z;var X,K,J,$,Q,tt,te=Math.atan2,tr=Math.cos,tn=Math.sin;function ti(r,n){var i=n[0],a=n[1];return[i*tr(r)-a*tn(r),i*tn(r)+a*tr(r)]}function ta(r,n){var i,a,s=r.ma;void 0===s&&((s=n.marker.angle)&&!o.isArrayOrTypedArray(s)||(s=0));var c=n.marker.angleref;if("previous"===c||"north"===c){if(n._geo){var u=n._geo.project(r.lonlat);i=u[0],a=u[1]}else{var f=n._xA,h=n._yA;if(!f||!h)return 90;i=f.c2p(r.x),a=h.c2p(r.y)}if(n._geo){var p,d=r.lonlat[0],y=r.lonlat[1],g=n._geo.project([d,y+1e-5]),v=n._geo.project([d+1e-5,y]),m=te(v[1]-a,v[0]-i),x=te(g[1]-a,g[0]-i);if("north"===c)p=s/180*Math.PI;else if("previous"===c){var b=y/180*Math.PI,_=K/180*Math.PI,w=X/180*Math.PI-d/180*Math.PI;p=-te(tr(_)*tn(w),tn(_)*tr(b)-tr(_)*tn(b)*tr(w))-Math.PI,X=d,K=y}var T=ti(m,[tr(p),0]),A=ti(x,[tn(p),0]);s=te(T[1]+A[1],T[0]+A[0])/Math.PI*180,"previous"!==c||tt===n.uid&&r.i===Q+1||(s=null)}if("previous"===c&&!n._geo){if(tt===n.uid&&r.i===Q+1&&l(i)&&l(a)){var k=i-J,M=a-$,S=n.line&&n.line.shape||"",E=S.slice(S.length-1);"h"===E&&(M=0),"v"===E&&(k=0),s+=te(M,k)/Math.PI*180+90}else s=null}}return J=i,$=a,Q=r.i,tt=n.uid,s}_.getMarkerAngle=ta},71984:function(r,n,i){var a,o,s,l,c=i(21984),u=i(33428).round,f="M0,0Z",h=Math.sqrt(2),p=Math.sqrt(3),d=Math.PI,y=Math.cos,g=Math.sin;function v(r){return null===r}function m(r,n,i){if(!(r&&r%360!=0||n))return i;if(s===r&&l===n&&a===i)return o;function u(r,i){var a=y(r),o=g(r),s=i[0],l=i[1]+(n||0);return[s*a-l*o,s*o+l*a]}s=r,l=n,a=i;for(var f=r/180*d,h=0,p=0,v=c(i),m="",x=0;x<v.length;x++){var b=v[x],_=b[0],w=h,T=p;if("M"===_||"L"===_)h=+b[1],p=+b[2];else if("m"===_||"l"===_)h+=+b[1],p+=+b[2];else if("H"===_)h=+b[1];else if("h"===_)h+=+b[1];else if("V"===_)p=+b[1];else if("v"===_)p+=+b[1];else if("A"===_){h=+b[1],p=+b[2];var A=u(f,[+b[6],+b[7]]);b[6]=A[0],b[7]=A[1],b[3]=+b[3]+r}"H"!==_&&"V"!==_||(_="L"),"h"!==_&&"v"!==_||(_="l"),"m"!==_&&"l"!==_||(h-=w,p-=T);var k=u(f,[h,p]);"H"!==_&&"V"!==_||(_="L"),"M"!==_&&"L"!==_&&"m"!==_&&"l"!==_||(b[1]=k[0],b[2]=k[1]),b[0]=_,m+=b[0]+b.slice(1).join(",")}return o=m,m}r.exports={circle:{n:0,f:function(r,n,i){if(v(n))return f;var a=u(r,2),o="M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z";return i?m(n,i,o):o}},square:{n:1,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")}},diamond:{n:2,f:function(r,n,i){if(v(n))return f;var a=u(1.3*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z")}},cross:{n:3,f:function(r,n,i){if(v(n))return f;var a=u(.4*r,2),o=u(1.2*r,2);return m(n,i,"M"+o+","+a+"H"+a+"V"+o+"H-"+a+"V"+a+"H-"+o+"V-"+a+"H-"+a+"V-"+o+"H"+a+"V-"+a+"H"+o+"Z")}},x:{n:4,f:function(r,n,i){if(v(n))return f;var a=u(.8*r/h,2),o="l"+a+","+a,s="l"+a+",-"+a,l="l-"+a+",-"+a,c="l-"+a+","+a;return m(n,i,"M0,"+a+o+s+l+s+l+c+l+c+o+c+o+"Z")}},"triangle-up":{n:5,f:function(r,n,i){if(v(n))return f;var a=u(2*r/p,2);return m(n,i,"M-"+a+","+u(r/2,2)+"H"+a+"L0,-"+u(r,2)+"Z")}},"triangle-down":{n:6,f:function(r,n,i){if(v(n))return f;var a=u(2*r/p,2);return m(n,i,"M-"+a+",-"+u(r/2,2)+"H"+a+"L0,"+u(r,2)+"Z")}},"triangle-left":{n:7,f:function(r,n,i){if(v(n))return f;var a=u(2*r/p,2);return m(n,i,"M"+u(r/2,2)+",-"+a+"V"+a+"L-"+u(r,2)+",0Z")}},"triangle-right":{n:8,f:function(r,n,i){if(v(n))return f;var a=u(2*r/p,2);return m(n,i,"M-"+u(r/2,2)+",-"+a+"V"+a+"L"+u(r,2)+",0Z")}},"triangle-ne":{n:9,f:function(r,n,i){if(v(n))return f;var a=u(.6*r,2),o=u(1.2*r,2);return m(n,i,"M-"+o+",-"+a+"H"+a+"V"+o+"Z")}},"triangle-se":{n:10,f:function(r,n,i){if(v(n))return f;var a=u(.6*r,2),o=u(1.2*r,2);return m(n,i,"M"+a+",-"+o+"V"+a+"H-"+o+"Z")}},"triangle-sw":{n:11,f:function(r,n,i){if(v(n))return f;var a=u(.6*r,2),o=u(1.2*r,2);return m(n,i,"M"+o+","+a+"H-"+a+"V-"+o+"Z")}},"triangle-nw":{n:12,f:function(r,n,i){if(v(n))return f;var a=u(.6*r,2),o=u(1.2*r,2);return m(n,i,"M-"+a+","+o+"V-"+a+"H"+o+"Z")}},pentagon:{n:13,f:function(r,n,i){if(v(n))return f;var a=u(.951*r,2),o=u(.588*r,2),s=u(-r,2),l=u(-.309*r,2);return m(n,i,"M"+a+","+l+"L"+o+","+u(.809*r,2)+"H-"+o+"L-"+a+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(r,n,i){if(v(n))return f;var a=u(r,2),o=u(r/2,2),s=u(r*p/2,2);return m(n,i,"M"+s+",-"+o+"V"+o+"L0,"+a+"L-"+s+","+o+"V-"+o+"L0,-"+a+"Z")}},hexagon2:{n:15,f:function(r,n,i){if(v(n))return f;var a=u(r,2),o=u(r/2,2),s=u(r*p/2,2);return m(n,i,"M-"+o+","+s+"H"+o+"L"+a+",0L"+o+",-"+s+"H-"+o+"L-"+a+",0Z")}},octagon:{n:16,f:function(r,n,i){if(v(n))return f;var a=u(.924*r,2),o=u(.383*r,2);return m(n,i,"M-"+o+",-"+a+"H"+o+"L"+a+",-"+o+"V"+o+"L"+o+","+a+"H-"+o+"L-"+a+","+o+"V-"+o+"Z")}},star:{n:17,f:function(r,n,i){if(v(n))return f;var a=1.4*r,o=u(.225*a,2),s=u(.951*a,2),l=u(.363*a,2),c=u(.588*a,2),h=u(-a,2),p=u(-.309*a,2),d=u(.118*a,2),y=u(.809*a,2);return m(n,i,"M"+o+","+p+"H"+s+"L"+l+","+d+"L"+c+","+y+"L0,"+u(.382*a,2)+"L-"+c+","+y+"L-"+l+","+d+"L-"+s+","+p+"H-"+o+"L0,"+h+"Z")}},hexagram:{n:18,f:function(r,n,i){if(v(n))return f;var a=u(.66*r,2),o=u(.38*r,2),s=u(.76*r,2);return m(n,i,"M-"+s+",0l-"+o+",-"+a+"h"+s+"l"+o+",-"+a+"l"+o+","+a+"h"+s+"l-"+o+","+a+"l"+o+","+a+"h-"+s+"l-"+o+","+a+"l-"+o+",-"+a+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(r,n,i){if(v(n))return f;var a=u(r*p*.8,2),o=u(.8*r,2),s=u(1.6*r,2),l=u(4*r,2),c="A "+l+","+l+" 0 0 1 ";return m(n,i,"M-"+a+","+o+c+a+","+o+c+"0,-"+s+c+"-"+a+","+o+"Z")}},"star-triangle-down":{n:20,f:function(r,n,i){if(v(n))return f;var a=u(r*p*.8,2),o=u(.8*r,2),s=u(1.6*r,2),l=u(4*r,2),c="A "+l+","+l+" 0 0 1 ";return m(n,i,"M"+a+",-"+o+c+"-"+a+",-"+o+c+"0,"+s+c+a+",-"+o+"Z")}},"star-square":{n:21,f:function(r,n,i){if(v(n))return f;var a=u(1.1*r,2),o=u(2*r,2),s="A "+o+","+o+" 0 0 1 ";return m(n,i,"M-"+a+",-"+a+s+"-"+a+","+a+s+a+","+a+s+a+",-"+a+s+"-"+a+",-"+a+"Z")}},"star-diamond":{n:22,f:function(r,n,i){if(v(n))return f;var a=u(1.4*r,2),o=u(1.9*r,2),s="A "+o+","+o+" 0 0 1 ";return m(n,i,"M-"+a+",0"+s+"0,"+a+s+a+",0"+s+"0,-"+a+s+"-"+a+",0Z")}},"diamond-tall":{n:23,f:function(r,n,i){if(v(n))return f;var a=u(.7*r,2),o=u(1.4*r,2);return m(n,i,"M0,"+o+"L"+a+",0L0,-"+o+"L-"+a+",0Z")}},"diamond-wide":{n:24,f:function(r,n,i){if(v(n))return f;var a=u(1.4*r,2),o=u(.7*r,2);return m(n,i,"M0,"+o+"L"+a+",0L0,-"+o+"L-"+a+",0Z")}},hourglass:{n:25,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+a+"Z")},noDot:!0},bowtie:{n:26,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z")},noDot:!0},"circle-cross":{n:27,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(r,n,i){if(v(n))return f;var a=u(r,2),o=u(r/h,2);return m(n,i,"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(r,n,i){if(v(n))return f;var a=u(1.3*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(r,n,i){if(v(n))return f;var a=u(1.3*r,2),o=u(.65*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM-"+o+",-"+o+"L"+o+","+o+"M-"+o+","+o+"L"+o+",-"+o)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(r,n,i){if(v(n))return f;var a=u(1.4*r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(r,n,i){if(v(n))return f;var a=u(1.2*r,2),o=u(.85*r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(r,n,i){if(v(n))return f;var a=u(r/2,2),o=u(r,2);return m(n,i,"M"+a+","+o+"V-"+o+"M"+(a-o)+",-"+o+"V"+o+"M"+o+","+a+"H-"+o+"M-"+o+","+(a-o)+"H"+o)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(r,n,i){if(v(n))return f;var a=u(1.2*r,2),o=u(1.6*r,2),s=u(.8*r,2);return m(n,i,"M-"+a+","+s+"L0,0M"+a+","+s+"L0,0M0,-"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(r,n,i){if(v(n))return f;var a=u(1.2*r,2),o=u(1.6*r,2),s=u(.8*r,2);return m(n,i,"M-"+a+",-"+s+"L0,0M"+a+",-"+s+"L0,0M0,"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(r,n,i){if(v(n))return f;var a=u(1.2*r,2),o=u(1.6*r,2),s=u(.8*r,2);return m(n,i,"M"+s+","+a+"L0,0M"+s+",-"+a+"L0,0M-"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(r,n,i){if(v(n))return f;var a=u(1.2*r,2),o=u(1.6*r,2),s=u(.8*r,2);return m(n,i,"M-"+s+","+a+"L0,0M-"+s+",-"+a+"L0,0M"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(r,n,i){if(v(n))return f;var a=u(1.4*r,2);return m(n,i,"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(r,n,i){if(v(n))return f;var a=u(1.4*r,2);return m(n,i,"M0,"+a+"V-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M0,0L-"+a+","+u(2*r,2)+"H"+a+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M0,0L-"+a+",-"+u(2*r,2)+"H"+a+"Z")},noDot:!0},"arrow-left":{n:47,f:function(r,n,i){if(v(n))return f;var a=u(2*r,2),o=u(r,2);return m(n,i,"M0,0L"+a+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-right":{n:48,f:function(r,n,i){if(v(n))return f;var a=u(2*r,2),o=u(r,2);return m(n,i,"M0,0L-"+a+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M-"+a+",0H"+a+"M0,0L-"+a+","+u(2*r,2)+"H"+a+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(r,n,i){if(v(n))return f;var a=u(r,2);return m(n,i,"M-"+a+",0H"+a+"M0,0L-"+a+",-"+u(2*r,2)+"H"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(r,n,i){if(v(n))return f;var a=u(2*r,2),o=u(r,2);return m(n,i,"M0,-"+o+"V"+o+"M0,0L"+a+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(r,n,i){if(v(n))return f;var a=u(2*r,2),o=u(r,2);return m(n,i,"M0,-"+o+"V"+o+"M0,0L-"+a+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(r,n,i){if(v(n))return f;var a=d/2.5,o=2*r*y(a),s=2*r*g(a);return m(n,i,"M0,0L"+-o+","+s+"L"+o+","+s+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(r,n,i){if(v(n))return f;var a=d/4,o=2*r*y(a),s=2*r*g(a);return m(n,i,"M0,0L"+-o+","+s+"A "+2*r+","+2*r+" 0 0 1 "+o+","+s+"Z")},backoff:.4,noDot:!0}}},97644:function(r){r.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(r,n,i){var a=i(38248),o=i(24040),s=i(54460),l=i(3400),c=i(93792);function u(r,n,i,o){var u=n["error_"+o]||{},f=[];if(u.visible&&-1!==["linear","log"].indexOf(i.type)){for(var h=c(u),p=0;p<r.length;p++){var d=r[p],y=d.i;if(void 0===y)y=p;else if(null===y)continue;var g=d[o];if(a(i.c2l(g))){var v=h(g,y);if(a(v[0])&&a(v[1])){var m=d[o+"s"]=g-v[0],x=d[o+"h"]=g+v[1];f.push(m,x)}}}var b=i._id,_=n._extremes[b],w=s.findExtremes(i,f,l.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(w.min),_.max=_.max.concat(w.max)}}r.exports=function(r){for(var n=r.calcdata,i=0;i<n.length;i++){var a=n[i],l=a[0].trace;if(!0===l.visible&&o.traceIs(l,"errorBarsOK")){var c=s.getFromId(r,l.xaxis),f=s.getFromId(r,l.yaxis);u(a,l,c,"x"),u(a,l,f,"y")}}}},93792:function(r){function n(r,n){return"percent"===r?function(r){return Math.abs(r*n/100)}:"constant"===r?function(){return Math.abs(n)}:"sqrt"===r?function(r){return Math.sqrt(Math.abs(r))}:void 0}r.exports=function(r){var i=r.type,a=r.symmetric;if("data"===i){var o=r.array||[];if(a)return function(r,n){var i=+o[n];return[i,i]};var s=r.arrayminus||[];return function(r,n){var i=+o[n],a=+s[n];return isNaN(i)&&isNaN(a)?[NaN,NaN]:[a||0,i||0]}}var l=n(i,r.value),c=n(i,r.valueminus);return a||void 0===r.valueminus?function(r){var n=l(r);return[n,n]}:function(r){return[c(r),l(r)]}}},65200:function(r,n,i){var a=i(38248),o=i(24040),s=i(3400),l=i(31780),c=i(97644);r.exports=function(r,n,i,u){var f="error_"+u.axis,h=l.newContainer(n,f),p=r[f]||{};function d(r,n){return s.coerce(p,h,c,r,n)}if(!1!==d("visible",void 0!==p.array||void 0!==p.value||"sqrt"===p.type)){var y=d("type","array"in p?"data":"percent"),g=!0;"sqrt"!==y&&(g=d("symmetric",!(("data"===y?"arrayminus":"valueminus")in p))),"data"===y?(d("array"),d("traceref"),g||(d("arrayminus"),d("tracerefminus"))):"percent"!==y&&"constant"!==y||(d("value"),g||d("valueminus"));var v="copy_"+u.inherit+"style";u.inherit&&(n["error_"+u.inherit]||{}).visible&&d(v,!(p.color||a(p.thickness)||a(p.width))),u.inherit&&h[v]||(d("color",i),d("thickness"),d("width",o.traceIs(n,"gl3d")?0:4))}}},64968:function(r,n,i){var a=i(3400),o=i(67824).overrideAll,s=i(97644),l={error_x:a.extendFlat({},s),error_y:a.extendFlat({},s)};delete l.error_x.copy_zstyle,delete l.error_y.copy_zstyle,delete l.error_y.copy_ystyle;var c={error_x:a.extendFlat({},s),error_y:a.extendFlat({},s),error_z:a.extendFlat({},s)};delete c.error_x.copy_ystyle,delete c.error_y.copy_ystyle,delete c.error_z.copy_ystyle,delete c.error_z.copy_zstyle,r.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l,bar:l,histogram:l,scatter3d:o(c,"calc","nested"),scattergl:o(l,"calc","nested")}},supplyDefaults:i(65200),calc:i(14880),makeComputeError:i(93792),plot:i(78512),style:i(92036),hoverInfo:function(r,n,i){(n.error_y||{}).visible&&(i.yerr=r.yh-r.y,n.error_y.symmetric||(i.yerrneg=r.y-r.ys)),(n.error_x||{}).visible&&(i.xerr=r.xh-r.x,n.error_x.symmetric||(i.xerrneg=r.x-r.xs))}}},78512:function(r,n,i){var a=i(33428),o=i(38248),s=i(43616),l=i(43028);r.exports=function(r,n,i,c){var u=i.xaxis,f=i.yaxis,h=c&&c.duration>0,p=r._context.staticPlot;n.each(function(n){var d,y=n[0].trace,g=y.error_x||{},v=y.error_y||{};y.ids&&(d=function(r){return r.id});var m=l.hasMarkers(y)&&y.marker.maxdisplayed>0;v.visible||g.visible||(n=[]);var x=a.select(this).selectAll("g.errorbar").data(n,d);if(x.exit().remove(),n.length){g.visible||x.selectAll("path.xerror").remove(),v.visible||x.selectAll("path.yerror").remove(),x.style("opacity",1);var b=x.enter().append("g").classed("errorbar",!0);h&&b.style("opacity",0).transition().duration(c.duration).style("opacity",1),s.setClipUrl(x,i.layerClipId,r),x.each(function(r){var n=a.select(this),i=(s={x:u.c2p(r.x),y:f.c2p(r.y)},void 0!==r.yh&&(s.yh=f.c2p(r.yh),s.ys=f.c2p(r.ys),o(s.ys)||(s.noYS=!0,s.ys=f.c2p(r.ys,!0))),void 0!==r.xh&&(s.xh=u.c2p(r.xh),s.xs=u.c2p(r.xs),o(s.xs)||(s.noXS=!0,s.xs=u.c2p(r.xs,!0))),s);if(!m||r.vis){var s,l,d=n.select("path.yerror");if(v.visible&&o(i.x)&&o(i.yh)&&o(i.ys)){var y=v.width;l="M"+(i.x-y)+","+i.yh+"h"+2*y+"m-"+y+",0V"+i.ys,i.noYS||(l+="m-"+y+",0h"+2*y),d.size()?h&&(d=d.transition().duration(c.duration).ease(c.easing)):d=n.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("yerror",!0),d.attr("d",l)}else d.remove();var x=n.select("path.xerror");if(g.visible&&o(i.y)&&o(i.xh)&&o(i.xs)){var b=(g.copy_ystyle?v:g).width;l="M"+i.xh+","+(i.y-b)+"v"+2*b+"m0,-"+b+"H"+i.xs,i.noXS||(l+="m0,-"+b+"v"+2*b),x.size()?h&&(x=x.transition().duration(c.duration).ease(c.easing)):x=n.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("xerror",!0),x.attr("d",l)}else x.remove()}})}})}},92036:function(r,n,i){var a=i(33428),o=i(76308);r.exports=function(r){r.each(function(r){var n=r[0].trace,i=n.error_y||{},s=n.error_x||{},l=a.select(this);l.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(o.stroke,i.color),s.copy_ystyle&&(s=i),l.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(o.stroke,s.color)})}},55756:function(r,n,i){var a=i(25376),o=i(65460).hoverlabel,s=i(92880).extendFlat;r.exports={hoverlabel:{bgcolor:s({},o.bgcolor,{arrayOk:!0}),bordercolor:s({},o.bordercolor,{arrayOk:!0}),font:a({arrayOk:!0,editType:"none"}),align:s({},o.align,{arrayOk:!0}),namelength:s({},o.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(r,n,i){var a=i(3400),o=i(24040);function s(r,n,i,o){o=o||a.identity,Array.isArray(r)&&(n[0][i]=o(r))}r.exports=function(r){for(var n=r.calcdata,i=r._fullLayout,l=0;l<n.length;l++){var c=n[l],u=c[0].trace;if(!o.traceIs(u,"pie-like")){var f=o.traceIs(u,"2dMap")?s:a.fillArray;f(u.hoverinfo,c,"hi",function(r){return function(n){return a.coerceHoverinfo({hoverinfo:n},{_module:r._module},i)}}(u)),u.hovertemplate&&f(u.hovertemplate,c,"ht"),u.hoverlabel&&(f(u.hoverlabel.bgcolor,c,"hbg"),f(u.hoverlabel.bordercolor,c,"hbc"),f(u.hoverlabel.font.size,c,"hts"),f(u.hoverlabel.font.color,c,"htc"),f(u.hoverlabel.font.family,c,"htf"),f(u.hoverlabel.font.weight,c,"htw"),f(u.hoverlabel.font.style,c,"hty"),f(u.hoverlabel.font.variant,c,"htv"),f(u.hoverlabel.namelength,c,"hnl"),f(u.hoverlabel.align,c,"hta"))}}}},62376:function(r,n,i){var a=i(24040),o=i(83292).hover;r.exports=function(r,n,i){var s=a.getComponentMethod("annotations","onClick")(r,r._hoverdata);function l(){r.emit("plotly_click",{points:r._hoverdata,event:n})}void 0!==i&&o(r,n,i,!0),r._hoverdata&&n&&n.target&&(s&&s.then?s.then(l):l(),n.stopImmediatePropagation&&n.stopImmediatePropagation())}},92456:function(r){r.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(r,n,i){var a=i(3400),o=i(55756),s=i(16132);r.exports=function(r,n,i,l){var c=a.extendFlat({},l.hoverlabel);n.hovertemplate&&(c.namelength=-1),s(r,n,function(i,s){return a.coerce(r,n,o,i,s)},c)}},10624:function(r,n,i){var a=i(3400);n.getSubplot=function(r){return r.subplot||r.xaxis+r.yaxis||r.geo},n.isTraceInSubplots=function(r,i){if("splom"===r.type){for(var a=r.xaxes||[],o=r.yaxes||[],s=0;s<a.length;s++)for(var l=0;l<o.length;l++)if(-1!==i.indexOf(a[s]+o[l]))return!0;return!1}return -1!==i.indexOf(n.getSubplot(r))},n.flat=function(r,n){for(var i=Array(r.length),a=0;a<r.length;a++)i[a]=n;return i},n.p2c=function(r,n){for(var i=Array(r.length),a=0;a<r.length;a++)i[a]=r[a].p2c(n);return i},n.getDistanceFunction=function(r,i,a,o){return"closest"===r?o||n.quadrature(i,a):"x"===r.charAt(0)?i:a},n.getClosest=function(r,n,i){if(!1!==i.index)i.index>=0&&i.index<r.length?i.distance=0:i.index=!1;else for(var a=0;a<r.length;a++){var o=n(r[a]);o<=i.distance&&(i.index=a,i.distance=o)}return i},n.inbox=function(r,n,i){return r*n<0||0===r?i:1/0},n.quadrature=function(r,n){return function(i){var a=r(i),o=n(i);return Math.sqrt(a*a+o*o)}},n.makeEventData=function(r,i,a){var o="index"in r?r.index:r.pointNumber,s={data:i._input,fullData:i,curveNumber:i.index,pointNumber:o};if(i._indexToPoints){var l=i._indexToPoints[o];1===l.length?s.pointIndex=l[0]:s.pointIndices=l}else s.pointIndex=o;return i._module.eventData?s=i._module.eventData(s,r,i,a,o):("xVal"in r?s.x=r.xVal:"x"in r&&(s.x=r.x),"yVal"in r?s.y=r.yVal:"y"in r&&(s.y=r.y),r.xa&&(s.xaxis=r.xa),r.ya&&(s.yaxis=r.ya),void 0!==r.zLabelVal&&(s.z=r.zLabelVal)),n.appendArrayPointValue(s,i,o),s},n.appendArrayPointValue=function(r,n,i){var l=n._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var u=l[c],f=o[u]||u;if(void 0===r[f]){var h=s(a.nestedProperty(n,u).get(),i);void 0!==h&&(r[f]=h)}}},n.appendArrayMultiPointValues=function(r,n,i){var l=n._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var u=l[c],f=o[u]||u;if(void 0===r[f]){for(var h=a.nestedProperty(n,u).get(),p=Array(i.length),d=0;d<i.length;d++)p[d]=s(h,i[d]);r[f]=p}}};var o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function s(r,n){return Array.isArray(n)?Array.isArray(r)&&Array.isArray(r[n[0]])?r[n[0]][n[1]]:void 0:r[n]}var l={x:!0,y:!0},c={"x unified":!0,"y unified":!0};n.isUnifiedHover=function(r){return"string"==typeof r&&!!c[r]},n.isXYhover=function(r){return"string"==typeof r&&!!l[r]}},83292:function(r,n,i){var a=i(33428),o=i(38248),s=i(49760),l=i(3400),c=l.pushUnique,u=l.strTranslate,f=l.strRotate,h=i(95924),p=i(72736),d=i(72213),y=i(43616),g=i(76308),v=i(86476),m=i(54460),x=i(33816).zindexSeparator,b=i(24040),_=i(10624),w=i(92456),T=i(77864),A=i(31140),k=w.YANGLE,M=Math.PI*k/180,S=1/Math.sin(M),E=Math.cos(M),I=Math.sin(M),L=w.HOVERARROWSIZE,C=w.HOVERTEXTPAD,O={box:!0,ohlc:!0,violin:!0,candlestick:!0},D={scatter:!0,scattergl:!0,splom:!0};function P(r,n){return r.distance-n.distance}function B(r){return[r.trace.index,r.index,r.x0,r.y0,r.name,r.attr,r.xa?r.xa._id:"",r.ya?r.ya._id:""].join(",")}n.hover=function(r,n,i,s){r=l.getGraphDiv(r);var u=n.target;l.throttle(r._fullLayout._uid+w.HOVERID,w.HOVERMINTIME,function(){!function(r,n,i,s,u){i||(i="xy"),"string"==typeof i&&(i=i.split(x)[0]);var f,p,y,w=Array.isArray(i)?i:[i],T=r._fullLayout,A=T.hoversubplots,k=T._plots||[],M=k[i],E=T._has("cartesian"),I=n.hovermode||T.hovermode,C="x"===(I||"").charAt(0),R="y"===(I||"").charAt(0);if(E&&(C||R)&&"axis"===A){for(var F=w.length,H=0;H<F;H++)if(k[f=w[H]]){p=m.getFromId(r,f,"x"),y=m.getFromId(r,f,"y");var Y=(C?p:y)._subplotsWith;if(Y&&Y.length)for(var Z=0;Z<Y.length;Z++)c(w,Y[Z])}}if(M&&"single"!==A){var X=M.overlays.map(function(r){return r.id});w=w.concat(X)}for(var K=w.length,J=Array(K),$=Array(K),Q=!1,tt=0;tt<K;tt++)if(k[f=w[tt]])Q=!0,J[tt]=k[f].xaxis,$[tt]=k[f].yaxis;else{if(!T[f]||!T[f]._subplot)return void l.warn("Unrecognized subplot: "+f);var te=T[f]._subplot;J[tt]=te.xaxis,$[tt]=te.yaxis}if(I&&!Q&&(I="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(I)||!r.calcdata||r.querySelector(".zoombox")||r._dragging)return v.unhoverRaw(r,n);var tr=T.hoverdistance;-1===tr&&(tr=1/0);var tn=T.spikedistance;-1===tn&&(tn=1/0);var ti,ta,to,ts,tl,tc,tu,tf,th,tp,td,ty,tg,tv=[],tm=[],tx={hLinePoint:null,vLinePoint:null},tb=!1;if(Array.isArray(n))for(I="array",to=0;to<n.length;to++)(tl=r.calcdata[n[to].curveNumber||0])&&(tc=tl[0].trace,"skip"!==tl[0].trace.hoverinfo&&(tm.push(tl),"h"===tc.orientation&&(tb=!0)));else{var t_,tw,tT=r.calcdata.slice();for(tT.sort(function(r,n){return(r[0].trace.zorder||0)-(n[0].trace.zorder||0)}),ts=0;ts<tT.length;ts++)"skip"!==(tc=(tl=tT[ts])[0].trace).hoverinfo&&_.isTraceInSubplots(tc,w)&&(tm.push(tl),"h"===tc.orientation&&(tb=!0));if(u){if(!1===h.triggerHandler(r,"plotly_beforehover",n))return;var tA=u.getBoundingClientRect();t_=n.clientX-tA.left,tw=n.clientY-tA.top,T._calcInverseTransform(r);var tk=l.apply3DTransform(T._invTransform)(t_,tw);if(t_=tk[0],tw=tk[1],t_<0||t_>J[0]._length||tw<0||tw>$[0]._length)return v.unhoverRaw(r,n)}else t_="xpx"in n?n.xpx:J[0]._length/2,tw="ypx"in n?n.ypx:$[0]._length/2;if(n.pointerX=t_+J[0]._offset,n.pointerY=tw+$[0]._offset,ti="xval"in n?_.flat(w,n.xval):_.p2c(J,t_),ta="yval"in n?_.flat(w,n.yval):_.p2c($,tw),!o(ti[0])||!o(ta[0]))return l.warn("Fx.hover failed",n,r),v.unhoverRaw(r,n)}var tM=1/0;function tS(i,a){for(ts=0;ts<tm.length;ts++)if((tl=tm[ts])&&tl[0]&&tl[0].trace&&!0===(tc=tl[0].trace).visible&&0!==tc._length&&-1===["carpet","contourcarpet"].indexOf(tc._module.name)){if(th=I,_.isUnifiedHover(th)&&(th=th.charAt(0)),"splom"===tc.type?tu=w[tf=0]:(tu=_.getSubplot(tc),tf=w.indexOf(tu)),ty={cd:tl,trace:tc,xa:J[tf],ya:$[tf],maxHoverDistance:tr,maxSpikeDistance:tn,index:!1,distance:Math.min(tM,tr),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:g.defaultLine,name:tc.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},T[tu]&&(ty.subplot=T[tu]._subplot),T._splomScenes&&T._splomScenes[tc.uid]&&(ty.scene=T._splomScenes[tc.uid]),"array"===th){var s=n[ts];"pointNumber"in s?(ty.index=s.pointNumber,th="closest"):(th="","xval"in s&&(tp=s.xval,th="x"),"yval"in s&&(td=s.yval,th=th?"closest":"y"))}else void 0!==i&&void 0!==a?(tp=i,td=a):(tp=ti[tf],td=ta[tf]);if(tg=tv.length,0!==tr){if(tc._module&&tc._module.hoverPoints){var c=tc._module.hoverPoints(ty,tp,td,th,{finiteRange:!0,hoverLayer:T._hoverlayer,hoversubplots:A,gd:r});if(c)for(var u,f=0;f<c.length;f++)o((u=c[f]).x0)&&o(u.y0)&&tv.push(function(r,n){var i=r.index,a=r.trace||{},s=r.cd[0],c=r.cd[i]||{};function u(r){return r||o(r)&&0===r}var f=Array.isArray(i)?function(r,n){var o=l.castOption(s,i,r);return u(o)?o:l.extractOption({},a,"",n)}:function(r,n){return l.extractOption(c,a,r,n)};function h(n,i,a){var o=f(i,a);u(o)&&(r[n]=o)}if(h("hoverinfo","hi","hoverinfo"),h("bgcolor","hbg","hoverlabel.bgcolor"),h("borderColor","hbc","hoverlabel.bordercolor"),h("fontFamily","htf","hoverlabel.font.family"),h("fontSize","hts","hoverlabel.font.size"),h("fontColor","htc","hoverlabel.font.color"),h("fontWeight","htw","hoverlabel.font.weight"),h("fontStyle","hty","hoverlabel.font.style"),h("fontVariant","htv","hoverlabel.font.variant"),h("nameLength","hnl","hoverlabel.namelength"),h("textAlign","hta","hoverlabel.align"),r.posref="y"===n||"closest"===n&&"h"===a.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=l.constrain(r.x0,0,r.xa._length),r.x1=l.constrain(r.x1,0,r.xa._length),r.y0=l.constrain(r.y0,0,r.ya._length),r.y1=l.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:m.hoverLabelText(r.xa,r.xLabelVal,a.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal)),void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:m.hoverLabelText(r.ya,r.yLabelVal,a.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal)),void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal)),!(isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0)){var p=m.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text;void 0!==r.xerrneg?r.xLabel+=" +"+p+" / -"+m.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+=" ± "+p,"x"===n&&(r.distance+=1)}if(!(isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0)){var d=m.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text;void 0!==r.yerrneg?r.yLabel+=" +"+d+" / -"+m.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+=" ± "+d,"y"===n&&(r.distance+=1)}var y=r.hoverinfo||r.trace.hoverinfo;return y&&"all"!==y&&(-1===(y=Array.isArray(y)?y:y.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===y.indexOf("y")&&(r.yLabel=void 0),-1===y.indexOf("z")&&(r.zLabel=void 0),-1===y.indexOf("text")&&(r.text=void 0),-1===y.indexOf("name")&&(r.name=void 0)),r}(u,I))}else l.log("Unrecognized trace type in hover:",tc)}if("closest"===I&&tv.length>tg&&(tv.splice(0,tg),tM=tv[0].distance),E&&0!==tn&&0===tv.length){ty.distance=tn,ty.index=!1;var h=tc._module.hoverPoints(ty,tp,td,"closest",{hoverLayer:T._hoverlayer});if(h&&(h=h.filter(function(r){return r.spikeDistance<=tn})),h&&h.length){var p,d=h.filter(function(r){return r.xa.showspikes&&"hovered data"!==r.xa.spikesnap});if(d.length){var y=d[0];o(y.x0)&&o(y.y0)&&(p=tI(y),(!tx.vLinePoint||tx.vLinePoint.spikeDistance>p.spikeDistance)&&(tx.vLinePoint=p))}var v=h.filter(function(r){return r.ya.showspikes&&"hovered data"!==r.ya.spikesnap});if(v.length){var x=v[0];o(x.x0)&&o(x.y0)&&(p=tI(x),(!tx.hLinePoint||tx.hLinePoint.spikeDistance>p.spikeDistance)&&(tx.hLinePoint=p))}}}}}function tE(r,n,i){for(var a,o=null,s=1/0,l=0;l<r.length;l++)p&&p._id!==r[l].xa._id||y&&y._id!==r[l].ya._id||(a=r[l].spikeDistance,i&&0===l&&(a=-1/0),a<=s&&a<=n&&(o=r[l],s=a));return o}function tI(r){return r?{xa:r.xa,ya:r.ya,x:void 0!==r.xSpike?r.xSpike:(r.x0+r.x1)/2,y:void 0!==r.ySpike?r.ySpike:(r.y0+r.y1)/2,distance:r.distance,spikeDistance:r.spikeDistance,curveNumber:r.trace.index,color:r.color,pointNumber:r.index}:null}tS();var tL={fullLayout:T,container:T._hoverlayer,event:n},tC=r._spikepoints,tO={vLinePoint:tx.vLinePoint,hLinePoint:tx.hLinePoint};r._spikepoints=tO;var tD=function(){var r=tv.filter(function(r){return p&&p._id===r.xa._id&&y&&y._id===r.ya._id}),n=tv.filter(function(r){return!(p&&p._id===r.xa._id&&y&&y._id===r.ya._id)});r.sort(P),n.sort(P),tv=function(r,n){for(var i=n.charAt(0),a=[],o=[],s=[],l=0;l<r.length;l++){var c=r[l];b.traceIs(c.trace,"bar-like")||b.traceIs(c.trace,"box-violin")?s.push(c):c.trace[i+"period"]?o.push(c):a.push(c)}return a.concat(o).concat(s)}(tv=r.concat(n),I)};tD();var tP=I.charAt(0),tB=("x"===tP||"y"===tP)&&tv[0]&&D[tv[0].trace.type];if(E&&0!==tn&&0!==tv.length){var tR=tE(tv.filter(function(r){return r.ya.showspikes}),tn,tB);tx.hLinePoint=tI(tR);var tz=tE(tv.filter(function(r){return r.xa.showspikes}),tn,tB);tx.vLinePoint=tI(tz)}if(0===tv.length)return v.unhoverRaw(r,n),!E||null===tx.hLinePoint&&null===tx.vLinePoint||V(tC)&&j(r,tx,tL);if(E&&V(tC)&&j(r,tx,tL),_.isXYhover(th)&&0!==tv[0].length&&"splom"!==tv[0].trace.type){var tF=tv[0],tN=(tv=O[tF.trace.type]?tv.filter(function(r){return r.trace.index===tF.trace.index}):[tF]).length;tS(q("x",tF,T),q("y",tF,T));var tU,tj=[],tV={},tH=0,tq=function(r){var n=O[r.trace.type]?B(r):r.trace.index;if(tV[n]){var i=tV[n]-1,a=tj[i];i>0&&Math.abs(r.distance)<Math.abs(a.distance)&&(tj[i]=r)}else tH++,tV[n]=tH,tj.push(r)};for(tU=0;tU<tN;tU++)tq(tv[tU]);for(tU=tv.length-1;tU>tN-1;tU--)tq(tv[tU]);tv=tj,tD()}var tG=r._hoverdata,tW=[],tY=G(r),tZ=W(r);for(to=0;to<tv.length;to++){var tX=tv[to],tK=_.makeEventData(tX,tX.trace,tX.cd);if(!1!==tX.hovertemplate){var tJ=!1;tX.cd[tX.index]&&tX.cd[tX.index].ht&&(tJ=tX.cd[tX.index].ht),tX.hovertemplate=tJ||tX.trace.hovertemplate||!1}if(tX.xa&&tX.ya){var t$=tX.x0+tX.xa._offset,tQ=tX.x1+tX.xa._offset,t0=tX.y0+tX.ya._offset,t1=tX.y1+tX.ya._offset,t2=Math.min(t$,tQ),t3=Math.max(t$,tQ),t4=Math.min(t0,t1),t6=Math.max(t0,t1);tK.bbox={x0:t2+tZ,x1:t3+tZ,y0:t4+tY,y1:t6+tY}}tX.eventData=[tK],tW.push(tK)}r._hoverdata=tW;var t5="y"===I&&(tm.length>1||tv.length>1)||"closest"===I&&tb&&tv.length>1,t8=g.combine(T.plot_bgcolor||g.background,T.paper_bgcolor),t7=z(tv,{gd:r,hovermode:I,rotateLabels:t5,bgColor:t8,container:T._hoverlayer,outerContainer:T._paper.node(),commonLabelOpts:T.hoverlabel,hoverdistance:T.hoverdistance}),t9=t7.hoverLabels;if(_.isUnifiedHover(I)||(function(r,n,i,a){var o,s,l,c,u,f,h,p=n?"xa":"ya",d=n?"ya":"xa",y=0,g=1,v=r.size(),m=Array(v),x=0,b=a.minX,_=a.maxX,w=a.minY,T=a.maxY,A=function(r){return r*i._invScaleX},k=function(r){return r*i._invScaleY};function M(r){var n=r[0],i=r[r.length-1];if(s=n.pmin-n.pos-n.dp+n.size,l=i.pos+i.dp+i.size-n.pmax,s>.01){for(u=r.length-1;u>=0;u--)r[u].dp+=s;o=!1}if(!(l<.01)){if(s<-.01){for(u=r.length-1;u>=0;u--)r[u].dp-=l;o=!1}if(o){var a=0;for(c=0;c<r.length;c++)(f=r[c]).pos+f.dp+f.size>n.pmax&&a++;for(c=r.length-1;c>=0&&!(a<=0);c--)(f=r[c]).pos>n.pmax-1&&(f.del=!0,a--);for(c=0;c<r.length&&!(a<=0);c++)if((f=r[c]).pos<n.pmin+1)for(f.del=!0,a--,l=2*f.size,u=r.length-1;u>=0;u--)r[u].dp-=l;for(c=r.length-1;c>=0&&!(a<=0);c--)(f=r[c]).pos+f.dp+f.size>n.pmax&&(f.del=!0,a--)}}}for(r.each(function(r){var a=r[p],o=r[d],s="x"===a._id.charAt(0),l=a.range;0===x&&l&&l[0]>l[1]!==s&&(g=-1);var c=0,u=s?i.width:i.height;if("x"===i.hovermode||"y"===i.hovermode){var f,h,y=N(r,n),v=r.anchor,M="end"===v?-1:1;if("middle"===v)h=(f=r.crossPos+(s?k(y.y-r.by/2):A(r.bx/2+r.tx2width/2)))+(s?k(r.by):A(r.bx));else if(s)h=(f=r.crossPos+k(L+y.y)-k(r.by/2-L))+k(r.by);else{var E=A(M*L+y.x),I=E+A(M*r.bx);f=r.crossPos+Math.min(E,I),h=r.crossPos+Math.max(E,I)}s?void 0!==w&&void 0!==T&&Math.min(h,T)-Math.max(f,w)>1&&("left"===o.side?(c=o._mainLinePosition,u=i.width):u=o._mainLinePosition):void 0!==b&&void 0!==_&&Math.min(h,_)-Math.max(f,b)>1&&("top"===o.side?(c=o._mainLinePosition,u=i.height):u=o._mainLinePosition)}m[x++]=[{datum:r,traceIndex:r.trace.index,dp:0,pos:r.pos,posref:r.posref,size:r.by*(s?S:1)/2,pmin:c,pmax:u}]}),m.sort(function(r,n){return r[0].posref-n[0].posref||g*(n[0].traceIndex-r[0].traceIndex)});!o&&y<=v;){for(y++,o=!0,c=0;c<m.length-1;){var E=m[c],I=m[c+1],C=E[E.length-1],O=I[0];if((s=C.pos+C.dp+C.size-O.pos-O.dp+O.size)>.01){for(u=I.length-1;u>=0;u--)I[u].dp+=s;for(E.push.apply(E,I),m.splice(c+1,1),h=0,u=E.length-1;u>=0;u--)h+=E[u].dp;for(l=h/E.length,u=E.length-1;u>=0;u--)E[u].dp-=l;o=!1}else c++}m.forEach(M)}for(c=m.length-1;c>=0;c--){var D=m[c];for(u=D.length-1;u>=0;u--){var P=D[u],B=P.datum;B.offset=P.dp,B.del=P.del}}}(t9,t5,T,t7.commonLabelBoundingBox),U(t9,t5,T._invScaleX,T._invScaleY)),u&&u.tagName){var et=b.getComponentMethod("annotations","hasClickToShow")(r,tW);d(a.select(u),et?"pointer":"")}u&&!s&&function(r,n,i){if(!i||i.length!==r._hoverdata.length)return!0;for(var a=i.length-1;a>=0;a--){var o=i[a],s=r._hoverdata[a];if(o.curveNumber!==s.curveNumber||String(o.pointNumber)!==String(s.pointNumber)||String(o.pointNumbers)!==String(s.pointNumbers))return!0}return!1}(r,0,tG)&&(tG&&r.emit("plotly_unhover",{event:n,points:tG}),r.emit("plotly_hover",{event:n,points:r._hoverdata,xaxes:J,yaxes:$,xvals:ti,yvals:ta}))}(r,n,i,s,u)})},n.loneHover=function(r,n){var i=!0;Array.isArray(r)||(i=!1,r=[r]);var o=n.gd,s=G(o),l=W(o),c=z(r.map(function(r){var i=r._x0||r.x0||r.x||0,a=r._x1||r.x1||r.x||0,c=r._y0||r.y0||r.y||0,u=r._y1||r.y1||r.y||0,f=r.eventData;if(f){var h=Math.min(i,a),p=Math.max(i,a),d=Math.min(c,u),y=Math.max(c,u),v=r.trace;if(b.traceIs(v,"gl3d")){var m=o._fullLayout[v.scene]._scene.container,x=m.offsetLeft,_=m.offsetTop;h+=x,p+=x,d+=_,y+=_}f.bbox={x0:h+l,x1:p+l,y0:d+s,y1:y+s},n.inOut_bbox&&n.inOut_bbox.push(f.bbox)}else f=!1;return{color:r.color||g.defaultLine,x0:r.x0||r.x||0,x1:r.x1||r.x||0,y0:r.y0||r.y||0,y1:r.y1||r.y||0,xLabel:r.xLabel,yLabel:r.yLabel,zLabel:r.zLabel,text:r.text,name:r.name,idealAlign:r.idealAlign,borderColor:r.borderColor,fontFamily:r.fontFamily,fontSize:r.fontSize,fontColor:r.fontColor,fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontVariant:r.fontVariant,nameLength:r.nameLength,textAlign:r.textAlign,trace:r.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:r.hovertemplate||!1,hovertemplateLabels:r.hovertemplateLabels||!1,eventData:f}}),{gd:o,hovermode:"closest",rotateLabels:!1,bgColor:n.bgColor||g.background,container:a.select(n.container),outerContainer:n.outerContainer||n.container}).hoverLabels,u=0,f=0;return c.sort(function(r,n){return r.y0-n.y0}).each(function(r,i){var a=r.y0-r.by/2;r.offset=a-5<u?u-a+5:0,u=a+r.by+r.offset,i===n.anchorIndex&&(f=r.offset)}).each(function(r){r.offset-=f}),U(c,!1,o._fullLayout._invScaleX,o._fullLayout._invScaleY),i?c:c.node()};var R=/<extra>([\s\S]*)<\/extra>/;function z(r,n){var i=n.gd,o=i._fullLayout,s=n.hovermode,c=n.rotateLabels,h=n.bgColor,d=n.container,v=n.outerContainer,m=n.commonLabelOpts||{};if(0===r.length)return[[]];var x=n.fontFamily||w.HOVERFONT,M=n.fontSize||w.HOVERFONTSIZE,S=n.fontWeight||o.font.weight,E=n.fontStyle||o.font.style,I=n.fontVariant||o.font.variant,O=n.fontTextcase||o.font.textcase,D=n.fontLineposition||o.font.lineposition,P=n.fontShadow||o.font.shadow,R=r[0],z=R.xa,N=R.ya,U=s.charAt(0),j=U+"Label",V=R[j];if(void 0===V&&"multicategory"===z.type)for(var H=0;H<r.length&&void 0===(V=r[H][j]);H++);var q=Y(i,v),G=q.top,W=q.width,Z=q.height,X=void 0!==V&&R.distance<=n.hoverdistance&&("x"===s||"y"===s);if(X){var K,J,$=!0;for(K=0;K<r.length;K++)if($&&void 0===r[K].zLabel&&($=!1),J=r[K].hoverinfo||r[K].trace.hoverinfo){var Q=Array.isArray(J)?J:J.split("+");if(-1===Q.indexOf("all")&&-1===Q.indexOf(s)){X=!1;break}}$&&(X=!1)}var tt=d.selectAll("g.axistext").data(X?[0]:[]);tt.enter().append("g").classed("axistext",!0),tt.exit().remove();var te={minX:0,maxX:0,minY:0,maxY:0};if(tt.each(function(){var r=a.select(this),n=l.ensureSingle(r,"path","",function(r){r.style({"stroke-width":"1px"})}),c=l.ensureSingle(r,"text","",function(r){r.attr("data-notex",1)}),f=m.bgcolor||g.defaultLine,h=m.bordercolor||g.contrast(f),d=g.contrast(f),v=m.font,b={weight:v.weight||S,style:v.style||E,variant:v.variant||I,textcase:v.textcase||O,lineposition:v.lineposition||D,shadow:v.shadow||P,family:v.family||x,size:v.size||M,color:v.color||d};n.style({fill:f,stroke:h}),c.text(V).call(y.font,b).call(p.positionText,0,0).call(p.convertToTspans,i),r.attr("transform","");var _,w,T=Y(i,c.node());if("x"===s){var A="top"===z.side?"-":"";c.attr("text-anchor","middle").call(p.positionText,0,"top"===z.side?G-T.bottom-L-C:G-T.top+L+C),_=z._offset+(R.x0+R.x1)/2,w=N._offset+("top"===z.side?0:N._length);var k=T.width/2+C,B=_;_<k?B=k:_>o.width-k&&(B=o.width-k),n.attr("d","M"+(_-B)+",0L"+(_-B+L)+","+A+L+"H"+k+"v"+A+(2*C+T.height)+"H"+-k+"V"+A+L+"H"+(_-B-L)+"Z"),_=B,te.minX=_-k,te.maxX=_+k,"top"===z.side?(te.minY=w-(2*C+T.height),te.maxY=w-C):(te.minY=w+C,te.maxY=w+(2*C+T.height))}else{"right"===N.side?(F="start",U=1,j="",_=z._offset+z._length):(F="end",U=-1,j="-",_=z._offset),w=N._offset+(R.y0+R.y1)/2,c.attr("text-anchor",F),n.attr("d","M0,0L"+j+L+","+L+"V"+(C+T.height/2)+"h"+j+(2*C+T.width)+"V-"+(C+T.height/2)+"H"+j+L+"V-"+L+"Z"),te.minY=w-(C+T.height/2),te.maxY=w+(C+T.height/2),"right"===N.side?(te.minX=_+L,te.maxX=_+L+(2*C+T.width)):(te.minX=_-L-(2*C+T.width),te.maxX=_-L);var F,U,j,H,q=T.height/2,W=G-T.top-q,Z="clip"+o._uid+"commonlabel"+N._id;if(_<T.width+2*C+L){H="M-"+(L+C)+"-"+q+"h-"+(T.width-C)+"V"+q+"h"+(T.width-C)+"Z";var X=T.width-_+C;p.positionText(c,X,W),"end"===F&&c.selectAll("tspan").each(function(){var r=a.select(this),n=y.tester.append("text").text(r.text()).call(y.font,b),o=Y(i,n.node());Math.round(o.width)<Math.round(T.width)&&r.attr("x",X-o.width),n.remove()})}else p.positionText(c,U*(C+L),W),H=null;var K=o._topclips.selectAll("#"+Z).data(H?[0]:[]);K.enter().append("clipPath").attr("id",Z).append("path"),K.exit().remove(),K.select("path").attr("d",H),y.setClipUrl(c,H?Z:null,i)}r.attr("transform",u(_,w))}),_.isUnifiedHover(s)){d.selectAll("g.hovertext").remove();var tr=r.filter(function(r){return"none"!==r.hoverinfo});if(0===tr.length)return[];var tn=o.hoverlabel,ti=tn.font,ta={showlegend:!0,legend:{title:{text:V,font:ti},font:ti,bgcolor:tn.bgcolor,bordercolor:tn.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:o.legend?o.legend.traceorder:void 0,orientation:"v"}},to={font:ti};T(ta,to,i._fullData);var ts=to.legend;ts.entries=[];for(var tl=0;tl<tr.length;tl++){var tc=tr[tl];if("none"!==tc.hoverinfo){var tu=F(tc,!0,s,o,V),tf=tu[0],th=tu[1];tc.name=th,tc.text=""!==th?th+" : "+tf:tf;var tp=tc.cd[tc.index];tp&&(tp.mc&&(tc.mc=tp.mc),tp.mcc&&(tc.mc=tp.mcc),tp.mlc&&(tc.mlc=tp.mlc),tp.mlcc&&(tc.mlc=tp.mlcc),tp.mlw&&(tc.mlw=tp.mlw),tp.mrc&&(tc.mrc=tp.mrc),tp.dir&&(tc.dir=tp.dir)),tc._distinct=!0,ts.entries.push([tc])}}ts.entries.sort(function(r,n){return r[0].trace.index-n[0].trace.index}),ts.layer=d,ts._inHover=!0,ts._groupTitleFont=tn.grouptitlefont,A(i,ts);var td,ty,tg,tv,tm=d.select("g.legend"),tx=Y(i,tm.node()),tb=tx.width+2*C,t_=tx.height+2*C,tw=tr[0],tT=(tw.x0+tw.x1)/2,tA=(tw.y0+tw.y1)/2,tk=!(b.traceIs(tw.trace,"bar-like")||b.traceIs(tw.trace,"box-violin"));"y"===U?tk?(ty=tA-C,td=tA+C):(ty=Math.min.apply(null,tr.map(function(r){return Math.min(r.y0,r.y1)})),td=Math.max.apply(null,tr.map(function(r){return Math.max(r.y0,r.y1)}))):ty=td=l.mean(tr.map(function(r){return(r.y0+r.y1)/2}))-t_/2,"x"===U?tk?(tg=tT+C,tv=tT-C):(tg=Math.max.apply(null,tr.map(function(r){return Math.max(r.x0,r.x1)})),tv=Math.min.apply(null,tr.map(function(r){return Math.min(r.x0,r.x1)}))):tg=tv=l.mean(tr.map(function(r){return(r.x0+r.x1)/2}))-tb/2;var tM,tS,tE=z._offset,tI=N._offset;return tv+=tE-tb,ty+=tI-t_,tM=((tg+=tE)+tb<W&&tg>=0?tg:tv+tb<W&&tv>=0?tv:tE+tb<W?tE:tg-tT<tT-tv+tb?W-tb:0)+C,tS=((td+=tI)+t_<Z&&td>=0?td:ty+t_<Z&&ty>=0?ty:tI+t_<Z?tI:td-tA<tA-ty+t_?Z-t_:0)+C,tm.attr("transform",u(tM-1,tS-1)),tm}var tL=d.selectAll("g.hovertext").data(r,function(r){return B(r)});return tL.enter().append("g").classed("hovertext",!0).each(function(){var r=a.select(this);r.append("rect").call(g.fill,g.addOpacity(h,.8)),r.append("text").classed("name",!0),r.append("path").style("stroke-width","1px"),r.append("text").classed("nums",!0).call(y.font,{weight:S,style:E,variant:I,textcase:O,lineposition:D,shadow:P,family:x,size:M})}),tL.exit().remove(),tL.each(function(r){var n=a.select(this).attr("transform",""),l=r.color;Array.isArray(l)&&(l=l[r.eventData[0].pointNumber]);var d=r.bgcolor||l,v=g.combine(g.opacity(d)?d:g.defaultLine,h),m=g.combine(g.opacity(l)?l:g.defaultLine,h),b=r.borderColor||g.contrast(v),_=F(r,X,s,o,V,n),w=_[0],T=_[1],A=n.select("text.nums").call(y.font,{family:r.fontFamily||x,size:r.fontSize||M,color:r.fontColor||b,weight:r.fontWeight||S,style:r.fontStyle||E,variant:r.fontVariant||I,textcase:r.fontTextcase||O,lineposition:r.fontLineposition||D,shadow:r.fontShadow||P}).text(w).attr("data-notex",1).call(p.positionText,0,0).call(p.convertToTspans,i),B=n.select("text.name"),R=0,z=0;if(T&&T!==w){B.call(y.font,{family:r.fontFamily||x,size:r.fontSize||M,color:m,weight:r.fontWeight||S,style:r.fontStyle||E,variant:r.fontVariant||I,textcase:r.fontTextcase||O,lineposition:r.fontLineposition||D,shadow:r.fontShadow||P}).text(T).attr("data-notex",1).call(p.positionText,0,0).call(p.convertToTspans,i);var N=Y(i,B.node());R=N.width+2*C,z=N.height+2*C}else B.remove(),n.select("rect").remove();n.select("path").style({fill:v,stroke:b});var U=r.xa._offset+(r.x0+r.x1)/2,j=r.ya._offset+(r.y0+r.y1)/2,H=Math.abs(r.x1-r.x0),q=Math.abs(r.y1-r.y0),K=Y(i,A.node()),J=K.width/o._invScaleX,$=K.height/o._invScaleY;r.ty0=(G-K.top)/o._invScaleY,r.bx=J+2*C,r.by=Math.max($+2*C,z),r.anchor="start",r.txwidth=J,r.tx2width=R,r.offset=0;var Q,tt,te=(J+L+C+R)*o._invScaleX;if(c)r.pos=U,Q=j+q/2+te<=Z,tt=j-q/2-te>=0,"top"!==r.idealAlign&&Q||!tt?Q?(j+=q/2,r.anchor="start"):r.anchor="middle":(j-=q/2,r.anchor="end"),r.crossPos=j;else{if(r.pos=j,Q=U+H/2+te<=W,tt=U-H/2-te>=0,"left"!==r.idealAlign&&Q||!tt){if(Q)U+=H/2,r.anchor="start";else{r.anchor="middle";var tr=te/2,tn=U+tr-W,ti=U-tr;tn>0&&(U-=tn),ti<0&&(U+=-ti)}}else U-=H/2,r.anchor="end";r.crossPos=U}A.attr("text-anchor",r.anchor),R&&B.attr("text-anchor",r.anchor),n.attr("transform",u(U,j)+(c?f(k):""))}),{hoverLabels:tL,commonLabelBoundingBox:te}}function F(r,n,i,a,o,s){var c="",u="";void 0!==r.nameOverride&&(r.name=r.nameOverride),r.name&&(r.trace._meta&&(r.name=l.templateString(r.name,r.trace._meta)),c=H(r.name,r.nameLength));var f=i.charAt(0);void 0!==r.zLabel?(void 0!==r.xLabel&&(u+="x: "+r.xLabel+"<br>"),void 0!==r.yLabel&&(u+="y: "+r.yLabel+"<br>"),"choropleth"!==r.trace.type&&"choroplethmapbox"!==r.trace.type&&(u+=(u?"z: ":"")+r.zLabel)):n&&r[f+"Label"]===o?u=r[("x"===f?"y":"x")+"Label"]||"":void 0===r.xLabel?void 0!==r.yLabel&&"scattercarpet"!==r.trace.type&&(u=r.yLabel):u=void 0===r.yLabel?r.xLabel:"("+r.xLabel+", "+r.yLabel+")",!r.text&&0!==r.text||Array.isArray(r.text)||(u+=(u?"<br>":"")+r.text),void 0!==r.extraText&&(u+=(u?"<br>":"")+r.extraText),s&&""===u&&!r.hovertemplate&&(""===c&&s.remove(),u=c);var h=r.hovertemplate||!1;if(h){var p=r.hovertemplateLabels||r;r[f+"Label"]!==o&&(p[f+"other"]=p[f+"Val"],p[f+"otherLabel"]=p[f+"Label"]),u=(u=l.hovertemplateString(h,p,a._d3locale,r.eventData[0]||{},r.trace._meta)).replace(R,function(n,i){return c=H(i,r.nameLength),""})}return[u,c]}function N(r,n){var i=0,a=r.offset;return n&&(a*=-I,i=r.offset*E),{x:i,y:a}}function U(r,n,i,o){var s=function(r){return r*i},l=function(r){return r*o};r.each(function(r){var i=a.select(this);if(r.del)return i.remove();var o,c,u,f=i.select("text.nums"),h=r.anchor,d="end"===h?-1:1,g=(u=(c=(o=({start:1,end:-1,middle:0})[r.anchor])*(L+C))+o*(r.txwidth+C),"middle"===r.anchor&&(c-=r.tx2width/2,u+=r.txwidth/2+C),{alignShift:o,textShiftX:c,text2ShiftX:u}),v=N(r,n),m=v.x,x=v.y,b="middle"===h;i.select("path").attr("d",b?"M-"+s(r.bx/2+r.tx2width/2)+","+l(x-r.by/2)+"h"+s(r.bx)+"v"+l(r.by)+"h-"+s(r.bx)+"Z":"M0,0L"+s(d*L+m)+","+l(L+x)+"v"+l(r.by/2-L)+"h"+s(d*r.bx)+"v-"+l(r.by)+"H"+s(d*L+m)+"V"+l(x-L)+"Z");var _=m+g.textShiftX,w=x+r.ty0-r.by/2+C,T=r.textAlign||"auto";"auto"!==T&&("left"===T&&"start"!==h?(f.attr("text-anchor","start"),_=b?-r.bx/2-r.tx2width/2+C:-r.bx-C):"right"===T&&"end"!==h&&(f.attr("text-anchor","end"),_=b?r.bx/2-r.tx2width/2-C:r.bx+C)),f.call(p.positionText,s(_),l(w)),r.tx2width&&(i.select("text.name").call(p.positionText,s(g.text2ShiftX+g.alignShift*C+m),l(x+r.ty0-r.by/2+C)),i.select("rect").call(y.setRect,s(g.text2ShiftX+(g.alignShift-1)*r.tx2width/2+m),l(x-r.by/2-1),s(r.tx2width),l(r.by+2)))})}function j(r,n,i){var a,o,l=i.container,c=i.fullLayout,u=c._size,f=i.event,h=!!n.hLinePoint,p=!!n.vLinePoint;if(l.selectAll(".spikeline").remove(),p||h){var d=g.combine(c.plot_bgcolor,c.paper_bgcolor);if(h){var v,x,b=n.hLinePoint;a=b&&b.xa,"cursor"===(o=b&&b.ya).spikesnap?(v=f.pointerX,x=f.pointerY):(v=a._offset+b.x,x=o._offset+b.y);var _,w,T=1.5>s.readability(b.color,d)?g.contrast(d):b.color,A=o.spikemode,k=o.spikethickness,M=o.spikecolor||T,S=m.getPxPosition(r,o);if(-1!==A.indexOf("toaxis")||-1!==A.indexOf("across")){if(-1!==A.indexOf("toaxis")&&(_=S,w=v),-1!==A.indexOf("across")){var E=o._counterDomainMin,I=o._counterDomainMax;"free"===o.anchor&&(E=Math.min(E,o.position),I=Math.max(I,o.position)),_=u.l+E*u.w,w=u.l+I*u.w}l.insert("line",":first-child").attr({x1:_,x2:w,y1:x,y2:x,"stroke-width":k,stroke:M,"stroke-dasharray":y.dashStyle(o.spikedash,k)}).classed("spikeline",!0).classed("crisp",!0),l.insert("line",":first-child").attr({x1:_,x2:w,y1:x,y2:x,"stroke-width":k+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==A.indexOf("marker")&&l.insert("circle",":first-child").attr({cx:S+("right"!==o.side?k:-k),cy:x,r:k,fill:M}).classed("spikeline",!0)}if(p){var L,C,O=n.vLinePoint;a=O&&O.xa,o=O&&O.ya,"cursor"===a.spikesnap?(L=f.pointerX,C=f.pointerY):(L=a._offset+O.x,C=o._offset+O.y);var D,P,B=1.5>s.readability(O.color,d)?g.contrast(d):O.color,R=a.spikemode,z=a.spikethickness,F=a.spikecolor||B,N=m.getPxPosition(r,a);if(-1!==R.indexOf("toaxis")||-1!==R.indexOf("across")){if(-1!==R.indexOf("toaxis")&&(D=N,P=C),-1!==R.indexOf("across")){var U=a._counterDomainMin,j=a._counterDomainMax;"free"===a.anchor&&(U=Math.min(U,a.position),j=Math.max(j,a.position)),D=u.t+(1-j)*u.h,P=u.t+(1-U)*u.h}l.insert("line",":first-child").attr({x1:L,x2:L,y1:D,y2:P,"stroke-width":z,stroke:F,"stroke-dasharray":y.dashStyle(a.spikedash,z)}).classed("spikeline",!0).classed("crisp",!0),l.insert("line",":first-child").attr({x1:L,x2:L,y1:D,y2:P,"stroke-width":z+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==R.indexOf("marker")&&l.insert("circle",":first-child").attr({cx:L,cy:N-("top"!==a.side?z:-z),r:z,fill:F}).classed("spikeline",!0)}}}function V(r,n){return!n||n.vLinePoint!==r._spikepoints.vLinePoint||n.hLinePoint!==r._spikepoints.hLinePoint}function H(r,n){return p.plainText(r||"",{len:n,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function q(r,n,i){var a=n[r+"a"],o=n[r+"Val"],s=n.cd[0];if("category"===a.type||"multicategory"===a.type)o=a._categoriesMap[o];else if("date"===a.type){var l=n.trace[r+"periodalignment"];if(l){var c=n.cd[n.index],u=c[r+"Start"];void 0===u&&(u=c[r]);var f=c[r+"End"];void 0===f&&(f=c[r]);var h=f-u;"end"===l?o+=h:"middle"===l&&(o+=h/2)}o=a.d2c(o)}return s&&s.t&&s.t.posLetter===a._id&&("group"!==i.boxmode&&"group"!==i.violinmode||(o+=s.t.dPos)),o}function G(r){return r.offsetTop+r.clientTop}function W(r){return r.offsetLeft+r.clientLeft}function Y(r,n){var i=r._fullLayout,a=n.getBoundingClientRect(),o=a.left,s=a.top,c=o+a.width,u=s+a.height,f=l.apply3DTransform(i._invTransform)(o,s),h=l.apply3DTransform(i._invTransform)(c,u),p=f[0],d=f[1],y=h[0],g=h[1];return{x:p,y:d,width:y-p,height:g-d,top:Math.min(d,g),left:Math.min(p,y),right:Math.max(p,y),bottom:Math.max(d,g)}}},16132:function(r,n,i){var a=i(3400),o=i(76308),s=i(10624).isUnifiedHover;r.exports=function(r,n,i,l){l=l||{};var c=n.legend;function u(r){l.font[r]||(l.font[r]=c?n.legend.font[r]:n.font[r])}n&&s(n.hovermode)&&(l.font||(l.font={}),u("size"),u("family"),u("color"),u("weight"),u("style"),u("variant"),c?(l.bgcolor||(l.bgcolor=o.combine(n.legend.bgcolor,n.paper_bgcolor)),l.bordercolor||(l.bordercolor=n.legend.bordercolor)):l.bgcolor||(l.bgcolor=n.paper_bgcolor)),i("hoverlabel.bgcolor",l.bgcolor),i("hoverlabel.bordercolor",l.bordercolor),i("hoverlabel.namelength",l.namelength),a.coerceFont(i,"hoverlabel.font",l.font),i("hoverlabel.align",l.align)}},41008:function(r,n,i){var a=i(3400),o=i(65460);r.exports=function(r,n){function i(i,s){return void 0!==n[i]?n[i]:a.coerce(r,n,o,i,s)}return i("clickmode"),i("hoversubplots"),i("hovermode")}},93024:function(r,n,i){var a=i(33428),o=i(3400),s=i(86476),l=i(10624),c=i(65460),u=i(83292);r.exports={moduleType:"component",name:"fx",constants:i(92456),schema:{layout:c},attributes:i(55756),layoutAttributes:c,supplyLayoutGlobalDefaults:i(81976),supplyDefaults:i(95448),supplyLayoutDefaults:i(88336),calc:i(55056),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:function(r,n,i){return o.castOption(r,n,"hoverlabel."+i)},castHoverinfo:function(r,n,i){return o.castOption(r,i,"hoverinfo",function(i){return o.coerceHoverinfo({hoverinfo:i},{_module:r._module},n)})},hover:u.hover,unhover:s.unhover,loneHover:u.loneHover,loneUnhover:function(r){var n=o.isD3Selection(r)?r:a.select(r);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()},click:i(62376)}},65460:function(r,n,i){var a=i(92456),o=i(25376),s=o({editType:"none"});s.family.dflt=a.HOVERFONT,s.size.dflt=a.HOVERFONTSIZE,r.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:s,grouptitlefont:o({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(r,n,i){var a=i(3400),o=i(65460),s=i(41008),l=i(16132);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}s(r,n)&&(i("hoverdistance"),i("spikedistance")),"select"===i("dragmode")&&i("selectdirection");var c=n._has("mapbox"),u=n._has("geo"),f=n._basePlotModules.length;"zoom"===n.dragmode&&((c||u)&&1===f||c&&u&&2===f)&&(n.dragmode="pan"),l(r,n,i),a.coerceFont(i,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},81976:function(r,n,i){var a=i(3400),o=i(16132),s=i(65460);r.exports=function(r,n){o(r,n,function(i,o){return a.coerce(r,n,s,i,o)})}},12704:function(r,n,i){var a=i(3400),o=i(53756).counter,s=i(86968).u,l=i(33816).idRegex,c=i(31780),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[o("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:s({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function f(r,n,i){var a=n[i+"axes"],o=Object.keys((r._splomAxes||{})[i]||{});return Array.isArray(a)?a:o.length?o:void 0}function h(r,n,i,a,o,s){var l=n(r+"gap",i),c=n("domain."+r);n(r+"side",a);for(var u=Array(o),f=c[0],h=(c[1]-f)/(o-l),p=h*(1-l),d=0;d<o;d++){var y=f+h*d;u[s?o-1-d:d]=[y,y+p]}return u}function p(r,n,i,a,o){var s,l=Array(i);function c(r,i){-1!==n.indexOf(i)&&void 0===a[i]?(l[r]=i,a[i]=r):l[r]=""}if(Array.isArray(r))for(s=0;s<i;s++)c(s,r[s]);else for(c(0,o),s=1;s<i;s++)c(s,o+(s+1));return l}r.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function(r,n){var i=r.grid||{},o=f(n,i,"x"),s=f(n,i,"y");if(r.grid||o||s){var l,p,d=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),y=Array.isArray(o),g=Array.isArray(s),v=y&&o!==i.xaxes&&g&&s!==i.yaxes;d?(l=i.subplots.length,p=i.subplots[0].length):(g&&(l=s.length),y&&(p=o.length));var m=c.newContainer(n,"grid"),x=M("rows",l),b=M("columns",p);if(x*b>1){d||y||g||"independent"===M("pattern")&&(d=!0),m._hasSubplotGrid=d;var _,w,T="top to bottom"===M("roworder"),A=d?.2:.1,k=d?.3:.1;v&&n._splomGridDflt&&(_=n._splomGridDflt.xside,w=n._splomGridDflt.yside),m._domains={x:h("x",M,A,_,b),y:h("y",M,k,w,x,T)}}else delete n.grid}function M(r,n){return a.coerce(i,m,u,r,n)}},contentDefaults:function(r,n){var i=n.grid;if(i&&i._domains){var a,o,s,l,c,u,h,d=r.grid||{},y=n._subplots,g=i._hasSubplotGrid,v=i.rows,m=i.columns,x="independent"===i.pattern,b=i._axisMap={};if(g){var _=d.subplots||[];u=i.subplots=Array(v);var w=1;for(a=0;a<v;a++){var T=u[a]=Array(m),A=_[a]||[];for(o=0;o<m;o++)if(x?(c=1===w?"xy":"x"+w+"y"+w,w++):c=A[o],T[o]="",-1!==y.cartesian.indexOf(c)){if(h=c.indexOf("y"),s=c.slice(0,h),l=c.slice(h),void 0!==b[s]&&b[s]!==o||void 0!==b[l]&&b[l]!==a)continue;T[o]=c,b[s]=o,b[l]=a}}}else{var k=f(n,d,"x"),M=f(n,d,"y");i.xaxes=p(k,y.xaxis,m,b,"x"),i.yaxes=p(M,y.yaxis,v,b,"y")}var S=i._anchors={},E="top to bottom"===i.roworder;for(var I in b){var L,C,O,D=I.charAt(0),P=i[D+"side"];if(P.length<8)S[I]="free";else if("x"===D){if("t"===P.charAt(0)===E?(L=0,C=1,O=v):(L=v-1,C=-1,O=-1),g){var B=b[I];for(a=L;a!==O;a+=C)if((c=u[a][B])&&(h=c.indexOf("y"),c.slice(0,h)===I)){S[I]=c.slice(h);break}}else for(a=L;a!==O;a+=C)if(l=i.yaxes[a],-1!==y.cartesian.indexOf(I+l)){S[I]=l;break}}else if("l"===P.charAt(0)?(L=0,C=1,O=m):(L=m-1,C=-1,O=-1),g){var R=b[I];for(a=L;a!==O;a+=C)if((c=u[R][a])&&(h=c.indexOf("y"),c.slice(h)===I)){S[I]=c.slice(0,h);break}}else for(a=L;a!==O;a+=C)if(s=i.xaxes[a],-1!==y.cartesian.indexOf(s+I)){S[I]=s;break}}}}}},65760:function(r,n,i){var a=i(33816),o=i(31780).templatedArray;i(36208),r.exports=o("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(r,n,i){var a=i(38248),o=i(36896);r.exports=function(r,n,i,s){n=n||{};var l="log"===i&&"linear"===n.type,c="linear"===i&&"log"===n.type;if(l||c){for(var u,f,h=r._fullLayout.images,p=n._id.charAt(0),d=0;d<h.length;d++)if(f="images["+d+"].",(u=h[d])[p+"ref"]===n._id){var y=u[p],g=u["size"+p],v=null,m=null;if(l){var x=g/Math.pow(10,v=o(y,n.range))/2;m=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else m=(v=Math.pow(10,y))*(Math.pow(10,g/2)-Math.pow(10,-g/2));a(v)?a(m)||(m=null):(v=null,m=null),s(f+p,v),s(f+"size"+p,m)}}}},25024:function(r,n,i){var a=i(3400),o=i(54460),s=i(51272),l=i(65760);function c(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}var c=s("source");if(!s("visible",!!c))return n;s("layer"),s("xanchor"),s("yanchor"),s("sizex"),s("sizey"),s("sizing"),s("opacity");for(var u={_fullLayout:i},f=["x","y"],h=0;h<2;h++){var p=f[h],d=o.coerceRef(r,n,u,p,"paper",void 0);"paper"!==d&&o.getFromId(u,d)._imgIndices.push(n._index),o.coercePosition(n,u,s,d,p,0)}return n}r.exports=function(r,n){s(r,n,{name:"images",handleItemDefaults:c})}},60963:function(r,n,i){var a=i(33428),o=i(43616),s=i(54460),l=i(79811),c=i(9616);r.exports=function(r){var n,i,u=r._fullLayout,f=[],h={},p=[];for(i=0;i<u.images.length;i++){var d=u.images[i];if(d.visible){if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){n=l.ref2id(d.xref)+l.ref2id(d.yref);var y=u._plots[n];if(!y){p.push(d);continue}y.mainplot&&(n=y.mainplot.id),h[n]||(h[n]=[]),h[n].push(d)}else"above"===d.layer?f.push(d):p.push(d)}}var g={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},v={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(n){var i=a.select(this);if(this._imgSrc!==n.source){if(i.attr("xmlns",c.svg),n.source&&"data:"===n.source.slice(0,5))i.attr("xlink:href",n.source),this._imgSrc=n.source;else{var o=new Promise((function(r){var a=new Image;function o(){i.remove(),r()}this.img=a,a.setAttribute("crossOrigin","anonymous"),a.onerror=o,a.onload=function(){var n=document.createElement("canvas");n.width=this.width,n.height=this.height,n.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var a=n.toDataURL("image/png");i.attr("xlink:href",a),r()},i.on("error",o),a.src=n.source,this._imgSrc=n.source}).bind(this));r._promises.push(o)}}}function x(n){var i,l,c=a.select(this),f=s.getFromId(r,n.xref),h=s.getFromId(r,n.yref),p="domain"===s.getRefType(n.xref),d="domain"===s.getRefType(n.yref),y=u._size;i=void 0!==f?"string"==typeof n.xref&&p?f._length*n.sizex:Math.abs(f.l2p(n.sizex)-f.l2p(0)):n.sizex*y.w,l=void 0!==h?"string"==typeof n.yref&&d?h._length*n.sizey:Math.abs(h.l2p(n.sizey)-h.l2p(0)):n.sizey*y.h;var m,x,b=i*g[n.xanchor].offset,_=l*v[n.yanchor].offset,w=g[n.xanchor].sizing+v[n.yanchor].sizing;switch(m=(void 0!==f?"string"==typeof n.xref&&p?f._length*n.x+f._offset:f.r2p(n.x)+f._offset:n.x*y.w+y.l)+b,x=(void 0!==h?"string"==typeof n.yref&&d?h._length*(1-n.y)+h._offset:h.r2p(n.y)+h._offset:y.h-n.y*y.h+y.t)+_,n.sizing){case"fill":w+=" slice";break;case"stretch":w="none"}c.attr({x:m,y:x,width:i,height:l,preserveAspectRatio:w,opacity:n.opacity});var T=(f&&"domain"!==s.getRefType(n.xref)?f._id:"")+(h&&"domain"!==s.getRefType(n.yref)?h._id:"");o.setClipUrl(c,T?"clip"+u._uid+T:null,r)}var b=u._imageLowerLayer.selectAll("image").data(p),_=u._imageUpperLayer.selectAll("image").data(f);b.enter().append("image"),_.enter().append("image"),b.exit().remove(),_.exit().remove(),b.each(function(r){m.bind(this)(r),x.bind(this)(r)}),_.each(function(r){m.bind(this)(r),x.bind(this)(r)});var w=Object.keys(u._plots);for(i=0;i<w.length;i++){n=w[i];var T=u._plots[n];if(T.imagelayer){var A=T.imagelayer.selectAll("image").data(h[n]||[]);A.enter().append("image"),A.exit().remove(),A.each(function(r){m.bind(this)(r),x.bind(this)(r)})}}}},7402:function(r,n,i){r.exports={moduleType:"component",name:"images",layoutAttributes:i(65760),supplyLayoutDefaults:i(25024),includeBasePlot:i(36632)("images"),draw:i(60963),convertCoords:i(63556)}},3800:function(r,n,i){var a=i(25376),o=i(22548);r.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),grouptitlefont:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:a({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(r){r.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(r,n,i){var a=i(24040),o=i(3400),s=i(31780),l=i(45464),c=i(3800),u=i(64859),f=i(42451);r.exports=function(r,n,i){var h,p=i.slice(),d=n.shapes;if(d)for(h=0;h<d.length;h++){var y=d[h];if(y.showlegend){var g={_input:y._input,visible:y.visible,showlegend:y.showlegend,legend:y.legend};p.push(g)}}var v=["legend"];for(h=0;h<p.length;h++)o.pushUnique(v,p[h].legend);for(n._legends=[],h=0;h<v.length;h++){var m=v[h];(function(r,n,i,h){var p=n[r]||{},d=s.newContainer(i,r);function y(r,n){return o.coerce(p,d,c,r,n)}var g=o.coerceFont(y,"font",i.font);if(y("bgcolor",i.paper_bgcolor),y("bordercolor"),y("visible")){for(var v,m=function(r,n){var i=v._input,a=v;return o.coerce(i,a,l,r,n)},x=i.font||{},b=o.coerceFont(y,"grouptitlefont",x,{overrideDflt:{size:Math.round(1.1*x.size)}}),_=0,w=!1,T="normal",A=(i.shapes||[]).filter(function(r){return r.showlegend}),k=h.concat(A).filter(function(n){return r===(n.legend||"legend")}),M=0;M<k.length;M++)if((v=k[M]).visible){var S=v._isShape;(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&!1===v._module.attributes.showlegend.dflt))&&(_++,v.showlegend&&(w=!0,(!S&&a.traceIs(v,"pie-like")||!0===v._input.showlegend)&&_++),o.coerceFont(m,"legendgrouptitle.font",b)),(!S&&a.traceIs(v,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))&&(T=f.isGrouped({traceorder:T})?"grouped+reversed":"reversed"),void 0!==v.legendgroup&&""!==v.legendgroup&&(T=f.isReversed({traceorder:T})?"reversed+grouped":"grouped")}var E=o.coerce(n,i,u,"showlegend",w&&_>("legend"===r?1:0));if(!1===E&&(i[r]=void 0),(!1!==E||p.uirevision)&&(y("uirevision",i.uirevision),!1!==E)){y("borderwidth");var I,L,C,O="h"===y("orientation"),D="paper"===y("yref"),P="paper"===y("xref"),B="left";if(O?(I=0,a.getComponentMethod("rangeslider","isVisible")(n.xaxis)?D?(L=1.1,C="bottom"):(L=1,C="top"):D?(L=-.1,C="top"):(L=0,C="bottom")):(L=1,C="auto",P?I=1.02:(I=1,B="right")),o.coerce(p,d,{x:{valType:"number",editType:"legend",min:P?-2:0,max:P?3:1,dflt:I}},"x"),o.coerce(p,d,{y:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:L}},"y"),y("traceorder",T),f.isGrouped(i[r])&&y("tracegroupgap"),y("entrywidth"),y("entrywidthmode"),y("indentation"),y("itemsizing"),y("itemwidth"),y("itemclick"),y("itemdoubleclick"),y("groupclick"),y("xanchor",B),y("yanchor",C),y("valign"),o.noneOrAll(p,d,["x","y"]),y("title.text")){y("title.side",O?"left":"top");var R=o.extendFlat({},g,{size:o.bigFont(g.size)});o.coerceFont(y,"title.font",R)}}}})(m,r,n,p),n[m]&&n[m].visible&&(n[m]._id=m),n._legends.push(m)}}},31140:function(r,n,i){var a=i(33428),o=i(3400),s=i(7316),l=i(24040),c=i(95924),u=i(86476),f=i(43616),h=i(76308),p=i(72736),d=i(33048),y=i(65196),g=i(84284),v=g.LINE_SPACING,m=g.FROM_TL,x=g.FROM_BR,b=i(35456),_=i(2012),w=i(42451),T=/^legend[0-9]*$/;function A(r,n){var i,c,d=n||{},g=r._fullLayout,T=D(d),A=d._inHover;if(A?(c=d.layer,i="hover"):(c=g._infolayer,i=T),c){if(i+=g._uid,r._legendMouseDownTime||(r._legendMouseDownTime=0),A){if(!d.entries)return;V=b(d.entries,d)}else{for(var E=(r.calcdata||[]).slice(),P=g.shapes,B=0;B<P.length;B++){var R=P[B];if(R.showlegend){var z={_isShape:!0,_fullInput:R,index:R._index,name:R.name||R.label.text||"shape "+R._index,legend:R.legend,legendgroup:R.legendgroup,legendgrouptitle:R.legendgrouptitle,legendrank:R.legendrank,legendwidth:R.legendwidth,showlegend:R.showlegend,visible:R.visible,opacity:R.opacity,mode:"line"===R.type?"lines":"markers",line:R.line,marker:{line:R.line,color:R.fillcolor,size:12,symbol:"rect"===R.type?"square":"circle"===R.type?"circle":"hexagon2"}};E.push([{trace:z}])}}V=g.showlegend&&b(E,d,g._legends.length>1)}var F=g.hiddenlabels||[];if(!(A||g.showlegend&&V.length))return c.selectAll("."+T).remove(),g._topdefs.select("#"+i).remove(),s.autoMargin(r,T);var N=o.ensureSingle(c,"g",T,function(r){A||r.attr("pointer-events","all")}),U=o.ensureSingleById(g._topdefs,"clipPath",i,function(r){r.append("rect")}),j=o.ensureSingle(N,"rect","bg",function(r){r.attr("shape-rendering","crispEdges")});j.call(h.stroke,d.bordercolor).call(h.fill,d.bgcolor).style("stroke-width",d.borderwidth+"px");var V,H,q=o.ensureSingle(N,"g","scrollbox"),G=d.title;d._titleWidth=0,d._titleHeight=0,G.text?((H=o.ensureSingle(q,"text",T+"titletext")).attr("text-anchor","start").call(f.font,G.font).text(G.text),L(H,q,r,d,1)):q.selectAll("."+T+"titletext").remove();var W=o.ensureSingle(N,"rect","scrollbar",function(r){r.attr(y.scrollBarEnterAttrs).call(h.fill,y.scrollBarColor)}),Y=q.selectAll("g.groups").data(V);Y.enter().append("g").attr("class","groups"),Y.exit().remove();var Z=Y.selectAll("g.traces").data(o.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(r){var n=r[0].trace;return l.traceIs(n,"pie-like")?-1!==F.indexOf(r[0].label)?.5:1:"legendonly"===n.visible?.5:1}).each(function(){a.select(this).call(S,r,d)}).call(_,r,d).each(function(){A||a.select(this).call(I,r,T)}),o.syncOrAsync([s.previousPromises,function(){return function(r,n,i,o){var s,l,c,u,h=r._fullLayout,p=D(o);o||(o=h[p]);var d=h._size,g=w.isVertical(o),v=w.isGrouped(o),m="fraction"===o.entrywidthmode,x=o.borderwidth,b=2*x,_=y.itemGap,T=o.indentation+o.itemwidth+2*_,A=2*(x+_),M=O(o),S=o.y<0||0===o.y&&"top"===M,E=o.y>1||1===o.y&&"bottom"===M,I=o.tracegroupgap,L={};o._maxHeight=Math.max(S||E?h.height/2:d.h,30);var P=0;o._width=0,o._height=0;var B=(l=0,c=0,(u=(s=o).title.side)&&(-1!==u.indexOf("left")&&(l=s._titleWidth),-1!==u.indexOf("top")&&(c=s._titleHeight)),[l,c]);if(g)i.each(function(r){var n=r[0].height;f.setTranslate(this,x+B[0],x+B[1]+o._height+n/2+_),o._height+=n,o._width=Math.max(o._width,r[0].width)}),P=T+o._width,o._width+=_+T+b,o._height+=A,v&&(n.each(function(r,n){f.setTranslate(this,0,n*o.tracegroupgap)}),o._height+=(o._lgroupsLength-1)*o.tracegroupgap);else{var R=C(o),z=o.x<0||0===o.x&&"right"===R,F=o.x>1||1===o.x&&"left"===R,N=E||S,U=h.width/2;o._maxWidth=Math.max(z?N&&"left"===R?d.l+d.w:U:F?N&&"right"===R?d.r+d.w:U:d.w,2*T);var j=0,V=0;i.each(function(r){var n=k(r,o,T);j=Math.max(j,n),V+=n}),P=null;var H=0;if(v){var q=0,G=0,W=0;n.each(function(){var r=0,n=0;a.select(this).selectAll("g.traces").each(function(i){var a=k(i,o,T),s=i[0].height;f.setTranslate(this,B[0],B[1]+x+_+s/2+n),n+=s,r=Math.max(r,a),L[i[0].trace.legendgroup]=r});var i=r+_;G>0&&i+x+G>o._maxWidth?(H=Math.max(H,G),G=0,W+=q+I,q=n):q=Math.max(q,n),f.setTranslate(this,G,W),G+=i}),o._width=Math.max(H,G)+x,o._height=W+q+A}else{var Y=i.size(),Z=V+b+(Y-1)*_<o._maxWidth,X=0,K=0,J=0,$=0;i.each(function(r){var n=r[0].height,i=k(r,o,T),a=Z?i:j;m||(a+=_),a+x+K-_>=o._maxWidth&&(H=Math.max(H,$),K=0,J+=X,o._height+=X,X=0),f.setTranslate(this,B[0]+x+K,B[1]+x+J+n/2+_),$=K+i+_,K+=a,X=Math.max(X,n)}),Z?(o._width=K+b,o._height=X+A):(o._width=Math.max(H,$)+b,o._height+=X+A)}}o._width=Math.ceil(Math.max(o._width+B[0],o._titleWidth+2*(x+y.titlePad))),o._height=Math.ceil(Math.max(o._height+B[1],o._titleHeight+2*(x+y.itemGap))),o._effHeight=Math.min(o._height,o._maxHeight);var Q=r._context.edits,tt=Q.legendText||Q.legendPosition;i.each(function(r){var n=a.select(this).select("."+p+"toggle"),i=r[0].height,s=r[0].trace.legendgroup,l=k(r,o,T);v&&""!==s&&(l=L[s]);var c=tt?T:P||l;g||m||(c+=_/2),f.setRect(n,0,-i/2,c,i)})}(r,Y,Z,d)},function(){var n,h,b,_,w=g._size,k=d.borderwidth,S="paper"===d.xref,E="paper"===d.yref;if(G.text&&function(r,n,i){if("top center"===n.title.side||"top right"===n.title.side){var a=n.title.font.size*v,o=0,s=r.node(),l=f.bBox(s).width;"top center"===n.title.side?o=.5*(n._width-2*i-2*y.titlePad-l):"top right"===n.title.side&&(o=n._width-2*i-2*y.titlePad-l),p.positionText(r,i+y.titlePad+o,i+a)}}(H,d,k),!A){if(function(r,n,i,a){var o=r._fullLayout,l=o[n],c=C(l),u=O(l),f="paper"===l.xref,h="paper"===l.yref;r._fullLayout._reservedMargin[n]={};var p=l.y<.5?"b":"t",d=l.x<.5?"l":"r",y={r:o.width-i,l:i+l._width,b:o.height-a,t:a+l._effHeight};if(f&&h)return s.autoMargin(r,n,{x:l.x,y:l.y,l:l._width*m[c],r:l._width*x[c],b:l._effHeight*x[u],t:l._effHeight*m[u]});f?r._fullLayout._reservedMargin[n][p]=y[p]:h||"v"===l.orientation?r._fullLayout._reservedMargin[n][d]=y[d]:r._fullLayout._reservedMargin[n][p]=y[p]}(r,T,P=S?w.l+w.w*d.x-m[C(d)]*d._width:g.width*d.x-m[C(d)]*d._width,B=E?w.t+w.h*(1-d.y)-m[O(d)]*d._effHeight:g.height*(1-d.y)-m[O(d)]*d._effHeight))return;if(g.margin.autoexpand){var I=P,L=B;P=S?o.constrain(P,0,g.width-d._width):I,B=E?o.constrain(B,0,g.height-d._effHeight):L,P!==I&&o.log("Constrain "+T+".x to make legend fit inside graph"),B!==L&&o.log("Constrain "+T+".y to make legend fit inside graph")}f.setTranslate(N,P,B)}if(W.on(".drag",null),N.on("wheel",null),A||d._height<=d._maxHeight||r._context.staticPlot){var D=d._effHeight;A&&(D=d._height),j.attr({width:d._width-k,height:D-k,x:k/2,y:k/2}),f.setTranslate(q,0,0),U.select("rect").attr({width:d._width-2*k,height:D-2*k,x:k,y:k}),f.setClipUrl(q,i,r),f.setRect(W,0,0,0,0),delete d._scrollY}else{var P,B,R,z,F,V=Math.max(y.scrollBarMinHeight,d._effHeight*d._effHeight/d._height),Y=d._effHeight-V-2*y.scrollBarMargin,Z=d._height-d._effHeight,X=Y/Z,K=Math.min(d._scrollY||0,Z);j.attr({width:d._width-2*k+y.scrollBarWidth+y.scrollBarMargin,height:d._effHeight-k,x:k/2,y:k/2}),U.select("rect").attr({width:d._width-2*k+y.scrollBarWidth+y.scrollBarMargin,height:d._effHeight-2*k,x:k,y:k+K}),f.setClipUrl(q,i,r),Q(K,V,X),N.on("wheel",function(){Q(K=o.constrain(d._scrollY+a.event.deltaY/Y*Z,0,Z),V,X),0!==K&&K!==Z&&a.event.preventDefault()});var J=a.behavior.drag().on("dragstart",function(){var r=a.event.sourceEvent;R="touchstart"===r.type?r.changedTouches[0].clientY:r.clientY,F=K}).on("drag",function(){var r,n=a.event.sourceEvent;2===n.buttons||n.ctrlKey||(r=((z="touchmove"===n.type?n.changedTouches[0].clientY:n.clientY)-R)/X+F,Q(K=o.constrain(r,0,Z),V,X))});W.call(J);var $=a.behavior.drag().on("dragstart",function(){var r=a.event.sourceEvent;"touchstart"===r.type&&(R=r.changedTouches[0].clientY,F=K)}).on("drag",function(){var r,n=a.event.sourceEvent;"touchmove"===n.type&&(z=n.changedTouches[0].clientY,r=(R-z)/X+F,Q(K=o.constrain(r,0,Z),V,X))});q.call($)}function Q(n,i,a){d._scrollY=r._fullLayout[T]._scrollY=n,f.setTranslate(q,0,-n),f.setRect(W,d._width,y.scrollBarMargin+n*a,y.scrollBarWidth,i),U.select("rect").attr("y",k+n)}r._context.edits.legendPosition&&(N.classed("cursor-move",!0),u.init({element:N.node(),gd:r,prepFn:function(r){if(r.target!==W.node()){var n=f.getTranslate(N);b=n.x,_=n.y}},moveFn:function(r,i){if(void 0!==b&&void 0!==_){var a=b+r,o=_+i;f.setTranslate(N,a,o),n=u.align(a,d._width,w.l,w.l+w.w,d.xanchor),h=u.align(o+d._height,-d._height,w.t+w.h,w.t,d.yanchor)}},doneFn:function(){if(void 0!==n&&void 0!==h){var i={};i[T+".x"]=n,i[T+".y"]=h,l.call("_guiRelayout",r,i)}},clickFn:function(n,i){var a=c.selectAll("g.traces").filter(function(){var r=this.getBoundingClientRect();return i.clientX>=r.left&&i.clientX<=r.right&&i.clientY>=r.top&&i.clientY<=r.bottom});a.size()>0&&M(r,N,a,n,i)}}))}],r)}}function k(r,n,i){var a=r[0],o=a.width,s=n.entrywidthmode,l=a.trace.legendwidth||n.entrywidth;return"fraction"===s?n._maxWidth*l:i+(l||o)}function M(r,n,i,a,o){var s=i.data()[0][0].trace,u={event:o,node:i.node(),curveNumber:s.index,expandedIndex:s._expandedIndex,data:r.data,layout:r.layout,frames:r._transitionData._frames,config:r._context,fullData:r._fullData,fullLayout:r._fullLayout};s._group&&(u.group=s._group),l.traceIs(s,"pie-like")&&(u.label=i.datum()[0].label);var f=c.triggerHandler(r,"plotly_legendclick",u);if(1===a){if(!1===f)return;n._clickTimeout=setTimeout(function(){r._fullLayout&&d(i,r,a)},r._context.doubleClickDelay)}else 2===a&&(n._clickTimeout&&clearTimeout(n._clickTimeout),r._legendMouseDownTime=0,!1!==c.triggerHandler(r,"plotly_legenddoubleclick",u)&&!1!==f&&d(i,r,a))}function S(r,n,i){var a,s,c=D(i),u=r.data()[0][0],h=u.trace,d=l.traceIs(h,"pie-like"),g=!i._inHover&&n._context.edits.legendText&&!d,v=i._maxNameLength;u.groupTitle?(a=u.groupTitle.text,s=u.groupTitle.font):(s=i.font,i.entries?a=u.text:(a=d?u.label:h.name,h._meta&&(a=o.templateString(a,h._meta))));var m=o.ensureSingle(r,"text",c+"text");m.attr("text-anchor","start").call(f.font,s).text(g?E(a,v):a);var x=i.indentation+i.itemwidth+2*y.itemGap;p.positionText(m,x,0),g?m.call(p.makeEditable,{gd:n,text:a}).call(L,r,n,i).on("edit",function(a){this.text(E(a,v)).call(L,r,n,i);var s=u.trace._fullInput||{},c={};if(l.hasTransform(s,"groupby")){var f=l.getTransformIndices(s,"groupby"),p=f[f.length-1],d=o.keyedContainer(s,"transforms["+p+"].styles","target","value.name");d.set(u.trace._group,a),c=d.constructUpdate()}else c.name=a;return s._isShape?l.call("_guiRelayout",n,"shapes["+h.index+"].name",c.name):l.call("_guiRestyle",n,c,h.index)}):L(m,r,n,i)}function E(r,n){var i=Math.max(4,n);if(r&&r.trim().length>=i/2)return r;for(var a=i-(r=r||"").length;a>0;a--)r+=" ";return r}function I(r,n,i){var s,l=n._context.doubleClickDelay,c=1,u=o.ensureSingle(r,"rect",i+"toggle",function(r){n._context.staticPlot||r.style("cursor","pointer").attr("pointer-events","all"),r.call(h.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(u.on("mousedown",function(){(s=(new Date).getTime())-n._legendMouseDownTime<l?c+=1:(c=1,n._legendMouseDownTime=s)}),u.on("mouseup",function(){if(!n._dragged&&!n._editing){var o=n._fullLayout[i];(new Date).getTime()-n._legendMouseDownTime>l&&(c=Math.max(c-1,1)),M(n,o,r,c,a.event)}}))}function L(r,n,i,a,o){a._inHover&&r.attr("data-notex",!0),p.convertToTspans(r,i,function(){!function(r,n,i,a){var o=r.data()[0][0];if(i._inHover||!o||o.trace.showlegend){var s=r.select("g[class*=math-group]"),l=s.node(),c=D(i);i||(i=n._fullLayout[c]);var u,h,d=i.borderwidth,g=(1===a?i.title.font:o.groupTitle?o.groupTitle.font:i.font).size*v;if(l){var m=f.bBox(l);u=m.height,h=m.width,1===a?f.setTranslate(s,d,d+.75*u):f.setTranslate(s,0,.25*u)}else{var x=r.select("."+c+(1===a?"title":"")+"text"),b=p.lineCount(x),_=x.node();if(u=g*b,h=_?f.bBox(_).width:0,1===a)"left"===i.title.side&&(h+=2*y.itemGap),p.positionText(x,d+y.titlePad,d+g);else{var w=2*y.itemGap+i.indentation+i.itemwidth;o.groupTitle&&(w=y.itemGap,h-=i.indentation+i.itemwidth),p.positionText(x,w,-g*((b-1)/2-.3))}}1===a?(i._titleWidth=h,i._titleHeight=u):(o.lineHeight=g,o.height=Math.max(u,16)+3,o.width=h)}else r.remove()}(n,i,a,o)})}function C(r){return o.isRightAnchor(r)?"right":o.isCenterAnchor(r)?"center":"left"}function O(r){return o.isBottomAnchor(r)?"bottom":o.isMiddleAnchor(r)?"middle":"top"}function D(r){return r._id||"legend"}r.exports=function(r,n){if(n)A(r,n);else{var i=r._fullLayout,o=i._legends;i._infolayer.selectAll('[class^="legend"]').each(function(){var r=a.select(this),n=r.attr("class").split(" ")[0];n.match(T)&&-1===o.indexOf(n)&&r.remove()});for(var s=0;s<o.length;s++){var l=o[s];A(r,r._fullLayout[l])}}}},35456:function(r,n,i){var a=i(24040),o=i(42451);r.exports=function(r,n,i){var s,l,c=n._inHover,u=o.isGrouped(n),f=o.isReversed(n),h={},p=[],d=!1,y={},g=0,v=0;function m(r,a,s){if(!1!==n.visible&&(!i||r===n._id)){if(""!==a&&o.isGrouped(n))-1===p.indexOf(a)?(p.push(a),d=!0,h[a]=[s]):h[a].push(s);else{var l="~~i"+g;p.push(l),h[l]=[s],g++}}}for(s=0;s<r.length;s++){var x=r[s],b=x[0],_=b.trace,w=_.legend,T=_.legendgroup;if(c||_.visible&&_.showlegend){if(a.traceIs(_,"pie-like"))for(y[T]||(y[T]={}),l=0;l<x.length;l++){var A=x[l].label;y[T][A]||(m(w,T,{label:A,color:x[l].color,i:x[l].i,trace:_,pts:x[l].pts}),y[T][A]=!0,v=Math.max(v,(A||"").length))}else m(w,T,b),v=Math.max(v,(_.name||"").length)}}if(!p.length)return[];var k=!d||!u,M=[];for(s=0;s<p.length;s++){var S=h[p[s]];k?M.push(S[0]):M.push(S)}for(k&&(M=[M]),s=0;s<M.length;s++){var E=1/0;for(l=0;l<M[s].length;l++){var I=M[s][l].trace.legendrank;E>I&&(E=I)}M[s][0]._groupMinRank=E,M[s][0]._preGroupSort=s}var L=function(r,n){return r.trace.legendrank-n.trace.legendrank||r._preSort-n._preSort};for(M.forEach(function(r,n){r[0]._preGroupSort=n}),M.sort(function(r,n){return r[0]._groupMinRank-n[0]._groupMinRank||r[0]._preGroupSort-n[0]._preGroupSort}),s=0;s<M.length;s++){M[s].forEach(function(r,n){r._preSort=n}),M[s].sort(L);var C=M[s][0].trace,O=null;for(l=0;l<M[s].length;l++){var D=M[s][l].trace.legendgrouptitle;if(D&&D.text){O=D,c&&(D.font=n._groupTitleFont);break}}if(f&&M[s].reverse(),O){var P=!1;for(l=0;l<M[s].length;l++)if(a.traceIs(M[s][l].trace,"pie-like")){P=!0;break}M[s].unshift({i:-1,groupTitle:O,noClick:P,trace:{showlegend:C.showlegend,legendgroup:C.legendgroup,visible:"toggleitem"===n.groupclick||C.visible}})}for(l=0;l<M[s].length;l++)M[s][l]=[M[s][l]]}return n._lgroupsLength=M.length,n._maxNameLength=v,M}},33048:function(r,n,i){var a=i(24040),o=i(3400),s=o.pushUnique,l=!0;r.exports=function(r,n,i){var c=n._fullLayout;if(!n._dragged&&!n._editing){var u,f=c.legend.itemclick,h=c.legend.itemdoubleclick,p=c.legend.groupclick;if(1===i&&"toggle"===f&&"toggleothers"===h&&l&&n.data&&n._context.showTips&&o.notifier(o._(n,"Double-click on legend to isolate one trace"),"long"),l=!1,1===i?u=f:2===i&&(u=h),u){var d="togglegroup"===p,y=c.hiddenlabels?c.hiddenlabels.slice():[],g=r.data()[0][0];if(!g.groupTitle||!g.noClick){var v=n._fullData,m=(c.shapes||[]).filter(function(r){return r.showlegend}),x=v.concat(m),b=g.trace;b._isShape&&(b=b._fullInput);var _,w,T,A,k,M=b.legendgroup,S={},E=[],I=[],L=[],C=(c.shapes||[]).map(function(r){return r._input}),O=!1,D=b.legend,P=b._fullInput;if(P&&P._isShape||!a.traceIs(b,"pie-like")){var B,R=M&&M.length,z=[];if(R)for(_=0;_<x.length;_++)(B=x[_]).visible&&B.legendgroup===M&&z.push(_);if("toggle"===u){switch(b.visible){case!0:N="legendonly";break;case!1:N=!1;break;case"legendonly":N=!0}if(R){if(d)for(_=0;_<x.length;_++){var F=x[_];!1!==F.visible&&F.legendgroup===M&&tr(F,N)}else tr(b,N)}else tr(b,N)}else if("toggleothers"===u){var N,U,j,V,H,q=!0;for(_=0;_<x.length;_++)if(U=(H=x[_])===b,j=!0!==H.showlegend,!(U||j||R&&H.legendgroup===M||H.legend!==D||!0!==H.visible||a.traceIs(H,"notLegendIsolatable"))){q=!1;break}for(_=0;_<x.length;_++)if(!1!==(H=x[_]).visible&&H.legend===D&&!a.traceIs(H,"notLegendIsolatable"))switch(b.visible){case"legendonly":tr(H,!0);break;case!0:V=!!q||"legendonly",U=H===b,j=!0!==H.showlegend&&!H.legendgroup,tr(H,!!(U||R&&H.legendgroup===M||j)||V)}}for(_=0;_<I.length;_++)if(T=I[_]){var G=T.constructUpdate(),W=Object.keys(G);for(w=0;w<W.length;w++)(S[A=W[w]]=S[A]||[])[L[_]]=G[A]}for(k=Object.keys(S),_=0;_<k.length;_++)for(A=k[_],w=0;w<E.length;w++)S[A].hasOwnProperty(w)||(S[A][w]=void 0);O?a.call("_guiUpdate",n,S,{shapes:C},E):a.call("_guiRestyle",n,S,E)}else{var Y=g.label,Z=y.indexOf(Y);if("toggle"===u)-1===Z?y.push(Y):y.splice(Z,1);else if("toggleothers"===u){var X=-1!==Z,K=[];for(_=0;_<n.calcdata.length;_++){var J=n.calcdata[_];for(w=0;w<J.length;w++){var $=J[w].label;D===J[0].trace.legend&&Y!==$&&(-1===y.indexOf($)&&(X=!0),s(y,$),K.push($))}}if(!X)for(var Q=0;Q<K.length;Q++){var tt=y.indexOf(K[Q]);-1!==tt&&y.splice(tt,1)}}a.call("_guiRelayout",n,"hiddenlabels",y)}}}}function te(r,n){var i=E.indexOf(r),a=S.visible;return a||(a=S.visible=[]),-1===E.indexOf(r)&&(E.push(r),i=E.length-1),a[i]=n,i}function tr(r,n){if(!g.groupTitle||d){var i=r._fullInput||r,s=i._isShape,l=i.index;if(void 0===l&&(l=i._index),a.hasTransform(i,"groupby")){var c=I[l];if(!c){var u=a.getTransformIndices(i,"groupby"),f=u[u.length-1];c=o.keyedContainer(i,"transforms["+f+"].styles","target","value.visible"),I[l]=c}var h=c.get(r._group);void 0===h&&(h=!0),!1!==h&&c.set(r._group,n),L[l]=te(l,!1!==i.visible)}else{var p=!1!==i.visible&&n;s?(C[l].visible=p,O=!0):te(l,p)}}}}},42451:function(r,n){n.isGrouped=function(r){return -1!==(r.traceorder||"").indexOf("grouped")},n.isVertical=function(r){return"h"!==r.orientation},n.isReversed=function(r){return -1!==(r.traceorder||"").indexOf("reversed")}},2780:function(r,n,i){r.exports={moduleType:"component",name:"legend",layoutAttributes:i(3800),supplyLayoutDefaults:i(77864),draw:i(31140),style:i(2012)}},2012:function(r,n,i){var a=i(33428),o=i(24040),s=i(3400),l=s.strTranslate,c=i(43616),u=i(76308),f=i(94288).extractOpts,h=i(43028),p=i(10528),d=i(69656).castOption,y=i(65196);function g(r,n){return(n?"radial":"horizontal")+(r?"":"reversed")}function v(r){var n=r[0].trace,i=n.contours,a=h.hasLines(n),o=h.hasMarkers(n),s=n.visible&&n.fill&&"none"!==n.fill,l=!1,c=!1;if(i){var u=i.coloring;"lines"===u?l=!0:a="none"===u||"heatmap"===u||i.showlines,"constraint"===i.type?s="="!==i._operation:"fill"!==u&&"heatmap"!==u||(c=!0)}return{showMarker:o,showLine:a,showFill:s,showGradientLine:l,showGradientFill:c,anyLine:a||l,anyFill:s||c}}function m(r,n,i){return r&&s.isArrayOrTypedArray(r)?n:r>i?i:r}r.exports=function(r,n,i){var x=n._fullLayout;i||(i=x.legend);var b="constant"===i.itemsizing,_=i.itemwidth,w=l((_+2*y.itemGap)/2,0),T=function(r,n,i,a){var o;if(r+1)o=r;else{if(!(n&&n.width>0))return 0;o=n.width}return b?a:Math.min(o,i)};function A(r,s,l){var h=r[0].trace,p=h.marker||{},d=p.line||{},y=p.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",g=l?h.visible&&h.type===l:o.traceIs(h,"bar"),v=a.select(s).select("g.legendpoints").selectAll("path.legend"+l).data(g?[r]:[]);v.enter().append("path").classed("legend"+l,!0).attr("d",y).attr("transform",w),v.exit().remove(),v.each(function(r){var o=a.select(this),s=r[0],l=T(s.mlw,p.line,5,2);o.style("stroke-width",l+"px");var y=s.mcc;if(!i._inHover&&"mc"in s){var g=f(p),v=g.mid;void 0===v&&(v=(g.max+g.min)/2),y=c.tryColorscale(p,"")(v)}var x=y||s.mc||p.color,b=p.pattern,_=b&&c.getPatternAttr(b.shape,0,"");if(_){var w=c.getPatternAttr(b.bgcolor,0,null),A=c.getPatternAttr(b.fgcolor,0,null),k=b.fgopacity,M=m(b.size,8,10),S=m(b.solidity,.5,1),E="legend-"+h.uid;o.call(c.pattern,"legend",n,E,_,M,S,y,b.fillmode,w,A,k)}else o.call(u.fill,x);l&&u.stroke(o,s.mlc||d.color)})}function k(r,i,l){var c=r[0],u=c.trace,f=l?u.visible&&u.type===l:o.traceIs(u,l),h=a.select(i).select("g.legendpoints").selectAll("path.legend"+l).data(f?[r]:[]);if(h.enter().append("path").classed("legend"+l,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),h.exit().remove(),h.size()){var y=u.marker||{},g=T(d(y.line.width,c.pts),y.line,5,2),v="pieLike",m=s.minExtend(u,{marker:{line:{width:g}}},v);p(h,s.minExtend(c,{trace:m},v),m,n)}}r.each(function(r){var n=a.select(this),o=s.ensureSingle(n,"g","layers");o.style("opacity",r[0].trace.opacity);var c=i.indentation,u=i.valign,f=r[0].lineHeight,h=r[0].height;if(("middle"!==u||0!==c)&&f&&h){var p=i.indentation;o.attr("transform",l(p,.5*(f-h+3)*({top:1,bottom:-1})[u]||0))}else o.attr("transform",null);o.selectAll("g.legendfill").data([r]).enter().append("g").classed("legendfill",!0),o.selectAll("g.legendlines").data([r]).enter().append("g").classed("legendlines",!0);var d=o.selectAll("g.legendsymbols").data([r]);d.enter().append("g").classed("legendsymbols",!0),d.selectAll("g.legendpoints").data([r]).enter().append("g").classed("legendpoints",!0)}).each(function(r){var i,o=r[0].trace,l=[];if(o.visible)switch(o.type){case"histogram2d":case"heatmap":l=[["M-15,-2V4H15V-2Z"]],i=!0;break;case"choropleth":case"choroplethmapbox":l=[["M-6,-6V6H6V-6Z"]],i=!0;break;case"densitymapbox":l=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],i="radial";break;case"cone":l=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],i=!1;break;case"streamtube":l=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],i=!1;break;case"surface":l=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],i=!0;break;case"mesh3d":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!1;break;case"volume":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!0;break;case"isosurface":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],i=!1}var h=a.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(l);h.enter().append("path").classed("legend3dandfriends",!0).attr("transform",w).style("stroke-miterlimit",1),h.exit().remove(),h.each(function(r,l){var h,p=a.select(this),d=f(o),y=d.colorscale,v=d.reversescale;if(y){if(!i){var m=y.length;h=0===l?y[v?m-1:0][1]:1===l?y[v?0:m-1][1]:y[Math.floor((m-1)/2)][1]}}else{var x=o.vertexcolor||o.facecolor||o.color;h=s.isArrayOrTypedArray(x)?x[l]||x[0]:x}p.attr("d",r[0]),h?p.call(u.fill,h):p.call(function(r){if(r.size()){var a="legendfill-"+o.uid;c.gradient(r,n,a,g(v,"radial"===i),y,"fill")}})})}).each(function(r){var n=r[0].trace,i="waterfall"===n.type;if(r[0]._distinct&&i){var o=r[0].trace[r[0].dir].marker;return r[0].mc=o.color,r[0].mlw=o.line.width,r[0].mlc=o.line.color,A(r,this,"waterfall")}var s=[];n.visible&&i&&(s=r[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var l=a.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(s);l.enter().append("path").classed("legendwaterfall",!0).attr("transform",w).style("stroke-miterlimit",1),l.exit().remove(),l.each(function(r){var i=a.select(this),o=n[r[0]].marker,s=T(void 0,o.line,5,2);i.attr("d",r[1]).style("stroke-width",s+"px").call(u.fill,o.color),s&&i.call(u.stroke,o.line.color)})}).each(function(r){A(r,this,"funnel")}).each(function(r){A(r,this)}).each(function(r){var i=r[0].trace,l=a.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.visible&&o.traceIs(i,"box-violin")?[r]:[]);l.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),l.exit().remove(),l.each(function(){var r=a.select(this);if("all"!==i.boxpoints&&"all"!==i.points||0!==u.opacity(i.fillcolor)||0!==u.opacity((i.line||{}).color)){var o=T(void 0,i.line,5,2);r.style("stroke-width",o+"px").call(u.fill,i.fillcolor),o&&u.stroke(r,i.line.color)}else{var f=s.minExtend(i,{marker:{size:b?12:s.constrain(i.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});l.call(c.pointStyle,f,n)}})}).each(function(r){k(r,this,"funnelarea")}).each(function(r){k(r,this,"pie")}).each(function(r){var i,o,l=v(r),u=l.showFill,p=l.showLine,d=l.showGradientLine,y=l.showGradientFill,m=l.anyFill,x=l.anyLine,b=r[0],w=b.trace,A=f(w),k=A.colorscale,M=A.reversescale,S=h.hasMarkers(w)||!m?"M5,0":x?"M5,-2":"M5,-3",E=a.select(this),I=E.select(".legendfill").selectAll("path").data(u||y?[r]:[]);if(I.enter().append("path").classed("js-fill",!0),I.exit().remove(),I.attr("d",S+"h"+_+"v6h-"+_+"z").call(function(r){if(r.size()){if(u)c.fillGroupStyle(r,n,!0);else{var i="legendfill-"+w.uid;c.gradient(r,n,i,g(M),k,"fill")}}}),p||d){var L=T(void 0,w.line,10,5);o=s.minExtend(w,{line:{width:L}}),i=[s.minExtend(b,{trace:o})]}var C=E.select(".legendlines").selectAll("path").data(p||d?[i]:[]);C.enter().append("path").classed("js-line",!0),C.exit().remove(),C.attr("d",S+(d?"l"+_+",0.0001":"h"+_)).call(p?c.lineGroupStyle:function(r){if(r.size()){var i="legendline-"+w.uid;c.lineGroupStyle(r),c.gradient(r,n,i,g(M),k,"stroke")}})}).each(function(r){var i,o,l=v(r),u=l.anyFill,f=l.anyLine,p=l.showLine,d=l.showMarker,y=r[0],g=y.trace,m=!d&&!f&&!u&&h.hasText(g);function x(r,n,i,a){var o=s.nestedProperty(g,r).get(),l=s.isArrayOrTypedArray(o)&&n?n(o):o;if(b&&l&&void 0!==a&&(l=a),i){if(l<i[0])return i[0];if(l>i[1])return i[1]}return l}function _(r){return y._distinct&&y.index&&r[y.index]?r[y.index]:r[0]}if(d||m||p){var T={},A={};if(d){T.mc=x("marker.color",_),T.mx=x("marker.symbol",_),T.mo=x("marker.opacity",s.mean,[.2,1]),T.mlc=x("marker.line.color",_),T.mlw=x("marker.line.width",s.mean,[0,5],2),A.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var k=x("marker.size",s.mean,[2,16],12);T.ms=k,A.marker.size=k}p&&(A.line={width:x("line.width",_,[0,10],5)}),m&&(T.tx="Aa",T.tp=x("textposition",_),T.ts=10,T.tc=x("textfont.color",_),T.tf=x("textfont.family",_),T.tw=x("textfont.weight",_),T.ty=x("textfont.style",_),T.tv=x("textfont.variant",_),T.tC=x("textfont.textcase",_),T.tE=x("textfont.lineposition",_),T.tS=x("textfont.shadow",_)),i=[s.minExtend(y,T)],(o=s.minExtend(g,A)).selectedpoints=null,o.texttemplate=null}var M=a.select(this).select("g.legendpoints"),S=M.selectAll("path.scatterpts").data(d?i:[]);S.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",w),S.exit().remove(),S.call(c.pointStyle,o,n),d&&(i[0].mrc=3);var E=M.selectAll("g.pointtext").data(m?i:[]);E.enter().append("g").classed("pointtext",!0).append("text").attr("transform",w),E.exit().remove(),E.selectAll("text").call(c.textPointStyle,o,n)}).each(function(r){var n=r[0].trace,i=a.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(n.visible&&"candlestick"===n.type?[r,r]:[]);i.enter().append("path").classed("legendcandle",!0).attr("d",function(r,n){return n?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",w).style("stroke-miterlimit",1),i.exit().remove(),i.each(function(r,i){var o=a.select(this),s=n[i?"increasing":"decreasing"],l=T(void 0,s.line,5,2);o.style("stroke-width",l+"px").call(u.fill,s.fillcolor),l&&u.stroke(o,s.line.color)})}).each(function(r){var n=r[0].trace,i=a.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(n.visible&&"ohlc"===n.type?[r,r]:[]);i.enter().append("path").classed("legendohlc",!0).attr("d",function(r,n){return n?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",w).style("stroke-miterlimit",1),i.exit().remove(),i.each(function(r,i){var o=a.select(this),s=n[i?"increasing":"decreasing"],l=T(void 0,s.line,5,2);o.style("fill","none").call(c.dashLine,s.line.dash,l),l&&u.stroke(o,s.line.color)})})}},66540:function(r,n,i){i(76052),r.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(r,n,i){var a=i(24040),o=i(7316),s=i(79811),l=i(9224),c=i(4016).eraseActiveShape,u=i(3400),f=u._,h=r.exports={};function p(r,n){var i,o,l=n.currentTarget,c=l.getAttribute("data-attr"),u=l.getAttribute("data-val")||!0,f=r._fullLayout,h={},p=s.list(r,null,!0),d=f._cartesianSpikesEnabled;if("zoom"===c){var y,g="in"===u?.5:2,v=(1+g)/2,m=(1-g)/2;for(o=0;o<p.length;o++)if(!(i=p[o]).fixedrange){if(y=i._name,"auto"===u)h[y+".autorange"]=!0;else if("reset"===u)void 0===i._rangeInitial0&&void 0===i._rangeInitial1?h[y+".autorange"]=!0:void 0===i._rangeInitial0?(h[y+".autorange"]=i._autorangeInitial,h[y+".range"]=[null,i._rangeInitial1]):void 0===i._rangeInitial1?(h[y+".range"]=[i._rangeInitial0,null],h[y+".autorange"]=i._autorangeInitial):h[y+".range"]=[i._rangeInitial0,i._rangeInitial1],void 0!==i._showSpikeInitial&&(h[y+".showspikes"]=i._showSpikeInitial,"on"!==d||i._showSpikeInitial||(d="off"));else{var x=[i.r2l(i.range[0]),i.r2l(i.range[1])],b=[v*x[0]+m*x[1],v*x[1]+m*x[0]];h[y+".range[0]"]=i.l2r(b[0]),h[y+".range[1]"]=i.l2r(b[1])}}}else"hovermode"!==c||"x"!==u&&"y"!==u||(u=f._isHoriz?"y":"x",l.setAttribute("data-val",u)),h[c]=u;f._cartesianSpikesEnabled=d,a.call("_guiRelayout",r,h)}function d(r,n){for(var i=n.currentTarget,o=i.getAttribute("data-attr"),s=i.getAttribute("data-val")||!0,l=r._fullLayout._subplots.gl3d||[],c={},u=o.split("."),f=0;f<l.length;f++)c[l[f]+"."+u[1]]=s;var h="pan"===s?s:"zoom";c.dragmode=h,a.call("_guiRelayout",r,c)}function y(r,n){for(var i=n.currentTarget.getAttribute("data-attr"),o="resetLastSave"===i,s="resetDefault"===i,l=r._fullLayout,c=l._subplots.gl3d||[],u={},f=0;f<c.length;f++){var h,p=c[f],d=p+".camera",y=p+".aspectratio",g=p+".aspectmode",v=l[p]._scene;o?(u[d+".up"]=v.viewInitial.up,u[d+".eye"]=v.viewInitial.eye,u[d+".center"]=v.viewInitial.center,h=!0):s&&(u[d+".up"]=null,u[d+".eye"]=null,u[d+".center"]=null,h=!0),h&&(u[y+".x"]=v.viewInitial.aspectratio.x,u[y+".y"]=v.viewInitial.aspectratio.y,u[y+".z"]=v.viewInitial.aspectratio.z,u[g]=v.viewInitial.aspectmode)}a.call("_guiRelayout",r,u)}function g(r,n){var i=n.currentTarget,a=i._previousVal,o=r._fullLayout,s=o._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],c={},u={};if(a)u=a,i._previousVal=null;else{for(var f=0;f<s.length;f++){var h=s[f],p=o[h],d=h+".hovermode";c[d]=p.hovermode,u[d]=!1;for(var y=0;y<3;y++){var g=l[y],v=h+"."+g+".showspikes";u[v]=!1,c[v]=p[g].showspikes}}i._previousVal=c}return u}function v(r,n){for(var i=n.currentTarget,o=i.getAttribute("data-attr"),s=i.getAttribute("data-val")||!0,l=r._fullLayout,c=l._subplots.geo||[],u=0;u<c.length;u++){var f=c[u],h=l[f];if("zoom"===o){var p=h.projection.scale,d="in"===s?2*p:.5*p;a.call("_guiRelayout",r,f+".projection.scale",d)}}"reset"===o&&_(r,"geo")}function m(r){var n=r._fullLayout;return!n.hovermode&&(n._has("cartesian")?n._isHoriz?"y":"x":"closest")}function x(r){var n=m(r);a.call("_guiRelayout",r,"hovermode",n)}function b(r,n){for(var i=n.currentTarget.getAttribute("data-val"),o=r._fullLayout,s=o._subplots.mapbox||[],l={},c=0;c<s.length;c++){var u=s[c],f=o[u].zoom,h="in"===i?1.05*f:f/1.05;l[u+".zoom"]=h}a.call("_guiRelayout",r,l)}function _(r,n){for(var i=r._fullLayout,o=i._subplots[n]||[],s={},l=0;l<o.length;l++)for(var c=o[l],u=i[c]._subplot.viewInitial,f=Object.keys(u),h=0;h<f.length;h++){var p=f[h];s[c+"."+p]=u[p]}a.call("_guiRelayout",r,s)}h.toImage={name:"toImage",title:function(r){var n=(r._context.toImageButtonOptions||{}).format||"png";return f(r,"png"===n?"Download plot as a png":"Download plot")},icon:l.camera,click:function(r){var n=r._context.toImageButtonOptions,i={format:n.format||"png"};u.notifier(f(r,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==i.format&&u.isIE()&&(u.notifier(f(r,"IE only supports svg.  Changing format to svg."),"long"),i.format="svg"),["filename","width","height","scale"].forEach(function(r){r in n&&(i[r]=n[r])}),a.call("downloadImage",r,i).then(function(n){u.notifier(f(r,"Snapshot succeeded")+" - "+n,"long")}).catch(function(){u.notifier(f(r,"Sorry, there was a problem downloading your snapshot!"),"long")})}},h.sendDataToCloud={name:"sendDataToCloud",title:function(r){return f(r,"Edit in Chart Studio")},icon:l.disk,click:function(r){o.sendDataToCloud(r)}},h.editInChartStudio={name:"editInChartStudio",title:function(r){return f(r,"Edit in Chart Studio")},icon:l.pencil,click:function(r){o.sendDataToCloud(r)}},h.zoom2d={name:"zoom2d",_cat:"zoom",title:function(r){return f(r,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:p},h.pan2d={name:"pan2d",_cat:"pan",title:function(r){return f(r,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:p},h.select2d={name:"select2d",_cat:"select",title:function(r){return f(r,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:p},h.lasso2d={name:"lasso2d",_cat:"lasso",title:function(r){return f(r,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:p},h.drawclosedpath={name:"drawclosedpath",title:function(r){return f(r,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:l.drawclosedpath,click:p},h.drawopenpath={name:"drawopenpath",title:function(r){return f(r,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:l.drawopenpath,click:p},h.drawline={name:"drawline",title:function(r){return f(r,"Draw line")},attr:"dragmode",val:"drawline",icon:l.drawline,click:p},h.drawrect={name:"drawrect",title:function(r){return f(r,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:l.drawrect,click:p},h.drawcircle={name:"drawcircle",title:function(r){return f(r,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:l.drawcircle,click:p},h.eraseshape={name:"eraseshape",title:function(r){return f(r,"Erase active shape")},icon:l.eraseshape,click:c},h.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:p},h.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:p},h.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(r){return f(r,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:p},h.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(r){return f(r,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:p},h.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(r){return f(r,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:p},h.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(r){return f(r,"Compare data on hover")},attr:"hovermode",val:function(r){return r._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:p},h.zoom3d={name:"zoom3d",_cat:"zoom",title:function(r){return f(r,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:d},h.pan3d={name:"pan3d",_cat:"pan",title:function(r){return f(r,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:d},h.orbitRotation={name:"orbitRotation",title:function(r){return f(r,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:d},h.tableRotation={name:"tableRotation",title:function(r){return f(r,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:d},h.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(r){return f(r,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:y},h.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(r){return f(r,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:y},h.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(r,n){var i=g(r,n);a.call("_guiRelayout",r,i)}},h.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:v},h.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:v},h.resetGeo={name:"resetGeo",_cat:"reset",title:function(r){return f(r,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:v},h.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:x},h.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:x},h.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:x},h.resetViewSankey={name:"resetSankeyGroup",title:function(r){return f(r,"Reset view")},icon:l.home,click:function(r){for(var n={"node.groups":[],"node.x":[],"node.y":[]},i=0;i<r._fullData.length;i++){var o=r._fullData[i]._viewInitial;n["node.groups"].push(o.node.groups.slice()),n["node.x"].push(o.node.x.slice()),n["node.y"].push(o.node.y.slice())}a.call("restyle",r,n)}},h.toggleHover={name:"toggleHover",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(r,n){var i=g(r,n);i.hovermode=m(r),a.call("_guiRelayout",r,i)}},h.resetViews={name:"resetViews",title:function(r){return f(r,"Reset views")},icon:l.home,click:function(r,n){var i=n.currentTarget;i.setAttribute("data-attr","zoom"),i.setAttribute("data-val","reset"),p(r,n),i.setAttribute("data-attr","resetLastSave"),y(r,n),_(r,"geo"),_(r,"mapbox")}},h.toggleSpikelines={name:"toggleSpikelines",title:function(r){return f(r,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(r){var n=r._fullLayout,i=n._cartesianSpikesEnabled;n._cartesianSpikesEnabled="on"===i?"off":"on",a.call("_guiRelayout",r,function(r){for(var n="on"===r._fullLayout._cartesianSpikesEnabled,i=s.list(r,null,!0),a={},o=0;o<i.length;o++){var l=i[o];a[l._name+".showspikes"]=!!n||l._showSpikeInitial}return a}(r))}},h.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(r){return f(r,"Reset view")},attr:"reset",icon:l.home,click:function(r){_(r,"mapbox")}},h.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:b},h.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:b}},76052:function(r,n,i){var a=i(44248),o=Object.keys(a),s=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],l=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(s),c=[];o.forEach(function(r){!function(r){if(-1===l.indexOf(r._cat||r.name)){var n=r.name,i=(r._cat||r.name).toLowerCase();-1===c.indexOf(n)&&c.push(n),-1===c.indexOf(i)&&c.push(i)}}(a[r])}),c.sort(),r.exports={DRAW_MODES:s,backButtons:l,foreButtons:c}},90824:function(r,n,i){var a=i(3400),o=i(76308),s=i(31780),l=i(66540);r.exports=function(r,n){var i=r.modebar||{},c=s.newContainer(n,"modebar");function u(r,n){return a.coerce(i,c,l,r,n)}u("orientation"),u("bgcolor",o.addOpacity(n.paper_bgcolor,.5));var f=o.contrast(o.rgb(n.modebar.bgcolor));u("color",o.addOpacity(f,.3)),u("activecolor",o.addOpacity(f,.7)),u("uirevision",n.uirevision),u("add"),u("remove")}},45460:function(r,n,i){r.exports={moduleType:"component",name:"modebar",layoutAttributes:i(66540),supplyLayoutDefaults:i(90824),manage:i(18816)}},18816:function(r,n,i){var a=i(79811),o=i(43028),s=i(24040),l=i(10624).isUnifiedHover,c=i(66400),u=i(44248),f=i(76052).DRAW_MODES,h=i(3400).extendDeep;r.exports=function(r){var n=r._fullLayout,i=r._context,p=n._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(i.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var d,y=i.modeBarButtons;d=Array.isArray(y)&&y.length?function(r){for(var n=h([],r),i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++){var s=a[o];if("string"==typeof s){if(void 0===u[s])throw Error("*modeBarButtons* configuration options invalid button name");n[i][o]=u[s]}}return n}(y):!i.displayModeBar&&i.watermark?[]:function(r){var n=r._fullLayout,i=r._fullData,c=r._context;function h(r,n){if("string"==typeof n){if(n.toLowerCase()===r.toLowerCase())return!0}else{var i=n.name,a=n._cat||n.name;if(i===r||a===r.toLowerCase())return!0}return!1}var p=n.modebar.add;"string"==typeof p&&(p=[p]);var d=n.modebar.remove;"string"==typeof d&&(d=[d]);var y=c.modeBarButtonsToAdd.concat(p.filter(function(r){for(var n=0;n<c.modeBarButtonsToRemove.length;n++)if(h(r,c.modeBarButtonsToRemove[n]))return!1;return!0})),g=c.modeBarButtonsToRemove.concat(d.filter(function(r){for(var n=0;n<c.modeBarButtonsToAdd.length;n++)if(h(r,c.modeBarButtonsToAdd[n]))return!1;return!0})),v=n._has("cartesian"),m=n._has("gl3d"),x=n._has("geo"),b=n._has("pie"),_=n._has("funnelarea"),w=n._has("gl2d"),T=n._has("ternary"),A=n._has("mapbox"),k=n._has("polar"),M=n._has("smith"),S=n._has("sankey"),E=function(r){for(var n=a.list({_fullLayout:r},null,!0),i=0;i<n.length;i++)if(!n[i].fixedrange)return!1;return!0}(n),I=l(n.hovermode),L=[];function C(r){if(r.length){for(var n=[],i=0;i<r.length;i++){for(var a=r[i],o=u[a],s=o.name.toLowerCase(),l=(o._cat||o.name).toLowerCase(),c=!1,f=0;f<g.length;f++){var h=g[f].toLowerCase();if(h===s||h===l){c=!0;break}}c||n.push(u[a])}L.push(n)}}var O=["toImage"];c.showEditInChartStudio?O.push("editInChartStudio"):c.showSendToCloud&&O.push("sendDataToCloud"),C(O);var D=[],P=[],B=[],R=[];(v||w||b||_||T)+x+m+A+k+M>1?(P=["toggleHover"],B=["resetViews"]):x?(D=["zoomInGeo","zoomOutGeo"],P=["hoverClosestGeo"],B=["resetGeo"]):m?(P=["hoverClosest3d"],B=["resetCameraDefault3d","resetCameraLastSave3d"]):A?(D=["zoomInMapbox","zoomOutMapbox"],P=["toggleHover"],B=["resetViewMapbox"]):w?P=["hoverClosestGl2d"]:b?P=["hoverClosestPie"]:S?(P=["hoverClosestCartesian","hoverCompareCartesian"],B=["resetViewSankey"]):P=["toggleHover"],v&&P.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(function(r){for(var n=0;n<r.length;n++)if(!s.traceIs(r[n],"noHover"))return!1;return!0}(i)||I)&&(P=[]),(v||w)&&!E&&(D=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"===B[0]||(B=["resetScale2d"])),m?R=["zoom3d","pan3d","orbitRotation","tableRotation"]:(v||w)&&!E||T?R=["zoom2d","pan2d"]:A||x?R=["pan2d"]:k&&(R=["zoom2d"]),function(r){for(var n=!1,i=0;i<r.length&&!n;i++){var a=r[i];a._module&&a._module.selectPoints&&(s.traceIs(a,"scatter-like")?(o.hasMarkers(a)||o.hasText(a))&&(n=!0):s.traceIs(a,"box-violin")&&"all"!==a.boxpoints&&"all"!==a.points||(n=!0))}return n}(i)&&R.push("select2d","lasso2d");var z=[],F=function(r){-1===z.indexOf(r)&&-1!==P.indexOf(r)&&z.push(r)};if(Array.isArray(y)){for(var N=[],U=0;U<y.length;U++){var j=y[U];"string"==typeof j?(j=j.toLowerCase(),-1!==f.indexOf(j)?(n._has("mapbox")||n._has("cartesian"))&&R.push(j):"togglespikelines"===j?F("toggleSpikelines"):"togglehover"===j?F("toggleHover"):"hovercompare"===j?F("hoverCompareCartesian"):"hoverclosest"===j?(F("hoverClosestCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie")):"v1hovermode"===j&&(F("hoverClosestCartesian"),F("hoverCompareCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie"))):N.push(j)}y=N}return C(R),C(D.concat(B)),C(z),function(r,n){if(n.length){if(Array.isArray(n[0]))for(var i=0;i<n.length;i++)r.push(n[i]);else r.push(n)}return r}(L,y)}(r),p?p.update(r,d):n._modeBar=c(r,d)}else p&&(p.destroy(),delete n._modeBar)}},66400:function(r,n,i){var a=i(33428),o=i(38248),s=i(3400),l=i(9224),c=i(25788).version,u=new DOMParser;function f(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var h=f.prototype;h.update=function(r,n){this.graphInfo=r;var i=this.graphInfo._context,a=this.graphInfo._fullLayout,o="modebar-"+a._uid;this.element.setAttribute("id",o),this._uid=o,this.element.className="modebar","hover"===i.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var l=a.modebar,c="hover"===i.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(o),s.addRelatedStyleRule(o,c+"#"+o+" .modebar-group","background-color: "+l.bgcolor),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn .icon path","fill: "+l.color),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn:hover .icon path","fill: "+l.activecolor),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn.active .icon path","fill: "+l.activecolor);var u=!this.hasButtons(n),f=this.hasLogo!==i.displaylogo,h=this.locale!==i.locale;if(this.locale=i.locale,(u||f||h)&&(this.removeAllButtons(),this.updateButtons(n),i.watermark||i.displaylogo)){var p=this.getLogo();i.watermark&&(p.className=p.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(p,this.element.childNodes[0]):this.element.appendChild(p),this.hasLogo=!0}this.updateActiveButton()},h.updateButtons=function(r){var n=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=n.createGroup();r.forEach(function(r){var a=r.name;if(!a)throw Error("must provide button 'name' in button config");if(-1!==n.buttonsNames.indexOf(a))throw Error("button name '"+a+"' is taken");n.buttonsNames.push(a);var o=n.createButton(r);n.buttonElements.push(o),i.appendChild(o)}),n.element.appendChild(i)})},h.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},h.createButton=function(r){var n=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var o=r.title;void 0===o?o=r.name:"function"==typeof o&&(o=o(this.graphInfo)),(o||0===o)&&i.setAttribute("data-title",o),void 0!==r.attr&&i.setAttribute("data-attr",r.attr);var s=r.val;if(void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),i.setAttribute("data-val",s)),"function"!=typeof r.click)throw Error("must provide button 'click' function in button config");i.addEventListener("click",function(i){r.click(n.graphInfo,i),n.updateActiveButton(i.currentTarget)}),i.setAttribute("data-toggle",r.toggle||!1),r.toggle&&a.select(i).classed("active",!0);var c=r.icon;return"function"==typeof c?i.appendChild(c()):i.appendChild(this.createIcon(c||l.question)),i.setAttribute("data-gravity",r.gravity||"n"),i},h.createIcon=function(r){var n,i=o(r.height)?Number(r.height):r.ascent-r.descent,a="http://www.w3.org/2000/svg";if(r.path){(n=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,r.width,i].join(" ")),n.setAttribute("class","icon");var s=document.createElementNS(a,"path");s.setAttribute("d",r.path),r.transform?s.setAttribute("transform",r.transform):void 0!==r.ascent&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),n.appendChild(s)}return r.svg&&(n=u.parseFromString(r.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},h.updateActiveButton=function(r){var n=this.graphInfo._fullLayout,i=void 0!==r?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(r){var o=r.getAttribute("data-val")||!0,l=r.getAttribute("data-attr"),c="true"===r.getAttribute("data-toggle"),u=a.select(r);if(c)l===i&&u.classed("active",!u.classed("active"));else{var f=null===l?l:s.nestedProperty(n,l).get();u.classed("active",f===o)}})},h.hasButtons=function(r){var n=this.buttons;if(!n||r.length!==n.length)return!1;for(var i=0;i<r.length;++i){if(r[i].length!==n[i].length)return!1;for(var a=0;a<r[i].length;a++)if(r[i][a].name!==n[i][a].name)return!1}return!0},h.getLogo=function(){var r=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly.js")+" (v"+c+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(l.newplotlylogo)),r.appendChild(n),r},h.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},h.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},r.exports=function(r,n){var i=r._fullLayout,o=new f({graphInfo:r,container:i._modebardiv.node(),buttons:n});return i._privateplot&&a.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},26680:function(r,n,i){var a=i(25376),o=i(22548),s=(0,i(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});r.exports={visible:{valType:"boolean",editType:"plot"},buttons:s,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:o.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(r){r.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(r,n,i){var a=i(3400),o=i(76308),s=i(31780),l=i(51272),c=i(26680),u=i(85984);function f(r,n,i,o){var s=o.calendar;function l(i,o){return a.coerce(r,n,c.buttons,i,o)}if(l("visible")){var u=l("step");"all"!==u&&(s&&"gregorian"!==s&&("month"===u||"year"===u)?n.stepmode="backward":l("stepmode"),l("count")),l("label")}}r.exports=function(r,n,i,h,p){var d=r.rangeselector||{},y=s.newContainer(n,"rangeselector");function g(r,n){return a.coerce(d,y,c,r,n)}if(g("visible",l(d,y,{name:"buttons",handleItemDefaults:f,calendar:p}).length>0)){var v=function(r,n,i){for(var a=i.filter(function(i){return n[i].anchor===r._id}),o=0,s=0;s<a.length;s++){var l=n[a[s]].domain;l&&(o=Math.max(l[1],o))}return[r.domain[0],o+u.yPad]}(n,i,h);g("x",v[0]),g("y",v[1]),a.noneOrAll(r,n,["x","y"]),g("xanchor"),g("yanchor"),a.coerceFont(g,"font",i.font);var m=g("bgcolor");g("activecolor",o.contrast(m,u.lightAmount,u.darkAmount)),g("bordercolor"),g("borderwidth")}}},50216:function(r,n,i){var a=i(33428),o=i(24040),s=i(7316),l=i(76308),c=i(43616),u=i(3400),f=u.strTranslate,h=i(72736),p=i(79811),d=i(84284),y=d.LINE_SPACING,g=d.FROM_TL,v=d.FROM_BR,m=i(85984),x=i(48040);function b(r){return r._id}function _(r,n,i){var a=u.ensureSingle(r,"rect","selector-rect",function(r){r.attr("shape-rendering","crispEdges")});a.attr({rx:m.rx,ry:m.ry}),a.call(l.stroke,n.bordercolor).call(l.fill,i._isActive||i._isHovered?n.activecolor:n.bgcolor).style("stroke-width",n.borderwidth+"px")}function w(r,n,i,a){var o;u.ensureSingle(r,"text","selector-text",function(r){r.attr("text-anchor","middle")}).call(c.font,n.font).text((o=a._fullLayout._meta,i.label?o?u.templateString(i.label,o):i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call(function(r){h.convertToTspans(r,a)})}r.exports=function(r){var n=r._fullLayout._infolayer.selectAll(".rangeselector").data(function(r){for(var n=p.list(r,"x",!0),i=[],a=0;a<n.length;a++){var o=n[a];o.rangeselector&&o.rangeselector.visible&&i.push(o)}return i}(r),b);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(n){var i,l,p,d,b,T,A,k,M,S=a.select(this),E=n.rangeselector,I=S.selectAll("g.button").data(u.filterVisible(E.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(i){var s=a.select(this),l=x(n,i);i._isActive=function(r,n,i){if("all"===n.step)return!0===r.autorange;var a=Object.keys(i);return r.range[0]===i[a[0]]&&r.range[1]===i[a[1]]}(n,i,l),s.call(_,E,i),s.call(w,E,i,r),s.on("click",function(){r._dragged||o.call("_guiRelayout",r,l)}),s.on("mouseover",function(){i._isHovered=!0,s.call(_,E,i)}),s.on("mouseout",function(){i._isHovered=!1,s.call(_,E,i)})}),i=n._name,l=0,p=0,d=E.borderwidth,I.each(function(){var r=a.select(this).select(".selector-text"),n=Math.max(E.font.size*y*h.lineCount(r),16)+3;p=Math.max(p,n)}),I.each(function(){var r=a.select(this),n=r.select(".selector-rect"),i=r.select(".selector-text"),o=i.node()&&c.bBox(i.node()).width,s=E.font.size*y,u=h.lineCount(i),g=Math.max(o+10,m.minButtonWidth);r.attr("transform",f(d+l,d)),n.attr({x:0,y:0,width:g,height:p}),h.positionText(i,g/2,p/2-(u-1)*s/2+3),l+=g+5}),T=(b=r._fullLayout._size).l+b.w*E.x,A=b.t+b.h*(1-E.y),k="left",u.isRightAnchor(E)&&(T-=l,k="right"),u.isCenterAnchor(E)&&(T-=l/2,k="center"),M="top",u.isBottomAnchor(E)&&(A-=p,M="bottom"),u.isMiddleAnchor(E)&&(A-=p/2,M="middle"),l=Math.ceil(l),p=Math.ceil(p),T=Math.round(T),A=Math.round(A),s.autoMargin(r,i+"-range-selector",{x:E.x,y:E.y,l:l*g[k],r:l*v[k],b:p*v[M],t:p*g[M]}),S.attr("transform",f(T,A))})}},48040:function(r,n,i){var a=i(73220),o=i(3400).titleCase;r.exports=function(r,n){var i=r._name,s={};if("all"===n.step)s[i+".autorange"]=!0;else{var l=function(r,n){var i,s=r.range,l=new Date(r.r2l(s[1])),c=a["utc"+o(n.step)],u=n.count;switch(n.stepmode){case"backward":i=r.l2r(+c.offset(l,-u));break;case"todate":var f=c.offset(l,-u);i=r.l2r(+c.ceil(f))}return[i,s[1]]}(r,n);s[i+".range[0]"]=l[0],s[i+".range[1]"]=l[1]}return s}},41152:function(r,n,i){r.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:i(26680)}}},layoutAttributes:i(26680),handleDefaults:i(22148),draw:i(50216)}},11200:function(r,n,i){var a=i(22548);r.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(r,n,i){var a=i(79811).list,o=i(19280).getAutoRange,s=i(74636);r.exports=function(r){for(var n=a(r,"x",!0),i=0;i<n.length;i++){var l=n[i],c=l[s.name];c&&c.visible&&c.autorange&&(c._input.autorange=!0,c._input.range=c.range=o(r,l))}}},74636:function(r){r.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(r,n,i){var a=i(3400),o=i(31780),s=i(79811),l=i(11200),c=i(10936);r.exports=function(r,n,i){var u=r[i],f=n[i];if(u.rangeslider||n._requestRangeslider[f._id]){a.isPlainObject(u.rangeslider)||(u.rangeslider={});var h,p,d=u.rangeslider,y=o.newContainer(f,"rangeslider");if(T("visible")){T("bgcolor",n.plot_bgcolor),T("bordercolor"),T("borderwidth"),T("thickness"),T("autorange",!f.isValidRange(d.range)),T("range");var g=n._subplots;if(g)for(var v=g.cartesian.filter(function(r){return r.substr(0,r.indexOf("y"))===s.name2id(i)}).map(function(r){return r.substr(r.indexOf("y"),r.length)}),m=a.simpleMap(v,s.id2name),x=0;x<m.length;x++){var b=m[x];h=d[b]||{},p=o.newContainer(y,b,"yaxis");var _,w=n[b];h.range&&w.isValidRange(h.range)&&(_="fixed"),"match"!==A("rangemode",_)&&A("range",w.range.slice())}y._input=d}}function T(r,n){return a.coerce(d,y,l,r,n)}function A(r,n){return a.coerce(h,p,c,r,n)}}},20060:function(r,n,i){var a=i(33428),o=i(24040),s=i(7316),l=i(3400),c=l.strTranslate,u=i(43616),f=i(76308),h=i(81668),p=i(57952),d=i(79811),y=i(86476),g=i(93972),v=i(74636);function m(r){return"number"==typeof r.clientX?r.clientX:r.touches&&r.touches.length>0?r.touches[0].clientX:0}function x(r,n,i,a){var o=l.ensureSingle(r,"rect",v.bgClassName,function(r){r.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),s=a.borderwidth%2==0?a.borderwidth:a.borderwidth-1,h=-a._offsetShift,p=u.crispRound(n,a.borderwidth);o.attr({width:a._width+s,height:a._height+s,transform:c(h,h),"stroke-width":p}).call(f.stroke,a.bordercolor).call(f.fill,a.bgcolor)}function b(r,n,i,a){var o=n._fullLayout;l.ensureSingleById(o._topdefs,"clipPath",a._clipId,function(r){r.append("rect").attr({x:0,y:0})}).select("rect").attr({width:a._width,height:a._height})}function _(r,n,i,o){var c,f=n.calcdata,h=r.selectAll("g."+v.rangePlotClassName).data(i._subplotsWith,l.identity);h.enter().append("g").attr("class",function(r){return v.rangePlotClassName+" "+r}).call(u.setClipUrl,o._clipId,n),h.order(),h.exit().remove(),h.each(function(r,l){var u=a.select(this),h=d.getFromId(n,r,"y"),y=h._name,g=o[y],v={data:[],layout:{xaxis:{type:i.type,domain:[0,1],range:o.range.slice(),calendar:i.calendar},width:o._width,height:o._height,margin:{t:0,b:0,l:0,r:0}},_context:n._context};i.rangebreaks&&(v.layout.xaxis.rangebreaks=i.rangebreaks),v.layout[y]={type:h.type,domain:[0,1],range:"match"!==g.rangemode?g.range.slice():h.range.slice(),calendar:h.calendar},h.rangebreaks&&(v.layout[y].rangebreaks=h.rangebreaks),s.supplyDefaults(v);var m=v._fullLayout.xaxis,x=v._fullLayout[y];m.clearCalc(),m.setScale(),x.clearCalc(),x.setScale();var b={id:r,plotgroup:u,xaxis:m,yaxis:x,isRangePlot:!0};0===l?c=b:(b.mainplot="xy",b.mainplotinfo=c),p.rangePlot(n,b,function(r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a],s=o[0].trace;s.xaxis+s.yaxis===n&&i.push(o)}return i}(f,r))})}function w(r,n,i,a,o){l.ensureSingle(r,"rect",v.maskMinClassName,function(r){r.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(f.fill,v.maskColor),l.ensureSingle(r,"rect",v.maskMaxClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(f.fill,v.maskColor),"match"!==o.rangemode&&(l.ensureSingle(r,"rect",v.maskMinOppAxisClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).call(f.fill,v.maskOppAxisColor),l.ensureSingle(r,"rect",v.maskMaxOppAxisClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).style("border-top",v.maskOppBorder).call(f.fill,v.maskOppAxisColor))}function T(r,n,i,a){n._context.staticPlot||l.ensureSingle(r,"rect",v.slideBoxClassName,function(r){r.attr({y:0,cursor:v.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:a._height,fill:v.slideBoxFill})}function A(r,n,i,a){var o=l.ensureSingle(r,"g",v.grabberMinClassName),s=l.ensureSingle(r,"g",v.grabberMaxClassName),c={x:0,width:v.handleWidth,rx:v.handleRadius,fill:f.background,stroke:f.defaultLine,"stroke-width":v.handleStrokeWidth,"shape-rendering":"crispEdges"},u={y:Math.round(a._height/4),height:Math.round(a._height/2)};l.ensureSingle(o,"rect",v.handleMinClassName,function(r){r.attr(c)}).attr(u),l.ensureSingle(s,"rect",v.handleMaxClassName,function(r){r.attr(c)}).attr(u);var h={width:v.grabAreaWidth,x:0,y:0,fill:v.grabAreaFill,cursor:n._context.staticPlot?void 0:v.grabAreaCursor};l.ensureSingle(o,"rect",v.grabAreaMinClassName,function(r){r.attr(h)}).attr("height",a._height),l.ensureSingle(s,"rect",v.grabAreaMaxClassName,function(r){r.attr(h)}).attr("height",a._height)}r.exports=function(r){for(var n=r._fullLayout,i=n._rangeSliderData,s=0;s<i.length;s++){var u=i[s][v.name];u._clipId=u._id+"-"+n._uid}var f=n._infolayer.selectAll("g."+v.containerClassName).data(i,function(r){return r._name});f.exit().each(function(r){var i=r[v.name];n._topdefs.select("#"+i._clipId).remove()}).remove(),0!==i.length&&(f.enter().append("g").classed(v.containerClassName,!0).attr("pointer-events","all"),f.each(function(i){var s=a.select(this),u=i[v.name],f=n[d.id2name(i.anchor)],p=u[d.id2name(i.anchor)];if(u.range){var k,M=l.simpleMap(u.range,i.r2l),S=l.simpleMap(i.range,i.r2l);k=S[0]<S[1]?[Math.min(M[0],S[0]),Math.max(M[1],S[1])]:[Math.max(M[0],S[0]),Math.min(M[1],S[1])],u.range=u._input.range=l.simpleMap(k,i.l2r)}i.cleanRange("rangeslider.range");var E=n._size,I=i.domain;u._width=E.w*(I[1]-I[0]);var L=Math.round(E.l+E.w*I[0]),C=Math.round(E.t+E.h*(1-i._counterDomainMin)+("bottom"===i.side?i._depth:0)+u._offsetShift+v.extraPad);s.attr("transform",c(L,C)),u._rl=l.simpleMap(u.range,i.r2l);var O=u._rl[0],D=u._rl[1],P=D-O;if(u.p2d=function(r){return r/u._width*P+O},u.d2p=function(r){return(r-O)/P*u._width},i.rangebreaks){var B=i.locateBreaks(O,D);if(B.length){var R,z,F=0;for(R=0;R<B.length;R++)F+=(z=B[R]).max-z.min;var N=u._width/(D-O-F),U=[-N*O];for(R=0;R<B.length;R++)z=B[R],U.push(U[U.length-1]-N*(z.max-z.min));for(u.d2p=function(r){for(var n=U[0],i=0;i<B.length;i++){var a=B[i];if(r>=a.max)n=U[i+1];else if(r<a.min)break}return n+N*r},R=0;R<B.length;R++)(z=B[R]).pmin=u.d2p(z.min),z.pmax=u.d2p(z.max);u.p2d=function(r){for(var n=U[0],i=0;i<B.length;i++){var a=B[i];if(r>=a.pmax)n=U[i+1];else if(r<a.pmin)break}return(r-n)/N}}}if("match"!==p.rangemode){var j=f.r2l(p.range[0]),V=f.r2l(p.range[1])-j;u.d2pOppAxis=function(r){return(r-j)/V*u._height}}s.call(x,r,i,u).call(b,r,i,u).call(_,r,i,u).call(w,r,i,u,p).call(T,r,i,u).call(A,r,i,u),function(r,n,i,s){if(!n._context.staticPlot){var c=r.select("rect."+v.slideBoxClassName).node(),u=r.select("rect."+v.grabAreaMinClassName).node(),f=r.select("rect."+v.grabAreaMaxClassName).node();r.on("mousedown",h),r.on("touchstart",h)}function h(){var h=a.event,p=h.target,d=m(h),v=d-r.node().getBoundingClientRect().left,x=s.d2p(i._rl[0]),b=s.d2p(i._rl[1]),_=y.coverSlip();function w(r){var h,y,w,T=+m(r)-d;switch(p){case c:if(w="ew-resize",x+T>i._length||b+T<0)return;h=x+T,y=b+T;break;case u:if(w="col-resize",x+T>i._length)return;h=x+T,y=b;break;case f:if(w="col-resize",b+T<0)return;h=x,y=b+T;break;default:w="ew-resize",h=v,y=v+T}if(y<h){var A=y;y=h,h=A}s._pixelMin=h,s._pixelMax=y,g(a.select(_),w),function(r,n,i,a){function s(r){return i.l2r(l.constrain(r,a._rl[0],a._rl[1]))}var c=s(a.p2d(a._pixelMin)),u=s(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){o.call("_guiRelayout",n,i._name+".range",[c,u])})}(0,n,i,s)}function T(){_.removeEventListener("mousemove",w),_.removeEventListener("mouseup",T),this.removeEventListener("touchmove",w),this.removeEventListener("touchend",T),l.removeElement(_)}this.addEventListener("touchmove",w),this.addEventListener("touchend",T),_.addEventListener("mousemove",w),_.addEventListener("mouseup",T)}}(s,r,i,u),function(r,n,i,a,o,s){var u=v.handleWidth/2;function f(r){return l.constrain(r,0,a._width)}function h(r){return l.constrain(r,0,a._height)}function p(r){return l.constrain(r,-u,a._width+u)}var d=f(a.d2p(i._rl[0])),y=f(a.d2p(i._rl[1]));if(r.select("rect."+v.slideBoxClassName).attr("x",d).attr("width",y-d),r.select("rect."+v.maskMinClassName).attr("width",d),r.select("rect."+v.maskMaxClassName).attr("x",y).attr("width",a._width-y),"match"!==s.rangemode){var g=a._height-h(a.d2pOppAxis(o._rl[1])),m=a._height-h(a.d2pOppAxis(o._rl[0]));r.select("rect."+v.maskMinOppAxisClassName).attr("x",d).attr("height",g).attr("width",y-d),r.select("rect."+v.maskMaxOppAxisClassName).attr("x",d).attr("y",m).attr("height",a._height-m).attr("width",y-d),r.select("rect."+v.slideBoxClassName).attr("y",g).attr("height",m-g)}var x=Math.round(p(d-u))-.5,b=Math.round(p(y-u))+.5;r.select("g."+v.grabberMinClassName).attr("transform",c(x,.5)),r.select("g."+v.grabberMaxClassName).attr("transform",c(b,.5))}(s,0,i,u,f,p),"bottom"===i.side&&h.draw(r,i._id+"title",{propContainer:i,propName:i._name+".title",placeholder:n._dfltTitle.x,attributes:{x:i._offset+i._length/2,y:C+u._height+u._offsetShift+10+1.5*i.title.font.size,"text-anchor":"middle"}})}))}},97944:function(r,n,i){var a=i(79811),o=i(72736),s=i(74636),l=i(84284).LINE_SPACING,c=s.name;function u(r){var n=r&&r[c];return n&&n.visible}n.isVisible=u,n.makeData=function(r){var n=a.list({_fullLayout:r},"x",!0),i=r.margin,o=[];if(!r._has("gl2d"))for(var s=0;s<n.length;s++){var l=n[s];if(u(l)){o.push(l);var f=l[c];f._id=c+l._id,f._height=(r.height-i.b-i.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}r._rangeSliderData=o},n.autoMarginOpts=function(r,n){var i=r._fullLayout,a=n[c],u=n._id.charAt(0),f=0,h=0;return"bottom"===n.side&&(f=n._depth,n.title.text!==i._dfltTitle[u]&&(h=1.5*n.title.font.size+10+a._offsetShift+(n.title.text.match(o.BR_TAG_ALL)||[]).length*n.title.font.size*l)),{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:a._height+f+Math.max(i.margin.b,h),pad:s.extraPad+2*a._offsetShift}}},49692:function(r,n,i){var a=i(3400),o=i(11200),s=i(10936),l=i(97944);r.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},o,{yaxis:s})}}},layoutAttributes:i(11200),handleDefaults:i(94040),calcAutorange:i(26652),draw:i(20060),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},10936:function(r){r.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(r,n,i){var a=i(13916),o=i(52904).line,s=i(98192).u,l=i(92880).extendFlat,c=i(67824).overrideAll,u=i(31780).templatedArray;i(36208),r.exports=c(u("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:l({},a.xref,{}),yref:l({},a.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:o.color,width:l({},o.width,{min:1,dflt:1}),dash:l({},s,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(r){r.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(r,n,i){var a=i(3400),o=i(54460),s=i(51272),l=i(93956),c=i(65152);function u(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}var u=s("path"),f="path"!==s("type",u?"path":"rect");f&&delete n.path,s("opacity"),s("line.color"),s("line.width"),s("line.dash");for(var h=["x","y"],p=0;p<2;p++){var d,y,g,v=h[p],m={_fullLayout:i},x=o.coerceRef(r,n,m,v);if((d=o.getFromId(m,x))._selectionIndices.push(n._index),g=c.rangeToShapePosition(d),y=c.shapePositionToRange(d),f){var b=v+"0",_=v+"1",w=r[b],T=r[_];r[b]=y(r[b],!0),r[_]=y(r[_],!0),o.coercePosition(n,m,s,x,b),o.coercePosition(n,m,s,x,_);var A=n[b],k=n[_];void 0!==A&&void 0!==k&&(n[b]=g(A),n[_]=g(k),r[b]=w,r[_]=T)}}f&&a.noneOrAll(r,n,["x0","x1","y0","y1"])}r.exports=function(r,n){s(r,n,{name:"selections",handleItemDefaults:u});for(var i=n.selections,a=0;a<i.length;a++){var o=i[a];o&&void 0===o.path&&(void 0!==o.x0&&void 0!==o.x1&&void 0!==o.y0&&void 0!==o.y1||(n.selections[a]=null))}}},23640:function(r,n,i){var a=i(9856).readPaths,o=i(55496),s=i(1936).clearOutlineControllers,l=i(76308),c=i(43616),u=i(31780).arrayEditor,f=i(65152),h=f.getPathString;function p(r){var n=r._fullLayout;for(var i in s(r),n._selectionLayer.selectAll("path").remove(),n._plots){var a=n._plots[i].selectionLayer;a&&a.selectAll("path").remove()}for(var o=0;o<n.selections.length;o++)y(r,o)}function d(r){return r._context.editSelection}function y(r,n){r._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+n+'"]').remove();var i=f.makeSelectionsOptionsAndPlotinfo(r,n),s=i.options,y=i.plotinfo;s._input&&function(i){var f=h(r,s),v={"data-index":n,"fill-rule":"evenodd",d:f},m=s.opacity,x="rgba(0,0,0,0)",b=s.line.color||l.contrast(r._fullLayout.plot_bgcolor),_=s.line.width,w=s.line.dash;_||(_=5,w="solid");var T=d(r)&&r._fullLayout._activeSelectionIndex===n;T&&(x=r._fullLayout.activeselection.fillcolor,m=r._fullLayout.activeselection.opacity);for(var A=[],k=1;k>=0;k--){var M=i.append("path").attr(v).style("opacity",k?.1:m).call(l.stroke,b).call(l.fill,x).call(c.dashLine,k?"solid":w,k?4+_:_);if(function(r,n,i){var a=i.xref+i.yref;c.setClipUrl(r,"clip"+n._fullLayout._uid+a,n)}(M,r,s),T){var S=u(r.layout,"selections",s);M.style({cursor:"move"});var E={element:M.node(),plotinfo:y,gd:r,editHelpers:S,isActiveSelection:!0};o(a(f,r),M,E)}else M.style("pointer-events",k?"all":"none");A[k]=M}var I=A[0];A[1].node().addEventListener("click",function(){return function(r,n){if(d(r)){var i=+n.node().getAttribute("data-index");if(i>=0){if(i===r._fullLayout._activeSelectionIndex)return void g(r);r._fullLayout._activeSelectionIndex=i,r._fullLayout._deactivateSelection=g,p(r)}}}(r,I)})}(r._fullLayout._selectionLayer)}function g(r){d(r)&&r._fullLayout._activeSelectionIndex>=0&&(s(r),delete r._fullLayout._activeSelectionIndex,p(r))}r.exports={draw:p,drawOne:y,activateLastSelection:function(r){if(d(r)){var n=r._fullLayout.selections.length-1;r._fullLayout._activeSelectionIndex=n,r._fullLayout._deactivateSelection=g,p(r)}}}},34200:function(r,n,i){var a=i(98192).u,o=i(92880).extendFlat;r.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:o({},a,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(r){r.exports=function(r,n,i){i("newselection.mode"),i("newselection.line.width")&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}},5968:function(r,n,i){var a=i(72760).selectMode,o=i(1936).clearOutline,s=i(9856),l=s.readPaths,c=s.writePaths,u=s.fixDatesForPaths;r.exports=function(r,n){if(r.length){var i=r[0][0];if(i){var s=i.getAttribute("d"),f=n.gd,h=f._fullLayout.newselection,p=n.plotinfo,d=p.xaxis,y=p.yaxis,g=n.isActiveSelection,v=n.dragmode,m=(f.layout||{}).selections||[];if(!a(v)&&void 0!==g){var x=f._fullLayout._activeSelectionIndex;if(x<m.length)switch(f._fullLayout.selections[x].type){case"rect":v="select";break;case"path":v="lasso"}}var b,_=l(s,f,p,g),w={xref:d._id,yref:y._id,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}};1===_.length&&(b=_[0]),b&&5===b.length&&"select"===v?(w.type="rect",w.x0=b[0][1],w.y0=b[0][2],w.x1=b[2][1],w.y1=b[2][2]):(w.type="path",d&&y&&u(_,d,y),w.path=c(_),b=null),o(f);for(var T=n.editHelpers,A=(T||{}).modifyItem,k=[],M=0;M<m.length;M++){var S=f._fullLayout.selections[M];if(S){if(k[M]=S._input,void 0!==g&&M===f._fullLayout._activeSelectionIndex)switch(S.type){case"rect":A("x0",w.x0),A("x1",w.x1),A("y0",w.y0),A("y1",w.y1);break;case"path":A("path",w.path)}}else k[M]=S}return void 0===g?(k.push(w),k):T?T.getUpdateObj():{}}}}},5840:function(r,n,i){var a=i(3400).strTranslate;function o(r,n){switch(r.type){case"log":return r.p2d(n);case"date":return r.p2r(n,0,r.calendar);default:return r.p2r(n)}}r.exports={p2r:o,r2p:function(r,n){switch(r.type){case"log":return r.d2p(n);case"date":return r.r2p(n,0,r.calendar);default:return r.r2p(n)}},axValue:function(r){var n="y"===r._id.charAt(0)?1:0;return function(i){return o(r,i[n])}},getTransform:function(r){return a(r.xaxis._offset,r.yaxis._offset)}}},22676:function(r,n,i){var a=i(23640),o=i(43156);r.exports={moduleType:"component",name:"selections",layoutAttributes:i(93956),supplyLayoutDefaults:i(74224),supplyDrawNewSelectionDefaults:i(81004),includeBasePlot:i(36632)("selections"),draw:a.draw,drawOne:a.drawOne,reselect:o.reselect,prepSelect:o.prepSelect,clearOutline:o.clearOutline,clearSelectionsCache:o.clearSelectionsCache,selectOnClick:o.selectOnClick}},43156:function(r,n,i){var a=i(14756),o=i(61456),s=i(24040),l=i(43616).dashStyle,c=i(76308),u=i(93024),f=i(10624).makeEventData,h=i(72760),p=h.freeMode,d=h.rectMode,y=h.drawMode,g=h.openMode,v=h.selectMode,m=i(65152),x=i(85448),b=i(55496),_=i(1936).clearOutline,w=i(9856),T=w.handleEllipse,A=w.readPaths,k=i(93940).newShapes,M=i(5968),S=i(23640).activateLastSelection,E=i(3400),I=E.sorterAsc,L=i(92065),C=i(91200),O=i(79811).getFromId,D=i(73696),P=i(39172).redrawReglTraces,B=i(83280),R=B.MINSELECT,z=L.filter,F=L.tester,N=i(5840),U=N.p2r,j=N.axValue,V=N.getTransform;function H(r){return void 0!==r.subplot}function q(r,n,i,a,o,s,l){var c,u,f,h,p,d,y,v,m,x=n._hoverdata,_=n._fullLayout.clickmode.indexOf("event")>-1,w=[];if(x&&Array.isArray(x)&&!0!==x[0].hoverOnBox){Y(r,n,s);var T=function(r,n){var i,a,o=r[0],s=-1,l=[];for(a=0;a<n.length;a++)if(i=n[a],o.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(!0===o.hoverOnBox)break;void 0!==o.pointNumber?s=o.pointNumber:void 0!==o.binNumber&&(s=o.binNumber,l=o.pointNumbers);break}return{pointNumber:s,pointNumbers:l,searchInfo:i}}(x,c=K(n,i,a,o));if(T.pointNumbers.length>0?function(r,n){var i,a,o,s=[];for(o=0;o<r.length;o++)(i=r[o]).cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&s.push(i);if(1===s.length&&s[0]===n.searchInfo&&(a=n.searchInfo.cd[0].trace).selectedpoints.length===n.pointNumbers.length){for(o=0;o<n.pointNumbers.length;o++)if(0>a.selectedpoints.indexOf(n.pointNumbers[o]))return!1;return!0}return!1}(c,T):function(r){var n,i,a=0;for(i=0;i<r.length;i++)if((n=r[i].cd[0].trace).selectedpoints&&(n.selectedpoints.length>1||(a+=n.selectedpoints.length)>1))return!1;return 1===a}(c)&&(d=$(T))){for(l&&l.remove(),m=0;m<c.length;m++)(u=c[m])._module.selectPoints(u,!1);Q(n,c),Z(s),_&&th(n)}else{for(y=r.shiftKey&&(void 0!==d?d:$(T)),f={pointNumber:T.pointNumber,searchInfo:T.searchInfo,subtract:!!y},h=W(s.selectionDefs.concat([f])),m=0;m<c.length;m++)if(p=te(c[m]._module.selectPoints(c[m],h),c[m]),w.length)for(var A=0;A<p.length;A++)w.push(p[A]);else w=p;Q(n,c,v={points:w}),f&&s&&s.selectionDefs.push(f),l&&b(tr(s.mergedPolygons,g(s.dragmode)),l,s),_&&tf(n,v)}}}function G(r){return"pointNumber"in r&&"searchInfo"in r}function W(r){if(r.length){for(var n=[],i=G(r[0])?0:r[0][0][0],a=i,o=G(r[0])?0:r[0][0][1],s=o,l=0;l<r.length;l++)if(G(r[l]))n.push(function(r){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(n,i,a,o){var s=r.searchInfo.cd[0].trace._expandedIndex;return o.cd[0].trace._expandedIndex===s&&a===r.pointNumber},isRect:!1,degenerate:!1,subtract:!!r.subtract}}(r[l]));else{var c=F(r[l]);c.subtract=!!r[l].subtract,n.push(c),i=Math.min(i,c.xmin),a=Math.max(a,c.xmax),o=Math.min(o,c.ymin),s=Math.max(s,c.ymax)}return{xmin:i,xmax:a,ymin:o,ymax:s,pts:[],contains:function(r,i,a,o){for(var s=!1,l=0;l<n.length;l++)n[l].contains(r,i,a,o)&&(s=!n[l].subtract);return s},isRect:!1,degenerate:!1}}}function Y(r,n,i){var a=n._fullLayout,o=i.plotinfo,s=i.dragmode,l=a._lastSelectedSubplot&&a._lastSelectedSubplot===o.id,c=(r.shiftKey||r.altKey)&&!(y(s)&&g(s));l&&c&&o.selection&&o.selection.selectionDefs&&!i.selectionDefs?(i.selectionDefs=o.selection.selectionDefs,i.mergedPolygons=o.selection.mergedPolygons):c&&o.selection||Z(i),l||(_(n),a._lastSelectedSubplot=o.id)}function Z(r,n){var i=r.dragmode,a=r.plotinfo,o=r.gd;o._fullLayout._activeShapeIndex>=0&&o._fullLayout._deactivateShape(o),o._fullLayout._activeSelectionIndex>=0&&o._fullLayout._deactivateSelection(o);var l=o._fullLayout._zoomlayer,c=y(i),u=v(i);if(c||u){var f,h,p=l.selectAll(".select-outline-"+a.id);p&&o._fullLayout._outlining&&(c&&(f=k(p,r)),f&&s.call("_guiRelayout",o,{shapes:f}),u&&!H(r)&&(h=M(p,r)),h&&(o._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",o,{selections:h}).then(function(){n&&S(o)})),o._fullLayout._outlining=!1)}a.selection={},a.selection.selectionDefs=r.selectionDefs=[],a.selection.mergedPolygons=r.mergedPolygons=[]}function X(r){return r._id}function K(r,n,i,a){if(!r.calcdata)return[];var o,s,l,c=[],u=n.map(X),f=i.map(X);for(l=0;l<r.calcdata.length;l++)if(!0===(s=(o=r.calcdata[l])[0].trace).visible&&s._module&&s._module.selectPoints){if(H({subplot:a})&&(s.subplot===a||s.geo===a))c.push(J(s._module,o,n[0],i[0]));else if("splom"===s.type){if(s._xaxes[u[0]]&&s._yaxes[f[0]]){var h=J(s._module,o,n[0],i[0]);h.scene=r._fullLayout._splomScenes[s.uid],c.push(h)}}else if("sankey"===s.type){var p=J(s._module,o,n[0],i[0]);c.push(p)}else{if(!(-1!==u.indexOf(s.xaxis)||s._xA&&s._xA.overlaying)||!(-1!==f.indexOf(s.yaxis)||s._yA&&s._yA.overlaying))continue;c.push(J(s._module,o,O(r,s.xaxis),O(r,s.yaxis)))}}return c}function J(r,n,i,a){return{_module:r,cd:n,xaxis:i,yaxis:a}}function $(r){var n=r.searchInfo.cd[0].trace,i=r.pointNumber,a=r.pointNumbers,o=a.length>0?a[0]:i;return!!n.selectedpoints&&n.selectedpoints.indexOf(o)>-1}function Q(r,n,i){var a,o;for(a=0;a<n.length;a++){var l=n[a].cd[0].trace._fullInput,c=r._fullLayout._tracePreGUI[l.uid]||{};void 0===c.selectedpoints&&(c.selectedpoints=l._input.selectedpoints||null)}if(i){var u=i.points||[];for(a=0;a<n.length;a++)(o=n[a].cd[0].trace)._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(var f=0;f<u.length;f++){var h=u[f],p=h.data,d=h.fullData,y=h.pointIndex,g=h.pointIndices;g?([].push.apply(p.selectedpoints,g),o._fullInput!==o&&[].push.apply(d.selectedpoints,g)):(p.selectedpoints.push(y),o._fullInput!==o&&d.selectedpoints.push(y))}}else for(a=0;a<n.length;a++)delete(o=n[a].cd[0].trace).selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;!function(r,n){for(var i=!1,a=0;a<n.length;a++){var o=n[a],l=o.cd;s.traceIs(l[0].trace,"regl")&&(i=!0);var c=o._module,u=c.styleOnSelect||c.style;u&&(u(r,l,l[0].node3),l[0].nodeRangePlot3&&u(r,l,l[0].nodeRangePlot3))}i&&(D(r),P(r))}(r,n)}function tt(r,n,i){for(var o=(i?a.difference:a.union)({regions:r},{regions:[n]}).regions.reverse(),s=0;s<o.length;s++){var l=o[s];l.subtract=ts(l,o.slice(0,s))}return o}function te(r,n){if(Array.isArray(r))for(var i=n.cd,a=n.cd[0].trace,o=0;o<r.length;o++)r[o]=f(r[o],a,i);return r}function tr(r,n){for(var i=[],a=0;a<r.length;a++){i[a]=[];for(var o=0;o<r[a].length;o++){i[a][o]=[],i[a][o][0]=o?"L":"M";for(var s=0;s<r[a][o].length;s++)i[a][o].push(r[a][o][s])}n||i[a].push(["Z",i[a][0][1],i[a][0][2]])}return i}function tn(r,n){for(var i,a,o=[],s=[],l=0;l<n.length;l++){var c=n[l];a=c._module.selectPoints(c,r),s.push(a),i=te(a,c),o=o.concat(i)}return o}function ti(r,n,i,a,o){var s,l,c,u=!!a;o&&(s=o.plotinfo,l=o.xaxes[0]._id,c=o.yaxes[0]._id);var f=[],h=[],p=to(r),d=r._fullLayout;if(s){var g=d._zoomlayer,m=d.dragmode,x=y(m),b=v(m);if(x||b){var _=O(r,l,"x"),w=O(r,c,"y");if(_&&w){var T=g.selectAll(".select-outline-"+s.id);if(T&&r._fullLayout._outlining&&T.length){for(var k=T[0][0].getAttribute("d"),M=A(k,r,s),S=[],E=0;E<M.length;E++){for(var I=M[E],L=[],C=0;C<I.length;C++)L.push([tl(_,I[C][1]),tl(w,I[C][2])]);L.xref=l,L.yref=c,L.subtract=ts(L,S),S.push(L)}p=p.concat(S)}}}}var D=l&&c?[l+c]:d._subplots.cartesian;!function(r){var n=r.calcdata;if(n)for(var i=0;i<n.length;i++){var a=n[i][0].trace,o=r._fullLayout._splomScenes;if(o){var s=o[a.uid];s&&(s.selectBatch=[])}}}(r);for(var P={},B=0;B<D.length;B++){var R=D[B],z=R.indexOf("y"),N=R.slice(0,z),U=R.slice(z),j=l&&c?i:void 0;if(j=function(r,n,i,a){for(var o,s=0;s<r.length;s++){var l=r[s];n===l.xref&&i===l.yref&&(o?a=W(o=tt(o,l,!!l.subtract)):(o=[l],a=F(l)))}return a}(p,N,U,j)){var V=a;if(!u){var H=O(r,N,"x"),q=O(r,U,"y");V=K(r,[H],[q],R);for(var G=0;G<V.length;G++){var Y=V[G],Z=Y.cd[0],X=Z.trace;if("scattergl"===Y._module.name&&!Z.t.xpx){var J=X.x,$=X.y,te=X._length;Z.t.xpx=[],Z.t.ypx=[];for(var tr=0;tr<te;tr++)Z.t.xpx[tr]=H.c2p(J[tr]),Z.t.ypx[tr]=q.c2p($[tr])}"splom"===Y._module.name&&(P[X.uid]||(P[X.uid]=!0))}}var ti=tn(j,V);f=f.concat(ti),h=h.concat(V)}}var tp={points:f};Q(r,h,tp);var td=d.clickmode.indexOf("event")>-1&&n;if(!s&&n){var ty=to(r,!0);if(ty.length){var tg=ty[0].xref,tv=ty[0].yref;if(tg&&tv){var tm=tc(ty);tu([O(r,tg,"x"),O(r,tv,"y")])(tp,tm)}}r._fullLayout._noEmitSelectedAtStart?r._fullLayout._noEmitSelectedAtStart=!1:td&&tf(r,tp),d._reselect=!1}if(!s&&d._deselect){var tx=d._deselect;(function(r,n,i){for(var a=0;a<i.length;a++){var o=i[a];if(o.xaxis&&o.xaxis._id===r&&o.yaxis&&o.yaxis._id===n)return!0}return!1})(l=tx.xref,c=tx.yref,h)||ta(r,l,c,a),td&&(tp.points.length?tf(r,tp):th(r)),d._deselect=!1}return{eventData:tp,selectionTesters:i}}function ta(r,n,i,a){a=K(r,[O(r,n,"x")],[O(r,i,"y")],n+i);for(var o=0;o<a.length;o++){var s=a[o];s._module.selectPoints(s,!1)}Q(r,a)}function to(r,n){for(var i=[],a=r._fullLayout,o=a.selections,s=o.length,l=0;l<s;l++)if(!n||l===a._activeSelectionIndex){var c=o[l];if(c){var u,f,h,p,d,y=c.xref,g=c.yref,v=O(r,y,"x"),b=O(r,g,"y");if("rect"===c.type){d=[];var _=tl(v,c.x0),w=tl(v,c.x1),T=tl(b,c.y0),A=tl(b,c.y1);d=[[_,T],[_,A],[w,A],[w,T]],u=Math.min(_,w),f=Math.max(_,w),h=Math.min(T,A),p=Math.max(T,A),d.xmin=u,d.xmax=f,d.ymin=h,d.ymax=p,d.xref=y,d.yref=g,d.subtract=!1,d.isRect=!0,i.push(d)}else if("path"===c.type)for(var k=c.path.split("Z"),M=[],S=0;S<k.length;S++){var E=k[S];if(E){E+="Z";var I=m.extractPathCoords(E,x.paramIsX,"raw"),L=m.extractPathCoords(E,x.paramIsY,"raw");u=1/0,f=-1/0,h=1/0,p=-1/0,d=[];for(var C=0;C<I.length;C++){var D=tl(v,I[C]),P=tl(b,L[C]);d.push([D,P]),u=Math.min(D,u),f=Math.max(D,f),h=Math.min(P,h),p=Math.max(P,p)}d.xmin=u,d.xmax=f,d.ymin=h,d.ymax=p,d.xref=y,d.yref=g,d.subtract=ts(d,M),M.push(d),i.push(d)}}}}return i}function ts(r,n){for(var i=!1,a=0;a<n.length;a++)for(var s=n[a],l=0;l<r.length;l++)if(o(r[l],s)){i=!i;break}return i}function tl(r,n){return"date"===r.type&&(n=n.replace("_"," ")),"log"===r.type?r.c2p(n):r.r2p(n,null,r.calendar)}function tc(r){for(var n,i=r.length,a=[],o=0;o<i;o++){var s=r[o];a=(a=a.concat(s)).concat([s[0]])}return(n=a).isRect=5===n.length&&n[0][0]===n[4][0]&&n[0][1]===n[4][1]&&n[0][0]===n[1][0]&&n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]||n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0],n.isRect&&(n.xmin=Math.min(n[0][0],n[2][0]),n.xmax=Math.max(n[0][0],n[2][0]),n.ymin=Math.min(n[0][1],n[2][1]),n.ymax=Math.max(n[0][1],n[2][1])),n}function tu(r){return function(n,i){for(var a,o,s=0;s<r.length;s++){var l=r[s],c=l._id,u=c.charAt(0);if(i.isRect){a||(a={});var f=i[u+"min"],h=i[u+"max"];void 0!==f&&void 0!==h&&(a[c]=[U(l,f),U(l,h)].sort(I))}else o||(o={}),o[c]=i.map(j(l))}a&&(n.range=a),o&&(n.lassoPoints=o)}}function tf(r,n){n&&(n.selections=(r.layout||{}).selections||[]),r.emit("plotly_selected",n)}function th(r){r.emit("plotly_deselect",null)}r.exports={reselect:ti,prepSelect:function(r,n,i,a,o){var f=!H(a),h=p(o),m=d(o),x=g(o),_=y(o),w=v(o),A="drawcircle"===o,k="drawline"===o||A,M=a.gd,S=M._fullLayout,I=w&&"immediate"===S.newselection.mode&&f,L=S._zoomlayer,O=a.element.getBoundingClientRect(),D=a.plotinfo,P=V(D),N=n-O.left,U=i-O.top;S._calcInverseTransform(M);var j=E.apply3DTransform(S._invTransform)(N,U);N=j[0],U=j[1];var G,X,J,$,te,to,ts,tl=S._invScaleX,tp=S._invScaleY,td=N,ty=U,tg="M"+N+","+U,tv=a.xaxes[0],tm=a.yaxes[0],tx=tv._length,tb=tm._length,t_=r.altKey&&!(y(o)&&x);Y(r,M,a),h&&(G=z([[N,U]],B.BENDPX));var tw=L.selectAll("path.select-outline-"+D.id).data([1]),tT=_?S.newshape:S.newselection;_&&(a.hasText=tT.label.text||tT.label.texttemplate);var tA=_&&!x?tT.fillcolor:"rgba(0,0,0,0)",tk=tT.line.color||(f?c.contrast(M._fullLayout.plot_bgcolor):"#7f7f7f");tw.enter().append("path").attr("class","select-outline select-outline-"+D.id).style({opacity:_?tT.opacity/2:1,"stroke-dasharray":l(tT.line.dash,tT.line.width),"stroke-width":tT.line.width+"px","shape-rendering":"crispEdges"}).call(c.stroke,tk).call(c.fill,tA).attr("fill-rule","evenodd").classed("cursor-move",!!_).attr("transform",P).attr("d",tg+"Z");var tM=L.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1}).attr("transform",P).attr("d","M0,0Z");if(_&&a.hasText){var tS=L.select(".label-temp");tS.empty()&&(tS=L.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var tE=S._uid+B.SELECTID,tI=[],tL=K(M,a.xaxes,a.yaxes,a.subplot);I&&!r.shiftKey&&(a._clearSubplotSelections=function(){if(f){var r=tv._id,n=tm._id;ta(M,r,n,tL);for(var i=(M.layout||{}).selections||[],a=[],o=!1,l=0;l<i.length;l++){var c=S.selections[l];c.xref!==r||c.yref!==n?a.push(i[l]):o=!0}o&&(M._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",M,{selections:a}))}});var tC=a.plotinfo.fillRangeItems||tu(a.xaxes.concat(a.yaxes));a.moveFn=function(r,n){a._clearSubplotSelections&&(a._clearSubplotSelections(),a._clearSubplotSelections=void 0),td=Math.max(0,Math.min(tx,tl*r+N)),ty=Math.max(0,Math.min(tb,tp*n+U));var i=Math.abs(td-N),o=Math.abs(ty-U);if(m){if(w){var s=S.selectdirection;switch(l="any"===s?o<Math.min(.6*i,R)?"h":i<Math.min(.6*o,R)?"v":"d":s){case"h":c=A?tb/2:0,u=tb;break;case"v":c=A?tx/2:0,u=tx}}if(_)switch(S.newshape.drawdirection){case"vertical":l="h",c=A?tb/2:0,u=tb;break;case"horizontal":l="v",c=A?tx/2:0,u=tx;break;case"ortho":i<o?(l="h",c=U,u=ty):(l="v",c=N,u=td);break;default:l="d"}"h"===l?(($=k?T(A,[td,c],[td,u]):[[N,c],[N,u],[td,u],[td,c]]).xmin=k?td:Math.min(N,td),$.xmax=k?td:Math.max(N,td),$.ymin=Math.min(c,u),$.ymax=Math.max(c,u),tM.attr("d","M"+$.xmin+","+(U-R)+"h-4v"+2*R+"h4ZM"+($.xmax-1)+","+(U-R)+"h4v"+2*R+"h-4Z")):"v"===l?(($=k?T(A,[c,ty],[u,ty]):[[c,U],[c,ty],[u,ty],[u,U]]).xmin=Math.min(c,u),$.xmax=Math.max(c,u),$.ymin=k?ty:Math.min(U,ty),$.ymax=k?ty:Math.max(U,ty),tM.attr("d","M"+(N-R)+","+$.ymin+"v-4h"+2*R+"v4ZM"+(N-R)+","+($.ymax-1)+"v4h"+2*R+"v-4Z")):"d"===l&&(($=k?T(A,[N,U],[td,ty]):[[N,U],[N,ty],[td,ty],[td,U]]).xmin=Math.min(N,td),$.xmax=Math.max(N,td),$.ymin=Math.min(U,ty),$.ymax=Math.max(U,ty),tM.attr("d","M0,0Z"))}else h&&(G.addPt([td,ty]),$=G.filtered);if(a.selectionDefs&&a.selectionDefs.length?(J=tt(a.mergedPolygons,$,t_),$.subtract=t_,X=W(a.selectionDefs.concat([$]))):(J=[$],X=F($)),b(tr(J,x),tw,a),w){var l,c,u,f,p=ti(M,!1),d=p.eventData?p.eventData.points.slice():[];X=(p=ti(M,!1,X,tL,a)).selectionTesters,ts=p.eventData,f=G?G.filtered:tc(J),C.throttle(tE,B.SELECTDELAY,function(){for(var r=(tI=tn(X,tL)).slice(),n=0;n<d.length;n++){for(var i=d[n],a=!1,o=0;o<r.length;o++)if(r[o].curveNumber===i.curveNumber&&r[o].pointNumber===i.pointNumber){a=!0;break}a||r.push(i)}r.length&&(ts||(ts={}),ts.points=r),tC(ts,f),function(r,n){r.emit("plotly_selecting",n)}(M,ts)})}},a.clickFn=function(r,n){if(tM.remove(),M._fullLayout._activeShapeIndex>=0)M._fullLayout._deactivateShape(M);else if(!_){var i=S.clickmode;C.done(tE).then(function(){if(C.clear(tE),2===r){for(tw.remove(),te=0;te<tL.length;te++)(to=tL[te])._module.selectPoints(to,!1);if(Q(M,tL),Z(a),th(M),tL.length){var o=tL[0].xaxis,l=tL[0].yaxis;if(o&&l){for(var c=[],f=M._fullLayout.selections,h=0;h<f.length;h++){var p=f[h];p&&(p.xref===o._id&&p.yref===l._id||c.push(p))}c.length<f.length&&(M._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",M,{selections:c}))}}}else i.indexOf("select")>-1&&q(n,M,a.xaxes,a.yaxes,a.subplot,a,tw),"event"===i&&tf(M,void 0);u.click(M,n,D.id)}).catch(E.error)}},a.doneFn=function(){tM.remove(),C.done(tE).then(function(){C.clear(tE),!I&&$&&a.selectionDefs&&($.subtract=t_,a.selectionDefs.push($),a.mergedPolygons.length=0,[].push.apply(a.mergedPolygons,J)),(I||_)&&Z(a,I),a.doneFnCompleted&&a.doneFnCompleted(tI),w&&tf(M,ts)}).catch(E.error)}},clearOutline:_,clearSelectionsCache:Z,selectOnClick:q}},46056:function(r,n,i){var a=i(13916),o=i(25376),s=i(52904).line,l=i(98192).u,c=i(92880).extendFlat,u=i(31780).templatedArray,f=(i(36208),i(45464)),h=i(21776).ye,p=i(97728);r.exports=u("shape",{visible:c({},f.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:c({},f.legend,{editType:"calc+arraydraw"}),legendgroup:c({},f.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:c({},f.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:o({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:c({},f.legendrank,{editType:"calc+arraydraw"}),legendwidth:c({},f.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:c({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:c({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c({},s.color,{editType:"arraydraw"}),width:c({},s.width,{editType:"calc+arraydraw"}),dash:c({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:h({},{keys:Object.keys(p)}),font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(r,n,i){var a=i(3400),o=i(54460),s=i(85448),l=i(65152);function c(r,n,i,o,c,u){var f=r/2;if("pixel"===n){var h=c?l.extractPathCoords(c,u?s.paramIsY:s.paramIsX):[i,o],p=a.aggNums(Math.max,null,h),d=a.aggNums(Math.min,null,h),y=d<0?Math.abs(d)+f:f,g=p>0?p+f:f;return{ppad:f,ppadplus:u?y:g,ppadminus:u?g:y}}return{ppad:f}}function u(r,n,i){var a,o,c="x"===r._id.charAt(0)?"x":"y",u="category"===r.type||"multicategory"===r.type,f=0,h=0,p=u?r.r2c:r.d2c;if("scaled"===n[c+"sizemode"]?(a=n[c+"0"],o=n[c+"1"],u&&(f=n[c+"0shift"],h=n[c+"1shift"])):(a=n[c+"anchor"],o=n[c+"anchor"]),void 0!==a)return[p(a)+f,p(o)+h];if(n.path){var d,y,g,v,m=1/0,x=-1/0,b=n.path.match(s.segmentRE);for("date"===r.type&&(p=l.decodeDate(p)),d=0;d<b.length;d++)void 0===(y=i[b[d].charAt(0)].drawn)||(g=b[d].substr(1).match(s.paramRE))&&!(g.length<y)&&((v=p(g[y]))<m&&(m=v),v>x&&(x=v));return x>=m?[m,x]:void 0}}r.exports=function(r){var n=r._fullLayout,i=a.filterVisible(n.shapes);if(i.length&&r._fullData.length)for(var l=0;l<i.length;l++){var f,h,p=i[l];p._extremes={};var d=o.getRefType(p.xref),y=o.getRefType(p.yref);"paper"!==p.xref&&"domain"!==d&&(h=u(f=o.getFromId(r,p.xref),p,s.paramIsX))&&(p._extremes[f._id]=o.findExtremes(f,h,c(p.line.width,p.xsizemode,p.x0,p.x1,p.path,!1))),"paper"!==p.yref&&"domain"!==y&&(h=u(f=o.getFromId(r,p.yref),p,s.paramIsY))&&(p._extremes[f._id]=o.findExtremes(f,h,c(p.line.width,p.ysizemode,p.y0,p.y1,p.path,!0)))}}},85448:function(r){r.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(r,n,i){var a=i(3400),o=i(54460),s=i(51272),l=i(46056),c=i(65152);function u(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}if(n._isShape=!0,s("visible")){s("showlegend")&&(s("legend"),s("legendwidth"),s("legendgroup"),s("legendgrouptitle.text"),a.coerceFont(s,"legendgrouptitle.font"),s("legendrank"));var u=s("path"),f=s("type",u?"path":"rect"),h="path"!==f;h&&delete n.path,s("editable"),s("layer"),s("opacity"),s("fillcolor"),s("fillrule"),s("line.width")&&(s("line.color"),s("line.dash"));for(var p=s("xsizemode"),d=s("ysizemode"),y=["x","y"],g=0;g<2;g++){var v,m,x,b=y[g],_=b+"anchor",w="x"===b?p:d,T={_fullLayout:i},A=o.coerceRef(r,n,T,b,void 0,"paper");if("range"===o.getRefType(A)?((v=o.getFromId(T,A))._shapeIndices.push(n._index),x=c.rangeToShapePosition(v),m=c.shapePositionToRange(v),"category"!==v.type&&"multicategory"!==v.type||(s(b+"0shift"),s(b+"1shift"))):m=x=a.identity,h){var k=b+"0",M=b+"1",S=r[k],E=r[M];r[k]=m(r[k],!0),r[M]=m(r[M],!0),"pixel"===w?(s(k,0),s(M,10)):(o.coercePosition(n,T,s,A,k,.25),o.coercePosition(n,T,s,A,M,.75)),n[k]=x(n[k]),n[M]=x(n[M]),r[k]=S,r[M]=E}if("pixel"===w){var I=r[_];r[_]=m(r[_],!0),o.coercePosition(n,T,s,A,_,.25),n[_]=x(n[_]),r[_]=I}}h&&a.noneOrAll(r,n,["x0","x1","y0","y1"]);var L,C,O="line"===f;if(h&&(L=s("label.texttemplate")),L||(C=s("label.text")),C||L){s("label.textangle");var D=s("label.textposition",O?"middle":"middle center");s("label.xanchor"),s("label.yanchor",O?"bottom":-1!==D.indexOf("top")?"top":-1!==D.indexOf("bottom")?"bottom":"middle"),s("label.padding"),a.coerceFont(s,"label.font",i.font)}}}r.exports=function(r,n){s(r,n,{name:"shapes",handleItemDefaults:u})}},60728:function(r,n,i){var a=i(3400),o=i(54460),s=i(72736),l=i(43616),c=i(9856).readPaths,u=i(65152),f=u.getPathString,h=i(97728),p=i(84284).FROM_TL;r.exports=function(r,n,i,d){if(d.selectAll(".shape-label").remove(),i.label.text||i.label.texttemplate){if(i.label.texttemplate){var y,g,v,m,x,b={};if("path"!==i.type){var _=o.getFromId(r,i.xref),w=o.getFromId(r,i.yref);for(var T in h){var A=h[T](i,_,w);void 0!==A&&(b[T]=A)}}k=a.texttemplateStringForShapes(i.label.texttemplate,{},r._fullLayout._d3locale,b)}else k=i.label.text;var k,M,S,E,I,L=i.label.font,C=d.append("g").attr({"data-index":n}).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(k);if(i.path){var O=c(f(r,i),r);M=1/0,E=1/0,S=-1/0,I=-1/0;for(var D=0;D<O.length;D++)for(var P=0;P<O[D].length;P++)for(var B=O[D][P],R=1;R<B.length;R+=2){var z=B[R],F=B[R+1];M=Math.min(M,z),S=Math.max(S,z),E=Math.min(E,F),I=Math.max(I,F)}}else{var N=o.getFromId(r,i.xref),U=i.x0shift,j=i.x1shift,V=o.getRefType(i.xref),H=o.getFromId(r,i.yref),q=i.y0shift,G=i.y1shift,W=o.getRefType(i.yref),Y=function(n,i){return u.getDataToPixel(r,N,i,!1,V)(n)},Z=function(n,i){return u.getDataToPixel(r,H,i,!0,W)(n)};M=Y(i.x0,U),S=Y(i.x1,j),E=Z(i.y0,q),I=Z(i.y1,G)}var X=i.label.textangle;"auto"===X&&(X="line"===i.type?(y=M,g=E,v=S,m=I,x=Math.abs(v-y),-180/Math.PI*Math.atan2(v>=y?g-m:m-g,x)):0),C.call(function(n){return n.call(l.font,L).attr({}),s.convertToTspans(n,r),n});var K=function(r,n,i,a,o,s,l){var c,u,f,h,d=o.label.textposition,y=o.label.textangle,g=o.label.padding,v=o.type,m=Math.PI/180*s,x=Math.sin(m),b=Math.cos(m),_=o.label.xanchor,w=o.label.yanchor;if("line"===v){"start"===d?(c=r,u=n):"end"===d?(c=i,u=a):(c=(r+i)/2,u=(n+a)/2),"auto"===_&&(_="start"===d?"auto"===y?i>r?"left":i<r?"right":"center":i>r?"right":i<r?"left":"center":"end"===d?"auto"===y?i>r?"right":i<r?"left":"center":i>r?"left":i<r?"right":"center":"center");var T={bottom:-1,middle:0,top:1};if("auto"===y){var A=T[w];f=-g*x*A,h=g*b*A}else f=g*({left:1,center:0,right:-1})[_],h=g*T[w];c+=f,u+=h}else f=g+3,-1!==d.indexOf("right")?(c=Math.max(r,i)-f,"auto"===_&&(_="right")):-1!==d.indexOf("left")?(c=Math.min(r,i)+f,"auto"===_&&(_="left")):(c=(r+i)/2,"auto"===_&&(_="center")),u=-1!==d.indexOf("top")?Math.min(n,a):-1!==d.indexOf("bottom")?Math.max(n,a):(n+a)/2,h=g,"bottom"===w?u-=h:"top"===w&&(u+=h);var k=p[w],M=o.label.font.size,S=l.height;return{textx:c+(S*k-M)*x,texty:u+-(S*k-M)*b,xanchor:_}}(M,E,S,I,i,X,l.bBox(C.node())),J=K.textx,$=K.texty,Q=K.xanchor;C.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Q],y:$,x:J,transform:"rotate("+X+","+J+","+$+")"}).call(s.positionText,J,$)}}},55496:function(r,n,i){var a=i(3400).strTranslate,o=i(86476),s=i(72760),l=s.drawMode,c=s.selectMode,u=i(24040),f=i(76308),h=i(7e3),p=h.i000,d=h.i090,y=h.i180,g=h.i270,v=i(1936).clearOutlineControllers,m=i(9856),x=m.pointsOnRectangle,b=m.pointsOnEllipse,_=m.writePaths,w=i(93940).newShapes,T=i(93940).createShapeObj,A=i(5968),k=i(60728);function M(r,n){var i,a,o,s=r[n][1],l=r[n][2],c=r.length;return a=r[i=(n+1)%c][1],o=r[i][2],a===s&&o===l&&(a=r[i=(n+2)%c][1],o=r[i][2]),[i,a,o]}r.exports=function r(n,i,s,h){h||(h=0);var m=s.gd;function S(){r(n,i,s,h++),(b(n[0])||s.hasText)&&E({redrawing:!0})}function E(r){var n={};void 0!==s.isActiveShape&&(s.isActiveShape=!1,n=w(i,s)),void 0!==s.isActiveSelection&&(s.isActiveSelection=!1,n=A(i,s),m._fullLayout._reselect=!0),Object.keys(n).length&&u.call((r||{}).redrawing?"relayout":"_guiRelayout",m,n)}var I,L,C,O,D,P=m._fullLayout._zoomlayer,B=s.dragmode,R=l(B),z=c(B);if((R||z)&&(m._fullLayout._outlining=!0),v(m),i.attr("d",_(n)),!h&&(s.isActiveShape||s.isActiveSelection)&&(D=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];r[i]=[];for(var o=0;o<a.length;o++){r[i][o]=[];for(var s=0;s<a[o].length;s++)r[i][o][s]=a[o][s]}}return r}([],n),function(r){I=[];for(var i=0;i<n.length;i++){var l=n[i],c=x(l),u=!c&&b(l);I[i]=[];for(var h=l.length,v=0;v<h;v++)if("Z"!==l[v][0]&&(!u||v===p||v===d||v===y||v===g)){var _,w=c&&s.isActiveSelection;w&&(_=M(l,v));var T=l[v][1],A=l[v][2],k=r.append(w?"rect":"circle").attr("data-i",i).attr("data-j",v).style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(w){var S=_[1]-T,E=_[2]-A,L=E?5:Math.max(Math.min(25,Math.abs(S)-5),5),C=S?5:Math.max(Math.min(25,Math.abs(E)-5),5);k.classed(E?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",L).attr("height",C).attr("x",T-L/2).attr("y",A-C/2).attr("transform",a(S/2,E/2))}else k.classed("cursor-grab",!0).attr("r",5).attr("cx",T).attr("cy",A);I[i][v]={element:k.node(),gd:m,prepFn:N,doneFn:j,clickFn:V},o.init(I[i][v])}}}(P.append("g").attr("class","outline-controllers")),L=[],n.length&&(L[0]={element:i[0][0],gd:m,prepFn:function(r){(C=+r.srcElement.getAttribute("data-i"))||(C=0),L[C].moveFn=H},doneFn:function(){E()},clickFn:function(r){2===r&&function(r){if(c(r._fullLayout.dragmode)){v(r);var n=r._fullLayout._activeSelectionIndex,i=(r.layout||{}).selections||[];if(n<i.length){for(var a=[],o=0;o<i.length;o++)o!==n&&a.push(i[o]);delete r._fullLayout._activeSelectionIndex;var s=r._fullLayout.selections[n];r._fullLayout._deselect={xref:s.xref,yref:s.yref},u.call("_guiRelayout",r,{selections:a})}}}(m)}},o.init(L[0]))),R&&s.hasText){var F=P.select(".label-temp");k(m,"label-temp",T(i,s,s.dragmode),F)}function N(r){C=+r.srcElement.getAttribute("data-i"),O=+r.srcElement.getAttribute("data-j"),I[C][O].moveFn=U}function U(r,i){if(n.length){var a=D[C][O][1],o=D[C][O][2],l=n[C],c=l.length;if(x(l)){var u=r,f=i;s.isActiveSelection&&(M(l,O)[1]===l[O][1]?f=0:u=0);for(var h=0;h<c;h++)if(h!==O){var p=l[h];p[1]===l[O][1]&&(p[1]=a+u),p[2]===l[O][2]&&(p[2]=o+f)}if(l[O][1]=a+u,l[O][2]=o+f,!x(l))for(var d=0;d<c;d++)for(var y=0;y<l[d].length;y++)l[d][y]=D[C][d][y]}else l[O][1]=a+r,l[O][2]=o+i;S()}}function j(){E()}function V(r,i){if(2===r){C=+i.srcElement.getAttribute("data-i"),O=+i.srcElement.getAttribute("data-j");var a=n[C];x(a)||b(a)||function(){if(n.length&&n[C]&&n[C].length){for(var r=[],i=0;i<n[C].length;i++)i!==O&&r.push(n[C][i]);r.length>1&&(2!==r.length||"Z"!==r[1][0])&&(0===O&&(r[0][0]="M"),n[C]=r,S(),E())}}()}}function H(r,i){(function(r,i){if(n.length)for(var a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)for(var s=0;s+2<n[a][o].length;s+=2)n[a][o][s+1]=D[a][o][s+1]+r,n[a][o][s+2]=D[a][o][s+2]+i})(r,i),S()}}},4016:function(r,n,i){var a=i(33428),o=i(24040),s=i(3400),l=i(54460),c=i(9856).readPaths,u=i(55496),f=i(60728),h=i(1936).clearOutlineControllers,p=i(76308),d=i(43616),y=i(31780).arrayEditor,g=i(86476),v=i(93972),m=i(85448),x=i(65152),b=x.getPathString;function _(r){var n=r._fullLayout;for(var i in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._shapeUpperLayer.selectAll("text").remove(),n._shapeLowerLayer.selectAll("text").remove(),n._plots){var a=n._plots[i].shapelayer;a&&(a.selectAll("path").remove(),a.selectAll("text").remove())}for(var o=0;o<n.shapes.length;o++)!0===n.shapes[o].visible&&A(r,o)}function w(r){return!!r._fullLayout._outlining}function T(r){return!r._context.edits.shapePosition}function A(r,n){r._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+n+'"]').remove();var i=x.makeShapesOptionsAndPlotinfo(r,n),h=i.options,A=i.plotinfo;h._input&&!0===h.visible&&function(i){var E=b(r,h),I={"data-index":n,"fill-rule":h.fillrule,d:E},L=h.opacity,C=h.fillcolor,O=h.line.width?h.line.color:"rgba(0,0,0,0)",D=h.line.width,P=h.line.dash;D||!0!==h.editable||(D=5,P="solid");var B="Z"!==E[E.length-1],R=T(r)&&h.editable&&r._fullLayout._activeShapeIndex===n;R&&(C=B?"rgba(0,0,0,0)":r._fullLayout.activeshape.fillcolor,L=r._fullLayout.activeshape.opacity);var z,F=i.append("g").classed("shape-group",!0).attr({"data-index":n}),N=F.append("path").attr(I).style("opacity",L).call(p.stroke,O).call(p.fill,C).call(d.dashLine,P,D);if(k(F,r,h),f(r,n,h,F),(R||r._context.edits.shapePosition)&&(z=y(r.layout,"shapes",h)),R){N.style({cursor:"move"});var U={element:N.node(),plotinfo:A,gd:r,editHelpers:z,hasText:h.label.text||h.label.texttemplate,isActiveShape:!0};u(c(E,r),N,U)}else r._context.edits.shapePosition?function(r,n,i,c,u,h){var p,y,_,T,A,S,E,I,L,C,O,D,P,B,R,z,F,N,U,j,V="pixel"===i.xsizemode,H="pixel"===i.ysizemode,q="line"===i.type,G="path"===i.type,W=h.modifyItem,Y=a.select(n.node().parentNode),Z=l.getFromId(r,i.xref),X=l.getRefType(i.xref),K=l.getFromId(r,i.yref),J=l.getRefType(i.yref),$=i.x0shift,Q=i.x1shift,tt=i.y0shift,te=i.y1shift,tr=function(n,i){return x.getDataToPixel(r,Z,i,!1,X)(n)},tn=function(n,i){return x.getDataToPixel(r,K,i,!0,J)(n)},ti=x.getPixelToData(r,Z,!1,X),ta=x.getPixelToData(r,K,!0,J),to=q?(p=Math.max(i.line.width,10),(y=u.append("g").attr("data-index",c).attr("drag-helper",!0)).append("path").attr("d",n.attr("d")).style({cursor:"move","stroke-width":p,"stroke-opacity":"0"}),_={"fill-opacity":"0"},T=Math.max(p/2,10),y.append("circle").attr({"data-line-point":"start-point",cx:V?tr(i.xanchor)+i.x0:tr(i.x0,$),cy:H?tn(i.yanchor)-i.y0:tn(i.y0,tt),r:T}).style(_).classed("cursor-grab",!0),y.append("circle").attr({"data-line-point":"end-point",cx:V?tr(i.xanchor)+i.x1:tr(i.x1,Q),cy:H?tn(i.yanchor)-i.y1:tn(i.y1,te),r:T}).style(_).classed("cursor-grab",!0),y):n,ts={element:to.node(),gd:r,prepFn:function(a){var o,s,c,f,h;w(r)||(V&&(L=tr(i.xanchor)),H&&(C=tn(i.yanchor)),"path"===i.type?U=i.path:(A=V?i.x0:tr(i.x0),S=H?i.y0:tn(i.y0),E=V?i.x1:tr(i.x1),I=H?i.y1:tn(i.y1)),A<E?(P=A,F="x0",B=E,N="x1"):(P=E,F="x1",B=A,N="x0"),!H&&S<I||H&&S>I?(O=S,R="y0",D=I,z="y1"):(O=I,R="y1",D=S,z="y0"),tl(a),tf(u,i),o=i.xref,s=i.yref,c=l.getFromId(r,o),f=l.getFromId(r,s),h="","paper"===o||c.autorange||(h+=o),"paper"===s||f.autorange||(h+=s),d.setClipUrl(n,h?"clip"+r._fullLayout._uid+h:null,r),ts.moveFn="move"===j?tc:tu,ts.altKey=a.altKey)},doneFn:function(){w(r)||(v(n),th(u),k(n,r,i),o.call("_guiRelayout",r,h.getUpdateObj()))},clickFn:function(){w(r)||th(u)}};function tl(i){if(w(r))j=null;else if(q)j="path"===i.target.tagName?"move":"start-point"===i.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var a=ts.element.getBoundingClientRect(),o=a.right-a.left,s=a.bottom-a.top,l=i.clientX-a.left,c=i.clientY-a.top,u=!G&&o>10&&s>10&&!i.shiftKey?g.getCursor(l/o,1-c/s):"move";v(n,u),j=u.split("-")[0]}}function tc(a,o){if("path"===i.type){var s=function(r){return r},l=s,h=s;V?W("xanchor",i.xanchor=ti(L+a)):(l=function(r){return ti(tr(r)+a)},Z&&"date"===Z.type&&(l=x.encodeDate(l))),H?W("yanchor",i.yanchor=ta(C+o)):(h=function(r){return ta(tn(r)+o)},K&&"date"===K.type&&(h=x.encodeDate(h))),W("path",i.path=M(U,l,h))}else V?W("xanchor",i.xanchor=ti(L+a)):(W("x0",i.x0=ti(A+a)),W("x1",i.x1=ti(E+a))),H?W("yanchor",i.yanchor=ta(C+o)):(W("y0",i.y0=ta(S+o)),W("y1",i.y1=ta(I+o)));n.attr("d",b(r,i)),tf(u,i),f(r,c,i,Y)}function tu(a,o){if(G){var s=function(r){return r},l=s,h=s;V?W("xanchor",i.xanchor=ti(L+a)):(l=function(r){return ti(tr(r)+a)},Z&&"date"===Z.type&&(l=x.encodeDate(l))),H?W("yanchor",i.yanchor=ta(C+o)):(h=function(r){return ta(tn(r)+o)},K&&"date"===K.type&&(h=x.encodeDate(h))),W("path",i.path=M(U,l,h))}else if(q){if("resize-over-start-point"===j){var p=A+a,d=H?S-o:S+o;W("x0",i.x0=V?p:ti(p)),W("y0",i.y0=H?d:ta(d))}else if("resize-over-end-point"===j){var y=E+a,g=H?I-o:I+o;W("x1",i.x1=V?y:ti(y)),W("y1",i.y1=H?g:ta(g))}}else{var v=function(r){return -1!==j.indexOf(r)},m=v("n"),_=v("s"),w=v("w"),T=v("e"),k=m?O+o:O,X=_?D+o:D,J=w?P+a:P,$=T?B+a:B;H&&(m&&(k=O-o),_&&(X=D-o)),(!H&&X-k>10||H&&k-X>10)&&(W(R,i[R]=H?k:ta(k)),W(z,i[z]=H?X:ta(X))),$-J>10&&(W(F,i[F]=V?J:ti(J)),W(N,i[N]=V?$:ti($)))}n.attr("d",b(r,i)),tf(u,i),f(r,c,i,Y)}function tf(r,n){(V||H)&&function(){var i="path"!==n.type,a=r.selectAll(".visual-cue").data([0]);a.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var o=tr(V?n.xanchor:s.midRange(i?[n.x0,n.x1]:x.extractPathCoords(n.path,m.paramIsX))),l=tn(H?n.yanchor:s.midRange(i?[n.y0,n.y1]:x.extractPathCoords(n.path,m.paramIsY)));if(o=x.roundPositionForSharpStrokeRendering(o,1),l=x.roundPositionForSharpStrokeRendering(l,1),V&&H){var c="M"+(o-1-1)+","+(l-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";a.attr("d",c)}else if(V){var u="M"+(o-1-1)+","+(l-9-1)+"v18 h2 v-18 Z";a.attr("d",u)}else{var f="M"+(o-9-1)+","+(l-1-1)+"h18 v2 h-18 Z";a.attr("d",f)}}()}function th(r){r.selectAll(".visual-cue").remove()}g.init(ts),to.node().onmousemove=tl}(r,N,h,n,i,z):!0===h.editable&&N.style("pointer-events",B||p.opacity(C)*L<=.5?"stroke":"all");N.node().addEventListener("click",function(){return function(r,n){if(T(r)){var i=+n.node().getAttribute("data-index");if(i>=0){if(i===r._fullLayout._activeShapeIndex)return void S(r);r._fullLayout._activeShapeIndex=i,r._fullLayout._deactivateShape=S,_(r)}}}(r,N)})}("above"===h.layer?r._fullLayout._shapeUpperLayer:"paper"===h.xref||"paper"===h.yref?r._fullLayout._shapeLowerLayer:"between"===h.layer?A.shapelayerBetween:A._hadPlotinfo?(A.mainplotinfo||A).shapelayer:r._fullLayout._shapeLowerLayer)}function k(r,n,i){var a=(i.xref+i.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");d.setClipUrl(r,a?"clip"+n._fullLayout._uid+a:null,n)}function M(r,n,i){return r.replace(m.segmentRE,function(r){var a=0,o=r.charAt(0),s=m.paramIsX[o],l=m.paramIsY[o],c=m.numParams[o];return o+r.substr(1).replace(m.paramRE,function(r){return a>=c||(s[a]?r=n(r):l[a]&&(r=i(r)),a++),r})})}function S(r){T(r)&&r._fullLayout._activeShapeIndex>=0&&(h(r),delete r._fullLayout._activeShapeIndex,_(r))}r.exports={draw:_,drawOne:A,eraseActiveShape:function(r){if(T(r)){h(r);var n=r._fullLayout._activeShapeIndex,i=(r.layout||{}).shapes||[];if(n<i.length){for(var a=[],s=0;s<i.length;s++)s!==n&&a.push(i[s]);return delete r._fullLayout._activeShapeIndex,o.call("_guiRelayout",r,{shapes:a})}}},drawLabel:f}},92872:function(r,n,i){var a=i(67824).overrideAll,o=i(45464),s=i(25376),l=i(98192).u,c=i(92880).extendFlat,u=i(21776).ye,f=i(97728);r.exports=a({newshape:{visible:c({},o.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:c({},o.legend,{}),legendgroup:c({},o.legendgroup,{}),legendgrouptitle:{text:c({},o.legendgrouptitle.text,{}),font:s({})},legendrank:c({},o.legendrank,{}),legendwidth:c({},o.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:c({},l,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:c({},o.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:u({newshape:!0},{keys:Object.keys(f)}),font:s({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(r){r.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(r,n,i){var a=i(76308),o=i(3400);r.exports=function(r,n,i){if(i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),o.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity"),i("newshape.line.width")){var s=(r||{}).plot_bgcolor||"#FFF";i("newshape.line.color",a.contrast(s)),i("newshape.line.dash")}var l="drawline"===r.dragmode,c=i("newshape.label.text"),u=i("newshape.label.texttemplate");if(c||u){i("newshape.label.textangle");var f=i("newshape.label.textposition",l?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",l?"bottom":-1!==f.indexOf("top")?"top":-1!==f.indexOf("bottom")?"bottom":"middle"),i("newshape.label.padding"),o.coerceFont(i,"newshape.label.font",n.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}},9856:function(r,n,i){var a=i(21984),o=i(7e3),s=o.CIRCLE_SIDES,l=o.SQRT2,c=i(5840),u=c.p2r,f=c.r2p,h=[0,3,4,5,6,1,2],p=[0,3,4,1,2];function d(r,n){return 1e-6>=Math.abs(r-n)}function y(r,n){var i=n[1]-r[1],a=n[2]-r[2];return Math.sqrt(i*i+a*a)}n.writePaths=function(r){var n=r.length;if(!n)return"M0,0Z";for(var i="",a=0;a<n;a++)for(var o=r[a].length,s=0;s<o;s++){var l=r[a][s][0];if("Z"===l)i+="Z";else for(var c=r[a][s].length,u=0;u<c;u++){var f=u;"Q"===l||"S"===l?f=p[u]:"C"===l&&(f=h[u]),i+=r[a][s][f],u>0&&u<c-1&&(i+=",")}}return i},n.readPaths=function(r,n,i,o){var l,c,h,p=a(r),d=[],y=-1,g=0,v=0,m=function(){c=g,h=v};m();for(var x=0;x<p.length;x++){var b,_,w,T,A=[],k=p[x][0],M=k;switch(k){case"M":d[++y]=[],g=+p[x][1],v=+p[x][2],A.push([M,g,v]),m();break;case"Q":case"S":b=+p[x][1],w=+p[x][2],g=+p[x][3],v=+p[x][4],A.push([M,g,v,b,w]);break;case"C":b=+p[x][1],w=+p[x][2],_=+p[x][3],T=+p[x][4],g=+p[x][5],v=+p[x][6],A.push([M,g,v,b,w,_,T]);break;case"T":case"L":g=+p[x][1],v=+p[x][2],A.push([M,g,v]);break;case"H":M="L",g=+p[x][1],A.push([M,g,v]);break;case"V":M="L",v=+p[x][1],A.push([M,g,v]);break;case"A":M="L";var S=+p[x][1],E=+p[x][2];+p[x][4]||(S=-S,E=-E);var I=g-S,L=v;for(l=1;l<=s/2;l++){var C=2*Math.PI*l/s;A.push([M,I+S*Math.cos(C),L+E*Math.sin(C)])}break;case"Z":g===c&&v===h||(g=c,v=h,A.push([M,g,v]))}for(var O=(i||{}).domain,D=n._fullLayout._size,P=i&&"pixel"===i.xsizemode,B=i&&"pixel"===i.ysizemode,R=!1===o,z=0;z<A.length;z++){for(l=0;l+2<7;l+=2){var F=A[z][l+1],N=A[z][l+2];void 0!==F&&void 0!==N&&(g=F,v=N,i&&(i.xaxis&&i.xaxis.p2r?(R&&(F-=i.xaxis._offset),F=P?f(i.xaxis,i.xanchor)+F:u(i.xaxis,F)):(R&&(F-=D.l),O?F=O.x[0]+F/D.w:F/=D.w),i.yaxis&&i.yaxis.p2r?(R&&(N-=i.yaxis._offset),N=B?f(i.yaxis,i.yanchor)-N:u(i.yaxis,N)):(R&&(N-=D.t),N=O?O.y[1]-N/D.h:1-N/D.h)),A[z][l+1]=F,A[z][l+2]=N)}d[y].push(A[z].slice())}}return d},n.pointsOnRectangle=function(r){if(5!==r.length)return!1;for(var n=1;n<3;n++)if(!d(r[0][n]-r[1][n],r[3][n]-r[2][n])||!d(r[0][n]-r[3][n],r[1][n]-r[2][n]))return!1;return!(!d(r[0][1],r[1][1])&&!d(r[0][1],r[3][1])||!(y(r[0],r[1])*y(r[0],r[3])))},n.pointsOnEllipse=function(r){var n=r.length;if(n!==s+1)return!1;n=s;for(var i=0;i<n;i++){var a=(2*n-i)%n,o=(n/2+a)%n,l=(n/2+i)%n;if(!d(y(r[i],r[l]),y(r[a],r[o])))return!1}return!0},n.handleEllipse=function(r,i,a){if(!r)return[i,a];var o=n.ellipseOver({x0:i[0],y0:i[1],x1:a[0],y1:a[1]}),c=(o.x1+o.x0)/2,u=(o.y1+o.y0)/2,f=(o.x1-o.x0)/2,h=(o.y1-o.y0)/2;f||(f=h/=l),h||(h=f/=l);for(var p=[],d=0;d<s;d++){var y=2*d*Math.PI/s;p.push([c+f*Math.cos(y),u+h*Math.sin(y)])}return p},n.ellipseOver=function(r){var n=r.x0,i=r.y0,a=r.x1,o=r.y1,s=a-n,c=o-i,u=((n-=s)+a)/2,f=((i-=c)+o)/2;return{x0:u-(s*=l),y0:f-(c*=l),x1:u+s,y1:f+c}},n.fixDatesForPaths=function(r,n,i){var a="date"===n.type,o="date"===i.type;if(!a&&!o)return r;for(var s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++)for(var c=0;c+2<r[s][l].length;c+=2)a&&(r[s][l][c+1]=r[s][l][c+1].replace(" ","_")),o&&(r[s][l][c+2]=r[s][l][c+2].replace(" ","_"));return r}},93940:function(r,n,i){var a=i(72760),o=a.drawMode,s=a.openMode,l=i(7e3),c=l.i000,u=l.i090,f=l.i180,h=l.i270,p=l.cos45,d=l.sin45,y=i(5840),g=y.p2r,v=y.r2p,m=i(1936).clearOutline,x=i(9856),b=x.readPaths,_=x.writePaths,w=x.ellipseOver,T=x.fixDatesForPaths;function A(r,n,i){var a,o=r[0][0],l=n.gd,y=o.getAttribute("d"),m=l._fullLayout.newshape,x=n.plotinfo,A=n.isActiveShape,k=x.xaxis,M=x.yaxis,S=!!x.domain||!x.xaxis,E=!!x.domain||!x.yaxis,I=s(i),L=b(y,l,x,A),C={editable:!0,visible:m.visible,name:m.name,showlegend:m.showlegend,legend:m.legend,legendwidth:m.legendwidth,legendgroup:m.legendgroup,legendgrouptitle:{text:m.legendgrouptitle.text,font:m.legendgrouptitle.font},legendrank:m.legendrank,label:m.label,xref:S?"paper":k._id,yref:E?"paper":M._id,layer:m.layer,opacity:m.opacity,line:{color:m.line.color,width:m.line.width,dash:m.line.dash}};if(I||(C.fillcolor=m.fillcolor,C.fillrule=m.fillrule),1===L.length&&(a=L[0]),a&&5===a.length&&"drawrect"===i)C.type="rect",C.x0=a[0][1],C.y0=a[0][2],C.x1=a[2][1],C.y1=a[2][2];else if(a&&"drawline"===i)C.type="line",C.x0=a[0][1],C.y0=a[0][2],C.x1=a[1][1],C.y1=a[1][2];else if(a&&"drawcircle"===i){C.type="circle";var O=a[c][1],D=a[u][1],P=a[f][1],B=a[h][1],R=a[c][2],z=a[u][2],F=a[f][2],N=a[h][2],U=x.xaxis&&("date"===x.xaxis.type||"log"===x.xaxis.type),j=x.yaxis&&("date"===x.yaxis.type||"log"===x.yaxis.type);U&&(O=v(x.xaxis,O),D=v(x.xaxis,D),P=v(x.xaxis,P),B=v(x.xaxis,B)),j&&(R=v(x.yaxis,R),z=v(x.yaxis,z),F=v(x.yaxis,F),N=v(x.yaxis,N));var V=(D+B)/2,H=(R+F)/2,q=w({x0:V,y0:H,x1:V+(B-D+P-O)/2*p,y1:H+(N-z+F-R)/2*d});U&&(q.x0=g(x.xaxis,q.x0),q.x1=g(x.xaxis,q.x1)),j&&(q.y0=g(x.yaxis,q.y0),q.y1=g(x.yaxis,q.y1)),C.x0=q.x0,C.y0=q.y0,C.x1=q.x1,C.y1=q.y1}else C.type="path",k&&M&&T(L,k,M),C.path=_(L),a=null;return C}r.exports={newShapes:function(r,n){if(r.length&&r[0][0]){var i=n.gd,a=n.isActiveShape,s=n.dragmode,l=(i.layout||{}).shapes||[];if(!o(s)&&void 0!==a){var c=i._fullLayout._activeShapeIndex;if(c<l.length)switch(i._fullLayout.shapes[c].type){case"rect":s="drawrect";break;case"circle":s="drawcircle";break;case"line":s="drawline";break;case"path":var u=l[c].path||"";s="Z"===u[u.length-1]?"drawclosedpath":"drawopenpath"}}var f=A(r,n,s);m(i);for(var h=n.editHelpers,p=(h||{}).modifyItem,d=[],y=0;y<l.length;y++){var g=i._fullLayout.shapes[y];if(d[y]=g._input,void 0!==a&&y===i._fullLayout._activeShapeIndex)switch(g.type){case"line":case"rect":case"circle":p("x0",f.x0-(g.x0shift||0)),p("x1",f.x1-(g.x1shift||0)),p("y0",f.y0-(g.y0shift||0)),p("y1",f.y1-(g.y1shift||0));break;case"path":p("path",f.path)}}return void 0===a?(d.push(f),d):h?h.getUpdateObj():{}}},createShapeObj:A}},1936:function(r){r.exports={clearOutlineControllers:function(r){var n=r._fullLayout._zoomlayer;n&&n.selectAll(".outline-controllers").remove()},clearOutline:function(r){var n=r._fullLayout._zoomlayer;n&&n.selectAll(".select-outline").remove(),r._fullLayout._outlining=!1}}},65152:function(r,n,i){var a=i(85448),o=i(3400),s=i(54460);function l(r,n){var i=0;return(n=n||0)&&r&&("category"===r.type||"multicategory"===r.type)&&(i=(r.r2p(1)-r.r2p(0))*n),i}n.rangeToShapePosition=function(r){return"log"===r.type?r.r2d:function(r){return r}},n.shapePositionToRange=function(r){return"log"===r.type?r.d2r:function(r){return r}},n.decodeDate=function(r){return function(n){return n.replace&&(n=n.replace("_"," ")),r(n)}},n.encodeDate=function(r){return function(n){return r(n).replace(" ","_")}},n.extractPathCoords=function(r,n,i){var s=[];return r.match(a.segmentRE).forEach(function(r){var l=n[r.charAt(0)].drawn;if(void 0!==l){var c=r.substr(1).match(a.paramRE);if(c&&!(c.length<l)){var u=c[l],f=i?u:o.cleanNumber(u);s.push(f)}}}),s},n.getDataToPixel=function(r,i,a,o,s){var c,u=r._fullLayout._size;if(i){if("domain"===s)c=function(r){return i._length*(o?1-r:r)+i._offset};else{var f=n.shapePositionToRange(i);c=function(r){var n=l(i,a);return i._offset+i.r2p(f(r,!0))+n},"date"===i.type&&(c=n.decodeDate(c))}}else c=o?function(r){return u.t+u.h*(1-r)}:function(r){return u.l+u.w*r};return c},n.getPixelToData=function(r,i,a,o){var s,l=r._fullLayout._size;if(i){if("domain"===o)s=function(r){var n=(r-i._offset)/i._length;return a?1-n:n};else{var c=n.rangeToShapePosition(i);s=function(r){return c(i.p2r(r-i._offset))}}}else s=a?function(r){return 1-(r-l.t)/l.h}:function(r){return(r-l.l)/l.w};return s},n.roundPositionForSharpStrokeRendering=function(r,n){var i=Math.round(r);return 1===Math.round(n%2)?i+.5:i},n.makeShapesOptionsAndPlotinfo=function(r,n){var i=r._fullLayout.shapes[n]||{},a=r._fullLayout._plots[i.xref+i.yref];return a?a._hadPlotinfo=!0:(a={},i.xref&&"paper"!==i.xref&&(a.xaxis=r._fullLayout[i.xref+"axis"]),i.yref&&"paper"!==i.yref&&(a.yaxis=r._fullLayout[i.yref+"axis"])),a.xsizemode=i.xsizemode,a.ysizemode=i.ysizemode,a.xanchor=i.xanchor,a.yanchor=i.yanchor,{options:i,plotinfo:a}},n.makeSelectionsOptionsAndPlotinfo=function(r,n){var i=r._fullLayout.selections[n]||{},a=r._fullLayout._plots[i.xref+i.yref];return a?a._hadPlotinfo=!0:(a={},i.xref&&(a.xaxis=r._fullLayout[i.xref+"axis"]),i.yref&&(a.yaxis=r._fullLayout[i.yref+"axis"])),{options:i,plotinfo:a}},n.getPathString=function(r,i){var c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A=i.type,k=s.getRefType(i.xref),M=s.getRefType(i.yref),S=s.getFromId(r,i.xref),E=s.getFromId(r,i.yref),I=r._fullLayout._size,L=l(S,i.x0shift),C=l(S,i.x1shift),O=l(E,i.y0shift),D=l(E,i.y1shift);if(S?"domain"===k?v=function(r){return S._offset+S._length*r}:(g=n.shapePositionToRange(S),v=function(r){return S._offset+S.r2p(g(r,!0))}):v=function(r){return I.l+I.w*r},E?"domain"===M?x=function(r){return E._offset+E._length*(1-r)}:(m=n.shapePositionToRange(E),x=function(r){return E._offset+E.r2p(m(r,!0))}):x=function(r){return I.t+I.h*(1-r)},"path"===A)return S&&"date"===S.type&&(v=n.decodeDate(v)),E&&"date"===E.type&&(x=n.decodeDate(x)),c=v,u=x,f=i.path,h=i.xsizemode,p=i.ysizemode,d=i.xanchor,y=i.yanchor,f.replace(a.segmentRE,function(r){var n=0,i=r.charAt(0),s=a.paramIsX[i],l=a.paramIsY[i],f=a.numParams[i],g=r.substr(1).replace(a.paramRE,function(r){return s[n]?r="pixel"===h?c(d)+Number(r):c(r):l[n]&&(r="pixel"===p?u(y)-Number(r):u(r)),++n>f&&(r="X"),r});return n>f&&(g=g.replace(/[\s,]*X.*/,""),o.log("Ignoring extra params in segment "+r)),i+g});if("pixel"===i.xsizemode){var P=v(i.xanchor);b=P+i.x0+L,_=P+i.x1+C}else b=v(i.x0)+L,_=v(i.x1)+C;if("pixel"===i.ysizemode){var B=x(i.yanchor);w=B-i.y0+O,T=B-i.y1+D}else w=x(i.y0)+O,T=x(i.y1)+D;if("line"===A)return"M"+b+","+w+"L"+_+","+T;if("rect"===A)return"M"+b+","+w+"H"+_+"V"+T+"H"+b+"Z";var R=(b+_)/2,z=(w+T)/2,F=Math.abs(R-b),N=Math.abs(z-w),U="A"+F+","+N,j=R+F+","+z;return"M"+j+U+" 0 1,1 "+R+","+(z-N)+U+" 0 0,1 "+j+"Z"}},41592:function(r,n,i){var a=i(4016);r.exports={moduleType:"component",name:"shapes",layoutAttributes:i(46056),supplyLayoutDefaults:i(43712),supplyDrawNewShapeDefaults:i(65144),includeBasePlot:i(36632)("shapes"),calcAutorange:i(96084),draw:a.draw,drawOne:a.drawOne}},97728:function(r){function n(r,n){return n?n.d2l(r):r}function i(r){return r.x0shift||0}function a(r){return r.x1shift||0}function o(r){return r.y0shift||0}function s(r){return r.y1shift||0}function l(r,o){return n(r.x1,o)+a(r)-n(r.x0,o)-i(r)}function c(r,i,a){return n(r.y1,a)+s(r)-n(r.y0,a)-o(r)}r.exports={x0:function(r){return r.x0},x1:function(r){return r.x1},y0:function(r){return r.y0},y1:function(r){return r.y1},slope:function(r,n,i){return"line"!==r.type?void 0:c(r,0,i)/l(r,n)},dx:l,dy:c,width:function(r,n){return Math.abs(l(r,n))},height:function(r,n,i){return Math.abs(c(r,0,i))},length:function(r,n,i){return"line"!==r.type?void 0:Math.sqrt(Math.pow(l(r,n),2)+Math.pow(c(r,0,i),2))},xcenter:function(r,o){var s;return s=(n(r.x1,o)+a(r)+n(r.x0,o)+i(r))/2,o?o.l2d(s):s},ycenter:function(r,i,a){var l;return l=(n(r.y1,a)+s(r)+n(r.y0,a)+o(r))/2,a?a.l2d(l):l}}},89861:function(r,n,i){var a=i(25376),o=i(66741),s=i(92880).extendDeepAll,l=i(67824).overrideAll,c=i(85656),u=i(31780).templatedArray,f=i(60876),h=u("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});r.exports=l(u("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:h,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:s(o({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:c.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:f.gripBgActiveColor},bgcolor:{valType:"color",dflt:f.railBgColor},bordercolor:{valType:"color",dflt:f.railBorderColor},borderwidth:{valType:"number",min:0,dflt:f.railBorderWidth},ticklen:{valType:"number",min:0,dflt:f.tickLength},tickcolor:{valType:"color",dflt:f.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:f.minorTickLength}}),"arraydraw","from-root")},60876:function(r){r.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(r,n,i){var a=i(3400),o=i(51272),s=i(89861),l=i(60876).name,c=s.steps;function u(r,n,i){function l(i,o){return a.coerce(r,n,s,i,o)}for(var c=o(r,n,{name:"steps",handleItemDefaults:f}),u=0,h=0;h<c.length;h++)c[h].visible&&u++;if(u<2?n.visible=!1:l("visible")){n._stepCount=u;var p=n._visibleSteps=a.filterVisible(c);(c[l("active")]||{}).visible||(n.active=p[0]._index),l("x"),l("y"),a.noneOrAll(r,n,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),a.coerceFont(l,"font",i.font),l("currentvalue.visible")&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),a.coerceFont(l,"currentvalue.font",n.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function f(r,n){function i(i,o){return a.coerce(r,n,c,i,o)}if("skip"===r.method||Array.isArray(r.args)?i("visible"):n.visible=!1){i("method"),i("args");var o=i("label","step-"+n._index);i("value",o),i("execute")}}r.exports=function(r,n){o(r,n,{name:l,handleItemDefaults:u})}},79664:function(r,n,i){var a=i(33428),o=i(7316),s=i(76308),l=i(43616),c=i(3400),u=c.strTranslate,f=i(72736),h=i(31780).arrayEditor,p=i(60876),d=i(84284),y=d.LINE_SPACING,g=d.FROM_TL,v=d.FROM_BR;function m(r){return p.autoMarginIdRoot+r._index}function x(r){return r._index}function b(r,n,i){if(n.currentvalue.visible){var a,o,s=n._dims;switch(n.currentvalue.xanchor){case"right":a=s.inputAreaLength-p.currentValueInset-s.currentValueMaxWidth,o="left";break;case"center":a=.5*s.inputAreaLength,o="middle";break;default:a=p.currentValueInset,o="left"}var u=c.ensureSingle(r,"text",p.labelClass,function(r){r.attr({"text-anchor":o,"data-notex":1})}),h=n.currentvalue.prefix?n.currentvalue.prefix:"";if("string"==typeof i)h+=i;else{var d=n.steps[n.active].label,g=n._gd._fullLayout._meta;g&&(d=c.templateString(d,g)),h+=d}n.currentvalue.suffix&&(h+=n.currentvalue.suffix),u.call(l.font,n.currentvalue.font).text(h).call(f.convertToTspans,n._gd);var v=f.lineCount(u),m=(s.currentValueMaxLines+1-v)*n.currentvalue.font.size*y;return f.positionText(u,a,m),u}}function _(r,n,i){c.ensureSingle(r,"rect",p.gripRectClass,function(a){a.call(M,n,r,i).style("pointer-events","all")}).attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(s.stroke,i.bordercolor).call(s.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px")}function w(r,n,i){var a=c.ensureSingle(r,"text",p.labelClass,function(r){r.attr({"text-anchor":"middle","data-notex":1})}),o=n.step.label,s=i._gd._fullLayout._meta;return s&&(o=c.templateString(o,s)),a.call(l.font,i.font).text(o).call(f.convertToTspans,i._gd),a}function T(r,n){var i=c.ensureSingle(r,"g",p.labelsClass),o=n._dims,s=i.selectAll("g."+p.labelGroupClass).data(o.labelSteps);s.enter().append("g").classed(p.labelGroupClass,!0),s.exit().remove(),s.each(function(r){var i=a.select(this);i.call(w,r,n),l.setTranslate(i,I(n,r.fraction),p.tickOffset+n.ticklen+n.font.size*y+p.labelOffset+o.currentValueTotalHeight)})}function A(r,n,i,a,o){var s=Math.round(a*(i._stepCount-1)),l=i._visibleSteps[s]._index;l!==i.active&&k(r,n,i,l,!0,o)}function k(r,n,i,a,s,l){var c=i.active;i.active=a,h(r.layout,p.name,i).applyUpdate("active",a);var u=i.steps[i.active];n.call(E,i,l),n.call(b,i),r.emit("plotly_sliderchange",{slider:i,step:i.steps[i.active],interaction:s,previousActive:c}),u&&u.method&&s&&(n._nextMethod?(n._nextMethod.step=u,n._nextMethod.doCallback=s,n._nextMethod.doTransition=l):(n._nextMethod={step:u,doCallback:s,doTransition:l},n._nextMethodRaf=window.requestAnimationFrame(function(){var i=n._nextMethod.step;i.method&&(i.execute&&o.executeAPICommand(r,i.method,i.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function M(r,n,i){if(!n._context.staticPlot){var o=i.node(),l=a.select(n);r.on("mousedown",u),r.on("touchstart",u)}function c(){return i.data()[0]}function u(){var r=c();n.emit("plotly_sliderstart",{slider:r});var u=i.select("."+p.gripRectClass);a.event.stopPropagation(),a.event.preventDefault(),u.call(s.fill,r.activebgcolor);var f=L(r,a.mouse(o)[0]);function h(){var r=c(),s=L(r,a.mouse(o)[0]);A(n,i,r,s,!1)}function d(){var r=c();r._dragging=!1,u.call(s.fill,r.bgcolor),l.on("mouseup",null),l.on("mousemove",null),l.on("touchend",null),l.on("touchmove",null),n.emit("plotly_sliderend",{slider:r,step:r.steps[r.active]})}A(n,i,r,f,!0),r._dragging=!0,l.on("mousemove",h),l.on("touchmove",h),l.on("mouseup",d),l.on("touchend",d)}}function S(r,n){var i=r.selectAll("rect."+p.tickRectClass).data(n._visibleSteps),o=n._dims;i.enter().append("rect").classed(p.tickRectClass,!0),i.exit().remove(),i.attr({width:n.tickwidth+"px","shape-rendering":"crispEdges"}),i.each(function(r,i){var c=i%o.labelStride==0,u=a.select(this);u.attr({height:c?n.ticklen:n.minorticklen}).call(s.fill,n.tickcolor),l.setTranslate(u,I(n,i/(n._stepCount-1))-.5*n.tickwidth,(c?p.tickOffset:p.minorTickOffset)+o.currentValueTotalHeight)})}function E(r,n,i){for(var a=r.select("rect."+p.gripRectClass),o=0,s=0;s<n._stepCount;s++)if(n._visibleSteps[s]._index===n.active){o=s;break}var l=I(n,o/(n._stepCount-1));if(!n._invokingCommand){var c=a;i&&n.transition.duration>0&&(c=c.transition().duration(n.transition.duration).ease(n.transition.easing)),c.attr("transform",u(l-.5*p.gripWidth,n._dims.currentValueTotalHeight))}}function I(r,n){var i=r._dims;return i.inputAreaStart+p.stepInset+(i.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,n))}function L(r,n){var i=r._dims;return Math.min(1,Math.max(0,(n-p.stepInset-i.inputAreaStart)/(i.inputAreaLength-2*p.stepInset-2*i.inputAreaStart)))}function C(r,n,i){var a=i._dims,o=c.ensureSingle(r,"rect",p.railTouchRectClass,function(a){a.call(M,n,r,i).style("pointer-events","all")});o.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,p.tickOffset+i.ticklen+a.labelHeight)}).call(s.fill,i.bgcolor).attr("opacity",0),l.setTranslate(o,0,a.currentValueTotalHeight)}function O(r,n){var i=n._dims,a=i.inputAreaLength-2*p.railInset,o=c.ensureSingle(r,"rect",p.railRectClass);o.attr({width:a,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(s.stroke,n.bordercolor).call(s.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px"),l.setTranslate(o,p.railInset,.5*(i.inputAreaWidth-p.railWidth)+i.currentValueTotalHeight)}r.exports=function(r){var n=r._context.staticPlot,i=r._fullLayout,s=function(r,n){for(var i=r[p.name],a=[],o=0;o<i.length;o++){var s=i[o];s.visible&&(s._gd=n,a.push(s))}return a}(i,r),u=i._infolayer.selectAll("g."+p.containerClassName).data(s.length>0?[0]:[]);function h(n){n._commandObserver&&(n._commandObserver.remove(),delete n._commandObserver),o.autoMargin(r,m(n))}if(u.enter().append("g").classed(p.containerClassName,!0).style("cursor",n?null:"ew-resize"),u.exit().each(function(){a.select(this).selectAll("g."+p.groupClassName).each(h)}).remove(),0!==s.length){var d=u.selectAll("g."+p.groupClassName).data(s,x);d.enter().append("g").classed(p.groupClassName,!0),d.exit().each(h).remove();for(var y=0;y<s.length;y++)!function(r,n){var i=l.tester.selectAll("g."+p.labelGroupClass).data(n._visibleSteps);i.enter().append("g").classed(p.labelGroupClass,!0);var s=0,u=0;i.each(function(r){var i=w(a.select(this),{step:r},n).node();if(i){var o=l.bBox(i);u=Math.max(u,o.height),s=Math.max(s,o.width)}}),i.remove();var h=n._dims={};h.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var d=r._fullLayout._size;h.lx=d.l+d.w*n.x,h.ly=d.t+d.h*(1-n.y),"fraction"===n.lenmode?h.outerLength=Math.round(d.w*n.len):h.outerLength=n.len,h.inputAreaStart=0,h.inputAreaLength=Math.round(h.outerLength-n.pad.l-n.pad.r);var y=(h.inputAreaLength-2*p.stepInset)/(n._stepCount-1),x=s+p.labelPadding;if(h.labelStride=Math.max(1,Math.ceil(x/y)),h.labelHeight=u,h.currentValueMaxWidth=0,h.currentValueHeight=0,h.currentValueTotalHeight=0,h.currentValueMaxLines=1,n.currentvalue.visible){var _=l.tester.append("g");i.each(function(r){var i=b(_,n,r.label),a=i.node()&&l.bBox(i.node())||{width:0,height:0},o=f.lineCount(i);h.currentValueMaxWidth=Math.max(h.currentValueMaxWidth,Math.ceil(a.width)),h.currentValueHeight=Math.max(h.currentValueHeight,Math.ceil(a.height)),h.currentValueMaxLines=Math.max(h.currentValueMaxLines,o)}),h.currentValueTotalHeight=h.currentValueHeight+n.currentvalue.offset,_.remove()}h.height=h.currentValueTotalHeight+p.tickOffset+n.ticklen+p.labelOffset+h.labelHeight+n.pad.t+n.pad.b;var T="left";c.isRightAnchor(n)&&(h.lx-=h.outerLength,T="right"),c.isCenterAnchor(n)&&(h.lx-=h.outerLength/2,T="center");var A="top";c.isBottomAnchor(n)&&(h.ly-=h.height,A="bottom"),c.isMiddleAnchor(n)&&(h.ly-=h.height/2,A="middle"),h.outerLength=Math.ceil(h.outerLength),h.height=Math.ceil(h.height),h.lx=Math.round(h.lx),h.ly=Math.round(h.ly);var k={y:n.y,b:h.height*v[A],t:h.height*g[A]};"fraction"===n.lenmode?(k.l=0,k.xl=n.x-n.len*g[T],k.r=0,k.xr=n.x+n.len*v[T]):(k.x=n.x,k.l=h.outerLength*g[T],k.r=h.outerLength*v[T]),o.autoMargin(r,m(n),k)}(r,s[y]);d.each(function(n){var i,s,c=a.select(this);(function(r){var n=r._dims;n.labelSteps=[];for(var i=r._stepCount,a=0;a<i;a+=n.labelStride)n.labelSteps.push({fraction:a/(i-1),step:r._visibleSteps[a]})})(n),o.manageCommandObserver(r,n,n._visibleSteps,function(n){var i=c.data()[0];i.active!==n.index&&(i._dragging||k(r,c,i,n.index,!1,!0))}),i=a.select(this),(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),i.call(b,n).call(O,n).call(T,n).call(S,n).call(C,r,n).call(_,r,n),s=n._dims,l.setTranslate(i,s.lx+n.pad.l,s.ly+n.pad.t),i.call(E,n,!1),i.call(b,n)})}}},97544:function(r,n,i){var a=i(60876);r.exports={moduleType:"component",name:a.name,layoutAttributes:i(89861),supplyLayoutDefaults:i(8132),draw:i(79664)}},81668:function(r,n,i){var a=i(33428),o=i(38248),s=i(7316),l=i(24040),c=i(3400),u=c.strTranslate,f=i(43616),h=i(76308),p=i(72736),d=i(13448),y=i(84284).OPPOSITE_SIDE,g=/ [XY][0-9]* /;r.exports={draw:function(r,n,i){var v,m=r._fullLayout,x=i.propContainer,b=i.propName,_=i.placeholder,w=i.traceIndex,T=i.avoid||{},A=i.attributes,k=i.transform,M=i.containerGroup,S=1,E=x.title,I=(E&&E.text?E.text:"").trim(),L=!1,C=E&&E.font?E.font:{},O=C.family,D=C.size,P=C.color,B=C.weight,R=C.style,z=C.variant,F=C.textcase,N=C.lineposition,U=C.shadow,j=!!i.subtitlePropName,V=i.subtitlePlaceholder,H=(x.title||{}).subtitle||{text:"",font:{}},q=H.text.trim(),G=!1,W=1,Y=H.font,Z=Y.family,X=Y.size,K=Y.color,J=Y.weight,$=Y.style,Q=Y.variant,tt=Y.textcase,te=Y.lineposition,tr=Y.shadow;"title.text"===b?v="titleText":-1!==b.indexOf("axis")?v="axisTitleText":b.indexOf(!0)&&(v="colorbarTitleText");var tn=r._context.edits[v];function ti(r,n){return void 0!==r&&void 0!==n&&r.replace(g," % ")===n.replace(g," % ")}""===I?S=0:ti(I,_)&&(tn||(I=""),S=.2,L=!0),j&&(""===q?W=0:ti(q,V)&&(tn||(q=""),W=.2,G=!0)),i._meta?I=c.templateString(I,i._meta):m._meta&&(I=c.templateString(I,m._meta));var ta,to=I||q||tn;M||(M=c.ensureSingle(m._infolayer,"g","g-"+n),ta=m._hColorbarMoveTitle);var ts=M.selectAll("text."+n).data(to?[0]:[]);ts.enter().append("text"),ts.text(I).attr("class",n),ts.exit().remove();var tl=null,tc=n+"-subtitle",tu=q||tn;if(j&&tu&&((tl=M.selectAll("text."+tc).data(tu?[0]:[])).enter().append("text"),tl.text(q).attr("class",tc),tl.exit().remove()),!to)return M;function tf(r,n){c.syncOrAsync([th,tp],{title:r,subtitle:n})}function th(i){var o,l=i.title,d=i.subtitle;if(!k&&ta&&(k={}),k?(o="",k.rotate&&(o+="rotate("+[k.rotate,A.x,A.y]+")"),(k.offset||ta)&&(o+=u(0,(k.offset||0)-(ta||0)))):o=null,l.attr("transform",o),l.style("opacity",S*h.opacity(P)).call(f.font,{color:h.rgb(P),size:a.round(D,2),family:O,weight:B,style:R,variant:z,textcase:F,shadow:U,lineposition:N}).attr(A).call(p.convertToTspans,r,function(r){if(r){var n=a.select(r.node().parentNode).select("."+tc);if(!n.empty()){var i=r.node().getBBox();if(i.height){var o=i.y+i.height+1.6*X;n.attr("y",o)}}}}),d){var y=M.select("."+n+"-math-group"),g=l.node().getBBox(),v=y.node()?y.node().getBBox():void 0,m=v?v.y+v.height+1.6*X:g.y+g.height+1.6*X,x=c.extendFlat({},A,{y:m});d.attr("transform",o),d.style("opacity",W*h.opacity(K)).call(f.font,{color:h.rgb(K),size:a.round(X,2),family:Z,weight:J,style:$,variant:Q,textcase:tt,shadow:tr,lineposition:te}).attr(x).call(p.convertToTspans,r)}return s.previousPromises(r)}function tp(n){var i=n.title,s=a.select(i.node().parentNode);if(T&&T.selection&&T.side&&I){s.attr("transform",null);var l=y[T.side],h="left"===T.side||"top"===T.side?-1:1,p=o(T.pad)?T.pad:2,d=f.bBox(s.node()),g={t:0,b:0,l:0,r:0},v=r._fullLayout._reservedMargin;for(var b in v)for(var _ in v[b]){var w=v[b][_];g[_]=Math.max(g[_],w)}var A={left:g.l,top:g.t,right:m.width-g.r,bottom:m.height-g.b},k=T.maxShift||h*(A[T.side]-d[T.side]),M=0;if(k<0)M=k;else{var S=T.offsetLeft||0,E=T.offsetTop||0;d.left-=S,d.right-=S,d.top-=E,d.bottom-=E,T.selection.each(function(){var r=f.bBox(this);c.bBoxIntersect(d,r,p)&&(M=Math.max(M,h*(r[T.side]-d[l])+p))}),M=Math.min(k,M),x._titleScoot=Math.abs(M)}if(M>0||k<0){var L={left:[-M,0],right:[M,0],top:[0,-M],bottom:[0,M]}[T.side];s.attr("transform",u(L[0],L[1]))}}}function td(r,n){r.text(n).on("mouseover.opacity",function(){a.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){a.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})}if(ts.call(tf,tl),tn&&(I?ts.on(".opacity",null):(td(ts,_),L=!0),ts.call(p.makeEditable,{gd:r}).on("edit",function(n){void 0!==w?l.call("_guiRestyle",r,b,n,w):l.call("_guiRelayout",r,b,n)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(tf)}).on("input",function(r){this.text(r||" ").call(p.positionText,A.x,A.y)}),j)){if(j&&!I){var ty=ts.node().getBBox(),tg=ty.y+ty.height+1.6*X;tl.attr("y",tg)}q?tl.on(".opacity",null):(td(tl,V),G=!0),tl.call(p.makeEditable,{gd:r}).on("edit",function(n){l.call("_guiRelayout",r,"title.subtitle.text",n)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(tf)}).on("input",function(r){this.text(r||" ").call(p.positionText,tl.attr("x"),tl.attr("y"))})}return ts.classed("js-placeholder",L),tl&&tl.classed("js-placeholder",G),M},SUBTITLE_PADDING_EM:1.6,SUBTITLE_PADDING_MATHJAX_EM:1.6}},88444:function(r,n,i){var a=i(25376),o=i(22548),s=i(92880).extendFlat,l=i(67824).overrideAll,c=i(66741),u=i(31780).templatedArray,f=u("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});r.exports=l(u("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:f,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:s(c({editType:"arraydraw"}),{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:o.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(r){r.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},91384:function(r,n,i){var a=i(3400),o=i(51272),s=i(88444),l=i(73712).name,c=s.buttons;function u(r,n,i){function l(i,o){return a.coerce(r,n,s,i,o)}l("visible",o(r,n,{name:"buttons",handleItemDefaults:f}).length>0)&&(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),a.noneOrAll(r,n,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),a.coerceFont(l,"font",i.font),l("bgcolor",i.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function f(r,n){function i(i,o){return a.coerce(r,n,c,i,o)}i("visible","skip"===r.method||Array.isArray(r.args))&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}r.exports=function(r,n){o(r,n,{name:l,handleItemDefaults:u})}},14420:function(r,n,i){var a=i(33428),o=i(7316),s=i(76308),l=i(43616),c=i(3400),u=i(72736),f=i(31780).arrayEditor,h=i(84284).LINE_SPACING,p=i(73712),d=i(37400);function y(r){return r._index}function g(r,n){return+r.attr(p.menuIndexAttrName)===n._index}function v(r,n,i,a,o,s,l,c){n.active=l,f(r.layout,p.name,n).applyUpdate("active",l),"buttons"===n.type?x(r,a,null,null,n):"dropdown"===n.type&&(o.attr(p.menuIndexAttrName,"-1"),m(r,a,o,s,n),c||x(r,a,o,s,n))}function m(r,n,i,a,o){var s=c.ensureSingle(n,"g",p.headerClassName,function(r){r.style("pointer-events","all")}),u=o._dims,f=o.active,h=o.buttons[f]||p.blankHeaderOpts,d={y:o.pad.t,yPad:0,x:o.pad.l,xPad:0,index:0},y={width:u.headerWidth,height:u.headerHeight};s.call(b,o,h,r).call(S,o,d,y),c.ensureSingle(n,"text",p.headerArrowClassName,function(r){r.attr("text-anchor","end").call(l.font,o.font).text(p.arrowSymbol[o.direction])}).attr({x:u.headerWidth-p.arrowOffsetX+o.pad.l,y:u.headerHeight/2+p.textOffsetY+o.pad.t}),s.on("click",function(){i.call(E,String(g(i,o)?-1:o._index)),x(r,n,i,a,o)}),s.on("mouseover",function(){s.call(A)}),s.on("mouseout",function(){s.call(k,o)}),l.setTranslate(n,u.lx,u.ly)}function x(r,n,i,s,l){i||(i=n).attr("pointer-events","all");var u,f,h=-1==+i.attr(p.menuIndexAttrName)&&"buttons"!==l.type?[]:l.buttons,d="dropdown"===l.type?p.dropdownButtonClassName:p.buttonClassName,y=i.selectAll("g."+d).data(c.filterVisible(h)),g=y.enter().append("g").classed(d,!0),m=y.exit();"dropdown"===l.type?(g.attr("opacity","0").transition().attr("opacity","1"),m.transition().attr("opacity","0").remove()):m.remove();var x=0,_=0,w=l._dims,M=-1!==["up","down"].indexOf(l.direction);"dropdown"===l.type&&(M?_=w.headerHeight+p.gapButtonHeader:x=w.headerWidth+p.gapButtonHeader),"dropdown"===l.type&&"up"===l.direction&&(_=-p.gapButtonHeader+p.gapButton-w.openHeight),"dropdown"===l.type&&"left"===l.direction&&(x=-p.gapButtonHeader+p.gapButton-w.openWidth);var E={x:w.lx+x+l.pad.l,y:w.ly+_+l.pad.t,yPad:p.gapButton,xPad:p.gapButton,index:0},I={l:E.x+l.borderwidth,t:E.y+l.borderwidth};y.each(function(c,u){var f=a.select(this);f.call(b,l,c,r).call(S,l,E),f.on("click",function(){a.event.defaultPrevented||(c.execute&&(c.args2&&l.active===u?(v(r,l,0,n,i,s,-1),o.executeAPICommand(r,c.method,c.args2)):(v(r,l,0,n,i,s,u),o.executeAPICommand(r,c.method,c.args))),r.emit("plotly_buttonclicked",{menu:l,button:c,active:l.active}))}),f.on("mouseover",function(){f.call(A)}),f.on("mouseout",function(){f.call(k,l),y.call(T,l)})}),y.call(T,l),M?(I.w=Math.max(w.openWidth,w.headerWidth),I.h=E.y-I.t):(I.w=E.x-I.l,I.h=Math.max(w.openHeight,w.headerHeight)),I.direction=l.direction,s&&(y.size()?function(r,n,i,a,o,s){var l,c,u,f=o.direction,h=o._dims,d=o.active;if("up"===f||"down"===f)for(c=0,u=0;u<d;u++)c+=h.heights[u]+p.gapButton;else for(l=0,u=0;u<d;u++)l+=h.widths[u]+p.gapButton;a.enable(s,l,c),a.hbar&&a.hbar.attr("opacity","0").transition().attr("opacity","1"),a.vbar&&a.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,s,l,I):(u=!!s.hbar,f=!!s.vbar,u&&s.hbar.transition().attr("opacity","0").each("end",function(){u=!1,f||s.disable()}),f&&s.vbar.transition().attr("opacity","0").each("end",function(){f=!1,u||s.disable()})))}function b(r,n,i,a){r.call(_,n).call(w,n,i,a)}function _(r,n){c.ensureSingle(r,"rect",p.itemRectClassName,function(r){r.attr({rx:p.rx,ry:p.ry,"shape-rendering":"crispEdges"})}).call(s.stroke,n.bordercolor).call(s.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function w(r,n,i,a){var o=c.ensureSingle(r,"text",p.itemTextClassName,function(r){r.attr({"text-anchor":"start","data-notex":1})}),s=i.label,f=a._fullLayout._meta;f&&(s=c.templateString(s,f)),o.call(l.font,n.font).text(s).call(u.convertToTspans,a)}function T(r,n){var i=n.active;r.each(function(r,o){var l=a.select(this);o===i&&n.showactive&&l.select("rect."+p.itemRectClassName).call(s.fill,p.activeColor)})}function A(r){r.select("rect."+p.itemRectClassName).call(s.fill,p.hoverColor)}function k(r,n){r.select("rect."+p.itemRectClassName).call(s.fill,n.bgcolor)}function M(r){return p.autoMarginIdRoot+r._index}function S(r,n,i,a){a=a||{};var o=r.select("."+p.itemRectClassName),s=r.select("."+p.itemTextClassName),c=n.borderwidth,f=i.index,d=n._dims;l.setTranslate(r,c+i.x,c+i.y);var y=-1!==["up","down"].indexOf(n.direction),g=a.height||(y?d.heights[f]:d.height1);o.attr({x:0,y:0,width:a.width||(y?d.width1:d.widths[f]),height:g});var v=n.font.size*h,m=(u.lineCount(s)-1)*v/2;u.positionText(s,p.textOffsetX,g/2-m+p.textOffsetY),y?i.y+=d.heights[f]+i.yPad:i.x+=d.widths[f]+i.xPad,i.index++}function E(r,n){r.attr(p.menuIndexAttrName,n||"-1").selectAll("g."+p.dropdownButtonClassName).remove()}r.exports=function(r){var n=r._fullLayout,i=c.filterVisible(n[p.name]);function s(n){o.autoMargin(r,M(n))}var f=n._menulayer.selectAll("g."+p.containerClassName).data(i.length>0?[0]:[]);if(f.enter().append("g").classed(p.containerClassName,!0).style("cursor","pointer"),f.exit().each(function(){a.select(this).selectAll("g."+p.headerGroupClassName).each(s)}).remove(),0!==i.length){var _=f.selectAll("g."+p.headerGroupClassName).data(i,y);_.enter().append("g").classed(p.headerGroupClassName,!0);for(var w=c.ensureSingle(f,"g",p.dropdownButtonGroupClassName,function(r){r.style("pointer-events","all")}),T=0;T<i.length;T++)!function(r,n){var i=n._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},s=l.tester.selectAll("g."+p.dropdownButtonClassName).data(c.filterVisible(n.buttons));s.enter().append("g").classed(p.dropdownButtonClassName,!0);var f=-1!==["up","down"].indexOf(n.direction);s.each(function(o,s){var c=a.select(this);c.call(b,n,o,r);var d=c.select("."+p.itemTextClassName),y=Math.max((d.node()&&l.bBox(d.node()).width)+p.textPadX,p.minWidth),g=Math.max(n.font.size*h*u.lineCount(d),p.minHeight)+p.textOffsetY;g=Math.ceil(g),y=Math.ceil(y),i.widths[s]=y,i.heights[s]=g,i.height1=Math.max(i.height1,g),i.width1=Math.max(i.width1,y),f?(i.totalWidth=Math.max(i.totalWidth,y),i.openWidth=i.totalWidth,i.totalHeight+=g+p.gapButton,i.openHeight+=g+p.gapButton):(i.totalWidth+=y+p.gapButton,i.openWidth+=y+p.gapButton,i.totalHeight=Math.max(i.totalHeight,g),i.openHeight=i.totalHeight)}),f?i.totalHeight-=p.gapButton:i.totalWidth-=p.gapButton,i.headerWidth=i.width1+p.arrowPadX,i.headerHeight=i.height1,"dropdown"===n.type&&(f?(i.width1+=p.arrowPadX,i.totalHeight=i.height1):i.totalWidth=i.width1,i.totalWidth+=p.arrowPadX),s.remove();var d=i.totalWidth+n.pad.l+n.pad.r,y=i.totalHeight+n.pad.t+n.pad.b,g=r._fullLayout._size;i.lx=g.l+g.w*n.x,i.ly=g.t+g.h*(1-n.y);var v="left";c.isRightAnchor(n)&&(i.lx-=d,v="right"),c.isCenterAnchor(n)&&(i.lx-=d/2,v="center");var m="top";c.isBottomAnchor(n)&&(i.ly-=y,m="bottom"),c.isMiddleAnchor(n)&&(i.ly-=y/2,m="middle"),i.totalWidth=Math.ceil(i.totalWidth),i.totalHeight=Math.ceil(i.totalHeight),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly),o.autoMargin(r,M(n),{x:n.x,y:n.y,l:d*(({right:1,center:.5})[v]||0),r:d*(({left:1,center:.5})[v]||0),b:y*(({top:1,middle:.5})[m]||0),t:y*(({bottom:1,middle:.5})[m]||0)})}(r,i[T]);var A=new d(r,w,"updatemenus"+n._uid);_.enter().size()&&(w.node().parentNode.appendChild(w.node()),w.call(E)),_.exit().each(function(r){w.call(E),s(r)}).remove(),_.each(function(n){var i=a.select(this),s="dropdown"===n.type?w:null;o.manageCommandObserver(r,n,n.buttons,function(a){v(r,n,n.buttons[a.index],i,s,A,a.index,!0)}),"dropdown"===n.type?(m(r,i,w,A,n),g(w,n)&&x(r,i,w,A,n)):x(r,i,null,null,n)})}}},76908:function(r,n,i){var a=i(73712);r.exports={moduleType:"component",name:a.name,layoutAttributes:i(88444),supplyLayoutDefaults:i(91384),draw:i(14420)}},37400:function(r,n,i){r.exports=c;var a=i(33428),o=i(76308),s=i(43616),l=i(3400);function c(r,n,i){this.gd=r,this.container=n,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}c.barWidth=2,c.barLength=20,c.barRadius=2,c.barPad=1,c.barColor="#808BA4",c.prototype.enable=function(r,n,i){var l=this.gd._fullLayout,u=l.width,f=l.height;this.position=r;var h,p,d,y,g=this.position.l,v=this.position.w,m=this.position.t,x=this.position.h,b=this.position.direction,_="down"===b,w="left"===b,T="up"===b,A=v,k=x;_||w||"right"===b||T||(this.position.direction="down",_=!0),_||T?(p=(h=g)+A,k=_?(y=Math.min((d=m)+k,f))-d:(y=m+k)-(d=Math.max(y-k,0))):(y=(d=m)+k,A=w?(p=g+A)-(h=Math.max(p-A,0)):(p=Math.min((h=g)+A,u))-h),this._box={l:h,t:d,w:A,h:k};var M=v>A,S=c.barLength+2*c.barPad,E=c.barWidth+2*c.barPad,I=m+x;I+E>f&&(I=f-E);var L=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);L.exit().on(".drag",null).remove(),L.enter().append("rect").classed("scrollbar-horizontal",!0).call(o.fill,c.barColor),M?(this.hbar=L.attr({rx:c.barRadius,ry:c.barRadius,x:g,y:I,width:S,height:E}),this._hbarXMin=g+S/2,this._hbarTranslateMax=A-S):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var C=x>k,O=c.barWidth+2*c.barPad,D=c.barLength+2*c.barPad,P=g+v;P+O>u&&(P=u-O);var B=this.container.selectAll("rect.scrollbar-vertical").data(C?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-vertical",!0).call(o.fill,c.barColor),C?(this.vbar=B.attr({rx:c.barRadius,ry:c.barRadius,x:P,y:m,width:O,height:D}),this._vbarYMin=m+D/2,this._vbarTranslateMax=k-D):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var R=this.id,z=h-.5,F=C?p+O+.5:p+.5,N=d-.5,U=M?y+E+.5:y+.5,j=l._topdefs.selectAll("#"+R).data(M||C?[0]:[]);if(j.exit().remove(),j.enter().append("clipPath").attr("id",R).append("rect"),M||C?(this._clipRect=j.select("rect").attr({x:Math.floor(z),y:Math.floor(N),width:Math.ceil(F)-Math.floor(z),height:Math.ceil(U)-Math.floor(N)}),this.container.call(s.setClipUrl,R,this.gd),this.bg.attr({x:g,y:m,width:v,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),M||C){var V=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(V);var H=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault(),a.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(H),C&&this.vbar.on(".drag",null).call(H)}this.setTranslate(n,i)},c.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},c.prototype._onBoxDrag=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r-=a.event.dx),this.vbar&&(n-=a.event.dy),this.setTranslate(r,n)},c.prototype._onBoxWheel=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r+=a.event.deltaY),this.vbar&&(n+=a.event.deltaY),this.setTranslate(r,n)},c.prototype._onBarDrag=function(){var r=this.translateX,n=this.translateY;if(this.hbar){var i=r+this._hbarXMin,o=i+this._hbarTranslateMax;r=(l.constrain(a.event.x,i,o)-i)/(o-i)*(this.position.w-this._box.w)}if(this.vbar){var s=n+this._vbarYMin,c=s+this._vbarTranslateMax;n=(l.constrain(a.event.y,s,c)-s)/(c-s)*(this.position.h-this._box.h)}this.setTranslate(r,n)},c.prototype.setTranslate=function(r,n){var i=this.position.w-this._box.w,a=this.position.h-this._box.h;if(r=l.constrain(r||0,0,i),n=l.constrain(n||0,0,a),this.translateX=r,this.translateY=n,this.container.call(s.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var o=r/i;this.hbar.call(s.setTranslate,r+o*this._hbarTranslateMax,n)}if(this.vbar){var c=n/a;this.vbar.call(s.setTranslate,r,n+c*this._vbarTranslateMax)}}},84284:function(r){r.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(r){r.exports={axisRefDescription:function(r,n,i){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",n,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",n,"("+i+"). If set to a",r,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",n,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the","point between the",n,"and the",i,"of the domain of the","second",r,"axis."].join(" ")}}},48164:function(r){r.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},26880:function(r){r.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(r){r.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(r){r.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(r){r.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},13448:function(r){r.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(r){r.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},2264:function(r,n){n.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],n.STYLE=n.CSS_DECLARATIONS.map(function(r){return r.join(": ")+"; "}).join("")},9616:function(r,n){n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},64884:function(r,n,i){n.version=i(25788).version,i(88324),i(79288);for(var a=i(24040),o=n.register=a.register,s=i(22448),l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];"_"!==u.charAt(0)&&(n[u]=s[u]),o({moduleType:"apiMethod",name:u,fn:s[u]})}o(i(65875)),o([i(79180),i(56864),i(22676),i(41592),i(7402),i(76908),i(97544),i(49692),i(41152),i(12704),i(64968),i(8932),i(55080),i(2780),i(93024),i(45460)]),o([i(6580),i(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(o(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=i(9224);var f=i(93024),h=i(7316);n.Plots={resize:h.resize,graphJson:h.graphJson,sendDataToCloud:h.sendDataToCloud},n.Fx={hover:f.hover,unhover:f.unhover,loneHover:f.loneHover,loneUnhover:f.loneUnhover},n.Snapshot=i(78904),n.PlotSchema=i(73060)},9224:function(r){r.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs> <style>  .cls-0{fill:#000;}  .cls-1{fill:#FFF;}  .cls-2{fill:#F26;}  .cls-3{fill:#D69;}  .cls-4{fill:#BAC;}  .cls-5{fill:#9EF;} </style></defs> <title>plotly-logomark</title> <g id='symbol'>  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>  <circle class='cls-5' cx='102' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='54' r='6'/>  <circle class='cls-3' cx='54' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='54' r='6'/>  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/> </g></svg>"}}},98308:function(r,n){n.isLeftAnchor=function(r){return"left"===r.xanchor||"auto"===r.xanchor&&r.x<=1/3},n.isCenterAnchor=function(r){return"center"===r.xanchor||"auto"===r.xanchor&&r.x>1/3&&r.x<2/3},n.isRightAnchor=function(r){return"right"===r.xanchor||"auto"===r.xanchor&&r.x>=2/3},n.isTopAnchor=function(r){return"top"===r.yanchor||"auto"===r.yanchor&&r.y>=2/3},n.isMiddleAnchor=function(r){return"middle"===r.yanchor||"auto"===r.yanchor&&r.y>1/3&&r.y<2/3},n.isBottomAnchor=function(r){return"bottom"===r.yanchor||"auto"===r.yanchor&&r.y<=1/3}},11864:function(r,n,i){var a=i(20435),o=a.mod,s=a.modHalf,l=Math.PI,c=2*l;function u(r){return Math.abs(r[1]-r[0])>c-1e-14}function f(r,n){return s(n-r,c)}function h(r,n){if(u(n))return!0;n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),(i=o(i,c))>(a=o(a,c))&&(a+=c);var i,a,s=o(r,c),l=s+c;return s>=i&&s<=a||l>=i&&l<=a}function p(r,n,i,a,o,s,f){o=o||0,s=s||0;var h,p,d,y,g,v=u([i,a]);function m(r,n){return[r*Math.cos(n)+o,s-r*Math.sin(n)]}v?(h=0,p=l,d=c):i<a?(h=i,d=a):(h=a,d=i),r<n?(y=r,g=n):(y=n,g=r);var x,b=Math.abs(d-h)<=l?0:1;function _(r,n,i){return"A"+[r,r]+" "+[0,b,i]+" "+m(r,n)}return v?x=null===y?"M"+m(g,h)+_(g,p,0)+_(g,d,0)+"Z":"M"+m(y,h)+_(y,p,0)+_(y,d,0)+"ZM"+m(g,h)+_(g,p,1)+_(g,d,1)+"Z":null===y?(x="M"+m(g,h)+_(g,d,0),f&&(x+="L0,0Z")):x="M"+m(y,h)+"L"+m(g,h)+_(g,d,0)+"L"+m(y,d)+_(y,h,1)+"Z",x}r.exports={deg2rad:function(r){return r/180*l},rad2deg:function(r){return r/l*180},angleDelta:f,angleDist:function(r,n){return Math.abs(f(r,n))},isFullCircle:u,isAngleInsideSector:h,isPtInsideSector:function(r,n,i,a){var o,s;return!!h(n,a)&&(i[0]<i[1]?(o=i[0],s=i[1]):(o=i[1],s=i[0]),r>=o&&r<=s)},pathArc:function(r,n,i,a,o){return p(null,r,n,i,a,o,0)},pathSector:function(r,n,i,a,o){return p(null,r,n,i,a,o,1)},pathAnnulus:function(r,n,i,a,o,s){return p(r,n,i,a,o,s,1)}}},38116:function(r,n,i){var a=i(83160).decode,o=i(63620),s=Array.isArray,l=ArrayBuffer,c=DataView;function u(r){return l.isView(r)&&!(r instanceof c)}function f(r){return s(r)||u(r)}n.isTypedArray=u,n.isArrayOrTypedArray=f,n.isArray1D=function(r){return!f(r[0])},n.ensureArray=function(r,n){return s(r)||(r=[]),r.length=n,r};var h={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function p(r){return r.constructor===ArrayBuffer}function d(r,n,i){if(f(r)){if(f(r[0])){for(var a=i,o=0;o<r.length;o++)a=n(a,r[o].length);return a}return r.length}return 0}h.uint8c=h.u1c,h.uint8=h.u1,h.int8=h.i1,h.uint16=h.u2,h.int16=h.i2,h.uint32=h.u4,h.int32=h.i4,h.float32=h.f4,h.float64=h.f8,n.isArrayBuffer=p,n.decodeTypedArraySpec=function(r){var n=[],i={bdata:r.bdata,dtype:r.dtype,shape:r.shape},o=i.dtype,s=h[o];if(!s)throw Error('Error in dtype: "'+o+'"');var l=s.BYTES_PER_ELEMENT,c=i.bdata;p(c)||(c=a(c));var u=void 0===i.shape?[c.byteLength/l]:(""+i.shape).split(",");u.reverse();var f,d,y=u.length,g=+u[0],v=l*g,m=0;if(1===y)n=new s(c);else if(2===y)for(f=+u[1],d=0;d<f;d++)n[d]=new s(c,m,g),m+=v;else{if(3!==y)throw Error("ndim: "+y+'is not supported with the shape:"'+i.shape+'"');f=+u[1];for(var x=+u[2],b=0;b<x;b++)for(n[b]=[],d=0;d<f;d++)n[b][d]=new s(c,m,g),m+=v}return n.bdata=i.bdata,n.dtype=i.dtype,n.shape=u.reverse().join(","),r._inputArray=n,n},n.isTypedArraySpec=function(r){return o(r)&&r.hasOwnProperty("dtype")&&"string"==typeof r.dtype&&r.hasOwnProperty("bdata")&&("string"==typeof r.bdata||p(r.bdata))&&(void 0===r.shape||r.hasOwnProperty("shape")&&("string"==typeof r.shape||"number"==typeof r.shape))},n.concat=function(){var r,n,i,a,o,l,c,u,f=[],h=!0,p=0;for(i=0;i<arguments.length;i++)(l=(a=arguments[i]).length)&&(n?f.push(a):(n=a,o=l),s(a)?r=!1:(h=!1,p?r!==a.constructor&&(r=!1):r=a.constructor),p+=l);if(!p)return[];if(!f.length)return n;if(h)return n.concat.apply(n,f);if(r){for((c=new r(p)).set(n),i=0;i<f.length;i++)a=f[i],c.set(a,o),o+=a.length;return c}for(c=Array(p),u=0;u<n.length;u++)c[u]=n[u];for(i=0;i<f.length;i++){for(a=f[i],u=0;u<a.length;u++)c[o+u]=a[u];o+=u}return c},n.maxRowLength=function(r){return d(r,Math.max,0)},n.minRowLength=function(r){return d(r,Math.min,1/0)}},54037:function(r,n,i){var a=i(38248),o=i(39032).BADNUM,s=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;r.exports=function(r){return"string"==typeof r&&(r=r.replace(s,"")),a(r)?Number(r):o}},73696:function(r){r.exports=function(r){var n=r._fullLayout;n._glcanvas&&n._glcanvas.size()&&n._glcanvas.each(function(r){r.regl&&r.regl.clear({color:!0,depth:!0})})}},75352:function(r){r.exports=function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",r._responsiveChartHandler),delete r._responsiveChartHandler)}},63064:function(r,n,i){var a=i(38248),o=i(49760),s=i(92880).extendFlat,l=i(45464),c=i(88304),u=i(76308),f=i(13448).DESELECTDIM,h=i(22296),p=i(53756).counter,d=i(20435).modHalf,y=i(38116).isArrayOrTypedArray,g=i(38116).isTypedArraySpec,v=i(38116).decodeTypedArraySpec;function m(r,i){var a=n.valObjectMeta[i.valType];if(i.arrayOk&&y(r))return!0;if(a.validateFunction)return a.validateFunction(r,i);var o={},s=o;return a.coerceFunction(r,{set:function(r){s=r}},o,i),s!==o}n.valObjectMeta={data_array:{coerceFunction:function(r,n,i){n.set(y(r)?r:g(r)?v(r):i)}},enumerated:{coerceFunction:function(r,n,i,a){a.coerceNumber&&(r=+r),-1===a.values.indexOf(r)?n.set(i):n.set(r)},validateFunction:function(r,n){n.coerceNumber&&(r=+r);for(var i=n.values,a=0;a<i.length;a++){var o=String(i[a]);if("/"===o.charAt(0)&&"/"===o.charAt(o.length-1)){if(new RegExp(o.substr(1,o.length-2)).test(r))return!0}else if(r===i[a])return!0}return!1}},boolean:{coerceFunction:function(r,n,i){!0===r||!1===r?n.set(r):n.set(i)}},number:{coerceFunction:function(r,n,i,o){g(r)&&(r=v(r)),!a(r)||void 0!==o.min&&r<o.min||void 0!==o.max&&r>o.max?n.set(i):n.set(+r)}},integer:{coerceFunction:function(r,n,i,o){-1===(o.extras||[]).indexOf(r)?(g(r)&&(r=v(r)),r%1||!a(r)||void 0!==o.min&&r<o.min||void 0!==o.max&&r>o.max?n.set(i):n.set(+r)):n.set(r)}},string:{coerceFunction:function(r,n,i,a){if("string"!=typeof r){var o="number"==typeof r;!0!==a.strict&&o?n.set(String(r)):n.set(i)}else a.noBlank&&!r?n.set(i):n.set(r)}},color:{coerceFunction:function(r,n,i){g(r)&&(r=v(r)),o(r).isValid()?n.set(r):n.set(i)}},colorlist:{coerceFunction:function(r,n,i){Array.isArray(r)&&r.length&&r.every(function(r){return o(r).isValid()})?n.set(r):n.set(i)}},colorscale:{coerceFunction:function(r,n,i){n.set(c.get(r,i))}},angle:{coerceFunction:function(r,n,i){g(r)&&(r=v(r)),"auto"===r?n.set("auto"):a(r)?n.set(d(+r,360)):n.set(i)}},subplotid:{coerceFunction:function(r,n,i,a){var o=a.regex||p(i);"string"==typeof r&&o.test(r)?n.set(r):n.set(i)},validateFunction:function(r,n){var i=n.dflt;return r===i||"string"==typeof r&&!!p(i).test(r)}},flaglist:{coerceFunction:function(r,n,i,a){if(-1===(a.extras||[]).indexOf(r)){if("string"==typeof r){for(var o=r.split("+"),s=0;s<o.length;){var l=o[s];-1===a.flags.indexOf(l)||o.indexOf(l)<s?o.splice(s,1):s++}o.length?n.set(o.join("+")):n.set(i)}else n.set(i)}else n.set(r)}},any:{coerceFunction:function(r,n,i){void 0===r?n.set(i):n.set(g(r)?v(r):r)}},info_array:{coerceFunction:function(r,i,a,o){function s(r,i,a){var o;return void 0===a&&(a=i.dflt),n.valObjectMeta[i.valType].coerceFunction(r,{set:function(r){o=r}},a,i),o}if(g(r)&&(r=v(r)),y(r)){var l,c,u,f,h,p,d=2===o.dimensions||"1-2"===o.dimensions&&Array.isArray(r)&&y(r[0]),m=o.items,x=[],b=Array.isArray(m),_=b&&d&&y(m[0]),w=d&&b&&!_,T=b&&!w?m.length:r.length;if(a=Array.isArray(a)?a:[],d)for(l=0;l<T;l++)for(x[l]=[],u=y(r[l])?r[l]:[],h=w?m.length:b?m[l].length:u.length,c=0;c<h;c++)f=w?m[c]:b?m[l][c]:m,void 0!==(p=s(u[c],f,(a[l]||[])[c]))&&(x[l][c]=p);else for(l=0;l<T;l++)void 0!==(p=s(r[l],b?m[l]:m,a[l]))&&(x[l]=p);i.set(x)}else i.set(a)},validateFunction:function(r,n){if(!y(r))return!1;var i=n.items,a=Array.isArray(i),o=2===n.dimensions;if(!n.freeLength&&r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o){if(!y(r[s])||!n.freeLength&&r[s].length!==i[s].length)return!1;for(var l=0;l<r[s].length;l++)if(!m(r[s][l],a?i[s][l]:i))return!1}else if(!m(r[s],a?i[s]:i))return!1;return!0}}},n.coerce=function(r,i,a,o,s){var l=h(a,o).get(),c=h(r,o),u=h(i,o),f=c.get(),p=i._template;if(void 0===f&&p&&(f=h(p,o).get(),p=0),void 0===s&&(s=l.dflt),l.arrayOk){if(y(f))return u.set(f),f;if(g(f))return f=v(f),u.set(f),f}var d=n.valObjectMeta[l.valType].coerceFunction;d(f,u,s,l);var x=u.get();return p&&x===s&&!m(f,l)&&(d(f=h(p,o).get(),u,s,l),x=u.get()),x},n.coerce2=function(r,i,a,o,s){var l=h(r,o),c=n.coerce(r,i,a,o,s);return null!=l.get()&&c},n.coerceFont=function(r,n,i,a){a||(a={}),i=s({},i);var o={family:r(n+".family",(i=s(i,a.overrideDflt||{})).family),size:r(n+".size",i.size),color:r(n+".color",i.color),weight:r(n+".weight",i.weight),style:r(n+".style",i.style)};if(a.noFontVariant||(o.variant=r(n+".variant",i.variant)),a.noFontLineposition||(o.lineposition=r(n+".lineposition",i.lineposition)),a.noFontTextcase||(o.textcase=r(n+".textcase",i.textcase)),!a.noFontShadow){var l=i.shadow;"none"===l&&a.autoShadowDflt&&(l="auto"),o.shadow=r(n+".shadow",l)}return o},n.coercePattern=function(r,n,i,a){if(r(n+".shape")){r(n+".solidity"),r(n+".size");var o="overlay"===r(n+".fillmode");if(!a){var s=r(n+".bgcolor",o?i:void 0);r(n+".fgcolor",o?u.contrast(s):i)}r(n+".fgopacity",o?.5:1)}},n.coerceHoverinfo=function(r,i,a){var o,s=i._module.attributes,c=s.hoverinfo?s:l,u=c.hoverinfo;if(1===a._dataLength){var f="all"===u.dflt?u.flags.slice():u.dflt.split("+");f.splice(f.indexOf("name"),1),o=f.join("+")}return n.coerce(r,i,c,"hoverinfo",o)},n.coerceSelectionMarkerOpacity=function(r,n){if(r.marker){var i,a,o=r.marker.opacity;void 0!==o&&(y(o)||r.selected||r.unselected||(i=o,a=f*o),n("selected.marker.opacity",i),n("unselected.marker.opacity",a))}},n.validate=m},67555:function(r,n,i){var a,o,s=i(94336).Yn,l=i(38248),c=i(24248),u=i(20435).mod,f=i(39032),h=f.BADNUM,p=f.ONEDAY,d=f.ONEHOUR,y=f.ONEMIN,g=f.ONESEC,v=f.EPOCHJD,m=i(24040),x=i(94336).E9,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=(new Date).getFullYear()-70;function T(r){return r&&m.componentsRegistry.calendars&&"string"==typeof r&&"gregorian"!==r}function A(r,n){return String(r+Math.pow(10,n)).substr(1)}n.dateTick0=function(r,i){var a,o=(a=!!i,T(r)?a?m.getComponentMethod("calendars","CANONICAL_SUNDAY")[r]:m.getComponentMethod("calendars","CANONICAL_TICK")[r]:a?"2000-01-02":"2000-01-01");if(i<2)return o;var s=n.dateTime2ms(o,r);return s+=p*(i-1),n.ms2DateTime(s,0,r)},n.dfltRange=function(r){return T(r)?m.getComponentMethod("calendars","DFLTRANGE")[r]:["2000-01-01","2001-01-01"]},n.isJSDate=function(r){return"object"==typeof r&&null!==r&&"function"==typeof r.getTime},n.dateTime2ms=function(r,i){if(n.isJSDate(r)){var s=r.getTimezoneOffset()*y,l=(r.getUTCMinutes()-r.getMinutes())*y+(r.getUTCSeconds()-r.getSeconds())*g+(r.getUTCMilliseconds()-r.getMilliseconds());if(l){var c=3*y;s=s-c/2+u(l-s+c/2,c)}return(r=Number(r)-s)>=a&&r<=o?r:h}if("string"!=typeof r&&"number"!=typeof r)return h;r=String(r);var f=T(i),x=r.charAt(0);f&&("G"===x||"g"===x)&&(r=r.substr(1),i="");var A=f&&"chinese"===i.substr(0,7),k=r.match(A?_:b);if(!k)return h;var M=k[1],S=k[3]||"1",E=Number(k[5]||1),I=Number(k[7]||0),L=Number(k[9]||0),C=Number(k[11]||0);if(f){if(2===M.length)return h;M=Number(M);try{var O,D=m.getComponentMethod("calendars","getCal")(i);if(A){var P="i"===S.charAt(S.length-1);S=parseInt(S,10),O=D.newDate(M,D.toMonthIndex(M,S,P),E)}else O=D.newDate(M,Number(S),E)}catch(r){return h}return O?(O.toJD()-v)*p+I*d+L*y+C*g:h}M=2===M.length?(Number(M)+2e3-w)%100+w:Number(M);var B=new Date(Date.UTC(2e3,S-=1,E,I,L));return B.setUTCFullYear(M),B.getUTCMonth()!==S||B.getUTCDate()!==E?h:B.getTime()+C*g},a=n.MIN_MS=n.dateTime2ms("-9999"),o=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(r,i){return n.dateTime2ms(r,i)!==h};var k=90*p,M=3*d,S=5*y;function E(r,n,i,a,o){if((n||i||a||o)&&(r+=" "+A(n,2)+":"+A(i,2),(a||o)&&(r+=":"+A(a,2),o))){for(var s=4;o%10==0;)s-=1,o/=10;r+="."+A(o,s)}return r}n.ms2DateTime=function(r,n,i){if("number"!=typeof r||!(r>=a&&r<=o))return h;n||(n=0);var s,l,c,f,b,_,w=Math.floor(10*u(r+.05,1)),A=Math.round(r-w/10);if(T(i)){var I=Math.floor(A/p)+v,L=Math.floor(u(r,p));try{s=m.getComponentMethod("calendars","getCal")(i).fromJD(I).formatDate("yyyy-mm-dd")}catch(r){s=x("G%Y-%m-%d")(new Date(A))}if("-"===s.charAt(0))for(;s.length<11;)s="-0"+s.substr(1);else for(;s.length<10;)s="0"+s;l=n<k?Math.floor(L/d):0,c=n<k?Math.floor(L%d/y):0,f=n<M?Math.floor(L%y/g):0,b=n<S?L%g*10+w:0}else _=new Date(A),s=x("%Y-%m-%d")(_),l=n<k?_.getUTCHours():0,c=n<k?_.getUTCMinutes():0,f=n<M?_.getUTCSeconds():0,b=n<S?10*_.getUTCMilliseconds()+w:0;return E(s,l,c,f,b)},n.ms2DateTimeLocal=function(r){if(!(r>=a+p&&r<=o-p))return h;var n=Math.floor(10*u(r+.05,1)),i=new Date(Math.round(r-n/10));return E(s("%Y-%m-%d")(i),i.getHours(),i.getMinutes(),i.getSeconds(),10*i.getUTCMilliseconds()+n)},n.cleanDate=function(r,i,a){if(r===h)return i;if(n.isJSDate(r)||"number"==typeof r&&isFinite(r)){if(T(a))return c.error("JS Dates and milliseconds are incompatible with world calendars",r),i;if(!(r=n.ms2DateTimeLocal(+r))&&void 0!==i)return i}else if(!n.isDateTime(r,a))return c.error("unrecognized date",r),i;return r};var I=/%\d?f/g,L=/%h/g,C={1:"1",2:"1",3:"2",4:"2"};function O(r,n,i,a){r=r.replace(I,function(r){var i=Math.min(+r.charAt(1)||6,6);return(n/1e3%1+2).toFixed(i).substr(2).replace(/0+$/,"")||"0"});var o=new Date(Math.floor(n+.05));if(r=r.replace(L,function(){return C[i("%q")(o)]}),T(a))try{r=m.getComponentMethod("calendars","worldCalFmt")(r,n,a)}catch(r){return"Invalid"}return i(r)(o)}var D=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(r,n,i,a,o,s){if(o=T(o)&&o,!n){if("y"===i)n=s.year;else if("m"===i)n=s.month;else{if("d"!==i)return function(r,n){var i=u(r+.05,p),a=A(Math.floor(i/d),2)+":"+A(u(Math.floor(i/y),60),2);if("M"!==n){l(n)||(n=0);var o=(100+Math.min(u(r/g,60),D[n])).toFixed(n).substr(1);n>0&&(o=o.replace(/0+$/,"").replace(/[\.]$/,"")),a+=":"+o}return a}(r,i)+"\n"+O(s.dayMonthYear,r,a,o);n=s.dayMonth+"\n"+s.year}}return O(n,r,a,o)};var P=3*p;n.incrementMonth=function(r,n,i){i=T(i)&&i;var a=u(r,p);if(r=Math.round(r-a),i)try{var o=Math.round(r/p)+v,s=m.getComponentMethod("calendars","getCal")(i),l=s.fromJD(o);return n%12?s.add(l,n,"m"):s.add(l,n/12,"y"),(l.toJD()-v)*p+a}catch(n){c.error("invalid ms "+r+" in calendar "+i)}var f=new Date(r+P);return f.setUTCMonth(f.getUTCMonth()+n)+a-P},n.findExactDates=function(r,n){for(var i,a,o=0,s=0,c=0,u=0,f=T(n)&&m.getComponentMethod("calendars","getCal")(n),h=0;h<r.length;h++)if(l(a=r[h])){if(!(a%p)){if(f)try{1===(i=f.fromJD(a/p+v)).day()?1===i.month()?o++:s++:c++}catch(r){}else 1===(i=new Date(a)).getUTCDate()?0===i.getUTCMonth()?o++:s++:c++}}else u++;c+=s+=o;var d=r.length-u;return{exactYears:o/d,exactMonths:s/d,exactDays:c/d}}},52200:function(r,n,i){var a=i(33428),o=i(24248),s=i(52248),l=i(36524);function c(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function u(r,n,i){var a="plotly.js-style-"+r,s=document.getElementById(a);s||((s=document.createElement("style")).setAttribute("id",a),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var l=s.sheet;l.insertRule?l.insertRule(n+"{"+i+"}",0):l.addRule?l.addRule(n,i,0):o.warn("addStyleRule failed")}function f(r){var n=window.getComputedStyle(r,null),i=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(r){return+r})}function h(r){for(var n,i=[];(n=r)&&(n instanceof Element||n instanceof HTMLElement);)i.push(r),r=r.parentNode,"function"==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host);return i}r.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=a.select(r);return n.node() instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:c,addStyleRule:function(r,n){u("global",r,n)},addRelatedStyleRule:u,deleteRelatedStyleRule:function(r){var n=document.getElementById("plotly.js-style-"+r);n&&c(n)},getFullTransformMatrix:function(r){var n=h(r),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(r){var n=f(r);if(n){var a=s.convertCssMatrix(n);i=l.multiply(i,i,a)}}),i},getElementTransformMatrix:f,getElementAndAncestors:h,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},95924:function(r,n,i){var a=i(61252).EventEmitter;r.exports={init:function(r){if(r._ev instanceof a)return r;var n=new a,i=new a;return r._ev=n,r._internalEv=i,r.on=n.on.bind(n),r.once=n.once.bind(n),r.removeListener=n.removeListener.bind(n),r.removeAllListeners=n.removeAllListeners.bind(n),r._internalOn=i.on.bind(i),r._internalOnce=i.once.bind(i),r._removeInternalListener=i.removeListener.bind(i),r._removeAllInternalListeners=i.removeAllListeners.bind(i),r.emit=function(a,o){"undefined"!=typeof jQuery&&jQuery(r).trigger(a,o),n.emit(a,o),i.emit(a,o)},r},triggerHandler:function(r,n,i){"undefined"!=typeof jQuery&&(o=jQuery(r).triggerHandler(n,i));var a=r._ev;if(!a)return o;var o,s,l,c=a._events[n];if(!c)return o;function u(r){return r.listener?(a.removeListener(n,r.listener),r.fired?void 0:(r.fired=!0,r.listener.apply(a,[i]))):r.apply(a,[i])}for(c=Array.isArray(c)?c:[c],l=0;l<c.length-1;l++)u(c[l]);return s=u(c[l]),void 0!==o?o:s},purge:function(r){return delete r._ev,delete r.on,delete r.once,delete r.removeListener,delete r.removeAllListeners,delete r.emit,delete r._ev,delete r._internalEv,delete r._internalOn,delete r._internalOnce,delete r._removeInternalListener,delete r._removeAllInternalListeners,r}}},92880:function(r,n,i){var a=i(63620),o=Array.isArray;function s(r,n,i,l){var c,u,f,h,p,d,y=r[0],g=r.length;if(2===g&&o(y)&&o(r[1])&&0===y.length){if(function(r,n){var i,a;for(i=0;i<r.length;i++){if(null!==(a=r[i])&&"object"==typeof a)return!1;void 0!==a&&(n[i]=a)}return!0}(r[1],y))return y;y.splice(0,y.length)}for(var v=1;v<g;v++)for(u in c=r[v])f=y[u],h=c[u],l&&o(h)?y[u]=h:n&&h&&(a(h)||(p=o(h)))?(p?(p=!1,d=f&&o(f)?f:[]):d=f&&a(f)?f:{},y[u]=s([d,h],n,i,l)):(void 0!==h||i)&&(y[u]=h);return y}n.extendFlat=function(){return s(arguments,!1,!1,!1)},n.extendDeep=function(){return s(arguments,!0,!1,!1)},n.extendDeepAll=function(){return s(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return s(arguments,!0,!1,!0)}},68944:function(r){r.exports=function(r){for(var n={},i=[],a=0,o=0;o<r.length;o++){var s=r[o];1!==n[s]&&(n[s]=1,i[a++]=s)}return i}},43880:function(r){function n(r){return!0===r.visible}function i(r){var n=r[0].trace;return!0===n.visible&&0!==n._length}r.exports=function(r){for(var a=Array.isArray(r)&&Array.isArray(r[0])&&r[0][0]&&r[0][0].trace?i:n,o=[],s=0;s<r.length;s++){var l=r[s];a(l)&&o.push(l)}return o}},27144:function(r,n,i){var a=i(33428),o=i(36116),s=i(40440),l=i(77844),c=i(42428),u=i(35536),f=i(24248),h=i(63620),p=i(22296),d=i(92065),y=Object.keys(o),g={"ISO-3":u,"USA-states":u,"country names":function(r){for(var n=0;n<y.length;n++){var i=y[n];if(new RegExp(o[i]).test(r.trim().toLowerCase()))return i}return f.log("Unrecognized country name: "+r+"."),!1}};function v(r){var n=r.geojson,i=window.PlotlyGeoAssets||{},a="string"==typeof n?i[n]:n;return h(a)?a:(f.error("Oops ... something went wrong when fetching "+n),!1)}r.exports={locationToFeature:function(r,n,i){if(!n||"string"!=typeof n)return!1;var a,o,s,l=g[r](n);if(l){if("USA-states"===r)for(a=[],s=0;s<i.length;s++)(o=i[s]).properties&&o.properties.gu&&"USA"===o.properties.gu&&a.push(o);else a=i;for(s=0;s<a.length;s++)if((o=a[s]).id===l)return o;f.log(["Location with id",l,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(r){var n,i,a,o,s=r.geometry,l=s.coordinates,c=r.id,u=[];function f(r){for(var n=0;n<r.length-1;n++)if(r[n][0]>0&&r[n+1][0]<0)return n;return null}switch(n="RUS"===c||"FJI"===c?function(r){var n;if(null===f(r))n=r;else for(n=Array(r.length),o=0;o<r.length;o++)n[o]=[r[o][0]<0?r[o][0]+360:r[o][0],r[o][1]];u.push(d.tester(n))}:"ATA"===c?function(r){var n=f(r);if(null===n)return u.push(d.tester(r));var i=Array(r.length+1),a=0;for(o=0;o<r.length;o++)o>n?i[a++]=[r[o][0]+360,r[o][1]]:o===n?(i[a++]=r[o],i[a++]=[r[o][0],-90]):i[a++]=r[o];var s=d.tester(i);s.pts.pop(),u.push(s)}:function(r){u.push(d.tester(r))},s.type){case"MultiPolygon":for(i=0;i<l.length;i++)for(a=0;a<l[i].length;a++)n(l[i][a]);break;case"Polygon":for(i=0;i<l.length;i++)n(l[i])}return u},getTraceGeojson:v,extractTraceFeature:function(r){var n=r[0].trace,i=v(n);if(!i)return!1;var a,o={},c=[];for(a=0;a<n._length;a++){var u=r[a];(u.loc||0===u.loc)&&(o[u.loc]=u)}function h(r){var i=p(r,n.featureidkey||"id").get(),a=o[i];if(a){var u=r.geometry;if("Polygon"===u.type||"MultiPolygon"===u.type){var h={type:"Feature",id:i,geometry:u,properties:{}};h.properties.ct=function(r){var n,i=r.geometry;if("MultiPolygon"===i.type)for(var a=i.coordinates,o=0,c=0;c<a.length;c++){var u={type:"Polygon",coordinates:a[c]},f=s.default(u);f>o&&(o=f,n=u)}else n=i;return l.default(n).geometry.coordinates}(h),a.fIn=r,a.fOut=h,c.push(h)}else f.log(["Location",a.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[i]}switch(i.type){case"FeatureCollection":var d=i.features;for(a=0;a<d.length;a++)h(d[a]);break;case"Feature":h(i);break;default:return f.warn(["Invalid GeoJSON type",(i.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var y in o)f.log(["Location *"+y+"*","does not have a matching feature with id-key","*"+n.featureidkey+"*."].join(" "));return c},fetchTraceGeoData:function(r){for(var n=window.PlotlyGeoAssets||{},i=[],o=0;o<r.length;o++){var s=r[o][0].trace.geojson;"string"==typeof s&&(n[s]?"pending"===n[s]&&i.push(function(r){return new Promise(function(i,a){var o=0,s=setInterval(function(){return n[r]&&"pending"!==n[r]?(clearInterval(s),i(n[r])):o>100?(clearInterval(s),a("Unexpected error while fetching from "+r)):void o++},50)})}(s)):(n[s]="pending",i.push(function(r){return new Promise(function(i,o){a.json(r,function(a,s){return a?(delete n[r],o(Error(404===a.status?'GeoJSON at URL "'+r+'" does not exist.':"Unexpected error while fetching from "+r))):(n[r]=s,i(s))})})}(s))))}return i},computeBbox:function(r){return c.default(r)}}},44808:function(r,n,i){var a=i(39032).BADNUM;n.calcTraceToLineCoords=function(r){for(var n=r[0].trace.connectgaps,i=[],o=[],s=0;s<r.length;s++){var l=r[s].lonlat;l[0]!==a?o.push(l):!n&&o.length>0&&(i.push(o),o=[])}return o.length>0&&i.push(o),i},n.makeLine=function(r){return 1===r.length?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},n.makePolygon=function(r){if(1===r.length)return{type:"Polygon",coordinates:r};for(var n=Array(r.length),i=0;i<r.length;i++)n[i]=[r[i]];return{type:"MultiPolygon",coordinates:n}},n.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(r,n,i){var a,o,s,l=i(20435).mod;function c(r,n,i,a,o,s,l,c){var u=i-r,f=o-r,h=l-o,p=a-n,d=s-n,y=c-s,g=u*y-h*p;if(0===g)return null;var v=(f*y-h*d)/g,m=(f*p-u*d)/g;return m<0||m>1||v<0||v>1?null:{x:r+u*v,y:n+p*v}}function u(r,n,i,a,o){var s=a*r+o*n;if(s<0)return a*a+o*o;if(s>i){var l=a-r,c=o-n;return l*l+c*c}var u=a*n-o*r;return u*u/i}n.segmentsIntersect=c,n.segmentDistance=function(r,n,i,a,o,s,l,f){if(c(r,n,i,a,o,s,l,f))return 0;var h=i-r,p=a-n,d=l-o,y=f-s,g=h*h+p*p,v=d*d+y*y;return Math.sqrt(Math.min(u(h,p,g,o-r,s-n),u(h,p,g,l-r,f-n),u(d,y,v,r-o,n-s),u(d,y,v,i-o,a-s)))},n.getTextLocation=function(r,n,i,c){if(r===o&&c===s||(a={},o=r,s=c),a[i])return a[i];var u=r.getPointAtLength(l(i-c/2,n)),f=r.getPointAtLength(l(i+c/2,n)),h=Math.atan((f.y-u.y)/(f.x-u.x)),p=r.getPointAtLength(l(i,n)),d={x:(4*p.x+u.x+f.x)/6,y:(4*p.y+u.y+f.y)/6,theta:h};return a[i]=d,d},n.clearLocationCache=function(){o=null},n.getVisibleSegment=function(r,n,i){var a,o,s=n.left,l=n.right,c=n.top,u=n.bottom,f=0,h=r.getTotalLength(),p=h;function d(n){var i=r.getPointAtLength(n);0===n?a=i:n===h&&(o=i);var f=i.x<s?s-i.x:i.x>l?i.x-l:0,p=i.y<c?c-i.y:i.y>u?i.y-u:0;return Math.sqrt(f*f+p*p)}for(var y=d(f);y;){if((f+=y+i)>p)return;y=d(f)}for(y=d(p);y;){if(f>(p-=y+i))return;y=d(p)}return{min:f,max:p,len:p-f,total:h,isClosed:0===f&&p===h&&.1>Math.abs(a.x-o.x)&&.1>Math.abs(a.y-o.y)}},n.findPointOnPath=function(r,n,i,a){for(var o,s,l,c=(a=a||{}).pathLength||r.getTotalLength(),u=a.tolerance||.001,f=a.iterationLimit||30,h=r.getPointAtLength(0)[i]>r.getPointAtLength(c)[i]?-1:1,p=0,d=0,y=c;p<f&&(o=(d+y)/2,!(Math.abs(l=(s=r.getPointAtLength(o))[i]-n)<u));)h*l>0?y=o:d=o,p++;return s}},33040:function(r,n,i){var a=i(38248),o=i(49760),s=i(72160),l=i(8932),c=i(22548).defaultLine,u=i(38116).isArrayOrTypedArray,f=s(c);function h(r){if(a(r))return f;var n=s(r);return n.length?n:f}function p(r){return a(r)?r:1}r.exports={formatColor:function(r,n,i){var a,o=r.color;o&&o._inputArray&&(o=o._inputArray);var c,d,y,g,v,m=u(o),x=u(n),b=l.extractOpts(r),_=[];if(c=void 0!==b.colorscale?l.makeColorScaleFuncFromTrace(r):h,d=m?function(r,n){return void 0===r[n]?f:s(c(r[n]))}:h,y=x?function(r,n){return void 0===r[n]?1:p(r[n])}:p,m||x)for(var w=0;w<i;w++)g=d(o,w),v=y(n,w),_[w]=(g[3]*=v,g);else a=s(o),a[3]*=n,_=a;return _},parseColorScale:function(r){var n=l.extractOpts(r),i=n.colorscale;return n.reversescale&&(i=l.flipScale(n.colorscale)),i.map(function(r){var n=r[0],i=o(r[1]).toRgb();return{index:n,rgb:[i.r,i.g,i.b,i.a]}})}}},71688:function(r,n,i){var a=i(35536);function o(r){return[r]}r.exports={keyFun:function(r){return r.key},repeat:o,descend:a,wrap:o,unwrap:function(r){return r[0]}}},35536:function(r){r.exports=function(r){return r}},1396:function(r){r.exports=function(r,n){if(!n)return r;var i=1/Math.abs(n),a=i>1?(i*r+i*n)/i:r+n,o=String(a).length;if(o>16){var s=String(n).length;if(o>=String(r).length+s){var l=parseFloat(a).toPrecision(12);-1===l.indexOf("e+")&&(a=+l)}}return a}},3400:function(r,n,i){var a=i(33428),o=i(94336).E9,s=i(57624).E9,l=i(38248),c=i(39032),u=c.FP_SAFE,f=-u,h=c.BADNUM,p=r.exports={};p.adjustFormat=function(r){return!r||/^\d[.]\df/.test(r)||/[.]\d%/.test(r)?r:"0.f"===r?"~f":/^\d%/.test(r)?"~%":/^\ds/.test(r)?"~s":!/^[~,.0$]/.test(r)&&/[&fps]/.test(r)?"~"+r:r};var d={};p.warnBadFormat=function(r){var n=String(r);d[n]||(d[n]=1,p.warn('encountered bad format: "'+n+'"'))},p.noFormat=function(r){return String(r)},p.numberFormat=function(r){var n;try{n=s(p.adjustFormat(r))}catch(n){return p.warnBadFormat(r),p.noFormat}return n},p.nestedProperty=i(22296),p.keyedContainer=i(37804),p.relativeAttr=i(23193),p.isPlainObject=i(63620),p.toLogRange=i(36896),p.relinkPrivateKeys=i(51528);var y=i(38116);p.isArrayBuffer=y.isArrayBuffer,p.isTypedArray=y.isTypedArray,p.isArrayOrTypedArray=y.isArrayOrTypedArray,p.isArray1D=y.isArray1D,p.ensureArray=y.ensureArray,p.concat=y.concat,p.maxRowLength=y.maxRowLength,p.minRowLength=y.minRowLength;var g=i(20435);p.mod=g.mod,p.modHalf=g.modHalf;var v=i(63064);p.valObjectMeta=v.valObjectMeta,p.coerce=v.coerce,p.coerce2=v.coerce2,p.coerceFont=v.coerceFont,p.coercePattern=v.coercePattern,p.coerceHoverinfo=v.coerceHoverinfo,p.coerceSelectionMarkerOpacity=v.coerceSelectionMarkerOpacity,p.validate=v.validate;var m=i(67555);p.dateTime2ms=m.dateTime2ms,p.isDateTime=m.isDateTime,p.ms2DateTime=m.ms2DateTime,p.ms2DateTimeLocal=m.ms2DateTimeLocal,p.cleanDate=m.cleanDate,p.isJSDate=m.isJSDate,p.formatDate=m.formatDate,p.incrementMonth=m.incrementMonth,p.dateTick0=m.dateTick0,p.dfltRange=m.dfltRange,p.findExactDates=m.findExactDates,p.MIN_MS=m.MIN_MS,p.MAX_MS=m.MAX_MS;var x=i(14952);p.findBin=x.findBin,p.sorterAsc=x.sorterAsc,p.sorterDes=x.sorterDes,p.distinctVals=x.distinctVals,p.roundUp=x.roundUp,p.sort=x.sort,p.findIndexOfMin=x.findIndexOfMin,p.sortObjectKeys=i(95376);var b=i(63084);p.aggNums=b.aggNums,p.len=b.len,p.mean=b.mean,p.geometricMean=b.geometricMean,p.median=b.median,p.midRange=b.midRange,p.variance=b.variance,p.stdev=b.stdev,p.interp=b.interp;var _=i(52248);p.init2dArray=_.init2dArray,p.transposeRagged=_.transposeRagged,p.dot=_.dot,p.translationMatrix=_.translationMatrix,p.rotationMatrix=_.rotationMatrix,p.rotationXYMatrix=_.rotationXYMatrix,p.apply3DTransform=_.apply3DTransform,p.apply2DTransform=_.apply2DTransform,p.apply2DTransform2=_.apply2DTransform2,p.convertCssMatrix=_.convertCssMatrix,p.inverseTransformMatrix=_.inverseTransformMatrix;var w=i(11864);p.deg2rad=w.deg2rad,p.rad2deg=w.rad2deg,p.angleDelta=w.angleDelta,p.angleDist=w.angleDist,p.isFullCircle=w.isFullCircle,p.isAngleInsideSector=w.isAngleInsideSector,p.isPtInsideSector=w.isPtInsideSector,p.pathArc=w.pathArc,p.pathSector=w.pathSector,p.pathAnnulus=w.pathAnnulus;var T=i(98308);p.isLeftAnchor=T.isLeftAnchor,p.isCenterAnchor=T.isCenterAnchor,p.isRightAnchor=T.isRightAnchor,p.isTopAnchor=T.isTopAnchor,p.isMiddleAnchor=T.isMiddleAnchor,p.isBottomAnchor=T.isBottomAnchor;var A=i(92348);p.segmentsIntersect=A.segmentsIntersect,p.segmentDistance=A.segmentDistance,p.getTextLocation=A.getTextLocation,p.clearLocationCache=A.clearLocationCache,p.getVisibleSegment=A.getVisibleSegment,p.findPointOnPath=A.findPointOnPath;var k=i(92880);p.extendFlat=k.extendFlat,p.extendDeep=k.extendDeep,p.extendDeepAll=k.extendDeepAll,p.extendDeepNoArrays=k.extendDeepNoArrays;var M=i(24248);p.log=M.log,p.warn=M.warn,p.error=M.error;var S=i(53756);p.counterRegex=S.counter;var E=i(91200);p.throttle=E.throttle,p.throttleDone=E.done,p.clearThrottle=E.clear;var I=i(52200);function L(r){var n={};for(var i in r)for(var a=r[i],o=0;o<a.length;o++)n[a[o]]=+i;return n}p.getGraphDiv=I.getGraphDiv,p.isPlotDiv=I.isPlotDiv,p.removeElement=I.removeElement,p.addStyleRule=I.addStyleRule,p.addRelatedStyleRule=I.addRelatedStyleRule,p.deleteRelatedStyleRule=I.deleteRelatedStyleRule,p.getFullTransformMatrix=I.getFullTransformMatrix,p.getElementTransformMatrix=I.getElementTransformMatrix,p.getElementAndAncestors=I.getElementAndAncestors,p.equalDomRects=I.equalDomRects,p.clearResponsive=i(75352),p.preserveDrawingBuffer=i(34296),p.makeTraceGroups=i(30988),p._=i(98356),p.notifier=i(41792),p.filterUnique=i(68944),p.filterVisible=i(43880),p.pushUnique=i(52416),p.increment=i(1396),p.cleanNumber=i(54037),p.ensureNumber=function(r){return l(r)?(r=Number(r))>u||r<f?h:r:h},p.isIndex=function(r,n){return!(void 0!==n&&r>=n)&&l(r)&&r>=0&&r%1==0},p.noop=i(16628),p.identity=i(35536),p.repeat=function(r,n){for(var i=Array(n),a=0;a<n;a++)i[a]=r;return i},p.swapAttrs=function(r,n,i,a){i||(i="x"),a||(a="y");for(var o=0;o<n.length;o++){var s=n[o],l=p.nestedProperty(r,s.replace("?",i)),c=p.nestedProperty(r,s.replace("?",a)),u=l.get();l.set(c.get()),c.set(u)}},p.raiseToTop=function(r){r.parentNode.appendChild(r)},p.cancelTransition=function(r){return r.transition().duration(0)},p.constrain=function(r,n,i){return n>i?Math.max(i,Math.min(n,r)):Math.max(n,Math.min(i,r))},p.bBoxIntersect=function(r,n,i){return i=i||0,r.left<=n.right+i&&n.left<=r.right+i&&r.top<=n.bottom+i&&n.top<=r.bottom+i},p.simpleMap=function(r,n,i,a,o){for(var s=r.length,l=Array(s),c=0;c<s;c++)l[c]=n(r[c],i,a,o);return l},p.randstr=function r(n,i,a,o){if(a||(a=16),void 0===i&&(i=24),i<=0)return"0";var s,l=Math.log(Math.pow(2,i))/Math.log(a),c="";for(s=2;l===1/0;s*=2)l=Math.log(Math.pow(2,i/s))/Math.log(a)*s;var u=l-Math.floor(l);for(s=0;s<Math.floor(l);s++)c=Math.floor(Math.random()*a).toString(a)+c;u&&(c=Math.floor(Math.random()*Math.pow(a,u)).toString(a)+c);var f=parseInt(c,a);return n&&n[c]||f!==1/0&&f>=Math.pow(2,i)?o>10?(p.warn("randstr failed uniqueness"),c):r(n,i,a,(o||0)+1):c},p.OptionControl=function(r,n){r||(r={}),n||(n="opt");var i={optionList:[],_newoption:function(a){a[n]=r,i[a.name]=a,i.optionList.push(a)}};return i["_"+n]=r,i},p.smooth=function(r,n){if((n=Math.round(n)||0)<2)return r;var i,a,o,s,l=r.length,c=2*l,u=2*n-1,f=Array(u),h=Array(l);for(i=0;i<u;i++)f[i]=(1-Math.cos(Math.PI*(i+1)/n))/(2*n);for(i=0;i<l;i++){for(s=0,a=0;a<u;a++)(o=i+a+1-n)<-l?o-=c*Math.round(o/c):o>=c&&(o-=c*Math.floor(o/c)),o<0?o=-1-o:o>=l&&(o=c-1-o),s+=r[o]*f[a];h[i]=s}return h},p.syncOrAsync=function(r,n,i){var a;function o(){return p.syncOrAsync(r,n,i)}for(;r.length;)if((a=(0,r.splice(0,1)[0])(n))&&a.then)return a.then(o);return i&&i(n)},p.stripTrailingSlash=function(r){return"/"===r.substr(-1)?r.substr(0,r.length-1):r},p.noneOrAll=function(r,n,i){if(r){var a,o=!1,s=!0;for(a=0;a<i.length;a++)null!=r[i[a]]?o=!0:s=!1;if(o&&!s)for(a=0;a<i.length;a++)r[i[a]]=n[i[a]]}},p.mergeArray=function(r,n,i,a){var o="function"==typeof a;if(p.isArrayOrTypedArray(r))for(var s=Math.min(r.length,n.length),l=0;l<s;l++){var c=r[l];n[l][i]=o?a(c):c}},p.mergeArrayCastPositive=function(r,n,i){return p.mergeArray(r,n,i,function(r){var n=+r;return isFinite(n)&&n>0?n:0})},p.fillArray=function(r,n,i,a){if(a=a||p.identity,p.isArrayOrTypedArray(r))for(var o=0;o<n.length;o++)n[o][i]=a(r[o])},p.castOption=function(r,n,i,a){a=a||p.identity;var o=p.nestedProperty(r,i).get();return p.isArrayOrTypedArray(o)?a(Array.isArray(n)&&p.isArrayOrTypedArray(o[n[0]])?o[n[0]][n[1]]:o[n]):o},p.extractOption=function(r,n,i,a){if(i in r)return r[i];var o=p.nestedProperty(n,a).get();return Array.isArray(o)?void 0:o},p.tagSelected=function(r,n,i){var a,o=n.selectedpoints,s=n._indexToPoints;s&&(a=L(s));for(var l=0;l<o.length;l++){var c=o[l];if(p.isIndex(c)||p.isArrayOrTypedArray(c)&&p.isIndex(c[0])&&p.isIndex(c[1])){var u=a?a[c]:c,f=i?i[u]:u;void 0!==f&&f<r.length&&(r[f].selected=1)}}},p.selIndices2selPoints=function(r){var n=r.selectedpoints,i=r._indexToPoints;if(i){for(var a=L(i),o=[],s=0;s<n.length;s++){var l=n[s];if(p.isIndex(l)){var c=a[l];p.isIndex(c)&&o.push(c)}}return o}return n},p.getTargetArray=function(r,n){var i=n.target;if("string"==typeof i&&i){var a=p.nestedProperty(r,i).get();return!!p.isArrayOrTypedArray(a)&&a}return!!p.isArrayOrTypedArray(i)&&i},p.minExtend=function r(n,i,a){var o={};"object"!=typeof i&&(i={});var s,l,c,u="pieLike"===a?-1:3,f=Object.keys(n);for(s=0;s<f.length;s++)c=n[l=f[s]],"_"!==l.charAt(0)&&"function"!=typeof c&&("module"===l?o[l]=c:Array.isArray(c)?o[l]="colorscale"===l||-1===u?c.slice():c.slice(0,u):p.isTypedArray(c)?o[l]=-1===u?c.subarray():c.subarray(0,u):o[l]=c&&"object"==typeof c?r(n[l],i[l],a):c);for(f=Object.keys(i),s=0;s<f.length;s++)"object"==typeof(c=i[l=f[s]])&&l in o&&"object"==typeof o[l]||(o[l]=c);return o},p.titleCase=function(r){return r.charAt(0).toUpperCase()+r.substr(1)},p.containsAny=function(r,n){for(var i=0;i<n.length;i++)if(-1!==r.indexOf(n[i]))return!0;return!1},p.isIE=function(){return void 0!==window.navigator.msSaveBlob};var C=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return C.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;p.isIOS=function(){return O.test(window.navigator.userAgent)};var D=/Firefox\/(\d+)\.\d+/;p.getFirefoxVersion=function(){var r=D.exec(window.navigator.userAgent);if(r&&2===r.length){var n=parseInt(r[1]);if(!isNaN(n))return n}return null},p.isD3Selection=function(r){return r instanceof a.selection},p.ensureSingle=function(r,n,i,a){var o=r.select(n+(i?"."+i:""));if(o.size())return o;var s=r.append(n);return i&&s.classed(i,!0),a&&s.call(a),s},p.ensureSingleById=function(r,n,i,a){var o=r.select(n+"#"+i);if(o.size())return o;var s=r.append(n).attr("id",i);return a&&s.call(a),s},p.objectFromPath=function(r,n){for(var i,a=r.split("."),o=i={},s=0;s<a.length;s++){var l=a[s],c=null,u=a[s].match(/(.*)\[([0-9]+)\]/);u?(l=u[1],c=u[2],i=i[l]=[],s===a.length-1?i[c]=n:i[c]={},i=i[c]):(s===a.length-1?i[l]=n:i[l]={},i=i[l])}return o};var P=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function R(r){return"__"===r.slice(0,2)}p.expandObjectPaths=function(r){var n,i,a,o,s,l,c;if("object"==typeof r&&!Array.isArray(r)){for(i in r)if(r.hasOwnProperty(i)){if(n=i.match(P)){if(o=r[i],R(a=n[1]))continue;delete r[i],r[a]=p.extendDeepNoArrays(r[a]||{},p.objectFromPath(i,p.expandObjectPaths(o))[a])}else if(n=i.match(B)){if(o=r[i],R(a=n[1]))continue;if(s=parseInt(n[2]),delete r[i],r[a]=r[a]||[],"."===n[3])c=n[4],l=r[a][s]=r[a][s]||{},p.extendDeepNoArrays(l,p.objectFromPath(c,p.expandObjectPaths(o)));else{if(R(a))continue;r[a][s]=p.expandObjectPaths(o)}}else{if(R(i))continue;r[i]=p.expandObjectPaths(r[i])}}}return r},p.numSeparate=function(r,n,i){if(i||(i=!1),"string"!=typeof n||0===n.length)throw Error("Separator string required for formatting!");"number"==typeof r&&(r=String(r));var a=/(\d+)(\d{3})/,o=n.charAt(0),s=n.charAt(1),l=r.split("."),c=l[0],u=l.length>1?o+l[1]:"";if(s&&(l.length>1||c.length>4||i))for(;a.test(c);)c=c.replace(a,"$1"+s+"$2");return c+u},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var z=/^\w*$/;p.templateString=function(r,n){var i={};return r.replace(p.TEMPLATE_STRING_REGEX,function(r,a){var o;return z.test(a)?o=n[a]:(i[a]=i[a]||p.nestedProperty(n,a).get,o=i[a]()),p.isValidTextValue(o)?o:""})};var F={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return H.apply(F,arguments)};var N={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return H.apply(N,arguments)};var U=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,j={max:10,count:0,name:"texttemplate",parseMultDiv:!0};p.texttemplateStringForShapes=function(){return H.apply(j,arguments)};var V=/^[:|\|]/;function H(r,n,i){var a=this,s=arguments;n||(n={});var l={};return r.replace(p.TEMPLATE_STRING_REGEX,function(r,c,u){var f,h="_xother"===c||"_yother"===c,d="_xother_"===c||"_yother_"===c,y="xother_"===c||"yother_"===c,g="xother"===c||"yother"===c||h||y||d,v=c;(h||d)&&(v=v.substring(1)),(y||d)&&(v=v.substring(0,v.length-1));var m,x,b,_=null,w=null;if(a.parseMultDiv){var T,A,k=(A=(T=v).match(U))?{key:A[1],op:A[2],number:Number(A[3])}:{key:T,op:null,number:null};v=k.key,_=k.op,w=k.number}if(g){if(void 0===(m=n[v]))return""}else for(b=3;b<s.length;b++)if(x=s[b]){if(x.hasOwnProperty(v)){m=x[v];break}if(z.test(v)||(m=p.nestedProperty(x,v).get(),(m=l[v]||p.nestedProperty(x,v).get())&&(l[v]=m)),void 0!==m)break}if(void 0!==m&&("*"===_&&(m*=w),"/"===_&&(m/=w)),void 0===m&&a)return a.count<a.max&&(p.warn("Variable '"+v+"' in "+a.name+" could not be found!"),m=r),a.count===a.max&&p.warn("Too many "+a.name+" warnings - additional warnings will be suppressed"),a.count++,r;if(u){if(":"===u[0]&&(f=i?i.numberFormat:p.numberFormat,""!==m&&(m=f(u.replace(V,""))(m))),"|"===u[0]){f=i?i.timeFormat:o;var M=p.dateTime2ms(m);m=p.formatDate(M,u.replace(V,""),!1,f)}}else{var S=v+"Label";n.hasOwnProperty(S)&&(m=n[S])}return g&&(m="("+m+")",(h||d)&&(m=" "+m),(y||d)&&(m+=" ")),m})}p.subplotSort=function(r,n){for(var i=Math.min(r.length,n.length)+1,a=0,o=0,s=0;s<i;s++){var l=r.charCodeAt(s)||0,c=n.charCodeAt(s)||0,u=l>=48&&l<=57,f=c>=48&&c<=57;if(u&&(a=10*a+l-48),f&&(o=10*o+c-48),!u||!f){if(a!==o)return a-o;if(l!==c)return l-c}}return o-a};var q=2e9;p.seedPseudoRandom=function(){q=2e9},p.pseudoRandom=function(){var r=q;return 429496729>Math.abs((q=(69069*q+1)%4294967296)-r)?p.pseudoRandom():q/4294967296},p.fillText=function(r,n,i){var a=Array.isArray(i)?function(r){i.push(r)}:function(r){i.text=r},o=p.extractOption(r,n,"htx","hovertext");if(p.isValidTextValue(o))return a(o);var s=p.extractOption(r,n,"tx","text");return p.isValidTextValue(s)?a(s):void 0},p.isValidTextValue=function(r){return r||0===r},p.formatPercent=function(r,n){n=n||0;for(var i=(Math.round(100*r*Math.pow(10,n))*Math.pow(.1,n)).toFixed(n)+"%",a=0;a<n;a++)-1!==i.indexOf(".")&&(i=(i=i.replace("0%","%")).replace(".%","%"));return i},p.isHidden=function(r){var n=window.getComputedStyle(r).display;return!n||"none"===n},p.strTranslate=function(r,n){return r||n?"translate("+r+","+n+")":""},p.strRotate=function(r){return r?"rotate("+r+")":""},p.strScale=function(r){return 1!==r?"scale("+r+")":""},p.getTextTransform=function(r){var n=r.noCenter,i=r.textX,a=r.textY,o=r.targetX,s=r.targetY,l=r.anchorX||0,c=r.anchorY||0,u=r.rotate,f=r.scale;return f?f>1&&(f=1):f=0,p.strTranslate(o-f*(i+l),s-f*(a+c))+p.strScale(f)+(u?"rotate("+u+(n?"":" "+i+" "+a)+")":"")},p.setTransormAndDisplay=function(r,n){r.attr("transform",p.getTextTransform(n)),r.style("display",n.scale?null:"none")},p.ensureUniformFontSize=function(r,n){var i=p.extendFlat({},n);return i.size=Math.max(n.size,r._fullLayout.uniformtext.minsize||0),i},p.join2=function(r,n,i){var a=r.length;return a>1?r.slice(0,-1).join(n)+i+r[a-1]:r.join(n)},p.bigFont=function(r){return Math.round(1.2*r)};var G=p.getFirefoxVersion(),W=null!==G&&G<86;p.getPositionFromD3Event=function(){return W?[a.event.layerX,a.event.layerY]:[a.event.offsetX,a.event.offsetY]}},63620:function(r){r.exports=function(r){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(r):"[object Object]"===Object.prototype.toString.call(r)&&Object.getPrototypeOf(r).hasOwnProperty("hasOwnProperty")}},37804:function(r,n,i){var a=i(22296),o=/^\w*$/;r.exports=function(r,n,i,s){i=i||"name",s=s||"value";var l,c,u,f={};c=n&&n.length?(u=a(r,n)).get():r,n=n||"";var h={};if(c)for(l=0;l<c.length;l++)h[c[l][i]]=l;var p=o.test(s),d={set:function(r,n){var o=null===n?4:0;if(!c){if(!u||4===o)return;c=[],u.set(c)}var l=h[r];if(void 0===l){if(4===o)return;o|=3,l=c.length,h[r]=l}else n!==(p?c[l][s]:a(c[l],s).get())&&(o|=2);var y=c[l]=c[l]||{};return y[i]=r,p?y[s]=n:a(y,s).set(n),null!==n&&(o&=-5),f[l]=f[l]|o,d},get:function(r){if(c){var n=h[r];return void 0===n?void 0:p?c[n][s]:a(c[n],s).get()}},rename:function(r,n){var a=h[r];return void 0===a||(f[a]=1|f[a],h[n]=a,delete h[r],c[a][i]=n),d},remove:function(r){var n=h[r];if(void 0===n)return d;var o=c[n];if(Object.keys(o).length>2)return f[n]=2|f[n],d.set(r,null);if(p){for(l=n;l<c.length;l++)f[l]=3|f[l];for(l=n;l<c.length;l++)h[c[l][i]]--;c.splice(n,1),delete h[r]}else a(o,s).set(null),f[n]=6|f[n];return d},constructUpdate:function(){for(var r,o,l={},u=Object.keys(f),h=0;h<u.length;h++)o=u[h],r=n+"["+o+"]",c[o]?(1&f[o]&&(l[r+"."+i]=c[o][i]),2&f[o]&&(l[r+"."+s]=p?4&f[o]?null:c[o][s]:4&f[o]?null:a(c[o],s).get())):l[r]=null;return l}};return d}},98356:function(r,n,i){var a=i(24040);r.exports=function(r,n){for(var i=r._context.locale,o=0;o<2;o++){for(var s=r._context.locales,l=0;l<2;l++){var c=(s[i]||{}).dictionary;if(c){var u=c[n];if(u)return u}s=a.localeRegistry}var f=i.split("-")[0];if(f===i)break;i=f}return n}},24248:function(r,n,i){var a=i(20556).dfltConfig,o=i(41792),s=r.exports={};s.log=function(){var r;if(a.logging>1){var n=["LOG:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.trace.apply(console,n)}if(a.notifyOnLogging>1){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"long")}},s.warn=function(){var r;if(a.logging>0){var n=["WARN:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.trace.apply(console,n)}if(a.notifyOnLogging>0){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"stick")}},s.error=function(){var r;if(a.logging>0){var n=["ERROR:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.error.apply(console,n)}if(a.notifyOnLogging>0){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"stick")}}},30988:function(r,n,i){var a=i(33428);r.exports=function(r,n,i){var o=r.selectAll("g."+i.replace(/\s/g,".")).data(n,function(r){return r[0].trace.uid});o.exit().remove(),o.enter().append("g").attr("class",i),o.order();var s=r.classed("rangeplot")?"nodeRangePlot3":"node3";return o.each(function(r){r[0][s]=a.select(this)}),o}},52248:function(r,n,i){var a=i(36524);n.init2dArray=function(r,n){for(var i=Array(r),a=0;a<r;a++)i[a]=Array(n);return i},n.transposeRagged=function(r){var n,i,a=0,o=r.length;for(n=0;n<o;n++)a=Math.max(a,r[n].length);var s=Array(a);for(n=0;n<a;n++)for(s[n]=Array(o),i=0;i<o;i++)s[n][i]=r[i][n];return s},n.dot=function(r,i){if(!r.length||!i.length||r.length!==i.length)return null;var a,o,s=r.length;if(r[0].length)for(a=Array(s),o=0;o<s;o++)a[o]=n.dot(r[o],i);else if(i[0].length){var l=n.transposeRagged(i);for(a=Array(l.length),o=0;o<l.length;o++)a[o]=n.dot(r,l[o])}else for(a=0,o=0;o<s;o++)a+=r[o]*i[o];return a},n.translationMatrix=function(r,n){return[[1,0,r],[0,1,n],[0,0,1]]},n.rotationMatrix=function(r){var n=r*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]},n.rotationXYMatrix=function(r,i,a){return n.dot(n.dot(n.translationMatrix(i,a),n.rotationMatrix(r)),n.translationMatrix(-i,-a))},n.apply3DTransform=function(r){return function(){var i=arguments,a=1==arguments.length?i[0]:[i[0],i[1],i[2]||0];return n.dot(r,[a[0],a[1],a[2],1]).slice(0,3)}},n.apply2DTransform=function(r){return function(){var i=arguments;3===i.length&&(i=i[0]);var a=1==arguments.length?i[0]:[i[0],i[1]];return n.dot(r,[a[0],a[1],1]).slice(0,2)}},n.apply2DTransform2=function(r){var i=n.apply2DTransform(r);return function(r){return i(r.slice(0,2)).concat(i(r.slice(2,4)))}},n.convertCssMatrix=function(r){if(r){var n=r.length;if(16===n)return r;if(6===n)return[r[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n.inverseTransformMatrix=function(r){var n=[];return a.invert(n,r),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}},20435:function(r){r.exports={mod:function(r,n){var i=r%n;return i<0?i+n:i},modHalf:function(r,n){return Math.abs(r)>n/2?r-Math.round(r/n)*n:r}}},22296:function(r,n,i){var a=i(38248),o=i(38116).isArrayOrTypedArray;r.exports=function(r,n){if(a(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";var i,s,u,f,h=n.split(".");for(f=0;f<h.length;f++)if("__"===String(h[f]).slice(0,2))throw"bad property string";for(f=0;f<h.length;){if(i=String(h[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])h[f]=i[1];else{if(0!==f)throw"bad property string";h.splice(0,1)}for(s=i[2].substr(1,i[2].length-2).split("]["),u=0;u<s.length;u++)f++,h.splice(f,0,Number(s[u]))}f++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:h,obj:r}:{set:function r(n,i,s){return function(u){var f,h,p=n,d="",y=[[n,d]],g=l(u,s);for(h=0;h<i.length-1;h++){if("number"==typeof(f=i[h])&&!o(p))throw"array index but container is not an array";if(-1===f){if(g=!function(n,i,a,s){var u,f=o(a),h=!0,p=a,d=s.replace("-1",0),y=!f&&l(a,d),g=i[0];for(u=0;u<n.length;u++)d=s.replace("-1",u),f&&(y=l(p=a[u%a.length],d)),y&&(h=!1),c(n,u,g,y)&&r(n[u],i,s.replace("-1",u))(p);return h}(p,i.slice(h+1),u,s))break;return}if(!c(p,f,i[h+1],g))break;if("object"!=typeof(p=p[f])||null===p)throw"container is not an object";d=function(r,n){var i=n;return a(n)?i="["+n+"]":r&&(i="."+n),r+i}(d,f),y.push([p,d])}if(g){if(h===i.length-1&&(delete p[i[h]],Array.isArray(p)&&+i[h]==p.length-1))for(;p.length&&void 0===p[p.length-1];)p.pop()}else p[i[h]]=u}}(r,h,n),get:function r(n,i){return function(){var a,s,l,c,u,f=n;for(c=0;c<i.length-1;c++){if(-1===(a=i[c])){for(s=!0,l=[],u=0;u<f.length;u++)l[u]=r(f[u],i.slice(c+1))(),l[u]!==l[0]&&(s=!1);return s?l[0]:l}if("number"==typeof a&&!o(f)||"object"!=typeof(f=f[a])||null===f)return}if("object"==typeof f&&null!==f&&null!==(l=f[i[c]]))return l}}(r,h),astr:n,parts:h,obj:r}};var s=/(^|\.)args\[/;function l(r,n){return void 0===r||null===r&&!n.match(s)}function c(r,n,i,a){if(void 0===r[n]){if(a)return!1;r[n]="number"==typeof i?[]:{}}return!0}},16628:function(r){r.exports=function(){}},41792:function(r,n,i){var a=i(33428),o=i(38248),s=[];r.exports=function(r,n){if(-1===s.indexOf(r)){s.push(r);var i=1e3;o(n)?i=n:"long"===n&&(i=3e3);var l=a.select("body").selectAll(".plotly-notifier").data([0]);l.enter().append("div").classed("plotly-notifier",!0),l.selectAll(".notifier-note").data(s).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var o=a.select(this);o.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){o.transition().call(c)});for(var s=o.append("p"),l=r.split(/<br\s*\/?>/g),u=0;u<l.length;u++)u&&s.append("br"),s.append("span").text(l[u]);"stick"===n?o.transition().duration(350).style("opacity",1):o.transition().duration(700).style("opacity",1).transition().delay(i).call(c)})}function c(r){r.duration(700).style("opacity",0).each("end",function(r){var n=s.indexOf(r);-1!==n&&s.splice(n,1),a.select(this).remove()})}}},72213:function(r,n,i){var a=i(93972),o="data-savedcursor";r.exports=function(r,n){var i=r.attr(o);if(n){if(!i){for(var s=(r.attr("class")||"").split(" "),l=0;l<s.length;l++){var c=s[l];0===c.indexOf("cursor-")&&r.attr(o,c.substr(7)).classed(c,!1)}r.attr(o)||r.attr(o,"!!")}a(r,n)}else i&&(r.attr(o,null),"!!"===i?a(r):a(r,i))}},92065:function(r,n,i){var a=i(52248).dot,o=i(39032).BADNUM,s=r.exports={};s.tester=function(r){var n,i=r.slice(),a=i[0][0],s=a,l=i[0][1],c=l;for(i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),n=1;n<i.length;n++)a=Math.min(a,i[n][0]),s=Math.max(s,i[n][0]),l=Math.min(l,i[n][1]),c=Math.max(c,i[n][1]);var u,f=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(f=!0,u=function(r){return r[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(f=!0,u=function(r){return r[1]===i[0][1]}));var h=!0,p=i[0];for(n=1;n<i.length;n++)if(p[0]!==i[n][0]||p[1]!==i[n][1]){h=!1;break}return{xmin:a,xmax:s,ymin:l,ymax:c,pts:i,contains:f?function(r,n){var i=r[0],f=r[1];return!(i===o||i<a||i>s||f===o||f<l||f>c||n&&u(r))}:function(r,n){var u=r[0],f=r[1];if(u===o||u<a||u>s||f===o||f<l||f>c)return!1;var h,p,d,y,g,v=i.length,m=i[0][0],x=i[0][1],b=0;for(h=1;h<v;h++)if(p=m,d=x,m=i[h][0],x=i[h][1],!(u<(y=Math.min(p,m))||u>Math.max(p,m)||f>Math.max(d,x))){if(f<Math.min(d,x))u!==y&&b++;else{if(f===(g=m===p?f:d+(u-p)*(x-d)/(m-p)))return 1!==h||!n;f<=g&&u!==y&&b++}}return b%2==1},isRect:f,degenerate:h}},s.isSegmentBent=function(r,n,i,o){var s,l,c,u=r[n],f=[r[i][0]-u[0],r[i][1]-u[1]],h=a(f,f),p=Math.sqrt(h),d=[-f[1]/p,f[0]/p];for(s=n+1;s<i;s++)if((c=a(l=[r[s][0]-u[0],r[s][1]-u[1]],f))<0||c>h||Math.abs(a(l,d))>o)return!0;return!1},s.filter=function(r,n){var i=[r[0]],a=0,o=0;function l(l){r.push(l);var c=i.length,u=a;i.splice(o+1);for(var f=u+1;f<r.length;f++)(f===r.length-1||s.isSegmentBent(r,u,f+1,n))&&(i.push(r[f]),i.length<c-2&&(a=f,o=i.length-1),u=f)}return r.length>1&&l(r.pop()),{addPt:l,raw:r,filtered:i}}},5048:function(r,n,i){var a=i(16576),o=i(28624);r.exports=function(r,n,s){var l=r._fullLayout,c=!0;return l._glcanvas.each(function(a){if(a.regl)a.regl.preloadCachedCode(s);else if(!a.pick||l._has("parcoords")){try{a.regl=o({canvas:this,attributes:{antialias:!a.pick,preserveDrawingBuffer:!0},pixelRatio:r._context.plotGlPixelRatio||i.g.devicePixelRatio,extensions:n||[],cachedCode:s||{}})}catch(r){c=!1}a.regl||(c=!1),c&&this.addEventListener("webglcontextlost",function(n){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:n,layer:a.key})},!1)}}),c||a({container:l._glcontainer.node()}),c}},34296:function(r,n,i){var a=i(38248),o=i(25928);r.exports=function(r){if("string"!=typeof(i=r&&r.hasOwnProperty("userAgent")?r.userAgent:("undefined"!=typeof navigator&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var n,i,s=o({ua:{headers:{"user-agent":i}},tablet:!0,featureDetect:!1});if(!s){for(var l=i.split(" "),c=1;c<l.length;c++)if(-1!==l[c].indexOf("Safari"))for(var u=c-1;u>-1;u--){var f=l[u];if("Version/"===f.substr(0,8)){var h=f.substr(8).split(".")[0];if(a(h)&&(h=+h),h>=13)return!0}}}return s}},52416:function(r){r.exports=function(r,n){if(n instanceof RegExp){for(var i=n.toString(),a=0;a<r.length;a++)if(r[a]instanceof RegExp&&r[a].toString()===i)return r;r.push(n)}else(n||0===n)&&-1===r.indexOf(n)&&r.push(n);return r}},94552:function(r,n,i){var a=i(3400),o=i(20556).dfltConfig,s={add:function(r,n,i,a,s){var l,c;r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},c=r.undoQueue.index,r.autoplay?r.undoQueue.inSequence||(r.autoplay=!1):(!r.undoQueue.sequence||r.undoQueue.beginSequence?(l={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},r.undoQueue.queue.splice(c,r.undoQueue.queue.length-c,l),r.undoQueue.index+=1):l=r.undoQueue.queue[c-1],r.undoQueue.beginSequence=!1,l&&(l.undo.calls.unshift(n),l.undo.args.unshift(i),l.redo.calls.push(a),l.redo.args.push(s)),r.undoQueue.queue.length>o.queueLength&&(r.undoQueue.queue.shift(),r.undoQueue.index--))},startSequence:function(r){r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},r.undoQueue.sequence=!0,r.undoQueue.beginSequence=!0},stopSequence:function(r){r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},r.undoQueue.sequence=!1,r.undoQueue.beginSequence=!1},undo:function(r){var n,i;if(!(void 0===r.undoQueue||isNaN(r.undoQueue.index)||r.undoQueue.index<=0)){for(r.undoQueue.index--,n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.undo.calls.length;i++)s.plotDo(r,n.undo.calls[i],n.undo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1}},redo:function(r){var n,i;if(!(void 0===r.undoQueue||isNaN(r.undoQueue.index)||r.undoQueue.index>=r.undoQueue.queue.length)){for(n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.redo.calls.length;i++)s.plotDo(r,n.redo.calls[i],n.redo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1,r.undoQueue.index++}},plotDo:function(r,n,i){r.autoplay=!0,i=function(r,n){for(var i,o=[],s=0;s<n.length;s++)i=n[s],o[s]=i===r?i:"object"==typeof i?Array.isArray(i)?a.extendDeep([],i):a.extendDeepAll({},i):i;return o}(r,i),n.apply(null,i)}};r.exports=s},53756:function(r,n){n.counter=function(r,n,i,a){var o=(n||"")+(i?"":"$"),s=!1===a?"":"^";return"xy"===r?RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+o):RegExp(s+r+"([2-9]|[1-9][0-9]+)?"+o)}},23193:function(r){var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;r.exports=function(r,a){for(;a;){var o=r.match(n);if(o)r=o[1];else{if(!r.match(i))throw Error("bad relativeAttr call:"+[r,a]);r=""}if("^"!==a.charAt(0))break;a=a.slice(1)}return r&&"["!==a.charAt(0)?r+"."+a:r+a}},51528:function(r,n,i){var a=i(38116).isArrayOrTypedArray,o=i(63620);r.exports=function r(n,i){for(var s in i){var l=i[s],c=n[s];if(c!==l){if("_"===s.charAt(0)||"function"==typeof l){if(s in n)continue;n[s]=l}else if(a(l)&&a(c)&&o(l[0])){if("customdata"===s||"ids"===s)continue;for(var u=Math.min(l.length,c.length),f=0;f<u;f++)c[f]!==l[f]&&o(l[f])&&o(c[f])&&r(c[f],l[f])}else o(l)&&o(c)&&(r(c,l),Object.keys(c).length||delete n[s])}}}},14952:function(r,n,i){var a=i(38248),o=i(24248),s=i(35536),l=i(39032).BADNUM;function c(r,n){return r<n}function u(r,n){return r<=n}function f(r,n){return r>n}function h(r,n){return r>=n}n.findBin=function(r,n,i){if(a(n.start))return i?Math.ceil((r-n.start)/n.size-1e-9)-1:Math.floor((r-n.start)/n.size+1e-9);var s,l,p=0,d=n.length,y=0,g=d>1?(n[d-1]-n[0])/(d-1):1;for(l=g>=0?i?c:u:i?h:f,r+=1e-9*g*(i?-1:1)*(g>=0?1:-1);p<d&&y++<100;)l(n[s=Math.floor((p+d)/2)],r)?p=s+1:d=s;return y>90&&o.log("Long binary search..."),p-1},n.sorterAsc=function(r,n){return r-n},n.sorterDes=function(r,n){return n-r},n.distinctVals=function(r){var i,a=r.slice();for(a.sort(n.sorterAsc),i=a.length-1;i>-1&&a[i]===l;i--);for(var o,s=a[i]-a[0]||1,c=s/(i||1)/1e4,u=[],f=0;f<=i;f++){var h=a[f],p=h-o;void 0===o?(u.push(h),o=h):p>c&&(s=Math.min(s,p),u.push(h),o=h)}return{vals:u,minDiff:s}},n.roundUp=function(r,n,i){for(var a,o=0,s=n.length-1,l=0,c=i?0:1,u=i?1:0,f=i?Math.ceil:Math.floor;o<s&&l++<100;)n[a=f((o+s)/2)]<=r?o=a+c:s=a-u;return n[o]},n.sort=function(r,n){for(var i=0,a=0,o=1;o<r.length;o++){var s=n(r[o],r[o-1]);if(s<0?i=1:s>0&&(a=1),i&&a)return r.sort(n)}return a?r:r.reverse()},n.findIndexOfMin=function(r,n){n=n||s;for(var i,a=1/0,o=0;o<r.length;o++){var l=n(r[o]);l<a&&(a=l,i=o)}return i}},93972:function(r){r.exports=function(r,n){(r.attr("class")||"").split(" ").forEach(function(n){0===n.indexOf("cursor-")&&r.classed(n,!1)}),n&&r.classed("cursor-"+n,!0)}},16576:function(r,n,i){var a=i(76308),o=function(){};r.exports=function(r){for(var n in r)"function"==typeof r[n]&&(r[n]=o);r.destroy=function(){r.container.parentNode.removeChild(r.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=a.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=a.lightLine,i.style["z-index"]=30;var s=document.createElement("p");return s.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",s.style.position="relative",s.style.top="50%",s.style.left="50%",s.style.height="30%",s.style.width="50%",s.style.margin="-15% 0 0 -25%",i.appendChild(s),r.container.appendChild(i),r.container.style.background="#FFFFFF",r.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(r){r.exports=function(r){return Object.keys(r).sort()}},63084:function(r,n,i){var a=i(38248),o=i(38116).isArrayOrTypedArray;n.aggNums=function(r,i,s,l){var c,u;if((!l||l>s.length)&&(l=s.length),a(i)||(i=!1),o(s[0])){for(u=Array(l),c=0;c<l;c++)u[c]=n.aggNums(r,i,s[c]);s=u}for(c=0;c<l;c++)a(i)?a(s[c])&&(i=r(+i,+s[c])):i=s[c];return i},n.len=function(r){return n.aggNums(function(r){return r+1},0,r)},n.mean=function(r,i){return i||(i=n.len(r)),n.aggNums(function(r,n){return r+n},0,r)/i},n.geometricMean=function(r,i){return i||(i=n.len(r)),Math.pow(n.aggNums(function(r,n){return r*n},1,r),1/i)},n.midRange=function(r){if(void 0!==r&&0!==r.length)return(n.aggNums(Math.max,null,r)+n.aggNums(Math.min,null,r))/2},n.variance=function(r,i,o){return i||(i=n.len(r)),a(o)||(o=n.mean(r,i)),n.aggNums(function(r,n){return r+Math.pow(n-o,2)},0,r)/i},n.stdev=function(r,i,a){return Math.sqrt(n.variance(r,i,a))},n.median=function(r){var i=r.slice().sort();return n.interp(i,.5)},n.interp=function(r,n){if(!a(n))throw"n should be a finite number";if((n=n*r.length-.5)<0)return r[0];if(n>r.length-1)return r[r.length-1];var i=n%1;return i*r[Math.ceil(n)]+(1-i)*r[Math.floor(n)]}},43080:function(r,n,i){var a=i(72160);r.exports=function(r){return r?a(r):[0,0,0,1]}},9188:function(r,n,i){var a=i(2264),o=i(43616),s=i(3400),l=null;r.exports=function(){if(null!==l)return l;l=!1;var r=s.isIE()||s.isSafari()||s.isIOS();if(window.navigator.userAgent&&!r){var n=Array.from(a.CSS_DECLARATIONS).reverse(),i=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof i)l=n.some(function(r){return i.apply(null,r)});else{var c=o.tester.append("image").attr("style",a.STYLE),u=window.getComputedStyle(c.node()).imageRendering;l=n.some(function(r){var n=r[1];return u===n||u===n.toLowerCase()}),c.remove()}}return l}},72736:function(r,n,i){var a=i(33428),o=i(3400),s=o.strTranslate,l=i(9616),c=i(84284).LINE_SPACING,u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(r,i,m){var I=r.text(),L=!r.attr("data-notex")&&i&&i._context.typesetMath&&"undefined"!=typeof MathJax&&I.match(u),D=a.select(r.node().parentNode);if(!D.empty()){var P=r.attr("class")?r.attr("class").split(" ")[0]:"text";return P+="-math",D.selectAll("svg."+P).remove(),D.selectAll("g."+P+"-group").remove(),r.style("display",null).attr({"data-unformatted":I,"data-math":"N"}),L?(i&&i._promises||[]).push(new Promise(function(n){r.style("display","none");var i=parseInt(r.node().style.fontSize,10);!function(r,n,i){var s,l,c,u,d=parseInt((MathJax.version||"").split(".")[0]);if(2===d||3===d){var y=function(){var i="math-output-"+o.randstr({},64),s=(u=a.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute","font-size":n.fontSize+"px"}).text(r.replace(f,"\\lt ").replace(h,"\\gt "))).node();return 2===d?MathJax.Hub.Typeset(s):MathJax.typeset([s])},g=function(){var n=u.select(2===d?".MathJax_SVG":".MathJax"),s=!n.empty()&&u.select("svg").node();if(s){var l,c=s.getBoundingClientRect();l=2===d?a.select("body").select("#MathJax_SVG_glyphs"):n.select("defs"),i(n,l,c)}else o.log("There was an error in the tex syntax.",r),i();u.remove()};2===d?MathJax.Hub.Queue(function(){return l=o.extendDeepAll({},MathJax.Hub.config),c=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:p},displayAlign:"left"})},function(){if("SVG"!==(s=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},y,g,function(){if("SVG"!==s)return MathJax.Hub.setRenderer(s)},function(){return void 0!==c&&(MathJax.Hub.processSectionDelay=c),MathJax.Hub.Config(l)}):3===d&&(l=o.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=p,"svg"!==(s=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){y(),g(),"svg"!==s&&(MathJax.config.startup.output=s),MathJax.config=l}))}else o.warn("No MathJax version:",MathJax.version)}(L[2],{fontSize:i},function(a,o,l){D.selectAll("svg."+P).remove(),D.selectAll("g."+P+"-group").remove();var c=a&&a.select("svg");if(!c||!c.node())return B(),void n();var u=D.append("g").classed(P+"-group",!0).attr({"pointer-events":"none","data-unformatted":I,"data-math":"Y"});u.node().appendChild(c.node()),o&&o.node()&&c.node().insertBefore(o.node().cloneNode(!0),c.node().firstChild);var f=l.width,h=l.height;c.attr({class:P,height:h,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var p=r.node().style.fill||"black",d=c.select("g");d.attr({fill:p,stroke:p});var y=d.node().getBoundingClientRect(),g=y.width,v=y.height;(g>f||v>h)&&(c.style("overflow","hidden"),g=(y=c.node().getBoundingClientRect()).width,v=y.height);var x=+r.attr("x"),b=+r.attr("y"),_=-(i||r.node().getBoundingClientRect().height)/4;if("y"===P[0])u.attr({transform:"rotate("+[-90,x,b]+")"+s(-g/2,_-v/2)});else if("l"===P[0])b=_-v/2;else if("a"===P[0]&&0!==P.indexOf("atitle"))x=0,b=_;else{var w=r.attr("text-anchor");x-=g*("middle"===w?.5:"end"===w?1:0),b=b+_-v/2}c.attr({x:x,y:b}),m&&m.call(r,u),n(u)})})):B(),r}function B(){D.empty()||(P=r.attr("class")+"-math",D.select("svg."+P).remove()),r.text("").style("white-space","pre"),function(r,n){n=n.replace(x," ");var i,s=!1,u=[],f=-1;function h(){f++;var n=document.createElementNS(l.svg,"tspan");a.select(n).attr({class:"line",dy:f*c+"em"}),r.appendChild(n),i=n;var o=u;if(u=[{node:n}],o.length>1)for(var s=1;s<o.length;s++)p(o[s])}function p(r){var n,o=r.type,s={};if("a"===o){n="a";var c=r.target,f=r.href,h=r.popup;f&&(s={"xlink:xlink:show":"_blank"===c||"_"!==c.charAt(0)?"new":"replace",target:c,"xlink:xlink:href":f},h&&(s.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+h+'");return false;'))}else n="tspan";r.style&&(s.style=r.style);var p=document.createElementNS(l.svg,n);if("sup"===o||"sub"===o){m(i,v),i.appendChild(p);var d=document.createElementNS(l.svg,"tspan");m(d,v),a.select(d).attr("dy",g[o]),s.dy=y[o],i.appendChild(p),i.appendChild(d)}else i.appendChild(p);a.select(p).attr(s),i=r.node=p,u.push(r)}function m(r,n){r.appendChild(document.createTextNode(n))}w.test(n)?h():(i=r,u=[{node:r}]);for(var I=n.split(b),L=0;L<I.length;L++){var D=I[L],P=D.match(_),B=P&&P[2].toLowerCase(),R=d[B];if("br"===B)h();else if(void 0===R)m(i,C(D));else if(P[1])!function(r){if(1!==u.length){var a=u.pop();r!==a.type&&o.log("Start tag <"+a.type+"> doesnt match end tag <"+r+">. Pretending it did match.",n),i=u[u.length-1].node}else o.log("Ignoring unexpected end tag </"+r+">.",n)}(B);else{var z=P[4],F={type:B},N=S(z,T);if(N?(N=N.replace(E,"$1 fill:"),R&&(N+=";"+R)):R&&(N=R),N&&(F.style=N),"a"===B){s=!0;var U=S(z,A);if(U){var j=O(U);j&&(F.href=j,F.target=S(z,k)||"_blank",F.popup=S(z,M))}}p(F)}}return s}(r.node(),I)&&r.style("pointer-events","all"),n.positionText(r),m&&m.call(r)}};var f=/(<|&lt;|&#60;)/g,h=/(>|&gt;|&#62;)/g,p=[["$","$"],["\\(","\\)"]],d={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},y={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},v="​",m=["http:","https:","mailto:","",void 0,":"],x=n.NEWLINES=/(\r\n?|\n)/g,b=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,w=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,A=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,k=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,M=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(r,n){if(!r)return null;var i=r.match(n),a=i&&(i[3]||i[4]);return a&&C(a)}var E=/(^|;)\s*color:/;n.plainText=function(r,n){for(var i=void 0!==(n=n||{}).len&&-1!==n.len?n.len:1/0,a=void 0!==n.allowedTags?n.allowedTags:["br"],o=r.split(b),s=[],l="",c=0,u=0;u<o.length;u++){var f=o[u],h=f.match(_),p=h&&h[2].toLowerCase();if(p)-1!==a.indexOf(p)&&(s.push(f),l=p);else{var d=f.length;if(c+d<i)s.push(f),c+=d;else if(c<i){var y=i-c;l&&("br"!==l||y<=3||d<=3)&&s.pop(),i>3?s.push(f.substr(0,y-3)+"..."):s.push(f.substr(0,y));break}l=""}}return s.join("")};var I={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(r){return r.replace(L,function(r,n){return("#"===n.charAt(0)?function(r){if(!(r>1114111)){var n=String.fromCodePoint;if(n)return n(r);var i=String.fromCharCode;return r<=65535?i(r):i(55232+(r>>10),r%1024+56320)}}("x"===n.charAt(1)?parseInt(n.substr(2),16):parseInt(n.substr(1),10)):I[n])||r})}function O(r){var n=encodeURI(decodeURI(r)),i=document.createElement("a"),a=document.createElement("a");i.href=r,a.href=n;var o=i.protocol,s=a.protocol;return -1!==m.indexOf(o)&&-1!==m.indexOf(s)?n:""}function D(r,n,i){var a,s,l,c=i.horizontalAlign,u=i.verticalAlign||"top",f=r.node().getBoundingClientRect(),h=n.node().getBoundingClientRect();return s="bottom"===u?function(){return f.bottom-a.height}:"middle"===u?function(){return f.top+(f.height-a.height)/2}:function(){return f.top},l="right"===c?function(){return f.right-a.width}:"center"===c?function(){return f.left+(f.width-a.width)/2}:function(){return f.left},function(){a=this.node().getBoundingClientRect();var r=l()-h.left,n=s()-h.top,c=i.gd||{};if(i.gd){c._fullLayout._calcInverseTransform(c);var u=o.apply3DTransform(c._fullLayout._invTransform)(r,n);r=u[0],n=u[1]}return this.style({top:n+"px",left:r+"px","z-index":1e3}),this}}n.convertEntities=C,n.sanitizeHTML=function(r){r=r.replace(x," ");for(var n=document.createElement("p"),i=n,o=[],s=r.split(b),l=0;l<s.length;l++){var c=s[l],u=c.match(_),f=u&&u[2].toLowerCase();if(f in d){if(u[1])o.length&&(i=o.pop());else{var h=u[4],p=S(h,T),y=p?{style:p}:{};if("a"===f){var g=S(h,A);if(g){var v=O(g);if(v){y.href=v;var m=S(h,k);m&&(y.target=m)}}}var w=document.createElement(f);i.appendChild(w),a.select(w).attr(y),i=w,o.push(w)}}else i.appendChild(document.createTextNode(C(c)))}return n.innerHTML},n.lineCount=function(r){return r.selectAll("tspan.line").size()||1},n.positionText=function(r,n,i){return r.each(function(){var r=a.select(this);function o(n,i){return void 0===i?null===(i=r.attr(n))&&(r.attr(n,0),i=0):r.attr(n,i),i}var s=o("x",n),l=o("y",i);"text"===this.nodeName&&r.selectAll("tspan.line").attr({x:s,y:l})})};var P="1px ";n.makeTextShadow=function(r){return P+P+P+r+", -"+P+"-"+P+P+r+", "+P+"-"+P+P+r+", -"+P+P+P+r},n.makeEditable=function(r,n){var i=n.gd,o=n.delegate,s=a.dispatch("edit","input","cancel"),l=o||r;if(r.style({"pointer-events":o?"none":"all"}),1!==r.size())throw Error("boo");function c(){c=(o=a.select(i).select(".svg-container")).append("div"),h=parseFloat((f=r.node().style).fontSize||12),void 0===(p=n.text)&&(p=r.attr("data-unformatted")),c.classed("plugin-editable editable",!0).style({position:"absolute","font-family":f.fontFamily||"Arial","font-size":h,color:n.fill||f.fill||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-h/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(p).call(D(r,o,n)).on("blur",function(){i._editing=!1,r.text(this.textContent).style({opacity:1});var n,o=a.select(this).attr("class");(n=o?"."+o.split(" ")[0]+"-math-group":"[class*=-math-group]")&&a.select(r.node().parentNode).select(n).style({opacity:0});var l=this.textContent;a.select(this).transition().duration(0).remove(),a.select(document).on("mouseup",null),s.edit.call(r,l)}).on("focus",function(){var r=this;i._editing=!0,a.select(document).on("mouseup",function(){if(a.event.target===r)return!1;document.activeElement===c.node()&&c.node().blur()})}).on("keyup",function(){27===a.event.which?(i._editing=!1,r.style({opacity:1}),a.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),s.cancel.call(r,this.textContent)):(s.input.call(r,this.textContent),a.select(this).call(D(r,o,n)))}).on("keydown",function(){13===a.event.which&&this.blur()}).call(u),r.style({opacity:0});var o,c,f,h,p,d,y=l.attr("class");(d=y?"."+y.split(" ")[0]+"-math-group":"[class*=-math-group]")&&a.select(r.node().parentNode).select(d).style({opacity:0})}function u(r){var n=r.node(),i=document.createRange();i.selectNodeContents(n);var a=window.getSelection();a.removeAllRanges(),a.addRange(i),n.focus()}return n.immediate?c():l.on("click",c),a.rebind(r,s,"on")}},91200:function(r,n){var i={};function a(r){r&&null!==r.timer&&(clearTimeout(r.timer),r.timer=null)}n.throttle=function(r,n,o){var s=i[r],l=Date.now();if(!s){for(var c in i)i[c].ts<l-6e4&&delete i[c];s=i[r]={ts:0,timer:null}}function u(){o(),s.ts=Date.now(),s.onDone&&(s.onDone(),s.onDone=null)}a(s),l>s.ts+n?u():s.timer=setTimeout(function(){u(),s.timer=null},n)},n.done=function(r){var n=i[r];return n&&n.timer?new Promise(function(r){var i=n.onDone;n.onDone=function(){i&&i(),r(),n.onDone=null}}):Promise.resolve()},n.clear=function(r){if(r)a(i[r]),delete i[r];else for(var o in i)n.clear(o)}},36896:function(r,n,i){var a=i(38248);r.exports=function(r,n){if(r>0)return Math.log(r)/Math.LN10;var i=Math.log(Math.min(n[0],n[1]))/Math.LN10;return a(i)||(i=Math.log(Math.max(n[0],n[1]))/Math.LN10-6),i}},59972:function(r,n,i){var a=r.exports={},o=i(79552).locationmodeToLayer,s=i(55712).NO;a.getTopojsonName=function(r){return[r.scope.replace(/ /g,"-"),"_",r.resolution.toString(),"m"].join("")},a.getTopojsonPath=function(r,n){return r+n+".json"},a.getTopojsonFeatures=function(r,n){var i=o[r.locationmode],a=n.objects[i];return s(n,a).features}},11680:function(r){r.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(r){r.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(r,n,i){var a=i(24040);r.exports=function(r){for(var n,i,o=a.layoutArrayContainers,s=a.layoutArrayRegexes,l=r.split("[")[0],c=0;c<s.length;c++)if((i=r.match(s[c]))&&0===i.index){n=i[0];break}if(n||(n=o[o.indexOf(l)]),!n)return!1;var u=r.substr(n.length);return u?!!(i=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:n,index:Number(i[1]),property:i[3]||""}:{array:n,index:"",property:""}}},67824:function(r,n,i){var a=i(92880).extendFlat,o=i(63620),s={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},l={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},c=s.flags.slice().concat(["fullReplot"]),u=l.flags.slice().concat("layoutReplot");function f(r){for(var n={},i=0;i<r.length;i++)n[r[i]]=!1;return n}r.exports={traces:s,layout:l,traceFlags:function(){return f(c)},layoutFlags:function(){return f(u)},update:function(r,n){var i=n.editType;if(i&&"none"!==i)for(var a=i.split("+"),o=0;o<a.length;o++)r[a[o]]=!0},overrideAll:function r(n,i,s){var l=a({},n);for(var c in l){var u=l[c];o(u)&&(l[c]=function n(i,o,s,l){if(i.valType){var c=a({},i);if(c.editType=o,Array.isArray(i.items)){c.items=Array(i.items.length);for(var u=0;u<i.items.length;u++)c.items[u]=n(i.items[u],o)}return c}return r(i,o,"_"===l.charAt(0)?"nested":"from-root")}(u,i,0,c))}return"from-root"===s&&(l.editType=i),l}}},93404:function(r,n,i){var a=i(38248),o=i(61784),s=i(24040),l=i(3400),c=i(7316),u=i(79811),f=i(76308),h=u.cleanId,p=u.getFromTrace,d=s.traceIs;function y(r,n){var i=r[n],a=n.charAt(0);i&&"paper"!==i&&(r[n]=h(i,a,!0))}function g(r){function n(n,i){var a=r[n],o=r.title&&r.title[i];a&&!o&&(r.title||(r.title={}),r.title[i]=r[n],delete r[n])}r&&("string"!=typeof r.title&&"number"!=typeof r.title||(r.title={text:r.title}),n("titlefont","font"),n("titleposition","position"),n("titleside","side"),n("titleoffset","offset"))}function v(r){if(!l.isPlainObject(r))return!1;var n=r.name;return delete r.name,delete r.showlegend,("string"==typeof n||"number"==typeof n)&&String(n)}function m(r){var n="middle",i="center";return"string"==typeof r&&(-1!==r.indexOf("top")?n="top":-1!==r.indexOf("bottom")&&(n="bottom"),-1!==r.indexOf("left")?i="left":-1!==r.indexOf("right")&&(i="right")),n+" "+i}function x(r,n){return n in r&&"object"==typeof r[n]&&0===Object.keys(r[n]).length}n.clearPromiseQueue=function(r){Array.isArray(r._promises)&&r._promises.length>0&&l.log("Clearing previous rejected promises from queue."),r._promises=[]},n.cleanLayout=function(r){r||(r={}),r.xaxis1&&(r.xaxis||(r.xaxis=r.xaxis1),delete r.xaxis1),r.yaxis1&&(r.yaxis||(r.yaxis=r.yaxis1),delete r.yaxis1),r.scene1&&(r.scene||(r.scene=r.scene1),delete r.scene1);var i,a,s=(c.subplotsRegistry.cartesian||{}).attrRegex,u=(c.subplotsRegistry.polar||{}).attrRegex,p=(c.subplotsRegistry.ternary||{}).attrRegex,d=(c.subplotsRegistry.gl3d||{}).attrRegex,v=Object.keys(r);for(i=0;i<v.length;i++){var m=v[i];if(s&&s.test(m)){var b=r[m];b.anchor&&"free"!==b.anchor&&(b.anchor=h(b.anchor)),b.overlaying&&(b.overlaying=h(b.overlaying)),b.type||(b.isdate?b.type="date":b.islog?b.type="log":!1===b.isdate&&!1===b.islog&&(b.type="linear")),"withzero"!==b.autorange&&"tozero"!==b.autorange||(b.autorange=!0,b.rangemode="tozero"),b.insiderange&&delete b.range,delete b.islog,delete b.isdate,delete b.categories,x(b,"domain")&&delete b.domain,void 0!==b.autotick&&(void 0===b.tickmode&&(b.tickmode=b.autotick?"auto":"linear"),delete b.autotick),g(b)}else if(u&&u.test(m))g(r[m].radialaxis);else if(p&&p.test(m)){var _=r[m];g(_.aaxis),g(_.baxis),g(_.caxis)}else if(d&&d.test(m)){var w=r[m],T=w.cameraposition;if(Array.isArray(T)&&4===T[0].length){var A=T[0],k=T[1],M=T[2],S=o([],A),E=[];for(a=0;a<3;++a)E[a]=k[a]+M*S[2+4*a];w.camera={eye:{x:E[0],y:E[1],z:E[2]},center:{x:k[0],y:k[1],z:k[2]},up:{x:0,y:0,z:1}},delete w.cameraposition}g(w.xaxis),g(w.yaxis),g(w.zaxis)}}var I=Array.isArray(r.annotations)?r.annotations.length:0;for(i=0;i<I;i++){var L=r.annotations[i];l.isPlainObject(L)&&(L.ref&&("paper"===L.ref?(L.xref="paper",L.yref="paper"):"data"===L.ref&&(L.xref="x",L.yref="y"),delete L.ref),y(L,"xref"),y(L,"yref"))}var C=Array.isArray(r.shapes)?r.shapes.length:0;for(i=0;i<C;i++){var O=r.shapes[i];l.isPlainObject(O)&&(y(O,"xref"),y(O,"yref"))}var D=Array.isArray(r.images)?r.images.length:0;for(i=0;i<D;i++){var P=r.images[i];l.isPlainObject(P)&&(y(P,"xref"),y(P,"yref"))}var B=r.legend;return B&&(B.x>3?(B.x=1.02,B.xanchor="left"):B.x<-2&&(B.x=-.02,B.xanchor="right"),B.y>3?(B.y=1.02,B.yanchor="bottom"):B.y<-2&&(B.y=-.02,B.yanchor="top")),g(r),"rotate"===r.dragmode&&(r.dragmode="orbit"),f.clean(r),r.template&&r.template.layout&&n.cleanLayout(r.template.layout),r},n.cleanData=function(r){for(var i=0;i<r.length;i++){var a,o=r[i];if("histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var u=f.defaults,p=o.error_y.color||(d(o,"bar")?f.defaultLine:u[i%u.length]);o.error_y.color=f.addOpacity(f.rgb(p),f.opacity(p)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"===o.bardir&&(d(o,"bar")||"histogram"===o.type.substr(0,9))&&(o.orientation="h",n.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&n.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&!("colorscale"in o)&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&!("reversescale"in o)&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=h(o.xaxis,"x")),o.yaxis&&(o.yaxis=h(o.yaxis,"y")),d(o,"gl3d")&&o.scene&&(o.scene=c.subplotsRegistry.gl3d.cleanId(o.scene)),!d(o,"pie-like")&&!d(o,"bar-like")){if(Array.isArray(o.textposition))for(a=0;a<o.textposition.length;a++)o.textposition[a]=m(o.textposition[a]);else o.textposition&&(o.textposition=m(o.textposition))}var y=s.getModule(o);if(y&&y.colorbar){var b=y.colorbar.container,_=b?o[b]:o;_&&_.colorscale&&("YIGnBu"===_.colorscale&&(_.colorscale="YlGnBu"),"YIOrRd"===_.colorscale&&(_.colorscale="YlOrRd"))}if("surface"===o.type&&l.isPlainObject(o.contours)){var w=["x","y","z"];for(a=0;a<w.length;a++){var T=o.contours[w[a]];l.isPlainObject(T)&&(T.highlightColor&&(T.highlightcolor=T.highlightColor,delete T.highlightColor),T.highlightWidth&&(T.highlightwidth=T.highlightWidth,delete T.highlightWidth))}}if("candlestick"===o.type||"ohlc"===o.type){var A=!1!==(o.increasing||{}).showlegend,k=!1!==(o.decreasing||{}).showlegend,M=v(o.increasing),S=v(o.decreasing);if(!1!==M&&!1!==S){var E=function(r,n,i,a){if(i&&!a)return r;if(a&&!i||!r.trim())return n;if(!n.trim())return r;var o,s=Math.min(r.length,n.length);for(o=0;o<s&&r.charAt(o)===n.charAt(o);o++);return r.substr(0,o).trim()}(M,S,A,k);E&&(o.name=E)}else(M||S)&&!o.name&&(o.name=M||S)}if(Array.isArray(o.transforms)){var I=o.transforms;for(a=0;a<I.length;a++){var L=I[a];if(l.isPlainObject(L))switch(L.type){case"filter":L.filtersrc&&(L.target=L.filtersrc,delete L.filtersrc),L.calendar&&(L.valuecalendar||(L.valuecalendar=L.calendar),delete L.calendar);break;case"groupby":if(L.styles=L.styles||L.style,L.styles&&!Array.isArray(L.styles)){var C=L.styles,O=Object.keys(C);L.styles=[];for(var D=0;D<O.length;D++)L.styles.push({target:O[D],value:C[O[D]]})}}}}x(o,"line")&&delete o.line,"marker"in o&&(x(o.marker,"line")&&delete o.marker.line,x(o,"marker")&&delete o.marker),f.clean(o),o.autobinx&&(delete o.autobinx,delete o.xbins),o.autobiny&&(delete o.autobiny,delete o.ybins),g(o),o.colorbar&&g(o.colorbar),o.marker&&o.marker.colorbar&&g(o.marker.colorbar),o.line&&o.line.colorbar&&g(o.line.colorbar),o.aaxis&&g(o.aaxis),o.baxis&&g(o.baxis)}},n.swapXYData=function(r){var n;if(l.swapAttrs(r,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(r.z)&&Array.isArray(r.z[0])&&(r.transpose?delete r.transpose:r.transpose=!0),r.error_x&&r.error_y){var i=r.error_y,a="copy_ystyle"in i?i.copy_ystyle:!(i.color||i.thickness||i.width);l.swapAttrs(r,["error_?.copy_ystyle"]),a&&l.swapAttrs(r,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof r.hoverinfo){var o=r.hoverinfo.split("+");for(n=0;n<o.length;n++)"x"===o[n]?o[n]="y":"y"===o[n]&&(o[n]="x");r.hoverinfo=o.join("+")}},n.coerceTraceIndices=function(r,n){if(a(n))return[n];if(!Array.isArray(n)||!n.length)return r.data.map(function(r,n){return n});if(Array.isArray(n)){for(var i=[],o=0;o<n.length;o++)l.isIndex(n[o],r.data.length)?i.push(n[o]):l.warn("trace index (",n[o],") is not a number or is out of bounds");return i}return n},n.manageArrayContainers=function(r,n,i){var o=r.obj,s=r.parts,c=s.length,u=s[c-1],f=a(u);if(f&&null===n){var h=s.slice(0,c-1).join(".");l.nestedProperty(o,h).get().splice(u,1)}else f&&void 0===r.get()&&void 0===r.get()&&(i[r.astr]=null),r.set(n)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function _(r){var n=r.search(b);if(n>0)return r.substr(0,n)}n.hasParent=function(r,n){for(var i=_(n);i;){if(i in r)return!0;i=_(i)}return!1};var w=["x","y","z"];n.clearAxisTypes=function(r,n,i){for(var a=0;a<n.length;a++)for(var o=r._fullData[a],s=0;s<3;s++){var c=p(r,o,w[s]);if(c&&"log"!==c.type){var u=c._name,f=c._id.substr(1);if("scene"===f.substr(0,5)){if(void 0!==i[f])continue;u=f+"."+u}var h=u+".type";void 0===i[u]&&void 0===i[h]&&l.nestedProperty(r.layout,h).set(null)}}}},22448:function(r,n,i){var a=i(36424);n._doPlot=a._doPlot,n.newPlot=a.newPlot,n.restyle=a.restyle,n.relayout=a.relayout,n.redraw=a.redraw,n.update=a.update,n._guiRestyle=a._guiRestyle,n._guiRelayout=a._guiRelayout,n._guiUpdate=a._guiUpdate,n._storeDirectGUIEdit=a._storeDirectGUIEdit,n.react=a.react,n.extendTraces=a.extendTraces,n.prependTraces=a.prependTraces,n.addTraces=a.addTraces,n.deleteTraces=a.deleteTraces,n.moveTraces=a.moveTraces,n.purge=a.purge,n.addFrames=a.addFrames,n.deleteFrames=a.deleteFrames,n.animate=a.animate,n.setPlotConfig=a.setPlotConfig;var o=i(52200).getGraphDiv,s=i(4016).eraseActiveShape;n.deleteActiveShape=function(r){return s(o(r))},n.toImage=i(67024),n.validate=i(21480),n.downloadImage=i(39792);var l=i(94828);n.makeTemplate=l.makeTemplate,n.validateTemplate=l.validateTemplate},17680:function(r,n,i){var a=i(63620),o=i(16628),s=i(24248),l=i(14952).sorterAsc,c=i(24040);n.containerArrayMatch=i(69820);var u=n.isAddVal=function(r){return"add"===r||a(r)},f=n.isRemoveVal=function(r){return null===r||"remove"===r};n.applyContainerArrayChanges=function(r,n,i,a,h){var p,d=n.astr,y=c.getComponentMethod(d,"supplyLayoutDefaults"),g=c.getComponentMethod(d,"draw"),v=c.getComponentMethod(d,"drawOne"),m=a.replot||a.recalc||y===o||g===o,x=r.layout,b=r._fullLayout;if(i[""]){Object.keys(i).length>1&&s.warn("Full array edits are incompatible with other edits",d);var _=i[""][""];if(f(_))n.set(null);else{if(!Array.isArray(_))return s.warn("Unrecognized full array edit value",d,_),!0;n.set(_)}return!m&&(y(x,b),g(r),!0)}var w,T,A,k,M,S,E,I,L=Object.keys(i).map(Number).sort(l),C=n.get(),O=C||[],D=h(b,d).get(),P=[],B=-1,R=O.length;for(w=0;w<L.length;w++)if(M=Object.keys(k=i[A=L[w]]),E=u(S=k[""]),A<0||A>O.length-(E?0:1))s.warn("index out of range",d,A);else if(void 0!==S)M.length>1&&s.warn("Insertion & removal are incompatible with edits to the same index.",d,A),f(S)?P.push(A):E?("add"===S&&(S={}),O.splice(A,0,S),D&&D.splice(A,0,{})):s.warn("Unrecognized full object edit value",d,A,S),-1===B&&(B=A);else for(T=0;T<M.length;T++)I=d+"["+A+"].",h(O[A],M[T],I).set(k[M[T]]);for(w=P.length-1;w>=0;w--)O.splice(P[w],1),D&&D.splice(P[w],1);if(O.length?C||n.set(O):n.set(null),m)return!1;if(y(x,b),v!==o){if(-1===B)p=L;else{for(R=Math.max(O.length,R),p=[],w=0;w<L.length&&!((A=L[w])>=B);w++)p.push(A);for(w=B;w<R;w++)p.push(w)}for(w=0;w<p.length;w++)v(r,p[w])}else g(r);return!0}},36424:function(r,n,i){var a=i(33428),o=i(38248),s=i(52264),l=i(3400),c=l.nestedProperty,u=i(95924),f=i(94552),h=i(24040),p=i(73060),d=i(7316),y=i(54460),g=i(96312),v=i(94724),m=i(43616),x=i(76308),b=i(42464).initInteractions,_=i(9616),w=i(22676).clearOutline,T=i(20556).dfltConfig,A=i(17680),k=i(93404),M=i(39172),S=i(67824),E=i(33816).AX_NAME_PATTERN,I=0;function L(r){var n=r._fullLayout;n._redrawFromAutoMarginCount?n._redrawFromAutoMarginCount--:r.emit("plotly_afterplot")}function C(r,n){try{r._fullLayout._paper.style("background",n)}catch(r){l.error(r)}}function O(r,n){C(r,x.combine(n,"white"))}function D(r,n){if(!r._context){r._context=l.extendDeep({},T);var i=a.select("base");r._context._baseUrl=i.size()&&i.attr("href")?window.location.href.split("#")[0]:""}var o,c,u,f=r._context;if(n){for(c=Object.keys(n),o=0;o<c.length;o++)"editable"!==(u=c[o])&&"edits"!==u&&u in f&&("setBackground"===u&&"opaque"===n[u]?f[u]=O:f[u]=n[u]);n.plot3dPixelRatio&&!f.plotGlPixelRatio&&(f.plotGlPixelRatio=f.plot3dPixelRatio);var h=n.editable;if(void 0!==h)for(f.editable=h,c=Object.keys(f.edits),o=0;o<c.length;o++)f.edits[c[o]]=h;if(n.edits)for(c=Object.keys(n.edits),o=0;o<c.length;o++)(u=c[o])in f.edits&&(f.edits[u]=n.edits[u]);f._exportedPlot=n._exportedPlot}f.staticPlot&&(f.editable=!1,f.edits={},f.autosizable=!1,f.scrollZoom=!1,f.doubleClick=!1,f.showTips=!1,f.showLink=!1,f.displayModeBar=!1),"hover"!==f.displayModeBar||s||(f.displayModeBar=!0),"transparent"!==f.setBackground&&"function"==typeof f.setBackground||(f.setBackground=C),f._hasZeroHeight=f._hasZeroHeight||0===r.clientHeight,f._hasZeroWidth=f._hasZeroWidth||0===r.clientWidth;var p=f.scrollZoom,d=f._scrollZoom={};if(!0===p)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1;else if("string"==typeof p){var y=p.split("+");for(o=0;o<y.length;o++)d[y[o]]=1}else!1!==p&&(d.gl3d=1,d.geo=1,d.mapbox=1)}function P(r,n){var i,a,o=n+1,s=[];for(i=0;i<r.length;i++)(a=r[i])<0?s.push(o+a):s.push(a);return s}function B(r,n,i){var a,o;for(a=0;a<n.length;a++){if((o=n[a])!==parseInt(o,10))throw Error("all values in "+i+" must be integers");if(o>=r.data.length||o<-r.data.length)throw Error(i+" must be valid indices for gd.data.");if(n.indexOf(o,a+1)>-1||o>=0&&n.indexOf(-r.data.length+o)>-1||o<0&&n.indexOf(r.data.length+o)>-1)throw Error("each index in "+i+" must be unique.")}}function R(r,n,i){if(!Array.isArray(r.data))throw Error("gd.data must be an array.");if(void 0===n)throw Error("currentIndices is a required argument.");if(Array.isArray(n)||(n=[n]),B(r,n,"currentIndices"),void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&B(r,i,"newIndices"),void 0!==i&&n.length!==i.length)throw Error("current and new indices must be of equal length.")}function z(r,n,i,a,s){!function(r,n,i,a){var o=l.isPlainObject(a);if(!Array.isArray(r.data))throw Error("gd.data must be an array");if(!l.isPlainObject(n))throw Error("update must be a key:value object");if(void 0===i)throw Error("indices must be an integer or array of integers");for(var s in B(r,i,"indices"),n){if(!Array.isArray(n[s])||n[s].length!==i.length)throw Error("attribute "+s+" must be an array of length equal to indices array length");if(o&&(!(s in a)||!Array.isArray(a[s])||a[s].length!==n[s].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(r,n,i,a);for(var u=function(r,n,i,a){var s,u,f,h,p=l.isPlainObject(a),d=[];for(var y in Array.isArray(i)||(i=[i]),i=P(i,r.data.length-1),n)for(var g=0;g<i.length;g++){if(s=(u=c(r.data[i[g]],y)).get(),f=n[y][g],!l.isArrayOrTypedArray(f))throw Error("attribute: "+y+" index: "+g+" must be an array");if(!l.isArrayOrTypedArray(s))throw Error("cannot extend missing or non-array attribute: "+y);if(s.constructor!==f.constructor)throw Error("cannot extend array with an array of a different type: "+y);o(h=p?a[y][g]:a)||(h=-1),d.push({prop:u,target:s,insert:f,maxp:Math.floor(h)})}return d}(r,n,i,a),f={},h={},p=0;p<u.length;p++){var d=u[p].prop,y=u[p].maxp,g=s(u[p].target,u[p].insert,y);d.set(g[0]),Array.isArray(f[d.astr])||(f[d.astr]=[]),f[d.astr].push(g[1]),Array.isArray(h[d.astr])||(h[d.astr]=[]),h[d.astr].push(u[p].target.length)}return{update:f,maxPoints:h}}function F(r,n){var i=new r.constructor(r.length+n.length);return i.set(r),i.set(n,r.length),i}function N(r,i,a,o){r=l.getGraphDiv(r),k.clearPromiseQueue(r);var s={};if("string"==typeof i)s[i]=a;else{if(!l.isPlainObject(i))return l.warn("Restyle fail.",i,a,o),Promise.reject();s=l.extendFlat({},i),void 0===o&&(o=a)}Object.keys(s).length&&(r.changed=!0);var c=k.coerceTraceIndices(r,o),u=H(r,s,c),h=u.flags;h.calc&&(r.calcdata=void 0),h.clearAxisTypes&&k.clearAxisTypes(r,c,{});var p=[];h.fullReplot?p.push(n._doPlot):(p.push(d.previousPromises),d.supplyDefaults(r),h.markerSize&&(d.doCalcdata(r),Y(p)),h.style&&p.push(M.doTraceStyle),h.colorbars&&p.push(M.doColorBars),p.push(L)),p.push(d.rehover,d.redrag,d.reselect),f.add(r,N,[r,u.undoit,u.traces],N,[r,u.redoit,u.traces]);var y=l.syncOrAsync(p,r);return y&&y.then||(y=Promise.resolve()),y.then(function(){return r.emit("plotly_restyle",u.eventData),r})}function U(r){return void 0===r?null:r}function j(r,n){return n?function(n,i,a){var o=c(n,i),s=o.set;return o.set=function(n){V((a||"")+i,o.get(),n,r),s(n)},o}:c}function V(r,n,i,a){if(Array.isArray(n)||Array.isArray(i))for(var o=Array.isArray(n)?n:[],s=Array.isArray(i)?i:[],c=Math.max(o.length,s.length),u=0;u<c;u++)V(r+"["+u+"]",o[u],s[u],a);else if(l.isPlainObject(n)||l.isPlainObject(i)){var f=l.isPlainObject(n)?n:{},h=l.isPlainObject(i)?i:{},p=l.extendFlat({},f,h);for(var d in p)V(r+"."+d,f[d],h[d],a)}else void 0===a[r]&&(a[r]=U(n))}function H(r,n,i){var a,o=r._fullLayout,s=r._fullData,u=r.data,f=o._guiEditing,g=j(o._preGUI,f),v=l.extendDeepAll({},n);q(n);var m,x=S.traceFlags(),b={},_={};function w(){return i.map(function(){})}function T(r){var n=y.id2name(r);-1===m.indexOf(n)&&m.push(n)}function A(r){return"LAYOUT"+r+".autorange"}function M(r){return"LAYOUT"+r+".range"}function E(r){for(var n=r;n<s.length;n++)if(s[n]._input===u[r])return s[n]}function I(a,s,l){if(Array.isArray(a))a.forEach(function(r){I(r,s,l)});else if(!(a in n)&&!k.hasParent(n,a)){var c;if("LAYOUT"===a.substr(0,6))c=g(r.layout,a.replace("LAYOUT",""));else{var h=i[l];c=j(o._tracePreGUI[E(h)._fullInput.uid],f)(u[h],a)}a in _||(_[a]=w()),void 0===_[a][l]&&(_[a][l]=U(c.get())),void 0!==s&&c.set(s)}}for(var L in n){if(k.hasParent(n,L))throw Error("cannot set "+L+" and a parent attribute simultaneously");var C,O,D,P,B,R,z=n[L];if("autobinx"!==L&&"autobiny"!==L||(L=L.charAt(L.length-1)+"bins",z=Array.isArray(z)?z.map(function(r){return function(n,a){return!1===n?s[i[a]][r]:null}}(L)):!1===z?i.map(function(r){return function(n){return s[n][r]}}(L)):null),b[L]=z,"LAYOUT"!==L.substr(0,6)){for(_[L]=w(),a=0;a<i.length;a++)if(C=u[i[a]],O=E(i[a]),P=(D=j(o._tracePreGUI[O._fullInput.uid],f)(C,L)).get(),void 0!==(B=Array.isArray(z)?z[a%z.length]:z)){var F=D.parts[D.parts.length-1],N=L.substr(0,L.length-F.length-1),V=N?N+".":"",H=N?c(O,N).get():O;if((R=p.getTraceValObject(O,D.parts))&&R.impliedEdits&&null!==B)for(var G in R.impliedEdits)I(l.relativeAttr(L,G),R.impliedEdits[G],a);else if(("thicknessmode"===F||"lenmode"===F)&&P!==B&&("fraction"===B||"pixels"===B)&&H){var W=o._size,Y=H.orient,Z="top"===Y||"bottom"===Y;if("thicknessmode"===F){var X=Z?W.h:W.w;I(V+"thickness",H.thickness*("fraction"===B?1/X:X),a)}else{var K=Z?W.w:W.h;I(V+"len",H.len*("fraction"===B?1/K:K),a)}}else if("type"===L&&("pie"===B!=("pie"===P)||"funnelarea"===B!=("funnelarea"===P))){var J="x",$="y";"bar"!==B&&"bar"!==P||"h"!==C.orientation||(J="y",$="x"),l.swapAttrs(C,["?","?src"],"labels",J),l.swapAttrs(C,["d?","?0"],"label",J),l.swapAttrs(C,["?","?src"],"values",$),"pie"===P||"funnelarea"===P?(c(C,"marker.color").set(c(C,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):h.traceIs(C,"cartesian")&&c(C,"marker.colors").set(c(C,"marker.color").get())}if(_[L][a]=U(P),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(L)){if("orientation"===L){D.set(B);var Q=C.x&&!C.y?"h":"v";if((D.get()||Q)===O.orientation)continue}else"orientationaxes"===L&&(C.orientation=({v:"h",h:"v"})[O.orientation]);k.swapXYData(C),x.calc=x.clearAxisTypes=!0}else -1!==d.dataArrayContainers.indexOf(D.parts[0])?(k.manageArrayContainers(D,B,_),x.calc=!0):(R?R.arrayOk&&!h.traceIs(O,"regl")&&(l.isArrayOrTypedArray(B)||l.isArrayOrTypedArray(P))?x.calc=!0:S.update(x,R):x.calc=!0,D.set(B))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(L)&&y.swap(r,i),"orientationaxes"===L){var tt=c(r.layout,"hovermode"),te=tt.get();"x"===te?tt.set("y"):"y"===te?tt.set("x"):"x unified"===te?tt.set("y unified"):"y unified"===te&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(L)){for(m=[],a=0;a<i.length;a++){var tr=u[i[a]];h.traceIs(tr,"cartesian")&&(T(tr.xaxis||"x"),T(tr.yaxis||"y"))}I(m.map(A),!0,0),I(m.map(M),[0,1],0)}}else D=g(r.layout,L.replace("LAYOUT","")),_[L]=[U(D.get())],D.set(Array.isArray(z)?z[0]:z),x.calc=!0}return(x.calc||x.plot)&&(x.fullReplot=!0),{flags:x,undoit:_,redoit:b,traces:i,eventData:l.extendDeepNoArrays([],[v,i])}}function q(r){var n,i,a,o=l.counterRegex("axis",".title",!1,!1),s=/colorbar\.title$/,c=Object.keys(r);for(n=0;n<c.length;n++)a=r[i=c[n]],("title"===i||o.test(i)||s.test(i))&&("string"==typeof a||"number"==typeof a)?u(i,i.replace("title","title.text")):i.indexOf("titlefont")>-1&&-1===i.indexOf("grouptitlefont")?u(i,i.replace("titlefont","title.font")):i.indexOf("titleposition")>-1?u(i,i.replace("titleposition","title.position")):i.indexOf("titleside")>-1?u(i,i.replace("titleside","title.side")):i.indexOf("titleoffset")>-1&&u(i,i.replace("titleoffset","title.offset"));function u(n,i){r[i]=r[n],delete r[n]}}function G(r,n,i){r=l.getGraphDiv(r),k.clearPromiseQueue(r);var a={};if("string"==typeof n)a[n]=i;else{if(!l.isPlainObject(n))return l.warn("Relayout fail.",n,i),Promise.reject();a=l.extendFlat({},n)}Object.keys(a).length&&(r.changed=!0);var o=J(r,a),s=o.flags;s.calc&&(r.calcdata=void 0);var c=[d.previousPromises];s.layoutReplot?c.push(M.layoutReplot):Object.keys(a).length&&(W(r,s,o)||d.supplyDefaults(r),s.legend&&c.push(M.doLegend),s.layoutstyle&&c.push(M.layoutStyles),s.axrange&&Y(c,o.rangesAltered),s.ticks&&c.push(M.doTicksRelayout),s.modebar&&c.push(M.doModeBar),s.camera&&c.push(M.doCamera),s.colorbars&&c.push(M.doColorBars),c.push(L)),c.push(d.rehover,d.redrag,d.reselect),f.add(r,G,[r,o.undoit],G,[r,o.redoit]);var u=l.syncOrAsync(c,r);return u&&u.then||(u=Promise.resolve(r)),u.then(function(){return r.emit("plotly_relayout",o.eventData),r})}function W(r,n,i){var a,o,s=r._fullLayout;if(!n.axrange)return!1;for(var c in n)if("axrange"!==c&&n[c])return!1;var u=function(r,n){return l.coerce(a,o,v,r,n)},f={};for(var h in i.rangesAltered){var p=y.id2name(h);if(a=r.layout[p],o=s[p],g(a,o,u,f),o._matchGroup){for(var d in o._matchGroup)if(d!==h){var m=s[y.id2name(d)];m.autorange=o.autorange,m.range=o.range.slice(),m._input.range=o.range.slice()}}}return!0}function Y(r,n){var i=n?function(r){var i=[];for(var a in n){var o=y.getFromId(r,a);if(i.push(a),-1!==(o.ticklabelposition||"").indexOf("inside")&&o._anchorAxis&&i.push(o._anchorAxis._id),o._matchGroup)for(var s in o._matchGroup)n[s]||i.push(s)}return y.draw(r,i,{skipTitle:!0})}:function(r){return y.draw(r,"redraw")};r.push(w,M.doAutoRangeAndConstraints,i,M.drawData,M.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,K=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function J(r,n){var i,a,o,s=r.layout,u=r._fullLayout,f=u._guiEditing,d=j(u._preGUI,f),g=Object.keys(n),v=y.list(r),m=l.extendDeepAll({},n),x={};for(q(n),g=Object.keys(n),a=0;a<g.length;a++)if(0===g[a].indexOf("allaxes")){for(o=0;o<v.length;o++){var b=v[o]._id.substr(1),_=-1!==b.indexOf("scene")?b+".":"",w=g[a].replace("allaxes",_+v[o]._name);n[w]||(n[w]=n[g[a]])}delete n[g[a]]}var T=S.layoutFlags(),M={},I={};function L(r,i){if(Array.isArray(r))r.forEach(function(r){L(r,i)});else if(!(r in n)&&!k.hasParent(n,r)){var a=d(s,r);r in I||(I[r]=U(a.get())),void 0!==i&&a.set(i)}}var C,O={};function D(r){var n=y.name2id(r.split(".")[0]);return O[n]=1,n}for(var P in n){if(k.hasParent(n,P))throw Error("cannot set "+P+" and a parent attribute simultaneously");for(var B=d(s,P),R=n[P],z=B.parts.length-1;z>0&&"string"!=typeof B.parts[z];)z--;var F=B.parts[z],N=B.parts[z-1]+"."+F,V=B.parts.slice(0,z).join("."),H=c(r.layout,V).get(),G=c(u,V).get(),W=B.get();if(void 0!==R){M[P]=R,I[P]="reverse"===F?R:U(W);var Y=p.getLayoutValObject(u,B.parts);if(Y&&Y.impliedEdits&&null!==R)for(var J in Y.impliedEdits)L(l.relativeAttr(P,J),Y.impliedEdits[J]);if(-1!==["width","height"].indexOf(P)){if(R){L("autosize",null);var Q="height"===P?"width":"height";L(Q,u[Q])}else u[P]=r._initialAutoSize[P]}else if("autosize"===P)L("width",R?null:u.width),L("height",R?null:u.height);else if(N.match(Z))D(N),c(u,V+"._inputRange").set(null);else if(N.match(X)){D(N),c(u,V+"._inputRange").set(null);var tt=c(u,V).get();tt._inputDomain&&(tt._input.domain=tt._inputDomain.slice())}else N.match(K)&&c(u,V+"._inputDomain").set(null);if("type"===F){C=H;var te="linear"===G.type&&"log"===R,tr="log"===G.type&&"linear"===R;if(te||tr){if(C&&C.range){if(G.autorange)te&&(C.range=C.range[1]>C.range[0]?[1,2]:[2,1]);else{var tn=C.range[0],ti=C.range[1];te?(tn<=0&&ti<=0&&L(V+".autorange",!0),tn<=0?tn=ti/1e6:ti<=0&&(ti=tn/1e6),L(V+".range[0]",Math.log(tn)/Math.LN10),L(V+".range[1]",Math.log(ti)/Math.LN10)):(L(V+".range[0]",Math.pow(10,tn)),L(V+".range[1]",Math.pow(10,ti)))}}else L(V+".autorange",!0);Array.isArray(u._subplots.polar)&&u._subplots.polar.length&&u[B.parts[0]]&&"radialaxis"===B.parts[1]&&delete u[B.parts[0]]._subplot.viewInitial["radialaxis.range"],h.getComponentMethod("annotations","convertCoords")(r,G,R,L),h.getComponentMethod("images","convertCoords")(r,G,R,L)}else L(V+".autorange",!0),L(V+".range",null);c(u,V+"._inputRange").set(null)}else if(F.match(E)){var ta=c(u,P).get(),to=(R||{}).type;to&&"-"!==to||(to="linear"),h.getComponentMethod("annotations","convertCoords")(r,ta,to,L),h.getComponentMethod("images","convertCoords")(r,ta,to,L)}var ts=A.containerArrayMatch(P);if(ts){i=ts.array,a=ts.index;var tl=ts.property,tc=Y||{editType:"calc"};""!==a&&""===tl&&(A.isAddVal(R)?I[P]=null:A.isRemoveVal(R)?I[P]=(c(s,i).get()||[])[a]:l.warn("unrecognized full object value",n)),S.update(T,tc),x[i]||(x[i]={});var tu=x[i][a];tu||(tu=x[i][a]={}),tu[tl]=R,delete n[P]}else"reverse"===F?(H.range?H.range.reverse():(L(V+".autorange",!0),H.range=[1,0]),G.autorange?T.calc=!0:T.plot=!0):("dragmode"===P&&(!1===R&&!1!==W||!1!==R&&!1===W)||u._has("scatter-like")&&u._has("regl")&&"dragmode"===P&&("lasso"===R||"select"===R)&&"lasso"!==W&&"select"!==W||u._has("gl2d")?T.plot=!0:Y?S.update(T,Y):T.calc=!0,B.set(R))}}for(i in x)A.applyContainerArrayChanges(r,d(s,i),x[i],T,d)||(T.plot=!0);for(var tf in O){var th=(C=y.getFromId(r,tf))&&C._constraintGroup;if(th)for(var tp in T.calc=!0,th)O[tp]||(y.getFromId(r,tp)._constraintShrinkable=!0)}($(r)||n.height||n.width)&&(T.plot=!0);var td=u.shapes;for(a=0;a<td.length;a++)if(td[a].showlegend){T.calc=!0;break}return(T.plot||T.calc)&&(T.layoutReplot=!0),{flags:T,rangesAltered:O,undoit:I,redoit:M,eventData:m}}function $(r){var n=r._fullLayout,i=n.width,a=n.height;return r.layout.autosize&&d.plotAutoSize(r,r.layout,n),n.width!==i||n.height!==a}function Q(r,i,a,o){r=l.getGraphDiv(r),k.clearPromiseQueue(r),l.isPlainObject(i)||(i={}),l.isPlainObject(a)||(a={}),Object.keys(i).length&&(r.changed=!0),Object.keys(a).length&&(r.changed=!0);var s=k.coerceTraceIndices(r,o),c=H(r,l.extendFlat({},i),s),u=c.flags,h=J(r,l.extendFlat({},a)),p=h.flags;(u.calc||p.calc)&&(r.calcdata=void 0),u.clearAxisTypes&&k.clearAxisTypes(r,s,a);var y=[];p.layoutReplot?y.push(M.layoutReplot):u.fullReplot?y.push(n._doPlot):(y.push(d.previousPromises),W(r,p,h)||d.supplyDefaults(r),u.style&&y.push(M.doTraceStyle),(u.colorbars||p.colorbars)&&y.push(M.doColorBars),p.legend&&y.push(M.doLegend),p.layoutstyle&&y.push(M.layoutStyles),p.axrange&&Y(y,h.rangesAltered),p.ticks&&y.push(M.doTicksRelayout),p.modebar&&y.push(M.doModeBar),p.camera&&y.push(M.doCamera),y.push(L)),y.push(d.rehover,d.redrag,d.reselect),f.add(r,Q,[r,c.undoit,h.undoit,c.traces],Q,[r,c.redoit,h.redoit,c.traces]);var g=l.syncOrAsync(y,r);return g&&g.then||(g=Promise.resolve(r)),g.then(function(){return r.emit("plotly_update",{data:c.eventData,layout:h.eventData}),r})}function tt(r){return function(n){n._fullLayout._guiEditing=!0;var i=r.apply(null,arguments);return n._fullLayout._guiEditing=!1,i}}var te=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],tr=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function tn(r,n){for(var i=0;i<n.length;i++){var a=n[i],o=r.match(a.pattern);if(o){var s=o[1]||"";return{head:s,tail:r.substr(s.length+1),attr:a.attr}}}}function ti(r,n){var i=c(n,r).get();if(void 0!==i)return i;var a=r.split(".");for(a.pop();a.length>1;)if(a.pop(),void 0!==(i=c(n,a.join(".")+".uirevision").get()))return i;return n.uirevision}function ta(r,n){var i=l.isPlainObject(r),a=Array.isArray(r);return i||a?(i&&l.isPlainObject(n)||a&&Array.isArray(n))&&JSON.stringify(r)===JSON.stringify(n):r===n}function to(r,n,i,a){var o,s,u,f=a.getValObject,h=a.flags,p=a.immutable,d=a.inArray,y=a.arrayIndex;function g(){var r=o.editType;d&&-1!==r.indexOf("arraydraw")?l.pushUnique(h.arrays[d],y):(S.update(h,o),"none"!==r&&h.nChanges++,a.transition&&o.anim&&h.nChangesAnim++,(Z.test(u)||X.test(u))&&(h.rangesAltered[i[0]]=1),K.test(u)&&c(n,"_inputDomain").set(null),"datarevision"===s&&(h.newDataRevision=1))}function v(r){return"data_array"===r.valType||r.arrayOk}for(s in r){if(h.calc&&!a.transition)return;var m=r[s],x=n[s],b=i.concat(s);if(u=b.join("."),"_"!==s.charAt(0)&&"function"!=typeof m&&m!==x){if(("tick0"===s||"dtick"===s)&&"geo"!==i[0]){var _=n.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==s||!n.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==n.type)&&(o=f(b))&&(!o._compareAsJSON||JSON.stringify(m)!==JSON.stringify(x))){var w,T=o.valType,A=v(o),k=Array.isArray(m),M=Array.isArray(x);if(k&&M){var E="_input_"+s,I=r[E],L=n[E];if(Array.isArray(I)&&I===L)continue}if(void 0===x)A&&k?h.calc=!0:g();else if(o._isLinkedToArray){var C=[],O=!1;d||(h.arrays[s]=C);var D=Math.min(m.length,x.length),P=Math.max(m.length,x.length);if(D!==P){if("arraydraw"!==o.editType){g();continue}O=!0}for(w=0;w<D;w++)to(m[w],x[w],b.concat(w),l.extendFlat({inArray:s,arrayIndex:w},a));if(O)for(w=D;w<P;w++)C.push(w)}else!T&&l.isPlainObject(m)?to(m,x,b,a):A?k&&M?(p&&(h.calc=!0),(p||a.newDataRevision)&&g()):k!==M?h.calc=!0:g():k&&M&&m.length===x.length&&String(m)===String(x)||g()}}}for(s in n)if(!(s in r)&&"_"!==s.charAt(0)&&"function"!=typeof n[s]){if(v(o=f(i.concat(s)))&&Array.isArray(n[s]))return void(h.calc=!0);g()}}function ts(r){var n=r._fullLayout,i=r.getBoundingClientRect();if(!l.equalDomRects(i,n._lastBBox)){var a=n._invTransform=l.inverseTransformMatrix(l.getFullTransformMatrix(r));n._invScaleX=Math.sqrt(a[0][0]*a[0][0]+a[0][1]*a[0][1]+a[0][2]*a[0][2]),n._invScaleY=Math.sqrt(a[1][0]*a[1][0]+a[1][1]*a[1][1]+a[1][2]*a[1][2]),n._lastBBox=i}}n.animate=function(r,n,i){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var a=r._transitionData;a._frameQueue||(a._frameQueue=[]);var o=(i=d.supplyAnimationDefaults(i)).transition,s=i.frame;return void 0===a._frameWaitingCnt&&(a._frameWaitingCnt=0),new Promise(function(c,u){var f,h,p=0;function y(r){return Array.isArray(o)?p>=o.length?r.transitionOpts=o[p]:r.transitionOpts=o[0]:r.transitionOpts=o,p++,r}var g=[],v=null==n,m=Array.isArray(n);if(v||m||!l.isPlainObject(n)){if(v||-1!==["string","number"].indexOf(typeof n))for(f=0;f<a._frames.length;f++)(h=a._frames[f])&&(v||String(h.group)===String(n))&&g.push({type:"byname",name:String(h.name),data:y({name:h.name})});else if(m)for(f=0;f<n.length;f++){var x=n[f];-1!==["number","string"].indexOf(typeof x)?(x=String(x),g.push({type:"byname",name:x,data:y({name:x})})):l.isPlainObject(x)&&g.push({type:"object",data:y(l.extendFlat({},x))})}}else g.push({type:"object",data:y(l.extendFlat({},n))});for(f=0;f<g.length;f++)if("byname"===(h=g[f]).type&&!a._frameHash[h.data.name])return l.warn('animate failure: frame not found: "'+h.data.name+'"'),void u();-1!==["next","immediate"].indexOf(i.mode)&&function(){if(0!==a._frameQueue.length){for(;a._frameQueue.length;){var n=a._frameQueue.pop();n.onInterrupt&&n.onInterrupt()}r.emit("plotly_animationinterrupted",[])}}(),"reverse"===i.direction&&g.reverse();var b=r._fullLayout._currentFrame;if(b&&i.fromcurrent){var _=-1;for(f=0;f<g.length;f++)if("byname"===(h=g[f]).type&&h.name===b){_=f;break}if(_>0&&_<g.length-1){var w=[];for(f=0;f<g.length;f++)h=g[f],("byname"!==g[f].type||f>_)&&w.push(h);g=w}}g.length>0?function(n){if(0!==n.length){for(var l,f=0;f<n.length;f++){y="byname"===n[f].type?d.computeFrame(r,n[f].name):n[f].data;var h,p,y,g=(h=f,Array.isArray(s)?h>=s.length?s[0]:s[h]:s),v=(p=f,Array.isArray(o)?p>=o.length?o[0]:o[p]:o);v.duration=Math.min(v.duration,g.duration);var m={frame:y,name:n[f].name,frameOpts:g,transitionOpts:v};f===n.length-1&&(m.onComplete=function(r,n){var i=0;return function(){if(r&&2==++i)return r()}}(c,0),m.onInterrupt=u),a._frameQueue.push(m)}"immediate"===i.mode&&(a._lastFrameAt=-1/0),a._animationRaf||(r.emit("plotly_animating"),a._lastFrameAt=-1/0,a._timeToNext=0,a._runningTransitions=0,a._currentFrame=null,(l=function(){a._animationRaf=window.requestAnimationFrame(l),Date.now()-a._lastFrameAt>a._timeToNext&&function(){a._currentFrame&&a._currentFrame.onComplete&&a._currentFrame.onComplete();var n=a._currentFrame=a._frameQueue.shift();if(n){var i=n.name?n.name.toString():null;r._fullLayout._currentFrame=i,a._lastFrameAt=Date.now(),a._timeToNext=n.frameOpts.duration,d.transition(r,n.frame.data,n.frame.layout,k.coerceTraceIndices(r,n.frame.traces),n.frameOpts,n.transitionOpts).then(function(){n.onComplete&&n.onComplete()}),r.emit("plotly_animatingframe",{name:i,frame:n.frame,animation:{frame:n.frameOpts,transition:n.transitionOpts}})}else r.emit("plotly_animated"),window.cancelAnimationFrame(a._animationRaf),a._animationRaf=null}()})())}}(g):(r.emit("plotly_animated"),c())})},n.addFrames=function(r,n,i){if(r=l.getGraphDiv(r),null==n)return Promise.resolve();if(!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var a,o,s,c,u=r._transitionData._frames,h=r._transitionData._frameHash;if(!Array.isArray(n))throw Error("addFrames failure: frameList must be an Array of frame definitions"+n);var p=u.length+2*n.length,y=[],g={};for(a=n.length-1;a>=0;a--)if(l.isPlainObject(n[a])){var v=n[a].name,m=(h[v]||g[v]||{}).name,x=n[a].name,b=h[m]||g[m];m&&x&&"number"==typeof x&&b&&I<5&&(I++,l.warn('addFrames: overwriting frame "'+(h[m]||g[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===I&&l.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),g[v]={name:v},y.push({frame:d.supplyFrameDefaults(n[a]),index:i&&void 0!==i[a]&&null!==i[a]?i[a]:p+a})}y.sort(function(r,n){return r.index>n.index?-1:r.index<n.index?1:0});var _=[],w=[],T=u.length;for(a=y.length-1;a>=0;a--){if("number"==typeof(o=y[a].frame).name&&l.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!o.name)for(;h[o.name="frame "+r._transitionData._counter++];);if(h[o.name]){for(s=0;s<u.length&&(u[s]||{}).name!==o.name;s++);_.push({type:"replace",index:s,value:o}),w.unshift({type:"replace",index:s,value:u[s]})}else c=Math.max(0,Math.min(y[a].index,T)),_.push({type:"insert",index:c,value:o}),w.unshift({type:"delete",index:c}),T++}var A=d.modifyFrames,k=d.modifyFrames,M=[r,w],S=[r,_];return f&&f.add(r,A,M,k,S),d.modifyFrames(r,_)},n.deleteFrames=function(r,n){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r);var i,a,o=r._transitionData._frames,s=[],c=[];if(!n)for(n=[],i=0;i<o.length;i++)n.push(i);for((n=n.slice()).sort(),i=n.length-1;i>=0;i--)a=n[i],s.push({type:"delete",index:a}),c.unshift({type:"insert",index:a,value:o[a]});var u=d.modifyFrames,h=d.modifyFrames,p=[r,c],y=[r,s];return f&&f.add(r,u,p,h,y),d.modifyFrames(r,s)},n.addTraces=function r(i,a,o){i=l.getGraphDiv(i);var s,c,u=[],h=n.deleteTraces,p=r,d=[i,u],y=[i,a];for(function(r,n,i){var a,o;if(!Array.isArray(r.data))throw Error("gd.data must be an array.");if(void 0===n)throw Error("traces must be defined.");for(Array.isArray(n)||(n=[n]),a=0;a<n.length;a++)if("object"!=typeof(o=n[a])||Array.isArray(o)||null===o)throw Error("all values in traces array must be non-array objects");if(void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&i.length!==n.length)throw Error("if indices is specified, traces.length must equal indices.length")}(i,a,o),Array.isArray(a)||(a=[a]),a=a.map(function(r){return l.extendFlat({},r)}),k.cleanData(a),s=0;s<a.length;s++)i.data.push(a[s]);for(s=0;s<a.length;s++)u.push(-a.length+s);if(void 0===o)return c=n.redraw(i),f.add(i,h,d,p,y),c;Array.isArray(o)||(o=[o]);try{R(i,u,o)}catch(r){throw i.data.splice(i.data.length-a.length,a.length),r}return f.startSequence(i),f.add(i,h,d,p,y),c=n.moveTraces(i,u,o),f.stopSequence(i),c},n.deleteTraces=function r(i,a){i=l.getGraphDiv(i);var o,s,c=[],u=n.addTraces,h=r,p=[i,c,a],d=[i,a];if(void 0===a)throw Error("indices must be an integer or array of integers.");for(Array.isArray(a)||(a=[a]),B(i,a,"indices"),(a=P(a,i.data.length-1)).sort(l.sorterDes),o=0;o<a.length;o+=1)s=i.data.splice(a[o],1)[0],c.push(s);var y=n.redraw(i);return f.add(i,u,p,h,d),y},n.extendTraces=function r(i,a,o,s){var c=z(i=l.getGraphDiv(i),a,o,s,function(r,n,i){var a,o;if(l.isTypedArray(r)){if(i<0){var s=new r.constructor(0),c=F(r,n);i<0?(a=c,o=s):(a=s,o=c)}else if(a=new r.constructor(i),o=new r.constructor(r.length+n.length-i),i===n.length)a.set(n),o.set(r);else if(i<n.length){var u=n.length-i;a.set(n.subarray(u)),o.set(r),o.set(n.subarray(0,u),r.length)}else{var f=i-n.length,h=r.length-f;a.set(r.subarray(h)),a.set(n,f),o.set(r.subarray(0,h))}}else a=r.concat(n),o=i>=0&&i<a.length?a.splice(0,a.length-i):[];return[a,o]}),u=n.redraw(i),h=[i,c.update,o,c.maxPoints];return f.add(i,n.prependTraces,h,r,arguments),u},n.moveTraces=function r(i,a,o){var s,c=[],u=[],h=r,p=r,d=[i=l.getGraphDiv(i),o,a],y=[i,a,o];if(R(i,a,o),a=Array.isArray(a)?a:[a],void 0===o)for(o=[],s=0;s<a.length;s++)o.push(-a.length+s);for(o=Array.isArray(o)?o:[o],a=P(a,i.data.length-1),o=P(o,i.data.length-1),s=0;s<i.data.length;s++)-1===a.indexOf(s)&&c.push(i.data[s]);for(s=0;s<a.length;s++)u.push({newIndex:o[s],trace:i.data[a[s]]});for(u.sort(function(r,n){return r.newIndex-n.newIndex}),s=0;s<u.length;s+=1)c.splice(u[s].newIndex,0,u[s].trace);i.data=c;var g=n.redraw(i);return f.add(i,h,d,p,y),g},n.prependTraces=function r(i,a,o,s){var c=z(i=l.getGraphDiv(i),a,o,s,function(r,n,i){var a,o;if(l.isTypedArray(r)){if(i<=0){var s=new r.constructor(0),c=F(n,r);i<0?(a=c,o=s):(a=s,o=c)}else if(a=new r.constructor(i),o=new r.constructor(r.length+n.length-i),i===n.length)a.set(n),o.set(r);else if(i<n.length){var u=n.length-i;a.set(n.subarray(0,u)),o.set(n.subarray(u)),o.set(r,u)}else{var f=i-n.length;a.set(n),a.set(r.subarray(0,f),n.length),o.set(r.subarray(f))}}else a=n.concat(r),o=i>=0&&i<a.length?a.splice(i,a.length):[];return[a,o]}),u=n.redraw(i),h=[i,c.update,o,c.maxPoints];return f.add(i,n.extendTraces,h,r,arguments),u},n.newPlot=function(r,i,a,o){return r=l.getGraphDiv(r),d.cleanPlot([],{},r._fullData||[],r._fullLayout||{}),d.purge(r),n._doPlot(r,i,a,o)},n._doPlot=function(r,i,o,s){if(r=l.getGraphDiv(r),u.init(r),l.isPlainObject(i)){var c,f=i;i=f.data,o=f.layout,s=f.config,c=f.frames}if(!1===u.triggerHandler(r,"plotly_beforeplot",[i,o,s]))return Promise.reject();i||o||l.isPlotDiv(r)||l.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",r),D(r,s),o||(o={}),a.select(r).classed("js-plotly-plot",!0),m.makeTester(),Array.isArray(r._promises)||(r._promises=[]);var p=0===(r.data||[]).length&&Array.isArray(i);Array.isArray(i)&&(k.cleanData(i),p?r.data=i:r.data.push.apply(r.data,i),r.empty=!1),r.layout&&!p||(r.layout=k.cleanLayout(o)),d.supplyDefaults(r);var g=r._fullLayout,v=g._has("cartesian");g._replotting=!0,(p||g._shouldCreateBgLayer)&&(function(r){var n=a.select(r),i=r._fullLayout;if(i._calcInverseTransform=ts,i._calcInverseTransform(r),i._container=n.selectAll(".plot-container").data([0]),i._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),i._paperdiv=i._container.selectAll(".svg-container").data([0]),i._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),i._glcontainer=i._paperdiv.selectAll(".gl-container").data([{}]),i._glcontainer.enter().append("div").classed("gl-container",!0),i._paperdiv.selectAll(".main-svg").remove(),i._paperdiv.select(".modebar-container").remove(),i._paper=i._paperdiv.insert("svg",":first-child").classed("main-svg",!0),i._toppaper=i._paperdiv.append("svg").classed("main-svg",!0),i._modebardiv=i._paperdiv.append("div"),delete i._modeBar,i._hoverpaper=i._paperdiv.append("svg").classed("main-svg",!0),!i._uid){var o={};a.selectAll("defs").each(function(){this.id&&(o[this.id.split("-")[1]]=1)}),i._uid=l.randstr(o)}i._paperdiv.selectAll(".main-svg").attr(_.svgAttrs),i._defs=i._paper.append("defs").attr("id","defs-"+i._uid),i._clips=i._defs.append("g").classed("clips",!0),i._topdefs=i._toppaper.append("defs").attr("id","topdefs-"+i._uid),i._topclips=i._topdefs.append("g").classed("clips",!0),i._bgLayer=i._paper.append("g").classed("bglayer",!0),i._draggers=i._paper.append("g").classed("draglayer",!0);var s=i._paper.append("g").classed("layer-below",!0);i._imageLowerLayer=s.append("g").classed("imagelayer",!0),i._shapeLowerLayer=s.append("g").classed("shapelayer",!0),i._cartesianlayer=i._paper.append("g").classed("cartesianlayer",!0),i._polarlayer=i._paper.append("g").classed("polarlayer",!0),i._smithlayer=i._paper.append("g").classed("smithlayer",!0),i._ternarylayer=i._paper.append("g").classed("ternarylayer",!0),i._geolayer=i._paper.append("g").classed("geolayer",!0),i._funnelarealayer=i._paper.append("g").classed("funnelarealayer",!0),i._pielayer=i._paper.append("g").classed("pielayer",!0),i._iciclelayer=i._paper.append("g").classed("iciclelayer",!0),i._treemaplayer=i._paper.append("g").classed("treemaplayer",!0),i._sunburstlayer=i._paper.append("g").classed("sunburstlayer",!0),i._indicatorlayer=i._toppaper.append("g").classed("indicatorlayer",!0),i._glimages=i._paper.append("g").classed("glimages",!0);var c=i._toppaper.append("g").classed("layer-above",!0);i._imageUpperLayer=c.append("g").classed("imagelayer",!0),i._shapeUpperLayer=c.append("g").classed("shapelayer",!0),i._selectionLayer=i._toppaper.append("g").classed("selectionlayer",!0),i._infolayer=i._toppaper.append("g").classed("infolayer",!0),i._menulayer=i._toppaper.append("g").classed("menulayer",!0),i._zoomlayer=i._toppaper.append("g").classed("zoomlayer",!0),i._hoverlayer=i._hoverpaper.append("g").classed("hoverlayer",!0),i._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),r.emit("plotly_framework")}(r),g._shouldCreateBgLayer&&delete g._shouldCreateBgLayer),m.initGradients(r),m.initPatterns(r),p&&y.saveShowSpikeInitial(r);var x=!r.calcdata||r.calcdata.length!==(r._fullData||[]).length;x&&d.doCalcdata(r);for(var w=0;w<r.calcdata.length;w++)r.calcdata[w][0].trace=r._fullData[w];r._context.responsive?r._responsiveChartHandler||(r._responsiveChartHandler=function(){l.isHidden(r)||d.resize(r)},window.addEventListener("resize",r._responsiveChartHandler)):l.clearResponsive(r);var T=l.extendFlat({},g._size),A=0;function S(){if(d.clearAutoMarginIds(r),M.drawMarginPushers(r),y.allowAutoMargin(r),r._fullLayout.title.text&&r._fullLayout.title.automargin&&d.allowAutoMargin(r,"title.automargin"),g._has("pie"))for(var n=r._fullData,i=0;i<n.length;i++){var a=n[i];"pie"===a.type&&a.automargin&&d.allowAutoMargin(r,"pie."+a.uid+".automargin")}return d.doAutoMargin(r),d.previousPromises(r)}function E(){r._transitioning||(M.doAutoRangeAndConstraints(r),p&&y.saveRangeInitial(r),h.getComponentMethod("rangeslider","calcAutorange")(r))}var I=[d.previousPromises,function(){if(c)return n.addFrames(r,c)},function n(){for(var i=g._basePlotModules,a=0;a<i.length;a++)i[a].drawFramework&&i[a].drawFramework(r);!g._glcanvas&&g._has("gl")&&(g._glcanvas=g._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(r){return r.key}),g._glcanvas.enter().append("canvas").attr("class",function(r){return"gl-canvas gl-canvas-"+r.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var o=r._context.plotGlPixelRatio;if(g._glcanvas){g._glcanvas.attr("width",g.width*o).attr("height",g.height*o).style("width",g.width+"px").style("height",g.height+"px");var s=g._glcanvas.data()[0].regl;if(s&&(Math.floor(g.width*o)!==s._gl.drawingBufferWidth||Math.floor(g.height*o)!==s._gl.drawingBufferHeight)){var c="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!A)return l.log(c+" Clearing graph and plotting again."),d.cleanPlot([],{},r._fullData,g),d.supplyDefaults(r),g=r._fullLayout,d.doCalcdata(r),A++,n();l.error(c)}}return"h"===g.modebar.orientation?g._modebardiv.style("height",null).style("width","100%"):g._modebardiv.style("width",null).style("height",g.height+"px"),d.previousPromises(r)},S,function(){if(d.didMarginChange(T,g._size))return l.syncOrAsync([S,M.layoutStyles],r)}];v&&I.push(function(){if(x)return l.syncOrAsync([h.getComponentMethod("shapes","calcAutorange"),h.getComponentMethod("annotations","calcAutorange"),E],r);E()}),I.push(M.layoutStyles),v&&I.push(function(){return y.draw(r,p?"":"redraw")},function(r){var n=r._fullLayout._insideTickLabelsUpdaterange;if(n)return r._fullLayout._insideTickLabelsUpdaterange=void 0,G(r,n).then(function(){y.saveRangeInitial(r,!0)})}),I.push(M.drawData,M.finalDraw,b,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,d.previousPromises);var C=l.syncOrAsync(I,r);return C&&C.then||(C=Promise.resolve()),C.then(function(){return L(r),r})},n.purge=function(r){var n=(r=l.getGraphDiv(r))._fullLayout||{},i=r._fullData||[];return d.cleanPlot([],{},i,n),d.purge(r),u.purge(r),n._container&&n._container.remove(),delete r._context,r},n.react=function(r,i,a,o){r=l.getGraphDiv(r),k.clearPromiseQueue(r);var s,u,f=r._fullData,y=r._fullLayout;if(l.isPlotDiv(r)&&f&&y){if(l.isPlainObject(i)){var g,v,m=i;i=m.data,a=m.layout,o=m.config,s=m.frames}var x=!1;if(o){var b=l.extendDeep({},r._context);r._context=void 0,D(r,o),x=function r(n,i){var a;for(a in n)if("_"!==a.charAt(0)){var o=n[a],s=i[a];if(o!==s){if(l.isPlainObject(o)&&l.isPlainObject(s)){if(r(o,s))return!0}else{if(!Array.isArray(o)||!Array.isArray(s)||o.length!==s.length)return!0;for(var c=0;c<o.length;c++)if(o[c]!==s[c]&&(!l.isPlainObject(o[c])||!l.isPlainObject(s[c])||r(o[c],s[c])))return!0}}}}(b,r._context)}r.data=i||[],k.cleanData(r.data),r.layout=a||{},k.cleanLayout(r.layout),function(r,n,i,a){var o,s,u,f,h,p,d,y,g,v,m=a._preGUI,x=[],b={},_={};for(o in m){if(h=tn(o,te)){if(g=h.head,v=h.tail,(f=(u=c(a,s=h.attr||g+".uirevision").get())&&ti(s,n))&&f===u){if(null===(p=m[o])&&(p=void 0),ta(y=(d=c(n,o)).get(),p)){void 0===y&&"autorange"===v&&x.push(g),d.set(U(c(a,o).get()));continue}if("autorange"===v||"range["===v.substr(0,6)){var w=m[g+".range[0]"],T=m[g+".range[1]"],A=m[g+".autorange"];if(A||null===A&&null===w&&null===T){if(!(g in b)){var k=c(n,g).get();b[g]=k&&(k.autorange||!1!==k.autorange&&(!k.range||2!==k.range.length))}if(b[g]){d.set(U(c(a,o).get()));continue}}}}}else l.warn("unrecognized GUI edit: "+o);delete m[o],h&&"range["===h.tail.substr(0,6)&&(_[h.head]=1)}for(var M=0;M<x.length;M++){var S=x[M];if(_[S]){var E=c(n,S).get();E&&delete E.autorange}}var I=a._tracePreGUI;for(var L in I){var C,O=I[L],D=null;for(o in O){if(!D){var P=function(r,n){for(var i=0;i<n.length;i++)if(n[i]._fullInput.uid===r)return i;return -1}(L,i);if(P<0){delete I[L];break}var B=function(r,n,i){for(var a=0;a<n.length;a++)if(n[a].uid===r)return a;return!n[i]||n[i].uid?-1:i}(L,r,(C=i[P]._fullInput).index);if(B<0){delete I[L];break}D=r[B]}if(h=tn(o,tr)){if(h.attr?f=(u=c(a,h.attr).get())&&ti(h.attr,n):(u=C.uirevision,void 0===(f=D.uirevision)&&(f=n.uirevision)),f&&f===u&&(null===(p=O[o])&&(p=void 0),ta(y=(d=c(D,o)).get(),p))){d.set(U(c(C,o).get()));continue}}else l.warn("unrecognized GUI edit: "+o+" in trace uid "+L);delete O[o]}}}(r.data,r.layout,f,y),d.supplyDefaults(r,{skipUpdateCalc:!0});var _=r._fullData,w=r._fullLayout,T=void 0===w.datarevision,A=w.transition,E=(g=r,(v=S.layoutFlags()).arrays={},v.rangesAltered={},v.nChanges=0,v.nChangesAnim=0,to(y,w,[],{getValObject:function(r){return p.getLayoutValObject(w,r)},flags:v,immutable:T,transition:A,gd:g}),(v.plot||v.calc)&&(v.layoutReplot=!0),A&&v.nChanges&&v.nChangesAnim&&(v.anim=v.nChanges===v.nChangesAnim?"all":"some"),v),I=E.newDataRevision,C=function(r,n,i,a,o,s){var l=n.length===i.length;if(!o&&!l)return{fullReplot:!0,calc:!0};var c,u,f=S.traceFlags();f.arrays={},f.nChanges=0,f.nChangesAnim=0;var h={getValObject:function(r){var n=p.getTraceValObject(u,r);return!u._module.animatable&&n.anim&&(n.anim=!1),n},flags:f,immutable:a,transition:o,newDataRevision:s,gd:r},y={};for(c=0;c<n.length;c++)if(i[c]){if(u=i[c]._fullInput,d.hasMakesDataTransform(u)&&(u=i[c]),y[u.uid])continue;y[u.uid]=1,to(n[c]._fullInput,u,[],h)}return(f.calc||f.plot)&&(f.fullReplot=!0),o&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim&&l?"all":"some"),f}(r,f,_,T,A,I);if($(r)&&(E.layoutReplot=!0),C.calc||E.calc){r.calcdata=void 0;for(var O=Object.getOwnPropertyNames(w),P=0;P<O.length;P++){var B=O[P],R=B.substring(0,5);if("xaxis"===R||"yaxis"===R){var z=w[B]._emptyCategories;z&&z()}}}else d.supplyDefaultsUpdateCalc(r.calcdata,_);var F=[];if(s&&(r._transitionData={},d.createTransitionData(r),F.push(function(){return n.addFrames(r,s)})),w.transition&&!x&&(C.anim||E.anim))E.ticks&&F.push(M.doTicksRelayout),d.doCalcdata(r),M.doAutoRangeAndConstraints(r),F.push(function(){return d.transitionFromReact(r,C,E,y)});else if(C.fullReplot||E.layoutReplot||x)r._fullLayout._skipDefaults=!0,F.push(n._doPlot);else{for(var N in E.arrays){var j=E.arrays[N];if(j.length){var V=h.getComponentMethod(N,"drawOne");if(V!==l.noop)for(var H=0;H<j.length;H++)V(r,j[H]);else{var q=h.getComponentMethod(N,"draw");if(q===l.noop)throw Error("cannot draw components: "+N);q(r)}}}F.push(d.previousPromises),C.style&&F.push(M.doTraceStyle),(C.colorbars||E.colorbars)&&F.push(M.doColorBars),E.legend&&F.push(M.doLegend),E.layoutstyle&&F.push(M.layoutStyles),E.axrange&&Y(F),E.ticks&&F.push(M.doTicksRelayout),E.modebar&&F.push(M.doModeBar),E.camera&&F.push(M.doCamera),F.push(L)}F.push(d.rehover,d.redrag,d.reselect),(u=l.syncOrAsync(F,r))&&u.then||(u=Promise.resolve(r))}else u=n.newPlot(r,i,a,o);return u.then(function(){return r.emit("plotly_react",{data:i,layout:a}),r})},n.redraw=function(r){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r);return k.cleanData(r.data),k.cleanLayout(r.layout),r.calcdata=void 0,n._doPlot(r).then(function(){return r.emit("plotly_redraw"),r})},n.relayout=G,n.restyle=N,n.setPlotConfig=function(r){return l.extendFlat(T,r)},n.update=Q,n._guiRelayout=tt(G),n._guiRestyle=tt(N),n._guiUpdate=tt(Q),n._storeDirectGUIEdit=function(r,n,i){for(var a in i)V(a,c(r,a).get(),i[a],n)}},20556:function(r){var n={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};(function r(n,i){for(var a in n){var o=n[a];o.valType?i[a]=o.dflt:(i[a]||(i[a]={}),r(o,i[a]))}})(n,i),r.exports={configAttributes:n,dfltConfig:i}},73060:function(r,n,i){var a=i(24040),o=i(3400),s=i(45464),l=i(64859),c=i(16672),u=i(85656),f=i(20556).configAttributes,h=i(67824),p=o.extendDeepAll,d=o.isPlainObject,y=o.isArrayOrTypedArray,g=o.nestedProperty,v=o.valObjectMeta,m="_isSubplotObj",x="_isLinkedToArray",b="_deprecated",_=[m,x,"_arrayAttrRegexps",b];function w(r,n,i){if(!r)return!1;if(r._isLinkedToArray){if(T(n[i]))i++;else if(i<n.length)return!1}for(;i<n.length;i++){var a=r[n[i]];if(!d(a)||(r=a,i===n.length-1))break;if(r._isLinkedToArray){if(!T(n[++i]))return!1}else if("info_array"===r.valType){var o=n[++i];if(!T(o))return!1;var s=r.items;if(Array.isArray(s)){if(o>=s.length)return!1;if(2===r.dimensions){if(i++,n.length===i)return r;var l=n[i];if(!T(l))return!1;r=s[o][l]}else r=s[o]}else r=s}}return r}function T(r){return r===Math.round(r)&&r>=0}function A(r){return n.crawl(r,function(r,i,a){n.isValObject(r)?!0!==r.arrayOk&&"data_array"!==r.valType||(a[i+"src"]={valType:"string",editType:"none"}):d(r)&&(r.role="object")}),n.crawl(r,function(r,n,i){if(r){var a=r[x];a&&(delete r[x],i[n]={items:{}},i[n].items[a]=r,i[n].role="object")}}),function r(n){for(var i in n)if(d(n[i]))r(n[i]);else if(Array.isArray(n[i]))for(var a=0;a<n[i].length;a++)r(n[i][a]);else n[i]instanceof RegExp&&(n[i]=n[i].toString())}(r),r}function k(r,n,i){var a=g(r,i),o=p({},n.layoutAttributes);o[m]=!0,a.set(o)}function M(r,n,i){var a=g(r,i);a.set(p(a.get()||{},n))}n.IS_SUBPLOT_OBJ=m,n.IS_LINKED_TO_ARRAY=x,n.DEPRECATED=b,n.UNDERSCORE_ATTRS=_,n.get=function(){var r={};a.allTypes.forEach(function(i){r[i]=function(r){o=(i=a.modules[r]._module).basePlotModule;var i,o,l={type:null},c=p({},s),u=p({},i.attributes);n.crawl(u,function(r,n,i,a,o){g(c,o).set(void 0),void 0===r&&g(u,o).set(void 0)}),p(l,c),a.traceIs(r,"noOpacity")&&delete l.opacity,a.traceIs(r,"showLegend")||(delete l.showlegend,delete l.legendgroup),a.traceIs(r,"noHover")&&(delete l.hoverinfo,delete l.hoverlabel),i.selectPoints||delete l.selectedpoints,p(l,u),o.attributes&&p(l,o.attributes),l.type=r;var f={meta:i.meta||{},categories:i.categories||{},animatable:!!i.animatable,type:r,attributes:A(l)};if(i.layoutAttributes){var h={};p(h,i.layoutAttributes),f.layoutAttributes=A(h)}return i.animatable||n.crawl(f,function(r){n.isValObject(r)&&"anim"in r&&delete r.anim}),f}(i)});var i,o={};return Object.keys(a.transformsRegistry).forEach(function(r){var n;o[r]=(n=p({},a.transformsRegistry[r].attributes),Object.keys(a.componentsRegistry).forEach(function(i){var o=a.componentsRegistry[i];o.schema&&o.schema.transforms&&o.schema.transforms[r]&&Object.keys(o.schema.transforms[r]).forEach(function(i){M(n,o.schema.transforms[r][i],i)})}),{attributes:A(n)})}),{defs:{valObjects:v,metaKeys:_.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:r,layout:function(){var r,n,i={};for(r in p(i,l),a.subplotsRegistry)if((n=a.subplotsRegistry[r]).layoutAttributes){if(Array.isArray(n.attr))for(var o=0;o<n.attr.length;o++)k(i,n,n.attr[o]);else k(i,n,"subplot"===n.attr?n.name:n.attr)}for(r in a.componentsRegistry){var s=(n=a.componentsRegistry[r]).schema;if(s&&(s.subplots||s.layout)){var c=s.subplots;if(c&&c.xaxis&&!c.yaxis)for(var u in c.xaxis)delete i.yaxis[u];delete i.xaxis.shift,delete i.xaxis.autoshift}else"colorscale"===n.name?p(i,n.layoutAttributes):n.layoutAttributes&&M(i,n.layoutAttributes,n.name)}return{layoutAttributes:A(i)}}(),transforms:o,frames:(A(i={frames:p({},c)}),i.frames),animation:A(u),config:A(f)}},n.crawl=function(r,i,a,o){var s=a||0;o=o||"",Object.keys(r).forEach(function(a){var l=r[a];if(-1===_.indexOf(a)){var c=(o?o+".":"")+a;i(l,a,r,s,c),n.isValObject(l)||d(l)&&"impliedEdits"!==a&&n.crawl(l,i,s+1,c)}})},n.isValObject=function(r){return r&&void 0!==r.valType},n.findArrayAttributes=function(r){var i,a,o=[],l=[],c=[];function u(r,n,s,u){l=l.slice(0,u).concat([n]),c=c.slice(0,u).concat([r&&r._isLinkedToArray]),r&&("data_array"===r.valType||!0===r.arrayOk)&&("colorbar"!==l[u-1]||"ticktext"!==n&&"tickvals"!==n)&&function r(n,i,s){var u=n[l[i]],f=s+l[i];if(i===l.length-1)y(u)&&o.push(a+f);else if(c[i]){if(Array.isArray(u))for(var h=0;h<u.length;h++)d(u[h])&&r(u[h],i+1,f+"["+h+"].")}else d(u)&&r(u,i+1,f+".")}(i,0,"")}i=r,a="",n.crawl(s,u),r._module&&r._module.attributes&&n.crawl(r._module.attributes,u);var f=r.transforms;if(f)for(var h=0;h<f.length;h++){var p=f[h],g=p._module;g&&(a="transforms["+h+"].",i=p,n.crawl(g.attributes,u))}return o},n.getTraceValObject=function(r,n){var i,o,l=n[0],c=1;if("transforms"===l){if(1===n.length)return s.transforms;var u=r.transforms;if(!Array.isArray(u)||!u.length)return!1;var f=n[1];if(!T(f)||f>=u.length)return!1;o=(i=(a.transformsRegistry[u[f].type]||{}).attributes)&&i[n[2]],c=3}else{var h=r._module;if(h||(h=(a.modules[r.type||s.type.dflt]||{})._module),!h)return!1;if(!(o=(i=h.attributes)&&i[l])){var p=h.basePlotModule;p&&p.attributes&&(o=p.attributes[l])}o||(o=s[l])}return w(o,n,c)},n.getLayoutValObject=function(r,n){return w(function(r,n){var i,o,s,c,u,f=r._basePlotModules;if(f){for(o=0;o<f.length;o++){if((c=f[o]).attrRegex&&c.attrRegex.test(n)){if(c.layoutAttrOverrides)return c.layoutAttrOverrides;!i&&c.layoutAttributes&&(i=c.layoutAttributes)}var h=c.baseLayoutAttrOverrides;if(h&&n in h)return h[n]}if(i)return i}var p=r._modules;if(p){for(o=0;o<p.length;o++)if((u=p[o].layoutAttributes)&&n in u)return u[n]}for(s in a.componentsRegistry){if("colorscale"===(c=a.componentsRegistry[s]).name&&0===n.indexOf("coloraxis"))return c.layoutAttributes[n];if(!c.schema&&n===c.name)return c.layoutAttributes}return n in l&&l[n]}(r,n[0]),n,1)}},31780:function(r,n,i){var a=i(3400),o=i(45464),s="templateitemname",l={name:{valType:"string",editType:"none"}};function c(r){return r&&"string"==typeof r}function u(r){var n=r.length-1;return"s"!==r.charAt(n)&&a.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}l[s]={valType:"string",editType:"calc"},n.templatedArray=function(r,n){return n._isLinkedToArray=r,n.name=l.name,n[s]=l[s],n},n.traceTemplater=function(r){var n,i,s={};for(n in r)Array.isArray(i=r[n])&&i.length&&(s[n]=0);return{newTrace:function(l){var c={type:n=a.coerce(l,{},o,"type"),_template:null};if(n in s){i=r[n];var u=s[n]%i.length;s[n]++,c._template=i[u]}return c}}},n.newContainer=function(r,n,i){var o=r._template,s=o&&(o[n]||i&&o[i]);return a.isPlainObject(s)||(s=null),r[n]={_template:s}},n.arrayTemplater=function(r,n,i){var a=r._template,o=a&&a[u(n)],l=a&&a[n];Array.isArray(l)&&l.length||(l=[]);var f={};return{newItem:function(r){var n={name:r.name,_input:r},a=n[s]=r[s];if(!c(a))return n._template=o,n;for(var u=0;u<l.length;u++){var h=l[u];if(h.name===a)return f[a]=1,n._template=h,n}return n[i]=r[i]||!1,n._template=!1,n},defaultItems:function(){for(var r=[],n=0;n<l.length;n++){var i=l[n],a=i.name;if(c(a)&&!f[a]){var o={_template:i,name:a,_input:{_templateitemname:a}};o[s]=i[s],r.push(o),f[a]=1}}return r}}},n.arrayDefaultKey=u,n.arrayEditor=function(r,n,i){var o=(a.nestedProperty(r,n).get()||[]).length,l=i._index,c=l>=o&&(i._input||{})._templateitemname;c&&(l=o);var u,f=n+"["+l+"]";function h(){u={},c&&(u[f]={},u[f][s]=c)}function p(r,n){c?a.nestedProperty(u[f],r).set(n):u[f+"."+r]=n}function d(){var r=u;return h(),r}return h(),{modifyBase:function(r,n){u[r]=n},modifyItem:p,getUpdateObj:d,applyUpdate:function(n,i){n&&p(n,i);var o=d();for(var s in o)a.nestedProperty(r,s).set(o[s])}}}},39172:function(r,n,i){var a=i(33428),o=i(24040),s=i(7316),l=i(3400),c=i(72736),u=i(73696),f=i(76308),h=i(43616),p=i(81668),d=i(45460),y=i(54460),g=i(84284),v=i(71888),m=v.enforce,x=v.clean,b=i(19280).doAutoRange,_="start",w=i(33816).zindexSeparator;function T(r){var i,o,c,u,p,v,m=r._fullLayout,x=m._size,b=x.p,_=y.list(r,"",!0);if(m._paperdiv.style({width:r._context.responsive&&m.autosize&&!r._context._hasZeroWidth&&!r.layout.width?"100%":m.width+"px",height:r._context.responsive&&m.autosize&&!r._context._hasZeroHeight&&!r.layout.height?"100%":m.height+"px"}).selectAll(".main-svg").call(h.setSize,m.width,m.height),r._context.setBackground(r,m.paper_bgcolor),n.drawMainTitle(r),d.manage(r),!m._has("cartesian"))return s.previousPromises(r);function T(r,n,i){var a=r._lw/2;return"x"===r._id.charAt(0)?n?"top"===i?n._offset-b-a:n._offset+n._length+b+a:x.t+x.h*(1-(r.position||0))+a%1:n?"right"===i?n._offset+n._length+b+a:n._offset-b-a:x.l+x.w*(r.position||0)+a%1}for(i=0;i<_.length;i++){var k=(u=_[i])._anchorAxis;u._linepositions={},u._lw=h.crispRound(r,u.linewidth,1),u._mainLinePosition=T(u,k,u.side),u._mainMirrorPosition=u.mirror&&k?T(u,k,g.OPPOSITE_SIDE[u.side]):null}var S=[],E=[],I=[],L=1===f.opacity(m.paper_bgcolor)&&1===f.opacity(m.plot_bgcolor)&&m.paper_bgcolor===m.plot_bgcolor;for(o in m._plots)if((c=m._plots[o]).mainplot)c.bg&&c.bg.remove(),c.bg=void 0;else{var C=c.xaxis.domain,O=c.yaxis.domain,D=c.plotgroup;if(function(r,n,i){for(var a=0;a<i.length;a++){var o=i[a][0],s=i[a][1];if(!(o[0]>=r[1]||o[1]<=r[0])&&s[0]<n[1]&&s[1]>n[0])return!0}return!1}(C,O,I)&&-1===o.indexOf(w)){var P=D.node(),B=c.bg=l.ensureSingle(D,"rect","bg");P.insertBefore(B.node(),P.childNodes[0]),E.push(o)}else D.select("rect.bg").remove(),I.push([C,O]),L||(S.push(o),E.push(o))}var R,z,F,N,U,j,V,H,q,G,W,Y,Z,X=m._bgLayer.selectAll(".bg").data(S);for(X.enter().append("rect").classed("bg",!0),X.exit().remove(),X.each(function(r){m._plots[r].bg=a.select(this)}),i=0;i<E.length;i++)p=(c=m._plots[E[i]]).xaxis,v=c.yaxis,c.bg&&void 0!==p._offset&&void 0!==v._offset&&c.bg.call(h.setRect,p._offset-b,v._offset-b,p._length+2*b,v._length+2*b).call(f.fill,m.plot_bgcolor).style("stroke-width",0);if(!m._hasOnlyLargeSploms)for(o in m._plots){p=(c=m._plots[o]).xaxis,v=c.yaxis;var K,J,$=c.clipId="clip"+m._uid+o+"plot",Q=l.ensureSingleById(m._clips,"clipPath",$,function(r){r.classed("plotclip",!0).append("rect")});c.clipRect=Q.select("rect").attr({width:p._length,height:v._length}),h.setTranslate(c.plot,p._offset,v._offset),c._hasClipOnAxisFalse?(K=null,J=$):(K=$,J=null),h.setClipUrl(c.plot,K,r),c.layerClipId=J}function tt(r){return"M"+R+","+r+"H"+z}function te(r){return"M"+p._offset+","+r+"h"+p._length}function tr(r){return"M"+r+","+H+"V"+V}function tn(r){return void 0!==v._shift&&(r+=v._shift),"M"+r+","+v._offset+"v"+v._length}function ti(r,n,i){if(!r.showline||o!==r._mainSubplot)return"";if(!r._anchorAxis)return i(r._mainLinePosition);var a=n(r._mainLinePosition);return r.mirror&&(a+=n(r._mainMirrorPosition)),a}for(o in m._plots){p=(c=m._plots[o]).xaxis,v=c.yaxis;var ta="M0,0";A(p,o)&&(U=M(p,"left",v,_),R=p._offset-(U?b+U:0),j=M(p,"right",v,_),z=p._offset+p._length+(j?b+j:0),F=T(p,v,"bottom"),N=T(p,v,"top"),(Z=!p._anchorAxis||o!==p._mainSubplot)&&("allticks"===p.mirror||"all"===p.mirror)&&(p._linepositions[o]=[F,N]),ta=ti(p,tt,te),Z&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(ta+=tt(F)+tt(N)),c.xlines.style("stroke-width",p._lw+"px").call(f.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),c.xlines.attr("d",ta);var to="M0,0";A(v,o)&&(W=M(v,"bottom",p,_),V=v._offset+v._length+(W?b:0),Y=M(v,"top",p,_),H=v._offset-(Y?b:0),q=T(v,p,"left"),G=T(v,p,"right"),(Z=!v._anchorAxis||o!==v._mainSubplot)&&("allticks"===v.mirror||"all"===v.mirror)&&(v._linepositions[o]=[q,G]),to=ti(v,tr,tn),Z&&v.showline&&("all"===v.mirror||"allticks"===v.mirror)&&(to+=tr(q)+tr(G)),c.ylines.style("stroke-width",v._lw+"px").call(f.stroke,v.showline?v.linecolor:"rgba(0,0,0,0)")),c.ylines.attr("d",to)}return y.makeClipPaths(r),s.previousPromises(r)}function A(r,n){return(r.ticks||r.showline)&&(n===r._mainSubplot||"all"===r.mirror||"allticks"===r.mirror)}function k(r,n,i){if(!i.showline||!i._lw)return!1;if("all"===i.mirror||"allticks"===i.mirror)return!0;var a=i._anchorAxis;if(!a)return!1;var o=g.FROM_BL[n];return i.side===n?a.domain[o]===r.domain[o]:i.mirror&&a.domain[1-o]===r.domain[1-o]}function M(r,n,i,a){if(k(r,n,i))return i._lw;for(var o=0;o<a.length;o++){var s=a[o];if(s._mainAxis===i._mainAxis&&k(r,n,s))return s._lw}return 0}function S(r){return"top"===r?g.CAP_SHIFT+.3+"em":"bottom"===r?"-0.3em":g.MID_SHIFT+"em"}n.layoutStyles=function(r){return l.syncOrAsync([s.doAutoMargin,T],r)},n.drawMainTitle=function(r){var n=r._fullLayout.title,i=r._fullLayout,o=(x=i.title,b="middle",l.isRightAnchor(x)?b="end":l.isLeftAnchor(x)&&(b=_),b),u=(w=i.title,T="0em",l.isTopAnchor(w)?T=g.CAP_SHIFT+"em":l.isMiddleAnchor(w)&&(T=g.MID_SHIFT+"em"),T),f=(A=i.title,k=i._size,M=0,"0em"!==u&&u?u===g.CAP_SHIFT+"em"&&(M=A.pad.t):M=-A.pad.b,"auto"===A.y?k.t/2:"paper"===A.yref?k.t+k.h-k.h*A.y+M:i.height-i.height*A.y+M),d=(E=i.title,I=i._size,L=0,o===_?L=E.pad.l:"end"===o&&(L=-E.pad.r),"paper"===E.xref?I.l+I.w*E.x+L:i.width*E.x+L);if(p.draw(r,"gtitle",{propContainer:i,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:i._dfltTitle.plot,subtitlePlaceholder:i._dfltTitle.subtitle,attributes:{x:d,y:f,"text-anchor":o,dy:u}}),n.text&&n.automargin){var y=a.selectAll(".gtitle"),v=h.bBox(a.selectAll(".g-gtitle").node()).height,m=(C=n.y,O=n.yanchor,D=C>.5?"t":"b",P=r._fullLayout.margin[D],B=0,"paper"===n.yref?B=v+n.pad.t+n.pad.b:"container"===n.yref&&(R=r._fullLayout.height,z=0,"middle"===O&&(z+=v/2),"t"===D?("top"===O&&(z+=v),z+=R-C*R):("bottom"===O&&(z+=v),z+=C*R),B=z+n.pad.t+n.pad.b),B>P?B:0);if(m>0){F="title.automargin",U=(N=r._fullLayout.title).y>.5?"t":"b",j={x:N.x,y:N.y,t:0,b:0},V={},"paper"===N.yref&&(H="paper"===N.yref?r._fullLayout._size.h:r._fullLayout.height,q=l.isTopAnchor(N)?f:f-v,!(l.isTopAnchor(N)&&"t"===U||l.isBottomAnchor(N)&&"b"===U)&&("b"===U?H-q:q)<v)?j[U]=m:"container"===N.yref&&(V[U]=m,r._fullLayout._reservedMargin[F]=V),s.allowAutoMargin(r,F),s.autoMargin(r,F,j),y.attr({x:d,y:f,"text-anchor":o,dy:S(n.yanchor)}).call(c.positionText,d,f);var x,b,w,T,A,k,M,E,I,L,C,O,D,P,B,R,z,F,N,U,j,V,H,q,G=(n.text.match(c.BR_TAG_ALL)||[]).length;if(G){var W=g.LINE_SPACING*G+g.MID_SHIFT;0===n.y&&(W=-W),y.selectAll(".line").each(function(){var r=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",r)})}var Y=a.selectAll(".gtitle-subtitle");if(Y.node()){var Z=y.node().getBBox(),X=Z.y+Z.height+p.SUBTITLE_PADDING_EM*n.subtitle.font.size;Y.attr({x:d,y:X,"text-anchor":o,dy:S(n.yanchor)}).call(c.positionText,d,X)}}}},n.doTraceStyle=function(r){var i,a=r.calcdata,l=[];for(i=0;i<a.length;i++){var c=a[i],f=c[0]||{},h=f.trace||{},p=h._module||{},d=p.arraysToCalcdata;d&&d(c,h);var y=p.editStyle;y&&l.push({fn:y,cd0:f})}if(l.length){for(i=0;i<l.length;i++){var g=l[i];g.fn(r,g.cd0)}u(r),n.redrawReglTraces(r)}return s.style(r),o.getComponentMethod("legend","draw")(r),s.previousPromises(r)},n.doColorBars=function(r){return o.getComponentMethod("colorbar","draw")(r),s.previousPromises(r)},n.layoutReplot=function(r){var n=r.layout;return r.layout=void 0,o.call("_doPlot",r,"",n)},n.doLegend=function(r){return o.getComponentMethod("legend","draw")(r),s.previousPromises(r)},n.doTicksRelayout=function(r){return y.draw(r,"redraw"),r._fullLayout._hasOnlyLargeSploms&&(o.subplotsRegistry.splom.updateGrid(r),u(r),n.redrawReglTraces(r)),n.drawMainTitle(r),s.previousPromises(r)},n.doModeBar=function(r){var n=r._fullLayout;d.manage(r);for(var i=0;i<n._basePlotModules.length;i++){var a=n._basePlotModules[i].updateFx;a&&a(r)}return s.previousPromises(r)},n.doCamera=function(r){for(var n=r._fullLayout,i=n._subplots.gl3d,a=0;a<i.length;a++){var o=n[i[a]];o._scene.setViewport(o)}},n.drawData=function(r){var i=r._fullLayout;u(r);for(var a=i._basePlotModules,l=0;l<a.length;l++)a[l].plot(r);return n.redrawReglTraces(r),s.style(r),o.getComponentMethod("selections","draw")(r),o.getComponentMethod("shapes","draw")(r),o.getComponentMethod("annotations","draw")(r),o.getComponentMethod("images","draw")(r),i._replotting=!1,s.previousPromises(r)},n.redrawReglTraces=function(r){var n=r._fullLayout;if(n._has("regl")){var i,a,o=r._fullData,s=[],c=[];for(n._hasOnlyLargeSploms&&n._splomGrid.draw(),i=0;i<o.length;i++){var u=o[i];!0===u.visible&&0!==u._length&&("splom"===u.type?n._splomScenes[u.uid].draw():"scattergl"===u.type?l.pushUnique(s,u.xaxis+u.yaxis):"scatterpolargl"===u.type&&l.pushUnique(c,u.subplot))}for(i=0;i<s.length;i++)(a=n._plots[s[i]])._scene&&a._scene.draw();for(i=0;i<c.length;i++)(a=n[c[i]]._subplot)._scene&&a._scene.draw()}},n.doAutoRangeAndConstraints=function(r){for(var n,i=y.list(r,"",!0),a={},o=0;o<i.length;o++)if(!a[(n=i[o])._id]){a[n._id]=1,x(r,n),b(r,n);var s=n._matchGroup;if(s)for(var l in s){var c=y.getFromId(r,l);b(r,c,n.range),a[l]=1}}m(r)},n.finalDraw=function(r){o.getComponentMethod("rangeslider","draw")(r),o.getComponentMethod("rangeselector","draw")(r)},n.drawMarginPushers=function(r){o.getComponentMethod("legend","draw")(r),o.getComponentMethod("rangeselector","draw")(r),o.getComponentMethod("sliders","draw")(r),o.getComponentMethod("updatemenus","draw")(r),o.getComponentMethod("colorbar","draw")(r)}},94828:function(r,n,i){var a=i(3400),o=a.isPlainObject,s=i(73060),l=i(7316),c=i(45464),u=i(31780),f=i(20556).dfltConfig;function h(r,n){var i,s,l=Object.keys(r=a.extendDeep({},r)).sort();function c(n,i,a){if(o(i)&&o(n))h(n,i);else if(Array.isArray(i)&&Array.isArray(n)){var l=u.arrayTemplater({_template:r},a);for(s=0;s<i.length;s++){var c=i[s],f=l.newItem(c)._template;f&&h(f,c)}var p=l.defaultItems();for(s=0;s<p.length;s++)i.push(p[s]._template);for(s=0;s<i.length;s++)delete i[s].templateitemname}}for(i=0;i<l.length;i++){var f=l[i],d=r[f];if(f in n?c(d,n[f],f):n[f]=d,p(f)===f)for(var y in n){var g=p(y);y===g||g!==f||y in r||c(d,n[y],f)}}}function p(r){return r.replace(/[0-9]+$/,"")}function d(r,n,i,s,l){var c=l&&i(l);for(var f in r){var h=r[f],y=v(r,f,s),g=v(r,f,l),m=i(g);if(!m){var x=p(f);x!==f&&(m=i(g=v(r,x,l)))}if(!(c&&c===m||!m||m._noTemplating||"data_array"===m.valType||m.arrayOk&&Array.isArray(h))){if(!m.valType&&o(h))d(h,n,i,y,g);else if(m._isLinkedToArray&&Array.isArray(h))for(var b=!1,_=0,w={},T=0;T<h.length;T++){var A=h[T];if(o(A)){var k=A.name;if(k)w[k]||(d(A,n,i,v(h,_,y),v(h,_,g)),_++,w[k]=1);else if(!b){var M=v(r,u.arrayDefaultKey(f),s),S=v(h,_,y);d(A,n,i,S,v(h,_,g));var E=a.nestedProperty(n,S);a.nestedProperty(n,M).set(E.get()),E.set(null),b=!0}}}else a.nestedProperty(n,y).set(h)}}}function y(r,n){return s.getLayoutValObject(r,a.nestedProperty({},n).parts)}function g(r,n){return s.getTraceValObject(r,a.nestedProperty({},n).parts)}function v(r,n,i){return i?Array.isArray(r)?i+"["+n+"]":i+"."+n:n}function m(r){var n;switch(r.code){case"data":n="The template has no key data.";break;case"layout":n="The template has no key layout.";break;case"missing":n=r.path?"There are no templates for item "+r.path+" with name "+r.templateitemname:"There are no templates for trace "+r.index+", of type "+r.traceType+".";break;case"unused":n=r.path?"The template item at "+r.path+" was not used in constructing the plot.":r.dataCount?"Some of the templates of type "+r.traceType+" were not used. The template has "+r.templateCount+" traces, the data only has "+r.dataCount+" of this type.":"The template has "+r.templateCount+" traces of type "+r.traceType+" but there are none in the data.";break;case"reused":n="Some of the templates of type "+r.traceType+" were used more than once. The template has "+r.templateCount+" traces, the data has "+r.dataCount+" of this type."}return r.msg=n,r}n.makeTemplate=function(r){r=a.isPlainObject(r)?r:a.getGraphDiv(r),r=a.extendDeep({_context:f},{data:r.data,layout:r.layout}),l.supplyDefaults(r);var n=r.data||[],i=r.layout||{};i._basePlotModules=r._fullLayout._basePlotModules,i._modules=r._fullLayout._modules;var s={data:{},layout:{}};n.forEach(function(r){var n={};d(r,n,g.bind(null,r));var i=a.coerce(r,{},c,"type"),o=s.data[i];o||(o=s.data[i]=[]),o.push(n)}),d(i,s.layout,y.bind(null,i)),delete s.layout.template;var u=i.template;if(o(u)){var p,v,m,x,b,_,w=u.layout;o(w)&&h(w,s.layout);var T=u.data;if(o(T)){for(v in s.data)if(Array.isArray(m=T[v])){for(_=(b=s.data[v]).length,x=m.length,p=0;p<_;p++)h(m[p%x],b[p]);for(p=_;p<x;p++)b.push(a.extendDeep({},m[p]))}for(v in T)v in s.data||(s.data[v]=a.extendDeep([],T[v]))}}return s},n.validateTemplate=function(r,n){var i=a.extendDeep({},{_context:f,data:r.data,layout:r.layout}),s=i.layout||{};o(n)||(n=s.template||{});var c=n.layout,u=n.data,h=[];i.layout=s,i.layout.template=n,l.supplyDefaults(i);var d=i._fullLayout,y=i._fullData,g={};if(o(c)?(function r(n,i){for(var a in n)if("_"!==a.charAt(0)&&o(n[a])){var s,l=p(a),c=[];for(s=0;s<i.length;s++)c.push(v(n,a,i[s])),l!==a&&c.push(v(n,l,i[s]));for(s=0;s<c.length;s++)g[c[s]]=1;r(n[a],c)}}(d,["layout"]),function r(n,i){for(var a in n)if(-1===a.indexOf("defaults")&&o(n[a])){var s=v(n,a,i);g[s]?r(n[a],s):h.push({code:"unused",path:s})}}(c,"layout")):h.push({code:"layout"}),o(u)){for(var x,b={},_=0;_<y.length;_++){var w=y[_];b[x=w.type]=(b[x]||0)+1,w._fullInput._template||h.push({code:"missing",index:w._fullInput.index,traceType:x})}for(x in u){var T=u[x].length,A=b[x]||0;T>A?h.push({code:"unused",traceType:x,templateCount:T,dataCount:A}):A>T&&h.push({code:"reused",traceType:x,templateCount:T,dataCount:A})}}else h.push({code:"data"});if(function r(n,i){for(var a in n)if("_"!==a.charAt(0)){var s=n[a],l=v(n,a,i);o(s)?(Array.isArray(n)&&!1===s._template&&s.templateitemname&&h.push({code:"missing",path:l,templateitemname:s.templateitemname}),r(s,l)):Array.isArray(s)&&function(r){for(var n=0;n<r.length;n++)if(o(r[n]))return!0}(s)&&r(s,l)}}({data:y,layout:d},""),h.length)return h.map(m)}},67024:function(r,n,i){var a=i(38248),o=i(36424),s=i(7316),l=i(3400),c=i(81792),u=i(37164),f=i(63268),h=i(25788).version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};r.exports=function(r,n){function i(r){return!(r in n)||l.validate(n[r],p[r])}if(n=n||{},l.isPlainObject(r)?(d=r.data||[],y=r.layout||{},g=r.config||{},v={}):(r=l.getGraphDiv(r),d=l.extendDeep([],r.data),y=l.extendDeep({},r.layout),g=r._context,v=r._fullLayout||{}),!i("width")&&null!==n.width||!i("height")&&null!==n.height)throw Error("Height and width should be pixel values.");if(!i("format"))throw Error("Export format is not "+l.join2(p.format.values,", "," or ")+".");var d,y,g,v,m={};function x(r,i){return l.coerce(n,m,p,r,i)}var b=x("format"),_=x("width"),w=x("height"),T=x("scale"),A=x("setBackground"),k=x("imageDataOnly"),M=document.createElement("div");M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);var S=l.extendFlat({},y);_?S.width=_:null===n.width&&a(v.width)&&(S.width=v.width),w?S.height=w:null===n.height&&a(v.height)&&(S.height=v.height);var E=l.extendFlat({},g,{_exportedPlot:!0,staticPlot:!0,setBackground:A}),I=c.getRedrawFunc(M);function L(){return new Promise(function(r){setTimeout(r,c.getDelay(M._fullLayout))})}function C(){return new Promise(function(r,n){var i=u(M,b,T),a=M._fullLayout.width,p=M._fullLayout.height;function d(){o.purge(M),document.body.removeChild(M)}if("full-json"===b){var y=s.graphJson(M,!1,"keepdata","object",!0,!0);return y.version=h,y=JSON.stringify(y),d(),r(k?y:c.encodeJSON(y))}if(d(),"svg"===b)return r(k?i:c.encodeSVG(i));var g=document.createElement("canvas");g.id=l.randstr(),f({format:b,width:a,height:p,scale:T,canvas:g,svg:i,promise:!0}).then(r).catch(n)})}return new Promise(function(r,n){o.newPlot(M,d,S,E).then(I).then(L).then(C).then(function(n){r(k?n.replace(c.IMAGE_URL_PREFIX,""):n)}).catch(function(r){n(r)})})}},21480:function(r,n,i){var a=i(3400),o=i(7316),s=i(73060),l=i(20556).dfltConfig,c=a.isPlainObject,u=Array.isArray,f=a.isArrayOrTypedArray;function h(r,n,i,o,s,l){l=l||[];for(var p=Object.keys(r),d=0;d<p.length;d++){var g=p[d];if("transforms"!==g){var m=l.slice();m.push(g);var x=r[g],b=n[g],_=g in i?i[g]:i[v(g).keyMinusId],w=(_||{}).valType,T="info_array"===w,A="colorscale"===w,k=(_||{}).items;if(function(r,n){var i=v(n),a=i.keyMinusId,o=i.id;return!!(a in r&&r[a]._isSubplotObj&&o)||n in r}(i,g)){if(c(x)&&c(b)&&"any"!==w)h(x,b,_,o,s,m);else if(T&&u(x)){x.length>b.length&&o.push(y("unused",s,m.concat(b.length)));var M,S,E,I,L,C=b.length,O=Array.isArray(k);if(O&&(C=Math.min(C,k.length)),2===_.dimensions)for(S=0;S<C;S++)if(u(x[S])){x[S].length>b[S].length&&o.push(y("unused",s,m.concat(S,b[S].length)));var D=b[S].length;for(M=0;M<(O?Math.min(D,k[S].length):D);M++)E=O?k[S][M]:k,I=x[S][M],L=b[S][M],a.validate(I,E)?L!==I&&L!==+I&&o.push(y("dynamic",s,m.concat(S,M),I,L)):o.push(y("value",s,m.concat(S,M),I))}else o.push(y("array",s,m.concat(S),x[S]));else for(S=0;S<C;S++)E=O?k[S]:k,I=x[S],L=b[S],a.validate(I,E)?L!==I&&L!==+I&&o.push(y("dynamic",s,m.concat(S),I,L)):o.push(y("value",s,m.concat(S),I))}else if(_.items&&!T&&u(x)){var P,B,R=k[Object.keys(k)[0]],z=[];for(P=0;P<b.length;P++){var F=b[P]._index||P;if((B=m.slice()).push(F),c(x[F])&&c(b[P])){z.push(F);var N=x[F],U=b[P];c(N)&&!1!==N.visible&&!1===U.visible?o.push(y("invisible",s,B)):h(N,U,R,o,s,B)}}for(P=0;P<x.length;P++)(B=m.slice()).push(P),c(x[P])?-1===z.indexOf(P)&&o.push(y("unused",s,B)):o.push(y("object",s,B,x[P]))}else!c(x)&&c(b)?o.push(y("object",s,m,x)):f(x)||!f(b)||T||A?g in n?a.validate(x,_)?"enumerated"===_.valType&&(_.coerceNumber&&x!==+b||x!==b)&&o.push(y("dynamic",s,m,x,b)):o.push(y("value",s,m,x)):o.push(y("unused",s,m,x)):o.push(y("array",s,m,x))}else o.push(y("schema",s,m))}}return o}r.exports=function(r,n){void 0===r&&(r=[]),void 0===n&&(n={});var i,f,p=s.get(),d=[],g={_context:a.extendFlat({},l)};u(r)?(g.data=a.extendDeep([],r),i=r):(g.data=[],i=[],d.push(y("array","data"))),c(n)?(g.layout=a.extendDeep({},n),f=n):(g.layout={},f={},arguments.length>1&&d.push(y("object","layout"))),o.supplyDefaults(g);for(var v=g._fullData,m=i.length,x=0;x<m;x++){var b=i[x],_=["data",x];if(c(b)){var w=v[x],T=w.type,A=p.traces[T].attributes;A.type={valType:"enumerated",values:[T]},!1===w.visible&&!1!==b.visible&&d.push(y("invisible",_)),h(b,w,A,d,_);var k=b.transforms,M=w.transforms;if(k){u(k)||d.push(y("array",_,["transforms"])),_.push("transforms");for(var S=0;S<k.length;S++){var E=["transforms",S],I=k[S].type;if(c(k[S])){var L=p.transforms[I]?p.transforms[I].attributes:{};L.type={valType:"enumerated",values:Object.keys(p.transforms)},h(k[S],M[S],L,d,_,E)}else d.push(y("object",_,E))}}}else d.push(y("object",_))}return h(f,g._fullLayout,function(r,n){for(var i=r.layout.layoutAttributes,o=0;o<n.length;o++){var s=n[o],l=r.traces[s.type],c=l.layoutAttributes;c&&(s.subplot?a.extendFlat(i[l.attributes.subplot.dflt],c):a.extendFlat(i,c))}return i}(p,v),d,"layout"),0===d.length?void 0:d};var p={object:function(r,n){return("layout"===r&&""===n?"The layout argument":"data"===r[0]&&""===n?"Trace "+r[1]+" in the data argument":d(r)+"key "+n)+" must be linked to an object container"},array:function(r,n){return("data"===r?"The data argument":d(r)+"key "+n)+" must be linked to an array container"},schema:function(r,n){return d(r)+"key "+n+" is not part of the schema"},unused:function(r,n,i){var a=c(i)?"container":"key";return d(r)+a+" "+n+" did not get coerced"},dynamic:function(r,n,i,a){return[d(r)+"key",n,"(set to '"+i+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(r,n){return(n?d(r)+"item "+n:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,n,i){return[d(r)+"key "+n,"is set to an invalid value ("+i+")"].join(" ")}};function d(r){return u(r)?"In data trace "+r[1]+", ":"In "+r+", "}function y(r,n,i,o,s){i=i||"",u(n)?(l=n[0],c=n[1]):(l=n,c=null);var l,c,f=function(r){if(!u(r))return String(r);for(var n="",i=0;i<r.length;i++){var a=r[i];"number"==typeof a?n=n.substr(0,n.length-1)+"["+a+"]":n+=a,i<r.length-1&&(n+=".")}return n}(i),h=p[r](n,f,o,s);return a.log(h),{code:r,container:l,trace:c,path:i,astr:f,msg:h}}var g=a.counterRegex("([a-z]+)");function v(r){var n=r.match(g);return{keyMinusId:n&&n[1],id:n&&n[2]}}},85656:function(r){r.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(r,n,i){var a=i(3400),o=i(31780);r.exports=function(r,n,i){var s,l,c=i.name,u=i.inclusionAttr||"visible",f=n[c],h=a.isArrayOrTypedArray(r[c])?r[c]:[],p=n[c]=[],d=o.arrayTemplater(n,c,u);for(s=0;s<h.length;s++){var y=h[s];a.isPlainObject(y)?l=d.newItem(y):(l=d.newItem({}))[u]=!1,l._index=s,!1!==l[u]&&i.handleItemDefaults(y,l,n,i),p.push(l)}var g=d.defaultItems();for(s=0;s<g.length;s++)(l=g[s])._index=p.length,i.handleItemDefaults({},l,n,i,{}),p.push(l);if(a.isArrayOrTypedArray(f)){var v=Math.min(f.length,p.length);for(s=0;s<v;s++)a.relinkPrivateKeys(p[s],f[s])}return p}},45464:function(r,n,i){var a=i(25376),o=i(55756);r.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:a({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:o.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(r,n,i){var a=i(38248),o=i(3400),s=o.dateTime2ms,l=o.incrementMonth,c=i(39032).ONEAVGMONTH;r.exports=function(r,n,i,o){if("date"!==n.type)return{vals:o};var u=r[i+"periodalignment"];if(!u)return{vals:o};var f,h=r[i+"period"];if(a(h)){if((h=+h)<=0)return{vals:o}}else if("string"==typeof h&&"M"===h.charAt(0)){var p=+h.substring(1);if(!(p>0&&Math.round(p)===p))return{vals:o};f=p}for(var d=n.calendar,y="start"===u,g="end"===u,v=r[i+"period0"],m=s(v,d)||0,x=[],b=[],_=[],w=o.length,T=0;T<w;T++){var A,k,M,S=o[T];if(f){for(A=Math.round((S-m)/(f*c)),M=l(m,f*A,d);M>S;)M=l(M,-f,d);for(;M<=S;)M=l(M,f,d);k=l(M,-f,d)}else{for(M=m+(A=Math.round((S-m)/h))*h;M>S;)M-=h;for(;M<=S;)M+=h;k=M-h}x[T]=y?k:g?M:(k+M)/2,b[T]=k,_[T]=M}return{vals:x,starts:b,ends:_}}},26720:function(r){r.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(r,n,i){var a=i(33428),o=i(38248),s=i(3400),l=i(39032).FP_SAFE,c=i(24040),u=i(43616),f=i(79811),h=f.getFromId,p=f.isLinked;function d(r,n){var i,a,o=[],l=r._fullLayout,c=g(l,n,0),u=g(l,n,1),f=m(r,n),h=f.min,p=f.max;if(0===h.length||0===p.length)return s.simpleMap(n.range,n.r2l);var d=h[0].val,v=p[0].val;for(i=1;i<h.length&&d===v;i++)d=Math.min(d,h[i].val);for(i=1;i<p.length&&d===v;i++)v=Math.max(v,p[i].val);var x=n.autorange,b="reversed"===x||"min reversed"===x||"max reversed"===x;if(!b&&n.range){var _=s.simpleMap(n.range,n.r2l);b=_[1]<_[0]}"reversed"===n.autorange&&(n.autorange=!0);var w,T,k,M,S,E,I=n.rangemode,L="tozero"===I,C="nonnegative"===I,O=n._length,D=O/10,P=0;for(i=0;i<h.length;i++)for(w=h[i],a=0;a<p.length;a++)(E=(T=p[a]).val-w.val-y(n,w.val,T.val))>0&&((S=O-c(w)-u(T))>D?E/S>P&&(k=w,M=T,P=E/S):E/O>P&&(k={val:w.val,nopad:1},M={val:T.val,nopad:1},P=E/O));if(d===v){var B=d-1,R=d+1;if(L){if(0===d)o=[0,1];else{var z=(d>0?p:h).reduce(function(r,n){return Math.max(r,u(n))},0),F=d/(1-Math.min(.5,z/O));o=d>0?[0,F]:[F,0]}}else o=C?[Math.max(0,B),Math.max(1,R)]:[B,R]}else L?(k.val>=0&&(k={val:0,nopad:1}),M.val<=0&&(M={val:0,nopad:1})):C&&(k.val-P*c(k)<0&&(k={val:0,nopad:1}),M.val<=0&&(M={val:1,nopad:1})),P=(M.val-k.val-y(n,w.val,T.val))/(O-c(k)-u(M)),o=[k.val-P*c(k),M.val+P*u(M)];return o=A(o,n),n.limitRange&&n.limitRange(),b&&o.reverse(),s.simpleMap(o,n.l2r||Number)}function y(r,n,i){var a=0;if(r.rangebreaks)for(var o=r.locateBreaks(n,i),s=0;s<o.length;s++){var l=o[s];a+=l.max-l.min}return a}function g(r,n,i){var o=.05*n._length,l=n._anchorAxis||{};if(-1!==(n.ticklabelposition||"").indexOf("inside")||-1!==(l.ticklabelposition||"").indexOf("inside")){var c=n.isReversed();if(!c){var f=s.simpleMap(n.range,n.r2l);c=f[1]<f[0]}c&&(i=!i)}var h=0;return p(r,n._id)||(h=function(r,n,i){var o=0,l="x"===n._id.charAt(0);for(var c in r._plots){var f=r._plots[c];if(n._id===f.xaxis._id||n._id===f.yaxis._id){var h=(l?f.yaxis:f.xaxis)||{};if(-1!==(h.ticklabelposition||"").indexOf("inside")&&(!i&&("left"===h.side||"bottom"===h.side)||i&&("top"===h.side||"right"===h.side))){if(h._vals){var p=s.deg2rad(h._tickAngles[h._id+"tick"]||0),d=Math.abs(Math.cos(p)),y=Math.abs(Math.sin(p));if(!h._vals[0].bb){var g=h._id+"tick";h._selections[g].each(function(r){var n=a.select(this);n.select(".text-math-group").empty()&&(r.bb=u.bBox(n.node()))})}for(var m=0;m<h._vals.length;m++){var x=h._vals[m].bb;if(x){var b=2*v+x.width,_=2*v+x.height;o=Math.max(o,l?Math.max(b*d,_*y):Math.max(_*d,b*y))}}}"inside"===h.ticks&&"inside"===h.ticklabelposition&&(o+=h.ticklen||0)}}}return o}(r,n,i)),o=Math.max(h,o),"domain"===n.constrain&&n._inputDomain&&(o*=(n._inputDomain[1]-n._inputDomain[0])/(n.domain[1]-n.domain[0])),function(r){return r.nopad?0:r.pad+(r.extrapad?o:h)}}r.exports={applyAutorangeOptions:A,getAutoRange:d,makePadFn:g,doAutoRange:function(r,n,i){if(n.setScale(),n.autorange){n.range=i?i.slice():d(r,n),n._r=n.range.slice(),n._rl=s.simpleMap(n._r,n.r2l);var a=n._input,o={};o[n._attr+".range"]=n.range,o[n._attr+".autorange"]=n.autorange,c.call("_storeDirectGUIEdit",r.layout,r._fullLayout._preGUI,o),a.range=n.range.slice(),a.autorange=n.autorange}var l=n._anchorAxis;if(l&&l.rangeslider){var u=l.rangeslider[n._name];u&&"auto"===u.rangemode&&(u.range=d(r,n)),l._input.rangeslider[n._name]=s.extendFlat({},u)}},findExtremes:function(r,n,i){i||(i={}),r._m||r.setScale();var a,s,c,u,f,h,p,d,y,g=[],v=[],m=n.length,T=i.padded||!1,A=i.tozero&&("linear"===r.type||"-"===r.type),k="log"===r.type,M=!1,S=i.vpadLinearized||!1;function E(r){if(Array.isArray(r))return M=!0,function(n){return Math.max(Number(r[n]||0),0)};var n=Math.max(Number(r||0),0);return function(){return n}}var I=E((r._m>0?i.ppadplus:i.ppadminus)||i.ppad||0),L=E((r._m>0?i.ppadminus:i.ppadplus)||i.ppad||0),C=E(i.vpadplus||i.vpad),O=E(i.vpadminus||i.vpad);if(!M){if(d=1/0,y=-1/0,k)for(a=0;a<m;a++)(s=n[a])<d&&s>0&&(d=s),s>y&&s<l&&(y=s);else for(a=0;a<m;a++)(s=n[a])<d&&s>-l&&(d=s),s>y&&s<l&&(y=s);n=[d,y],m=2}var D={tozero:A,extrapad:T};function P(i){o(c=n[i])&&(h=I(i),p=L(i),S?(u=r.c2l(c)-O(i),f=r.c2l(c)+C(i)):(d=c-O(i),y=c+C(i),k&&d<y/10&&(d=y/10),u=r.c2l(d),f=r.c2l(y)),A&&(u=Math.min(0,u),f=Math.max(0,f)),b(u)&&x(g,u,p,D,_),b(f)&&x(v,f,h,D,w))}var B=Math.min(6,m);for(a=0;a<B;a++)P(a);for(a=m-1;a>=B;a--)P(a);return{min:g,max:v,opts:i}},concatExtremes:m};var v=3;function m(r,n,i){var a,o,s,l=n._id,c=r._fullData,u=r._fullLayout,f=[],p=[];function d(r,n){for(a=0;a<n.length;a++){var i,c,u=r[n[a]],h=(u._extremes||{})[l];if(!0===u.visible&&h){for(o=0;o<h.min.length;o++)i=(s=h.min[o]).val,x(f,i,s.pad,{extrapad:s.extrapad},_);for(o=0;o<h.max.length;o++)c=(s=h.max[o]).val,x(p,c,s.pad,{extrapad:s.extrapad},w)}}}if(d(c,n._traceIndices),d(u.annotations||[],n._annIndices||[]),d(u.shapes||[],n._shapeIndices||[]),n._matchGroup&&!i){for(var y in n._matchGroup)if(y!==n._id){var g,v,b=h(r,y),T=m(r,b,!0),A=n._length/b._length;for(o=0;o<T.min.length;o++)g=(s=T.min[o]).val,x(f,g,s.pad*A,{extrapad:s.extrapad},_);for(o=0;o<T.max.length;o++)v=(s=T.max[o]).val,x(p,v,s.pad*A,{extrapad:s.extrapad},w)}}return{min:f,max:p}}function x(r,n,i,a,o){for(var s=a.tozero,l=a.extrapad,c=!0,u=0;u<r.length&&c;u++){var f=r[u];if(o(f.val,n)&&f.pad>=i&&(f.extrapad||!l)){c=!1;break}o(n,f.val)&&f.pad<=i&&(l||!f.extrapad)&&(r.splice(u,1),u--)}if(c){var h=s&&0===n;r.push({val:n,pad:h?0:i,extrapad:!h&&l})}}function b(r){return o(r)&&Math.abs(r)<l}function _(r,n){return r<=n}function w(r,n){return r>=n}function T(r,n,i){return void 0===n||void 0===i||(n=r.d2l(n))<r.d2l(i)}function A(r,n){if(!n||!n.autorangeoptions)return r;var i,a,o,l,c=r[0],u=r[1],f=n.autorangeoptions.include;if(void 0!==f){var h=n.d2l(c),p=n.d2l(u);s.isArrayOrTypedArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var y=n.d2l(f[d]);h>=y&&(h=y,c=y),p<=y&&(p=y,u=y)}}return i=c,c=(a=n.autorangeoptions)&&void 0!==a.minallowed&&T(n,a.minallowed,a.maxallowed)?a.minallowed:a&&void 0!==a.clipmin&&T(n,a.clipmin,a.clipmax)?Math.max(i,n.d2l(a.clipmin)):i,o=u,[c,u=(l=n.autorangeoptions)&&void 0!==l.maxallowed&&T(n,l.minallowed,l.maxallowed)?l.maxallowed:l&&void 0!==l.clipmax&&T(n,l.clipmin,l.clipmax)?Math.min(o,n.d2l(l.clipmax)):o]}},76808:function(r){r.exports=function(r,n,i){if(i){var a,o,s="reversed"===n||"min reversed"===n||"max reversed"===n;a=i[s?1:0],o=i[s?0:1]}var l=r("autorangeoptions.minallowed",null===o?a:void 0),c=r("autorangeoptions.maxallowed",null===a?o:void 0);void 0===l&&r("autorangeoptions.clipmin"),void 0===c&&r("autorangeoptions.clipmax"),r("autorangeoptions.include")}},54460:function(r,n,i){var a=i(33428),o=i(38248),s=i(7316),l=i(24040),c=i(3400),u=c.strTranslate,f=i(72736),h=i(81668),p=i(76308),d=i(43616),y=i(94724),g=i(98728),v=i(39032),m=v.ONEMAXYEAR,x=v.ONEAVGYEAR,b=v.ONEMINYEAR,_=v.ONEMAXQUARTER,w=v.ONEAVGQUARTER,T=v.ONEMINQUARTER,A=v.ONEMAXMONTH,k=v.ONEAVGMONTH,M=v.ONEMINMONTH,S=v.ONEWEEK,E=v.ONEDAY,I=E/2,L=v.ONEHOUR,C=v.ONEMIN,O=v.ONESEC,D=v.ONEMILLI,P=v.ONEMICROSEC,B=v.MINUS_SIGN,R=v.BADNUM,z={K:"zeroline"},F={K:"gridline",L:"path"},N={K:"minor-gridline",L:"path"},U={K:"tick",L:"path"},j={K:"tick",L:"text"},V={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=i(84284),q=H.MID_SHIFT,G=H.CAP_SHIFT,W=H.LINE_SPACING,Y=H.OPPOSITE_SIDE,Z=r.exports={};Z.setConvert=i(78344);var X=i(52976),K=i(79811),J=K.idSort,$=K.isLinked;Z.id2name=K.id2name,Z.name2id=K.name2id,Z.cleanId=K.cleanId,Z.list=K.list,Z.listIds=K.listIds,Z.getFromId=K.getFromId,Z.getFromTrace=K.getFromTrace;var Q=i(19280);function tt(r){var n=(r[1]-r[0])*1e-4;return[r[0]-n,r[1]+n]}Z.getAutoRange=Q.getAutoRange,Z.findExtremes=Q.findExtremes,Z.coerceRef=function(r,n,i,a,o,s){var l=a.charAt(a.length-1),u=i._fullLayout._subplots[l+"axis"],f=a+"ref",h={};return o||(o=u[0]||("string"==typeof s?s:s[0])),s||(s=o),u=u.concat(u.map(function(r){return r+" domain"})),h[f]={valType:"enumerated",values:u.concat(s?"string"==typeof s?[s]:s:[]),dflt:o},c.coerce(r,n,h,f)},Z.getRefType=function(r){return void 0===r?r:"paper"===r?"paper":"pixel"===r?"pixel":/( domain)$/.test(r)?"domain":"range"},Z.coercePosition=function(r,n,i,a,o,s){var l,u;if("range"!==Z.getRefType(a))l=c.ensureNumber,u=i(o,s);else{var f=Z.getFromId(n,a);u=i(o,s=f.fraction2r(s)),l=f.cleanPos}r[o]=l(u)},Z.cleanPosition=function(r,n,i){return("paper"===i||"pixel"===i?c.ensureNumber:Z.getFromId(n,i).cleanPos)(r)},Z.redrawComponents=function(r,n){n=n||Z.listIds(r);var i=r._fullLayout;function a(a,o,s,c){for(var u=l.getComponentMethod(a,o),f={},h=0;h<n.length;h++)for(var p=i[Z.id2name(n[h])][s],d=0;d<p.length;d++){var y=p[d];if(!f[y]&&(u(r,y),f[y]=1,c))return}}a("annotations","drawOne","_annIndices"),a("shapes","drawOne","_shapeIndices"),a("images","draw","_imgIndices",!0),a("selections","drawOne","_selectionIndices")};var te=Z.getDataConversions=function(r,n,i,a){var o,s="x"===i||"y"===i||"z"===i?i:a;if(c.isArrayOrTypedArray(s)){if(o={type:X(a,void 0,{autotypenumbers:r._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(o),"category"===o.type)for(var l=0;l<a.length;l++)o.d2c(a[l])}else o=Z.getFromTrace(r,n,s);return o?{d2c:o.d2c,c2d:o.c2d}:"ids"===s?{d2c:tn,c2d:tn}:{d2c:tr,c2d:tr}};function tr(r){return+r}function tn(r){return String(r)}function ti(r,n){return .001>Math.abs((r/n+.5)%1-.5)}function ta(r,n){return .001>Math.abs(r/n-1)}function to(r){return+r.substring(1)}function ts(r,n){return r.rangebreaks&&(n=n.filter(function(n){return r.maskBreaks(n.x)!==R})),n}function tl(r,n){var i=tt(c.simpleMap(r.range,r.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s="category"===r.type?r.d2l_noadd:r.d2l;"log"===r.type&&"L"!==String(r.dtick).charAt(0)&&(r.dtick="L"+Math.pow(10,Math.floor(Math.min(r.range[0],r.range[1]))-1));for(var l=[],u=0;u<=1;u++)if((void 0===n||!(n&&u||!1===n&&!u))&&(!u||r.minor)){var f=u?r.minor.tickvals:r.tickvals,h=u?[]:r.ticktext;if(f){c.isArrayOrTypedArray(h)||(h=[]);for(var p=0;p<f.length;p++){var d=s(f[p]);if(d>a&&d<o){var y=Z.tickText(r,d,!1,String(h[p]));u&&(y.minor=!0,y.text=""),l.push(y)}}}}return ts(r,l)}Z.getDataToCoordFunc=function(r,n,i,a){return te(r,n,i,a).d2c},Z.counterLetter=function(r){var n=r.charAt(0);return"x"===n?"y":"y"===n?"x":void 0},Z.minDtick=function(r,n,i,a){-1===["log","category","multicategory"].indexOf(r.type)&&a?void 0===r._minDtick?(r._minDtick=n,r._forceTick0=i):r._minDtick&&((r._minDtick/n+1e-6)%1<2e-6&&((i-r._forceTick0)/n%1+1.000001)%1<2e-6?(r._minDtick=n,r._forceTick0=i):((n/r._minDtick+1e-6)%1>2e-6||((i-r._forceTick0)/r._minDtick%1+1.000001)%1>2e-6)&&(r._minDtick=0)):r._minDtick=0},Z.saveRangeInitial=function(r,n){for(var i=Z.list(r,"",!0),a=!1,o=0;o<i.length;o++){var s=i[o],l=void 0===s._rangeInitial0&&void 0===s._rangeInitial1,c=l||s.range[0]!==s._rangeInitial0||s.range[1]!==s._rangeInitial1,u=s.autorange;(l&&!0!==u||n&&c)&&(s._rangeInitial0="min"===u||"max reversed"===u?void 0:s.range[0],s._rangeInitial1="max"===u||"min reversed"===u?void 0:s.range[1],s._autorangeInitial=u,a=!0)}return a},Z.saveShowSpikeInitial=function(r,n){for(var i=Z.list(r,"",!0),a=!1,o="on",s=0;s<i.length;s++){var l=i[s],c=void 0===l._showSpikeInitial,u=c||l.showspikes!==l._showspikes;(c||n&&u)&&(l._showSpikeInitial=l.showspikes,a=!0),"on"!==o||l.showspikes||(o="off")}return r._fullLayout._cartesianSpikesEnabled=o,a},Z.autoBin=function(r,n,i,a,s,l){var u,f=c.aggNums(Math.min,null,r),h=c.aggNums(Math.max,null,r);if("category"===n.type||"multicategory"===n.type)return{start:f-.5,end:h+.5,size:Math.max(1,Math.round(l)||1),_dataSpan:h-f};if(s||(s=n.calendar),u="log"===n.type?{type:"linear",range:[f,h]}:{type:n.type,range:c.simpleMap([f,h],n.c2r,0,s),calendar:s},Z.setConvert(u),l=l&&g.dtick(l,u.type))u.dtick=l,u.tick0=g.tick0(void 0,u.type,s);else{if(i)y=(h-f)/i;else{var p=c.distinctVals(r),d=Math.pow(10,Math.floor(Math.log(p.minDiff)/Math.LN10));o(y=Math.max(d*c.roundUp(p.minDiff/d,[.9,1.9,4.9,9.9],!0),2*c.stdev(r)/Math.pow(r.length,a?.25:.4)))||(y=1)}Z.autoTicks(u,y)}var y,v,m=u.dtick,x=Z.tickIncrement(Z.tickFirst(u),m,"reverse",s);if("number"==typeof m)v=(x=function(r,n,i,a,s){var l=0,c=0,u=0,f=0;function h(n){return(1+100*(n-r)/i.dtick)%100<2}for(var p=0;p<n.length;p++)n[p]%1==0?u++:o(n[p])||f++,h(n[p])&&l++,h(n[p]+i.dtick/2)&&c++;var d=n.length-f;if(u===d&&"date"!==i.type)i.dtick<1?r=a-.5*i.dtick:(r-=.5)+i.dtick<a&&(r+=i.dtick);else if(c<.1*d&&(l>.3*d||h(a)||h(s))){var y=i.dtick/2;r+=r+y<a?y:-y}return r}(x,r,u,f,h))+(1+Math.floor((h-x)/m))*m;else for("M"===u.dtick.charAt(0)&&(x=function(r,n,i,a,o){var s=c.findExactDates(n,o);if(s.exactDays>.8){var l=Number(i.substr(1));s.exactYears>.8&&l%12==0?r=Z.tickIncrement(r,"M6","reverse")+1.5*E:s.exactMonths>.8?r=Z.tickIncrement(r,"M1","reverse")+15.5*E:r-=I;var u=Z.tickIncrement(r,i);if(u<=a)return u}return r}(x,r,m,f,s)),v=x;v<=h;)v=Z.tickIncrement(v,m,!1,s);return{start:n.c2r(x,0,s),end:n.c2r(v,0,s),size:m,_dataSpan:h-f}},Z.prepMinorTicks=function(r,n,i){if(!n.minor.dtick){delete r.dtick;var a,s=n.dtick&&o(n._tmin);if(s){var l=Z.tickIncrement(n._tmin,n.dtick,!0);a=[n._tmin,.99*l+.01*n._tmin]}else{var u=c.simpleMap(n.range,n.r2l);a=[u[0],.8*u[0]+.2*u[1]]}if(r.range=c.simpleMap(a,n.l2r),r._isMinor=!0,Z.prepTicks(r,i),s){var f=o(n.dtick),h=o(r.dtick),p=f?n.dtick:+n.dtick.substring(1),d=h?r.dtick:+r.dtick.substring(1);f&&h?ti(p,d)?p===2*S&&d===2*E&&(r.dtick=S):p===2*S&&d===3*E?r.dtick=S:p!==S||(n._input.minor||{}).nticks?ta(p/d,2.5)?r.dtick=p/2:r.dtick=p:r.dtick=E:"M"===String(n.dtick).charAt(0)?h?r.dtick="M1":ti(p,d)?p>=12&&2===d&&(r.dtick="M3"):r.dtick=n.dtick:"L"===String(r.dtick).charAt(0)?"L"===String(n.dtick).charAt(0)?ti(p,d)||(r.dtick=ta(p/d,2.5)?n.dtick/2:n.dtick):r.dtick="D1":"D2"===r.dtick&&+n.dtick>1&&(r.dtick=1)}r.range=n.range}void 0===n.minor._tick0Init&&(r.tick0=n.tick0)},Z.prepTicks=function(r,n){var i=c.simpleMap(r.range,r.r2l,void 0,void 0,n);if("auto"===r.tickmode||!r.dtick){var a,s=r.nticks;s||("category"===r.type||"multicategory"===r.type?(a=r.tickfont?c.bigFont(r.tickfont.size||12):15,s=r._length/a):(a="y"===r._id.charAt(0)?40:80,s=c.constrain(r._length/a,4,9)+1),"radialaxis"===r._name&&(s*=2)),r.minor&&"array"!==r.minor.tickmode||"array"===r.tickmode&&(s*=100),r._roughDTick=Math.abs(i[1]-i[0])/s,Z.autoTicks(r,r._roughDTick),r._minDtick>0&&r.dtick<2*r._minDtick&&(r.dtick=r._minDtick,r.tick0=r.l2r(r._forceTick0))}"period"===r.ticklabelmode&&function(r){function n(){return!(o(r.dtick)||"M"!==r.dtick.charAt(0))}var i,a=n(),s=Z.getTickFormat(r);if(s){var l=r._dtickInit!==r.dtick;/%[fLQsSMX]/.test(s)||(/%[HI]/.test(s)?(i=L,l&&!a&&r.dtick<L&&(r.dtick=L)):/%p/.test(s)?(i=I,l&&!a&&r.dtick<I&&(r.dtick=I)):/%[Aadejuwx]/.test(s)?(i=E,l&&!a&&r.dtick<E&&(r.dtick=E)):/%[UVW]/.test(s)?(i=S,l&&!a&&r.dtick<S&&(r.dtick=S)):/%[Bbm]/.test(s)?(i=k,l&&(a?1>to(r.dtick):r.dtick<M)&&(r.dtick="M1")):/%[q]/.test(s)?(i=w,l&&(a?3>to(r.dtick):r.dtick<T)&&(r.dtick="M3")):/%[Yy]/.test(s)&&(i=x,l&&(a?12>to(r.dtick):r.dtick<b)&&(r.dtick="M12")))}(a=n())&&r.tick0===r._dowTick0&&(r.tick0=r._rawTick0),r._definedDelta=i}(r),r.tick0||(r.tick0="date"===r.type?"2000-01-01":0),"date"===r.type&&r.dtick<.1&&(r.dtick=.1),tv(r)},Z.calcTicks=function(r,n){for(var i,a,s,l,u=r.type,f=r.calendar,h=r.ticklabelstep,p="period"===r.ticklabelmode,d=r.range[0]>r.range[1],y=!r.ticklabelindex||c.isArrayOrTypedArray(r.ticklabelindex)?r.ticklabelindex:[r.ticklabelindex],g=c.simpleMap(r.range,r.r2l,void 0,void 0,n),v=g[1]<g[0],B=Math.min(g[0],g[1]),z=Math.max(g[0],g[1]),F=Math.max(1e3,r._length||0),N=[],U=[],j=[],V=[],H=[],q=r.minor&&(r.minor.ticks||r.minor.showgrid),G=1;G>=(q?0:1);G--){var W=!G;G?(r._dtickInit=r.dtick,r._tick0Init=r.tick0):(r.minor._dtickInit=r.minor.dtick,r.minor._tick0Init=r.minor.tick0);var Y=G?r:c.extendFlat({},r,r.minor);if(W?Z.prepMinorTicks(Y,r,n):Z.prepTicks(Y,n),"array"!==Y.tickmode){if("sync"!==Y.tickmode){var X=tt(g),K=X[0],J=X[1],$=o(Y.dtick),Q="log"===u&&!($||"L"===Y.dtick.charAt(0)),te=Z.tickFirst(Y,n);if(G){if(r._tmin=te,te<K!==v)break;"category"!==u&&"multicategory"!==u||(J=v?Math.max(-.5,J):Math.min(r._categories.length-.5,J))}var tr,tn,ti=null,ta=te;G&&($?tn=r.dtick:"date"===u?"string"==typeof r.dtick&&"M"===r.dtick.charAt(0)&&(tn=k*r.dtick.substring(1)):tn=r._roughDTick,tr=Math.round((r.r2l(ta)-r.r2l(r.tick0))/tn)-1);var to=Y.dtick;for(Y.rangebreaks&&Y._tick0Init!==Y.tick0&&(ta=tP(ta,r),v||(ta=Z.tickIncrement(ta,to,!v,f))),G&&p&&(ta=Z.tickIncrement(ta,to,!v,f),tr--);v?ta>=J:ta<=J;ta=Z.tickIncrement(ta,to,v,f)){if(G&&tr++,Y.rangebreaks&&!v){if(ta<K)continue;if(Y.maskBreaks(ta)===R&&tP(ta,Y)>=z)break}if(j.length>F||ta===ti)break;ti=ta;var tc={value:ta};G?(Q&&ta!==(0|ta)&&(tc.simpleLabel=!0),h>1&&tr%h&&(tc.skipLabel=!0),j.push(tc)):(tc.minor=!0,V.push(tc))}}else j=[],N=function(r){var n=r._mainAxis,i=[];if(n._vals){for(var a=0;a<n._vals.length;a++)if(!n._vals[a].noTick){var o=n.l2p(n._vals[a].x),s=r.p2l(o),l=Z.tickText(r,s);n._vals[a].minor&&(l.minor=!0,l.text=""),i.push(l)}}return ts(r,i)}(r)}else G?(j=[],N=tl(r,!W)):(V=[],U=tl(r,!W))}if(!V||V.length<2?y=!1:(i=(V[1].value-V[0].value)*(d?-1:1),a=r.tickformat,(/%f/.test(a)?i>=P:/%L/.test(a)?i>=D:/%[SX]/.test(a)?i>=O:/%M/.test(a)?i>=C:/%[HI]/.test(a)?i>=L:/%p/.test(a)?i>=I:/%[Aadejuwx]/.test(a)?i>=E:/%[UVW]/.test(a)?i>=S:/%[Bbm]/.test(a)?i>=M:/%[q]/.test(a)?i>=T:!/%[Yy]/.test(a)||i>=b)||(y=!1)),y){var tu=j.concat(V);p&&j.length&&(tu=tu.slice(1)),(tu=tu.sort(function(r,n){return r.value-n.value}).filter(function(r,n,i){return 0===n||r.value!==i[n-1].value})).map(function(r,n){return void 0!==r.minor||r.skipLabel?null:n}).filter(function(r){return null!==r}).forEach(function(r){y.map(function(n){var i=r+n;i>=0&&i<tu.length&&c.pushUnique(H,tu[i])})})}else H=j;if(q&&!("inside"===r.minor.ticks&&"outside"===r.ticks||"outside"===r.minor.ticks&&"inside"===r.ticks)){for(var tf=j.map(function(r){return r.value}),th=[],tp=0;tp<V.length;tp++){var td=V[tp],ty=td.value;if(-1===tf.indexOf(ty)){for(var tg=!1,tv=0;!tg&&tv<j.length;tv++)1e7+j[tv].value===1e7+ty&&(tg=!0);tg||th.push(td)}}V=th}if(p&&function(r,n,i){for(var a=0;a<r.length;a++){var o=r[a].value,s=a,l=a+1;a<r.length-1?(s=a,l=a+1):(s=a>0?a-1:a,l=a);var c,u=r[s].value,f=Math.abs(r[l].value-u),h=i||f,p=0;h>=b?p=f>=b&&f<=m?f:x:i===w&&h>=T?p=f>=T&&f<=_?f:w:h>=M?p=f>=M&&f<=A?f:k:i===S&&h>=S?p=S:h>=E?p=E:i===I&&h>=I?p=I:i===L&&h>=L&&(p=L),p>=f&&(p=f,c=!0);var d=o+p;if(n.rangebreaks&&p>0){for(var y=0,g=0;g<84;g++){var v=(g+.5)/84;n.maskBreaks(o*(1-v)+v*d)!==R&&y++}(p*=y/84)||(r[a].drop=!0),c&&f>S&&(p=f)}(p>0||0===a)&&(r[a].periodX=o+p/2)}}(H,r,r._definedDelta),r.rangebreaks){var tm="y"===r._id.charAt(0),tx=1;"auto"===r.tickmode&&(tx=r.tickfont?r.tickfont.size:12);var tb=NaN;for(s=j.length-1;s>-1;s--)if(j[s].drop)j.splice(s,1);else{j[s].value=tP(j[s].value,r);var t_=r.c2p(j[s].value);(tm?tb>t_-tx:tb<t_+tx)?j.splice(v?s+1:s,1):tb=t_}}tD(r)&&360===Math.abs(g[1]-g[0])&&j.pop(),r._tmax=(j[j.length-1]||{}).value,r._prevDateHead="",r._inCalcTicks=!0;var tw,tT=function(n){n.text="",r._prevDateHead=l};function tA(r,n){var i=Z.tickText(r,n.value,!1,n.simpleLabel),a=n.periodX;return void 0!==a&&(i.periodX=a,(a>z||a<B)&&(a>z&&(i.periodX=z),a<B&&(i.periodX=B),tT(i))),i}for(j=j.concat(V),s=0;s<j.length;s++){var tk=j[s].minor,tM=j[s].value;tk?((tw=y&&-1!==H.indexOf(j[s])?tA(r,j[s]):{x:tM}).minor=!0,U.push(tw)):(l=r._prevDateHead,tw=tA(r,j[s]),(j[s].skipLabel||y&&-1===H.indexOf(j[s]))&&tT(tw),N.push(tw))}return N=N.concat(U),r._inCalcTicks=!1,p&&N.length&&(N[0].noTick=!0),N};var tc=[2,5,10],tu=[1,2,3,6,12],tf=[1,2,5,10,15,30],th=[1,2,3,7,14],tp=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],td=[-.301,0,.301,.699,1],ty=[15,30,45,90,180];function tg(r,n,i){return n*c.roundUp(r/n,i)}function tv(r){var n=r.dtick;if(r._tickexponent=0,o(n)||"string"==typeof n||(n=1),"category"!==r.type&&"multicategory"!==r.type||(r._tickround=null),"date"===r.type){var i=r.r2l(r.tick0),a=r.l2r(i).replace(/(^-|i)/g,""),s=a.length;if("M"===String(n).charAt(0))s>10||"01-01"!==a.substr(5)?r._tickround="d":r._tickround=+n.substr(1)%12==0?"y":"m";else if(n>=E&&s<=10||n>=15*E)r._tickround="d";else if(n>=C&&s<=16||n>=L)r._tickround="M";else if(n>=O&&s<=19||n>=C)r._tickround="S";else{var l=r.l2r(i+n).replace(/^-/,"").length;r._tickround=Math.max(s,l)-20,r._tickround<0&&(r._tickround=4)}}else if(o(n)||"L"===n.charAt(0)){var c=r.range.map(r.r2d||Number);o(n)||(n=Number(n.substr(1))),r._tickround=2-Math.floor(Math.log(n)/Math.LN10+.01);var u=Math.floor(Math.log(Math.max(Math.abs(c[0]),Math.abs(c[1])))/Math.LN10+.01);Math.abs(u)>(void 0===r.minexponent?3:r.minexponent)&&(tb(r.exponentformat)&&!t_(u)?r._tickexponent=3*Math.round((u-1)/3):r._tickexponent=u)}else r._tickround=null}function tm(r,n,i){var a=r.tickfont||{};return{x:n,dx:0,dy:0,text:i||"",fontSize:a.size,font:a.family,fontWeight:a.weight,fontStyle:a.style,fontVariant:a.variant,fontTextcase:a.textcase,fontLineposition:a.lineposition,fontShadow:a.shadow,fontColor:a.color}}Z.autoTicks=function(r,n,i){var a;function s(r){return Math.pow(r,Math.floor(Math.log(n)/Math.LN10))}if("date"===r.type){r.tick0=c.dateTick0(r.calendar,0);var l=2*n;if(l>x)n/=x,a=s(10),r.dtick="M"+12*tg(n,a,tc);else if(l>k)n/=k,r.dtick="M"+tg(n,1,tu);else if(l>E){if(r.dtick=tg(n,E,r._hasDayOfWeekBreaks?[1,2,7,14]:th),!i){var u=Z.getTickFormat(r),f="period"===r.ticklabelmode;f&&(r._rawTick0=r.tick0),/%[uVW]/.test(u)?r.tick0=c.dateTick0(r.calendar,2):r.tick0=c.dateTick0(r.calendar,1),f&&(r._dowTick0=r.tick0)}}else l>L?r.dtick=tg(n,L,tu):l>C?r.dtick=tg(n,C,tf):l>O?r.dtick=tg(n,O,tf):(a=s(10),r.dtick=tg(n,a,tc))}else if("log"===r.type){r.tick0=0;var h=c.simpleMap(r.range,r.r2l);if(r._isMinor&&(n*=1.5),n>.7)r.dtick=Math.ceil(n);else if(1>Math.abs(h[1]-h[0])){var p=1.5*Math.abs((h[1]-h[0])/n);n=Math.abs(Math.pow(10,h[1])-Math.pow(10,h[0]))/p,a=s(10),r.dtick="L"+tg(n,a,tc)}else r.dtick=n>.3?"D2":"D1"}else"category"===r.type||"multicategory"===r.type?(r.tick0=0,r.dtick=Math.ceil(Math.max(n,1))):tD(r)?(r.tick0=0,a=1,r.dtick=tg(n,a,ty)):(r.tick0=0,a=s(10),r.dtick=tg(n,a,tc));if(0===r.dtick&&(r.dtick=1),!o(r.dtick)&&"string"!=typeof r.dtick){var d=r.dtick;throw r.dtick=1,"ax.dtick error: "+String(d)}},Z.tickIncrement=function(r,n,i,s){var l=i?-1:1;if(o(n))return c.increment(r,l*n);var u=n.charAt(0),f=l*Number(n.substr(1));if("M"===u)return c.incrementMonth(r,f,s);if("L"===u)return Math.log(Math.pow(10,r)+f)/Math.LN10;if("D"===u){var h="D2"===n?td:tp,p=r+.01*l,d=c.roundUp(c.mod(p,1),h,i);return Math.floor(p)+Math.log(a.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(n)},Z.tickFirst=function(r,n){var i=r.r2l||Number,s=c.simpleMap(r.range,i,void 0,void 0,n),l=s[1]<s[0],u=l?Math.floor:Math.ceil,f=tt(s)[0],h=r.dtick,p=i(r.tick0);if(o(h)){var d=u((f-p)/h)*h+p;return"category"!==r.type&&"multicategory"!==r.type||(d=c.constrain(d,0,r._categories.length-1)),d}var y=h.charAt(0),g=Number(h.substr(1));if("M"===y){for(var v,m,x,b=0,_=p;b<10;){if(((v=Z.tickIncrement(_,h,l,r.calendar))-f)*(_-f)<=0)return l?Math.min(_,v):Math.max(_,v);x=y+(Math.abs(Math.round(m=(f-(_+v)/2)/(v-_)))||1)*g,_=Z.tickIncrement(_,x,m<0?!l:l,r.calendar),b++}return c.error("tickFirst did not converge",r),_}if("L"===y)return Math.log(u((Math.pow(10,f)-p)/g)*g+p)/Math.LN10;if("D"===y){var w="D2"===h?td:tp,T=c.roundUp(c.mod(f,1),w,l);return Math.floor(f)+Math.log(a.round(Math.pow(10,T),1))/Math.LN10}throw"unrecognized dtick "+String(h)},Z.tickText=function(r,n,i,a){var s,l,u,f,h,p,d,y=tm(r,n),g="array"===r.tickmode,v=i||g,m=r.type,x="category"===m?r.d2l_noadd:r.d2l,b=function(n){var i=r.l2p(n);return i>=0&&i<=r._length?n:null};if(g&&c.isArrayOrTypedArray(r.ticktext)){var _=c.simpleMap(r.range,r.r2l),w=(Math.abs(_[1]-_[0])-(r._lBreaks||0))/1e4;for(d=0;d<r.ticktext.length&&!(Math.abs(n-x(r.tickvals[d]))<w);d++);if(d<r.ticktext.length)return y.text=String(r.ticktext[d]),y.xbnd=[b(y.x-.5),b(y.x+r.dtick-.5)],y}function T(a){if(void 0===a)return!0;if(i)return"none"===a;var o={first:r._tmin,last:r._tmax}[a];return"all"!==a&&n!==o}var A=i?"never":"none"!==r.exponentformat&&T(r.showexponent)?"hide":"";if("date"===m?function(r,n,i,a){var s=r._tickround,l=i&&r.hoverformat||Z.getTickFormat(r);(a=!l&&a)&&(s=o(s)?4:({y:"m",m:"d",d:"M",M:"S",S:4})[s]);var u,f=c.formatDate(n.x,l,s,r._dateFormat,r.calendar,r._extraFormat),h=f.indexOf("\n");if(-1!==h&&(u=f.substr(h+1),f=f.substr(0,h)),a&&(void 0===u||"00:00:00"!==f&&"00:00"!==f?8===f.length&&(f=f.replace(/:00$/,"")):(f=u,u="")),u){if(i)"d"===s?f+=", "+u:f=u+(f?", "+f:"");else if(r._inCalcTicks&&r._prevDateHead===u){var p=tB(r),d=r._trueSide||r.side;(!p&&"top"===d||p&&"bottom"===d)&&(f+="<br> ")}else r._prevDateHead=u,f+="<br>"+u}n.text=f}(r,y,i,v):"log"===m?function(r,n,i,a,s){var l=r.dtick,u=n.x,f=r.tickformat,h="string"==typeof l&&l.charAt(0);if("never"===s&&(s=""),a&&"L"!==h&&(l="L3",h="L"),f||"L"===h)n.text=tw(Math.pow(10,u),r,s,a);else if(o(l)||"D"===h&&.1>c.mod(u+.01,1)){var p=Math.round(u),d=Math.abs(p),y=r.exponentformat;"power"===y||tb(y)&&t_(p)?(n.text=0===p?1:1===p?"10":"10<sup>"+(p>1?"":B)+d+"</sup>",n.fontSize*=1.25):("e"===y||"E"===y)&&d>2?n.text="1"+y+(p>0?"+":B)+d:(n.text=tw(Math.pow(10,u),r,"","fakehover"),"D1"===l&&"y"===r._id.charAt(0)&&(n.dy-=n.fontSize/6))}else{if("D"!==h)throw"unrecognized dtick "+String(l);n.text=String(Math.round(Math.pow(10,c.mod(u,1)))),n.fontSize*=.75}if("D1"===r.dtick){var g=String(n.text).charAt(0);"0"!==g&&"1"!==g||("y"===r._id.charAt(0)?n.dx-=n.fontSize/4:(n.dy+=n.fontSize/2,n.dx+=(r.range[1]>r.range[0]?1:-1)*n.fontSize*(u<0?.5:.25)))}}(r,y,0,v,A):"category"===m?(void 0===(s=r._categories[Math.round(y.x)])&&(s=""),y.text=String(s)):"multicategory"===m?(l=Math.round(y.x),f=void 0===(u=r._categories[l]||[])[1]?"":String(u[1]),h=void 0===u[0]?"":String(u[0]),i?y.text=h+" - "+f:(y.text=f,y.text2=h)):tD(r)?function(r,n,i,a,o){if("radians"!==r.thetaunit||i)n.text=tw(n.x,r,o,a);else{var s=n.x/180;if(0===s)n.text="0";else{var l=function(r){function n(r,n){return 1e-6>=Math.abs(r-n)}var i=function(r){for(var i=1;!n(Math.round(r*i)/i,r);)i*=10;return i}(r),a=r*i,o=Math.abs(function r(i,a){return n(a,0)?i:r(a,i%a)}(a,i));return[Math.round(a/o),Math.round(i/o)]}(s);if(l[1]>=100)n.text=tw(c.deg2rad(n.x),r,o,a);else{var u=n.x<0;1===l[1]?1===l[0]?n.text="π":n.text=l[0]+"π":n.text=["<sup>",l[0],"</sup>","⁄","<sub>",l[1],"</sub>","π"].join(""),u&&(n.text=B+n.text)}}}}(r,y,i,v,A):("never"===(p=A)?p="":"all"===r.showexponent&&1e-6>Math.abs(y.x/r.dtick)&&(p="hide"),y.text=tw(y.x,r,p,v)),a||(r.tickprefix&&!T(r.showtickprefix)&&(y.text=r.tickprefix+y.text),r.ticksuffix&&!T(r.showticksuffix)&&(y.text+=r.ticksuffix)),r.labelalias&&r.labelalias.hasOwnProperty(y.text)){var k=r.labelalias[y.text];"string"==typeof k&&(y.text=k)}return("boundaries"===r.tickson||r.showdividers)&&(y.xbnd=[b(y.x-.5),b(y.x+r.dtick-.5)]),y},Z.hoverLabelText=function(r,n,i){i&&(r=c.extendFlat({},r,{hoverformat:i}));var a=c.isArrayOrTypedArray(n)?n[0]:n,o=c.isArrayOrTypedArray(n)?n[1]:void 0;if(void 0!==o&&o!==a)return Z.hoverLabelText(r,a,i)+" - "+Z.hoverLabelText(r,o,i);var s="log"===r.type&&a<=0,l=Z.tickText(r,r.c2l(s?-a:a),"hover").text;return s?0===a?"0":B+l:l};var tx=["f","p","n","μ","m","","k","M","G","T"];function tb(r){return"SI"===r||"B"===r}function t_(r){return r>14||r<-15}function tw(r,n,i,a){var s=r<0,l=n._tickround,u=i||n.exponentformat||"B",f=n._tickexponent,h=Z.getTickFormat(n),p=n.separatethousands;if(a){var d={exponentformat:u,minexponent:n.minexponent,dtick:"none"===n.showexponent?n.dtick:o(r)&&Math.abs(r)||1,range:"none"===n.showexponent?n.range.map(n.r2d):[0,r||1]};tv(d),l=(Number(d._tickround)||0)+4,f=d._tickexponent,n.hoverformat&&(h=n.hoverformat)}if(h)return n._numFormat(h)(r).replace(/-/g,B);var y,g=Math.pow(10,-l)/2;if("none"===u&&(f=0),(r=Math.abs(r))<g)r="0",s=!1;else{if(r+=g,f&&(r*=Math.pow(10,-f),l+=f),0===l)r=String(Math.floor(r));else if(l<0){r=(r=String(Math.round(r))).substr(0,r.length+l);for(var v=l;v<0;v++)r+="0"}else{var m=(r=String(r)).indexOf(".")+1;m&&(r=r.substr(0,m+l).replace(/\.?0+$/,""))}r=c.numSeparate(r,n._separators,p)}return f&&"hide"!==u&&(tb(u)&&t_(f)&&(u="power"),y=f<0?B+-f:"power"!==u?"+"+f:String(f),"e"===u||"E"===u?r+=u+y:"power"===u?r+="×10<sup>"+y+"</sup>":"B"===u&&9===f?r+="B":tb(u)&&(r+=tx[f/3+5])),s?B+r:r}function tT(r,n){if(r){var i=Object.keys(V).reduce(function(r,i){return -1!==n.indexOf(i)&&V[i].forEach(function(n){r[n]=1}),r},{});Object.keys(r).forEach(function(n){i[n]||(1===n.length?r[n]=0:delete r[n])})}}function tA(r){return void 0!==r.periodX?r.periodX:r.x}function tk(r){return[r.text,r.x,r.axInfo,r.font,r.fontSize,r.fontColor].join("_")}function tM(r){var n=r.title.font.size,i=(r.title.text.match(f.BR_TAG_ALL)||[]).length;return r.title.hasOwnProperty("standoff")?n*(G+i*W):i?n*(i+1)*W:n}function tS(r,n){var i=r.l2p(n);return i>1&&i<r._length-1}function tE(r){var n=a.select(r),i=n.select(".text-math-group");return i.empty()?n.select("text"):i}function tI(r){return r._id+".automargin"}function tL(r){return tI(r)+".mirror"}function tC(r){return r._id+".rangeslider"}function tO(r,n){for(var i=0;i<n.length;i++)-1===r.indexOf(n[i])&&r.push(n[i])}function tD(r){return"angularaxis"===r._id}function tP(r,n){for(var i=n._rangebreaks.length,a=0;a<i;a++){var o=n._rangebreaks[a];if(r>=o.min&&r<o.max)return o.max}return r}function tB(r){return -1!==(r.ticklabelposition||"").indexOf("inside")}function tR(r,n){tB(r._anchorAxis||{})&&r._hideCounterAxisInsideTickLabels&&r._hideCounterAxisInsideTickLabels(n)}function tz(r,n,i,a){var o,s="free"===r.anchor||void 0!==r.overlaying&&!1!==r.overlaying?r.overlaying:r._id;o=a?"right"===r.side?n:-n:n,s in i||(i[s]={}),r.side in i[s]||(i[s][r.side]=0),i[s][r.side]+=o}Z.getTickFormat=function(r){var n,i,a,o,s,l,c,u;function f(r){return"string"!=typeof r?r:Number(r.replace("M",""))*k}function h(r,n){var i=["L","D"];if(typeof r==typeof n){if("number"==typeof r)return r-n;var a=i.indexOf(r.charAt(0)),o=i.indexOf(n.charAt(0));return a===o?Number(r.replace(/(L|D)/g,""))-Number(n.replace(/(L|D)/g,"")):a-o}return"number"==typeof r?1:-1}if(r.tickformatstops&&r.tickformatstops.length>0)switch(r.type){case"date":case"linear":for(n=0;n<r.tickformatstops.length;n++)if((a=r.tickformatstops[n]).enabled&&(o=r.dtick,s=a.dtickrange,l=void 0,c=void 0,u=void 0,l=f||function(r){return r},c=s[0],u=s[1],(!c&&"number"!=typeof c||l(c)<=l(o))&&(!u&&"number"!=typeof u||l(u)>=l(o)))){i=a;break}break;case"log":for(n=0;n<r.tickformatstops.length;n++)if((a=r.tickformatstops[n]).enabled&&function(r,n){var i=null===n[0],a=null===n[1],o=h(r,n[0])>=0,s=0>=h(r,n[1]);return(i||o)&&(a||s)}(r.dtick,a.dtickrange)){i=a;break}}return i?i.value:r.tickformat},Z.getSubplots=function(r,n){var i=r._fullLayout._subplots,a=i.cartesian.concat(i.gl2d||[]),o=n?Z.findSubplotsWithAxis(a,n):a;return o.sort(function(r,n){var i=r.substr(1).split("y"),a=n.substr(1).split("y");return i[0]===a[0]?+i[1]-+a[1]:+i[0]-+a[0]}),o},Z.findSubplotsWithAxis=function(r,n){for(var i=new RegExp("x"===n._id.charAt(0)?"^"+n._id+"y":n._id+"$"),a=[],o=0;o<r.length;o++){var s=r[o];i.test(s)&&a.push(s)}return a},Z.makeClipPaths=function(r){var n=r._fullLayout;if(!n._hasOnlyLargeSploms){var i,o,s={_offset:0,_length:n.width,_id:""},l={_offset:0,_length:n.height,_id:""},c=Z.list(r,"x",!0),u=Z.list(r,"y",!0),f=[];for(i=0;i<c.length;i++)for(f.push({x:c[i],y:l}),o=0;o<u.length;o++)0===i&&f.push({x:s,y:u[o]}),f.push({x:c[i],y:u[o]});var h=n._clips.selectAll(".axesclip").data(f,function(r){return r.x._id+r.y._id});h.enter().append("clipPath").classed("axesclip",!0).attr("id",function(r){return"clip"+n._uid+r.x._id+r.y._id}).append("rect"),h.exit().remove(),h.each(function(r){a.select(this).select("rect").attr({x:r.x._offset||0,y:r.y._offset||0,width:r.x._length||1,height:r.y._length||1})})}},Z.draw=function(r,n,i){var a=r._fullLayout;"redraw"===n&&a._paper.selectAll("g.subplot").each(function(r){var n=r[0],i=a._plots[n];if(i){var o=i.xaxis,s=i.yaxis;i.xaxislayer.selectAll("."+o._id+"tick").remove(),i.yaxislayer.selectAll("."+s._id+"tick").remove(),i.xaxislayer.selectAll("."+o._id+"tick2").remove(),i.yaxislayer.selectAll("."+s._id+"tick2").remove(),i.xaxislayer.selectAll("."+o._id+"divider").remove(),i.yaxislayer.selectAll("."+s._id+"divider").remove(),i.minorGridlayer&&i.minorGridlayer.selectAll("path").remove(),i.gridlayer&&i.gridlayer.selectAll("path").remove(),i.zerolinelayer&&i.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+o._id+"title").remove(),a._infolayer.select(".g-"+s._id+"title").remove()}});var o=n&&"redraw"!==n?n:Z.listIds(r),s=Z.list(r).filter(function(r){return r.autoshift}).map(function(r){return r.overlaying});o.map(function(n){var i=Z.getFromId(r,n);if("sync"===i.tickmode&&i.overlaying){var a=o.findIndex(function(r){return r===i.overlaying});a>=0&&o.unshift(o.splice(a,1).shift())}});var l={false:{left:0,right:0}};return c.syncOrAsync(o.map(function(n){return function(){if(n){var a=Z.getFromId(r,n);i||(i={}),i.axShifts=l,i.overlayingShiftedAx=s;var o=Z.drawOne(r,a,i);return a._shiftPusher&&tz(a,a._fullDepth||0,l,!0),a._r=a.range.slice(),a._rl=c.simpleMap(a._r,a.r2l),o}}}))},Z.drawOne=function(r,n,i){var a,o,u,y=(i=i||{}).axShifts||{},g=i.overlayingShiftedAx||[];n.setScale();var v=r._fullLayout,m=n._id,x=m.charAt(0),b=Z.counterLetter(m),_=v._plots[n._mainSubplot];if(_){if(n._shiftPusher=n.autoshift||-1!==g.indexOf(n._id)||-1!==g.indexOf(n.overlaying),n._shiftPusher&"free"===n.anchor){var w=n.linewidth/2||0;"inside"===n.ticks&&(w+=n.ticklen),tz(n,w,y,!0),tz(n,n.shift||0,y,!1)}!0===i.skipTitle&&void 0!==n._shift||(n._shift=n.autoshift?y[n.overlaying][n.side]:n.shift||0);var T=_[x+"axislayer"],A=n._mainLinePosition,k=A+=n._shift,M=n._mainMirrorPosition,S=n._vals=Z.calcTicks(n),E=[n.mirror,k,M].join("_");for(a=0;a<S.length;a++)S[a].axInfo=E;n._selections={},n._tickAngles&&(n._prevTickAngles=n._tickAngles),n._tickAngles={},n._depth=null;var I={};if(n.visible){var L,C,O=Z.makeTransTickFn(n),D=Z.makeTransTickLabelFn(n),P="inside"===n.ticks,B="outside"===n.ticks;if("boundaries"===n.tickson){var R=function(r,n){var i,a=[],o=function(r,n){var i=r.xbnd[n];null!==i&&a.push(c.extendFlat({},r,{x:i}))};if(n.length){for(i=0;i<n.length;i++)o(n[i],0);o(n[i-1],1)}return a}(0,S);C=Z.clipEnds(n,R),L=P?C:R}else C=Z.clipEnds(n,S),L=P&&"period"!==n.ticklabelmode?C:S;var z,F=n._gridVals=C,N=function(r,n){var i,a,o=[],s=n.length&&n[n.length-1].x<n[0].x,l=function(r,n){var i=r.xbnd[n];null!==i&&o.push(c.extendFlat({},r,{x:i}))};if(r.showdividers&&n.length){for(i=0;i<n.length;i++){var u=n[i];u.text2!==a&&l(u,s?1:0),a=u.text2}l(n[i-1],s?0:1)}return o}(n,S);if(!v._hasOnlyLargeSploms){var U=n._subplotsWith,j={};for(a=0;a<U.length;a++){o=U[a];var V=(u=v._plots[o])[b+"axis"],H=V._mainAxis._id;if(!j[H]){j[H]=1;var X="x"===x?"M0,"+V._offset+"v"+V._length:"M"+V._offset+",0h"+V._length;Z.drawGrid(r,n,{vals:F,counterAxis:V,layer:u.gridlayer.select("."+m),minorLayer:u.minorGridlayer.select("."+m),path:X,transFn:O}),Z.drawZeroLine(r,n,{counterAxis:V,layer:u.zerolinelayer,path:X,transFn:O})}}}var K=Z.getTickSigns(n),J=Z.getTickSigns(n,"minor");if(n.ticks||n.minor&&n.minor.ticks){var $,Q,tt,te,tr=Z.makeTickPath(n,k,K[2]),tn=Z.makeTickPath(n,k,J[2],{minor:!0});if(n._anchorAxis&&n.mirror&&!0!==n.mirror?($=Z.makeTickPath(n,M,K[3]),Q=Z.makeTickPath(n,M,J[3],{minor:!0}),tt=tr+$,te=tn+Q):($="",Q="",tt=tr,te=tn),n.showdividers&&B&&"boundaries"===n.tickson){var ti={};for(a=0;a<N.length;a++)ti[N[a].x]=1;z=function(r){return ti[r.x]?$:tt}}else z=function(r){return r.minor?te:tt}}if(Z.drawTicks(r,n,{vals:L,layer:T,path:z,transFn:O}),"allticks"===n.mirror){var ta=Object.keys(n._linepositions||{});for(a=0;a<ta.length;a++){o=ta[a],u=v._plots[o];var to=n._linepositions[o]||[],ts=to[0],tl=to[1],tc=to[2],tu=Z.makeTickPath(n,ts,tc?K[0]:J[0],{minor:tc})+Z.makeTickPath(n,tl,tc?K[1]:J[1],{minor:tc});Z.drawTicks(r,n,{vals:L,layer:u[x+"axislayer"],path:tu,transFn:O})}}var tf=[];if(tf.push(function(){return Z.drawLabels(r,n,{vals:S,layer:T,plotinfo:u,transFn:D,labelFns:Z.makeLabelFns(n,k)})}),"multicategory"===n.type){var th={x:2,y:10}[x];tf.push(function(){var i=td()[({x:"height",y:"width"})[x]]+th+(n._tickAngles[m+"tick"]?n.tickfont.size*W:0);return Z.drawLabels(r,n,{vals:function(r,n){for(var i=[],a={},o=0;o<n.length;o++){var s=n[o];a[s.text2]?a[s.text2].push(s.x):a[s.text2]=[s.x]}for(var l in a)i.push(tm(r,c.interp(a[l],.5),l));return i}(n,S),layer:T,cls:m+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:O,labelFns:Z.makeLabelFns(n,k+i*K[4])})}),tf.push(function(){var i,a,o,s;return n._depth=K[4]*(td("tick2")[n.side]-k),i={vals:N,layer:T,path:Z.makeTickPath(n,k,K[4],{len:n._depth}),transFn:O},a=n._id+"divider",o=i.vals,void((s=i.layer.selectAll("path."+a).data(o,tk)).exit().remove(),s.enter().insert("path",":first-child").classed(a,1).classed("crisp",1).call(p.stroke,n.dividercolor).style("stroke-width",d.crispRound(r,n.dividerwidth,1)+"px"),s.attr("transform",i.transFn).attr("d",i.path))})}else n.title.hasOwnProperty("standoff")&&tf.push(function(){n._depth=K[4]*(td()[n.side]-k)});var tp=l.getComponentMethod("rangeslider","isVisible")(n);return i.skipTitle||tp&&"bottom"===n.side||tf.push(function(){return function(r,n){var i,a=r._fullLayout,o=n._id,s=o.charAt(0),l=n.title.font.size,c=(n.title.text.match(f.BR_TAG_ALL)||[]).length;if(n.title.hasOwnProperty("standoff"))"bottom"===n.side||"right"===n.side?i=n._depth+n.title.standoff+l*G:"top"!==n.side&&"left"!==n.side||(i=n._depth+n.title.standoff+l*(q+c*W));else{var u=tB(n);if("multicategory"===n.type)i=n._depth;else{var p=1.5*l;u&&(p=.5*l,"outside"===n.ticks&&(p+=n.ticklen)),i=10+p+(n.linewidth?n.linewidth-1:0)}u||(i+="x"===s?"top"===n.side?l*(n.showticklabels?1:0):l*(n.showticklabels?1.5:.5):"right"===n.side?l*(n.showticklabels?1:.5):l*(n.showticklabels?.5:0))}var y,g,v,m,x=Z.getPxPosition(r,n);if("x"===s?(g=n._offset+n._length/2,v="top"===n.side?x-i:x+i):(v=n._offset+n._length/2,g="right"===n.side?x+i:x-i,y={rotate:"-90",offset:0}),"multicategory"!==n.type){var b=n._selections[n._id+"tick"];if(m={selection:b,side:n.side},b&&b.node()&&b.node().parentNode){var _=d.getTranslate(b.node().parentNode);m.offsetLeft=_.x,m.offsetTop=_.y}n.title.hasOwnProperty("standoff")&&(m.pad=0)}return n._titleStandoff=i,h.draw(r,o+"title",{propContainer:n,propName:n._name+".title.text",placeholder:a._dfltTitle[s],avoid:m,transform:y,attributes:{x:g,y:v,"text-anchor":"middle"}})}(r,n)}),tf.push(function(){var i,a,o,c,u=n.side.charAt(0),f=Y[n.side].charAt(0),h=Z.getPxPosition(r,n),p=B?n.ticklen:0;(n.automargin||tp||n._shiftPusher)&&("multicategory"===n.type?i=td("tick2"):(i=td(),"x"===x&&"b"===u&&(n._depth=Math.max(i.width>0?i.bottom-h:0,p))));var d=0,y=0;if(n._shiftPusher&&(d=Math.max(p,i.height>0?"l"===u?h-i.left:i.right-h:0),n.title.text!==v._dfltTitle[x]&&(y=(n._titleStandoff||0)+(n._titleScoot||0),"l"===u&&(y+=tM(n))),n._fullDepth=Math.max(d,y)),n.automargin){a={x:0,y:0,r:0,l:0,t:0,b:0};var g=[0,1],m="number"==typeof n._shift?n._shift:0;if("x"===x){if("b"===u?a[u]=n._depth:(a[u]=n._depth=Math.max(i.width>0?h-i.top:0,p),g.reverse()),i.width>0){var _=i.right-(n._offset+n._length);_>0&&(a.xr=1,a.r=_);var w=n._offset-i.left;w>0&&(a.xl=0,a.l=w)}}else if("l"===u?(n._depth=Math.max(i.height>0?h-i.left:0,p),a[u]=n._depth-m):(n._depth=Math.max(i.height>0?i.right-h:0,p),a[u]=n._depth+m,g.reverse()),i.height>0){var T=i.bottom-(n._offset+n._length);T>0&&(a.yb=0,a.b=T);var A=n._offset-i.top;A>0&&(a.yt=1,a.t=A)}a[b]="free"===n.anchor?n.position:n._anchorAxis.domain[g[0]],n.title.text!==v._dfltTitle[x]&&(a[u]+=tM(n)+(n.title.standoff||0)),n.mirror&&"free"!==n.anchor&&((o={x:0,y:0,r:0,l:0,t:0,b:0})[f]=n.linewidth,n.mirror&&!0!==n.mirror&&(o[f]+=p),!0===n.mirror||"ticks"===n.mirror?o[b]=n._anchorAxis.domain[g[1]]:"all"!==n.mirror&&"allticks"!==n.mirror||(o[b]=[n._counterDomainMin,n._counterDomainMax][g[1]]))}tp&&(c=l.getComponentMethod("rangeslider","autoMarginOpts")(r,n)),"string"==typeof n.automargin&&(tT(a,n.automargin),tT(o,n.automargin)),s.autoMargin(r,tI(n),a),s.autoMargin(r,tL(n),o),s.autoMargin(r,tC(n),c)}),c.syncOrAsync(tf)}}function td(r){var i=m+(r||"tick");return I[i]||(I[i]=function(r,n,i){var a,o,s,l;if(r._selections[n].size())a=1/0,o=-1/0,s=1/0,l=-1/0,r._selections[n].each(function(){var r=tE(this),n=d.bBox(r.node().parentNode);a=Math.min(a,n.top),o=Math.max(o,n.bottom),s=Math.min(s,n.left),l=Math.max(l,n.right)});else{var c=Z.makeLabelFns(r,i);a=o=c.yFn({dx:0,dy:0,fontSize:0}),s=l=c.xFn({dx:0,dy:0,fontSize:0})}return{top:a,bottom:o,left:s,right:l,height:o-a,width:l-s}}(n,i,k)),I[i]}},Z.getTickSigns=function(r,n){var i=r._id.charAt(0),a=r.side===({x:"top",y:"right"})[i]?1:-1,o=[-1,1,a,-a];return"inside"!==(n?(r.minor||{}).ticks:r.ticks)==("x"===i)&&(o=o.map(function(r){return-r})),r.side&&o.push({l:-1,t:-1,r:1,b:1}[r.side.charAt(0)]),o},Z.makeTransTickFn=function(r){return"x"===r._id.charAt(0)?function(n){return u(r._offset+r.l2p(n.x),0)}:function(n){return u(0,r._offset+r.l2p(n.x))}},Z.makeTransTickLabelFn=function(r){var n=function(r){var n=r.ticklabelposition||"",i=function(r){return -1!==n.indexOf(r)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom"),c=i("inside"),u=l||o||a||s;if(!u&&!c)return[0,0];var f=r.side,h=u?(r.tickwidth||0)/2:0,p=3,d=r.tickfont?r.tickfont.size:12;return(l||a)&&(h+=d*G,p+=(r.linewidth||0)/2),(o||s)&&(h+=(r.linewidth||0)/2,p+=3),c&&"top"===f&&(p-=d*(1-G)),(o||a)&&(h=-h),"bottom"!==f&&"right"!==f||(p=-p),[u?h:0,c?p:0]}(r),i=r.ticklabelshift||0,a=r.ticklabelstandoff||0,o=n[0],s=n[1],l=r.range[0]>r.range[1],c=r.ticklabelposition&&-1!==r.ticklabelposition.indexOf("inside");if(i&&(i*=l?-1:1),a){var f=r.side;a*=c&&("top"===f||"left"===f)||!c&&("bottom"===f||"right"===f)?1:-1}return"x"===r._id.charAt(0)?function(n){return u(o+r._offset+r.l2p(tA(n))+i,s+a)}:function(n){return u(s+a,o+r._offset+r.l2p(tA(n))+i)}},Z.makeTickPath=function(r,n,i,a){a||(a={});var o=a.minor;if(o&&!r.minor)return"";var s=void 0!==a.len?a.len:o?r.minor.ticklen:r.ticklen,l=r._id.charAt(0),c=(r.linewidth||1)/2;return"x"===l?"M0,"+(n+c*i)+"v"+s*i:"M"+(n+c*i)+",0h"+s*i},Z.makeLabelFns=function(r,n,i){var a=r.ticklabelposition||"",s=function(r){return -1!==a.indexOf(r)},l=s("top"),u=s("left"),f=s("right"),h=s("bottom")||u||l||f,p=s("inside"),d="inside"===a&&"inside"===r.ticks||!p&&"outside"===r.ticks&&"boundaries"!==r.tickson,y=0,g=0,v=d?r.ticklen:0;if(p?v*=-1:h&&(v=0),d&&(y+=v,i)){var m=c.deg2rad(i);y=v*Math.cos(m)+1,g=v*Math.sin(m)}r.showticklabels&&(d||r.showline)&&(y+=.2*r.tickfont.size);var x,b,_,w,T,A={labelStandoff:y+=(r.linewidth||1)/2*(p?-1:1),labelShift:g},k=0,M=r.side,S=r._id.charAt(0),E=r.tickangle;if("x"===S)w=(T=!p&&"bottom"===M||p&&"top"===M)?1:-1,p&&(w*=-1),x=g*w,b=n+y*w,_=T?1:-.2,90===Math.abs(E)&&(p?_+=q:_=-90===E&&"bottom"===M?G:90===E&&"top"===M?q:.5,k=q/2*(E/90)),A.xFn=function(r){return r.dx+x+k*r.fontSize},A.yFn=function(r){return r.dy+b+r.fontSize*_},A.anchorFn=function(r,n){if(h){if(u)return"end";if(f)return"start"}return o(n)&&0!==n&&180!==n?n*w<0!==p?"end":"start":"middle"},A.heightFn=function(n,i,a){return i<-60||i>60?-.5*a:"top"===r.side!==p?-a:0};else if("y"===S){if(w=(T=!p&&"left"===M||p&&"right"===M)?1:-1,p&&(w*=-1),x=y,b=g*w,_=0,p||90!==Math.abs(E)||(_=-90===E&&"left"===M||90===E&&"right"===M?G:.5),p){var I=o(E)?+E:0;0!==I&&(k=Math.abs(Math.sin(c.deg2rad(I)))*G*w,_=0)}A.xFn=function(r){return r.dx+n-(x+r.fontSize*_)*w+k*r.fontSize},A.yFn=function(r){return r.dy+b+r.fontSize*q},A.anchorFn=function(r,n){return o(n)&&90===Math.abs(n)?"middle":T?"end":"start"},A.heightFn=function(n,i,a){return"right"===r.side&&(i*=-1),i<-30?-a:i<30?-.5*a:0}}return A},Z.drawTicks=function(r,n,i){i=i||{};var o=n._id+"tick",s=[].concat(n.minor&&n.minor.ticks?i.vals.filter(function(r){return r.minor&&!r.noTick}):[]).concat(n.ticks?i.vals.filter(function(r){return!r.minor&&!r.noTick}):[]),l=i.layer.selectAll("path."+o).data(s,tk);l.exit().remove(),l.enter().append("path").classed(o,1).classed("ticks",1).classed("crisp",!1!==i.crisp).each(function(r){return p.stroke(a.select(this),r.minor?n.minor.tickcolor:n.tickcolor)}).style("stroke-width",function(i){return d.crispRound(r,i.minor?n.minor.tickwidth:n.tickwidth,1)+"px"}).attr("d",i.path).style("display",null),tR(n,[U]),l.attr("transform",i.transFn)},Z.drawGrid=function(r,n,i){if(i=i||{},"sync"!==n.tickmode){var o=n._id+"grid",s=n.minor&&n.minor.showgrid,l=s?i.vals.filter(function(r){return r.minor}):[],c=n.showgrid?i.vals.filter(function(r){return!r.minor}):[],u=i.counterAxis;if(u&&Z.shouldShowZeroLine(r,n,u))for(var f="array"===n.tickmode,h=0;h<c.length;h++){var y=c[h].x;if(f?!y:Math.abs(y)<n.dtick/100){if(c=c.slice(0,h).concat(c.slice(h+1)),!f)break;h--}}n._gw=d.crispRound(r,n.gridwidth,1);for(var g=s?d.crispRound(r,n.minor.gridwidth,1):0,v=i.layer,m=i.minorLayer,x=1;x>=0;x--){var b=x?v:m;if(b){var _=b.selectAll("path."+o).data(x?c:l,tk);_.exit().remove(),_.enter().append("path").classed(o,1).classed("crisp",!1!==i.crisp),_.attr("transform",i.transFn).attr("d",i.path).each(function(r){return p.stroke(a.select(this),r.minor?n.minor.gridcolor:n.gridcolor||"#ddd")}).style("stroke-dasharray",function(r){return d.dashStyle(r.minor?n.minor.griddash:n.griddash,r.minor?n.minor.gridwidth:n.gridwidth)}).style("stroke-width",function(r){return(r.minor?g:n._gw)+"px"}).style("display",null),"function"==typeof i.path&&_.attr("d",i.path)}}tR(n,[F,N])}},Z.drawZeroLine=function(r,n,i){i=i||i;var a=n._id+"zl",o=Z.shouldShowZeroLine(r,n,i.counterAxis),s=i.layer.selectAll("path."+a).data(o?[{x:0,id:n._id}]:[]);s.exit().remove(),s.enter().append("path").classed(a,1).classed("zl",1).classed("crisp",!1!==i.crisp).each(function(){i.layer.selectAll("path").sort(function(r,n){return J(r.id,n.id)})}),s.attr("transform",i.transFn).attr("d",i.path).call(p.stroke,n.zerolinecolor||p.defaultLine).style("stroke-width",d.crispRound(r,n.zerolinewidth,n._gw||1)+"px").style("display",null),tR(n,[z])},Z.drawLabels=function(r,n,i){i=i||{};var s=r._fullLayout,l=n._id,h=i.cls||l+"tick",p=i.vals.filter(function(r){return r.text}),y=i.labelFns,g=i.secondary?0:n.tickangle,v=(n._prevTickAngles||{})[h],m=i.layer.selectAll("g."+h).data(n.showticklabels?p:[],tk),x=[];function b(r,s){r.each(function(r){var l=a.select(this),c=l.select(".text-math-group"),h=y.anchorFn(r,s),p=i.transFn.call(l.node(),r)+(o(s)&&0!=+s?" rotate("+s+","+y.xFn(r)+","+(y.yFn(r)-r.fontSize/2)+")":""),g=f.lineCount(l),v=W*r.fontSize,m=y.heightFn(r,o(s)?+s:0,(g-1)*v);if(m&&(p+=u(0,m)),c.empty()){var x=l.select("text");x.attr({transform:p,"text-anchor":h}),x.style("opacity",1),n._adjustTickLabelsOverflow&&n._adjustTickLabelsOverflow()}else{var b=d.bBox(c.node()).width*({end:-.5,start:.5})[h];c.attr("transform",p+u(b,0))}})}m.enter().append("g").classed(h,1).append("text").attr("text-anchor","middle").each(function(n){var i=a.select(this),o=r._promises.length;i.call(f.positionText,y.xFn(n),y.yFn(n)).call(d.font,{family:n.font,size:n.fontSize,color:n.fontColor,weight:n.fontWeight,style:n.fontStyle,variant:n.fontVariant,textcase:n.fontTextcase,lineposition:n.fontLineposition,shadow:n.fontShadow}).text(n.text).call(f.convertToTspans,r),r._promises[o]?x.push(r._promises.pop().then(function(){b(i,g)})):b(i,g)}),tR(n,[j]),m.exit().remove(),i.repositionOnUpdate&&m.each(function(r){a.select(this).select("text").call(f.positionText,y.xFn(r),y.yFn(r))}),n._adjustTickLabelsOverflow=function(){var i=n.ticklabeloverflow;if(i&&"allow"!==i){var o=-1!==i.indexOf("hide"),l="x"===n._id.charAt(0),u=0,f=l?r._fullLayout.width:r._fullLayout.height;if(-1!==i.indexOf("domain")){var h=c.simpleMap(n.range,n.r2l);u=n.l2p(h[0])+n._offset,f=n.l2p(h[1])+n._offset}var p=Math.min(u,f),y=Math.max(u,f),g=n.side,v=1/0,x=-1/0;for(var b in m.each(function(r){var i=a.select(this);if(i.select(".text-math-group").empty()){var s=d.bBox(i.node()),c=0;l?(s.right>y||s.left<p)&&(c=1):(s.bottom>y||s.top+(n.tickangle?0:r.fontSize/4)<p)&&(c=1);var u=i.select("text");c?o&&u.style("opacity",0):(u.style("opacity",1),v="bottom"===g||"right"===g?Math.min(v,l?s.top:s.left):-1/0,x="top"===g||"left"===g?Math.max(x,l?s.bottom:s.right):1/0)}}),s._plots){var _=s._plots[b];if(n._id===_.xaxis._id||n._id===_.yaxis._id){var w=l?_.yaxis:_.xaxis;w&&(w["_visibleLabelMin_"+n._id]=v,w["_visibleLabelMax_"+n._id]=x)}}}},n._hideCounterAxisInsideTickLabels=function(r){var i="x"===n._id.charAt(0),o=[];for(var l in s._plots){var c=s._plots[l];n._id!==c.xaxis._id&&n._id!==c.yaxis._id||o.push(i?c.yaxis:c.xaxis)}o.forEach(function(i,o){i&&tB(i)&&(r||[z,N,F,U,j]).forEach(function(r){var l="tick"===r.K&&"text"===r.L&&"period"===n.ticklabelmode,c=s._plots[n._mainSubplot];(r.K===z.K?c.zerolinelayer.selectAll("."+n._id+"zl"):r.K===N.K?c.minorGridlayer.selectAll("."+n._id):r.K===F.K?c.gridlayer.selectAll("."+n._id):c[n._id.charAt(0)+"axislayer"]).each(function(){var s=a.select(this);r.L&&(s=s.selectAll(r.L)),s.each(function(s){var c=n.l2p(l?tA(s):s.x)+n._offset,u=a.select(this);c<n["_visibleLabelMax_"+i._id]&&c>n["_visibleLabelMin_"+i._id]?u.style("display","none"):"tick"!==r.K||o||u.style("display",null)})})})})},b(m,v+1?v:g);var _=null;n._selections&&(n._selections[h]=m);var w=[function(){return x.length&&Promise.all(x)}];n.automargin&&s._redrawFromAutoMarginCount&&90===v?(_=v,w.push(function(){b(m,v)})):w.push(function(){if(b(m,g),p.length&&n.autotickangles&&("log"!==n.type||"D"!==String(n.dtick).charAt(0))){_=n.autotickangles[0];var r,a=0,o=[],s=1;m.each(function(r){a=Math.max(a,r.fontSize);var i=n.l2p(r.x),l=tE(this),c=d.bBox(l.node());s=Math.max(s,f.lineCount(l)),o.push({top:0,bottom:10,height:10,left:i-c.width/2,right:i+c.width/2+2,width:c.width+2})});var l=("boundaries"===n.tickson||n.showdividers)&&!i.secondary,u=p.length,h=Math.abs((p[u-1].x-p[0].x)*n._m)/(u-1),y=l?h/2:h,v=y/Math.sqrt(Math.pow(y,2)+Math.pow(l?n.ticklen:1.25*a*s,2)),x=n.autotickangles.map(function(r){return r*Math.PI/180}),w=x.find(function(r){return Math.abs(Math.cos(r))<=v});void 0===w&&(w=x.reduce(function(r,n){return Math.abs(Math.cos(r))<Math.abs(Math.cos(n))?r:n},x[0]));var T=180/Math.PI*w;if(l){var A=2;for(n.ticks&&(A+=n.tickwidth/2),r=0;r<o.length;r++){var k=p[r].xbnd,M=o[r];if(null!==k[0]&&M.left-n.l2p(k[0])<A||null!==k[1]&&n.l2p(k[1])-M.right<A){_=T;break}}}else{var S=n.ticklabelposition||"",E=function(r){return -1!==S.indexOf(r)},I=E("top"),L=E("left"),C=E("right"),O=E("bottom")||L||I||C?(n.tickwidth||0)+6:0;for(r=0;r<o.length-1;r++)if(c.bBoxIntersect(o[r],o[r+1],O)){_=T;break}}_&&b(m,_)}}),n._tickAngles&&w.push(function(){n._tickAngles[h]=null===_?o(g)?g:0:_});var T=function(){var r=0,i=0;return m.each(function(a,o){var s,l=tE(this);l.select(".text-math-group").empty()&&(n._vals[o]&&(s=n._vals[o].bb||d.bBox(l.node()),n._vals[o].bb=s),r=Math.max(r,s.width),i=Math.max(i,s.height))}),{labelsMaxW:r,labelsMaxH:i}},A=n._anchorAxis;if(A&&(A.autorange||A.insiderange)&&tB(n)&&!$(s,n._id)&&(s._insideTickLabelsUpdaterange||(s._insideTickLabelsUpdaterange={}),A.autorange&&(s._insideTickLabelsUpdaterange[A._name+".autorange"]=A.autorange,w.push(T)),A.insiderange)){var k=T(),M="y"===n._id.charAt(0)?k.labelsMaxW:k.labelsMaxH;M+=6,"inside"===n.ticklabelposition&&(M+=n.ticklen||0);var S="right"===n.side||"top"===n.side?1:-1,E=1===S?1:0,I=1===S?0:1,L=[];L[I]=A.range[I];var C=A.range,O=A.r2p(C[E]),D=A.r2p(C[I]),P=s._insideTickLabelsUpdaterange[A._name+".range"];if(P){var B=A.r2p(P[E]),R=A.r2p(P[I]),V=S*("y"===n._id.charAt(0)?1:-1);V*O<V*B&&(O=B,L[E]=C[E]=P[E]),V*D>V*R&&(D=R,L[I]=C[I]=P[I])}var H=Math.abs(D-O);H-M>0?M*=1+M/(H-=M):M=0,"y"!==n._id.charAt(0)&&(M=-M),L[E]=A.p2r(A.r2p(C[E])+S*M),"min"===A.autorange||"max reversed"===A.autorange?(L[0]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0):"max"!==A.autorange&&"min reversed"!==A.autorange||(L[1]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0),s._insideTickLabelsUpdaterange[A._name+".range"]=L}var q=c.syncOrAsync(w);return q&&q.then&&r._promises.push(q),q},Z.getPxPosition=function(r,n){var i,a=r._fullLayout._size,o=n._id.charAt(0),s=n.side;return"free"!==n.anchor?i=n._anchorAxis:"x"===o?i={_offset:a.t+(1-(n.position||0))*a.h,_length:0}:"y"===o&&(i={_offset:a.l+(n.position||0)*a.w+n._shift,_length:0}),"top"===s||"left"===s?i._offset:"bottom"===s||"right"===s?i._offset+i._length:void 0},Z.shouldShowZeroLine=function(r,n,i){var a=c.simpleMap(n.range,n.r2l);return a[0]*a[1]<=0&&n.zeroline&&("linear"===n.type||"-"===n.type)&&!(n.rangebreaks&&n.maskBreaks(0)===R)&&(tS(n,0)||!function(r,n,i,a){var o=i._mainAxis;if(o){var s=r._fullLayout,l=n._id.charAt(0),c=Z.counterLetter(n._id),u=n._offset+(Math.abs(a[0])<Math.abs(a[1])==("x"===l)?0:n._length),f=s._plots[i._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return y(i);for(var h=Z.list(r,c),p=0;p<h.length;p++){var d=h[p];if(d._mainAxis===o&&y(d))return!0}}function y(r){if(!r.showline||!r.linewidth)return!1;var i=Math.max((r.linewidth+n.zerolinewidth)/2,1);function a(r){return"number"==typeof r&&Math.abs(r-u)<i}if(a(r._mainLinePosition)||a(r._mainMirrorPosition))return!0;var o=r._linepositions||{};for(var s in o)if(a(o[s][0])||a(o[s][1]))return!0}}(r,n,i,a)||function(r,n){for(var i=r._fullData,a=n._mainSubplot,o=n._id.charAt(0),s=0;s<i.length;s++){var c=i[s];if(!0===c.visible&&c.xaxis+c.yaxis===a&&(l.traceIs(c,"bar-like")&&c.orientation===({x:"h",y:"v"})[o]||c.fill&&c.fill.charAt(c.fill.length-1)===o))return!0}return!1}(r,n))},Z.clipEnds=function(r,n){return n.filter(function(n){return tS(r,n.x)})},Z.allowAutoMargin=function(r){for(var n=Z.list(r,"",!0),i=0;i<n.length;i++){var a=n[i];a.automargin&&(s.allowAutoMargin(r,tI(a)),a.mirror&&s.allowAutoMargin(r,tL(a))),l.getComponentMethod("rangeslider","isVisible")(a)&&s.allowAutoMargin(r,tC(a))}},Z.swap=function(r,n){for(var i=function(r,n){var i,a,o=[];for(i=0;i<n.length;i++){var s=[],l=r._fullData[n[i]].xaxis,c=r._fullData[n[i]].yaxis;if(l&&c){for(a=0;a<o.length;a++)-1===o[a].x.indexOf(l)&&-1===o[a].y.indexOf(c)||s.push(a);if(s.length){var u,f=o[s[0]];if(s.length>1)for(a=1;a<s.length;a++)u=o[s[a]],tO(f.x,u.x),tO(f.y,u.y);tO(f.x,[l]),tO(f.y,[c])}else o.push({x:[l],y:[c]})}}return o}(r,n),a=0;a<i.length;a++)(function(r,n,i){var a,o,s=[],l=[],u=r.layout;for(a=0;a<n.length;a++)s.push(Z.getFromId(r,n[a]));for(a=0;a<i.length;a++)l.push(Z.getFromId(r,i[a]));var f=Object.keys(y),h=["anchor","domain","overlaying","position","side","tickangle","editType"],p=["linear","log"];for(a=0;a<f.length;a++){var d=f[a],g=s[0][d],v=l[0][d],m=!0,x=!1,b=!1;if("_"!==d.charAt(0)&&"function"!=typeof g&&-1===h.indexOf(d)){for(o=1;o<s.length&&m;o++){var _=s[o][d];"type"===d&&-1!==p.indexOf(g)&&-1!==p.indexOf(_)&&g!==_?x=!0:_!==g&&(m=!1)}for(o=1;o<l.length&&m;o++){var w=l[o][d];"type"===d&&-1!==p.indexOf(v)&&-1!==p.indexOf(w)&&v!==w?b=!0:l[o][d]!==v&&(m=!1)}m&&(x&&(u[s[0]._name].type="linear"),b&&(u[l[0]._name].type="linear"),function(r,n,i,a,o){var s,l=c.nestedProperty,u=l(r[i[0]._name],n).get(),f=l(r[a[0]._name],n).get();for("title"===n&&(u&&u.text===o.x&&(u.text=o.y),f&&f.text===o.y&&(f.text=o.x)),s=0;s<i.length;s++)l(r,i[s]._name+"."+n).set(f);for(s=0;s<a.length;s++)l(r,a[s]._name+"."+n).set(u)}(u,d,s,l,r._fullLayout._dfltTitle))}}for(a=0;a<r._fullLayout.annotations.length;a++){var T=r._fullLayout.annotations[a];-1!==n.indexOf(T.xref)&&-1!==i.indexOf(T.yref)&&c.swapAttrs(u.annotations[a],["?"])}})(r,i[a].x,i[a].y)}},52976:function(r,n,i){var a=i(38248),o=i(3400),s=i(39032).BADNUM,l=o.isArrayOrTypedArray,c=o.isDateTime,u=o.cleanNumber,f=Math.round;function h(r){return Math.max(1,(r-1)/1e3)}r.exports=function(r,n,i){var o,p=r,d=i.noMultiCategory;if(l(p)&&!p.length)return"-";if(!d&&l((o=p)[0])&&l(o[1]))return"multicategory";if(d&&Array.isArray(p[0])){for(var y=[],g=0;g<p.length;g++)if(l(p[g]))for(var v=0;v<p[g].length;v++)y.push(p[g][v]);p=y}if(function(r,n){for(var i=r.length,o=h(i),s=0,l=0,u={},p=0;p<i;p+=o){var d=r[f(p)],y=String(d);u[y]||(u[y]=1,c(d,n)&&s++,a(d)&&l++)}return s>2*l}(p,n))return"date";var m="strict"!==i.autotypenumbers;return!function(r,n){for(var i=r.length,a=h(i),o=0,l=0,c={},p=0;p<i;p+=a){var d=r[f(p)],y=String(d);if(!c[y]){c[y]=1;var g=typeof d;"boolean"===g?l++:(n?u(d)!==s:"number"===g)?o++:"string"===g&&l++}}return l>2*o}(p,m)?!function(r,n){for(var i,o=r.length,s=0;s<o;s++)if(i=r[s],n?a(i):"number"==typeof i)return!0;return!1}(p,m)?"-":"linear":"category"}},28336:function(r,n,i){var a=i(38248),o=i(24040),s=i(3400),l=i(31780),c=i(51272),u=i(94724),f=i(26332),h=i(25404),p=i(95936),d=i(42568),y=i(22416),g=i(42136),v=i(96312),m=i(78344),x=i(33816).WEEKDAY_PATTERN,b=i(33816).HOUR_PATTERN;function _(r,n,i){function o(i,a){return s.coerce(r,n,u.rangebreaks,i,a)}if(o("enabled")){var l=o("bounds");if(l&&l.length>=2){var c,f,h="";if(2===l.length){for(c=0;c<2;c++)if(f=T(l[c])){h=x;break}}var p=o("pattern",h);if(p===x)for(c=0;c<2;c++)(f=T(l[c]))&&(n.bounds[c]=l[c]=f-1);if(p)for(c=0;c<2;c++)switch(f=l[c],p){case x:if(!a(f)||(f=+f)!==Math.floor(f)||f<0||f>=7)return void(n.enabled=!1);n.bounds[c]=l[c]=f;break;case b:if(!a(f)||(f=+f)<0||f>24)return void(n.enabled=!1);n.bounds[c]=l[c]=f}if(!1===i.autorange){var d=i.range;if(d[0]<d[1]){if(l[0]<d[0]&&l[1]>d[1])return void(n.enabled=!1)}else if(l[0]>d[0]&&l[1]<d[1])return void(n.enabled=!1)}}else{var y=o("values");if(!y||!y.length)return void(n.enabled=!1);o("dvalue")}}}r.exports=function(r,n,i,a,b){var w,T=a.letter,A=a.font||{},k=a.splomStash||{},M=i("visible",!a.visibleDflt),S=n._template||{},E=n.type||S.type||"-";"date"===E&&(o.getComponentMethod("calendars","handleDefaults")(r,n,"calendar",a.calendar),a.noTicklabelmode||(w=i("ticklabelmode"))),a.noTicklabelindex||"date"!==E&&"linear"!==E||i("ticklabelindex");var I="";a.noTicklabelposition&&"multicategory"!==E||(I=s.coerce(r,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===w?["outside","inside"]:"x"===T?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||i("ticklabeloverflow",-1!==I.indexOf("inside")?"hide past domain":"category"===E||"multicategory"===E?"allow":"hide past div"),m(n,b),v(r,n,i,a),y(r,n,i,a),"category"===E||a.noHover||i("hoverformat");var L=i("color"),C=L!==u.color.dflt?L:A.color,O=k.label||b._dfltTitle[T];if(d(r,n,i,E,a),!M)return n;i("title.text",O),s.coerceFont(i,"title.font",A,{overrideDflt:{size:s.bigFont(A.size),color:C}}),f(r,n,i,E);var D=a.hasMinor;if(D&&(l.newContainer(n,"minor"),f(r,n,i,E,{isMinor:!0})),p(r,n,i,E,a),h(r,n,i,a),D){var P=a.isMinor;a.isMinor=!0,h(r,n,i,a),a.isMinor=P}g(r,n,i,{dfltColor:L,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:D,attributes:u}),!D||n.minor.ticks||n.minor.showgrid||delete n.minor,(n.showline||n.ticks)&&i("mirror");var B,R="multicategory"===E;if(!a.noTickson&&("category"===E||R)&&(n.ticks||n.showgrid)&&(R&&(B="boundaries"),"boundaries"!==i("tickson",B)||delete n.ticklabelposition),R&&i("showdividers")&&(i("dividercolor"),i("dividerwidth")),"date"===E){if(c(r,n,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:_}),n.rangebreaks.length){for(var z=0;z<n.rangebreaks.length;z++)if(n.rangebreaks[z].pattern===x){n._hasDayOfWeekBreaks=!0;break}if(m(n,b),b._has("scattergl")||b._has("splom"))for(var F=0;F<a.data.length;F++){var N=a.data[F];"scattergl"!==N.type&&"splom"!==N.type||(N.visible=!1,s.warn(N.type+" traces do not work on axes with rangebreaks. Setting trace "+N.index+" to `visible: false`."))}}else delete n.rangebreaks}return n};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function T(r){if("string"==typeof r)return w[r.substr(0,3).toLowerCase()]}},29736:function(r,n,i){var a=i(26880),o=a.FORMAT_LINK,s=a.DATE_FORMAT_LINK;function l(r,n){return["Sets the "+r+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+o+"."].join(" ")}function c(r,n){return l(r,n)+[" And for dates see: "+s+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}r.exports={axisHoverFormat:function(r,n){return{valType:"string",dflt:"",editType:"none",description:(n?l:c)("hover text",r)+["By default the values are formatted using "+(n?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:l,descriptionWithDates:c}},79811:function(r,n,i){var a=i(24040),o=i(33816);function s(r,n){if(n&&n.length){for(var i=0;i<n.length;i++)if(n[i][r])return!0}return!1}n.id2name=function(r){if("string"==typeof r&&r.match(o.AX_ID_PATTERN)){var n=r.split(" ")[0].substr(1);return"1"===n&&(n=""),r.charAt(0)+"axis"+n}},n.name2id=function(r){if(r.match(o.AX_NAME_PATTERN)){var n=r.substr(5);return"1"===n&&(n=""),r.charAt(0)+n}},n.cleanId=function(r,n,i){var a=/( domain)$/.test(r);if("string"==typeof r&&r.match(o.AX_ID_PATTERN)&&(!n||r.charAt(0)===n)&&(!a||i)){var s=r.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===s&&(s=""),r.charAt(0)+s+(a&&i?" domain":"")}},n.list=function(r,i,a){var o=r._fullLayout;if(!o)return[];var s,l=n.listIds(r,i),c=Array(l.length);for(s=0;s<l.length;s++){var u=l[s];c[s]=o[u.charAt(0)+"axis"+u.substr(1)]}if(!a){var f=o._subplots.gl3d||[];for(s=0;s<f.length;s++){var h=o[f[s]];i?c.push(h[i+"axis"]):c.push(h.xaxis,h.yaxis,h.zaxis)}}return c},n.listIds=function(r,n){var i=r._fullLayout;if(!i)return[];var a=i._subplots;return n?a[n+"axis"]:a.xaxis.concat(a.yaxis)},n.getFromId=function(r,i,a){var o=r._fullLayout;return i=void 0===i||"string"!=typeof i?i:i.replace(" domain",""),"x"===a?i=i.replace(/y[0-9]*/,""):"y"===a&&(i=i.replace(/x[0-9]*/,"")),o[n.id2name(i)]},n.getFromTrace=function(r,i,o){var s=r._fullLayout,l=null;if(a.traceIs(i,"gl3d")){var c=i.scene;"scene"===c.substr(0,5)&&(l=s[c][o+"axis"])}else l=n.getFromId(r,i[o+"axis"]||o);return l},n.idSort=function(r,n){var i=r.charAt(0),a=n.charAt(0);return i!==a?i>a?1:-1:+(r.substr(1)||1)-+(n.substr(1)||1)},n.ref2id=function(r){return!!/^[xyz]/.test(r)&&r.split(" ")[0]},n.isLinked=function(r,n){return s(n,r._axisMatchGroups)||s(n,r._axisConstraintGroups)}},22416:function(r,n,i){var a=i(38116).isTypedArraySpec;r.exports=function(r,n,i,o){if("category"===n.type){var s,l=r.categoryarray,c=Array.isArray(l)&&l.length>0||a(l);c&&(s="array");var u,f=i("categoryorder",s);"array"===f&&(u=i("categoryarray")),c||"array"!==f||(f=n.categoryorder="trace"),"trace"===f?n._initialCategories=[]:"array"===f?n._initialCategories=u.slice():(u=(function(r,n){var i,a,o,s=n.dataAttr||r._id.charAt(0),l={};if(n.axData)i=n.axData;else for(i=[],a=0;a<n.data.length;a++){var c=n.data[a];c[s+"axis"]===r._id&&i.push(c)}for(a=0;a<i.length;a++){var u=i[a][s];for(o=0;o<u.length;o++){var f=u[o];null!=f&&(l[f]=1)}}return Object.keys(l)})(n,o).sort(),"category ascending"===f?n._initialCategories=u:"category descending"===f&&(n._initialCategories=u.reverse()))}}},98728:function(r,n,i){var a=i(38248),o=i(3400),s=i(39032),l=s.ONEDAY,c=s.ONEWEEK;n.dtick=function(r,n){var i="log"===n,o="date"===n,s=o?l:1;if(!r)return s;if(a(r))return(r=Number(r))<=0?s:"category"===n?Math.max(1,Math.round(r)):o?Math.max(.1,r):r;if("string"!=typeof r||!o&&!i)return s;var c=r.charAt(0),u=r.substr(1);return(u=a(u)?Number(u):0)<=0||!(o&&"M"===c&&u===Math.round(u)||i&&"L"===c||i&&"D"===c&&(1===u||2===u))?s:r},n.tick0=function(r,n,i,s){return"date"===n?o.cleanDate(r,o.dateTick0(i,s%c==0?1:0)):"D1"!==s&&"D2"!==s?a(r)?Number(r):0:void 0}},33816:function(r,n,i){var a=i(53756).counter;r.exports={idRegex:{x:a("x","( domain)?"),y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}},71888:function(r,n,i){var a=i(3400),o=i(19280),s=i(79811).id2name,l=i(94724),c=i(21160),u=i(78344),f=i(39032).ALMOST_EQUAL,h=i(84284).FROM_BL;function p(r,n){var i=n.domain;return i||(i=r[s(n.overlaying)].domain),i[1]-i[0]}function d(r,n){for(var i=0;i<r.length;i++)if(r[i][n])return r[i];return null}function y(r,n,i,a){var o,s,l,c,u,f=d(r,n);null===f?((f={})[n]=1,u=r.length,r.push(f)):u=r.indexOf(f);var h=Object.keys(f);for(o=0;o<r.length;o++)if(l=r[o],o!==u&&l[i]){var p=l[i];for(s=0;s<h.length;s++)l[c=h[s]]=g(p,g(a,f[c]));return void r.splice(u,1)}if(1!==a)for(s=0;s<h.length;s++){var y=h[s];f[y]=g(a,f[y])}f[i]=1}function g(r,n){var i,a,o="",s="";"string"==typeof r&&(i=(o=r.match(/^[xy]*/)[0]).length,r=+r.substr(i)),"string"==typeof n&&(a=(s=n.match(/^[xy]*/)[0]).length,n=+n.substr(a));var l=r*n;return i||a?i&&a&&o.charAt(0)!==s.charAt(0)?i===a?l:(i>a?o.substr(a):s.substr(i))+l:o+s+r*n:l}function v(r,n){var i=r._inputDomain,a=h[r.constraintoward],o=i[0]+(i[1]-i[0])*a;r.domain=r._input.domain=[o+(i[0]-o)/n,o+(i[1]-o)/n],r.setScale()}n.handleDefaults=function(r,n,i){var o,c,f,h,g,v,m,x,b=i.axIds,_=i.axHasImage,w=n._axisConstraintGroups=[],T=n._axisMatchGroups=[];for(o=0;o<b.length;o++)(function(r,n,i){var o=i.axIds,c=i.layoutOut,u=i.hasImage,f=c._axisConstraintGroups,h=c._axisMatchGroups,g=n._id,v=g.charAt(0),m=((c._splomAxes||{})[v]||{})[g]||{},x=n._id,b="x"===x.charAt(0);function _(i,o){return a.coerce(r,n,l,i,o)}n._matchGroup=null,n._constraintGroup=null,_("constrain",u?"domain":"range"),a.coerce(r,n,{constraintoward:{valType:"enumerated",values:b?["left","center","right"]:["bottom","middle","top"],dflt:b?"center":"middle"}},"constraintoward");var w,T,A=n.type,k=[];for(w=0;w<o.length;w++)(T=o[w])!==x&&c[s(T)].type===A&&k.push(T);var M=d(f,x);if(M){var S=[];for(w=0;w<k.length;w++)M[T=k[w]]||S.push(T);k=S}var E,I,L=k.length;L&&(r.matches||m.matches)&&(E=a.coerce(r,n,{matches:{valType:"enumerated",values:k,dflt:-1!==k.indexOf(m.matches)?m.matches:void 0}},"matches"));var C=u&&!b?n.anchor:void 0;if(L&&!E&&(r.scaleanchor||C)&&(I=a.coerce(r,n,{scaleanchor:{valType:"enumerated",values:k.concat([!1])}},"scaleanchor",C)),E){n._matchGroup=y(h,x,E,1);var O=c[s(E)],D=p(c,n)/p(c,O);b!==("x"===E.charAt(0))&&(D=(b?"x":"y")+D),y(f,x,E,D)}else r.matches&&-1!==o.indexOf(r.matches)&&a.warn("ignored "+n._name+'.matches: "'+r.matches+'" to avoid an infinite loop');if(I){var P=_("scaleratio");P||(P=n.scaleratio=1),y(f,x,I,P)}else r.scaleanchor&&-1!==o.indexOf(r.scaleanchor)&&a.warn("ignored "+n._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')})(g=r[h=s(b[o])],v=n[h],{axIds:b,layoutOut:n,hasImage:_[h]});function A(r,i){for(o=0;o<r.length;o++)for(f in c=r[o])n[s(f)][i]=c}for(A(T,"_matchGroup"),o=0;o<w.length;o++)for(f in c=w[o])if((v=n[s(f)]).fixedrange){for(var k in c){var M=s(k);!1===(r[M]||{}).fixedrange&&a.warn("fixedrange was specified as false for axis "+M+" but was overridden because another axis in its constraint group has fixedrange true"),n[M].fixedrange=!0}break}for(o=0;o<w.length;){for(f in c=w[o]){(v=n[s(f)])._matchGroup&&Object.keys(v._matchGroup).length===Object.keys(c).length&&(w.splice(o,1),o--);break}o++}A(w,"_constraintGroup");var S=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],E=!1,I=!1;function L(){x=v[m],"rangebreaks"===m&&(I=v._hasDayOfWeekBreaks)}for(o=0;o<T.length;o++){c=T[o];for(var C,O=0;O<S.length;O++){for(f in m=S[O],x=null,c)if(g=r[h=s(f)],v=n[h],m in v){if(!v.matches&&(C=v,m in g)){L();break}null===x&&m in g&&L()}if("range"===m&&x&&g.range&&2===g.range.length&&null!==g.range[0]&&null!==g.range[1]&&(E=!0),"autorange"===m&&null===x&&E&&(x=!1),null===x&&m in C&&(x=C[m]),null!==x)for(f in c)(v=n[s(f)])[m]="range"===m?x.slice():x,"rangebreaks"===m&&(v._hasDayOfWeekBreaks=I,u(v,n))}}},n.enforce=function(r){var n,i,a,l,u,h,p,d,y=r._fullLayout,g=y._axisConstraintGroups||[];for(n=0;n<g.length;n++){var m=Object.keys(a=function(r,n){for(var i=n._size,a=i.h/i.w,o={},s=Object.keys(r),l=0;l<s.length;l++){var c=s[l],u=r[c];if("string"==typeof u){var f=u.match(/^[xy]*/)[0],h=f.length;u=+u.substr(h);for(var p="y"===f.charAt(0)?a:1/a,d=0;d<h;d++)u*=p}o[c]=u}return o}(g[n],y)),x=1/0,b=0,_=1/0,w={},T={},A=!1;for(i=0;i<m.length;i++)T[l=m[i]]=u=y[s(l)],u._inputDomain?u.domain=u._inputDomain.slice():u._inputDomain=u.domain.slice(),u._inputRange||(u._inputRange=u.range.slice()),u.setScale(),w[l]=h=Math.abs(u._m)/a[l],x=Math.min(x,h),"domain"!==u.constrain&&u._constraintShrinkable||(_=Math.min(_,h)),delete u._constraintShrinkable,b=Math.max(b,h),"domain"===u.constrain&&(A=!0);if(!(x>f*b)||A){for(i=0;i<m.length;i++)if(h=w[l=m[i]],p=(u=T[l]).constrain,h!==_||"domain"===p){if(d=h/_,"range"===p)c(u,d);else{var k=u._inputDomain,M=(u.domain[1]-u.domain[0])/(k[1]-k[0]),S=(u.r2l(u.range[1])-u.r2l(u.range[0]))/(u.r2l(u._inputRange[1])-u.r2l(u._inputRange[0]));if((d/=M)*S<1){u.domain=u._input.domain=k.slice(),c(u,d);continue}if(S<1&&(u.range=u._input.range=u._inputRange.slice(),d*=S),u.autorange){var E=u.r2l(u.range[0]),I=u.r2l(u.range[1]),L=(E+I)/2,C=L,O=L,D=Math.abs(I-L),P=L-D*d*1.0001,B=L+D*d*1.0001,R=o.makePadFn(y,u,0),z=o.makePadFn(y,u,1);v(u,d);var F,N,U=Math.abs(u._m),j=o.concatExtremes(r,u),V=j.min,H=j.max;for(N=0;N<V.length;N++)(F=V[N].val-R(V[N])/U)>P&&F<C&&(C=F);for(N=0;N<H.length;N++)(F=H[N].val+z(H[N])/U)<B&&F>O&&(O=F);d/=(O-C)/(2*D),C=u.l2r(C),O=u.l2r(O),u.range=u._input.range=E<I?[C,O]:[O,C]}v(u,d)}}}}},n.getAxisGroup=function(r,n){for(var i=r._axisMatchGroups,a=0;a<i.length;a++)if(i[a][n])return"g"+a;return n},n.clean=function(r,n){if(n._inputDomain){for(var i=!1,a=n._id,o=r._fullLayout._axisConstraintGroups,s=0;s<o.length;s++)if(o[s][a]){i=!0;break}i&&"domain"===n.constrain||(n._input.domain=n.domain=n._inputDomain,delete n._inputDomain)}}},51184:function(r,n,i){var a=i(33428),o=i(3400),s=o.numberFormat,l=i(49760),c=i(89184),u=i(24040),f=o.strTranslate,h=i(72736),p=i(76308),d=i(43616),y=i(93024),g=i(54460),v=i(93972),m=i(86476),x=i(72760),b=x.selectingOrDrawing,_=x.freeMode,w=i(84284).FROM_TL,T=i(73696),A=i(39172).redrawReglTraces,k=i(7316),M=i(79811).getFromId,S=i(22676).prepSelect,E=i(22676).clearOutline,I=i(22676).selectOnClick,L=i(21160),C=i(33816),O=C.MINDRAG,D=C.MINZOOM,P=!0;function B(r,n,i,a){var s=o.ensureSingle(r.draglayer,n,i,function(n){n.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",r.id)});return s.call(v,a),s.node()}function R(r,n,i,o,s,l,c){var u=B(r,"rect",n,i);return a.select(u).call(d.setRect,o,s,l,c),u}function z(r,n){for(var i=0;i<r.length;i++)if(!r[i].fixedrange)return n;return""}function F(r,n,i,a,o){for(var s=0;s<r.length;s++){var l=r[s];if(!l.fixedrange){if(l.rangebreaks){var c="y"===l._id.charAt(0),u=c?1-n:n,f=c?1-i:i;a[l._name+".range[0]"]=l.l2r(l.p2l(u*l._length)),a[l._name+".range[1]"]=l.l2r(l.p2l(f*l._length))}else{var h=l._rl[0],p=l._rl[1]-h;a[l._name+".range[0]"]=l.l2r(h+p*n),a[l._name+".range[1]"]=l.l2r(h+p*i)}}}if(o&&o.length){var d=(n+(1-i))/2;F(o,d,1-d,a,[])}}function N(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(!a.fixedrange){if(a.rangebreaks){var o=a._length,s=(a.p2l(0+n)-a.p2l(0)+(a.p2l(o+n)-a.p2l(o)))/2;a.range=[a.l2r(a._rl[0]-s),a.l2r(a._rl[1]-s)]}else a.range=[a.l2r(a._rl[0]-n/a._m),a.l2r(a._rl[1]-n/a._m)];a.limitRange&&a.limitRange()}}}function U(r,n,i,a,o){return r.append("path").attr("class","zoombox").style({fill:n>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",f(i,a)).attr("d",o+"Z")}function j(r,n,i){return r.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform",f(n,i)).attr("d","M0,0Z")}function V(r,n,i,a,o,s){r.attr("d",a+"M"+i.l+","+i.t+"v"+i.h+"h"+i.w+"v-"+i.h+"h-"+i.w+"Z"),H(r,n,o,s)}function H(r,n,i,a){i||(r.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),n.transition().style("opacity",1).duration(200))}function q(r){a.select(r).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(r){P&&r.data&&r._context.showTips&&(o.notifier(o._(r,"Double-click to zoom back out"),"long"),P=!1)}function W(r){var n=Math.floor(Math.min(r.b-r.t,r.r-r.l,D)/2);return"M"+(r.l-3.5)+","+(r.t-.5+n)+"h3v"+-n+"h"+n+"v-3h-"+(n+3)+"ZM"+(r.r+3.5)+","+(r.t-.5+n)+"h-3v"+-n+"h"+-n+"v-3h"+(n+3)+"ZM"+(r.r+3.5)+","+(r.b+.5-n)+"h-3v"+n+"h"+-n+"v3h"+(n+3)+"ZM"+(r.l-3.5)+","+(r.b+.5-n)+"h3v"+n+"h"+n+"v3h-"+(n+3)+"Z"}function Y(r,n,i,a,s){for(var l,c,u,f,h=!1,p={},d={},y=(s||{}).xaHash,g=(s||{}).yaHash,v=0;v<n.length;v++){var m=n[v];for(l in i)if(m[l]){for(u in m)s&&(y[u]||g[u])||("x"===u.charAt(0)?i:a)[u]||(p[u]=l);for(c in a)s&&(y[c]||g[c])||!m[c]||(h=!0)}for(c in a)if(m[c])for(f in m)s&&(y[f]||g[f])||("x"===f.charAt(0)?i:a)[f]||(d[f]=c)}h&&(o.extendFlat(p,d),d={});var x={},b=[];for(u in p){var _=M(r,u);b.push(_),x[_._id]=_}var w={},T=[];for(f in d){var A=M(r,f);T.push(A),w[A._id]=A}return{xaHash:x,yaHash:w,xaxes:b,yaxes:T,xLinks:p,yLinks:d,isSubplotConstrained:h}}function Z(r,n){if(c){var i=void 0!==r.onwheel?"wheel":"mousewheel";r._onwheel&&r.removeEventListener(i,r._onwheel),r._onwheel=n,r.addEventListener(i,n,{passive:!1})}else void 0!==r.onwheel?r.onwheel=n:void 0!==r.onmousewheel?r.onmousewheel=n:r.isAddedWheelEvent||(r.isAddedWheelEvent=!0,r.addEventListener("wheel",n,{passive:!1}))}function X(r){var n=[];for(var i in r)n.push(r[i]);return n}r.exports={makeDragBox:function(r,n,i,c,f,p,v,x){var P,B,H,K,J,$,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tc,tu,tf,th,tp,td,ty,tg=r._fullLayout._zoomlayer,tv=v+x==="nsew",tm=1===(v+x).length;function tx(){if(P=n.xaxis,B=n.yaxis,te=P._length,tr=B._length,Q=P._offset,tt=B._offset,(H={})[P._id]=P,(K={})[B._id]=B,v&&x)for(var i=n.overlays,a=0;a<i.length;a++){var o=i[a].xaxis;H[o._id]=o;var s=i[a].yaxis;K[s._id]=s}J=X(H),$=X(K),ta=z(J,x),ts=!(to=z($,v))&&!ta,ti=Y(r,r._fullLayout._axisMatchGroups,H,K);var l=(tn=Y(r,r._fullLayout._axisConstraintGroups,H,K,ti)).isSubplotConstrained||ti.isSubplotConstrained;tl=x||l,tc=v||l;var c=r._fullLayout;tu=c._has("scattergl"),tf=c._has("splom"),th=c._has("svg")}i+=n.yaxis._shift,tx();var tb=R(n,v+x+"drag",(t_=to+ta,tw=r._fullLayout.dragmode,t_?"nsew"===t_?tv?"":"pan"===tw?"move":"crosshair":t_.toLowerCase()+"-resize":"pointer"),i,c,f,p);if(ts&&!tv)return tb.onmousedown=null,tb.style.pointerEvents="none",tb;var t_,tw,tT,tA,tk,tM,tS,tE,tI,tL,tC,tO,tD={element:tb,gd:r,plotinfo:n};function tP(){tD.plotinfo.selection=!1,E(r)}function tB(i,o){var l=tD.gd;if(l._fullLayout._activeShapeIndex>=0)l._fullLayout._deactivateShape(l);else{var c=l._fullLayout.clickmode;if(q(l),2!==i||tm||function(){if(!r._transitioningWithDuration){var n=r._context.doubleClick,i=[];ta&&(i=i.concat(J)),to&&(i=i.concat($)),ti.xaxes&&(i=i.concat(ti.xaxes)),ti.yaxes&&(i=i.concat(ti.yaxes));var a,o,s={};if("reset+autosize"===n)for(n="autosize",o=0;o<i.length;o++){var l=(a=i[o])._rangeInitial0,c=a._rangeInitial1,f=void 0!==l||void 0!==c;if(f&&(void 0!==l&&l!==a.range[0]||void 0!==c&&c!==a.range[1])||!f&&!0!==a.autorange){n="reset";break}}if("autosize"===n)for(o=0;o<i.length;o++)(a=i[o]).fixedrange||(s[a._name+".autorange"]=!0);else if("reset"===n){for((ta||tn.isSubplotConstrained)&&(i=i.concat(tn.xaxes)),to&&!tn.isSubplotConstrained&&(i=i.concat(tn.yaxes)),tn.isSubplotConstrained&&(ta?to||(i=i.concat($)):i=i.concat(J)),o=0;o<i.length;o++)if(!(a=i[o]).fixedrange){var h=a._name,p=a._autorangeInitial;void 0===a._rangeInitial0&&void 0===a._rangeInitial1?s[h+".autorange"]=!0:void 0===a._rangeInitial0?(s[h+".autorange"]=p,s[h+".range"]=[null,a._rangeInitial1]):void 0===a._rangeInitial1?(s[h+".range"]=[a._rangeInitial0,null],s[h+".autorange"]=p):s[h+".range"]=[a._rangeInitial0,a._rangeInitial1]}}r.emit("plotly_doubleclick",null),u.call("_guiRelayout",r,s)}}(),tv)c.indexOf("select")>-1&&I(o,l,J,$,n.id,tD),c.indexOf("event")>-1&&y.click(l,o,n.id);else if(1===i&&tm){var f,p,d=v?B:P,g="s"===v||"w"===x?0:1,m=d._name+".range["+g+"]",b=(p=Math.abs((f=d.range[g])-d.range[1-g]),"date"===d.type?f:"log"===d.type?s("."+(Math.ceil(Math.max(0,-Math.log(p)/Math.LN10))+3)+"g")(Math.pow(10,f)):s("."+String(Math.floor(Math.log(Math.abs(f))/Math.LN10)-Math.floor(Math.log(p)/Math.LN10)+4)+"g")(f)),_="left",w="middle";if(d.fixedrange)return;v?(w="n"===v?"top":"bottom","right"===d.side&&(_="right")):"e"===x&&(_="right"),l._context.showAxisRangeEntryBoxes&&a.select(tb).call(h.makeEditable,{gd:l,immediate:!0,background:l._fullLayout.paper_bgcolor,text:String(b),fill:d.tickfont?d.tickfont.color:"#444",horizontalAlign:_,verticalAlign:w}).on("edit",function(r){var n=d.d2r(r);void 0!==n&&u.call("_guiRelayout",l,m,n)})}}}function tR(n,i){if(r._transitioningWithDuration)return!1;var a,o,s,l,c=Math.max(0,Math.min(te,td*n+tT)),u=Math.max(0,Math.min(tr,ty*i+tA)),f=Math.abs(c-tT),h=Math.abs(u-tA);function p(){tI="",tk.r=tk.l,tk.t=tk.b,tC.attr("d","M0,0Z")}if(tk.l=Math.min(tT,c),tk.r=Math.max(tT,c),tk.t=Math.min(tA,u),tk.b=Math.max(tA,u),tn.isSubplotConstrained)f>D||h>D?(tI="xy",f/te>h/tr?(h=f*tr/te,tA>u?tk.t=tA-h:tk.b=tA+h):(f=h*te/tr,tT>c?tk.l=tT-f:tk.r=tT+f),tC.attr("d",W(tk))):p();else if(ti.isSubplotConstrained){if(f>D||h>D){tI="xy";var d=Math.min(tk.l/te,(tr-tk.b)/tr),y=Math.max(tk.r/te,(tr-tk.t)/tr);tk.l=d*te,tk.r=y*te,tk.b=(1-d)*tr,tk.t=(1-y)*tr,tC.attr("d",W(tk))}else p()}else!to||h<Math.min(Math.max(.6*f,O),D)?f<O||!ta?p():(tk.t=0,tk.b=tr,tI="x",tC.attr("d",(a=tk,o=tA,"M"+(a.l-.5)+","+(o-D-.5)+"h-3v"+(2*D+1)+"h3ZM"+(a.r+.5)+","+(o-D-.5)+"h3v"+(2*D+1)+"h-3Z"))):!ta||f<Math.min(.6*h,D)?(tk.l=0,tk.r=te,tI="y",tC.attr("d",(s=tk,"M"+((l=tT)-D-.5)+","+(s.t-.5)+"v-3h"+(2*D+1)+"v3ZM"+(l-D-.5)+","+(s.b+.5)+"v3h"+(2*D+1)+"v-3Z"))):(tI="xy",tC.attr("d",W(tk)));tk.w=tk.r-tk.l,tk.h=tk.b-tk.t,tI&&(tO=!0),r._dragged=tO,V(tL,tC,tk,tS,tE,tM),tz(),r.emit("plotly_relayouting",tp),tE=!0}function tz(){tp={},"xy"!==tI&&"x"!==tI||(F(J,tk.l/te,tk.r/te,tp,tn.xaxes),tq("x",tp)),"xy"!==tI&&"y"!==tI||(F($,(tr-tk.b)/tr,(tr-tk.t)/tr,tp,tn.yaxes),tq("y",tp))}function tF(){tz(),q(r),tW(),G(r)}tD.prepFn=function(n,i,a){var s,c,u=tD.dragmode,f=r._fullLayout.dragmode;f!==u&&(tD.dragmode=f),tx(),td=r._fullLayout._invScaleX,ty=r._fullLayout._invScaleY,ts||(tv?n.shiftKey?"pan"===f?f="zoom":b(f)||(f="pan"):n.ctrlKey&&(f="pan"):f="pan"),_(f)?tD.minDrag=1:tD.minDrag=void 0,b(f)?(tD.xaxes=J,tD.yaxes=$,S(n,i,a,tD,f)):(tD.clickFn=tB,b(u)&&tP(),ts||("zoom"===f?(tD.moveFn=tR,tD.doneFn=tF,tD.minDrag=1,tT=i-(s=tb.getBoundingClientRect()).left,tA=a-s.top,r._fullLayout._calcInverseTransform(r),tT=(c=o.apply3DTransform(r._fullLayout._invTransform)(tT,tA))[0],tA=c[1],tk={l:tT,r:tT,w:0,t:tA,b:tA,h:0},tM=r._hmpixcount?r._hmlumcount/r._hmpixcount:l(r._fullLayout.plot_bgcolor).getLuminance(),tE=!1,tI="xy",tO=!1,tL=U(tg,tM,Q,tt,tS="M0,0H"+te+"V"+tr+"H0V0"),tC=j(tg,Q,tt)):"pan"===f&&(tD.moveFn=tH,tD.doneFn=tW))),r._fullLayout._redrag=function(){var n=r._dragdata;n&&n.element===tb&&(b(r._fullLayout.dragmode)||(tx(),tY([0,0,te,tr]),tD.moveFn(n.dx,n.dy)))}},m.init(tD);var tN=[0,0,te,tr],tU=null,tj=C.REDRAWDELAY,tV=n.mainplot?r._fullLayout._plots[n.mainplot]:n;function tH(n,i){if(n*=td,i*=ty,!r._transitioningWithDuration){if(r._fullLayout._replotting=!0,"ew"===ta||"ns"===to){var a,o=ta?-n:0,s=to?-i:0;if(ti.isSubplotConstrained){if(ta&&to){var l=(n/te-i/tr)/2;o=-(n=l*te),s=-(i=-l*tr)}to?o=-s*te/tr:s=-o*tr/te}return ta&&(N(J,n),tq("x")),to&&(N($,i),tq("y")),tY([o,s,te,tr]),tG(),void r.emit("plotly_relayouting",tp)}var c,u,f="w"===ta==("n"===to)?1:-1;if(ta&&to&&(tn.isSubplotConstrained||ti.isSubplotConstrained)){var h=(n/te+f*i/tr)/2;n=h*te,i=f*h*tr}if("w"===ta?n=y(J,0,n):"e"===ta?n=y(J,1,-n):ta||(n=0),"n"===to?i=y($,1,i):"s"===to?i=y($,0,-i):to||(i=0),c="w"===ta?n:0,u="n"===to?i:0,tn.isSubplotConstrained&&!ti.isSubplotConstrained||ti.isSubplotConstrained&&ta&&to&&f>0){if(ti.isSubplotConstrained||!ta&&1===to.length){for(a=0;a<J.length;a++)J[a].range=J[a]._r.slice(),L(J[a],1-i/tr);c=(n=i*te/tr)/2}if(ti.isSubplotConstrained||!to&&1===ta.length){for(a=0;a<$.length;a++)$[a].range=$[a]._r.slice(),L($[a],1-n/te);u=(i=n*tr/te)/2}}ti.isSubplotConstrained&&to||tq("x"),ti.isSubplotConstrained&&ta||tq("y");var p=te-n,d=tr-i;!ti.isSubplotConstrained||ta&&to||(ta?(u=c?0:n*tr/te,d=p*tr/te):(c=u?0:i*te/tr,p=d*te/tr)),tY([c,u,p,d]),tG(),r.emit("plotly_relayouting",tp)}function y(r,n,i){for(var a,o,s=1-n,l=0;l<r.length;l++){var c=r[l];if(!c.fixedrange){a=c,o=c._rl[s]+(c._rl[n]-c._rl[s])/(1-((u=i/c._length)>=0?Math.min(u,.9):1/(1/Math.max(u,-.3)+3.222)));var u,f=c.l2r(o);!1!==f&&void 0!==f&&(c.range[n]=f)}}return a._length*(a._rl[n]-o)/(a._rl[n]-a._rl[s])}}function tq(r,n){for(var i=ti.isSubplotConstrained?({x:$,y:J})[r]:ti[r+"axes"],a=ti.isSubplotConstrained?({x:J,y:$})[r]:[],o=0;o<i.length;o++){var s=i[o],l=s._id,c=ti.xLinks[l]||ti.yLinks[l],u=a[0]||H[c]||K[c];u&&(n?(n[s._name+".range[0]"]=n[u._name+".range[0]"],n[s._name+".range[1]"]=n[u._name+".range[1]"]):s.range=u.range.slice())}}function tG(){var i,a=[];function o(r){for(i=0;i<r.length;i++)r[i].fixedrange||a.push(r[i]._id)}function s(r,n){for(i=0;i<r.length;i++){var o=r[i],s=o[n];o.fixedrange||"sync"!==s.tickmode||a.push(s._id)}}for(tl&&(o(J),o(tn.xaxes),o(ti.xaxes),s(n.overlays,"xaxis")),tc&&(o($),o(tn.yaxes),o(ti.yaxes),s(n.overlays,"yaxis")),tp={},i=0;i<a.length;i++){var l=M(r,a[i]);g.drawOne(r,l,{skipTitle:!0}),tp[l._name+".range[0]"]=l.range[0],tp[l._name+".range[1]"]=l.range[1]}g.redrawComponents(r,a)}function tW(){tY([0,0,te,tr]),o.syncOrAsync([k.previousPromises,function(){r._fullLayout._replotting=!1,u.call("_guiRelayout",r,tp)}],r)}function tY(n){var i,a,s,l,c=r._fullLayout,f=c._plots,h=c._subplots.cartesian;if(tf&&u.subplotsRegistry.splom.drag(r),tu){for(i=0;i<h.length;i++)if(s=(a=f[h[i]]).xaxis,l=a.yaxis,a._scene){s.limitRange&&s.limitRange(),l.limitRange&&l.limitRange();var p=o.simpleMap(s.range,s.r2l),y=o.simpleMap(l.range,l.r2l);a._scene.update({range:[p[0],y[0],p[1],y[1]]})}}if((tf||tu)&&(T(r),A(r)),th){var g=n[2]/P._length,m=n[3]/B._length;for(i=0;i<h.length;i++){s=(a=f[h[i]]).xaxis,l=a.yaxis;var b,_,w,k,M=(tl||ti.isSubplotConstrained)&&!s.fixedrange&&H[s._id],S=(tc||ti.isSubplotConstrained)&&!l.fixedrange&&K[l._id];if(M?(b=g,w=x||ti.isSubplotConstrained?n[0]:tK(s,b)):ti.xaHash[s._id]?(b=g,w=n[0]*s._length/P._length):ti.yaHash[s._id]?(b=m,w="ns"===to?-n[1]*s._length/B._length:tK(s,b,{n:"top",s:"bottom"}[to])):w=tX(s,b=tZ(s,g,m)),b>1&&(void 0!==s.maxallowed&&tl===(s.range[0]<s.range[1]?"e":"w")||void 0!==s.minallowed&&tl===(s.range[0]<s.range[1]?"w":"e"))&&(b=1,w=0),S?(_=m,k=v||ti.isSubplotConstrained?n[1]:tK(l,_)):ti.yaHash[l._id]?(_=m,k=n[1]*l._length/B._length):ti.xaHash[l._id]?(_=g,k="ew"===ta?-n[0]*l._length/P._length:tK(l,_,{e:"right",w:"left"}[ta])):k=tX(l,_=tZ(l,g,m)),_>1&&(void 0!==l.maxallowed&&tc===(l.range[0]<l.range[1]?"n":"s")||void 0!==l.minallowed&&tc===(l.range[0]<l.range[1]?"s":"n"))&&(_=1,k=0),b||_){b||(b=1),_||(_=1);var E=s._offset-w/b,I=l._offset-k/_;a.clipRect.call(d.setTranslate,w,k).call(d.setScale,b,_),a.plot.call(d.setTranslate,E,I).call(d.setScale,1/b,1/_),b===a.xScaleFactor&&_===a.yScaleFactor||(d.setPointGroupScale(a.zoomScalePts,b,_),d.setTextPointsScale(a.zoomScaleTxt,b,_)),d.hideOutsideRangePoints(a.clipOnAxisFalseTraces,a),a.xScaleFactor=b,a.yScaleFactor=_}}}}function tZ(r,n,i){return r.fixedrange?0:tl&&tn.xaHash[r._id]?n:tc&&(tn.isSubplotConstrained?tn.xaHash:tn.yaHash)[r._id]?i:0}function tX(r,n){return n?(r.range=r._r.slice(),L(r,n),tK(r,n)):0}function tK(r,n,i){return r._length*(1-n)*w[i||r.constraintoward||"middle"]}return v.length*x.length!=1&&Z(tb,function(n){if(r._context._scrollZoom.cartesian||r._fullLayout._enablescrollzoom){if(tP(),r._transitioningWithDuration)return n.preventDefault(),void n.stopPropagation();tx(),clearTimeout(tU);var i=-n.deltaY;if(isFinite(i)||(i=n.wheelDelta/10),isFinite(i)){var a,s=Math.exp(-Math.min(Math.max(i,-20),20)/200),l=tV.draglayer.select(".nsewdrag").node().getBoundingClientRect(),c=(n.clientX-l.left)/l.width,u=(l.bottom-n.clientY)/l.height;if(tl){for(x||(c=.5),a=0;a<J.length;a++)f(J[a],c,s);tq("x"),tN[2]*=s,tN[0]+=tN[2]*c*(1/s-1)}if(tc){for(v||(u=.5),a=0;a<$.length;a++)f($[a],u,s);tq("y"),tN[3]*=s,tN[1]+=tN[3]*(1-u)*(1/s-1)}tY(tN),tG(),r.emit("plotly_relayouting",tp),tU=setTimeout(function(){r._fullLayout&&(tN=[0,0,te,tr],tW())},tj),n.preventDefault()}else o.log("Did not find wheel motion attributes: ",n)}function f(r,n,i){if(!r.fixedrange){var a=o.simpleMap(r.range,r.r2l),s=a[0]+(a[1]-a[0])*n;r.range=a.map(function(n){return r.l2r(s+(n-s)*i)})}}}),tb},makeDragger:B,makeRectDragger:R,makeZoombox:U,makeCorners:j,updateZoombox:V,xyCorners:W,transitionZoombox:H,removeZoombox:q,showDoubleClickNotifier:G,attachWheelEventHandler:Z}},42464:function(r,n,i){var a=i(33428),o=i(93024),s=i(86476),l=i(93972),c=i(51184).makeDragBox,u=i(33816).DRAGGERSIZE;n.initInteractions=function(r){var i=r._fullLayout;if(r._context.staticPlot)a.select(r).selectAll(".drag").remove();else if(i._has("cartesian")||i._has("splom")){Object.keys(i._plots||{}).sort(function(r,n){if((i._plots[r].mainplot&&!0)===(i._plots[n].mainplot&&!0)){var a=r.split("y"),o=n.split("y");return a[0]===o[0]?Number(a[1]||1)-Number(o[1]||1):Number(a[0]||1)-Number(o[0]||1)}return i._plots[r].mainplot?1:-1}).forEach(function(n){var a=i._plots[n],l=a.xaxis,f=a.yaxis;if(!a.mainplot){var h=c(r,a,l._offset,f._offset,l._length,f._length,"ns","ew");h.onmousemove=function(i){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===n&&r._fullLayout._plots[n]&&o.hover(r,i,n)},o.hover(r,i,n),r._fullLayout._lasthover=h,r._fullLayout._hoversubplot=n},h.onmouseout=function(n){r._dragging||(r._fullLayout._hoversubplot=null,s.unhover(r,n))},r._context.showAxisDragHandles&&(c(r,a,l._offset-u,f._offset-u,u,u,"n","w"),c(r,a,l._offset+l._length,f._offset-u,u,u,"n","e"),c(r,a,l._offset-u,f._offset+f._length,u,u,"s","w"),c(r,a,l._offset+l._length,f._offset+f._length,u,u,"s","e"))}if(r._context.showAxisDragHandles){if(n===l._mainSubplot){var p=l._mainLinePosition;"top"===l.side&&(p-=u),c(r,a,l._offset+.1*l._length,p,.8*l._length,u,"","ew"),c(r,a,l._offset,p,.1*l._length,u,"","w"),c(r,a,l._offset+.9*l._length,p,.1*l._length,u,"","e")}if(n===f._mainSubplot){var d=f._mainLinePosition;"right"!==f.side&&(d-=u),c(r,a,d,f._offset+.1*f._length,u,.8*f._length,"ns",""),c(r,a,d,f._offset+.9*f._length,u,.1*f._length,"s",""),c(r,a,d,f._offset,u,.1*f._length,"n","")}}});var l=i._hoverlayer.node();l.onmousemove=function(n){n.target=r._fullLayout._lasthover,o.hover(r,n,i._hoversubplot)},l.onclick=function(n){n.target=r._fullLayout._lasthover,o.click(r,n)},l.onmousedown=function(n){r._fullLayout._lasthover.onmousedown(n)},n.updateFx(r)}},n.updateFx=function(r){var n=r._fullLayout,i="pan"===n.dragmode?"move":"crosshair";l(n._draggers,i)}},36632:function(r,n,i){var a=i(24040),o=i(3400),s=i(79811);r.exports=function(r){return function(n,i){var l=n[r];if(Array.isArray(l))for(var c=a.subplotsRegistry.cartesian,u=c.idRegex,f=i._subplots,h=f.xaxis,p=f.yaxis,d=f.cartesian,y=i._has("cartesian")||i._has("gl2d"),g=0;g<l.length;g++){var v=l[g];if(o.isPlainObject(v)){var m=s.cleanId(v.xref,"x",!1),x=s.cleanId(v.yref,"y",!1),b=u.x.test(m),_=u.y.test(x);if(b||_){y||o.pushUnique(i._basePlotModules,c);var w=!1;b&&-1===h.indexOf(m)&&(h.push(m),w=!0),_&&-1===p.indexOf(x)&&(p.push(x),w=!0),w&&b&&_&&d.push(m+x)}}}}}},57952:function(r,n,i){var a=i(33428),o=i(24040),s=i(3400),l=i(7316),c=i(43616),u=i(84888)._M,f=i(79811),h=i(33816),p=i(9616),d=s.ensureSingle;function y(r,n,i){return s.ensureSingle(r,n,i,function(r){r.datum(i)})}var g=h.zindexSeparator;function v(r,n,i,s,l){for(var f,p,d,y=h.traceLayerClasses,g=r._fullLayout,v=g._zindices,m=g._modules,x=[],b=[],_=0;_<v.length;_++)for(var w=v[_],T=0;T<m.length;T++){var A=(f=m[T]).name,k=o.modules[A].categories;if(k.svg){var M=f.layerName||A+"layer",S=M+(_?Number(_)+1:""),E=f.plot;d=(p=u(i,E,w))[0],i=p[1],d.length&&x.push({i:y.indexOf(M),zorder:_,className:S,plotMethod:E,cdModule:d}),k.zoomScale&&b.push("."+S)}}x.sort(function(r,n){return(r.zorder||0)-(n.zorder||0)||r.i-n.i});var I=n.plot.selectAll("g.mlayer").data(x,function(r){return r.className});if(I.enter().append("g").attr("class",function(r){return r.className}).classed("mlayer",!0).classed("rangeplot",n.isRangePlot),I.exit().remove(),I.order(),I.each(function(i){var o=a.select(this),u=i.className;i.plotMethod(r,n,i.cdModule,o,s,l),-1===h.clipOnAxisFalseQuery.indexOf("."+u)&&c.setClipUrl(o,n.layerClipId,r)}),g._has("scattergl")&&(d=u(i,f=o.getModule("scattergl"))[0],f.plot(r,n,d)),!r._context.staticPlot&&(n._hasClipOnAxisFalse&&(n.clipOnAxisFalseTraces=n.plot.selectAll(h.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),b.length)){var L=n.plot.selectAll(b.join(",")).selectAll(".trace");n.zoomScalePts=L.selectAll("path.point"),n.zoomScaleTxt=L.selectAll(".textpoint")}}function m(r,n){var i=n.plotgroup,a=n.id,o=-1!==a.indexOf(g),s=h.layerValue2layerClass[n.xaxis.layer],l=h.layerValue2layerClass[n.yaxis.layer],c=r._fullLayout._hasOnlyLargeSploms;if(n.mainplot){var u=n.mainplotinfo,p=u.plotgroup,v=a+"-x",m=a+"-y";n.minorGridlayer=u.minorGridlayer,n.gridlayer=u.gridlayer,n.zerolinelayer=u.zerolinelayer,d(u.overlinesBelow,"path",v),d(u.overlinesBelow,"path",m),d(u.overaxesBelow,"g",v),d(u.overaxesBelow,"g",m),n.plot=d(u.overplot,"g",a),d(u.overlinesAbove,"path",v),d(u.overlinesAbove,"path",m),d(u.overaxesAbove,"g",v),d(u.overaxesAbove,"g",m),n.xlines=p.select(".overlines-"+s).select("."+v),n.ylines=p.select(".overlines-"+l).select("."+m),n.xaxislayer=p.select(".overaxes-"+s).select("."+v),n.yaxislayer=p.select(".overaxes-"+l).select("."+m)}else if(c)n.xlines=d(i,"path","xlines-above"),n.ylines=d(i,"path","ylines-above"),n.xaxislayer=d(i,"g","xaxislayer-above"),n.yaxislayer=d(i,"g","yaxislayer-above");else{if(!o){var x=d(i,"g","layer-subplot");n.shapelayer=d(x,"g","shapelayer"),n.imagelayer=d(x,"g","imagelayer"),n.minorGridlayer=d(i,"g","minor-gridlayer"),n.gridlayer=d(i,"g","gridlayer"),n.zerolinelayer=d(i,"g","zerolinelayer");var b=d(i,"g","layer-between");n.shapelayerBetween=d(b,"g","shapelayer"),n.imagelayerBetween=d(b,"g","imagelayer"),d(i,"path","xlines-below"),d(i,"path","ylines-below"),n.overlinesBelow=d(i,"g","overlines-below"),d(i,"g","xaxislayer-below"),d(i,"g","yaxislayer-below"),n.overaxesBelow=d(i,"g","overaxes-below")}n.overplot=d(i,"g","overplot"),n.plot=d(n.overplot,"g",a),o||(n.xlines=d(i,"path","xlines-above"),n.ylines=d(i,"path","ylines-above"),n.overlinesAbove=d(i,"g","overlines-above"),d(i,"g","xaxislayer-above"),d(i,"g","yaxislayer-above"),n.overaxesAbove=d(i,"g","overaxes-above"),n.xlines=i.select(".xlines-"+s),n.ylines=i.select(".ylines-"+l),n.xaxislayer=i.select(".xaxislayer-"+s),n.yaxislayer=i.select(".yaxislayer-"+l))}o||(c||(y(n.minorGridlayer,"g",n.xaxis._id),y(n.minorGridlayer,"g",n.yaxis._id),n.minorGridlayer.selectAll("g").map(function(r){return r[0]}).sort(f.idSort),y(n.gridlayer,"g",n.xaxis._id),y(n.gridlayer,"g",n.yaxis._id),n.gridlayer.selectAll("g").map(function(r){return r[0]}).sort(f.idSort)),n.xlines.style("fill","none").classed("crisp",!0),n.ylines.style("fill","none").classed("crisp",!0))}function x(r,n){if(r){var i={};for(var o in r.each(function(r){var o=r[0];a.select(this).remove(),b(o,n),i[o]=!0}),n._plots)for(var s=n._plots[o].overlays||[],l=0;l<s.length;l++){var c=s[l];i[c.id]&&c.plot.selectAll(".trace").remove()}}}function b(r,n){n._draggers.selectAll("g."+r).remove(),n._defs.select("#clip"+n._uid+r+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=h.idRegex,n.attrRegex=h.attrRegex,n.attributes=i(26720),n.layoutAttributes=i(94724),n.supplyLayoutDefaults=i(67352),n.transitionAxes=i(73736),n.finalizeSubplots=function(r,n){var i,a,o,l=n._subplots,c=l.xaxis,u=l.yaxis,p=l.cartesian,d=p.concat(l.gl2d||[]),y={},g={};for(i=0;i<d.length;i++){var v=d[i].split("y");y[v[0]]=1,g["y"+v[1]]=1}for(i=0;i<c.length;i++)y[a=c[i]]||(o=(r[f.id2name(a)]||{}).anchor,h.idRegex.y.test(o)||(o="y"),p.push(a+o),d.push(a+o),g[o]||(g[o]=1,s.pushUnique(u,o)));for(i=0;i<u.length;i++)g[o=u[i]]||(a=(r[f.id2name(o)]||{}).anchor,h.idRegex.x.test(a)||(a="x"),p.push(a+o),d.push(a+o),y[a]||(y[a]=1,s.pushUnique(c,a)));if(!d.length){for(var m in a="",o="",r)h.attrRegex.test(m)&&("x"===m.charAt(0)?(!a||+m.substr(5)<+a.substr(5))&&(a=m):(!o||+m.substr(5)<+o.substr(5))&&(o=m));a=a?f.name2id(a):"x",o=o?f.name2id(o):"y",c.push(a),u.push(o),p.push(a+o)}},n.plot=function(r,n,i,a){var o,l=r._fullLayout,c=l._subplots.cartesian,u=r.calcdata;if(!Array.isArray(n))for(n=[],o=0;o<u.length;o++)n.push(o);for(var f=l._zindices,h=0;h<f.length;h++){var p=f[h];for(o=0;o<c.length;o++){var d=c[o],y=l._plots[d];if(h>0){var m=y.id;if(-1!==m.indexOf(g))continue;m+=g+(h+1),y=s.extendFlat({},y,{id:m,plot:l._cartesianlayer.selectAll(".subplot").select("."+m)})}for(var x,b=[],_=0;_<u.length;_++){var w=u[_],T=w[0].trace;p===(T.zorder||0)&&T.xaxis+T.yaxis===d&&((-1!==n.indexOf(T.index)||T.carpet)&&(x&&x[0].trace.xaxis+x[0].trace.yaxis===d&&-1!==["tonextx","tonexty","tonext"].indexOf(T.fill)&&-1===b.indexOf(x)&&b.push(x),b.push(w)),x=w)}v(r,y,b,i,a)}}},n.clean=function(r,n,i,a){var o,s,l,c=a._plots||{},u=n._plots||{},h=a._subplots||{};if(a._hasOnlyLargeSploms&&!n._hasOnlyLargeSploms)for(l in c)(o=c[l]).plotgroup&&o.plotgroup.remove();var p=a._has&&a._has("gl"),d=n._has&&n._has("gl");if(p&&!d)for(l in c)(o=c[l])._scene&&o._scene.destroy();if(h.xaxis&&h.yaxis){var y=f.listIds({_fullLayout:a});for(s=0;s<y.length;s++){var v=y[s];n[f.id2name(v)]||a._infolayer.selectAll(".g-"+v+"title").remove()}}var m=a._has&&a._has("cartesian"),_=n._has&&n._has("cartesian");if(m&&!_)x(a._cartesianlayer.selectAll(".subplot"),a),a._defs.selectAll(".axesclip").remove(),delete a._axisConstraintGroups,delete a._axisMatchGroups;else if(h.cartesian)for(s=0;s<h.cartesian.length;s++){var w=h.cartesian[s];if(-1===w.indexOf(g)&&!u[w]){var T="."+w+",."+w+"-x,."+w+"-y";a._cartesianlayer.selectAll(T).remove(),b(w,a)}}},n.drawFramework=function(r){var n,i=r._fullLayout,o=r.calcdata,l={};for(n=0;n<o.length;n++){var c=o[n][0],u=c.trace.zorder||0;l[u]||(l[u]=[]),l[u].push(c)}var f=Object.keys(l).map(Number).sort(s.sorterAsc);f.length||(f=[0]),i._zindices=f;var h=function(r){var n,i,a,o,s,l,c=r._fullLayout,u=c._zindices.length,f=c._subplots.cartesian,h=f.length,p=[],d=[];for(n=0;n<h;n++){a=f[n],s=(o=c._plots[a]).xaxis,l=o.yaxis;var y=s._mainAxis,v=l._mainAxis,m=y._id+v._id,x=c._plots[m];o.overlays=[],m!==a&&x?(o.mainplot=m,o.mainplotinfo=x,d.push(a)):(o.mainplot=void 0,o.mainplotinfo=void 0,p.push(a))}for(n=0;n<d.length;n++)a=d[n],(o=c._plots[a]).mainplotinfo.overlays.push(o);var b=p.concat(d),_=[];for(n=0;n<h;n++){a=b[n],s=(o=c._plots[a]).xaxis,l=o.yaxis;for(var w=[],T=1;T<=u;T++){var A="";for(T>1&&(A+=g+T),w.push(a+A),i=0;i<o.overlays.length;i++)w.push(o.overlays[i].id+A)}w=w.concat([s.layer,l.layer,s.overlaying||"",l.overlaying||""]),_.push(w)}return _}(r),p=h.length,y=[];for(n=0;n<p;n++)y[n]=h[n].slice();for(var v=1;v<f.length;v++){var b=[];for(n=0;n<p;n++)b[n]=h[n].slice(),b[n][0]+=g+(v+1);y=y.concat(b)}var _=i._cartesianlayer.selectAll(".subplot").data(y,String);_.enter().append("g").attr("class",function(r){return"subplot "+r[0]}),_.order(),_.exit().call(x,i),_.each(function(n){var o=n[0],l=o.indexOf(g),c=-1!==l,u=c?o.slice(0,l):o,f=i._plots[o];f||(f=s.extendFlat({},i._plots[u]))&&(f.id=o,i._plots[o]=f,i._subplots.cartesian.push(o)),f&&(f.plotgroup=a.select(this),m(r,f),c||(f.draglayer=d(i._draggers,"g",o)))})},n.rangePlot=function(r,n,i){m(r,n),v(r,n,i),l.style(r)},n.toSVG=function(r){var n=r._fullLayout._glimages,i=a.select(r).selectAll(".svg-container");i.filter(function(r,n){return n===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:p.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},n.updateFx=i(42464).updateFx},94724:function(r,n,i){var a=i(25376),o=i(22548),s=i(98192).u,l=i(92880).extendFlat,c=i(31780).templatedArray,u=i(29736).descriptionWithDates,f=i(39032).ONEDAY,h=i(33816),p=h.HOUR_PATTERN,d=h.WEEKDAY_PATTERN,y={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},g=l({},y,{values:y.values.slice().concat(["sync"])});function v(r){return{valType:"integer",min:0,dflt:r?5:0,editType:"ticks"}}var m={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},x={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"data_array",editType:"ticks"},_={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function w(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=5),n}function T(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=1),n}var A={valType:"color",dflt:o.defaultLine,editType:"ticks"},k={valType:"color",dflt:o.lightLine,editType:"ticks"};function M(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=1),n}var S=l({},s,{editType:"ticks"}),E={valType:"boolean",editType:"ticks"};r.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:o.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:a({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[h.idRegex.x.toString(),h.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},rangebreaks:c("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,p,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f},editType:"calc"}),tickmode:g,nticks:v(),tick0:m,dtick:x,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:b,ticktext:{valType:"data_array",editType:"ticks"},ticks:_,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:w(),tickwidth:T(),tickcolor:A,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},s,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:u("tick label")},tickformatstops:c("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:u("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:E,gridcolor:k,gridwidth:M(),griddash:S,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},minor:{tickmode:y,nticks:v("minor"),tick0:m,dtick:x,tickvals:b,ticks:_,ticklen:w("minor"),tickwidth:T("minor"),tickcolor:A,gridcolor:k,gridwidth:M("minor"),griddash:S,showgrid:E,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"})}}},67352:function(r,n,i){var a=i(3400),o=i(76308),s=i(10624).isUnifiedHover,l=i(41008),c=i(31780),u=i(64859),f=i(94724),h=i(14944),p=i(28336),d=i(71888),y=i(37668),g=i(79811),v=g.id2name,m=g.name2id,x=i(33816).AX_ID_PATTERN,b=i(24040),_=b.traceIs,w=b.getComponentMethod;function T(r,n,i){Array.isArray(r[n])?r[n].push(i):r[n]=[i]}r.exports=function(r,n,i){var b,A,k=n.autotypenumbers,M={},S={},E={},I={},L={},C={},O={},D={},P={},B={};for(b=0;b<i.length;b++){var R,z,F=i[b];if(_(F,"cartesian")||_(F,"gl2d")){if(F.xaxis)T(M,R=v(F.xaxis),F);else if(F.xaxes)for(A=0;A<F.xaxes.length;A++)T(M,v(F.xaxes[A]),F);if(F.yaxis)T(M,z=v(F.yaxis),F);else if(F.yaxes)for(A=0;A<F.yaxes.length;A++)T(M,v(F.yaxes[A]),F);"funnel"===F.type?"h"===F.orientation?(R&&(S[R]=!0),z&&(O[z]=!0)):z&&(E[z]=!0):"image"===F.type?(z&&(D[z]=!0),R&&(D[R]=!0)):(z&&(L[z]=!0,C[z]=!0),_(F,"carpet")&&("carpet"!==F.type||F._cheater)||R&&(I[R]=!0)),"carpet"===F.type&&F._cheater&&R&&(S[R]=!0),_(F,"2dMap")&&(P[R]=!0,P[z]=!0),_(F,"oriented")&&(B["h"===F.orientation?z:R]=!0)}}var N=n._subplots,U=N.xaxis,j=N.yaxis,V=a.simpleMap(U,v),H=a.simpleMap(j,v),q=V.concat(H),G=o.background;U.length&&j.length&&(G=a.coerce(r,n,u,"plot_bgcolor"));var W,Y,Z,X,K,J=o.combine(G,n.paper_bgcolor);function $(){var r=M[W]||[];K._traceIndices=r.map(function(r){return r._expandedIndex}),K._annIndices=[],K._shapeIndices=[],K._selectionIndices=[],K._imgIndices=[],K._subplotsWith=[],K._counterAxes=[],K._name=K._attr=W,K._id=Y}function Q(r,n){return a.coerce(X,K,f,r,n)}function tt(r,n){return a.coerce2(X,K,f,r,n)}function te(n,i){for(var a="x"===n?V:H,o=[],s=0;s<a.length;s++){var l=a[s];l===i||(r[l]||{}).overlaying||o.push(m(l))}return o}var tr={x:j,y:U},tn=tr.x.concat(tr.y),ti={},ta=[];function to(){var r=X.matches;x.test(r)&&-1===tn.indexOf(r)&&(ti[r]=X.type,ta=Object.keys(ti))}var ts=l(r,n),tl=s(ts);for(b=0;b<q.length;b++){Y=m(W=q[b]),Z=W.charAt(0),a.isPlainObject(r[W])||(r[W]={}),X=r[W],K=c.newContainer(n,W,Z+"axis"),$();var tc="x"===Z&&!I[W]&&S[W]||"y"===Z&&!L[W]&&E[W],tu="y"===Z&&(!C[W]&&O[W]||D[W]),tf={hasMinor:!0,letter:Z,font:n.font,outerTicks:P[W],showGrid:!B[W],data:M[W]||[],bgColor:J,calendar:n.calendar,automargin:!0,visibleDflt:tc,reverseDflt:tu,autotypenumbersDflt:k,splomStash:((n._splomAxes||{})[Z]||{})[Y],noAutotickangles:"y"===Z};Q("uirevision",n.uirevision),h(X,K,Q,tf),p(X,K,Q,tf,n);var th=tl&&Z===ts.charAt(0),tp=tt("spikecolor",tl?K.color:void 0),td=tt("spikethickness",tl?1.5:void 0),ty=tt("spikedash",tl?"dot":void 0),tg=tt("spikemode",tl?"across":void 0),tv=tt("spikesnap");Q("showspikes",!!(th||tp||td||ty||tg||tv))||(delete K.spikecolor,delete K.spikethickness,delete K.spikedash,delete K.spikemode,delete K.spikesnap);var tm=v(X.overlaying),tx=[0,1];if(void 0!==n[tm]){var tb=v(n[tm].anchor);void 0!==n[tb]&&(tx=n[tb].domain)}y(X,K,Q,{letter:Z,counterAxes:tr[Z],overlayableAxes:te(Z,W),grid:n.grid,overlayingDomain:tx}),Q("title.standoff"),to(),K._input=X}for(b=0;b<ta.length;){Z=(W=v(Y=ta[b++])).charAt(0),a.isPlainObject(r[W])||(r[W]={}),X=r[W],K=c.newContainer(n,W,Z+"axis"),$();var t_={letter:Z,font:n.font,outerTicks:P[W],showGrid:!B[W],data:[],bgColor:J,calendar:n.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:k,splomStash:((n._splomAxes||{})[Z]||{})[Y]};Q("uirevision",n.uirevision),K.type=ti[Y]||"linear",p(X,K,Q,t_,n),y(X,K,Q,{letter:Z,counterAxes:tr[Z],overlayableAxes:te(Z,W),grid:n.grid}),Q("fixedrange"),to(),K._input=X}var tw=w("rangeslider","handleDefaults"),tT=w("rangeselector","handleDefaults");for(b=0;b<V.length;b++)X=r[W=V[b]],K=n[W],tw(r,n,W),"date"===K.type&&tT(X,K,n,H,K.calendar),Q("fixedrange");for(b=0;b<H.length;b++){X=r[W=H[b]],K=n[W];var tA=n[v(K.anchor)];Q("fixedrange",w("rangeslider","isVisible")(tA))}d.handleDefaults(r,n,{axIds:tn.concat(ta).sort(g.idSort),axHasImage:D})}},42136:function(r,n,i){var a=i(49760).mix,o=i(22548),s=i(3400);r.exports=function(r,n,i,l){var c=(l=l||{}).dfltColor;function u(i,a){return s.coerce2(r,n,l.attributes,i,a)}var f=u("linecolor",c),h=u("linewidth");i("showline",l.showLine||!!f||!!h)||(delete n.linecolor,delete n.linewidth);var p=u("gridcolor",a(c,l.bgColor,l.blend||o.lightFraction).toRgbString()),d=u("gridwidth"),y=u("griddash");if(i("showgrid",l.showGrid||!!p||!!d||!!y)||(delete n.gridcolor,delete n.gridwidth,delete n.griddash),l.hasMinor){var g=u("minor.gridcolor",a(n.gridcolor,l.bgColor,67).toRgbString()),v=u("minor.gridwidth",n.gridwidth||1),m=u("minor.griddash",n.griddash||"solid");i("minor.showgrid",!!g||!!v||!!m)||(delete n.minor.gridcolor,delete n.minor.gridwidth,delete n.minor.griddash)}if(!l.noZeroLine){var x=u("zerolinecolor",c),b=u("zerolinewidth");i("zeroline",l.showGrid||!!x||!!b)||(delete n.zerolinecolor,delete n.zerolinewidth)}}},37668:function(r,n,i){var a=i(38248),o=i(3400);r.exports=function(r,n,i,s){var l,c,u,f,h,p,d=s.counterAxes||[],y=s.overlayableAxes||[],g=s.letter,v=s.grid,m=s.overlayingDomain;v&&(c=v._domains[g][v._axisMap[n._id]],l=v._anchors[n._id],c&&(u=v[g+"side"].split(" ")[0],f=v.domain[g]["right"===u||"top"===u?1:0])),c=c||[0,1],l=l||(a(r.position)?"free":d[0]||"free"),u=u||("x"===g?"bottom":"left"),f=f||0,h=0,p=!1;var x=o.coerce(r,n,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:l}},"anchor"),b=o.coerce(r,n,{side:{valType:"enumerated",values:"x"===g?["bottom","top"]:["left","right"],dflt:u}},"side");"free"===x&&("y"===g&&(i("autoshift")&&(f="left"===b?m[0]:m[1],p=!n.automargin||n.automargin,h="left"===b?-3:3),i("shift",h)),i("position",f)),i("automargin",p);var _=!1;if(y.length&&(_=o.coerce(r,n,{overlaying:{valType:"enumerated",values:[!1].concat(y),dflt:!1}},"overlaying")),!_){var w=i("domain",c);w[0]>w[1]-1/4096&&(n.domain=c),o.noneOrAll(r.domain,n.domain,c),"sync"===n.tickmode&&(n.tickmode="auto")}return i("layer"),n}},42568:function(r,n,i){var a=i(85024);r.exports=function(r,n,i,o,s){s||(s={});var l=s.tickSuffixDflt,c=a(r);i("tickprefix")&&i("showtickprefix",c),i("ticksuffix",l)&&i("showticksuffix",c)}},96312:function(r,n,i){var a=i(76808);r.exports=function(r,n,i,o){var s=n._template||{},l=n.type||s.type||"-";i("minallowed"),i("maxallowed");var c,u=i("range");u||o.noInsiderange||"log"===l||((c=i("insiderange"))&&(null===c[0]||null===c[1])&&(n.insiderange=!1,c=void 0),c&&(u=i("range",c)));var f,h=n.getAutorangeDflt(u,o),p=i("autorange",h);u&&(null===u[0]&&null===u[1]||(null===u[0]||null===u[1])&&("reversed"===p||!0===p)||null!==u[0]&&("min"===p||"max reversed"===p)||null!==u[1]&&("max"===p||"min reversed"===p))&&(u=void 0,delete n.range,n.autorange=!0,f=!0),f||(p=i("autorange",h=n.getAutorangeDflt(u,o))),p&&(a(i,p,u),"linear"!==l&&"-"!==l||i("rangemode")),n.cleanRange()}},21160:function(r,n,i){var a=i(84284).FROM_BL;r.exports=function(r,n,i){void 0===i&&(i=a[r.constraintoward||"center"]);var o=[r.r2l(r.range[0]),r.r2l(r.range[1])],s=o[0]+(o[1]-o[0])*i;r.range=r._input.range=[r.l2r(s+(o[0]-s)*n),r.l2r(s+(o[1]-s)*n)],r.setScale()}},78344:function(r,n,i){var a=i(33428),o=i(94336).E9,s=i(3400),l=s.numberFormat,c=i(38248),u=s.cleanNumber,f=s.ms2DateTime,h=s.dateTime2ms,p=s.ensureNumber,d=s.isArrayOrTypedArray,y=i(39032),g=y.FP_SAFE,v=y.BADNUM,m=y.LOG_CLIP,x=y.ONEWEEK,b=y.ONEDAY,_=y.ONEHOUR,w=y.ONEMIN,T=y.ONESEC,A=i(79811),k=i(33816),M=k.HOUR_PATTERN,S=k.WEEKDAY_PATTERN;function E(r){return Math.pow(10,r)}r.exports=function(r,n){n=n||{};var i=r._id||"x",y=i.charAt(0);function I(n,i){if(n>0)return Math.log(n)/Math.LN10;if(n<=0&&i&&r.range&&2===r.range.length){var a=r.range[0],o=r.range[1];return .5*(a+o-2*m*Math.abs(a-o))}return v}function L(n,i,a,o){if((o||{}).msUTC&&c(n))return+n;var l=h(n,a||r.calendar);if(l===v){if(!c(n))return v;n=+n;var u=Math.floor(10*s.mod(n+.05,1));l=h(new Date(Math.round(n-u/10)))+u/10}return l}function C(n,i,a){return f(n,i,a||r.calendar)}function O(n){return r._categories[Math.round(n)]}function D(n){if(null!=n){if(void 0===r._categoriesMap&&(r._categoriesMap={}),void 0!==r._categoriesMap[n])return r._categoriesMap[n];r._categories.push("number"==typeof n?String(n):n);var i=r._categories.length-1;return r._categoriesMap[n]=i,i}return v}function P(n){if(r._categoriesMap)return r._categoriesMap[n]}function B(r){var n=P(r);return void 0!==n?n:c(r)?+r:void 0}function R(r){return c(r)?+r:P(r)}function z(r,n,i){return a.round(i+n*r,2)}var F=function(n){return c(n)?z(n,r._m,r._b):v},N=function(n){var i;return i=r._m,(n-r._b)/i};if(r.rangebreaks){var U="y"===y;F=function(n){if(!c(n))return v;var i=r._rangebreaks.length;if(!i)return z(n,r._m,r._b);var a=U;r.range[0]>r.range[1]&&(a=!a);for(var o=a?-1:1,s=o*n,l=0,u=0;u<i;u++){var f=o*r._rangebreaks[u].min,h=o*r._rangebreaks[u].max;if(s<f)break;if(!(s>h)){l=s<(f+h)/2?u:u+1;break}l=u+1}var p=r._B[l]||0;return isFinite(p)?z(n,r._m2,p):0},N=function(n){var i,a,o=r._rangebreaks.length;if(!o)return i=r._m,(n-r._b)/i;for(var s=0,l=0;l<o&&!(n<r._rangebreaks[l].pmin);l++)n>r._rangebreaks[l].pmax&&(s=l+1);return a=r._m2,(n-r._B[s])/a}}r.c2l="log"===r.type?I:p,r.l2c="log"===r.type?E:p,r.l2p=F,r.p2l=N,r.c2p="log"===r.type?function(r,n){return F(I(r,n))}:F,r.p2c="log"===r.type?function(r){return E(N(r))}:N,-1!==["linear","-"].indexOf(r.type)?(r.d2r=r.r2d=r.d2c=r.r2c=r.d2l=r.r2l=u,r.c2d=r.c2r=r.l2d=r.l2r=p,r.d2p=r.r2p=function(n){return r.l2p(u(n))},r.p2d=r.p2r=N,r.cleanPos=p):"log"===r.type?(r.d2r=r.d2l=function(r,n){return I(u(r),n)},r.r2d=r.r2c=function(r){return E(u(r))},r.d2c=r.r2l=u,r.c2d=r.l2r=p,r.c2r=I,r.l2d=E,r.d2p=function(n,i){return r.l2p(r.d2r(n,i))},r.p2d=function(r){return E(N(r))},r.r2p=function(n){return r.l2p(u(n))},r.p2r=N,r.cleanPos=p):"date"===r.type?(r.d2r=r.r2d=s.identity,r.d2c=r.r2c=r.d2l=r.r2l=L,r.c2d=r.c2r=r.l2d=r.l2r=C,r.d2p=r.r2p=function(n,i,a){return r.l2p(L(n,0,a))},r.p2d=r.p2r=function(r,n,i){return C(N(r),n,i)},r.cleanPos=function(n){return s.cleanDate(n,v,r.calendar)}):"category"===r.type?(r.d2c=r.d2l=D,r.r2d=r.c2d=r.l2d=O,r.d2r=r.d2l_noadd=B,r.r2c=function(n){var i=R(n);return void 0!==i?i:r.fraction2r(.5)},r.l2r=r.c2r=p,r.r2l=R,r.d2p=function(n){return r.l2p(r.r2c(n))},r.p2d=function(r){return O(N(r))},r.r2p=r.d2p,r.p2r=N,r.cleanPos=function(r){return"string"==typeof r&&""!==r?r:p(r)}):"multicategory"===r.type&&(r.r2d=r.c2d=r.l2d=O,r.d2r=r.d2l_noadd=B,r.r2c=function(n){var i=B(n);return void 0!==i?i:r.fraction2r(.5)},r.r2c_just_indices=P,r.l2r=r.c2r=p,r.r2l=B,r.d2p=function(n){return r.l2p(r.r2c(n))},r.p2d=function(r){return O(N(r))},r.r2p=r.d2p,r.p2r=N,r.cleanPos=function(r){return Array.isArray(r)||"string"==typeof r&&""!==r?r:p(r)},r.setupMultiCategory=function(a){var o,l,c=r._traceIndices,u=r._matchGroup;if(u&&0===r._categories.length){for(var f in u)if(f!==i){var h=n[A.id2name(f)];c=c.concat(h._traceIndices)}}var p=[[0,{}],[0,{}]],g=[];for(o=0;o<c.length;o++){var v=a[c[o]];if(y in v){var m=v[y],x=v._length||s.minRowLength(m);if(d(m[0])&&d(m[1]))for(l=0;l<x;l++){var b=m[0][l],_=m[1][l];null!=b&&null!=_&&(g.push([b,_]),b in p[0][1]||(p[0][1][b]=p[0][0]++),_ in p[1][1]||(p[1][1][_]=p[1][0]++))}}}for(g.sort(function(r,n){var i=p[0][1],a=i[r[0]]-i[n[0]];if(a)return a;var o=p[1][1];return o[r[1]]-o[n[1]]}),o=0;o<g.length;o++)D(g[o])}),r.fraction2r=function(n){var i=r.r2l(r.range[0]),a=r.r2l(r.range[1]);return r.l2r(i+n*(a-i))},r.r2fraction=function(n){var i=r.r2l(r.range[0]),a=r.r2l(r.range[1]);return(r.r2l(n)-i)/(a-i)},r.limitRange=function(n){var i=r.minallowed,a=r.maxallowed;if(void 0!==i||void 0!==a){n||(n="range");var o=s.nestedProperty(r,n).get(),l=s.simpleMap(o,r.r2l),c=l[1]<l[0];c&&l.reverse();var u=s.simpleMap([i,a],r.r2l);if(void 0!==i&&l[0]<u[0]&&(o[c?1:0]=i),void 0!==a&&l[1]>u[1]&&(o[c?0:1]=a),o[0]===o[1]){var f=r.l2r(i),h=r.l2r(a);if(void 0!==i){var p=f+1;void 0!==a&&(p=Math.min(p,h)),o[c?1:0]=p}if(void 0!==a){var d=h+1;void 0!==i&&(d=Math.max(d,f)),o[c?0:1]=d}}}},r.cleanRange=function(n,i){r._cleanRange(n,i),r.limitRange(n)},r._cleanRange=function(n,i){i||(i={}),n||(n="range");var a,o,l=s.nestedProperty(r,n).get();if(o=(o="date"===r.type?s.dfltRange(r.calendar):"y"===y?k.DFLTRANGEY:"realaxis"===r._name?[0,1]:i.dfltRange||k.DFLTRANGEX).slice(),"tozero"!==r.rangemode&&"nonnegative"!==r.rangemode||(o[0]=0),l&&2===l.length){var u=null===l[0],f=null===l[1];for("date"!==r.type||r.autorange||(l[0]=s.cleanDate(l[0],v,r.calendar),l[1]=s.cleanDate(l[1],v,r.calendar)),a=0;a<2;a++)if("date"===r.type){if(!s.isDateTime(l[a],r.calendar)){r[n]=o;break}if(r.r2l(l[0])===r.r2l(l[1])){var h=s.constrain(r.r2l(l[0]),s.MIN_MS+1e3,s.MAX_MS-1e3);l[0]=r.l2r(h-1e3),l[1]=r.l2r(h+1e3);break}}else{if(!c(l[a])){if(u||f||!c(l[1-a])){r[n]=o;break}l[a]=l[1-a]*(a?10:.1)}if(l[a]<-g?l[a]=-g:l[a]>g&&(l[a]=g),l[0]===l[1]){var p=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=p,l[1]+=p}}}else s.nestedProperty(r,n).set(o)},r.setScale=function(i){var a=n._size;if(r.overlaying){var o=A.getFromId({_fullLayout:n},r.overlaying);r.domain=o.domain}var s=i&&r._r?"_r":"range",l=r.calendar;r.cleanRange(s);var c,u,f=r.r2l(r[s][0],l),h=r.r2l(r[s][1],l),p="y"===y;if(p?(r._offset=a.t+(1-r.domain[1])*a.h,r._length=a.h*(r.domain[1]-r.domain[0]),r._m=r._length/(f-h),r._b=-r._m*h):(r._offset=a.l+r.domain[0]*a.w,r._length=a.w*(r.domain[1]-r.domain[0]),r._m=r._length/(h-f),r._b=-r._m*f),r._rangebreaks=[],r._lBreaks=0,r._m2=0,r._B=[],r.rangebreaks&&(r._rangebreaks=r.locateBreaks(Math.min(f,h),Math.max(f,h)),r._rangebreaks.length)){for(c=0;c<r._rangebreaks.length;c++)u=r._rangebreaks[c],r._lBreaks+=Math.abs(u.max-u.min);var d=p;f>h&&(d=!d),d&&r._rangebreaks.reverse();var g=d?-1:1;for(r._m2=g*r._length/(Math.abs(h-f)-r._lBreaks),r._B.push(-r._m2*(p?h:f)),c=0;c<r._rangebreaks.length;c++)u=r._rangebreaks[c],r._B.push(r._B[r._B.length-1]-g*r._m2*(u.max-u.min));for(c=0;c<r._rangebreaks.length;c++)(u=r._rangebreaks[c]).pmin=F(u.min),u.pmax=F(u.max)}if(!isFinite(r._m)||!isFinite(r._b)||r._length<0)throw n._replotting=!1,Error("Something went wrong with axis scaling")},r.maskBreaks=function(n){var i,a,o,l,c,f=r.rangebreaks||[];f._cachedPatterns||(f._cachedPatterns=f.map(function(n){return n.enabled&&n.bounds?s.simpleMap(n.bounds,n.pattern?u:r.d2c):null})),f._cachedValues||(f._cachedValues=f.map(function(n){return n.enabled&&n.values?s.simpleMap(n.values,r.d2c).sort(s.sorterAsc):null}));for(var h=0;h<f.length;h++){var p=f[h];if(p.enabled){if(p.bounds){var d=p.pattern;switch(a=(i=f._cachedPatterns[h])[0],o=i[1],d){case S:l=(c=new Date(n)).getUTCDay(),a>o&&(o+=7,l<a&&(l+=7));break;case M:l=(c=new Date(n)).getUTCHours()+(c.getUTCMinutes()/60+c.getUTCSeconds()/3600+c.getUTCMilliseconds()/36e5),a>o&&(o+=24,l<a&&(l+=24));break;case"":l=n}if(l>=a&&l<o)return v}else for(var y=f._cachedValues[h],g=0;g<y.length;g++)if(o=(a=y[g])+p.dvalue,n>=a&&n<o)return v}}return n},r.locateBreaks=function(n,i){var a,o,l,c,f=[];if(!r.rangebreaks)return f;var h=r.rangebreaks.slice().sort(function(r,n){return r.pattern===S&&n.pattern===M?-1:n.pattern===S&&r.pattern===M?1:0}),p=function(r,a){if((r=s.constrain(r,n,i))!==(a=s.constrain(a,n,i))){for(var o=!0,l=0;l<f.length;l++){var c=f[l];r<c.max&&a>=c.min&&(r<c.min&&(c.min=r),a>c.max&&(c.max=a),o=!1)}o&&f.push({min:r,max:a})}};for(a=0;a<h.length;a++){var d=h[a];if(d.enabled){if(d.bounds){var y=n,g=i;d.pattern&&(y=Math.floor(y)),l=(o=s.simpleMap(d.bounds,d.pattern?u:r.r2l))[0],c=o[1];var v,m,A=new Date(y);switch(d.pattern){case S:m=x,v=(c-l+(c<l?7:0))*b,y+=l*b-(A.getUTCDay()*b+A.getUTCHours()*_+A.getUTCMinutes()*w+A.getUTCSeconds()*T+A.getUTCMilliseconds());break;case M:m=b,v=(c-l+(c<l?24:0))*_,y+=l*_-(A.getUTCHours()*_+A.getUTCMinutes()*w+A.getUTCSeconds()*T+A.getUTCMilliseconds());break;default:y=Math.min(o[0],o[1]),v=m=(g=Math.max(o[0],o[1]))-y}for(var k=y;k<g;k+=m)p(k,k+v)}else for(var E=s.simpleMap(d.values,r.d2c),I=0;I<E.length;I++)p(l=E[I],c=l+d.dvalue)}}return f.sort(function(r,n){return r.min-n.min}),f},r.makeCalcdata=function(n,i,a){var o,l,c,u,f=r.type,h="date"===f&&n[i+"calendar"];if(i in n){if(o=n[i],u=n._length||s.minRowLength(o),s.isTypedArray(o)&&("linear"===f||"log"===f)){if(u===o.length)return o;if(o.subarray)return o.subarray(0,u)}if("multicategory"===f)return function(r,n){for(var i=Array(n),a=0;a<n;a++){var o=(r[0]||[])[a],s=(r[1]||[])[a];i[a]=P([o,s])}return i}(o,u);for(l=Array(u),c=0;c<u;c++)l[c]=r.d2c(o[c],0,h,a)}else{var p=i+"0" in n?r.d2c(n[i+"0"],0,h):0,d=n["d"+i]?Number(n["d"+i]):1;for(o=n[({x:"y",y:"x"})[i]],l=Array(u=n._length||o.length),c=0;c<u;c++)l[c]=p+c*d}if(r.rangebreaks)for(c=0;c<u;c++)l[c]=r.maskBreaks(l[c]);return l},r.isValidRange=function(n,i){return Array.isArray(n)&&2===n.length&&(i&&null===n[0]||c(r.r2l(n[0])))&&(i&&null===n[1]||c(r.r2l(n[1])))},r.getAutorangeDflt=function(n,i){var a=!r.isValidRange(n,"nullOk");return a&&i&&i.reverseDflt?a="reversed":n&&(null===n[0]&&null===n[1]?a=!0:null===n[0]&&null!==n[1]?a="min":null!==n[0]&&null===n[1]&&(a="max")),a},r.isReversed=function(){var n=r.autorange;return"reversed"===n||"min reversed"===n||"max reversed"===n},r.isPtWithinRange=function(n,i){var a=r.c2l(n[y],null,i),o=r.r2l(r.range[0]),s=r.r2l(r.range[1]);return o<s?o<=a&&a<=s:s<=a&&a<=o},r._emptyCategories=function(){r._categories=[],r._categoriesMap={}},r.clearCalc=function(){var i=r._matchGroup;if(i){var a=null,o=null;for(var s in i){var l=n[A.id2name(s)];if(l._categories){a=l._categories,o=l._categoriesMap;break}}a&&o?(r._categories=a,r._categoriesMap=o):r._emptyCategories()}else r._emptyCategories();if(r._initialCategories)for(var c=0;c<r._initialCategories.length;c++)D(r._initialCategories[c])},r.sortByInitialCategories=function(){var a=[];if(r._emptyCategories(),r._initialCategories)for(var o=0;o<r._initialCategories.length;o++)D(r._initialCategories[o]);a=a.concat(r._traceIndices);var s=r._matchGroup;for(var l in s)if(i!==l){var c=n[A.id2name(l)];c._categories=r._categories,c._categoriesMap=r._categoriesMap,a=a.concat(c._traceIndices)}return a};var j=n._d3locale;"date"===r.type&&(r._dateFormat=j?j.timeFormat:o,r._extraFormat=n._extraFormat),r._separators=n.separators,r._numFormat=j?j.numberFormat:l,delete r._minDtick,delete r._forceTick0}},85024:function(r){r.exports=function(r){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(n){return void 0!==r[n]});if(n.every(function(i){return r[i]===r[n[0]]})||1===n.length)return r[n[0]]}},95936:function(r,n,i){var a=i(3400),o=i(76308).contrast,s=i(94724),l=i(85024),c=i(51272);function u(r,n){function i(i,o){return a.coerce(r,n,s.tickformatstops,i,o)}i("enabled")&&(i("dtickrange"),i("value"))}r.exports=function(r,n,i,f,h){h||(h={});var p=i("labelalias");a.isPlainObject(p)||delete n.labelalias;var d=l(r);if(i("showticklabels")){h.noTicklabelshift||i("ticklabelshift"),h.noTicklabelstandoff||i("ticklabelstandoff");var y=h.font||{},g=n.color,v=-1!==(n.ticklabelposition||"").indexOf("inside")?o(h.bgColor):g&&g!==s.color.dflt?g:y.color;if(a.coerceFont(i,"tickfont",y,{overrideDflt:{color:v}}),h.noTicklabelstep||"multicategory"===f||"log"===f||i("ticklabelstep"),!h.noAng){var m=i("tickangle");h.noAutotickangles||"auto"!==m||i("autotickangles")}if("category"!==f){var x=i("tickformat");c(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:u}),n.tickformatstops.length||delete n.tickformatstops,h.noExp||x||"date"===f||(i("showexponent",d),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(r,n,i){var a=i(3400),o=i(94724);r.exports=function(r,n,i,s){var l=s.isMinor,c=l?r.minor||{}:r,u=l?n.minor:n,f=l?o.minor:o,h=a.coerce2(c,u,f,"ticklen",l?.6*(n.ticklen||5):void 0),p=a.coerce2(c,u,f,"tickwidth",l?n.tickwidth||1:void 0),d=a.coerce2(c,u,f,"tickcolor",(l?n.tickcolor:void 0)||u.color);i((l?"minor.":"")+"ticks",!l&&s.outerTicks||h||p||d?"outside":"")||(delete u.ticklen,delete u.tickwidth,delete u.tickcolor)}},26332:function(r,n,i){var a=i(98728),o=i(3400).isArrayOrTypedArray,s=i(38116).isTypedArraySpec,l=i(38116).decodeTypedArraySpec;r.exports=function(r,n,i,c,u){u||(u={});var f=u.isMinor,h=f?r.minor||{}:r,p=f?n.minor:n,d=f?"minor.":"";function y(r){var n=h[r];return s(n)&&(n=l(n)),void 0!==n?n:(p._template||{})[r]}var g=y("tick0"),v=y("dtick"),m=i(d+"tickmode",o(y("tickvals"))?"array":v?"linear":"auto");if("auto"===m||"sync"===m)i(d+"nticks");else if("linear"===m){var x=p.dtick=a.dtick(v,c);p.tick0=a.tick0(g,c,n.calendar,x)}else"multicategory"!==c&&(void 0===i(d+"tickvals")?p.tickmode="auto":f||i("ticktext"))}},73736:function(r,n,i){var a=i(33428),o=i(24040),s=i(3400),l=i(43616),c=i(54460);r.exports=function(r,n,i,u){var f=r._fullLayout;if(0!==n.length){u&&(h=u());var h,p,d,y,g=a.ease(i.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(y),y=null,function(){for(var i={},a=0;a<n.length;a++){var s=n[a],l=s.plotinfo.xaxis,c=s.plotinfo.yaxis;s.xr0&&(i[l._name+".range"]=s.xr0.slice()),s.yr0&&(i[c._name+".range"]=s.yr0.slice())}return o.call("relayout",r,i).then(function(){for(var r=0;r<n.length;r++)v(n[r].plotinfo)})}()}),p=Date.now(),y=window.requestAnimationFrame(function a(){d=Date.now();for(var u=Math.min(1,(d-p)/i.duration),f=g(u),m=0;m<n.length;m++)(function(n,i){var a=n.plotinfo,o=a.xaxis,u=a.yaxis,f=o._length,h=u._length,p=!!n.xr1,d=!!n.yr1,y=[];if(p){var g=s.simpleMap(n.xr0,o.r2l),v=s.simpleMap(n.xr1,o.r2l),m=g[1]-g[0],x=v[1]-v[0];y[0]=(g[0]*(1-i)+i*v[0]-g[0])/(g[1]-g[0])*f,y[2]=f*(1-i+i*x/m),o.range[0]=o.l2r(g[0]*(1-i)+i*v[0]),o.range[1]=o.l2r(g[1]*(1-i)+i*v[1])}else y[0]=0,y[2]=f;if(d){var b=s.simpleMap(n.yr0,u.r2l),_=s.simpleMap(n.yr1,u.r2l),w=b[1]-b[0],T=_[1]-_[0];y[1]=(b[1]*(1-i)+i*_[1]-b[1])/(b[0]-b[1])*h,y[3]=h*(1-i+i*T/w),u.range[0]=o.l2r(b[0]*(1-i)+i*_[0]),u.range[1]=u.l2r(b[1]*(1-i)+i*_[1])}else y[1]=0,y[3]=h;c.drawOne(r,o,{skipTitle:!0}),c.drawOne(r,u,{skipTitle:!0}),c.redrawComponents(r,[o._id,u._id]);var A=p?f/y[2]:1,k=d?h/y[3]:1,M=p?y[0]:0,S=d?y[1]:0,E=p?y[0]/y[2]*f:0,I=d?y[1]/y[3]*h:0,L=o._offset-E,C=u._offset-I;a.clipRect.call(l.setTranslate,M,S).call(l.setScale,1/A,1/k),a.plot.call(l.setTranslate,L,C).call(l.setScale,A,k),l.setPointGroupScale(a.zoomScalePts,1/A,1/k),l.setTextPointsScale(a.zoomScaleTxt,1/A,1/k)})(n[m],f);d-p>i.duration?(function(){for(var i={},a=0;a<n.length;a++){var s=n[a],l=s.plotinfo.xaxis,c=s.plotinfo.yaxis;s.xr1&&(i[l._name+".range"]=s.xr1.slice()),s.yr1&&(i[c._name+".range"]=s.yr1.slice())}h&&h(),o.call("relayout",r,i).then(function(){for(var r=0;r<n.length;r++)v(n[r].plotinfo)})}(),y=window.cancelAnimationFrame(a)):y=window.requestAnimationFrame(a)}),Promise.resolve()}function v(r){var n=r.xaxis,i=r.yaxis;f._defs.select("#"+r.clipId+"> rect").call(l.setTranslate,0,0).call(l.setScale,1,1),r.plot.call(l.setTranslate,n._offset,i._offset).call(l.setScale,1,1);var a=r.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(l.setPointGroupScale,1,1),a.selectAll(".textpoint").call(l.setTextPointsScale,1,1),a.call(l.hideOutsideRangePoints,r)}c.redrawComponents(r)}},14944:function(r,n,i){var a=i(24040).traceIs,o=i(52976);function s(r){return({v:"x",h:"y"})[r.orientation||"v"]}function l(r,n){var i=s(r),o=a(r,"box-violin"),l=a(r._fullInput||{},"candlestick");return o&&!l&&n===i&&void 0===r[i]&&void 0===r[i+"0"]}r.exports=function(r,n,i,c){i("autotypenumbers",c.autotypenumbersDflt),"-"===i("type",(c.splomStash||{}).type)&&(function(r,n){if("-"===r.type){var i,c=r._id,u=c.charAt(0);-1!==c.indexOf("scene")&&(c=u);var f=function(r,n,i){for(var a=0;a<r.length;a++){var o=r[a];if("splom"===o.type&&o._length>0&&(o["_"+i+"axes"]||{})[n]||(o[i+"axis"]||i)===n&&(l(o,i)||(o[i]||[]).length||o[i+"0"]))return o}}(n,c,u);if(f){if("histogram"!==f.type||u!==({v:"y",h:"x"})[f.orientation||"v"]){var h=u+"calendar",p=f[h],d={noMultiCategory:!a(f,"cartesian")||a(f,"noMultiCategory")};if("box"===f.type&&f._hasPreCompStats&&u===({h:"x",v:"y"})[f.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=r.autotypenumbers,l(f,u)){var y=s(f),g=[];for(i=0;i<n.length;i++){var v=n[i];a(v,"box-violin")&&(v[u+"axis"]||u)===c&&(void 0!==v[y]?g.push(v[y][0]):void 0!==v.name?g.push(v.name):g.push("text"),v[h]!==p&&(p=void 0))}r.type=o(g,p,d)}else if("splom"===f.type){var m=f.dimensions[f._axesDim[c]];m.visible&&(r.type=o(m.values,p,d))}else r.type=o(f[u]||[f[u+"0"]],p,d)}else r.type="linear"}}}(n,c.data),"-"===n.type?n.type="linear":r.type=n.type)}},62460:function(r,n,i){var a=i(24040),o=i(3400);function s(r,n,i){var a,s,l,c=!1;if("data"===n.type)a=r._fullData[null!==n.traces?n.traces[0]:0];else{if("layout"!==n.type)return!1;a=r._fullLayout}return s=o.nestedProperty(a,n.prop).get(),(l=i[n.type]=i[n.type]||{}).hasOwnProperty(n.prop)&&l[n.prop]!==s&&(c=!0),l[n.prop]=s,{changed:c,value:s}}function l(r,n){var i=[],a=n[0],s={};if("string"==typeof a)s[a]=n[1];else{if(!o.isPlainObject(a))return i;s=a}return u(s,function(r,n,a){i.push({type:"layout",prop:r,value:a})},"",0),i}function c(r,n){var i,a,s,l,c=[];if(a=n[0],s=n[1],i=n[2],l={},"string"==typeof a)l[a]=s;else{if(!o.isPlainObject(a))return c;l=a,void 0===i&&(i=s)}return void 0===i&&(i=null),u(l,function(n,a,o){var s,l;if(Array.isArray(o)){var u=Math.min((l=o.slice()).length,r.data.length);i&&(u=Math.min(u,i.length)),s=[];for(var f=0;f<u;f++)s[f]=i?i[f]:f}else l=o,s=i?i.slice():null;if(null===s)Array.isArray(l)&&(l=l[0]);else if(Array.isArray(s)){if(!Array.isArray(l)){var h=l;l=[];for(var p=0;p<s.length;p++)l[p]=h}l.length=Math.min(s.length,l.length)}c.push({type:"data",prop:n,traces:s,value:l})},"",0),c}function u(r,n,i,a){Object.keys(r).forEach(function(s){var l=r[s];if("_"!==s[0]){var c=i+(a>0?".":"")+s;o.isPlainObject(l)?u(l,n,c,a+1):n(c,s,l)}})}n.manageCommandObserver=function(r,i,a,l){var c={},u=!0;i&&i._commandObserver&&(c=i._commandObserver),c.cache||(c.cache={}),c.lookupTable={};var f=n.hasSimpleAPICommandBindings(r,a,c.lookupTable);if(i&&i._commandObserver){if(f)return c;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,c}if(f){s(r,f,c.cache),c.check=function(){if(u){var n=s(r,f,c.cache);return n.changed&&l&&void 0!==c.lookupTable[n.value]&&(c.disable(),Promise.resolve(l({value:n.value,type:f.type,prop:f.prop,traces:f.traces,index:c.lookupTable[n.value]})).then(c.enable,c.enable)),n.changed}};for(var h=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<h.length;p++)r._internalOn(h[p],c.check);c.remove=function(){for(var n=0;n<h.length;n++)r._removeInternalListener(h[n],c.check)}}else o.log("Unable to automatically bind plot updates to API command"),c.lookupTable={},c.remove=function(){};return c.disable=function(){u=!1},c.enable=function(){u=!0},i&&(i._commandObserver=c),c},n.hasSimpleAPICommandBindings=function(r,i,a){var o,s,l=i.length;for(o=0;o<l;o++){var c,u=i[o],f=u.method,h=u.args;if(Array.isArray(h)||(h=[]),!f)return!1;var p=n.computeAPICommandBindings(r,f,h);if(1!==p.length)return!1;if(s){if((c=p[0]).type!==s.type||c.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var d=0;d<s.traces.length;d++)if(s.traces[d]!==c.traces[d])return!1}else if(c.prop!==s.prop)return!1}else Array.isArray((s=p[0]).traces)&&s.traces.sort();var y=(c=p[0]).value;if(Array.isArray(y)){if(1!==y.length)return!1;y=y[0]}a&&(a[y]=o)}return s},n.executeAPICommand=function(r,n,i){if("skip"===n)return Promise.resolve();var s=a.apiMethodRegistry[n],l=[r];Array.isArray(i)||(i=[]);for(var c=0;c<i.length;c++)l.push(i[c]);return s.apply(null,l).catch(function(r){return o.warn("API call to Plotly."+n+" rejected.",r),Promise.reject(r)})},n.computeAPICommandBindings=function(r,n,i){var a,o;switch(Array.isArray(i)||(i=[]),n){case"restyle":a=c(r,i);break;case"relayout":a=l(0,i);break;case"update":a=c(r,[i[0],i[2]]).concat(l(0,[i[1]]));break;case"animate":a=Array.isArray((o=i)[0])&&1===o[0].length&&-1!==["string","number"].indexOf(typeof o[0][0])?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[];break;default:a=[]}return a}},86968:function(r,n,i){var a=i(92880).extendFlat;n.u=function(r,n){n=n||{};var i={valType:"info_array",editType:(r=r||{}).editType,items:[{valType:"number",min:0,max:1,editType:r.editType},{valType:"number",min:0,max:1,editType:r.editType}],dflt:[0,1]},o=(r.name&&r.name,r.trace,n.description&&n.description,{x:a({},i,{}),y:a({},i,{}),editType:r.editType});return r.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:r.editType},o.column={valType:"integer",min:0,dflt:0,editType:r.editType}),o},n.Q=function(r,n,i,a){var o=a&&a.x||[0,1],s=a&&a.y||[0,1],l=n.grid;if(l){var c=i("domain.column");void 0!==c&&(c<l.columns?o=l._domains.x[c]:delete r.domain.column);var u=i("domain.row");void 0!==u&&(u<l.rows?s=l._domains.y[u]:delete r.domain.row)}var f=i("domain.x",o),h=i("domain.y",s);f[0]<f[1]||(r.domain.x=o.slice()),h[0]<h[1]||(r.domain.y=s.slice())}},25376:function(r){r.exports=function(r){var n=r.variantValues,i=r.editType,a=r.colorEditType;void 0===a&&(a=i);var o={editType:i,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};r.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var s={family:{valType:"string",noBlank:!0,strict:!0,editType:i},size:{valType:"number",min:1,editType:i},color:{valType:"color",editType:a},weight:o,style:{editType:i,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:r.noFontVariant?void 0:{editType:i,valType:"enumerated",values:n||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:r.noFontTextcase?void 0:{editType:i,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:r.noFontLineposition?void 0:{editType:i,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:r.noFontShadow?void 0:{editType:i,valType:"string",dflt:r.autoShadowDflt?"auto":"none"},editType:i};return r.autoSize&&(s.size.dflt="auto"),r.autoColor&&(s.color.dflt="auto"),r.arrayOk&&(s.family.arrayOk=!0,s.weight.arrayOk=!0,s.style.arrayOk=!0,r.noFontVariant||(s.variant.arrayOk=!0),r.noFontTextcase||(s.textcase.arrayOk=!0),r.noFontLineposition||(s.lineposition.arrayOk=!0),r.noFontShadow||(s.shadow.arrayOk=!0),s.size.arrayOk=!0,s.color.arrayOk=!0),s}},16672:function(r){r.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(r,n){n.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},n.axesNames=["lonaxis","lataxis"],n.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},n.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},n.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},n.clipPad=.001,n.precision=.1,n.landColor="#F0DC82",n.waterColor="#3399FF",n.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},n.sphereSVG={type:"Sphere"},n.fillLayers={ocean:1,land:1,lakes:1},n.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},n.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],n.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],n.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(r,n,i){var a=i(33428),o=i(83356),s=o.geoPath,l=o.geoDistance,c=i(87108),u=i(24040),f=i(3400),h=f.strTranslate,p=i(76308),d=i(43616),y=i(93024),g=i(7316),v=i(54460),m=i(19280).getAutoRange,x=i(86476),b=i(22676).prepSelect,_=i(22676).clearOutline,w=i(22676).selectOnClick,T=i(79248),A=i(79552),k=i(27144),M=i(59972),S=i(55712).NO;function E(r){this.id=r.id,this.graphDiv=r.graphDiv,this.container=r.container,this.topojsonURL=r.topojsonURL,this.isStatic=r.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var I=E.prototype;function L(r,n){var i=A.clipPad,a=r[0]+i,o=r[1]-i,s=n[0]+i,l=n[1]-i;a>0&&o<0&&(o+=360);var c=(o-a)/4;return{type:"Polygon",coordinates:[[[a,s],[a,l],[a+c,l],[a+2*c,l],[a+3*c,l],[o,l],[o,s],[o-c,s],[o-2*c,s],[o-3*c,s],[a,s]]]}}r.exports=function(r){return new E(r)},I.plot=function(r,n,i,a){var o=this;if(a)return o.update(r,n,!0);o._geoCalcData=r,o._fullLayout=n;var s=n[this.id],l=[],c=!1;for(var u in A.layerNameToAdjective)if("frame"!==u&&s["show"+u]){c=!0;break}for(var f=!1,h=0;h<r.length;h++){var p=r[0][0].trace;p._geo=o,p.locationmode&&(c=!0);var d=p.marker;if(d){var y=d.angle,g=d.angleref;(y||"north"===g||"previous"===g)&&(f=!0)}}if(this._hasMarkerAngles=f,c){var v=M.getTopojsonName(s);null!==o.topojson&&v===o.topojsonName||(o.topojsonName=v,void 0===PlotlyGeoAssets.topojson[o.topojsonName]&&l.push(o.fetchTopojson()))}l=l.concat(k.fetchTraceGeoData(r)),i.push(new Promise(function(i,a){Promise.all(l).then(function(){o.topojson=PlotlyGeoAssets.topojson[o.topojsonName],o.update(r,n),i()}).catch(a)}))},I.fetchTopojson=function(){var r=this,n=M.getTopojsonPath(r.topojsonURL,r.topojsonName);return new Promise(function(i,o){a.json(n,function(a,s){if(a)return 404===a.status?o(Error(["plotly.js could not find topojson file at",n+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):o(Error(["unexpected error while fetching topojson file at",n].join(" ")));PlotlyGeoAssets.topojson[r.topojsonName]=s,i()})})},I.update=function(r,n,i){var a=n[this.id];this.hasChoropleth=!1;for(var o=0;o<r.length;o++){var s=r[o],l=s[0].trace;"choropleth"===l.type&&(this.hasChoropleth=!0),!0===l.visible&&l._length>0&&l._module.calcGeoJSON(s,n)}if(!i){if(this.updateProjection(r,n))return;this.viewInitial&&this.scope===a.scope||this.saveViewInitial(a)}this.scope=a.scope,this.updateBaseLayers(n,a),this.updateDims(n,a),this.updateFx(n,a),g.generalUpdatePerTraceModule(this.graphDiv,this,r,a);var c=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=c.selectAll(".point"),this.dataPoints.text=c.selectAll("text"),this.dataPaths.line=c.selectAll(".js-line");var u=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=u.selectAll("path"),this._render()},I.updateProjection=function(r,n){var i=this.graphDiv,a=n[this.id],u=n._size,h=a.domain,p=a.projection,d=a.lonaxis,y=a.lataxis,g=d._ax,v=y._ax,x=this.projection=function(r){var n=r.projection,i=n.type,a=A.projNames[i];a="geo"+f.titleCase(a);for(var u=(o[a]||c[a])(),h=r._isSatellite?180*Math.acos(1/n.distance)/Math.PI:r._isClipped?A.lonaxisSpan[i]/2:null,p=["center","rotate","parallels","clipExtent"],d=function(r){return r?u:[]},y=0;y<p.length;y++){var g=p[y];"function"!=typeof u[g]&&(u[g]=d)}return u.isLonLatOverEdges=function(r){if(null===u(r))return!0;if(h){var n=u.rotate();return l(r,[-n[0],-n[1]])>h*Math.PI/180}return!1},u.getPath=function(){return s().projection(u)},u.getBounds=function(r){return u.getPath().bounds(r)},u.precision(A.precision),r._isSatellite&&u.tilt(n.tilt).distance(n.distance),h&&u.clipAngle(h-A.clipPad),u}(a),b=[[u.l+u.w*h.x[0],u.t+u.h*(1-h.y[1])],[u.l+u.w*h.x[1],u.t+u.h*(1-h.y[0])]],_=a.center||{},w=p.rotation||{},T=d.range||[],k=y.range||[];if(a.fitbounds){g._length=b[1][0]-b[0][0],v._length=b[1][1]-b[0][1],g.range=m(i,g),v.range=m(i,v);var M=(g.range[0]+g.range[1])/2,S=(v.range[0]+v.range[1])/2;if(a._isScoped)_={lon:M,lat:S};else if(a._isClipped){_={lon:M,lat:S},w={lon:M,lat:S,roll:w.roll};var E=p.type,I=A.lonaxisSpan[E]/2||180,C=A.lataxisSpan[E]/2||90;T=[M-I,M+I],k=[S-C,S+C]}else _={lon:M,lat:S},w={lon:M,lat:w.lat,roll:w.roll}}x.center([_.lon-w.lon,_.lat-w.lat]).rotate([-w.lon,-w.lat,w.roll]).parallels(p.parallels);var O=L(T,k);x.fitExtent(b,O);var D=this.bounds=x.getBounds(O),P=this.fitScale=x.scale(),B=x.translate();if(a.fitbounds){var R=x.getBounds(L(g.range,v.range)),z=Math.min((D[1][0]-D[0][0])/(R[1][0]-R[0][0]),(D[1][1]-D[0][1])/(R[1][1]-R[0][1]));isFinite(z)?x.scale(z*P):f.warn("Something went wrong during"+this.id+"fitbounds computations.")}else x.scale(p.scale*P);var F=this.midPt=[(D[0][0]+D[1][0])/2,(D[0][1]+D[1][1])/2];if(x.translate([B[0]+(F[0]-B[0]),B[1]+(F[1]-B[1])]).clipExtent(D),a._isAlbersUsa){var N=x([_.lon,_.lat]),U=x.translate();x.translate([U[0]-(N[0]-U[0]),U[1]-(N[1]-U[1])])}},I.updateBaseLayers=function(r,n){var i=this,o=i.topojson,s=i.layers,l=i.basePaths;function c(r){return"lonaxis"===r||"lataxis"===r}function u(r){return!!A.lineLayers[r]}function f(r){return!!A.fillLayers[r]}var h=(this.hasChoropleth?A.layersForChoropleth:A.layers).filter(function(r){return u(r)||f(r)?n["show"+r]:!c(r)||n[r].showgrid}),y=i.framework.selectAll(".layer").data(h,String);y.exit().each(function(r){delete s[r],delete l[r],a.select(this).remove()}),y.enter().append("g").attr("class",function(r){return"layer "+r}).each(function(r){var n=s[r]=a.select(this);"bg"===r?i.bgRect=n.append("rect").style("pointer-events","all"):c(r)?l[r]=n.append("path").style("fill","none"):"backplot"===r?n.append("g").classed("choroplethlayer",!0):"frontplot"===r?n.append("g").classed("scatterlayer",!0):u(r)?l[r]=n.append("path").style("fill","none").style("stroke-miterlimit",2):f(r)&&(l[r]=n.append("path").style("stroke","none"))}),y.order(),y.each(function(i){var a=l[i],s=A.layerNameToAdjective[i];"frame"===i?a.datum(A.sphereSVG):u(i)||f(i)?a.datum(S(o,o.objects[i])):c(i)&&a.datum(function(r,n,i){var a,o,s,l=n[r],c=A.scopeDefaults[n.scope];"lonaxis"===r?(a=c.lonaxisRange,o=c.lataxisRange,s=function(r,n){return[r,n]}):"lataxis"===r&&(a=c.lataxisRange,o=c.lonaxisRange,s=function(r,n){return[n,r]});var u={type:"linear",range:[a[0],a[1]-1e-6],tick0:l.tick0,dtick:l.dtick};v.setConvert(u,i);var f=v.calcTicks(u);n.isScoped||"lonaxis"!==r||f.pop();for(var h=f.length,p=Array(h),d=0;d<h;d++)for(var y=f[d].x,g=p[d]=[],m=o[0];m<o[1]+2.5;m+=2.5)g.push(s(y,m));return{type:"MultiLineString",coordinates:p}}(i,n,r)).call(p.stroke,n[i].gridcolor).call(d.dashLine,n[i].griddash,n[i].gridwidth),u(i)?a.call(p.stroke,n[s+"color"]).call(d.dashLine,"",n[s+"width"]):f(i)&&a.call(p.fill,n[s+"color"])})},I.updateDims=function(r,n){var i=this.bounds,a=(n.framewidth||0)/2,o=i[0][0]-a,s=i[0][1]-a,l=i[1][0]-o+a,c=i[1][1]-s+a;d.setRect(this.clipRect,o,s,l,c),this.bgRect.call(d.setRect,o,s,l,c).call(p.fill,n.bgcolor),this.xaxis._offset=o,this.xaxis._length=l,this.yaxis._offset=s,this.yaxis._length=c},I.updateFx=function(r,n){var i=this,o=i.graphDiv,s=i.bgRect,l=r.dragmode,c=r.clickmode;if(!i.isStatic){var h={element:i.bgRect.node(),gd:o,plotinfo:{id:i.id,xaxis:i.xaxis,yaxis:i.yaxis,fillRangeItems:function(r,n){n.isRect?(r.range={})[i.id]=[p([n.xmin,n.ymin]),p([n.xmax,n.ymax])]:(r.lassoPoints={})[i.id]=n.map(p)}},xaxes:[i.xaxis],yaxes:[i.yaxis],subplot:i.id,clickFn:function(r){2===r&&_(o)}};"pan"===l?(s.node().onmousedown=null,s.call(T(i,n)),s.on("dblclick.zoom",function(){var r=i.viewInitial,n={};for(var a in r)n[i.id+"."+a]=r[a];u.call("_guiRelayout",o,n),o.emit("plotly_doubleclick",null)}),o._context._scrollZoom.geo||s.on("wheel.zoom",null)):"select"!==l&&"lasso"!==l||(s.on(".zoom",null),h.prepFn=function(r,n,i){b(r,n,i,h,l)},x.init(h)),s.on("mousemove",function(){var r=i.projection.invert(f.getPositionFromD3Event());if(!r)return x.unhover(o,a.event);i.xaxis.p2c=function(){return r[0]},i.yaxis.p2c=function(){return r[1]},y.hover(o,a.event,i.id)}),s.on("mouseout",function(){o._dragging||x.unhover(o,a.event)}),s.on("click",function(){"select"!==l&&"lasso"!==l&&(c.indexOf("select")>-1&&w(a.event,o,[i.xaxis],[i.yaxis],i.id,h),c.indexOf("event")>-1&&y.click(o,a.event))})}function p(r){return i.projection.invert([r[0]+i.xaxis._offset,r[1]+i.yaxis._offset])}},I.makeFramework=function(){var r=this,n=r.graphDiv,i=n._fullLayout,o="clip"+i._uid+r.id;r.clipDef=i._clips.append("clipPath").attr("id",o),r.clipRect=r.clipDef.append("rect"),r.framework=a.select(r.container).append("g").attr("class","geo "+r.id).call(d.setClipUrl,o,n),r.project=function(n){var i=r.projection(n);return i?[i[0]-r.xaxis._offset,i[1]-r.yaxis._offset]:[null,null]},r.xaxis={_id:"x",c2p:function(n){return r.project(n)[0]}},r.yaxis={_id:"y",c2p:function(n){return r.project(n)[1]}},r.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},v.setConvert(r.mockAxis,i)},I.saveViewInitial=function(r){var n,i=r.center||{},a=r.projection,o=a.rotation||{};this.viewInitial={fitbounds:r.fitbounds,"projection.scale":a.scale},n=r._isScoped?{"center.lon":i.lon,"center.lat":i.lat}:r._isClipped?{"projection.rotation.lon":o.lon,"projection.rotation.lat":o.lat}:{"center.lon":i.lon,"center.lat":i.lat,"projection.rotation.lon":o.lon},f.extendFlat(this.viewInitial,n)},I.render=function(r){this._hasMarkerAngles&&r?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},I._render=function(){var r,n=this.projection,i=n.getPath();function a(r){var i=n(r.lonlat);return i?h(i[0],i[1]):null}function o(r){return n.isLonLatOverEdges(r.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",i);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(r){return i(r.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",o).attr("transform",a)}},10816:function(r,n,i){var a=i(84888).KY,o=i(3400).counterRegex,s=i(43520),l=o("geo"),c={};c.geo={valType:"subplotid",dflt:"geo",editType:"calc"},r.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:l,attrRegex:l,attributes:c,layoutAttributes:i(40384),supplyLayoutDefaults:i(86920),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots.geo,l=0;l<o.length;l++){var c=o[l],u=a(i,"geo",c),f=n[c]._subplot;f||(f=s({id:c,graphDiv:r,container:n._geolayer.node(),topojsonURL:r._context.topojsonURL,staticPlot:r._context.staticPlot}),n[c]._subplot=f),f.plot(u,n,r._promises)}},updateFx:function(r){for(var n=r._fullLayout,i=n._subplots.geo,a=0;a<i.length;a++){var o=n[i[a]];o._subplot.updateFx(n,o)}},clean:function(r,n,i,a){for(var o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],c=a[l]._subplot;!n[l]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},40384:function(r,n,i){var a=i(22548),o=i(86968).u,s=i(98192).u,l=i(79552),c=i(67824).overrideAll,u=i(95376),f={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:a.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:s};(r.exports=c({domain:o({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:u(l.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:u(l.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:a.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:l.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:l.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:l.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:l.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:a.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:a.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:a.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:a.background},lonaxis:f,lataxis:f},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(r,n,i){var a=i(3400),o=i(168),s=i(84888).op,l=i(79552),c=i(40384),u=l.axesNames;function f(r,n,i,o){var c=s(o.fullData,"geo",o.id).map(function(r){return r._expandedIndex}),f=i("resolution"),h=i("scope"),p=l.scopeDefaults[h],d=i("projection.type",p.projType),y=n._isAlbersUsa="albers usa"===d;y&&(h=n.scope="usa");var g=n._isScoped="world"!==h,v=n._isSatellite="satellite"===d,m=n._isConic=-1!==d.indexOf("conic")||"albers"===d,x=n._isClipped=!!l.lonaxisSpan[d];if(!1===r.visible){var b=a.extendDeep({},n._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),n._template=b}for(var _=i("visible"),w=0;w<u.length;w++){var T,A=u[w],k=[30,10][w];if(g)T=p[A+"Range"];else{var M=l[A+"Span"],S=(M[d]||M["*"])/2,E=i("projection.rotation."+A.substr(0,3),p.projRotate[w]);T=[E-S,E+S]}var I=i(A+".range",T);i(A+".tick0"),i(A+".dtick",k),i(A+".showgrid",!!_&&void 0)&&(i(A+".gridcolor"),i(A+".gridwidth"),i(A+".griddash")),n[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:c,setScale:a.identity,c2l:a.identity,r2l:a.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var L=n.lonaxis.range,C=n.lataxis.range,O=L[0],D=L[1];O>0&&D<0&&(D+=360);var P,B,R,z=(O+D)/2;if(!y){var F=g?p.projRotate:[z,0,0];P=i("projection.rotation.lon",F[0]),i("projection.rotation.lat",F[1]),i("projection.rotation.roll",F[2]),i("showcoastlines",!g&&_)&&(i("coastlinecolor"),i("coastlinewidth")),i("showocean",!!_&&void 0)&&i("oceancolor")}y?(B=-96.6,R=38.7):(B=g?z:P,R=(C[0]+C[1])/2),i("center.lon",B),i("center.lat",R),v&&(i("projection.tilt"),i("projection.distance")),m&&i("projection.parallels",p.projParallels||[0,60]),i("projection.scale"),i("showland",!!_&&void 0)&&i("landcolor"),i("showlakes",!!_&&void 0)&&i("lakecolor"),i("showrivers",!!_&&void 0)&&(i("rivercolor"),i("riverwidth")),i("showcountries",g&&"usa"!==h&&_)&&(i("countrycolor"),i("countrywidth")),("usa"===h||"north america"===h&&50===f)&&(i("showsubunits",_),i("subunitcolor"),i("subunitwidth")),g||i("showframe",_)&&(i("framecolor"),i("framewidth")),i("bgcolor"),i("fitbounds")&&(delete n.projection.scale,g?(delete n.center.lon,delete n.center.lat):x?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}r.exports=function(r,n,i){o(r,n,i,{type:"geo",attributes:c,handleDefaults:f,fullData:i,partition:"y"})}},79248:function(r,n,i){var a=i(33428),o=i(3400),s=i(24040),l=Math.PI/180,c=180/Math.PI,u={cursor:"pointer"},f={cursor:"auto"};function h(r,n){return a.behavior.zoom().translate(n.translate()).scale(n.scale())}function p(r,n,i){var a=r.id,l=r.graphDiv,c=l.layout,u=c[a],f=l._fullLayout,h=f[a],p={},d={};function y(r,n){p[a+"."+r]=o.nestedProperty(u,r).get(),s.call("_storeDirectGUIEdit",c,f._preGUI,p);var i=o.nestedProperty(h,r);i.get()!==n&&(i.set(n),o.nestedProperty(u,r).set(n),d[a+"."+r]=n)}i(y),y("projection.scale",n.scale()/r.fitScale),y("fitbounds",!1),l.emit("plotly_relayout",d)}function d(r,n){var i,a,o,s=r.invert(n);return s&&isFinite(s[0])&&isFinite(s[1])&&(i=s[0]*l,[(o=Math.cos(a=s[1]*l))*Math.cos(i),o*Math.sin(i),Math.sin(a)])}function y(r,n,i,a){var o=g(i-r),s=g(a-n);return Math.sqrt(o*o+s*s)}function g(r){return(r%360+540)%360-180}function v(r,n,i){var a=i*l,o=r.slice(),s=0===n?1:0,c=2===n?1:2,u=Math.cos(a),f=Math.sin(a);return o[s]=r[s]*u-r[c]*f,o[c]=r[c]*u+r[s]*f,o}function m(r,n){for(var i=0,a=0,o=r.length;a<o;++a)i+=r[a]*n[a];return i}r.exports=function(r,n){var i=r.projection;return(n._isScoped?function(r,n){var i=h(0,n);function o(i){var a=n.invert(r.midPt);i("center.lon",a[0]),i("center.lat",a[1])}return i.on("zoomstart",function(){a.select(this).style(u)}).on("zoom",function(){n.scale(a.event.scale).translate(a.event.translate),r.render(!0);var i=n.invert(r.midPt);r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.center.lon":i[0],"geo.center.lat":i[1]})}).on("zoomend",function(){a.select(this).style(f),p(r,n,o)}),i}:n._isClipped?function(r,n){var i,o={r:n.rotate(),k:n.scale()},s=h(0,n),g=function(r){for(var n=0,i=arguments.length,o=[];++n<i;)o.push(arguments[n]);var s=a.dispatch.apply(null,o);return s.of=function(n,i){return function(o){var l;try{l=o.sourceEvent=a.event,o.target=r,a.event=o,s[o.type].apply(n,i)}finally{a.event=l}}},s}(s,"zoomstart","zoom","zoomend"),x=0,b=s.on;function _(r){var i=n.rotate();r("projection.rotation.lon",-i[0]),r("projection.rotation.lat",-i[1])}return s.on("zoomstart",function(){a.select(this).style(u);var r,f,h,p,_,w,T,A,k,M,S=a.mouse(this),E=n.rotate(),I=E,L=n.translate(),C=(r=.5*E[0]*l,f=.5*E[1]*l,h=.5*E[2]*l,p=Math.sin(r),_=Math.cos(r),w=Math.sin(f),T=Math.cos(f),A=Math.sin(h),[_*T*(k=Math.cos(h))+p*w*A,p*T*k-_*w*A,_*w*k+p*T*A,_*T*A-p*w*k]);i=d(n,S),b.call(s,"zoom",function(){var r,s,l,u,f,h,p,x,b=a.mouse(this);if(n.scale(o.k=a.event.scale),i){if(d(n,b)){n.rotate(E).translate(L);var _,w,T,A,k,M,O,D,P,B,R,z,F,N,U,j,V,H=d(n,b),q=function(r,n){if(r&&n){var i=[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]],a=Math.sqrt(m(i,i)),o=.5*Math.acos(Math.max(-1,Math.min(1,m(r,n)))),s=Math.sin(o)/a;return a&&[Math.cos(o),i[2]*s,-i[1]*s,i[0]*s]}}(i,H),G=[Math.atan2(2*((r=C[0],s=C[1],l=C[2],u=C[3],_=[r*(f=q[0])-s*(h=q[1])-l*(p=q[2])-u*(x=q[3]),r*h+s*f+l*x-u*p,r*p-s*x+l*f+u*h,r*x+s*p-l*h+u*f])[0]*_[1]+_[2]*_[3]),1-2*(_[1]*_[1]+_[2]*_[2]))*c,Math.asin(Math.max(-1,Math.min(1,2*(_[0]*_[2]-_[3]*_[1]))))*c,Math.atan2(2*(_[0]*_[3]+_[1]*_[2]),1-2*(_[2]*_[2]+_[3]*_[3]))*c],W=o.r=(w=i,T=I,A=v(w,2,G[0]),A=v(A,1,G[1]),A=v(A,0,G[2]-T[2]),O=w[0],D=w[1],P=w[2],B=A[0],R=A[1],z=A[2],F=Math.atan2(D,O)*c,Math.abs(R)>(N=Math.sqrt(O*O+D*D))?(M=(R>0?90:-90)-F,k=0):(M=Math.asin(R/N)*c-F,k=Math.sqrt(N*N-R*R)),U=180-M-2*F,j=(Math.atan2(z,B)-Math.atan2(P,k))*c,V=(Math.atan2(z,B)-Math.atan2(P,-k))*c,y(T[0],T[1],M,j)<=y(T[0],T[1],U,V)?[M,j,T[2]]:[U,V,T[2]]);isFinite(W[0])&&isFinite(W[1])&&isFinite(W[2])||(W=I),n.rotate(W),I=W}}else i=d(n,S=b);g.of(this,arguments)({type:"zoom"})}),M=g.of(this,arguments),x++||M({type:"zoomstart"})}).on("zoomend",function(){var i;a.select(this).style(f),b.call(s,"zoom",null),i=g.of(this,arguments),--x||i({type:"zoomend"}),p(r,n,_)}).on("zoom.redraw",function(){r.render(!0);var i=n.rotate();r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.projection.rotation.lon":-i[0],"geo.projection.rotation.lat":-i[1]})}),a.rebind(s,g,"on")}:function(r,n){var i,o,s,l,c,d,y,g,v,m=h(0,n);function x(r){return n.invert(r)}function b(i){var a=n.rotate(),o=n.invert(r.midPt);i("projection.rotation.lon",-a[0]),i("center.lon",o[0]),i("center.lat",o[1])}return m.on("zoomstart",function(){a.select(this).style(u),i=a.mouse(this),o=n.rotate(),s=n.translate(),l=o,c=x(i)}).on("zoom",function(){if(d=a.mouse(this),function(r){var i=x(r);if(!i)return!0;var a=n(i);return Math.abs(a[0]-r[0])>2||Math.abs(a[1]-r[1])>2}(i))return m.scale(n.scale()),void m.translate(n.translate());n.scale(a.event.scale),n.translate([s[0],a.event.translate[1]]),c?x(d)&&(g=x(d),y=[l[0]+(g[0]-c[0]),o[1],o[2]],n.rotate(y),l=y):c=x(i=d),v=!0,r.render(!0);var u=n.rotate(),f=n.invert(r.midPt);r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.center.lon":f[0],"geo.center.lat":f[1],"geo.projection.rotation.lon":-u[0]})}).on("zoomend",function(){a.select(this).style(f),v&&p(r,n,b)}),m})(r,i)}},84888:function(r,n,i){var a=i(24040),o=i(33816).SUBPLOT_PATTERN;n.KY=function(r,n,i){var o=a.subplotsRegistry[n];if(!o)return[];for(var s=o.attr,l=[],c=0;c<r.length;c++){var u=r[c];u[0].trace[s]===i&&l.push(u)}return l},n._M=function(r,n,i){var o,s=[],l=[];if(!(o="string"==typeof n?a.getModule(n).plot:"function"==typeof n?n:n.plot))return[s,r];for(var c=0;c<r.length;c++){var u=r[c],f=u[0].trace,h=void 0!==f.zorder;!0===f.visible&&0!==f._length&&(!f._module||f._module.plot!==o||h&&f.zorder!==i?l.push(u):s.push(u))}return[s,l]},n.op=function(r,n,i){if(!a.subplotsRegistry[n])return[];var s,l,c,u=a.subplotsRegistry[n].attr,f=[];if("gl2d"===n){var h=i.match(o);l="x"+h[1],c="y"+h[2]}for(var p=0;p<r.length;p++)s=r[p],"gl2d"===n&&a.traceIs(s,"gl2d")?s[u[0]]===l&&s[u[1]]===c&&f.push(s):s[u]===i&&f.push(s);return f}},2428:function(r,n,i){var a=i(62644),o=i(97264),s=i(29128),l=i(33816),c=i(89184);function u(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}r.exports=function(r){var n=r.mouseContainer,i=r.glplot,f=new u(n,i);function h(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function p(n,a,o){var s,c,u=r.calcDataBox(),p=i.viewBox,d=f.lastPos[0],y=f.lastPos[1],g=l.MINDRAG*i.pixelRatio,v=l.MINZOOM*i.pixelRatio;function m(n,i,a){var o=Math.min(i,a),s=Math.max(i,a);o!==s?(u[n]=o,u[n+2]=s,f.dataBox=u,r.setRanges(u)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(a*=i.pixelRatio,o*=i.pixelRatio,o=p[3]-p[1]-o,r.fullLayout.dragmode){case"zoom":if(n){var x=a/(p[2]-p[0])*(u[2]-u[0])+u[0],b=o/(p[3]-p[1])*(u[3]-u[1])+u[1];f.boxInited||(f.boxStart[0]=x,f.boxStart[1]=b,f.dragStart[0]=a,f.dragStart[1]=o),f.boxEnd[0]=x,f.boxEnd[1]=b,f.boxInited=!0,f.boxEnabled||f.boxStart[0]===f.boxEnd[0]&&f.boxStart[1]===f.boxEnd[1]||(f.boxEnabled=!0);var _=Math.abs(f.dragStart[0]-a)<v,w=Math.abs(f.dragStart[1]-o)<v;if(!function(){for(var n=r.graphDiv._fullLayout._axisConstraintGroups,i=r.xaxis._id,a=r.yaxis._id,o=0;o<n.length;o++)if(-1!==n[o][i]){if(-1!==n[o][a])return!0;break}return!1}()||_&&w)_&&(f.boxEnd[0]=f.boxStart[0]),w&&(f.boxEnd[1]=f.boxStart[1]);else{s=f.boxEnd[0]-f.boxStart[0],c=f.boxEnd[1]-f.boxStart[1];var T=(u[3]-u[1])/(u[2]-u[0]);Math.abs(s*T)>Math.abs(c)?(f.boxEnd[1]=f.boxStart[1]+Math.abs(s)*T*(c>=0?1:-1),f.boxEnd[1]<u[1]?(f.boxEnd[1]=u[1],f.boxEnd[0]=f.boxStart[0]+(u[1]-f.boxStart[1])/Math.abs(T)):f.boxEnd[1]>u[3]&&(f.boxEnd[1]=u[3],f.boxEnd[0]=f.boxStart[0]+(u[3]-f.boxStart[1])/Math.abs(T))):(f.boxEnd[0]=f.boxStart[0]+Math.abs(c)/T*(s>=0?1:-1),f.boxEnd[0]<u[0]?(f.boxEnd[0]=u[0],f.boxEnd[1]=f.boxStart[1]+(u[0]-f.boxStart[0])*Math.abs(T)):f.boxEnd[0]>u[2]&&(f.boxEnd[0]=u[2],f.boxEnd[1]=f.boxStart[1]+(u[2]-f.boxStart[0])*Math.abs(T)))}}else f.boxEnabled?(s=f.boxStart[0]!==f.boxEnd[0],c=f.boxStart[1]!==f.boxEnd[1],s||c?(s&&(m(0,f.boxStart[0],f.boxEnd[0]),r.xaxis.autorange=!1),c&&(m(1,f.boxStart[1],f.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),f.boxEnabled=!1,f.boxInited=!1):f.boxInited&&(f.boxInited=!1);break;case"pan":f.boxEnabled=!1,f.boxInited=!1,n?(f.panning||(f.dragStart[0]=a,f.dragStart[1]=o),Math.abs(f.dragStart[0]-a)<g&&(a=f.dragStart[0]),Math.abs(f.dragStart[1]-o)<g&&(o=f.dragStart[1]),s=(d-a)*(u[2]-u[0])/(i.viewBox[2]-i.viewBox[0]),c=(y-o)*(u[3]-u[1])/(i.viewBox[3]-i.viewBox[1]),u[0]+=s,u[2]+=s,u[1]+=c,u[3]+=c,r.setRanges(u),f.panning=!0,f.lastInputTime=Date.now(),h(),r.cameraChanged(),r.handleAnnotations()):f.panning&&(f.panning=!1,r.relayoutCallback())}f.lastPos[0]=a,f.lastPos[1]=o}return f.mouseListener=a(n,p),n.addEventListener("touchstart",function(r){var i=s(r.changedTouches[0],n);p(0,i[0],i[1]),p(1,i[0],i[1]),r.preventDefault()},!!c&&{passive:!1}),n.addEventListener("touchmove",function(r){r.preventDefault();var i=s(r.changedTouches[0],n);p(1,i[0],i[1]),r.preventDefault()},!!c&&{passive:!1}),n.addEventListener("touchend",function(r){p(0,f.lastPos[0],f.lastPos[1]),r.preventDefault()},!!c&&{passive:!1}),f.wheelListener=o(n,function(n,a){if(!r.scrollZoom)return!1;var o=r.calcDataBox(),s=i.viewBox,l=f.lastPos[0],c=f.lastPos[1],u=Math.exp(5*a/(s[3]-s[1])),p=l/(s[2]-s[0])*(o[2]-o[0])+o[0],d=c/(s[3]-s[1])*(o[3]-o[1])+o[1];return o[0]=(o[0]-p)*u+p,o[2]=(o[2]-p)*u+p,o[1]=(o[1]-d)*u+d,o[3]=(o[3]-d)*u+d,r.setRanges(o),f.lastInputTime=Date.now(),h(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),f}},92568:function(r,n,i){var a=i(54460),o=i(43080);function s(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var l=s.prototype,c=["xaxis","yaxis"];l.merge=function(r){var n,i,a,s,l,u,f,h,p,d,y;for(this.titleEnable=!1,this.backgroundColor=o(r.plot_bgcolor),d=0;d<2;++d){var g=(n=c[d]).charAt(0);for(a=(i=r[this.scene[n]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":i.title.text,y=0;y<=2;y+=2)this.labelEnable[d+y]=!1,this.labels[d+y]=a,this.labelColor[d+y]=o(i.title.font.color),this.labelFont[d+y]=i.title.font.family,this.labelSize[d+y]=i.title.font.size,this.labelPad[d+y]=this.getLabelPad(n,i),this.tickEnable[d+y]=!1,this.tickColor[d+y]=o((i.tickfont||{}).color),this.tickAngle[d+y]="auto"===i.tickangle?0:-(Math.PI*i.tickangle)/180,this.tickPad[d+y]=this.getTickPad(i),this.tickMarkLength[d+y]=0,this.tickMarkWidth[d+y]=i.tickwidth||0,this.tickMarkColor[d+y]=o(i.tickcolor),this.borderLineEnable[d+y]=!1,this.borderLineColor[d+y]=o(i.linecolor),this.borderLineWidth[d+y]=i.linewidth||0;f=this.hasSharedAxis(i),l=this.hasAxisInDfltPos(n,i)&&!f,u=this.hasAxisInAltrPos(n,i)&&!f,s=i.mirror||!1,h=f?-1!==String(s).indexOf("all"):!!s,p=f?"allticks"===s:-1!==String(s).indexOf("ticks"),l?this.labelEnable[d]=!0:u&&(this.labelEnable[d+2]=!0),l?this.tickEnable[d]=i.showticklabels:u&&(this.tickEnable[d+2]=i.showticklabels),(l||h)&&(this.borderLineEnable[d]=i.showline),(u||h)&&(this.borderLineEnable[d+2]=i.showline),(l||p)&&(this.tickMarkLength[d]=this.getTickMarkLength(i)),(u||p)&&(this.tickMarkLength[d+2]=this.getTickMarkLength(i)),this.gridLineEnable[d]=i.showgrid,this.gridLineColor[d]=o(i.gridcolor),this.gridLineWidth[d]=i.gridwidth,this.zeroLineEnable[d]=i.zeroline,this.zeroLineColor[d]=o(i.zerolinecolor),this.zeroLineWidth[d]=i.zerolinewidth}},l.hasSharedAxis=function(r){var n=this.scene,i=n.fullLayout._subplots.gl2d;return 0!==a.findSubplotsWithAxis(i,r).indexOf(n.id)},l.hasAxisInDfltPos=function(r,n){var i=n.side;return"xaxis"===r?"bottom"===i:"yaxis"===r?"left"===i:void 0},l.hasAxisInAltrPos=function(r,n){var i=n.side;return"xaxis"===r?"top"===i:"yaxis"===r?"right"===i:void 0},l.getLabelPad=function(r,n){var i=n.title.font.size,a=n.showticklabels;return"xaxis"===r?"top"===n.side?i*(1.5+(a?1:0))-10:i*(1.5+(a?.5:0))-10:"yaxis"===r?"right"===n.side?10+i*(1.5+(a?1:.5)):10+i*(1.5+(a?.5:0)):void 0},l.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},l.getTickMarkLength=function(r){if(!r.ticks)return 0;var n=r.ticklen;return"inside"===r.ticks?-n:n},r.exports=function(r){return new s(r)}},39952:function(r,n,i){var a=i(67824).overrideAll,o=i(17188),s=i(64859),l=i(9616),c=i(33816),u=i(57952),f=i(65460),h=i(84888).op;n.name="gl2d",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=c.idRegex,n.attrRegex=c.attrRegex,n.attributes=i(26720),n.supplyLayoutDefaults=function(r,n,i){n._has("cartesian")||u.supplyLayoutDefaults(r,n,i)},n.layoutAttrOverrides=a(u.layoutAttributes,"plot","from-root"),n.baseLayoutAttrOverrides=a({plot_bgcolor:s.plot_bgcolor,hoverlabel:f.hoverlabel},"plot","nested"),n.plot=function(r){for(var n=r._fullLayout,i=r._fullData,a=n._subplots.gl2d,s=0;s<a.length;s++){var l=a[s],c=n._plots[l],u=h(i,"gl2d",l),f=c._scene2d;void 0===f&&(f=new o({id:l,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},n),c._scene2d=f),f.plot(u,r.calcdata,n,r.layout)}},n.clean=function(r,n,i,a){for(var o=a._subplots.gl2d||[],s=0;s<o.length;s++){var l=o[s],c=a._plots[l];c._scene2d&&0===h(r,"gl2d",l).length&&(c._scene2d.destroy(),delete a._plots[l])}u.clean.apply(this,arguments)},n.drawFramework=function(r){r._context.staticPlot||u.drawFramework(r)},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots.gl2d,a=0;a<i.length;a++){var o=n._plots[i[a]]._scene2d,s=o.toImage("png");n._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),o.destroy()}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots.gl2d,a=0;a<i.length;a++)n._plots[i[a]]._scene2d.updateFx(n.dragmode)}},17188:function(r,n,i){var a,o,s=i(24040),l=i(54460),c=i(93024),u=i(67792).gl_plot2d,f=i(67792).gl_spikes2d,h=i(67792).gl_select_box,p=i(5408),d=i(92568),y=i(2428),g=i(16576),v=i(71888),m=v.enforce,x=v.clean,b=i(19280).doAutoRange,_=i(72760),w=_.drawMode,T=_.selectMode,A=["xaxis","yaxis"],k=i(33816).SUBPLOT_PATTERN;function M(r,n){this.container=r.container,this.graphDiv=r.graphDiv,this.pixelRatio=r.plotGlPixelRatio||window.devicePixelRatio,this.id=r.id,this.staticPlot=!!r.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(n),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(n),this.glplot=u(this.glplotOptions),this.camera=y(this),this.traces={},this.spikes=f(this.glplot),this.selectBox=h(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}r.exports=M;var S=M.prototype;S.makeFramework=function(){if(this.staticPlot){if(!(o||(o=p({canvas:a=document.createElement("canvas"),preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw Error("Error creating static canvas/context for image server");this.canvas=a,this.gl=o}else{var r=this.container.querySelector(".gl-canvas-focus"),n=p({canvas:r,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!n)return g(this),void(this.stopped=!0);this.canvas=r,this.gl=n}var i=this.canvas;i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",this.updateSize(i);var s=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",s.style["z-index"]=20,s.style["pointer-events"]="none";var l=this.mouseContainer=document.createElement("div");l.style.position="absolute",l.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var c=this.container;c.appendChild(s),c.appendChild(l);var u=this;l.addEventListener("mouseout",function(){u.isMouseOver=!1,u.unhover()}),l.addEventListener("mouseover",function(){u.isMouseOver=!0})},S.toImage=function(r){r||(r="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(a),this.updateSize(this.canvas);var n=this.glplot.gl,i=n.drawingBufferWidth,o=n.drawingBufferHeight;n.clearColor(1,1,1,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),n.bindFramebuffer(n.FRAMEBUFFER,null);var s=new Uint8Array(i*o*4);n.readPixels(0,0,i,o,n.RGBA,n.UNSIGNED_BYTE,s);for(var l=0,c=o-1;l<c;++l,--c)for(var u=0;u<i;++u)for(var f=0;f<4;++f){var h=s[4*(i*l+u)+f];s[4*(i*l+u)+f]=s[4*(i*c+u)+f],s[4*(i*c+u)+f]=h}var p=document.createElement("canvas");p.width=i,p.height=o;var d,y=p.getContext("2d",{willReadFrequently:!0}),g=y.createImageData(i,o);switch(g.data.set(s),y.putImageData(g,0,0),r){case"jpeg":d=p.toDataURL("image/jpeg");break;case"webp":d=p.toDataURL("image/webp");break;default:d=p.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(a),d},S.updateSize=function(r){r||(r=this.canvas);var n=this.pixelRatio,i=this.fullLayout,a=i.width,o=i.height,s=0|Math.ceil(n*a),l=0|Math.ceil(n*o);return r.width===s&&r.height===l||(r.width=s,r.height=l),r},S.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var r=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],n=0;n<2;++n)for(var i=0;i<r[n].length;++i)r[n][i].text=r[n][i].text+"";return r},S.updateRefs=function(r){this.fullLayout=r;var n=this.id.match(k),i="xaxis"+n[1],a="yaxis"+n[2];this.xaxis=this.fullLayout[i],this.yaxis=this.fullLayout[a]},S.relayoutCallback=function(){var r=this.graphDiv,n=this.xaxis,i=this.yaxis,a=r.layout,o={},l=o[n._name+".range"]=n.range.slice(),c=o[i._name+".range"]=i.range.slice();o[n._name+".autorange"]=n.autorange,o[i._name+".autorange"]=i.autorange,s.call("_storeDirectGUIEdit",r.layout,r._fullLayout._preGUI,o);var u=a[n._name];u.range=l,u.autorange=n.autorange;var f=a[i._name];f.range=c,f.autorange=i.autorange,o.lastInputTime=this.camera.lastInputTime,r.emit("plotly_relayout",o)},S.cameraChanged=function(){var r=this.camera;this.glplot.setDataBox(this.calcDataBox());var n=this.computeTickMarks();(function(r,n){for(var i=0;i<2;++i){var a=r[i],o=n[i];if(a.length!==o.length)return!0;for(var s=0;s<a.length;++s)if(a[s].x!==o[s].x)return!0}return!1})(n,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=n,this.glplotOptions.dataBox=r.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},S.handleAnnotations=function(){for(var r=this.graphDiv,n=this.fullLayout.annotations,i=0;i<n.length;i++){var a=n[i];a.xref===this.xaxis._id&&a.yref===this.yaxis._id&&s.getComponentMethod("annotations","drawOne")(r,i)}},S.destroy=function(){if(this.glplot){var r=this.traces;r&&Object.keys(r).map(function(n){r[n].dispose(),delete r[n]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},S.plot=function(r,n,i){var a=this.glplot;this.updateRefs(i),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(r,n),this.updateFx(i.dragmode);var o=i.width,s=i.height;this.updateSize(this.canvas);var l=this.glplotOptions;l.merge(i),l.screenBox=[0,0,o,s];var c={_fullLayout:{_axisConstraintGroups:i._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:i._size}};x(c,this.xaxis),x(c,this.yaxis);var u,f,h=i._size,p=this.xaxis.domain,d=this.yaxis.domain;for(l.viewBox=[h.l+p[0]*h.w,h.b+d[0]*h.h,o-h.r-(1-p[1])*h.w,s-h.t-(1-d[1])*h.h],this.mouseContainer.style.width=h.w*(p[1]-p[0])+"px",this.mouseContainer.style.height=h.h*(d[1]-d[0])+"px",this.mouseContainer.height=h.h*(d[1]-d[0]),this.mouseContainer.style.left=h.l+p[0]*h.w+"px",this.mouseContainer.style.top=h.t+(1-d[1])*h.h+"px",f=0;f<2;++f)(u=this[A[f]])._length=l.viewBox[f+2]-l.viewBox[f],b(this.graphDiv,u),u.setScale();m(c),l.ticks=this.computeTickMarks(),l.dataBox=this.calcDataBox(),l.merge(i),a.update(l),this.glplot.draw()},S.calcDataBox=function(){var r=this.xaxis,n=this.yaxis,i=r.range,a=n.range,o=r.r2l,s=n.r2l;return[o(i[0]),s(a[0]),o(i[1]),s(a[1])]},S.setRanges=function(r){var n=this.xaxis,i=this.yaxis,a=n.l2r,o=i.l2r;n.range=[a(r[0]),a(r[2])],i.range=[o(r[1]),o(r[3])]},S.updateTraces=function(r,n){var i,a,o,s=Object.keys(this.traces);this.fullData=r;e:for(i=0;i<s.length;i++){var l=s[i],c=this.traces[l];for(a=0;a<r.length;a++)if((o=r[a]).uid===l&&o.type===c.type)continue e;c.dispose(),delete this.traces[l]}for(i=0;i<r.length;i++){o=r[i];var u=n[i],f=this.traces[o.uid];f?f.update(o,u):(f=o._module.plot(this,o,u),this.traces[o.uid]=f)}this.glplot.objects.sort(function(r,n){return r._trace.index-n._trace.index})},S.updateFx=function(r){T(r)||w(r)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===r?"move":"zoom"===r?"crosshair":null},S.emitPointAction=function(r,n){for(var i,a=r.trace.uid,o=r.pointIndex,s=0;s<this.fullData.length;s++)this.fullData[s].uid===a&&(i=this.fullData[s]);var l={x:r.traceCoord[0],y:r.traceCoord[1],curveNumber:i.index,pointNumber:o,data:i._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};c.appendArrayPointValue(l,i,o),this.graphDiv.emit(n,{points:[l]})},S.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var r=this.glplot,n=this.camera,i=n.mouseListener,a=1===this.lastButtonState&&0===i.buttons,o=this.fullLayout;this.lastButtonState=i.buttons,this.cameraChanged();var s,l=i.x*r.pixelRatio,u=this.canvas.height-r.pixelRatio*i.y;if(n.boxEnabled&&"zoom"===o.dragmode){this.selectBox.enabled=!0;for(var f=this.selectBox.selectBox=[Math.min(n.boxStart[0],n.boxEnd[0]),Math.min(n.boxStart[1],n.boxEnd[1]),Math.max(n.boxStart[0],n.boxEnd[0]),Math.max(n.boxStart[1],n.boxEnd[1])],h=0;h<2;h++)n.boxStart[h]===n.boxEnd[h]&&(f[h]=r.dataBox[h],f[h+2]=r.dataBox[h+2]);r.setDirty()}else if(!n.panning&&this.isMouseOver){this.selectBox.enabled=!1;var p=o._size,d=this.xaxis.domain,y=this.yaxis.domain,g=(s=r.pick(l/r.pixelRatio+p.l+d[0]*p.w,u/r.pixelRatio-(p.t+(1-y[1])*p.h)))&&s.object._trace.handlePick(s);if(g&&a&&this.emitPointAction(g,"plotly_click"),s&&"skip"!==s.object._trace.hoverinfo&&o.hovermode&&g&&(!this.lastPickResult||this.lastPickResult.traceUid!==g.trace.uid||this.lastPickResult.dataCoord[0]!==g.dataCoord[0]||this.lastPickResult.dataCoord[1]!==g.dataCoord[1])){this.lastPickResult={traceUid:g.trace?g.trace.uid:null,dataCoord:g.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),g.screenCoord=[((r.viewBox[2]-r.viewBox[0])*(s.dataCoord[0]-r.dataBox[0])/(r.dataBox[2]-r.dataBox[0])+r.viewBox[0])/r.pixelRatio,(this.canvas.height-(r.viewBox[3]-r.viewBox[1])*(s.dataCoord[1]-r.dataBox[1])/(r.dataBox[3]-r.dataBox[1])-r.viewBox[1])/r.pixelRatio],this.emitPointAction(g,"plotly_hover");var v=this.fullData[g.trace.index]||{},m=g.pointIndex,x=c.castHoverinfo(v,o,m);if(x&&"all"!==x){var b=x.split("+");-1===b.indexOf("x")&&(g.traceCoord[0]=void 0),-1===b.indexOf("y")&&(g.traceCoord[1]=void 0),-1===b.indexOf("z")&&(g.traceCoord[2]=void 0),-1===b.indexOf("text")&&(g.textLabel=void 0),-1===b.indexOf("name")&&(g.name=void 0)}c.loneHover({x:g.screenCoord[0],y:g.screenCoord[1],xLabel:this.hoverFormatter("xaxis",g.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",g.traceCoord[1]),zLabel:g.traceCoord[2],text:g.textLabel,name:g.name,color:c.castHoverOption(v,m,"bgcolor")||g.color,borderColor:c.castHoverOption(v,m,"bordercolor"),fontFamily:c.castHoverOption(v,m,"font.family"),fontSize:c.castHoverOption(v,m,"font.size"),fontColor:c.castHoverOption(v,m,"font.color"),nameLength:c.castHoverOption(v,m,"namelength"),textAlign:c.castHoverOption(v,m,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),r.draw()}},S.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),c.loneUnhover(this.svgContainer))},S.hoverFormatter=function(r,n){if(void 0!==n){var i=this[r];return l.tickText(i,i.c2l(n),"hover").text}}},12536:function(r,n,i){var a=i(67824).overrideAll,o=i(65460),s=i(98432),l=i(84888).op,c=i(3400),u=i(9616),f="gl3d",h="scene";n.name=f,n.attr=h,n.idRoot=h,n.idRegex=n.attrRegex=c.counterRegex("scene"),n.attributes=i(6636),n.layoutAttributes=i(346),n.baseLayoutAttrOverrides=a({hoverlabel:o.hoverlabel},"plot","nested"),n.supplyLayoutDefaults=i(5208),n.plot=function(r){for(var n=r._fullLayout,i=r._fullData,a=n._subplots[f],o=0;o<a.length;o++){var c=a[o],u=l(i,f,c),h=n[c],p=h.camera,d=h._scene;d||(d=new s({id:c,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:p},n),h._scene=d),d.viewInitial||(d.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),d.plot(u,n,r.layout)}},n.clean=function(r,n,i,a){for(var o=a._subplots[f]||[],s=0;s<o.length;s++){var l=o[s];!n[l]&&a[l]._scene&&(a[l]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+l).remove())}},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots[f],a=n._size,o=0;o<i.length;o++){var s=n[i[o]],l=s.domain,c=s._scene,h=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":h,x:a.l+a.w*l.x[0],y:a.t+a.h*(1-l.y[1]),width:a.w*(l.x[1]-l.x[0]),height:a.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"}),c.destroy()}},n.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var n=r.substr(5);return"1"===n&&(n=""),h+n}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots[f],a=0;a<i.length;a++)n[i[a]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(r){r.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(r,n,i){var a=i(76308),o=i(94724),s=i(92880).extendFlat,l=i(67824).overrideAll;r.exports=l({visible:o.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:a.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:o.color,categoryorder:o.categoryorder,categoryarray:o.categoryarray,title:{text:o.title.text,font:o.title.font},type:s({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:o.autorange,autorangeoptions:{minallowed:o.autorangeoptions.minallowed,maxallowed:o.autorangeoptions.maxallowed,clipmin:o.autorangeoptions.clipmin,clipmax:o.autorangeoptions.clipmax,include:o.autorangeoptions.include,editType:"plot"},rangemode:o.rangemode,minallowed:o.minallowed,maxallowed:o.maxallowed,range:s({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,mirror:o.mirror,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:o.tickfont,tickangle:o.tickangle,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:o.showline,linecolor:o.linecolor,linewidth:o.linewidth,showgrid:o.showgrid,gridcolor:s({},o.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:o.gridwidth,zeroline:o.zeroline,zerolinecolor:o.zerolinecolor,zerolinewidth:o.zerolinewidth,_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},"plot","from-root")},64380:function(r,n,i){var a=i(49760).mix,o=i(3400),s=i(31780),l=i(86140),c=i(14944),u=i(28336),f=["xaxis","yaxis","zaxis"];r.exports=function(r,n,i){var h,p;function d(r,n){return o.coerce(h,p,l,r,n)}for(var y=0;y<f.length;y++){var g=f[y];h=r[g]||{},(p=s.newContainer(n,g))._id=g[0]+i.scene,p._name=g,c(h,p,d,i),u(h,p,d,{font:i.font,letter:g[0],data:i.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),d("gridcolor",a(p.color,i.bgColor,72.72727272727273).toRgbString()),d("title.text",g[0]),p.setScale=o.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",p.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},44728:function(r,n,i){var a=i(43080),o=i(3400),s=["xaxis","yaxis","zaxis"];function l(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}l.prototype.merge=function(r,n){for(var i=0;i<3;++i){var l=n[s[i]];l.visible?(this.labels[i]=r._meta?o.templateString(l.title.text,r._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[i]=a(l.title.font.color)),l.title.font.family&&(this.labelFont[i]=l.title.font.family),l.title.font.size&&(this.labelSize[i]=l.title.font.size),l.title.font.weight&&(this.labelFontWeight[i]=l.title.font.weight),l.title.font.style&&(this.labelFontStyle[i]=l.title.font.style),l.title.font.variant&&(this.labelFontVariant[i]=l.title.font.variant)),"showline"in l&&(this.lineEnable[i]=l.showline),"linecolor"in l&&(this.lineColor[i]=a(l.linecolor)),"linewidth"in l&&(this.lineWidth[i]=l.linewidth),"showgrid"in l&&(this.gridEnable[i]=l.showgrid),"gridcolor"in l&&(this.gridColor[i]=a(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[i]=l.gridwidth),"log"===l.type?this.zeroEnable[i]=!1:"zeroline"in l&&(this.zeroEnable[i]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[i]=a(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[i]=l.zerolinewidth),"ticks"in l&&l.ticks?this.lineTickEnable[i]=!0:this.lineTickEnable[i]=!1,"ticklen"in l&&(this.lineTickLength[i]=this._defaultLineTickLength[i]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[i]=a(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[i]=l.tickwidth),"tickangle"in l&&(this.tickAngle[i]="auto"===l.tickangle?-3600:-(Math.PI*l.tickangle)/180),"showticklabels"in l&&(this.tickEnable[i]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[i]=a(l.tickfont.color)),l.tickfont.family&&(this.tickFont[i]=l.tickfont.family),l.tickfont.size&&(this.tickSize[i]=l.tickfont.size),l.tickfont.weight&&(this.tickFontWeight[i]=l.tickfont.weight),l.tickfont.style&&(this.tickFontStyle[i]=l.tickfont.style),l.tickfont.variant&&(this.tickFontVariant[i]=l.tickfont.variant)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[i]=!0,this.lineMirror[i]=!0):!0===l.mirror?(this.lineTickMirror[i]=!1,this.lineMirror[i]=!0):(this.lineTickMirror[i]=!1,this.lineMirror[i]=!1):this.lineMirror[i]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[i]=!0,this.backgroundColor[i]=a(l.backgroundcolor)):this.backgroundEnable[i]=!1):(this.tickEnable[i]=!1,this.labelEnable[i]=!1,this.lineEnable[i]=!1,this.lineTickEnable[i]=!1,this.gridEnable[i]=!1,this.zeroEnable[i]=!1,this.backgroundEnable[i]=!1)}},r.exports=function(r,n){var i=new l;return i.merge(r,n),i}},5208:function(r,n,i){var a=i(3400),o=i(76308),s=i(24040),l=i(168),c=i(64380),u=i(346),f=i(84888).op,h="gl3d";function p(r,n,i,a){for(var l=i("bgcolor"),u=o.combine(l,a.paper_bgcolor),p=["up","center","eye"],d=0;d<p.length;d++)i("camera."+p[d]+".x"),i("camera."+p[d]+".y"),i("camera."+p[d]+".z");i("camera.projection.type");var y=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),g=i("aspectmode",y?"manual":"auto");y||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===g&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var v=f(a.fullData,h,a.id);c(r,n,{font:a.font,scene:a.id,data:v,bgColor:u,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),s.getComponentMethod("annotations3d","handleDefaults")(r,n,a);var m=a.getDfltFromLayout("dragmode");if(!1!==m&&!m){if(m="orbit",r.camera&&r.camera.up){var x=r.camera.up.x,b=r.camera.up.y,_=r.camera.up.z;0!==_&&(x&&b&&_?_/Math.sqrt(x*x+b*b+_*_)>.999&&(m="turntable"):m="turntable")}else m="turntable"}i("dragmode",m),i("hovermode",a.getDfltFromLayout("hovermode"))}r.exports=function(r,n,i){var o=n._basePlotModules.length>1;l(r,n,i,{type:h,attributes:u,handleDefaults:p,fullLayout:n,font:n.font,fullData:i,getDfltFromLayout:function(n){if(!o)return a.validate(r[n],u[n])?r[n]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},346:function(r,n,i){var a=i(86140),o=i(86968).u,s=i(92880).extendFlat,l=i(3400).counterRegex;function c(r,n,i){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}r.exports={_arrayAttrRegexps:[l("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:s(c(0,0,1),{}),center:s(c(0,0,0),{}),eye:s(c(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:o({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:a,yaxis:a,zaxis:a,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(r,n,i){var a=i(43080),o=["xaxis","yaxis","zaxis"];function s(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}s.prototype.merge=function(r){for(var n=0;n<3;++n){var i=r[o[n]];i.visible?(this.enabled[n]=i.showspikes,this.colors[n]=a(i.spikecolor),this.drawSides[n]=i.spikesides,this.lineWidth[n]=i.spikethickness):(this.enabled[n]=!1,this.drawSides[n]=!1)}},r.exports=function(r){var n=new s;return n.merge(r),n}},87152:function(r,n,i){r.exports=function(r){for(var n=r.axesOptions,i=r.glplot.axesPixels,c=r.fullSceneLayout,u=[[],[],[]],f=0;f<3;++f){var h=c[s[f]];if(h._length=(i[f].hi-i[f].lo)*i[f].pixelsPerDataUnit/r.dataScale[f],Math.abs(h._length)===1/0||isNaN(h._length))u[f]=[];else{h._input_range=h.range.slice(),h.range[0]=i[f].lo/r.dataScale[f],h.range[1]=i[f].hi/r.dataScale[f],h._m=1/(r.dataScale[f]*i[f].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var p=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||o.constrain(h._length/40,4,9);a.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var y=a.calcTicks(h,{msUTC:!0}),g=0;g<y.length;++g)y[g].x=y[g].x*r.dataScale[f],"date"===h.type&&(y[g].text=y[g].text.replace(/\<br\>/g," "));u[f]=y,h.tickmode=p}}for(n.ticks=u,f=0;f<3;++f)for(l[f]=.5*(r.glplot.bounds[0][f]+r.glplot.bounds[1][f]),g=0;g<2;++g)n.bounds[g][f]=r.glplot.bounds[g][f];r.contourLevels=function(r){for(var n=[,,,],i=0;i<3;++i){for(var a=r[i],o=Array(a.length),s=0;s<a.length;++s)o[s]=a[s].x;n[i]=o}return n}(u)};var a=i(54460),o=i(3400),s=["xaxis","yaxis","zaxis"],l=[0,0,0]},94424:function(r){function n(r,n){var i,a,o=[0,0,0,0];for(i=0;i<4;++i)for(a=0;a<4;++a)o[a]+=r[4*i+a]*n[i];return o}r.exports=function(r,i){return n(r.projection,n(r.view,n(r.model,[i[0],i[1],i[2],1])))}},98432:function(r,n,i){var a,o,s=i(67792).gl_plot3d,l=s.createCamera,c=s.createScene,u=i(5408),f=i(89184),h=i(24040),p=i(3400),d=p.preserveDrawingBuffer(),y=i(54460),g=i(93024),v=i(43080),m=i(16576),x=i(94424),b=i(44728),_=i(9020),w=i(87152),T=i(19280).applyAutorangeOptions,A=!1;function k(r,n){var i=document.createElement("div"),a=r.container;this.graphDiv=r.graphDiv;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top=o.style.left="0px",o.style.width=o.style.height="100%",o.style["z-index"]=20,o.style["pointer-events"]="none",i.appendChild(o),this.svgContainer=o,i.id=r.id,i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",a.appendChild(i),this.fullLayout=n,this.id=r.id||"scene",this.fullSceneLayout=n[this.id],this.plotArgs=[[],{},{}],this.axesOptions=b(n,n[this.id]),this.spikeOptions=_(n[this.id]),this.container=i,this.staticMode=!!r.staticPlot,this.pixelRatio=this.pixelRatio||r.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=h.getComponentMethod("annotations3d","convert"),this.drawAnnotations=h.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var M=k.prototype;M.prepareOptions=function(){var r={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(o||(o=u({canvas:a=document.createElement("canvas"),preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw Error("error creating static canvas/context for image server");r.gl=o,r.canvas=a}return r};var S=!0;M.tryCreatePlot=function(){var r=this.prepareOptions(),n=!0;try{this.glplot=c(r)}catch(i){if(this.staticMode||!S||d)n=!1;else{p.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");try{d=r.glOptions.preserveDrawingBuffer=!0,this.glplot=c(r)}catch(i){d=r.glOptions.preserveDrawingBuffer=!1,n=!1}}}return S=!1,n},M.initializeGLCamera=function(){var r=this.fullSceneLayout.camera,n="orthographic"===r.projection.type;this.camera=l(this.container,{center:[r.center.x,r.center.y,r.center.z],eye:[r.eye.x,r.eye.y,r.eye.z],up:[r.up.x,r.up.y,r.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},M.initializeGLPlot=function(){var r=this;if(r.initializeGLCamera(),!r.tryCreatePlot())return m(r);r.traces={},r.make4thDimension();var n=r.graphDiv,i=n.layout,a=function(){var n={};return r.isCameraChanged(i)&&(n[r.id+".camera"]=r.getCamera()),r.isAspectChanged(i)&&(n[r.id+".aspectratio"]=r.glplot.getAspectratio(),"manual"!==i[r.id].aspectmode&&(r.fullSceneLayout.aspectmode=i[r.id].aspectmode=n[r.id+".aspectmode"]="manual")),n},o=function(r){if(!1!==r.fullSceneLayout.dragmode){var n=a();r.saveLayout(i),r.graphDiv.emit("plotly_relayout",n)}};return r.glplot.canvas&&(r.glplot.canvas.addEventListener("mouseup",function(){o(r)}),r.glplot.canvas.addEventListener("touchstart",function(){A=!0}),r.glplot.canvas.addEventListener("wheel",function(i){if(n._context._scrollZoom.gl3d){if(r.camera._ortho){var a=i.deltaX>i.deltaY?1.1:1/1.1,s=r.glplot.getAspectratio();r.glplot.setAspectratio({x:a*s.x,y:a*s.y,z:a*s.z})}o(r)}},!!f&&{passive:!1}),r.glplot.canvas.addEventListener("mousemove",function(){if(!1!==r.fullSceneLayout.dragmode&&0!==r.camera.mouseListener.buttons){var n=a();r.graphDiv.emit("plotly_relayouting",n)}}),r.staticMode||r.glplot.canvas.addEventListener("webglcontextlost",function(i){n&&n.emit&&n.emit("plotly_webglcontextlost",{event:i,layer:r.id})},!1)),r.glplot.oncontextloss=function(){r.recoverContext()},r.glplot.onrender=function(){r.render()},!0},M.render=function(){var r,n=this,i=n.graphDiv,a=n.svgContainer,o=n.container.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var s=i._fullLayout._invScaleX,l=i._fullLayout._invScaleY,c=o.width*s,u=o.height*l;a.setAttributeNS(null,"viewBox","0 0 "+c+" "+u),a.setAttributeNS(null,"width",c),a.setAttributeNS(null,"height",u),w(n),n.glplot.axes.update(n.axesOptions);for(var f=Object.keys(n.traces),h=null,d=n.glplot.selection,v=0;v<f.length;++v)"skip"!==(r=n.traces[f[v]]).data.hoverinfo&&r.handlePick(d)&&(h=r),r.setContourLevels&&r.setContourLevels();function m(r,i,a){var o=n.fullSceneLayout[r+"axis"];return"log"!==o.type&&(i=o.d2l(i)),y.hoverLabelText(o,i,a)}if(null!==h){var b=x(n.glplot.cameraParams,d.dataCoordinate);r=h.data;var _,T=i._fullData[r.index],k=d.index,M={xLabel:m("x",d.traceCoordinate[0],r.xhoverformat),yLabel:m("y",d.traceCoordinate[1],r.yhoverformat),zLabel:m("z",d.traceCoordinate[2],r.zhoverformat)},S=g.castHoverinfo(T,n.fullLayout,k),E=(S||"").split("+"),I=S&&"all"===S;T.hovertemplate||I||(-1===E.indexOf("x")&&(M.xLabel=void 0),-1===E.indexOf("y")&&(M.yLabel=void 0),-1===E.indexOf("z")&&(M.zLabel=void 0),-1===E.indexOf("text")&&(d.textLabel=void 0),-1===E.indexOf("name")&&(h.name=void 0));var L=[];"cone"===r.type||"streamtube"===r.type?(M.uLabel=m("x",d.traceCoordinate[3],r.uhoverformat),(I||-1!==E.indexOf("u"))&&L.push("u: "+M.uLabel),M.vLabel=m("y",d.traceCoordinate[4],r.vhoverformat),(I||-1!==E.indexOf("v"))&&L.push("v: "+M.vLabel),M.wLabel=m("z",d.traceCoordinate[5],r.whoverformat),(I||-1!==E.indexOf("w"))&&L.push("w: "+M.wLabel),M.normLabel=d.traceCoordinate[6].toPrecision(3),(I||-1!==E.indexOf("norm"))&&L.push("norm: "+M.normLabel),"streamtube"===r.type&&(M.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(I||-1!==E.indexOf("divergence"))&&L.push("divergence: "+M.divergenceLabel)),d.textLabel&&L.push(d.textLabel),_=L.join("<br>")):"isosurface"===r.type||"volume"===r.type?(M.valueLabel=y.hoverLabelText(n._mockAxis,n._mockAxis.d2l(d.traceCoordinate[3]),r.valuehoverformat),L.push("value: "+M.valueLabel),d.textLabel&&L.push(d.textLabel),_=L.join("<br>")):_=d.textLabel;var C={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:T._input,fullData:T,curveNumber:T.index,pointNumber:k};g.appendArrayPointValue(C,T,k),r._module.eventData&&(C=T._module.eventData(C,d,T,{},k));var O={points:[C]};if(n.fullSceneLayout.hovermode){var D=[];g.loneHover({trace:T,x:(.5+.5*b[0]/b[3])*c,y:(.5-.5*b[1]/b[3])*u,xLabel:M.xLabel,yLabel:M.yLabel,zLabel:M.zLabel,text:_,name:h.name,color:g.castHoverOption(T,k,"bgcolor")||h.color,borderColor:g.castHoverOption(T,k,"bordercolor"),fontFamily:g.castHoverOption(T,k,"font.family"),fontSize:g.castHoverOption(T,k,"font.size"),fontColor:g.castHoverOption(T,k,"font.color"),nameLength:g.castHoverOption(T,k,"namelength"),textAlign:g.castHoverOption(T,k,"align"),hovertemplate:p.castOption(T,k,"hovertemplate"),hovertemplateLabels:p.extendFlat({},C,M),eventData:[C]},{container:a,gd:i,inOut_bbox:D}),C.bbox=D[0]}d.distance<5&&(d.buttons||A)?i.emit("plotly_click",O):i.emit("plotly_hover",O),this.oldEventData=O}else g.loneUnhover(a),this.oldEventData&&i.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;n.drawAnnotations(n)},M.recoverContext=function(){var r=this;r.glplot.dispose();var n=function(){r.glplot.gl.isContextLost()?requestAnimationFrame(n):r.initializeGLPlot()?r.plot.apply(r,r.plotArgs):p.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(n)};var E=["xaxis","yaxis","zaxis"];M.plot=function(r,n,i){if(this.plotArgs=[r,n,i],!this.glplot.contextLost){var a,o,s,l,c,u,f,h=n[this.id],d=i[this.id];this.fullLayout=n,this.fullSceneLayout=h,this.axesOptions.merge(n,h),this.spikeOptions.merge(h),this.setViewport(h),this.updateFx(h.dragmode,h.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(v(h.bgcolor)),this.setConvert(u),r?Array.isArray(r)||(r=[r]):r=[];var y=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(l=0;l<r.length;++l)!0===(o=r[l]).visible&&0!==o._length&&function(r,n,i){for(var a=r.fullSceneLayout,o=0;o<3;o++){var s=E[o],l=s.charAt(0),c=a[s],u=n[l],f=n[l+"calendar"],h=n["_"+l+"length"];if(p.isArrayOrTypedArray(u))for(var d,y=0;y<(h||u.length);y++)if(p.isArrayOrTypedArray(u[y]))for(var g=0;g<u[y].length;++g)!isNaN(d=c.d2l(u[y][g],0,f))&&isFinite(d)&&(i[0][o]=Math.min(i[0][o],d),i[1][o]=Math.max(i[1][o],d));else!isNaN(d=c.d2l(u[y],0,f))&&isFinite(d)&&(i[0][o]=Math.min(i[0][o],d),i[1][o]=Math.max(i[1][o],d));else i[0][o]=Math.min(i[0][o],0),i[1][o]=Math.max(i[1][o],h-1)}}(this,o,y);!function(r,n){for(var i=r.fullSceneLayout,a=i.annotations||[],o=0;o<3;o++)for(var s=E[o],l=s.charAt(0),c=i[s],u=0;u<a.length;u++){var f=a[u];if(f.visible){var h=c.r2l(f[l]);!isNaN(h)&&isFinite(h)&&(n[0][o]=Math.min(n[0][o],h),n[1][o]=Math.max(n[1][o],h))}}}(this,y);var g=[1,1,1];for(c=0;c<3;++c)y[1][c]===y[0][c]?g[c]=1:g[c]=1/(y[1][c]-y[0][c]);for(this.dataScale=g,this.convertAnnotations(this),l=0;l<r.length;++l)!0===(o=r[l]).visible&&0!==o._length&&((s=this.traces[o.uid])?s.data.type===o.type?s.update(o):(s.dispose(),s=o._module.plot(this,o),this.traces[o.uid]=s):(s=o._module.plot(this,o),this.traces[o.uid]=s),s.name=o.name);var m=Object.keys(this.traces);e:for(l=0;l<m.length;++l){for(c=0;c<r.length;++c)if(r[c].uid===m[l]&&!0===r[c].visible&&0!==r[c]._length)continue e;(s=this.traces[m[l]]).dispose(),delete this.traces[m[l]]}this.glplot.objects.sort(function(r,n){return r._trace.data.index-n._trace.data.index});var x,b=[[0,0,0],[0,0,0]],_=[],w={};for(l=0;l<3;++l){if((f=(u=h[E[l]]).type)in w?(w[f].acc*=g[l],w[f].count+=1):w[f]={acc:g[l],count:1},u.autorange){b[0][l]=1/0,b[1][l]=-1/0;var A=this.glplot.objects,k=this.fullSceneLayout.annotations||[],M=u._name.charAt(0);for(c=0;c<A.length;c++){var S=A[c],I=S.bounds,L=S._trace.data._pad||0;"ErrorBars"===S.constructor.name&&u._lowerLogErrorBound?b[0][l]=Math.min(b[0][l],u._lowerLogErrorBound):b[0][l]=Math.min(b[0][l],I[0][l]/g[l]-L),b[1][l]=Math.max(b[1][l],I[1][l]/g[l]+L)}for(c=0;c<k.length;c++){var C=k[c];if(C.visible){var O=u.r2l(C[M]);b[0][l]=Math.min(b[0][l],O),b[1][l]=Math.max(b[1][l],O)}}if("rangemode"in u&&"tozero"===u.rangemode&&(b[0][l]=Math.min(b[0][l],0),b[1][l]=Math.max(b[1][l],0)),b[0][l]>b[1][l])b[0][l]=-1,b[1][l]=1;else{var D=b[1][l]-b[0][l];b[0][l]-=D/32,b[1][l]+=D/32}if(a=T(a=[b[0][l],b[1][l]],u),b[0][l]=a[0],b[1][l]=a[1],u.isReversed()){var P=b[0][l];b[0][l]=b[1][l],b[1][l]=P}}else a=u.range,b[0][l]=u.r2l(a[0]),b[1][l]=u.r2l(a[1]);b[0][l]===b[1][l]&&(b[0][l]-=1,b[1][l]+=1),_[l]=b[1][l]-b[0][l],u.range=[b[0][l],b[1][l]],u.limitRange(),this.glplot.setBounds(l,{min:u.range[0]*g[l],max:u.range[1]*g[l]})}var B=h.aspectmode;if("cube"===B)x=[1,1,1];else if("manual"===B){var R=h.aspectratio;x=[R.x,R.y,R.z]}else{if("auto"!==B&&"data"!==B)throw Error("scene.js aspectRatio was not one of the enumerated types");var z=[1,1,1];for(l=0;l<3;++l){var F=w[f=(u=h[E[l]]).type];z[l]=Math.pow(F.acc,1/F.count)/g[l]}x="data"===B||Math.max.apply(null,z)/Math.min.apply(null,z)<=4?z:[1,1,1]}h.aspectratio.x=d.aspectratio.x=x[0],h.aspectratio.y=d.aspectratio.y=x[1],h.aspectratio.z=d.aspectratio.z=x[2],this.glplot.setAspectratio(h.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:h.aspectratio.x,y:h.aspectratio.y,z:h.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=h.aspectmode);var N=h.domain||null,U=n._size||null;if(N&&U){var j=this.container.style;j.position="absolute",j.left=U.l+N.x[0]*U.w+"px",j.top=U.t+(1-N.y[1])*U.h+"px",j.width=U.w*(N.x[1]-N.x[0])+"px",j.height=U.h*(N.y[1]-N.y[0])+"px"}this.glplot.redraw()}},M.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},M.getCamera=function(){var r;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(r=this.camera).up[0],y:r.up[1],z:r.up[2]},center:{x:r.center[0],y:r.center[1],z:r.center[2]},eye:{x:r.eye[0],y:r.eye[1],z:r.eye[2]},projection:{type:!0===r._ortho?"orthographic":"perspective"}}},M.setViewport=function(r){var n=r.camera;this.camera.lookAt.apply(this,[[n.eye.x,n.eye.y,n.eye.z],[n.center.x,n.center.y,n.center.z],[n.up.x,n.up.y,n.up.z]]),this.glplot.setAspectratio(r.aspectratio),"orthographic"===n.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},M.isCameraChanged=function(r){var n=this.getCamera(),i=p.nestedProperty(r,this.id+".camera").get(),a=!1;if(void 0===i)a=!0;else{for(var o=0;o<3;o++)for(var s=0;s<3;s++)if(!function(r,n,i,a){var o=["up","center","eye"],s=["x","y","z"];return n[o[i]]&&r[o[i]][s[a]]===n[o[i]][s[a]]}(n,i,o,s)){a=!0;break}(!i.projection||n.projection&&n.projection.type!==i.projection.type)&&(a=!0)}return a},M.isAspectChanged=function(r){var n=this.glplot.getAspectratio(),i=p.nestedProperty(r,this.id+".aspectratio").get();return void 0===i||i.x!==n.x||i.y!==n.y||i.z!==n.z},M.saveLayout=function(r){var n,i,a,o,s,l,c=this.fullLayout,u=this.isCameraChanged(r),f=this.isAspectChanged(r),d=u||f;if(d){var y={};u&&(n=this.getCamera(),a=(i=p.nestedProperty(r,this.id+".camera")).get(),y[this.id+".camera"]=a),f&&(o=this.glplot.getAspectratio(),l=(s=p.nestedProperty(r,this.id+".aspectratio")).get(),y[this.id+".aspectratio"]=l),h.call("_storeDirectGUIEdit",r,c._preGUI,y),u&&(i.set(n),p.nestedProperty(c,this.id+".camera").set(n)),f&&(s.set(o),p.nestedProperty(c,this.id+".aspectratio").set(o),this.glplot.redraw())}return d},M.updateFx=function(r,n){var i=this.camera;if(i){if("orbit"===r)i.mode="orbit",i.keyBindingMode="rotate";else if("turntable"===r){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var a=this.graphDiv,o=a._fullLayout,s=this.fullSceneLayout.camera,l=s.up.x,c=s.up.y,u=s.up.z;if(u/Math.sqrt(l*l+c*c+u*u)<.999){var f=this.id+".camera.up",d={x:0,y:0,z:1},y={};y[f]=d;var g=a.layout;h.call("_storeDirectGUIEdit",g,o._preGUI,y),s.up=d,p.nestedProperty(g,f).set(d)}}else i.keyBindingMode=r}this.fullSceneLayout.hovermode=n},M.toImage=function(r){r||(r="png"),this.staticMode&&this.container.appendChild(a),this.glplot.redraw();var n=this.glplot.gl,i=n.drawingBufferWidth,o=n.drawingBufferHeight;n.bindFramebuffer(n.FRAMEBUFFER,null);var s=new Uint8Array(i*o*4);n.readPixels(0,0,i,o,n.RGBA,n.UNSIGNED_BYTE,s),function(r,n,i){for(var a=0,o=i-1;a<o;++a,--o)for(var s=0;s<n;++s)for(var l=0;l<4;++l){var c=4*(n*a+s)+l,u=4*(n*o+s)+l,f=r[c];r[c]=r[u],r[u]=f}}(s,i,o),function(r,n,i){for(var a=0;a<i;++a)for(var o=0;o<n;++o){var s=4*(n*a+o),l=r[s+3];if(l>0)for(var c=255/l,u=0;u<3;++u)r[s+u]=Math.min(c*r[s+u],255)}}(s,i,o);var l=document.createElement("canvas");l.width=i,l.height=o;var c,u=l.getContext("2d",{willReadFrequently:!0}),f=u.createImageData(i,o);switch(f.data.set(s),u.putImageData(f,0,0),r){case"jpeg":c=l.toDataURL("image/jpeg");break;case"webp":c=l.toDataURL("image/webp");break;default:c=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(a),c},M.setConvert=function(){for(var r=0;r<3;r++){var n=this.fullSceneLayout[E[r]];y.setConvert(n,this.fullLayout),n.setScale=p.noop}},M.make4thDimension=function(){var r=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},y.setConvert(this._mockAxis,r)},r.exports=k},52094:function(r){r.exports=function(r,n,i,a){a=a||r.length;for(var o=Array(a),s=0;s<a;s++)o[s]=[r[s],n[s],i[s]];return o}},64859:function(r,n,i){var a=i(25376),o=i(85656),s=i(22548),l=i(92872),c=i(34200),u=i(66741),f=i(92880).extendFlat,h=a({editType:"calc"});h.family.dflt='"Open Sans", verdana, arial, sans-serif',h.size.dflt=12,h.color.dflt=s.defaultLine,r.exports={font:h,title:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:f(u({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:s.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:s.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:s.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:l.newshape,activeshape:l.activeshape,newselection:c.newselection,activeselection:c.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:f({},o.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"})}}},47552:function(r,n,i){var a=i(95376),o="1.13.4",s='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['© <a target="_blank" href="https://carto.com/">Carto</a>',s].join(" "),c='Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>',u={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:s,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:c,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:c,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>',tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},f=a(u);r.exports={requiredVersion:o,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:u,styleValuesNonMapbox:f,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+o+"."].join("\n"),noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",f.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},89032:function(r,n,i){var a=i(3400);r.exports=function(r,n){var i=r.split(" "),o=i[0],s=i[1],l=a.isArrayOrTypedArray(n)?a.mean(n):n,c=.5+l/100,u=1.5+l/100,f=["",""],h=[0,0];switch(o){case"top":f[0]="top",h[1]=-u;break;case"bottom":f[0]="bottom",h[1]=u}switch(s){case"left":f[1]="right",h[0]=-c;break;case"right":f[1]="left",h[0]=c}return{anchor:f[0]&&f[1]?f.join("-"):f[0]?f[0]:f[1]?f[1]:"center",offset:h}}},33688:function(r,n,i){var a=i(3480),o=i(3400),s=o.strTranslate,l=o.strScale,c=i(84888).KY,u=i(9616),f=i(33428),h=i(43616),p=i(72736),d=i(14440),y="mapbox",g=n.constants=i(47552);function v(r){return"string"==typeof r&&(-1!==g.styleValuesMapbox.indexOf(r)||0===r.indexOf("mapbox://")||0===r.indexOf("stamen"))}n.name=y,n.attr="subplot",n.idRoot=y,n.idRegex=n.attrRegex=o.counterRegex(y),n.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},n.layoutAttributes=i(5232),n.supplyLayoutDefaults=i(5976),n.plot=function(r){var n=r._fullLayout,i=r.calcdata,s=n._subplots[y];if(a.version!==g.requiredVersion)throw Error(g.wrongVersionErrorMsg);var l=function(r,n){var i=r._fullLayout;if(""===r._context.mapboxAccessToken)return"";for(var a=[],s=[],l=!1,c=!1,u=0;u<n.length;u++){var f=i[n[u]],h=f.accesstoken;v(f.style)&&(h?o.pushUnique(a,h):(v(f._input.style)&&(o.error("Uses Mapbox map style, but did not set an access token."),l=!0),c=!0)),h&&o.pushUnique(s,h)}if(c){var p=l?g.noAccessTokenErrorMsg:g.missingStyleErrorMsg;throw o.error(p),Error(p)}return a.length?(a.length>1&&o.warn(g.multipleTokensErrorMsg),a[0]):(s.length&&o.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(r,s);a.accessToken=l;for(var u=0;u<s.length;u++){var f=s[u],h=c(i,y,f),p=n[f],m=p._subplot;m||(m=new d(r,f),n[f]._subplot=m),m.viewInitial||(m.viewInitial={center:o.extendFlat({},p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),m.plot(h,n,r._promises)}},n.clean=function(r,n,i,a){for(var o=a._subplots[y]||[],s=0;s<o.length;s++){var l=o[s];!n[l]&&a[l]._subplot&&a[l]._subplot.destroy()}},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots[y],a=n._size,o=0;o<i.length;o++){var c=n[i[o]],d=c.domain,v=c._subplot.toImage("png");n._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":v,x:a.l+a.w*d.x[0],y:a.t+a.h*(1-d.y[1]),width:a.w*(d.x[1]-d.x[0]),height:a.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});var m=f.select(c._subplot.div);if(null!==m.select(".mapboxgl-ctrl-logo").node().offsetParent){var x=n._glimages.append("g");x.attr("transform",s(a.l+a.w*d.x[0]+10,a.t+a.h*(1-d.y[0])-31)),x.append("path").attr("d",g.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),x.append("path").attr("d",g.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),x.append("path").attr("d",g.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),x.append("polygon").attr("points",g.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var b=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),_=n._glimages.append("g"),w=_.append("text");w.text(b).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":b});var T=h.bBox(w.node()),A=a.w*(d.x[1]-d.x[0]);if(T.width>A/2){var k=b.split("|").join("<br>");w.text(k).attr("data-unformatted",k).call(p.convertToTspans,r),T=h.bBox(w.node())}w.attr("transform",s(-3,8-T.height)),_.insert("rect",".static-attribution").attr({x:-T.width-6,y:-T.height-3,width:T.width+6,height:T.height+3,fill:"rgba(255, 255, 255, 0.75)"});var M=1;T.width+6>A&&(M=A/(T.width+6));var S=[a.l+a.w*d.x[1],a.t+a.h*(1-d.y[0])];_.attr("transform",s(S[0],S[1])+l(M))}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots[y],a=0;a<i.length;a++)n[i[a]]._subplot.updateFx(n)}},22360:function(r,n,i){var a=i(3400),o=i(72736).sanitizeHTML,s=i(89032),l=i(47552);function c(r,n){this.subplot=r,this.uid=r.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=l.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var u=c.prototype;function f(r){if(!r.visible)return!1;var n=r.source;if(Array.isArray(n)&&n.length>0){for(var i=0;i<n.length;i++)if("string"!=typeof n[i]||0===n[i].length)return!1;return!0}return a.isPlainObject(n)||"string"==typeof n&&n.length>0}function h(r){var n={},i={};switch(r.type){case"circle":a.extendFlat(i,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":a.extendFlat(i,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":a.extendFlat(i,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var o=r.symbol,l=s(o.textposition,o.iconsize);a.extendFlat(n,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":o.placement}),a.extendFlat(i,{"icon-color":r.color,"text-color":o.textfont.color,"text-opacity":r.opacity});break;case"raster":a.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:n,paint:i}}u.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=f(r)},u.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},u.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},u.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},u.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},u.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());null!==n&&this.subplot.map.moveLayer(this.idLayer,n)},u.updateSource=function(r){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,f(r)){var i,a,s,l,c=(a=r.sourcetype,s=r.source,l={type:a},"geojson"===a?i="data":"vector"===a?i="string"==typeof s?"url":"tiles":"raster"===a?(i="tiles",l.tileSize=256):"image"===a&&(i="url",l.coordinates=r.coordinates),l[i]=s,r.sourceattribution&&(l.attribution=o(r.sourceattribution)),l);n.addSource(this.idSource,c)}},u.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var n=this.subplot.getMapLayers(),i=0;i<n.length;i++){var a=n[i].id;if("string"==typeof a&&0===a.indexOf(l.traceLayerPrefix)){r=a;break}}return r},u.updateLayer=function(r){var n=this.subplot,i=h(r),a=this.lookupBelow(),o=this.findFollowingMapboxLayerId(a);this.removeLayer(),f(r)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:i.layout,paint:i.paint},o),this.layerType=r.type,this.below=a},u.updateStyle=function(r){if(f(r)){var n=h(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},u.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},u.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},r.exports=function(r,n,i){var a=new c(r,n);return a.update(i),a}},5232:function(r,n,i){var a=i(3400),o=i(76308).defaultLine,s=i(86968).u,l=i(25376),c=i(52904).textposition,u=i(67824).overrideAll,f=i(31780).templatedArray,h=i(47552),p=l({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});p.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(r.exports=u({_arrayAttrRegexps:[a.counterRegex("mapbox",".layers",!0)],domain:s({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:h.styleValuesMapbox.concat(h.styleValuesNonMapbox),dflt:h.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:f("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:o},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:o}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:p,textposition:a.extendFlat({},c,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(r,n,i){var a=i(3400),o=i(168),s=i(51272),l=i(5232);function c(r,n,i,a){i("accesstoken",a.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var o=i("bounds.west"),l=i("bounds.east"),c=i("bounds.south"),f=i("bounds.north");void 0!==o&&void 0!==l&&void 0!==c&&void 0!==f||delete n.bounds,s(r,n,{name:"layers",handleItemDefaults:u}),n._input=r}function u(r,n){function i(i,o){return a.coerce(r,n,l.layers,i,o)}if(i("visible")){var o,s=i("sourcetype"),c="raster"===s||"image"===s;i("source"),i("sourceattribution"),"vector"===s&&i("sourcelayer"),"image"===s&&i("coordinates"),c&&(o="raster");var u=i("type",o);c&&"raster"!==u&&(u=n.type="raster",a.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===u&&i("circle.radius"),"line"===u&&(i("line.width"),i("line.dash")),"fill"===u&&i("fill.outlinecolor"),"symbol"===u&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),a.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}r.exports=function(r,n,i){o(r,n,i,{type:"mapbox",attributes:l,handleDefaults:c,partition:"y",accessToken:n._mapboxAccessToken})}},14440:function(r,n,i){var a=i(3480),o=i(3400),s=i(27144),l=i(24040),c=i(54460),u=i(86476),f=i(93024),h=i(72760),p=h.drawMode,d=h.selectMode,y=i(22676).prepSelect,g=i(22676).clearOutline,v=i(22676).clearSelectionsCache,m=i(22676).selectOnClick,x=i(47552),b=i(22360);function _(r,n){this.id=n,this.gd=r;var i=r._fullLayout,a=r._context;this.container=i._glcontainer.node(),this.isStatic=a.staticPlot,this.uid=i._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(i),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=_.prototype;w.plot=function(r,n,i){var a,o=this,s=n[o.id];o.map&&s.accesstoken!==o.accessToken&&(o.map.remove(),o.map=null,o.styleObj=null,o.traceHash={},o.layerList=[]),a=new Promise(o.map?function(i,a){o.updateMap(r,n,i,a)}:function(i,a){o.createMap(r,n,i,a)}),i.push(a)},w.createMap=function(r,n,i,o){var l=this,c=n[l.id],u=l.styleObj=A(c.style,n);l.accessToken=c.accesstoken;var f=c.bounds,h=f?[[f.west,f.south],[f.east,f.north]]:null,p=l.map=new a.Map({container:l.div,style:u.style,center:M(c.center),zoom:c.zoom,bearing:c.bearing,pitch:c.pitch,maxBounds:h,interactive:!l.isStatic,preserveDrawingBuffer:l.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new a.AttributionControl({compact:!0}));p._canvas.style.left="0px",p._canvas.style.top="0px",l.rejectOnError(o),l.isStatic||l.initFx(r,n);var d=[];d.push(new Promise(function(r){p.once("load",r)})),Promise.all(d=d.concat(s.fetchTraceGeoData(r))).then(function(){l.fillBelowLookup(r,n),l.updateData(r),l.updateLayout(n),l.resolveOnRender(i)}).catch(o)},w.updateMap=function(r,n,i,a){var o=this,l=o.map,c=n[this.id];o.rejectOnError(a);var u=[],f=A(c.style,n);JSON.stringify(o.styleObj)!==JSON.stringify(f)&&(o.styleObj=f,l.setStyle(f.style),o.traceHash={},u.push(new Promise(function(r){l.once("styledata",r)}))),Promise.all(u=u.concat(s.fetchTraceGeoData(r))).then(function(){o.fillBelowLookup(r,n),o.updateData(r),o.updateLayout(n),o.resolveOnRender(i)}).catch(a)},w.fillBelowLookup=function(r,n){var i,a,o=n[this.id].layers,s=this.belowLookup={},l=!1;for(i=0;i<r.length;i++){var c=r[i][0].trace,u=c._module;"string"==typeof c.below?a=c.below:u.getBelow&&(a=u.getBelow(c,this)),""===a&&(l=!0),s["trace-"+c.uid]=a||""}for(i=0;i<o.length;i++){var f=o[i];a="string"==typeof f.below?f.below:l?"traces":"",s["layout-"+i]=a}var h,p,d={};for(h in s)d[a=s[h]]?d[a].push(h):d[a]=[h];for(a in d){var y=d[a];if(y.length>1)for(i=0;i<y.length;i++)0===(h=y[i]).indexOf("trace-")?(p=h.split("trace-")[1],this.traceHash[p]&&(this.traceHash[p].below=null)):0===h.indexOf("layout-")&&(p=h.split("layout-")[1],this.layerList[p]&&(this.layerList[p].below=null))}};var T={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function A(r,n){var i={};if(o.isPlainObject(r))i.id=r.id,i.style=r;else if("string"==typeof r){if(i.id=r,-1!==x.styleValuesMapbox.indexOf(r))i.style=k(r);else if(x.stylesNonMapbox[r]){i.style=x.stylesNonMapbox[r];var a=i.style.sources["plotly-"+r],s=a?a.tiles:void 0;s&&s[0]&&"?api_key="===s[0].slice(-9)&&(s[0]+=n._mapboxAccessToken)}else i.style=r}else i.id=x.styleValueDflt,i.style=k(x.styleValueDflt);return i.transition={duration:0,delay:0},i}function k(r){return x.styleUrlPrefix+r+"-"+x.styleUrlSuffix}function M(r){return[r.lon,r.lat]}w.updateData=function(r){var n,i,a,o,s=this.traceHash,l=r.slice().sort(function(r,n){return T[r[0].trace.type]-T[n[0].trace.type]});for(a=0;a<l.length;a++){var c=l[a],u=!1;(n=s[(i=c[0].trace).uid])&&(n.type===i.type?(n.update(c),u=!0):n.dispose()),!u&&i._module&&(s[i.uid]=i._module.plot(this,c))}var f=Object.keys(s);e:for(a=0;a<f.length;a++){var h=f[a];for(o=0;o<r.length;o++)if(h===(i=r[o][0].trace).uid)continue e;(n=s[h]).dispose(),delete s[h]}},w.updateLayout=function(r){var n=this.map,i=r[this.id];this.dragging||this.wheeling||(n.setCenter(M(i.center)),n.setZoom(i.zoom),n.setBearing(i.bearing),n.setPitch(i.pitch)),this.updateLayers(r),this.updateFramework(r),this.updateFx(r),this.map.resize(),this.gd._context._scrollZoom.mapbox?n.scrollZoom.enable():n.scrollZoom.disable()},w.resolveOnRender=function(r){var n=this.map;n.on("render",function i(){n.loaded()&&(n.off("render",i),setTimeout(r,10))})},w.rejectOnError=function(r){var n=this.map;function i(){r(Error(x.mapOnErrorMsg))}n.once("error",i),n.once("style.error",i),n.once("source.error",i),n.once("tile.error",i),n.once("layer.error",i)},w.createFramework=function(r){var n=this,i=n.div=document.createElement("div");i.id=n.uid,i.style.position="absolute",n.container.appendChild(i),n.xaxis={_id:"x",c2p:function(r){return n.project(r).x}},n.yaxis={_id:"y",c2p:function(r){return n.project(r).y}},n.updateFramework(r),n.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(n.mockAxis,r)},w.initFx=function(r,n){var i=this,a=i.gd,o=i.map;function s(){f.loneUnhover(n._hoverlayer)}function c(){var r=i.getView();a.emit("plotly_relayouting",i.getViewEditsWithDerived(r))}o.on("moveend",function(r){if(i.map){var n=a._fullLayout;if(r.originalEvent||i.wheeling){var o=n[i.id];l.call("_storeDirectGUIEdit",a.layout,n._preGUI,i.getViewEdits(o));var s=i.getView();o._input.center=o.center=s.center,o._input.zoom=o.zoom=s.zoom,o._input.bearing=o.bearing=s.bearing,o._input.pitch=o.pitch=s.pitch,a.emit("plotly_relayout",i.getViewEditsWithDerived(s))}r.originalEvent&&"mouseup"===r.originalEvent.type?i.dragging=!1:i.wheeling&&(i.wheeling=!1),n._rehover&&n._rehover()}}),o.on("wheel",function(){i.wheeling=!0}),o.on("mousemove",function(r){var n=i.div.getBoundingClientRect(),s=[r.originalEvent.offsetX,r.originalEvent.offsetY];r.target.getBoundingClientRect=function(){return n},i.xaxis.p2c=function(){return o.unproject(s).lng},i.yaxis.p2c=function(){return o.unproject(s).lat},a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===i.id&&a._fullLayout[i.id]&&f.hover(a,r,i.id)},f.hover(a,r,i.id),a._fullLayout._hoversubplot=i.id}),o.on("dragstart",function(){i.dragging=!0,s()}),o.on("zoomstart",s),o.on("mouseout",function(){a._fullLayout._hoversubplot=null}),o.on("drag",c),o.on("zoom",c),o.on("dblclick",function(){var r=a._fullLayout[i.id];l.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,i.getViewEdits(r));var n=i.viewInitial;o.setCenter(M(n.center)),o.setZoom(n.zoom),o.setBearing(n.bearing),o.setPitch(n.pitch);var s=i.getView();r._input.center=r.center=s.center,r._input.zoom=r.zoom=s.zoom,r._input.bearing=r.bearing=s.bearing,r._input.pitch=r.pitch=s.pitch,a.emit("plotly_doubleclick",null),a.emit("plotly_relayout",i.getViewEditsWithDerived(s))}),i.clearOutline=function(){v(i.dragOptions),g(i.dragOptions.gd)},i.onClickInPanFn=function(r){return function(n){var o=a._fullLayout.clickmode;o.indexOf("select")>-1&&m(n.originalEvent,a,[i.xaxis],[i.yaxis],i.id,r),o.indexOf("event")>-1&&f.click(a,n.originalEvent)}}},w.updateFx=function(r){var n=this,i=n.map,a=n.gd;if(!n.isStatic){var s,l=r.dragmode;s=function(r,i){i.isRect?(r.range={})[n.id]=[f([i.xmin,i.ymin]),f([i.xmax,i.ymax])]:(r.lassoPoints={})[n.id]=i.map(f)};var c=n.dragOptions;n.dragOptions=o.extendDeep(c||{},{dragmode:r.dragmode,element:n.div,gd:a,plotinfo:{id:n.id,domain:r[n.id].domain,xaxis:n.xaxis,yaxis:n.yaxis,fillRangeItems:s},xaxes:[n.xaxis],yaxes:[n.yaxis],subplot:n.id}),i.off("click",n.onClickInPanHandler),d(l)||p(l)?(i.dragPan.disable(),i.on("zoomstart",n.clearOutline),n.dragOptions.prepFn=function(r,i,a){y(r,i,a,n.dragOptions,l)},u.init(n.dragOptions)):(i.dragPan.enable(),i.off("zoomstart",n.clearOutline),n.div.onmousedown=null,n.div.ontouchstart=null,n.div.removeEventListener("touchstart",n.div._ontouchstart),n.onClickInPanHandler=n.onClickInPanFn(n.dragOptions),i.on("click",n.onClickInPanHandler))}function f(r){var i=n.map.unproject(r);return[i.lng,i.lat]}},w.updateFramework=function(r){var n=r[this.id].domain,i=r._size,a=this.div.style;a.width=i.w*(n.x[1]-n.x[0])+"px",a.height=i.h*(n.y[1]-n.y[0])+"px",a.left=i.l+n.x[0]*i.w+"px",a.top=i.t+(1-n.y[1])*i.h+"px",this.xaxis._offset=i.l+n.x[0]*i.w,this.xaxis._length=i.w*(n.x[1]-n.x[0]),this.yaxis._offset=i.t+(1-n.y[1])*i.h,this.yaxis._length=i.h*(n.y[1]-n.y[0])},w.updateLayers=function(r){var n,i=r[this.id].layers,a=this.layerList;if(i.length!==a.length){for(n=0;n<a.length;n++)a[n].dispose();for(a=this.layerList=[],n=0;n<i.length;n++)a.push(b(this,n,i[n]))}else for(n=0;n<i.length;n++)a[n].update(i[n])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(r,n,i){for(var a in i)this.map[n](r,a,i[a])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(r,n){var i=this.map;if("string"==typeof n){if(""===n)return void i.addLayer(r,n);for(var a=this.getMapLayers(),s=0;s<a.length;s++)if(n===a[s].id)return void i.addLayer(r,n);o.warn(["Trying to add layer with *below* value",n,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}i.addLayer(r)},w.project=function(r){return this.map.project(new a.LngLat(r[0],r[1]))},w.getView=function(){var r=this.map,n=r.getCenter(),i={lon:n.lng,lat:n.lat},a=r.getCanvas(),o=parseInt(a.style.width),s=parseInt(a.style.height);return{center:i,zoom:r.getZoom(),bearing:r.getBearing(),pitch:r.getPitch(),_derived:{coordinates:[r.unproject([0,0]).toArray(),r.unproject([o,0]).toArray(),r.unproject([o,s]).toArray(),r.unproject([0,s]).toArray()]}}},w.getViewEdits=function(r){for(var n=this.id,i=["center","zoom","bearing","pitch"],a={},o=0;o<i.length;o++){var s=i[o];a[n+"."+s]=r[s]}return a},w.getViewEditsWithDerived=function(r){var n=this.id,i=this.getViewEdits(r);return i[n+"._derived"]=r._derived,i},r.exports=_},66741:function(r){r.exports=function(r){var n=r.editType;return{t:{valType:"number",dflt:0,editType:n},r:{valType:"number",dflt:0,editType:n},b:{valType:"number",dflt:0,editType:n},l:{valType:"number",dflt:0,editType:n},editType:n}}},7316:function(r,n,i){var a=i(33428),o=i(94336).m_,s=i(57624).SO,l=i(38248),c=i(83160),u=i(24040),f=i(73060),h=i(31780),p=i(3400),d=i(76308),y=i(39032).BADNUM,g=i(79811),v=i(1936).clearOutline,m=i(55308),x=i(85656),b=i(16672),_=i(84888)._M,w=p.relinkPrivateKeys,T=p._,A=r.exports={};p.extendFlat(A,u),A.attributes=i(45464),A.attributes.type.values=A.allTypes,A.fontAttrs=i(25376),A.layoutAttributes=i(64859);var k=A.transformsRegistry,M=i(62460);A.executeAPICommand=M.executeAPICommand,A.computeAPICommandBindings=M.computeAPICommandBindings,A.manageCommandObserver=M.manageCommandObserver,A.hasSimpleAPICommandBindings=M.hasSimpleAPICommandBindings,A.redrawText=function(r){return r=p.getGraphDiv(r),new Promise(function(n){setTimeout(function(){r._fullLayout&&(u.getComponentMethod("annotations","draw")(r),u.getComponentMethod("legend","draw")(r),u.getComponentMethod("colorbar","draw")(r),n(A.previousPromises(r)))},300)})},A.resize=function(r){r=p.getGraphDiv(r);var n,i=new Promise(function(i,a){r&&!p.isHidden(r)||a(Error("Resize must be passed a displayed plot div element.")),r._redrawTimer&&clearTimeout(r._redrawTimer),r._resolveResize&&(n=r._resolveResize),r._resolveResize=i,r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||p.isHidden(r))i(r);else{delete r.layout.width,delete r.layout.height;var n=r.changed;r.autoplay=!0,u.call("relayout",r,{autosize:!0}).then(function(){r.changed=n,r._resolveResize===i&&(delete r._resolveResize,i(r))})}},100)});return n&&n(i),i},A.previousPromises=function(r){if((r._promises||[]).length)return Promise.all(r._promises).then(function(){r._promises=[]})},A.addLinks=function(r){if(r._context.showLink||r._context.showSources){var n=r._fullLayout,i=p.ensureSingle(n._paper,"text","js-plot-link-container",function(r){r.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:d.defaultLine,"pointer-events":"all"}).each(function(){var r=a.select(this);r.append("tspan").classed("js-link-to-tool",!0),r.append("tspan").classed("js-link-spacer",!0),r.append("tspan").classed("js-sourcelinks",!0)})}),o=i.node(),s={y:n._paper.attr("height")-9};document.body.contains(o)&&o.getComputedTextLength()>=n.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=n._paper.attr("width")-7),i.attr(s);var l=i.select(".js-link-to-tool"),c=i.select(".js-link-spacer"),u=i.select(".js-sourcelinks");r._context.showSources&&r._context.showSources(r),r._context.showLink&&function(r,n){n.text("");var i=n.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(r._context.linkText+" "+String.fromCharCode(187));if(r._context.sendData)i.on("click",function(){A.sendDataToCloud(r)});else{var a=window.location.pathname.split("/"),o=window.location.search;i.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+o})}}(r,l),c.text(l.text()&&u.text()?" - ":"")}},A.sendDataToCloud=function(r){var n=(window.PLOTLYENV||{}).BASE_URL||r._context.plotlyServerURL;if(n){r.emit("plotly_beforeexport");var i=a.select(r).append("div").attr("id","hiddenform").style("display","none"),o=i.append("form").attr({action:n+"/external",method:"post",target:"_blank"});return o.append("input").attr({type:"text",name:"data"}).node().value=A.graphJson(r,!1,"keepdata"),o.node().submit(),i.remove(),r.emit("plotly_afterexport"),!1}};var S=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],E=["year","month","dayMonth","dayMonthYear"];function I(r,n){var i=r._context.locale;i||(i="en-US");var a=!1,o={};function s(r){for(var i=!0,s=0;s<n.length;s++){var l=n[s];o[l]||(r[l]?o[l]=r[l]:i=!1)}i&&(a=!0)}for(var l=0;l<2;l++){for(var c=r._context.locales,f=0;f<2;f++){var h=(c[i]||{}).format;if(h&&(s(h),a))break;c=u.localeRegistry}var p=i.split("-")[0];if(a||p===i)break;i=p}return a||s(u.localeRegistry.en.format),o}function L(r){var n=r.transforms;if(Array.isArray(n)&&n.length)for(var i=0;i<n.length;i++){var a=n[i],o=a._module||k[a.type];if(o&&o.makesData)return!0}return!1}function C(r){return"string"==typeof r&&"px"===r.substr(r.length-2)&&parseFloat(r)}function O(r){var n=r.margin;if(!r._size){var i=r._size={l:Math.round(n.l),r:Math.round(n.r),t:Math.round(n.t),b:Math.round(n.b),p:Math.round(n.pad)};i.w=Math.round(r.width)-i.l-i.r,i.h=Math.round(r.height)-i.t-i.b}r._pushmargin||(r._pushmargin={}),r._pushmarginIds||(r._pushmarginIds={}),r._reservedMargin||(r._reservedMargin={})}A.supplyDefaults=function(r,n){var i=n&&n.skipUpdateCalc,a=r._fullLayout||{};if(a._skipDefaults)delete a._skipDefaults;else{var l,c=r._fullLayout={},f=r.layout||{},h=r._fullData||[],d=r._fullData=[],y=r.data||[],g=r.calcdata||[],m=r._context||{};r._transitionData||A.createTransitionData(r),c._dfltTitle={plot:T(r,"Click to enter Plot title"),subtitle:T(r,"Click to enter Plot subtitle"),x:T(r,"Click to enter X axis title"),y:T(r,"Click to enter Y axis title"),colorbar:T(r,"Click to enter Colorscale title"),annotation:T(r,"new text")},c._traceWord=T(r,"trace");var x=I(r,S);if(c._mapboxAccessToken=m.mapboxAccessToken,a._initialAutoSizeIsDone){var b=a.width,_=a.height;A.supplyLayoutGlobalDefaults(f,c,x),f.width||(c.width=b),f.height||(c.height=_),A.sanitizeMargins(c)}else{A.supplyLayoutGlobalDefaults(f,c,x);var k=!f.width||!f.height,M=c.autosize,L=m.autosizable;k&&(M||L)?A.plotAutoSize(r,f,c):k&&A.sanitizeMargins(c),!M&&k&&(f.width=c.width,f.height=c.height)}c._d3locale=(G=c.separators,x.decimal=G.charAt(0),x.thousands=G.charAt(1),{numberFormat:function(r){try{r=s(x).format(p.adjustFormat(r))}catch(n){return p.warnBadFormat(r),p.noFormat}return r},timeFormat:o(x).utcFormat}),c._extraFormat=I(r,E),c._initialAutoSizeIsDone=!0,c._dataLength=y.length,c._modules=[],c._visibleModules=[],c._basePlotModules=[];var C=c._subplots=function(){var r,n,i=u.collectableSubplotTypes,a={};if(!i){i=[];var o=u.subplotsRegistry;for(var s in o){var l=o[s].attr;if(l&&(i.push(s),Array.isArray(l)))for(n=0;n<l.length;n++)p.pushUnique(i,l[n])}}for(r=0;r<i.length;r++)a[i[r]]=[];return a}(),D=c._splomAxes={x:{},y:{}},P=c._splomSubplots={};c._splomGridDflt={},c._scatterStackOpts={},c._firstScatter={},c._alignmentOpts={},c._colorAxes={},c._requestRangeslider={},c._traceUids=function(r,n){var i,a,o=n.length,s=[];for(i=0;i<r.length;i++){var l=r[i]._fullInput;l!==a&&s.push(l),a=l}var c=s.length,u=Array(o),f={};function h(r,n){if(r&&"string"==typeof r&&!f[r])return u[n]=r,f[r]=1,!0}for(i=0;i<o;i++){var d,y=n[i].uid;"number"==typeof y&&(y=String(y)),h(y,i)||i<c&&h(s[i].uid,i)||(d=p.randstr(f),u[i]=d,f[d]=1)}return u}(h,y),c._globalTransforms=(r._context||{}).globalTransforms,A.supplyDataDefaults(y,d,f,c);var B=Object.keys(D.x),R=Object.keys(D.y);if(B.length>1&&R.length>1){for(u.getComponentMethod("grid","sizeDefaults")(f,c),l=0;l<B.length;l++)p.pushUnique(C.xaxis,B[l]);for(l=0;l<R.length;l++)p.pushUnique(C.yaxis,R[l]);for(var z in P)p.pushUnique(C.cartesian,z)}if(c._has=A._hasPlotType.bind(c),h.length===d.length)for(l=0;l<d.length;l++)w(d[l],h[l]);A.supplyLayoutModuleDefaults(f,c,d,r._transitionData);var F=c._visibleModules,N=[];for(l=0;l<F.length;l++){var U=F[l].crossTraceDefaults;U&&p.pushUnique(N,U)}for(l=0;l<N.length;l++)N[l](d,c);c._hasOnlyLargeSploms=1===c._basePlotModules.length&&"splom"===c._basePlotModules[0].name&&B.length>15&&R.length>15&&0===c.shapes.length&&0===c.images.length,A.linkSubplots(d,c,h,a),A.cleanPlot(d,c,h,a);var j=!(!a._has||!a._has("gl2d")),V=!(!c._has||!c._has("gl2d")),H=!(!a._has||!a._has("cartesian"))||j,q=!(!c._has||!c._has("cartesian"))||V;H&&!q?a._bgLayer.remove():q&&!H&&(c._shouldCreateBgLayer=!0),a._zoomlayer&&!r._dragging&&v({_fullLayout:a}),function(r,n){var i,a=[];n.meta&&(i=n._meta={meta:n.meta,layout:{meta:n.meta}});for(var o=0;o<r.length;o++){var s=r[o];s.meta?a[s.index]=s._meta={meta:s.meta}:n.meta&&(s._meta={meta:n.meta}),n.meta&&(s._meta.layout={meta:n.meta})}a.length&&(i||(i=n._meta={}),i.data=a)}(d,c),w(c,a),u.getComponentMethod("colorscale","crossTraceDefaults")(d,c),c._preGUI||(c._preGUI={}),c._tracePreGUI||(c._tracePreGUI={});var G,W,Y=c._tracePreGUI,Z={};for(W in Y)Z[W]="old";for(l=0;l<d.length;l++)Z[W=d[l]._fullInput.uid]||(Y[W]={}),Z[W]="new";for(W in Z)"old"===Z[W]&&delete Y[W];O(c),u.getComponentMethod("rangeslider","makeData")(c),i||g.length!==d.length||A.supplyDefaultsUpdateCalc(g,d)}},A.supplyDefaultsUpdateCalc=function(r,n){for(var i=0;i<n.length;i++){var a=n[i],o=(r[i]||[])[0];if(o&&o.trace){var s=o.trace;if(s._hasCalcTransform){var l,c,u,f=s._arrayAttrs;for(l=0;l<f.length;l++)c=f[l],u=p.nestedProperty(s,c).get().slice(),p.nestedProperty(a,c).set(u)}o.trace=a}}},A.createTransitionData=function(r){r._transitionData||(r._transitionData={}),r._transitionData._frames||(r._transitionData._frames=[]),r._transitionData._frameHash||(r._transitionData._frameHash={}),r._transitionData._counter||(r._transitionData._counter=0),r._transitionData._interruptCallbacks||(r._transitionData._interruptCallbacks=[])},A._hasPlotType=function(r){var n,i=this._basePlotModules||[];for(n=0;n<i.length;n++)if(i[n].name===r)return!0;var a=this._modules||[];for(n=0;n<a.length;n++){var o=a[n].name;if(o===r)return!0;var s=u.modules[o];if(s&&s.categories[r])return!0}return!1},A.cleanPlot=function(r,n,i,a){var o,s,l=a._basePlotModules||[];for(o=0;o<l.length;o++){var c=l[o];c.clean&&c.clean(r,n,i,a)}var u=a._has&&a._has("gl"),f=n._has&&n._has("gl");u&&!f&&void 0!==a._glcontainer&&(a._glcontainer.selectAll(".gl-canvas").remove(),a._glcontainer.selectAll(".no-webgl").remove(),a._glcanvas=null);var h=!!a._infolayer;e:for(o=0;o<i.length;o++){var p=i[o].uid;for(s=0;s<r.length;s++)if(p===r[s].uid)continue e;h&&a._infolayer.select(".cb"+p).remove()}},A.linkSubplots=function(r,n,i,a){var o,s,l=a._plots||{},c=n._plots={},f=n._subplots,h={_fullData:r,_fullLayout:n},d=f.cartesian.concat(f.gl2d||[]);for(o=0;o<d.length;o++){var y,v=d[o],m=l[v],x=g.getFromId(h,v,"x"),b=g.getFromId(h,v,"y");for(m?y=c[v]=m:(y=c[v]={}).id=v,x._counterAxes.push(b._id),b._counterAxes.push(x._id),x._subplotsWith.push(v),b._subplotsWith.push(v),y.xaxis=x,y.yaxis=b,y._hasClipOnAxisFalse=!1,s=0;s<r.length;s++){var _=r[s];if(_.xaxis===y.xaxis._id&&_.yaxis===y.yaxis._id&&!1===_.cliponaxis){y._hasClipOnAxisFalse=!0;break}}}var w,T=g.list(h,null,!0);for(o=0;o<T.length;o++){var A=null;(w=T[o]).overlaying&&(A=g.getFromId(h,w.overlaying))&&A.overlaying&&(w.overlaying=!1,A=null),w._mainAxis=A||w,A&&(w.domain=A.domain.slice()),w._anchorAxis="free"===w.anchor?null:g.getFromId(h,w.anchor)}for(o=0;o<T.length;o++)if((w=T[o])._counterAxes.sort(g.idSort),w._subplotsWith.sort(p.subplotSort),w._mainSubplot=function(r,n){var i={_fullLayout:n},a="x"===r._id.charAt(0),o=r._mainAxis._anchorAxis,s="",l="",c="";if(o&&(c=o._mainAxis._id,s=a?r._id+c:c+r._id),!s||!n._plots[s]){s="";for(var u=r._counterAxes,f=0;f<u.length;f++){var h=u[f],p=a?r._id+h:h+r._id;l||(l=p);var d=g.getFromId(i,h);if(c&&d.overlaying===c){s=p;break}}}return s||l}(w,n),w._counterAxes.length&&(w.spikemode&&-1!==w.spikemode.indexOf("across")||w.automargin&&w.mirror&&"free"!==w.anchor||u.getComponentMethod("rangeslider","isVisible")(w))){var k=1,M=0;for(s=0;s<w._counterAxes.length;s++){var S=g.getFromId(h,w._counterAxes[s]);k=Math.min(k,S.domain[0]),M=Math.max(M,S.domain[1])}k<M&&(w._counterDomainMin=k,w._counterDomainMax=M)}},A.clearExpandedTraceDefaultColors=function(r){var n,i,a;for(i=[],(n=r._module._colorAttrs)||(r._module._colorAttrs=n=[],f.crawl(r._module.attributes,function(r,a,o,s){i[s]=a,i.length=s+1,"color"===r.valType&&void 0===r.dflt&&n.push(i.join("."))})),a=0;a<n.length;a++)p.nestedProperty(r,"_input."+n[a]).get()||p.nestedProperty(r,n[a]).set(null)},A.supplyDataDefaults=function(r,n,i,a){var o,s,l,c=a._modules,f=a._visibleModules,d=a._basePlotModules,y=0,g=0;function v(r){n.push(r);var i=r._module;i&&(p.pushUnique(c,i),!0===r.visible&&p.pushUnique(f,i),p.pushUnique(d,r._module.basePlotModule),y++,!1!==r._input.visible&&g++)}a._transformModules=[];var m={},x=[],b=(i.template||{}).data||{},_=h.traceTemplater(b);for(o=0;o<r.length;o++){if(l=r[o],(s=_.newTrace(l)).uid=a._traceUids[o],A.supplyTraceDefaults(l,s,g,a,o),s.index=o,s._input=l,s._expandedIndex=y,s.transforms&&s.transforms.length)for(var T=!1!==l.visible&&!1===s.visible,M=function(r,n,i,a){for(var o=r.transforms,s=[r],l=0;l<o.length;l++){var c=o[l],u=k[c.type];u&&u.transform&&(s=u.transform(s,{transform:c,fullTrace:r,fullData:n,layout:i,fullLayout:a,transformIndex:l}))}return s}(s,n,i,a),S=0;S<M.length;S++){var E=M[S],I={_template:s._template,type:s.type,uid:s.uid+S};T&&!1===E.visible&&delete E.visible,A.supplyTraceDefaults(E,I,y,a,o),w(I,E),I.index=o,I._input=l,I._fullInput=s,I._expandedIndex=y,I._expandedInput=E,v(I)}else s._fullInput=s,s._expandedInput=s,v(s);u.traceIs(s,"carpetAxis")&&(m[s.carpet]=s),u.traceIs(s,"carpetDependent")&&x.push(o)}for(o=0;o<x.length;o++)if((s=n[x[o]]).visible){var L=m[s.carpet];s._carpet=L,L&&L.visible?(s.xaxis=L.xaxis,s.yaxis=L.yaxis):s.visible=!1}},A.supplyAnimationDefaults=function(r){r=r||{};var n,i={};function a(n,a){return p.coerce(r||{},i,x,n,a)}if(a("mode"),a("direction"),a("fromcurrent"),Array.isArray(r.frame))for(i.frame=[],n=0;n<r.frame.length;n++)i.frame[n]=A.supplyAnimationFrameDefaults(r.frame[n]||{});else i.frame=A.supplyAnimationFrameDefaults(r.frame||{});if(Array.isArray(r.transition))for(i.transition=[],n=0;n<r.transition.length;n++)i.transition[n]=A.supplyAnimationTransitionDefaults(r.transition[n]||{});else i.transition=A.supplyAnimationTransitionDefaults(r.transition||{});return i},A.supplyAnimationFrameDefaults=function(r){var n={};function i(i,a){return p.coerce(r||{},n,x.frame,i,a)}return i("duration"),i("redraw"),n},A.supplyAnimationTransitionDefaults=function(r){var n={};function i(i,a){return p.coerce(r||{},n,x.transition,i,a)}return i("duration"),i("easing"),n},A.supplyFrameDefaults=function(r){var n={};function i(i,a){return p.coerce(r,n,b,i,a)}return i("group"),i("name"),i("traces"),i("baseframe"),i("data"),i("layout"),n},A.supplyTraceDefaults=function(r,n,i,a,o){var s,l=a.colorway||d.defaults,c=l[i%l.length];function f(i,a){return p.coerce(r,n,A.attributes,i,a)}var h=f("visible");f("type"),f("name",a._traceWord+" "+o),f("uirevision",a.uirevision);var y=A.getModule(n);if(n._module=y,y){var g=y.basePlotModule,v=g.attr,m=g.attributes;if(v&&m){var x=a._subplots,b="";if(h||"gl2d"!==g.name){if(Array.isArray(v))for(s=0;s<v.length;s++){var _=v[s],w=p.coerce(r,n,m,_);x[_]&&p.pushUnique(x[_],w),b+=w}else b=p.coerce(r,n,m,v);x[g.name]&&p.pushUnique(x[g.name],b)}}}if(h){if(f("customdata"),f("ids"),f("meta"),u.traceIs(n,"showLegend")?(p.coerce(r,n,y.attributes.showlegend?y.attributes:A.attributes,"showlegend"),f("legend"),f("legendwidth"),f("legendgroup"),f("legendgrouptitle.text"),f("legendrank"),n._dfltShowLegend=!0):n._dfltShowLegend=!1,y&&y.supplyDefaults(r,n,c,a),u.traceIs(n,"noOpacity")||f("opacity"),u.traceIs(n,"notLegendIsolatable")&&(n.visible=!!n.visible),u.traceIs(n,"noHover")||(n.hovertemplate||p.coerceHoverinfo(r,n,a),"parcats"!==n.type&&u.getComponentMethod("fx","supplyDefaults")(r,n,c,a)),y&&y.selectPoints){var T=f("selectedpoints");p.isTypedArray(T)&&(n.selectedpoints=Array.from(T))}A.supplyTransformDefaults(r,n,a)}return n},A.hasMakesDataTransform=L,A.supplyTransformDefaults=function(r,n,i){if(n._length||L(r)){var a=i._globalTransforms||[],o=i._transformModules||[];if(Array.isArray(r.transforms)||0!==a.length)for(var s=r.transforms||[],l=a.concat(s),c=n.transforms=[],u=0;u<l.length;u++){var f,h=l[u],d=h.type,y=k[d],g=!(h._module&&h._module===y),v=y&&"function"==typeof y.transform;y||p.warn("Unrecognized transform type "+d+"."),y&&y.supplyDefaults&&(g||v)?((f=y.supplyDefaults(h,n,i,r)).type=d,f._module=y,p.pushUnique(o,y)):f=p.extendFlat({},h),c.push(f)}}},A.supplyLayoutGlobalDefaults=function(r,n,i){function a(i,a){return p.coerce(r,n,A.layoutAttributes,i,a)}var o=r.template;p.isPlainObject(o)&&(n.template=o,n._template=o.layout,n._dataTemplate=o.data),a("autotypenumbers");var s=p.coerceFont(a,"font"),l=s.size;p.coerceFont(a,"title.font",s,{overrideDflt:{size:Math.round(1.4*l)}}),a("title.text",n._dfltTitle.plot),a("title.xref");var c=a("title.yref");a("title.pad.t"),a("title.pad.r"),a("title.pad.b"),a("title.pad.l");var f=a("title.automargin");a("title.x"),a("title.xanchor"),a("title.y"),a("title.yanchor"),a("title.subtitle.text",n._dfltTitle.subtitle),p.coerceFont(a,"title.subtitle.font",s,{overrideDflt:{size:Math.round(.7*n.title.font.size)}}),f&&("paper"===c&&(0!==n.title.y&&(n.title.y=1),"auto"===n.title.yanchor&&(n.title.yanchor=0===n.title.y?"top":"bottom")),"container"===c&&("auto"===n.title.y&&(n.title.y=1),"auto"===n.title.yanchor&&(n.title.yanchor=n.title.y<.5?"bottom":"top"))),a("uniformtext.mode")&&a("uniformtext.minsize"),a("autosize",!(r.width&&r.height)),a("width"),a("height"),a("minreducedwidth"),a("minreducedheight"),a("margin.l"),a("margin.r"),a("margin.t"),a("margin.b"),a("margin.pad"),a("margin.autoexpand"),r.width&&r.height&&A.sanitizeMargins(n),u.getComponentMethod("grid","sizeDefaults")(r,n),a("paper_bgcolor"),a("separators",i.decimal+i.thousands),a("hidesources"),a("colorway"),a("datarevision");var h=a("uirevision");a("editrevision",h),a("selectionrevision",h),u.getComponentMethod("modebar","supplyLayoutDefaults")(r,n),u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,n,a),u.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(r,n,a),a("meta"),p.isPlainObject(r.transition)&&(a("transition.duration"),a("transition.easing"),a("transition.ordering")),u.getComponentMethod("calendars","handleDefaults")(r,n,"calendar"),u.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,n,a),p.coerce(r,n,m,"scattermode")},A.plotAutoSize=function(r,n,i){var a,o,s=r._context||{},c=s.frameMargins,u=p.isPlotDiv(r);if(u&&r.emit("plotly_autosize"),s.fillFrame)a=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else{var f=u?window.getComputedStyle(r):{};if(a=C(f.width)||C(f.maxWidth)||i.width,o=C(f.height)||C(f.maxHeight)||i.height,l(c)&&c>0){var h=1-2*c;a=Math.round(h*a),o=Math.round(h*o)}}var d=A.layoutAttributes.width.min,y=A.layoutAttributes.height.min;a<d&&(a=d),o<y&&(o=y);var g=!n.width&&Math.abs(i.width-a)>1,v=!n.height&&Math.abs(i.height-o)>1;(v||g)&&(g&&(i.width=a),v&&(i.height=o)),r._initialAutoSize||(r._initialAutoSize={width:a,height:o}),A.sanitizeMargins(i)},A.supplyLayoutModuleDefaults=function(r,n,i,a){var o,s,l,c=u.componentsRegistry,f=n._basePlotModules,h=u.subplotsRegistry.cartesian;for(o in c)(l=c[o]).includeBasePlot&&l.includeBasePlot(r,n);for(var d in f.length||f.push(h),n._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")(r,n),h.finalizeSubplots(r,n)),n._subplots)n._subplots[d].sort(p.subplotSort);for(s=0;s<f.length;s++)(l=f[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i);var y=n._modules;for(s=0;s<y.length;s++)(l=y[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i);var g=n._transformModules;for(s=0;s<g.length;s++)(l=g[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i,a);for(o in c)(l=c[o]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i)},A.purge=function(r){var n=r._fullLayout||{};void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.remove(),n._glcanvas=null),n._modeBar&&n._modeBar.destroy(),r._transitionData&&(r._transitionData._interruptCallbacks&&(r._transitionData._interruptCallbacks.length=0),r._transitionData._animationRaf&&window.cancelAnimationFrame(r._transitionData._animationRaf)),p.clearThrottle(),p.clearResponsive(r),delete r.data,delete r.layout,delete r._fullData,delete r._fullLayout,delete r.calcdata,delete r.empty,delete r.fid,delete r.undoqueue,delete r.undonum,delete r.autoplay,delete r.changed,delete r._promises,delete r._redrawTimer,delete r._hmlumcount,delete r._hmpixcount,delete r._transitionData,delete r._transitioning,delete r._initialAutoSize,delete r._transitioningWithDuration,delete r._dragging,delete r._dragged,delete r._dragdata,delete r._hoverdata,delete r._snapshotInProgress,delete r._editing,delete r._mouseDownTime,delete r._legendMouseDownTime,r.removeAllListeners&&r.removeAllListeners()},A.style=function(r){var n,i=r._fullLayout._visibleModules,a=[];for(n=0;n<i.length;n++){var o=i[n];o.style&&p.pushUnique(a,o.style)}for(n=0;n<a.length;n++)a[n](r)},A.sanitizeMargins=function(r){if(r&&r.margin){var n,i=r.width,a=r.height,o=r.margin,s=i-(o.l+o.r),l=a-(o.t+o.b);s<0&&(n=(i-1)/(o.l+o.r),o.l=Math.floor(n*o.l),o.r=Math.floor(n*o.r)),l<0&&(n=(a-1)/(o.t+o.b),o.t=Math.floor(n*o.t),o.b=Math.floor(n*o.b))}},A.clearAutoMarginIds=function(r){r._fullLayout._pushmarginIds={}},A.allowAutoMargin=function(r,n){r._fullLayout._pushmarginIds[n]=1},A.autoMargin=function(r,n,i){var a=r._fullLayout,o=a.width,s=a.height,l=a.margin,c=a.minreducedwidth,u=a.minreducedheight,f=p.constrain(o-l.l-l.r,2,c),h=p.constrain(s-l.t-l.b,2,u),d=Math.max(0,o-f),y=Math.max(0,s-h),g=a._pushmargin,v=a._pushmarginIds;if(!1!==l.autoexpand){if(i){var m=i.pad;if(void 0===m&&(m=Math.min(12,l.l,l.r,l.t,l.b)),d){var x=(i.l+i.r)/d;x>1&&(i.l/=x,i.r/=x)}if(y){var b=(i.t+i.b)/y;b>1&&(i.t/=b,i.b/=b)}var _=void 0!==i.xl?i.xl:i.x,w=void 0!==i.xr?i.xr:i.x,T=void 0!==i.yt?i.yt:i.y,k=void 0!==i.yb?i.yb:i.y;g[n]={l:{val:_,size:i.l+m},r:{val:w,size:i.r+m},b:{val:k,size:i.b+m},t:{val:T,size:i.t+m}},v[n]=1}else delete g[n],delete v[n];if(!a._replotting)return A.doAutoMargin(r)}},A.doAutoMargin=function(r){var n,i=r._fullLayout,a=i.width,o=i.height;i._size||(i._size={}),O(i);var s=i._size,c=i.margin,f={t:0,b:0,l:0,r:0},h=p.extendFlat({},s),d=c.l,y=c.r,v=c.t,m=c.b,x=i._pushmargin,b=i._pushmarginIds,_=i.minreducedwidth,w=i.minreducedheight;if(!1!==c.autoexpand){for(var T in x)b[T]||delete x[T];var k=r._fullLayout._reservedMargin;for(var M in k)for(var S in k[M]){var E=k[M][S];f[S]=Math.max(f[S],E)}for(var I in x.base={l:{val:0,size:d},r:{val:1,size:y},t:{val:1,size:v},b:{val:0,size:m}},f){var L=0;for(var C in x)"base"!==C&&l(x[C][I].size)&&(L=x[C][I].size>L?x[C][I].size:L);var D=Math.max(0,c[I]-L);f[I]=Math.max(0,f[I]-D)}for(var P in x){var B=x[P].l||{},R=x[P].b||{},z=B.val,F=B.size,N=R.val,U=R.size,j=a-f.r-f.l,V=o-f.t-f.b;for(var H in x){if(l(F)&&x[H].r){var q=x[H].r.val,G=x[H].r.size;if(q>z){var W=(F*q+(G-j)*z)/(q-z),Y=(G*(1-z)+(F-j)*(1-q))/(q-z);W+Y>d+y&&(d=W,y=Y)}}if(l(U)&&x[H].t){var Z=x[H].t.val,X=x[H].t.size;if(Z>N){var K=(U*Z+(X-V)*N)/(Z-N),J=(X*(1-N)+(U-V)*(1-Z))/(Z-N);K+J>m+v&&(m=K,v=J)}}}}}var $=p.constrain(a-c.l-c.r,2,_),Q=p.constrain(o-c.t-c.b,2,w),tt=Math.max(0,a-$),te=Math.max(0,o-Q);if(tt){var tr=(d+y)/tt;tr>1&&(d/=tr,y/=tr)}if(te){var tn=(m+v)/te;tn>1&&(m/=tn,v/=tn)}if(s.l=Math.round(d)+f.l,s.r=Math.round(y)+f.r,s.t=Math.round(v)+f.t,s.b=Math.round(m)+f.b,s.p=Math.round(c.pad),s.w=Math.round(a)-s.l-s.r,s.h=Math.round(o)-s.t-s.b,!i._replotting&&(A.didMarginChange(h,s)||function(r){if("_redrawFromAutoMarginCount"in r._fullLayout)return!1;var n=g.list(r,"",!0);for(var i in n)if(n[i].autoshift||n[i].shift)return!0;return!1}(r))){"_redrawFromAutoMarginCount"in i?i._redrawFromAutoMarginCount++:i._redrawFromAutoMarginCount=1;var ti=3*(1+Object.keys(b).length);if(i._redrawFromAutoMarginCount<ti)return u.call("_doPlot",r);i._size=h,p.warn("Too many auto-margin redraws.")}n=g.list(r,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<n.length;i++){var a=n[i][r];a&&a()}})};var D=["l","r","t","b","p","w","h"];function P(r,n,i){var a=!1,o=[A.previousPromises,function(){if(r._transitionData)return r._transitioning=!1,function(r){var n=Promise.resolve();if(!r)return n;for(;r.length;)n=n.then(r.shift());return n}(r._transitionData._interruptCallbacks)},i.prepareFn,A.rehover,A.reselect,function(){return r.emit("plotly_transitioning",[]),new Promise(function(o){r._transitioning=!0,n.duration>0&&(r._transitioningWithDuration=!0),r._transitionData._interruptCallbacks.push(function(){a=!0}),i.redraw&&r._transitionData._interruptCallbacks.push(function(){return u.call("redraw",r)}),r._transitionData._interruptCallbacks.push(function(){r.emit("plotly_transitioninterrupted",[])});var s=0,l=0;function c(){return s++,function(){l++,a||l!==s||r._transitionData&&(function(r){if(r)for(;r.length;)r.shift()}(r._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return u.call("redraw",r)}).then(function(){r._transitioning=!1,r._transitioningWithDuration=!1,r.emit("plotly_transitioned",[])}).then(o))}}i.runFn(c),setTimeout(c())})}],s=p.syncOrAsync(o,r);return s&&s.then||(s=Promise.resolve()),s.then(function(){return r})}A.didMarginChange=function(r,n){for(var i=0;i<D.length;i++){var a=D[i],o=r[a],s=n[a];if(!l(o)||Math.abs(s-o)>1)return!0}return!1},A.graphJson=function(r,n,i,a,o,s){(o&&n&&!r._fullData||o&&!n&&!r._fullLayout)&&A.supplyDefaults(r);var l=o?r._fullData:r.data,u=o?r._fullLayout:r.layout,f=(r._transitionData||{})._frames;function h(r,n){if("function"==typeof r)return n?"_function_":null;if(p.isPlainObject(r)){var a,o={};return Object.keys(r).sort().forEach(function(s){if(-1===["_","["].indexOf(s.charAt(0))){if("function"!=typeof r[s]){if("keepdata"===i){if("src"===s.substr(s.length-3))return}else if("keepstream"===i){if("string"==typeof(a=r[s+"src"])&&a.indexOf(":")>0&&!p.isPlainObject(r.stream))return}else if("keepall"!==i&&"string"==typeof(a=r[s+"src"])&&a.indexOf(":")>0)return;o[s]=h(r[s],n)}else n&&(o[s]="_function")}}),o}var s=Array.isArray(r),l=p.isTypedArray(r);if((s||l)&&r.dtype&&r.shape){var u=r.bdata;return h({dtype:r.dtype,shape:r.shape,bdata:p.isArrayBuffer(u)?c.encode(u):u},n)}return s?r.map(function(r){return h(r,n)}):l?p.simpleMap(r,p.identity):p.isJSDate(r)?p.ms2DateTimeLocal(+r):r}var d={data:(l||[]).map(function(r){var i=h(r);return n&&delete i.fit,i})};if(!n&&(d.layout=h(u),o)){var y=u._size;d.layout.computed={margin:{b:y.b,l:y.l,r:y.r,t:y.t}}}return f&&(d.frames=h(f)),s&&(d.config=h(r._context,!0)),"object"===a?d:JSON.stringify(d)},A.modifyFrames=function(r,n){var i,a,o,s=r._transitionData._frames,l=r._transitionData._frameHash;for(i=0;i<n.length;i++)switch((a=n[i]).type){case"replace":o=a.value;var c=(s[a.index]||{}).name,u=o.name;s[a.index]=l[u]=o,u!==c&&(delete l[c],l[u]=o);break;case"insert":l[(o=a.value).name]=o,s.splice(a.index,0,o);break;case"delete":delete l[(o=s[a.index]).name],s.splice(a.index,1)}return Promise.resolve()},A.computeFrame=function(r,n){var i,a,o,s,l=r._transitionData._frameHash;if(!n)throw Error("computeFrame must be given a string frame name");var c=l[n.toString()];if(!c)return!1;for(var u=[c],f=[c.name];c.baseframe&&(c=l[c.baseframe.toString()])&&-1===f.indexOf(c.name);)u.push(c),f.push(c.name);for(var h={};c=u.pop();)if(c.layout&&(h.layout=A.extendLayout(h.layout,c.layout)),c.data){if(h.data||(h.data=[]),!(a=c.traces))for(a=[],i=0;i<c.data.length;i++)a[i]=i;for(h.traces||(h.traces=[]),i=0;i<c.data.length;i++)null!=(o=a[i])&&(-1===(s=h.traces.indexOf(o))&&(s=h.data.length,h.traces[s]=o),h.data[s]=A.extendTrace(h.data[s],c.data[i]))}return h},A.recomputeFrameHash=function(r){for(var n=r._transitionData._frameHash={},i=r._transitionData._frames,a=0;a<i.length;a++){var o=i[a];o&&o.name&&(n[o.name]=o)}},A.extendObjectWithContainers=function(r,n,i){var a,o,s,l,c,u,f,h=p.extendDeepNoArrays({},n||{}),d=p.expandObjectPaths(h),y={};if(i&&i.length)for(s=0;s<i.length;s++)void 0===(o=(a=p.nestedProperty(d,i[s])).get())?p.nestedProperty(y,i[s]).set(null):(a.set(null),p.nestedProperty(y,i[s]).set(o));if(r=p.extendDeepNoArrays(r||{},d),i&&i.length){for(s=0;s<i.length;s++)if(u=p.nestedProperty(y,i[s]).get()){for(Array.isArray(f=(c=p.nestedProperty(r,i[s])).get())||(f=[],c.set(f)),l=0;l<u.length;l++){var g=u[l];f[l]=null===g?null:A.extendObjectWithContainers(f[l],g)}c.set(f)}}return r},A.dataArrayContainers=["transforms","dimensions"],A.layoutArrayContainers=u.layoutArrayContainers,A.extendTrace=function(r,n){return A.extendObjectWithContainers(r,n,A.dataArrayContainers)},A.extendLayout=function(r,n){return A.extendObjectWithContainers(r,n,A.layoutArrayContainers)},A.transition=function(r,n,i,a,o,s){var l={redraw:o.redraw},c={},u=[];return l.prepareFn=function(){for(var o=Array.isArray(n)?n.length:0,s=a.slice(0,o),l=0;l<s.length;l++){var f=s[l],h=r._fullData[f]._module;if(h){if(h.animatable){var d=h.basePlotModule.name;c[d]||(c[d]=[]),c[d].push(f)}r.data[s[l]]=A.extendTrace(r.data[s[l]],n[l])}}var y=p.expandObjectPaths(p.extendDeepNoArrays({},i)),g=/^[xy]axis[0-9]*$/;for(var v in y)g.test(v)&&delete y[v].range;A.extendLayout(r.layout,y),delete r.calcdata,A.supplyDefaults(r),A.doCalcdata(r);var m=p.expandObjectPaths(i);if(m){var x=r._fullLayout._plots;for(var b in x){var _=x[b],w=_.xaxis,T=_.yaxis,k=w.range.slice(),M=T.range.slice(),S=null,E=null,I=null,L=null;Array.isArray(m[w._name+".range"])?S=m[w._name+".range"].slice():Array.isArray((m[w._name]||{}).range)&&(S=m[w._name].range.slice()),Array.isArray(m[T._name+".range"])?E=m[T._name+".range"].slice():Array.isArray((m[T._name]||{}).range)&&(E=m[T._name].range.slice()),k&&S&&(w.r2l(k[0])!==w.r2l(S[0])||w.r2l(k[1])!==w.r2l(S[1]))&&(I={xr0:k,xr1:S}),M&&E&&(T.r2l(M[0])!==T.r2l(E[0])||T.r2l(M[1])!==T.r2l(E[1]))&&(L={yr0:M,yr1:E}),(I||L)&&u.push(p.extendFlat({plotinfo:_},I,L))}}return Promise.resolve()},l.runFn=function(n){var a,o,l=r._fullLayout._basePlotModules,f=u.length;if(i)for(o=0;o<l.length;o++)l[o].transitionAxes&&l[o].transitionAxes(r,u,s,n);for(var h in f?((a=p.extendFlat({},s)).duration=0,delete c.cartesian):a=s,c){var d=c[h];r._fullData[d[0]]._module.basePlotModule.plot(r,d,a,n)}},P(r,s,l)},A.transitionFromReact=function(r,n,i,a){var o=r._fullLayout,s=o.transition,l={},c=[];return l.prepareFn=function(){var r=o._plots;for(var s in l.redraw=!1,"some"===n.anim&&(l.redraw=!0),"some"===i.anim&&(l.redraw=!0),r){var u=r[s],f=u.xaxis,h=u.yaxis,d=a[f._name].range.slice(),y=a[h._name].range.slice(),g=f.range.slice(),v=h.range.slice();f.setScale(),h.setScale();var m=null,x=null;f.r2l(d[0])===f.r2l(g[0])&&f.r2l(d[1])===f.r2l(g[1])||(m={xr0:d,xr1:g}),h.r2l(y[0])===h.r2l(v[0])&&h.r2l(y[1])===h.r2l(v[1])||(x={yr0:y,yr1:v}),(m||x)&&c.push(p.extendFlat({plotinfo:u},m,x))}return Promise.resolve()},l.runFn=function(i){for(var a,o,l,u=r._fullData,f=r._fullLayout._basePlotModules,h=[],d=0;d<u.length;d++)h.push(d);function y(){if(r._fullLayout)for(var n=0;n<f.length;n++)f[n].transitionAxes&&f[n].transitionAxes(r,c,a,i)}function g(){if(r._fullLayout)for(var n=0;n<f.length;n++)f[n].plot(r,l,o,i)}c.length&&n.anim?"traces first"===s.ordering?(a=p.extendFlat({},s,{duration:0}),l=h,o=s,setTimeout(y,s.duration),g()):(a=s,l=null,o=p.extendFlat({},s,{duration:0}),setTimeout(g,a.duration),y()):c.length?(a=s,y()):n.anim&&(l=h,o=s,g())},P(r,s,l)},A.doCalcdata=function(r,n){var i,a,o,s,l=g.list(r),c=r._fullData,h=r._fullLayout,d=Array(c.length),v=(r.calcdata||[]).slice();for(r.calcdata=d,h._numBoxes=0,h._numViolins=0,h._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,h._piecolormap={},h._sunburstcolormap={},h._treemapcolormap={},h._iciclecolormap={},h._funnelareacolormap={},o=0;o<c.length;o++)Array.isArray(n)&&-1===n.indexOf(o)&&(d[o]=v[o]);for(o=0;o<c.length;o++)(i=c[o])._arrayAttrs=f.findArrayAttributes(i),i._extremes={};var m=h._subplots.polar||[];for(o=0;o<m.length;o++)l.push(h[m[o]].radialaxis,h[m[o]].angularaxis);for(var x in h._colorAxes){var b=h[x];!1!==b.cauto&&(delete b.cmin,delete b.cmax)}var _=!1;function w(n,o){if(!!(a=(i=c[n])._module).isContainer===o){var l=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var u=i.transforms||[];for(s=u.length-1;s>=0;s--)if(u[s].enabled){i._indexToPoints=u[s]._indexToPoints;break}a&&a.calc&&(l=a.calc(r,i))}Array.isArray(l)&&l[0]||(l=[{x:y,y:y}]),l[0].t||(l[0].t={}),l[0].trace=i,d[n]=l}}for(R(l,c,h),o=0;o<c.length;o++)w(o,!0);for(o=0;o<c.length;o++)(function(n){if(a=(i=c[n])._module,!0===i.visible&&i.transforms){if(a&&a.calc){var o=a.calc(r,i);o[0]&&o[0].t&&o[0].t._scene&&delete o[0].t._scene.dirty}for(s=0;s<i.transforms.length;s++){var l=i.transforms[s];(a=k[l.type])&&a.calcTransform&&(i._hasCalcTransform=!0,_=!0,a.calcTransform(r,i,l))}}})(o);for(_&&R(l,c,h),o=0;o<c.length;o++)w(o,!0);for(o=0;o<c.length;o++)w(o,!1);z(r);var T=function(r,n){var i,a,o,s,l,c=[],f={min:function(r){return p.aggNums(Math.min,null,r)},max:function(r){return p.aggNums(Math.max,null,r)},sum:function(r){return p.aggNums(function(r,n){return r+n},null,r)},total:function(r){return p.aggNums(function(r,n){return r+n},null,r)},mean:function(r){return p.mean(r)},"geometric mean":function(r){return p.geometricMean(r)},median:function(r){return p.median(r)}};function h(r,n){return r[1]-n[1]}function d(r,n){return n[1]-r[1]}for(i=0;i<r.length;i++){var y=r[i];if("category"===y.type){var v=y.categoryorder.match(B);if(v){var m=v[1],x=v[2],b=y._id.charAt(0),_="x"===b,w=[];for(a=0;a<y._categories.length;a++)w.push([y._categories[a],[]]);for(a=0;a<y._traceIndices.length;a++){var T=y._traceIndices[a],A=n._fullData[T];if(!0===A.visible){var k=A.type;u.traceIs(A,"histogram")&&(delete A._xautoBinFinished,delete A._yautoBinFinished);var M="splom"===k,S="scattergl"===k,E=n.calcdata[T];for(o=0;o<E.length;o++){var I,L,C=E[o];if(M){var O=A._axesDim[y._id];if(!_){var D=A._diag[O][0];D&&(y=n._fullLayout[g.id2name(D)])}var P=C.trace.dimensions[O].values;for(s=0;s<P.length;s++)for(I=y._categoriesMap[P[s]],l=0;l<C.trace.dimensions.length;l++)if(l!==O){var R=C.trace.dimensions[l];w[I][1].push(R.values[s])}}else if(S){for(s=0;s<C.t.x.length;s++)_?(I=C.t.x[s],L=C.t.y[s]):(I=C.t.y[s],L=C.t.x[s]),w[I][1].push(L);C.t&&C.t._scene&&delete C.t._scene.dirty}else if(C.hasOwnProperty("z")){L=C.z;var z=function(r,i,a){var o=i._id.charAt(0);if("histogram2dcontour"===r){var s=i._counterAxes[0],l=g.getFromId(n,s),c="x"===o||"x"===s&&"category"===l.type,u="y"===o||"y"===s&&"category"===l.type;return function(r,n){return 0===r||0===n||c&&r===a[n].length-1||u&&n===a.length-1?-1:("y"===o?n:r)-1}}return function(r,n){return"y"===o?n:r}}(A.type,y,L);for(s=0;s<L.length;s++)for(l=0;l<L[s].length;l++)(I=z(l,s))+1&&w[I][1].push(L[s][l])}else for(void 0===(I=C.p)&&(I=C[b]),void 0===(L=C.s)&&(L=C.v),void 0===L&&(L=_?C.y:C.x),Array.isArray(L)||(L=void 0===L?[]:[L]),s=0;s<L.length;s++)w[I][1].push(L[s])}}}y._categoriesValue=w;var F=[];for(a=0;a<w.length;a++)F.push([w[a][0],f[m](w[a][1])]);F.sort("descending"===x?d:h),y._categoriesAggregatedValue=F,y._initialCategories=F.map(function(r){return r[0]}),c=c.concat(y.sortByInitialCategories())}}}return c}(l,r);if(T.length){for(h._numBoxes=0,h._numViolins=0,o=0;o<T.length;o++)w(T[o],!0);for(o=0;o<T.length;o++)w(T[o],!1);z(r)}u.getComponentMethod("fx","calc")(r),u.getComponentMethod("errorbars","calc")(r)};var B=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function R(r,n,i){var a={};function o(r){r.clearCalc(),"multicategory"===r.type&&r.setupMultiCategory(n),a[r._id]=1}p.simpleMap(r,o);for(var s=i._axisMatchGroups||[],l=0;l<s.length;l++)for(var c in s[l])a[c]||o(i[g.id2name(c)])}function z(r){var n,i,a,o=r._fullLayout,s=o._visibleModules,l={};for(i=0;i<s.length;i++){var c=s[i],u=c.crossTraceCalc;if(u){var f=c.basePlotModule.name;l[f]?p.pushUnique(l[f],u):l[f]=[u]}}for(a in l){var h=l[a],d=o._subplots[a];if(Array.isArray(d))for(n=0;n<d.length;n++){var y=d[n],g="cartesian"===a?o._plots[y]:o[y];for(i=0;i<h.length;i++)h[i](r,g,y)}else for(i=0;i<h.length;i++)h[i](r)}}A.rehover=function(r){r._fullLayout._rehover&&r._fullLayout._rehover()},A.redrag=function(r){r._fullLayout._redrag&&r._fullLayout._redrag()},A.reselect=function(r){var n=r._fullLayout,i=(r.layout||{}).selections,a=n._previousSelections;n._previousSelections=i;var o=n._reselect||JSON.stringify(i)!==JSON.stringify(a);u.getComponentMethod("selections","reselect")(r,o)},A.generalUpdatePerTraceModule=function(r,n,i,a){var o,s=n.traceHash,l={};for(o=0;o<i.length;o++){var c=i[o],u=c[0].trace;u.visible&&(l[u.type]=l[u.type]||[],l[u.type].push(c))}for(var f in s)if(!l[f]){var h=s[f][0];h[0].trace.visible=!1,l[f]=[h]}for(var d in l){var y=l[d];y[0][0].trace._module.plot(r,n,p.filterVisible(y),a)}n.traceHash=l},A.plotBasePlot=function(r,n,i,a,o){var s=u.getModule(r),l=_(n.calcdata,s)[0];s.plot(n,l,a,o)},A.cleanBasePlot=function(r,n,i,a,o){var s=o._has&&o._has(r),l=i._has&&i._has(r);s&&!l&&o["_"+r+"layer"].selectAll("g.trace").remove()}},39360:function(r){r.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(r,n,i){var a=i(3400),o=i(92065).tester,s=a.findIndexOfMin,l=a.isAngleInsideSector,c=a.angleDelta,u=a.angleDist;function f(r,n,i,a){var o,s,l=a[0],c=a[1],u=p(Math.sin(n)-Math.sin(r)),f=p(Math.cos(n)-Math.cos(r)),h=Math.tan(i),d=p(1/h),y=u/f,g=c-y*l;return d?u&&f?s=h*(o=g/(h-y)):f?(o=c*d,s=c):(o=l,s=l*h):u&&f?(o=0,s=g):f?(o=0,s=c):o=s=NaN,[o,s]}function h(r,n,i,o){return a.isFullCircle([n,i])?function(r,n){var i,a=n.length,o=Array(a+1);for(i=0;i<a;i++){var s=n[i];o[i]=[r*Math.cos(s),r*Math.sin(s)]}return o[i]=o[0].slice(),o}(r,o):function(r,n,i,o){var c,h,p,d,y=o.length,g=[];function v(n){return[r*Math.cos(n),r*Math.sin(n)]}function m(r){return a.mod(r,y)}function x(r){return l(r,[n,i])}var b=s(o,function(r){return x(r)?u(r,n):1/0}),_=f(c=o[b],o[m(b-1)],n,v(c));for(g.push(_),p=b,d=0;d<y;p++,d++){var w=o[m(p)];if(!x(w))break;g.push(v(w))}var T=s(o,function(r){return x(r)?u(r,i):1/0}),A=f(h=o[T],o[m(T+1)],i,v(h));return g.push(A),g.push([0,0]),g.push(g[0].slice()),g}(r,n,i,o)}function p(r){return Math.abs(r)>1e-10?r:0}function d(r,n,i){n=n||0,i=i||0;for(var a=r.length,o=Array(a),s=0;s<a;s++){var l=r[s];o[s]=[n+l[0],i-l[1]]}return o}r.exports={isPtInsidePolygon:function(r,n,i,a,s){if(!l(n,a))return!1;i[0]<i[1]?(c=i[0],u=i[1]):(c=i[1],u=i[0]);var c,u,f=o(h(c,a[0],a[1],s)),p=o(h(u,a[0],a[1],s)),d=[r*Math.cos(n),r*Math.sin(n)];return p.contains(d)&&!f.contains(d)},findPolygonOffset:function(r,n,i,a){for(var o=1/0,s=1/0,l=h(r,n,i,a),c=0;c<l.length;c++){var u=l[c];o=Math.min(o,u[0]),s=Math.min(s,-u[1])}return[o,s]},findEnclosingVertexAngles:function(r,n){var i=s(n,function(n){var i=c(n,r);return i>0?i:1/0}),o=a.mod(i+1,n.length);return[n[i],n[o]]},findIntersectionXY:f,findXYatLength:function(r,n,i,a){var o=-n*i,s=n*n+1,l=2*(n*o-i),c=Math.sqrt(l*l-4*s*(o*o+i*i-r*r)),u=(-l+c)/(2*s),f=(-l-c)/(2*s);return[[u,n*u+o+a],[f,n*f+o+a]]},clampTiny:p,pathPolygon:function(r,n,i,a,o,s){return"M"+d(h(r,n,i,a),o,s).join("L")},pathPolygonAnnulus:function(r,n,i,a,o,s,l){r<n?(c=r,u=n):(c=n,u=r);var c,u,f=d(h(c,i,a,o),s,l);return"M"+d(h(u,i,a,o),s,l).reverse().join("L")+"M"+f.join("L")}}},40872:function(r,n,i){var a=i(84888).KY,o=i(3400).counterRegex,s=i(62400),l=i(39360),c=l.attr,u=l.name,f=o(u),h={};h[c]={valType:"subplotid",dflt:u,editType:"calc"},r.exports={attr:c,name:u,idRoot:u,idRegex:f,attrRegex:f,attributes:h,layoutAttributes:i(95300),supplyLayoutDefaults:i(84380),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots[u],l=0;l<o.length;l++){var c=o[l],f=a(i,u,c),h=n[c]._subplot;h||(h=s(r,c),n[c]._subplot=h),h.plot(f,n,r._promises)}},clean:function(r,n,i,a){for(var o=a._subplots[u]||[],s=a._has&&a._has("gl"),l=n._has&&n._has("gl"),c=s&&!l,f=0;f<o.length;f++){var h=o[f],p=a[h]._subplot;if(!n[h]&&p)for(var d in p.framework.remove(),p.layers["radial-axis-title"].remove(),p.clipPaths)p.clipPaths[d].remove();c&&p._scene&&(p._scene.destroy(),p._scene=null)}},toSVG:i(57952).toSVG}},95300:function(r,n,i){var a=i(22548),o=i(94724),s=i(86968).u,l=i(3400).extendFlat,c=i(67824).overrideAll,u=c({color:o.color,showline:l({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:l({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash},"plot","from-root"),f=c({tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,layer:o.layer},"plot","from-root"),h={visible:l({},o.visible,{dflt:!0}),type:l({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorangeoptions:{minallowed:o.autorangeoptions.minallowed,maxallowed:o.autorangeoptions.maxallowed,clipmin:o.autorangeoptions.clipmin,clipmax:o.autorangeoptions.clipmax,include:o.autorangeoptions.include,editType:"plot"},autorange:l({},o.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:l({},o.minallowed,{editType:"plot"}),maxallowed:l({},o.maxallowed,{editType:"plot"}),range:l({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:o.categoryorder,categoryarray:o.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:o.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:l({},o.title.text,{editType:"plot",dflt:""}),font:l({},o.title.font,{editType:"plot"}),editType:"plot"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}};l(h,u,f);var p={visible:l({},o.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:o.autotypenumbers,categoryorder:o.categoryorder,categoryarray:o.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};l(p,u,f),r.exports={domain:s({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:a.background},radialaxis:h,angularaxis:p,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(r,n,i){var a=i(3400),o=i(76308),s=i(31780),l=i(168),c=i(84888).op,u=i(26332),f=i(25404),h=i(95936),p=i(42568),d=i(22416),y=i(42136),g=i(76808),v=i(52976),m=i(95300),x=i(57696),b=i(39360),_=b.axisNames;function w(r,n,i,l){var w=i("bgcolor");l.bgColor=o.combine(w,l.paper_bgcolor);var T=i("sector");i("hole");var A,k=c(l.fullData,b.name,l.id),M=l.layoutOut;function S(r,n){return i(A+"."+r,n)}for(var E=0;E<_.length;E++){A=_[E],a.isPlainObject(r[A])||(r[A]={});var I=r[A],L=s.newContainer(n,A);L._id=L._name=A,L._attr=l.id+"."+A,L._traceIndices=k.map(function(r){return r._expandedIndex});var C=b.axisName2dataArray[A],O=function(r,n,i,a,o,s){var l=i("autotypenumbers",s.autotypenumbersDflt);if("-"===i("type")){for(var c,u=0;u<a.length;u++)if(a[u].visible){c=a[u];break}c&&c[o]&&(n.type=v(c[o],"gregorian",{noMultiCategory:!0,autotypenumbers:l})),"-"===n.type?n.type="linear":r.type=n.type}return n.type}(I,L,S,k,C,l);d(I,L,S,{axData:k,dataAttr:C});var D=S("visible");switch(x(L,n,M),S("uirevision",n.uirevision),L._m=1,A){case"radialaxis":S("minallowed"),S("maxallowed");var P,B=S("range"),R=L.getAutorangeDflt(B),z=S("autorange",R);B&&(null===B[0]&&null===B[1]||(null===B[0]||null===B[1])&&("reversed"===z||!0===z)||null!==B[0]&&("min"===z||"max reversed"===z)||null!==B[1]&&("max"===z||"min reversed"===z))&&(B=void 0,delete L.range,L.autorange=!0,P=!0),P||(z=S("autorange",R=L.getAutorangeDflt(B))),I.autorange=z,z&&(g(S,z,B),"linear"!==O&&"-"!==O||S("rangemode"),L.isReversed()&&(L._m=-1)),L.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===O){a.log("Polar plots do not support date angular axes yet.");for(var F=0;F<k.length;F++)k[F].visible=!1;O=I.type=L.type="linear"}S("linear"===O?"thetaunit":"period");var N=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[N])}if(p(I,L,S,L.type,{tickSuffixDflt:"degrees"===L.thetaunit?"°":void 0}),D){var U,j,V,H,q,G,W,Y,Z,X,K=l.font||{};j=(U=S("color"))===I.color?U:K.color,V=K.size,H=K.family,q=K.weight,G=K.style,W=K.variant,Y=K.textcase,Z=K.lineposition,X=K.shadow,u(I,L,S,L.type),h(I,L,S,L.type,{font:{weight:q,style:G,variant:W,textcase:Y,lineposition:Z,shadow:X,color:j,size:V,family:H},noAutotickangles:"angularaxis"===A,noTicklabelshift:!0,noTicklabelstandoff:!0}),f(I,L,S,{outerTicks:!0}),y(I,L,S,{dfltColor:U,bgColor:l.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m[A]}),S("layer"),"radialaxis"===A&&(S("side"),S("angle",T[0]),S("title.text"),a.coerceFont(S,"title.font",{weight:q,style:G,variant:W,textcase:Y,lineposition:Z,shadow:X,color:j,size:a.bigFont(V),family:H}))}"category"!==O&&S("hoverformat"),L._input=I}"category"===n.angularaxis.type&&i("gridshape")}r.exports=function(r,n,i){l(r,n,i,{type:b.name,attributes:m,handleDefaults:w,font:n.font,autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,fullData:i,layoutOut:n})}},62400:function(r,n,i){var a=i(33428),o=i(49760),s=i(24040),l=i(3400),c=l.strRotate,u=l.strTranslate,f=i(76308),h=i(43616),p=i(7316),d=i(54460),y=i(78344),g=i(57696),v=i(19280).doAutoRange,m=i(51184),x=i(86476),b=i(93024),_=i(81668),w=i(22676).prepSelect,T=i(22676).selectOnClick,A=i(22676).clearOutline,k=i(93972),M=i(73696),S=i(39172).redrawReglTraces,E=i(84284).MID_SHIFT,I=i(39360),L=i(57384),C=i(36416),O=C.smith,D=C.reactanceArc,P=C.resistanceArc,B=C.smithTransform,R=l._,z=l.mod,F=l.deg2rad,N=l.rad2deg;function U(r,n,i){this.isSmith=i||!1,this.id=n,this.gd=r,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var a=r._fullLayout,o="clip"+a._uid+n;this.clipIds.forTraces=o+"-for-traces",this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=a["_"+(i?"smith":"polar")+"layer"].append("g").attr("class",n),this.getHole=function(r){return this.isSmith?0:r.hole},this.getSector=function(r){return this.isSmith?[0,360]:r.sector},this.getRadial=function(r){return this.isSmith?r.realaxis:r.radialaxis},this.getAngular=function(r){return this.isSmith?r.imaginaryaxis:r.angularaxis},i||(this.radialTickLayout=null,this.angularTickLayout=null)}var j=U.prototype;function V(r){var n=r.ticks+String(r.ticklen)+String(r.showticklabels);return"side"in r&&(n+=r.side),n}function H(r,n){return n[l.findIndexOfMin(n,function(n){return l.angleDist(r,n)})]}function q(r,n,i){return n?(r.attr("display",null),r.attr(i)):r&&r.attr("display","none"),r}r.exports=function(r,n,i){return new U(r,n,i)},j.plot=function(r,n){for(var i=n[this.id],a=!1,o=0;o<r.length;o++)if(!1===r[o][0].trace.cliponaxis){a=!0;break}this._hasClipOnAxisFalse=a,this.updateLayers(n,i),this.updateLayout(n,i),p.generalUpdatePerTraceModule(this.gd,this,r,i),this.updateFx(n,i),this.isSmith&&(delete i.realaxis.range,delete i.imaginaryaxis.range)},j.updateLayers=function(r,n){var i=this.isSmith,o=this.layers,s=this.getRadial(n),l=this.getAngular(n),c=I.layerNames,u=c.indexOf("frontplot"),f=c.slice(0,u),h="below traces"===l.layer,p="below traces"===s.layer;h&&f.push("angular-line"),p&&f.push("radial-line"),h&&f.push("angular-axis"),p&&f.push("radial-axis"),f.push("frontplot"),h||f.push("angular-line"),p||f.push("radial-line"),h||f.push("angular-axis"),p||f.push("radial-axis");var d=(i?"smith":"polar")+"sublayer",y=this.framework.selectAll("."+d).data(f,String);y.enter().append("g").attr("class",function(r){return d+" "+r}).each(function(r){var n=o[r]=a.select(this);switch(r){case"frontplot":i||n.append("g").classed("barlayer",!0),n.append("g").classed("scatterlayer",!0);break;case"backplot":n.append("g").classed("maplayer",!0);break;case"plotbg":o.bg=n.append("path");break;case"radial-grid":case"angular-grid":n.style("fill","none");break;case"radial-line":n.append("line").style("fill","none");break;case"angular-line":n.append("path").style("fill","none")}}),y.order()},j.updateLayout=function(r,n){var i=this.layers,a=r._size,o=this.getRadial(n),s=this.getAngular(n),l=n.domain.x,c=n.domain.y;this.xOffset=a.l+a.w*l[0],this.yOffset=a.t+a.h*(1-c[1]);var p=this.xLength=a.w*(l[1]-l[0]),d=this.yLength=a.h*(c[1]-c[0]),y=this.getSector(n);this.sectorInRad=y.map(F);var g,v,m,x,b,_,w,T,A,k,M,S,E,I,L=this.sectorBBox=(v=y[0],m=y[1]-v,b=(x=z(v,360))+m,_=Math.cos(F(x)),w=Math.sin(F(x)),T=Math.cos(F(b)),A=Math.sin(F(b)),g=x<=90&&b>=90||x>90&&b>=450?1:w<=0&&A<=0?0:Math.max(w,A),[x<=180&&b>=180||x>180&&b>=540?-1:_>=0&&T>=0?0:Math.min(_,T),x<=270&&b>=270||x>270&&b>=630?-1:w>=0&&A>=0?0:Math.min(w,A),b>=360?1:_<=0&&T<=0?0:Math.max(_,T),g]),C=L[2]-L[0],O=Math.abs((L[3]-L[1])/C);d/p>O?(k=p,I=(d-(M=p*O))/a.h/2,S=[l[0],l[1]],E=[c[0]+I,c[1]-I]):(M=d,I=(p-(k=d/O))/a.w/2,S=[l[0]+I,l[1]-I],E=[c[0],c[1]]),this.xLength2=k,this.yLength2=M,this.xDomain2=S,this.yDomain2=E;var D,P=this.xOffset2=a.l+a.w*S[0],B=this.yOffset2=a.t+a.h*(1-E[1]),R=this.radius=k/C,N=this.innerRadius=this.getHole(n)*R,U=this.cx=P-R*L[0],j=this.cy=B+R*L[3],V=this.cxx=U-P,H=this.cyy=j-B,q=o.side;"counterclockwise"===q?(D=q,q="top"):"clockwise"===q&&(D=q,q="bottom"),this.radialAxis=this.mockAxis(r,n,o,{_id:"x",side:q,_trueSide:D,domain:[N/a.w,R/a.w]}),this.angularAxis=this.mockAxis(r,n,s,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(r,n),this.updateAngularAxis(r,n),this.updateRadialAxis(r,n),this.updateRadialAxisTitle(r,n),this.xaxis=this.mockCartesianAxis(r,n,{_id:"x",domain:S}),this.yaxis=this.mockCartesianAxis(r,n,{_id:"y",domain:E});var G=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",G).attr("transform",u(V,H)),i.frontplot.attr("transform",u(P,B)).call(h.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),i.bg.attr("d",G).attr("transform",u(U,j)).call(f.fill,n.bgcolor)},j.mockAxis=function(r,n,i,a){var o=l.extendFlat({},i,a);return g(o,n,r),o},j.mockCartesianAxis=function(r,n,i){var a=this,o=a.isSmith,s=i._id,c=l.extendFlat({type:"linear"},i);y(c,r);var u={x:[0,2],y:[1,3]};return c.setRange=function(){var r=a.sectorBBox,i=u[s],o=a.radialAxis._rl,l=(o[1]-o[0])/(1-a.getHole(n));c.range=[r[i[0]]*l,r[i[1]]*l]},c.isPtWithinRange="x"!==s||o?function(){return!0}:function(r){return a.isPtInside(r)},c.setRange(),c.setScale(),c},j.doAutoRange=function(r,n){var i=this.gd,a=this.radialAxis,o=this.getRadial(n);v(i,a);var s=a.range;if(o.range=s.slice(),o._input.range=s.slice(),a._rl=[a.r2l(s[0],null,"gregorian"),a.r2l(s[1],null,"gregorian")],void 0!==a.minallowed){var l=a.r2l(a.minallowed);a._rl[0]>a._rl[1]?a._rl[1]=Math.max(a._rl[1],l):a._rl[0]=Math.max(a._rl[0],l)}if(void 0!==a.maxallowed){var c=a.r2l(a.maxallowed);a._rl[0]<a._rl[1]?a._rl[1]=Math.min(a._rl[1],c):a._rl[0]=Math.min(a._rl[0],c)}},j.updateRadialAxis=function(r,n){var i=this,a=i.gd,o=i.layers,s=i.radius,h=i.innerRadius,p=i.cx,y=i.cy,g=i.getRadial(n),v=z(i.getSector(n)[0],360),m=i.radialAxis,x=h<s,b=i.isSmith;b||(i.fillViewInitialKey("radialaxis.angle",g.angle),i.fillViewInitialKey("radialaxis.range",m.range.slice()),m.setGeometry()),"auto"===m.tickangle&&v>90&&v<=270&&(m.tickangle=180);var _=b?function(r){var n=B(i,O([r.x,0]));return u(n[0]-p,n[1]-y)}:function(r){return u(m.l2p(r.x)+h,0)},w=b?function(r){return P(i,r.x,-1/0,1/0)}:function(r){return i.pathArc(m.r2p(r.x)+h)},T=V(g);if(i.radialTickLayout!==T&&(o["radial-axis"].selectAll(".xtick").remove(),i.radialTickLayout=T),x){m.setScale();var A=0,k=b?(m.tickvals||[]).filter(function(r){return r>=0}).map(function(r){return d.tickText(m,r,!0,!1)}):d.calcTicks(m),M=b?k:d.clipEnds(m,k),S=d.getTickSigns(m)[2];b&&(("top"===m.ticks&&"bottom"===m.side||"bottom"===m.ticks&&"top"===m.side)&&(S=-S),"top"===m.ticks&&"top"===m.side&&(A=-m.ticklen),"bottom"===m.ticks&&"bottom"===m.side&&(A=m.ticklen)),d.drawTicks(a,m,{vals:k,layer:o["radial-axis"],path:d.makeTickPath(m,0,S),transFn:_,crisp:!1}),d.drawGrid(a,m,{vals:M,layer:o["radial-grid"],path:w,transFn:l.noop,crisp:!1}),d.drawLabels(a,m,{vals:k,layer:o["radial-axis"],transFn:_,labelFns:d.makeLabelFns(m,A)})}var E=i.radialAxisAngle=i.vangles?N(H(F(g.angle),i.vangles)):g.angle,I=u(p,y),L=I+c(-E);q(o["radial-axis"],x&&(g.showticklabels||g.ticks),{transform:L}),q(o["radial-grid"],x&&g.showgrid,{transform:b?"":I}),q(o["radial-line"].select("line"),x&&g.showline,{x1:b?-s:h,y1:0,x2:s,y2:0,transform:L}).attr("stroke-width",g.linewidth).call(f.stroke,g.linecolor)},j.updateRadialAxisTitle=function(r,n,i){if(!this.isSmith){var a=this.gd,o=this.radius,s=this.cx,l=this.cy,c=this.getRadial(n),u=this.id+"title",f=0;if(c.title){var p=h.bBox(this.layers["radial-axis"].node()).height,d=c.title.font.size,y=c.side;f="top"===y?d:"counterclockwise"===y?-(p+.4*d):p+.8*d}var g=void 0!==i?i:this.radialAxisAngle,v=F(g),m=Math.cos(v),x=Math.sin(v),b=s+o/2*m+f*x,w=l-o/2*x+f*m;this.layers["radial-axis-title"]=_.draw(a,u,{propContainer:c,propName:this.id+".radialaxis.title",placeholder:R(a,"Click to enter radial axis title"),attributes:{x:b,y:w,"text-anchor":"middle"},transform:{rotate:-g}})}},j.updateAngularAxis=function(r,n){var i=this,a=i.gd,o=i.layers,s=i.radius,h=i.innerRadius,p=i.cx,y=i.cy,g=i.getAngular(n),v=i.angularAxis,m=i.isSmith;m||(i.fillViewInitialKey("angularaxis.rotation",g.rotation),v.setGeometry(),v.setScale());var x=m?function(r){var n=B(i,O([0,r.x]));return Math.atan2(n[0]-p,n[1]-y)-Math.PI/2}:function(r){return v.t2g(r.x)};"linear"===v.type&&"radians"===v.thetaunit&&(v.tick0=N(v.tick0),v.dtick=N(v.dtick));var b=function(r){return u(p+s*Math.cos(r),y-s*Math.sin(r))},_=m?function(r){var n=B(i,O([0,r.x]));return u(n[0],n[1])}:function(r){return b(x(r))},w=m?function(r){var n=B(i,O([0,r.x])),a=Math.atan2(n[0]-p,n[1]-y)-Math.PI/2;return u(n[0],n[1])+c(-N(a))}:function(r){var n=x(r);return b(n)+c(-N(n))},T=m?function(r){return D(i,r.x,0,1/0)}:function(r){var n=x(r),i=Math.cos(n),a=Math.sin(n);return"M"+[p+h*i,y-h*a]+"L"+[p+s*i,y-s*a]},A=d.makeLabelFns(v,0).labelStandoff,k=V(g);i.angularTickLayout!==k&&(o["angular-axis"].selectAll("."+v._id+"tick").remove(),i.angularTickLayout=k);var M,S=m?[1/0].concat(v.tickvals||[]).map(function(r){return d.tickText(v,r,!0,!1)}):d.calcTicks(v);if(m&&(S[0].text="∞",S[0].fontSize*=1.75),"linear"===n.gridshape?(M=S.map(x),0>l.angleDelta(M[0],M[1])&&(M=M.slice().reverse())):M=null,i.vangles=M,"category"===v.type&&(S=S.filter(function(r){return l.isAngleInsideSector(x(r),i.sectorInRad)})),v.visible){var I="inside"===v.ticks?-1:1,L=(v.linewidth||1)/2;d.drawTicks(a,v,{vals:S,layer:o["angular-axis"],path:"M"+I*L+",0h"+I*v.ticklen,transFn:w,crisp:!1}),d.drawGrid(a,v,{vals:S,layer:o["angular-grid"],path:T,transFn:l.noop,crisp:!1}),d.drawLabels(a,v,{vals:S,layer:o["angular-axis"],repositionOnUpdate:!0,transFn:_,labelFns:{xFn:function(r){return Math.cos(x(r))*A},yFn:function(r){var n=x(r),i=Math.sin(n)>0?.2:1;return-Math.sin(n)*(A+r.fontSize*i)+Math.abs(Math.cos(n))*(r.fontSize*E)},anchorFn:function(r){var n=Math.cos(x(r));return .1>Math.abs(n)?"middle":n>0?"start":"end"},heightFn:function(r,n,i){return -.5*(1+Math.sin(x(r)))*i}}})}q(o["angular-line"].select("path"),g.showline,{d:i.pathSubplot(),transform:u(p,y)}).attr("stroke-width",g.linewidth).call(f.stroke,g.linecolor)},j.updateFx=function(r,n){this.gd._context.staticPlot||(this.isSmith||(this.updateAngularDrag(r),this.updateRadialDrag(r,n,0),this.updateRadialDrag(r,n,1)),this.updateHoverAndMainDrag(r))},j.updateHoverAndMainDrag=function(r){var n,i,c=this,f=c.isSmith,h=c.gd,p=c.layers,d=r._zoomlayer,y=I.MINZOOM,g=I.OFFEDGE,v=c.radius,_=c.innerRadius,k=c.cx,M=c.cy,S=c.cxx,E=c.cyy,C=c.sectorInRad,O=c.vangles,D=c.radialAxis,P=L.clampTiny,B=L.findXYatLength,R=L.findEnclosingVertexAngles,z=I.cornerHalfWidth,F=I.cornerLen/2,N=m.makeDragger(p,"path","maindrag",!1===r.dragmode?"none":"crosshair");a.select(N).attr("d",c.pathSubplot()).attr("transform",u(k,M)),N.onmousemove=function(r){b.hover(h,r,c.id),h._fullLayout._lasthover=N,h._fullLayout._hoversubplot=c.id},N.onmouseout=function(r){h._dragging||x.unhover(h,r)};var U,j,V,H,q,G,W,Y,Z,X={element:N,gd:h,subplot:c.id,plotinfo:{id:c.id,xaxis:c.xaxis,yaxis:c.yaxis},xaxes:[c.xaxis],yaxes:[c.yaxis]};function K(r,n){return Math.sqrt(r*r+n*n)}function J(r,n){return Math.atan2(E-n,r-S)}function $(r,n){return[r*Math.cos(n),r*Math.sin(-n)]}function Q(r,n){if(0===r)return c.pathSector(2*z);var i=F/r,a=n-i,o=n+i,s=Math.max(0,Math.min(r,v)),l=s-z,u=s+z;return"M"+$(l,a)+"A"+[l,l]+" 0,0,0 "+$(l,o)+"L"+$(u,o)+"A"+[u,u]+" 0,0,1 "+$(u,a)+"Z"}function tt(r,n,i){if(0===r)return c.pathSector(2*z);var a,o,s,l,u=$(r,n),f=$(r,i),h=P((u[0]+f[0])/2),p=P((u[1]+f[1])/2);if(h&&p){var d=p/h,y=-1/d,g=B(z,d,h,p);s=B(F,y,g[0][0],g[0][1]),l=B(F,y,g[1][0],g[1][1])}else p?(a=F,o=z):(a=z,o=F),s=[[h-a,p-o],[h+a,p-o]],l=[[h-a,p+o],[h+a,p+o]];return"M"+s.join("L")+"L"+l.reverse().join("L")+"Z"}function te(r,n){return n=Math.max(Math.min(n,v),_),r<g?r=0:v-r<g?r=v:n<g?n=0:v-n<g&&(n=v),Math.abs(n-r)>y?(r<n?(V=r,H=n):(V=n,H=r),!0):(V=null,H=null,!1)}function tr(r,n){r=r||q,n=n||"M0,0Z",Y.attr("d",r),Z.attr("d",n),m.transitionZoombox(Y,Z,G,W),G=!0;var i={};ts(i),h.emit("plotly_relayouting",i)}function tn(r,a){var o,s,l=U+(r*=n),u=j+(a*=i),f=K(U-S,j-E),h=Math.min(K(l-S,u-E),v),p=J(U,j);te(f,h)&&(o=q+c.pathSector(H),V&&(o+=c.pathSector(V)),s=Q(V,p)+Q(H,p)),tr(o,s)}function ti(r,n,i,a){var o=L.findIntersectionXY(i,a,i,[r-S,E-n]);return K(o[0],o[1])}function ta(r,n){var i,a,o=U+r,s=j+n,l=J(U,j),u=J(o,s),f=R(l,O),h=R(u,O);te(ti(U,j,f[0],f[1]),Math.min(ti(o,s,h[0],h[1]),v))&&(i=q+c.pathSector(H),V&&(i+=c.pathSector(V)),a=[tt(V,f[0],f[1]),tt(H,f[0],f[1])].join(" ")),tr(i,a)}function to(){if(m.removeZoombox(h),null!==V&&null!==H){var r={};ts(r),m.showDoubleClickNotifier(h),s.call("_guiRelayout",h,r)}}function ts(r){var n=D._rl,i=(n[1]-n[0])/(1-_/v)/v,a=[n[0]+(V-_)*i,n[0]+(H-_)*i];r[c.id+".radialaxis.range"]=a}function tl(r,n){var i=h._fullLayout.clickmode;if(m.removeZoombox(h),2===r){var a={};for(var o in c.viewInitial)a[c.id+"."+o]=c.viewInitial[o];h.emit("plotly_doubleclick",null),s.call("_guiRelayout",h,a)}i.indexOf("select")>-1&&1===r&&T(n,h,[c.xaxis],[c.yaxis],c.id,X),i.indexOf("event")>-1&&b.click(h,n,c.id)}X.prepFn=function(r,a,s){var u=h._fullLayout.dragmode,p=N.getBoundingClientRect();h._fullLayout._calcInverseTransform(h);var y=h._fullLayout._invTransform;n=h._fullLayout._invScaleX,i=h._fullLayout._invScaleY;var g=l.apply3DTransform(y)(a-p.left,s-p.top);if(U=g[0],j=g[1],O){var x=L.findPolygonOffset(v,C[0],C[1],O);U+=S+x[0],j+=E+x[1]}switch(u){case"zoom":X.clickFn=tl,f||(X.moveFn=O?ta:tn,X.doneFn=to,V=null,H=null,q=c.pathSubplot(),G=!1,W=o(h._fullLayout[c.id].bgcolor).getLuminance(),(Y=m.makeZoombox(d,W,k,M,q)).attr("fill-rule","evenodd"),Z=m.makeCorners(d,k,M),A(h));break;case"select":case"lasso":w(r,a,s,X,u)}},x.init(X)},j.updateRadialDrag=function(r,n,i){var o=this,f=o.gd,h=o.layers,p=o.radius,d=o.innerRadius,y=o.cx,g=o.cy,v=o.radialAxis,b=I.radialDragBoxSize,_=b/2;if(v.visible){var w,T,k,E=F(o.radialAxisAngle),L=v._rl,C=L[0],O=L[1],D=L[i],P=.75*(L[1]-L[0])/(1-o.getHole(n))/p;i?(w=y+(p+_)*Math.cos(E),T=g-(p+_)*Math.sin(E),k="radialdrag"):(w=y+(d-_)*Math.cos(E),T=g-(d-_)*Math.sin(E),k="radialdrag-inner");var B,R,z,U=m.makeRectDragger(h,k,"crosshair",-_,-_,b,b),j={element:U,gd:f};!1===r.dragmode&&(j.dragmode=!1),q(a.select(U),v.visible&&d<p,{transform:u(w,T)}),j.prepFn=function(){B=null,R=null,z=null,j.moveFn=V,j.doneFn=G,A(f)},j.clampFn=function(r,n){return Math.sqrt(r*r+n*n)<I.MINDRAG&&(r=0,n=0),[r,n]},x.init(j)}function V(r,n){if(B)B(r,n);else{var a=[r,-n],s=[Math.cos(E),Math.sin(E)],c=Math.abs(l.dot(a,s)/Math.sqrt(l.dot(a,a)));isNaN(c)||(B=c<.5?W:Y)}var u={};null!==R?u[o.id+".radialaxis.angle"]=R:null!==z&&(u[o.id+".radialaxis.range["+i+"]"]=z),f.emit("plotly_relayouting",u)}function G(){null!==R?s.call("_guiRelayout",f,o.id+".radialaxis.angle",R):null!==z&&s.call("_guiRelayout",f,o.id+".radialaxis.range["+i+"]",z)}function W(r,n){if(0!==i){R=Math.atan2(g-(T+n),w+r-y),o.vangles&&(R=H(R,o.vangles)),R=N(R);var a=u(y,g)+c(-R);h["radial-axis"].attr("transform",a),h["radial-line"].select("line").attr("transform",a);var s=o.gd._fullLayout,l=s[o.id];o.updateRadialAxisTitle(s,l,R)}}function Y(r,n){var a=l.dot([r,-n],[Math.cos(E),Math.sin(E)]);if(z=D-P*a,P>0==(i?z>C:z<O)){var c=f._fullLayout,u=c[o.id];v.range[i]=z,v._rl[i]=z,o.updateRadialAxis(c,u),o.xaxis.setRange(),o.xaxis.setScale(),o.yaxis.setRange(),o.yaxis.setScale();var h=!1;for(var p in o.traceHash){var d=o.traceHash[p],y=l.filterVisible(d);d[0][0].trace._module.plot(f,o,y,u),s.traceIs(p,"gl")&&y.length&&(h=!0)}h&&(M(f),S(f))}else z=null}},j.updateAngularDrag=function(r){var n=this,i=n.gd,o=n.layers,f=n.radius,p=n.angularAxis,d=n.cx,y=n.cy,g=n.cxx,v=n.cyy,b=I.angularDragBoxSize,_=m.makeDragger(o,"path","angulardrag",!1===r.dragmode?"none":"move"),w={element:_,gd:i};function T(r,n){return Math.atan2(v+b-n,r-g-b)}!1===r.dragmode?w.dragmode=!1:a.select(_).attr("d",n.pathAnnulus(f,f+b)).attr("transform",u(d,y)).call(k,"move");var E,L,C,O,D,P,B=o.frontplot.select(".scatterlayer").selectAll(".trace"),R=B.selectAll(".point"),z=B.selectAll(".textpoint");function F(f,m){var x=n.gd._fullLayout,b=x[n.id],_=N(T(E+f*r._invScaleX,L+m*r._invScaleY)-P);if(O=C+_,o.frontplot.attr("transform",u(n.xOffset2,n.yOffset2)+c([-_,g,v])),n.vangles){D=n.radialAxisAngle+_;var w=u(d,y)+c(-_),A=u(d,y)+c(-D);o.bg.attr("transform",w),o["radial-grid"].attr("transform",w),o["radial-axis"].attr("transform",A),o["radial-line"].select("line").attr("transform",A),n.updateRadialAxisTitle(x,b,D)}else n.clipPaths.forTraces.select("path").attr("transform",u(g,v)+c(_));R.each(function(){var r=a.select(this),n=h.getTranslate(r);r.attr("transform",u(n.x,n.y)+c([_]))}),z.each(function(){var r=a.select(this),n=r.select("text"),i=h.getTranslate(r);r.attr("transform",c([_,n.attr("x"),n.attr("y")])+u(i.x,i.y))}),p.rotation=l.modHalf(O,360),n.updateAngularAxis(x,b),n._hasClipOnAxisFalse&&!l.isFullCircle(n.sectorInRad)&&B.call(h.hideOutsideRangePoints,n);var k=!1;for(var I in n.traceHash)if(s.traceIs(I,"gl")){var F=n.traceHash[I],j=l.filterVisible(F);F[0][0].trace._module.plot(i,n,j,b),j.length&&(k=!0)}k&&(M(i),S(i));var V={};U(V),i.emit("plotly_relayouting",V)}function U(r){r[n.id+".angularaxis.rotation"]=O,n.vangles&&(r[n.id+".radialaxis.angle"]=D)}function j(){z.select("text").attr("transform",null);var r={};U(r),s.call("_guiRelayout",i,r)}w.prepFn=function(a,o,s){C=r[n.id].angularaxis.rotation;var c=_.getBoundingClientRect();E=o-c.left,L=s-c.top,i._fullLayout._calcInverseTransform(i);var u=l.apply3DTransform(r._invTransform)(E,L);E=u[0],L=u[1],P=T(E,L),w.moveFn=F,w.doneFn=j,A(i)},n.vangles&&!l.isFullCircle(n.sectorInRad)&&(w.prepFn=l.noop,k(a.select(_),null)),x.init(w)},j.isPtInside=function(r){if(this.isSmith)return!0;var n=this.sectorInRad,i=this.vangles,a=this.angularAxis.c2g(r.theta),o=this.radialAxis,s=o.c2l(r.r),c=o._rl;return(i?L.isPtInsidePolygon:l.isPtInsideSector)(s,a,c,n,i)},j.pathArc=function(r){var n=this.sectorInRad,i=this.vangles;return(i?L.pathPolygon:l.pathArc)(r,n[0],n[1],i)},j.pathSector=function(r){var n=this.sectorInRad,i=this.vangles;return(i?L.pathPolygon:l.pathSector)(r,n[0],n[1],i)},j.pathAnnulus=function(r,n){var i=this.sectorInRad,a=this.vangles;return(a?L.pathPolygonAnnulus:l.pathAnnulus)(r,n,i[0],i[1],a)},j.pathSubplot=function(){var r=this.innerRadius,n=this.radius;return r?this.pathAnnulus(r,n):this.pathSector(n)},j.fillViewInitialKey=function(r,n){r in this.viewInitial||(this.viewInitial[r]=n)}},57696:function(r,n,i){var a=i(3400),o=i(78344),s=a.deg2rad,l=a.rad2deg;r.exports=function(r,n,i){switch(o(r,i),r._id){case"x":case"radialaxis":var c;c=n._subplot,r.setGeometry=function(){var n=r._rl[0],i=r._rl[1],a=c.innerRadius,o=(c.radius-a)/(i-n),s=a/o,l=n>i?function(r){return r<=0}:function(r){return r>=0};r.c2g=function(i){var a=r.c2l(i)-n;return(l(a)?a:0)+s},r.g2c=function(i){return r.l2c(i+n-s)},r.g2p=function(r){return r*o},r.c2p=function(n){return r.g2p(r.c2g(n))}};break;case"angularaxis":!function(r,n){var i=r.type;if("linear"===i){var o=r.d2c,c=r.c2d;r.d2c=function(r,n){var i;return i=o(r),"degrees"===n?s(i):i},r.c2d=function(r,n){return c("degrees"===n?l(r):r)}}r.makeCalcdata=function(n,i){var a,o,s=n[i],l=n._length,c=function(i){return r.d2c(i,n.thetaunit)};if(s)for(a=Array(l),o=0;o<l;o++)a[o]=c(s[o]);else{var u=i+"0",f="d"+i,h=u in n?c(n[u]):0,p=n[f]?c(n[f]):(r.period||2*Math.PI)/l;for(a=Array(l),o=0;o<l;o++)a[o]=h+o*p}return a},r.setGeometry=function(){var o,c,u,f,h=n.sector,p=h.map(s),d={clockwise:-1,counterclockwise:1}[r.direction],y=s(r.rotation),g=function(r){return d*r+y},v=function(r){return(r-y)/d};switch(i){case"linear":c=o=a.identity,f=s,u=l,r.range=a.isFullCircle(p)?[h[0],h[0]+360]:p.map(v).map(l);break;case"category":var m=r._categories.length,x=r.period?Math.max(r.period,m):m;0===x&&(x=1),c=f=function(r){return 2*r*Math.PI/x},o=u=function(r){return r*x/Math.PI/2},r.range=[0,x]}r.c2g=function(r){return g(c(r))},r.g2c=function(r){return o(v(r))},r.t2g=function(r){return g(f(r))},r.g2t=function(r){return u(v(r))}}}(r,n)}}},55012:function(r){r.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(r){function n(r){return r<0?-1:r>0?1:0}function i(r){var n=r[0],i=r[1];if(!isFinite(n)||!isFinite(i))return[1,0];var a=(n+1)*(n+1)+i*i;return[(n*n+i*i-1)/a,2*i/a]}function a(r,n){var i=n[0],a=n[1];return[i*r.radius+r.cx,-a*r.radius+r.cy]}r.exports={smith:i,reactanceArc:function(r,n,o,s){var l=a(r,i([o,n])),c=l[0],u=l[1],f=a(r,i([s,n])),h=f[0],p=f[1];if(0===n)return["M"+c+","+u,"L"+h+","+p].join(" ");var d=1/Math.abs(n)*r.radius;return["M"+c+","+u,"A"+d+","+d+" 0 0,"+(n<0?1:0)+" "+h+","+p].join(" ")},resistanceArc:function(r,o,s,l){var c=1/(o+1)*r.radius,u=a(r,i([o,s])),f=u[0],h=u[1],p=a(r,i([o,l])),d=p[0],y=p[1];if(n(s)!==n(l)){var g=a(r,i([o,0]));return["M"+f+","+h,"A"+c+","+c+" 0 0,"+(0<s?0:1)+" "+g[0]+","+g[1],"A"+c+","+c+" 0 0,"+(l<0?0:1)+d+","+y].join(" ")}return["M"+f+","+h,"A"+c+","+c+" 0 0,"+(l<s?0:1)+" "+d+","+y].join(" ")},smithTransform:a}},47788:function(r,n,i){var a=i(84888).KY,o=i(3400).counterRegex,s=i(62400),l=i(55012),c=l.attr,u=l.name,f=o(u),h={};h[c]={valType:"subplotid",dflt:u,editType:"calc"},r.exports={attr:c,name:u,idRoot:u,idRegex:f,attrRegex:f,attributes:h,layoutAttributes:i(6183),supplyLayoutDefaults:i(22836),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots[u],l=0;l<o.length;l++){var c=o[l],f=a(i,u,c),h=n[c]._subplot;h||(h=s(r,c,!0),n[c]._subplot=h),h.plot(f,n,r._promises)}},clean:function(r,n,i,a){for(var o=a._subplots[u]||[],s=0;s<o.length;s++){var l=o[s],c=a[l]._subplot;if(!n[l]&&c)for(var f in c.framework.remove(),c.clipPaths)c.clipPaths[f].remove()}},toSVG:i(57952).toSVG}},6183:function(r,n,i){var a=i(22548),o=i(94724),s=i(86968).u,l=i(3400).extendFlat,c=i(67824).overrideAll,u=c({color:o.color,showline:l({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:l({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash},"plot","from-root"),f=c({ticklen:o.ticklen,tickwidth:l({},o.tickwidth,{dflt:2}),tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,tickfont:o.tickfont,tickformat:o.tickformat,hoverformat:o.hoverformat,layer:o.layer},"plot","from-root"),h=l({visible:l({},o.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:l({},o.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},u,f),p=l({visible:l({},o.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:o.ticks,editType:"calc"},u,f);r.exports={domain:s({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:a.background},realaxis:h,imaginaryaxis:p,editType:"calc"}},22836:function(r,n,i){var a,o,s,l=i(3400),c=i(76308),u=i(31780),f=i(168),h=i(84888).op,p=i(42568),d=i(95936),y=i(42136),g=i(78344),v=i(6183),m=i(55012),x=m.axisNames,b=(a=function(r){return l.isTypedArray(r)&&(r=Array.from(r)),r.slice().reverse().map(function(r){return-r}).concat([0]).concat(r)},o=String,s={},function(r){var n=o?o(r):r;if(n in s)return s[n];var i=a(r);return s[n]=i,i});function _(r,n,i,a){var o=i("bgcolor");a.bgColor=c.combine(o,a.paper_bgcolor);var s,f=h(a.fullData,m.name,a.id),_=a.layoutOut;function w(r,n){return i(s+"."+r,n)}for(var T=0;T<x.length;T++){s=x[T],l.isPlainObject(r[s])||(r[s]={});var A=r[s],k=u.newContainer(n,s);k._id=k._name=s,k._attr=a.id+"."+s,k._traceIndices=f.map(function(r){return r._expandedIndex});var M=w("visible");if(k.type="linear",g(k,_),p(A,k,w,k.type),M){var S,E,I,L,C="realaxis"===s;C&&w("side"),C?w("tickvals"):w("tickvals",b(n.realaxis.tickvals||v.realaxis.tickvals.dflt)),l.isTypedArray(k.tickvals)&&(k.tickvals=Array.from(k.tickvals));var O=a.font||{};M&&(E=(S=w("color"))===A.color?S:O.color,I=O.size,L=O.family),d(A,k,w,k.type,{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noAng:!C,noExp:!0,font:{color:E,size:I,family:L}}),l.coerce2(r,n,v,s+".ticklen"),l.coerce2(r,n,v,s+".tickwidth"),l.coerce2(r,n,v,s+".tickcolor",n.color),w("ticks")||(delete n[s].ticklen,delete n[s].tickwidth,delete n[s].tickcolor),y(A,k,w,{dfltColor:S,bgColor:a.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[s]}),w("layer")}w("hoverformat"),delete k.type,k._input=A}}r.exports=function(r,n,i){f(r,n,i,{noUirevision:!0,type:m.name,attributes:v,handleDefaults:_,font:n.font,paper_bgcolor:n.paper_bgcolor,fullData:i,layoutOut:n})}},168:function(r,n,i){var a=i(3400),o=i(31780),s=i(86968).Q;r.exports=function(r,n,i,l){var c,u,f=l.type,h=l.attributes,p=l.handleDefaults,d=l.partition||"x",y=n._subplots[f],g=y.length,v=g&&y[0].replace(/\d+$/,"");function m(r,n){return a.coerce(c,u,h,r,n)}for(var x=0;x<g;x++){var b=y[x];c=r[b]?r[b]:r[b]={},u=o.newContainer(n,b,v),l.noUirevision||m("uirevision",n.uirevision);var _={};_[d]=[x/g,(x+1)/g],s(u,n,m,_),l.id=b,p(c,u,m,l)}}},21776:function(r,n,i){var a=i(26880);function o(r){var n=r.description?" "+r.description:"",i=r.keys||[];if(i.length>0){for(var a=[],o=0;o<i.length;o++)a[o]="`"+i[o]+"`";n+="Finally, the template string has access to ",n=1===i.length?n+"variable "+a[0]:n+"variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return n}a.FORMAT_LINK,a.DATE_FORMAT_LINK,n.Ks=function(r,n){r=r||{},o(n=n||{});var i={valType:"string",dflt:"",editType:r.editType||"none"};return!1!==r.arrayOk&&(i.arrayOk=!0),i},n.Gw=function(r,n){r=r||{},o(n=n||{});var i={valType:"string",dflt:"",editType:r.editType||"calc"};return!1!==r.arrayOk&&(i.arrayOk=!0),i},n.ye=function(r,n){return n=n||{},(r=r||{}).newshape,o(n),{valType:"string",dflt:"",editType:r.editType||"arraydraw"}}},19352:function(r,n,i){var a=i(24696),o=i(84888).KY,s=i(3400).counterRegex,l="ternary";n.name=l;var c=n.attr="subplot";n.idRoot=l,n.idRegex=n.attrRegex=s(l),(n.attributes={})[c]={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=i(86379),n.supplyLayoutDefaults=i(38536),n.plot=function(r){for(var n=r._fullLayout,i=r.calcdata,s=n._subplots[l],c=0;c<s.length;c++){var u=s[c],f=o(i,l,u),h=n[u]._subplot;h||(h=new a({id:u,graphDiv:r,container:n._ternarylayer.node()},n),n[u]._subplot=h),h.plot(f,n,r._promises)}},n.clean=function(r,n,i,a){for(var o=a._subplots[l]||[],s=0;s<o.length;s++){var c=o[s],u=a[c]._subplot;!n[c]&&u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},86379:function(r,n,i){var a=i(22548),o=i(86968).u,s=i(94724),l=i(67824).overrideAll,c=i(92880).extendFlat,u={title:{text:s.title.text,font:s.title.font},color:s.color,tickmode:s.minor.tickmode,nticks:c({},s.nticks,{dflt:6,min:1}),tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:c({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:c({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash,layer:s.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},f=r.exports=l({domain:o({name:"ternary"}),bgcolor:{valType:"color",dflt:a.background},sum:{valType:"number",dflt:1,min:0},aaxis:u,baxis:u,caxis:u},"plot","from-root");f.uirevision={valType:"any",editType:"none"},f.aaxis.uirevision=f.baxis.uirevision=f.caxis.uirevision={valType:"any",editType:"none"}},38536:function(r,n,i){var a=i(76308),o=i(31780),s=i(3400),l=i(168),c=i(95936),u=i(42568),f=i(25404),h=i(26332),p=i(42136),d=i(86379),y=["aaxis","baxis","caxis"];function g(r,n,i,l){var g,v,m,x=i("bgcolor"),b=i("sum");l.bgColor=a.combine(x,l.paper_bgcolor);for(var _=0;_<y.length;_++)v=r[g=y[_]]||{},(m=o.newContainer(n,g))._name=g,function(r,n,i,a){var o=d[n._name];function l(i,a){return s.coerce(r,n,o,i,a)}l("uirevision",a.uirevision),n.type="linear";var y=l("color"),g=y!==o.color.dflt?y:i.font.color,v=n._name.charAt(0).toUpperCase(),m="Component "+v,x=l("title.text",m);n._hovertitle=x===m?x:v,s.coerceFont(l,"title.font",i.font,{overrideDflt:{size:s.bigFont(i.font.size),color:g}}),l("min"),h(r,n,l,"linear"),u(r,n,l,"linear"),c(r,n,l,"linear",{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0}),f(r,n,l,{outerTicks:!0}),l("showticklabels")&&(s.coerceFont(l,"tickfont",i.font,{overrideDflt:{color:g}}),l("tickangle"),l("tickformat")),p(r,n,l,{dfltColor:y,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),l("hoverformat"),l("layer")}(v,m,l,n);var w=n.aaxis,T=n.baxis,A=n.caxis;w.min+T.min+A.min>=b&&(w.min=0,T.min=0,A.min=0,r.aaxis&&delete r.aaxis.min,r.baxis&&delete r.baxis.min,r.caxis&&delete r.caxis.min)}r.exports=function(r,n,i){l(r,n,i,{type:"ternary",attributes:d,handleDefaults:g,font:n.font,paper_bgcolor:n.paper_bgcolor})}},24696:function(r,n,i){var a=i(33428),o=i(49760),s=i(24040),l=i(3400),c=l.strTranslate,u=l._,f=i(76308),h=i(43616),p=i(78344),d=i(92880).extendFlat,y=i(7316),g=i(54460),v=i(86476),m=i(93024),x=i(72760),b=x.freeMode,_=x.rectMode,w=i(81668),T=i(22676).prepSelect,A=i(22676).selectOnClick,k=i(22676).clearOutline,M=i(22676).clearSelectionsCache,S=i(33816);function E(r,n){this.id=r.id,this.graphDiv=r.graphDiv,this.init(n),this.makeFramework(n),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}r.exports=E;var I=E.prototype;I.init=function(r){this.container=r._ternarylayer,this.defs=r._defs,this.layoutId=r._uid,this.traceHash={},this.layers={}},I.plot=function(r,n){var i=n[this.id],a=n._size;this._hasClipOnAxisFalse=!1;for(var o=0;o<r.length;o++)if(!1===r[o][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(i),this.adjustLayout(i,a),y.generalUpdatePerTraceModule(this.graphDiv,this,r,i),this.layers.plotbg.select("path").call(f.fill,i.bgcolor)},I.makeFramework=function(r){var n=this.graphDiv,i=r[this.id],a=this.clipId="clip"+this.layoutId+this.id,o=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=l.ensureSingleById(r._clips,"clipPath",a,function(r){r.append("path").attr("d","M0,0Z")}),this.clipDefRelative=l.ensureSingleById(r._clips,"clipPath",o,function(r){r.append("path").attr("d","M0,0Z")}),this.plotContainer=l.ensureSingle(this.container,"g",this.id),this.updateLayers(i),h.setClipUrl(this.layers.backplot,a,n),h.setClipUrl(this.layers.grids,a,n)},I.updateLayers=function(r){var n=this.layers,i=["draglayer","plotbg","backplot","grids"];"below traces"===r.aaxis.layer&&i.push("aaxis","aline"),"below traces"===r.baxis.layer&&i.push("baxis","bline"),"below traces"===r.caxis.layer&&i.push("caxis","cline"),i.push("frontplot"),"above traces"===r.aaxis.layer&&i.push("aaxis","aline"),"above traces"===r.baxis.layer&&i.push("baxis","bline"),"above traces"===r.caxis.layer&&i.push("caxis","cline");var o=this.plotContainer.selectAll("g.toplevel").data(i,String),s=["agrid","bgrid","cgrid"];o.enter().append("g").attr("class",function(r){return"toplevel "+r}).each(function(r){var i=a.select(this);n[r]=i,"frontplot"===r?i.append("g").classed("scatterlayer",!0):"backplot"===r?i.append("g").classed("maplayer",!0):"plotbg"===r?i.append("path").attr("d","M0,0Z"):"aline"===r||"bline"===r||"cline"===r?i.append("path"):"grids"===r&&s.forEach(function(r){n[r]=i.append("g").classed("grid "+r,!0)})}),o.order()};var L=Math.sqrt(4/3);I.adjustLayout=function(r,n){var i,a,o,s,l,u,y=this,g=r.domain,v=(g.x[0]+g.x[1])/2,m=(g.y[0]+g.y[1])/2,x=g.x[1]-g.x[0],b=g.y[1]-g.y[0],_=x*n.w,w=b*n.h,T=r.sum,A=r.aaxis.min,k=r.baxis.min,M=r.caxis.min;_>L*w?o=(s=w)*L:s=(o=_)/L,l=x*o/_,u=b*s/w,i=n.l+n.w*v-o/2,a=n.t+n.h*(1-m)-s/2,y.x0=i,y.y0=a,y.w=o,y.h=s,y.sum=T,y.xaxis={type:"linear",range:[A+2*M-T,T-A-2*k],domain:[v-l/2,v+l/2],_id:"x"},p(y.xaxis,y.graphDiv._fullLayout),y.xaxis.setScale(),y.xaxis.isPtWithinRange=function(r){return r.a>=y.aaxis.range[0]&&r.a<=y.aaxis.range[1]&&r.b>=y.baxis.range[1]&&r.b<=y.baxis.range[0]&&r.c>=y.caxis.range[1]&&r.c<=y.caxis.range[0]},y.yaxis={type:"linear",range:[A,T-k-M],domain:[m-u/2,m+u/2],_id:"y"},p(y.yaxis,y.graphDiv._fullLayout),y.yaxis.setScale(),y.yaxis.isPtWithinRange=function(){return!0};var S=y.yaxis.domain[0],E=y.aaxis=d({},r.aaxis,{range:[A,T-k-M],side:"left",tickangle:(+r.aaxis.tickangle||0)-30,domain:[S,S+u*L],anchor:"free",position:0,_id:"y",_length:o});p(E,y.graphDiv._fullLayout),E.setScale();var I=y.baxis=d({},r.baxis,{range:[T-A-M,k],side:"bottom",domain:y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:o});p(I,y.graphDiv._fullLayout),I.setScale();var C=y.caxis=d({},r.caxis,{range:[T-A-k,M],side:"right",tickangle:(+r.caxis.tickangle||0)+30,domain:[S,S+u*L],anchor:"free",position:0,_id:"y",_length:o});p(C,y.graphDiv._fullLayout),C.setScale();var O="M"+i+","+(a+s)+"h"+o+"l-"+o/2+",-"+s+"Z";y.clipDef.select("path").attr("d",O),y.layers.plotbg.select("path").attr("d",O);var D="M0,"+s+"h"+o+"l-"+o/2+",-"+s+"Z";y.clipDefRelative.select("path").attr("d",D);var P=c(i,a);y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",P),y.clipDefRelative.select("path").attr("transform",null);var B=c(i-I._offset,a+s);y.layers.baxis.attr("transform",B),y.layers.bgrid.attr("transform",B);var R=c(i+o/2,a)+"rotate(30)"+c(0,-E._offset);y.layers.aaxis.attr("transform",R),y.layers.agrid.attr("transform",R);var z=c(i+o/2,a)+"rotate(-30)"+c(0,-C._offset);y.layers.caxis.attr("transform",z),y.layers.cgrid.attr("transform",z),y.drawAxes(!0),y.layers.aline.select("path").attr("d",E.showline?"M"+i+","+(a+s)+"l"+o/2+",-"+s:"M0,0").call(f.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),y.layers.bline.select("path").attr("d",I.showline?"M"+i+","+(a+s)+"h"+o:"M0,0").call(f.stroke,I.linecolor||"#000").style("stroke-width",(I.linewidth||0)+"px"),y.layers.cline.select("path").attr("d",C.showline?"M"+(i+o/2)+","+a+"l"+o/2+","+s:"M0,0").call(f.stroke,C.linecolor||"#000").style("stroke-width",(C.linewidth||0)+"px"),y.graphDiv._context.staticPlot||y.initInteractions(),h.setClipUrl(y.layers.frontplot,y._hasClipOnAxisFalse?null:y.clipId,y.graphDiv)},I.drawAxes=function(r){var n=this.graphDiv,i=this.id.substr(7)+"title",a=this.layers,o=this.aaxis,s=this.baxis,l=this.caxis;if(this.drawAx(o),this.drawAx(s),this.drawAx(l),r){var c=Math.max(o.showticklabels?o.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0)),f=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3;a["a-title"]=w.draw(n,"a"+i,{propContainer:o,propName:this.id+".aaxis.title",placeholder:u(n,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-o.title.font.size/3-c,"text-anchor":"middle"}}),a["b-title"]=w.draw(n,"b"+i,{propContainer:s,propName:this.id+".baxis.title",placeholder:u(n,"Click to enter Component B title"),attributes:{x:this.x0-f,y:this.y0+this.h+.83*s.title.font.size+f,"text-anchor":"middle"}}),a["c-title"]=w.draw(n,"c"+i,{propContainer:l,propName:this.id+".caxis.title",placeholder:u(n,"Click to enter Component C title"),attributes:{x:this.x0+this.w+f,y:this.y0+this.h+.83*l.title.font.size+f,"text-anchor":"middle"}})}},I.drawAx=function(r){var n=this.graphDiv,i=r._name,a=i.charAt(0),o=r._id,s=this.layers[i],c=a+"tickLayout",u=r.ticks+String(r.ticklen)+String(r.showticklabels);this[c]!==u&&(s.selectAll("."+o+"tick").remove(),this[c]=u),r.setScale();var f=g.calcTicks(r),h=g.clipEnds(r,f),p=g.makeTransTickFn(r),d=g.getTickSigns(r)[2],y=l.deg2rad(30),v=d*(r.linewidth||1)/2,m=d*r.ticklen,x=this.w,b=this.h,_="b"===a?"M0,"+v+"l"+Math.sin(y)*m+","+Math.cos(y)*m:"M"+v+",0l"+Math.cos(y)*m+","+-Math.sin(y)*m;g.drawTicks(n,r,{vals:"inside"===r.ticks?h:f,layer:s,path:_,transFn:p,crisp:!1}),g.drawGrid(n,r,{vals:h,layer:this.layers[a+"grid"],path:{a:"M0,0l"+b+",-"+x/2,b:"M0,0l-"+x/2+",-"+b,c:"M0,0l-"+b+","+x/2}[a],transFn:p,crisp:!1}),g.drawLabels(n,r,{vals:f,layer:s,transFn:p,labelFns:g.makeLabelFns(r,0,30)})};var C=S.MINZOOM/2+.87,O="m-0.87,.5h"+C+"v3h-"+(C+5.2)+"l"+(C/2+2.6)+",-"+(.87*C+4.5)+"l2.6,1.5l-"+C/2+","+.87*C+"Z",D="m0.87,.5h-"+C+"v3h"+(C+5.2)+"l-"+(C/2+2.6)+",-"+(.87*C+4.5)+"l-2.6,1.5l"+C/2+","+.87*C+"Z",P="m0,1l"+C/2+","+.87*C+"l2.6,-1.5l-"+(C/2+2.6)+",-"+(.87*C+4.5)+"l-"+(C/2+2.6)+","+(.87*C+4.5)+"l2.6,1.5l"+C/2+",-"+.87*C+"Z",B=!0;function R(r){a.select(r).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}I.clearOutline=function(){M(this.dragOptions),k(this.dragOptions.gd)},I.initInteractions=function(){var r,n,i,a,p,d,y,g,x,w,k,M,E=this,I=E.layers.plotbg.select("path").node(),C=E.graphDiv,z=C._fullLayout._zoomlayer;function F(r){var n={};return n[E.id+".aaxis.min"]=r.a,n[E.id+".baxis.min"]=r.b,n[E.id+".caxis.min"]=r.c,n}function N(r,n){var i=C._fullLayout.clickmode;R(C),2===r&&(C.emit("plotly_doubleclick",null),s.call("_guiRelayout",C,F({a:0,b:0,c:0}))),i.indexOf("select")>-1&&1===r&&A(n,C,[E.xaxis],[E.yaxis],E.id,E.dragOptions),i.indexOf("event")>-1&&m.click(C,n,E.id)}function U(r,n){return 1-(r+(E.h-n)/Math.sqrt(3))/E.w}function j(r,n){return(r-(E.h-n)/Math.sqrt(3))/E.w}function V(o,s){var l=i+o*r,c=a+s*n,u=Math.max(0,Math.min(1,1-a/E.h,1-c/E.h)),f=Math.max(0,Math.min(1,U(i,a),U(l,c))),h=Math.max(0,Math.min(1,j(i,a),j(l,c))),v=(u/2+h)*E.w,m=(1-u/2-f)*E.w,b=(v+m)/2,_=m-v,T=(1-u)*E.h,A=T-_/L;_<S.MINZOOM?(y=p,k.attr("d",x),M.attr("d","M0,0Z")):(y={a:p.a+u*d,b:p.b+f*d,c:p.c+h*d},k.attr("d",x+"M"+v+","+T+"H"+m+"L"+b+","+A+"L"+v+","+T+"Z"),M.attr("d","M"+i+","+a+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+v+","+T+O+"M"+m+","+T+D+"M"+b+","+A+P)),w||(k.transition().style("fill",g>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),M.transition().style("opacity",1).duration(200),w=!0),C.emit("plotly_relayouting",F(y))}function H(){R(C),y!==p&&(s.call("_guiRelayout",C,F(y)),B&&C.data&&C._context.showTips&&(l.notifier(u(C,"Double-click to zoom back out"),"long"),B=!1))}function q(r,n){var i=r/E.xaxis._m,a=n/E.yaxis._m,o=[(y={a:p.a-a,b:p.b+(i+a)/2,c:p.c-(i-a)/2}).a,y.b,y.c].sort(l.sorterAsc),s=o.indexOf(y.a),u=o.indexOf(y.b),f=o.indexOf(y.c);o[0]<0&&(o[1]+o[0]/2<0?(o[2]+=o[0]+o[1],o[0]=o[1]=0):(o[2]+=o[0]/2,o[1]+=o[0]/2,o[0]=0),y={a:o[s],b:o[u],c:o[f]},n=(p.a-y.a)*E.yaxis._m,r=(p.c-y.c-p.b+y.b)*E.xaxis._m);var d=c(E.x0+r,E.y0+n);E.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",d);var g=c(-r,-n);E.clipDefRelative.select("path").attr("transform",g),E.aaxis.range=[y.a,E.sum-y.b-y.c],E.baxis.range=[E.sum-y.a-y.c,y.b],E.caxis.range=[E.sum-y.a-y.b,y.c],E.drawAxes(!1),E._hasClipOnAxisFalse&&E.plotContainer.select(".scatterlayer").selectAll(".trace").call(h.hideOutsideRangePoints,E),C.emit("plotly_relayouting",F(y))}function G(){s.call("_guiRelayout",C,F(y))}this.dragOptions={element:I,gd:C,plotinfo:{id:E.id,domain:C._fullLayout[E.id].domain,xaxis:E.xaxis,yaxis:E.yaxis},subplot:E.id,prepFn:function(s,u,h){E.dragOptions.xaxes=[E.xaxis],E.dragOptions.yaxes=[E.yaxis],r=C._fullLayout._invScaleX,n=C._fullLayout._invScaleY;var v,m,A,S=E.dragOptions.dragmode=C._fullLayout.dragmode;b(S)?E.dragOptions.minDrag=1:E.dragOptions.minDrag=void 0,"zoom"===S?(E.dragOptions.moveFn=V,E.dragOptions.clickFn=N,E.dragOptions.doneFn=H,i=u-(v=I.getBoundingClientRect()).left,a=h-v.top,C._fullLayout._calcInverseTransform(C),m=C._fullLayout._invTransform,i=(A=l.apply3DTransform(m)(i,a))[0],a=A[1],y=p={a:E.aaxis.range[0],b:E.baxis.range[1],c:E.caxis.range[1]},d=E.aaxis.range[1]-p.a,g=o(E.graphDiv._fullLayout[E.id].bgcolor).getLuminance(),x="M0,"+E.h+"L"+E.w/2+", 0L"+E.w+","+E.h+"Z",w=!1,k=z.append("path").attr("class","zoombox").attr("transform",c(E.x0,E.y0)).style({fill:g>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",x),M=z.append("path").attr("class","zoombox-corners").attr("transform",c(E.x0,E.y0)).style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),E.clearOutline(C)):"pan"===S?(E.dragOptions.moveFn=q,E.dragOptions.clickFn=N,E.dragOptions.doneFn=G,y=p={a:E.aaxis.range[0],b:E.baxis.range[1],c:E.caxis.range[1]},E.clearOutline(C)):(_(S)||b(S))&&T(s,u,h,E.dragOptions,S)}},I.onmousemove=function(r){m.hover(C,r,E.id),C._fullLayout._lasthover=I,C._fullLayout._hoversubplot=E.id},I.onmouseout=function(r){C._dragging||v.unhover(C,r)},v.init(this.dragOptions)}},24040:function(r,n,i){var a=i(24248),o=i(16628),s=i(52416),l=i(63620),c=i(52200).addStyleRule,u=i(92880),f=i(45464),h=i(64859),p=u.extendFlat,d=u.extendDeepAll;function y(r){if(r.layoutAttributes){var i=r.layoutAttributes._arrayAttrRegexps;if(i)for(var a=0;a<i.length;a++)s(n.layoutArrayRegexes,i[a])}}function g(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.traces){var o=a.traces[i];o&&d(n.modules[i]._module.attributes,o)}}function v(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.transforms){var o=a.transforms[i];o&&d(n.transformsRegistry[i].attributes,o)}}function m(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.subplots){var o=n.subplotsRegistry[i],s=o.layoutAttributes,l="subplot"===o.attr?o.name:o.attr;Array.isArray(l)&&(l=l[0]);var c=a.subplots[l];s&&c&&d(s,c)}}function x(r){return"object"==typeof r&&(r=r.type),r}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.collectableSubplotTypes=null,n.register=function(r){if(n.collectableSubplotTypes=null,!r)throw Error("No argument passed to Plotly.register.");r&&!Array.isArray(r)&&(r=[r]);for(var i=0;i<r.length;i++){var o=r[i];if(!o)throw Error("Invalid module was attempted to be registered!");switch(o.moduleType){case"trace":(function(r){var i=r.name,o=r.categories,s=r.meta;if(n.modules[i])a.log("Type "+i+" already registered");else{n.subplotsRegistry[r.basePlotModule.name]||function(r){var i=r.name;if(n.subplotsRegistry[i])a.log("Plot type "+i+" already registered.");else for(var o in y(r),n.subplotsRegistry[i]=r,n.componentsRegistry)m(o,r.name)}(r.basePlotModule);for(var l={},u=0;u<o.length;u++)l[o[u]]=!0,n.allCategories[o[u]]=!0;for(var f in n.modules[i]={_module:r,categories:l},s&&Object.keys(s).length&&(n.modules[i].meta=s),n.allTypes.push(i),n.componentsRegistry)g(f,i);r.layoutAttributes&&p(n.traceLayoutAttributes,r.layoutAttributes);var h=r.basePlotModule,d=h.name;if("mapbox"===d){var v=h.constants.styleRules;for(var x in v)c(".js-plotly-plot .plotly .mapboxgl-"+x,v[x])}"geo"!==d&&"mapbox"!==d||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}})(o);break;case"transform":(function(r){if("string"!=typeof r.name)throw Error("Transform module *name* must be a string.");var i="Transform module "+r.name,o="function"==typeof r.transform,s="function"==typeof r.calcTransform;if(!o&&!s)throw Error(i+" is missing a *transform* or *calcTransform* method.");for(var c in o&&s&&a.log([i+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),l(r.attributes)||a.log(i+" registered without an *attributes* object."),"function"!=typeof r.supplyDefaults&&a.log(i+" registered without a *supplyDefaults* method."),n.transformsRegistry[r.name]=r,n.componentsRegistry)v(c,r.name)})(o);break;case"component":(function(r){if("string"!=typeof r.name)throw Error("Component module *name* must be a string.");var i=r.name;for(var a in n.componentsRegistry[i]=r,r.layoutAttributes&&(r.layoutAttributes._isLinkedToArray&&s(n.layoutArrayContainers,i),y(r)),n.modules)g(i,a);for(var o in n.subplotsRegistry)m(i,o);for(var l in n.transformsRegistry)v(i,l);r.schema&&r.schema.layout&&d(h,r.schema.layout)})(o);break;case"locale":(function(r){var i=r.name,a=i.split("-")[0],o=r.dictionary,s=r.format,l=o&&Object.keys(o).length,c=s&&Object.keys(s).length,u=n.localeRegistry,f=u[i];if(f||(u[i]=f={}),a!==i){var h=u[a];h||(u[a]=h={}),l&&h.dictionary===f.dictionary&&(h.dictionary=o),c&&h.format===f.format&&(h.format=s)}l&&(f.dictionary=o),c&&(f.format=s)})(o);break;case"apiMethod":var u=o.name;n.apiMethodRegistry[u]=o.fn;break;default:throw Error("Invalid module was attempted to be registered!")}}},n.getModule=function(r){var i=n.modules[x(r)];return!!i&&i._module},n.traceIs=function(r,i){if("various"===(r=x(r)))return!1;var o=n.modules[r];return o||(r&&a.log("Unrecognized trace type "+r+"."),o=n.modules[f.type.dflt]),!!o.categories[i]},n.getTransformIndices=function(r,n){for(var i=[],a=r.transforms||[],o=0;o<a.length;o++)a[o].type===n&&i.push(o);return i},n.hasTransform=function(r,n){for(var i=r.transforms||[],a=0;a<i.length;a++)if(i[a].type===n)return!0;return!1},n.getComponentMethod=function(r,i){var a=n.componentsRegistry[r];return a&&a[i]||o},n.call=function(){var r=arguments[0],i=[].slice.call(arguments,1);return n.apiMethodRegistry[r].apply(null,i)}},91536:function(r,n,i){var a=i(24040),o=i(3400),s=o.extendFlat,l=o.extendDeep;function c(r){var n;switch(r){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}r.exports=function(r,n){var i,o=r.data,u=r.layout,f=l([],o),h=l({},u,c(n.tileClass)),p=r._context||{};if(n.width&&(h.width=n.width),n.height&&(h.height=n.height),"thumbnail"===n.tileClass||"themes__thumb"===n.tileClass){h.annotations=[];var d=Object.keys(h);for(i=0;i<d.length;i++)["xaxis","yaxis","zaxis"].indexOf(d[i].slice(0,5))>-1&&(h[d[i]].title={text:""});for(i=0;i<f.length;i++){var y=f[i];y.showscale=!1,y.marker&&(y.marker.showscale=!1),a.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(n.annotations))for(i=0;i<n.annotations.length;i++)h.annotations.push(n.annotations[i]);var g=Object.keys(h).filter(function(r){return r.match(/^scene\d*$/)});if(g.length){var v={};for("thumbnail"===n.tileClass&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<g.length;i++){var m=h[g[i]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),s(m.xaxis,v),s(m.yaxis,v),s(m.zaxis,v),m._scene=null}}var x=document.createElement("div");n.tileClass&&(x.className=n.tileClass);var b={gd:x,td:x,layout:h,data:f,config:{staticPlot:void 0===n.staticPlot||n.staticPlot,plotGlPixelRatio:void 0===n.plotGlPixelRatio?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return"transparent"!==n.setBackground&&(b.config.setBackground=n.setBackground||"opaque"),b.gd.defaultLayout=c(n.tileClass),b}},39792:function(r,n,i){var a=i(3400),o=i(67024),s=i(48616),l=i(81792);r.exports=function(r,n){var i;return a.isPlainObject(r)||(i=a.getGraphDiv(r)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(c,u){i&&i._snapshotInProgress&&u(Error("Snapshotting already in progress.")),a.isIE()&&"svg"!==n.format&&u(Error(l.MSG_IE_BAD_FORMAT)),i&&(i._snapshotInProgress=!0);var f=o(r,n),h=n.filename||r.fn||"newplot";h+="."+n.format.replace("-","."),f.then(function(r){return i&&(i._snapshotInProgress=!1),s(r,h,n.format)}).then(function(r){c(r)}).catch(function(r){i&&(i._snapshotInProgress=!1),u(r)})})}},48616:function(r,n,i){var a=i(3400),o=i(81792);r.exports=function(r,n,i){var s=document.createElement("a"),l="download"in s;return new Promise(function(c,u){var f,h;if(a.isIE())return f=o.createBlob(r,"svg"),window.navigator.msSaveBlob(f,n),f=null,c(n);if(l)return f=o.createBlob(r,i),h=o.createObjectURL(f),s.href=h,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),o.revokeObjectURL(h),f=null,c(n);if(a.isSafari()){var p="svg"===i?",":";base64,";return o.octetStream(p+encodeURIComponent(r)),c(n)}u(Error("download error"))})}},81792:function(r,n,i){var a=i(24040);n.getDelay=function(r){return r._has&&(r._has("gl3d")||r._has("gl2d")||r._has("mapbox"))?500:0},n.getRedrawFunc=function(r){return function(){a.getComponentMethod("colorbar","draw")(r)}},n.encodeSVG=function(r){return"data:image/svg+xml,"+encodeURIComponent(r)},n.encodeJSON=function(r){return"data:application/json,"+encodeURIComponent(r)};var o=window.URL||window.webkitURL;n.createObjectURL=function(r){return o.createObjectURL(r)},n.revokeObjectURL=function(r){return o.revokeObjectURL(r)},n.createBlob=function(r,n){if("svg"===n)return new window.Blob([r],{type:"image/svg+xml;charset=utf-8"});if("full-json"===n)return new window.Blob([r],{type:"application/json;charset=utf-8"});var i=function(r){for(var n=r.length,i=new ArrayBuffer(n),a=new Uint8Array(i),o=0;o<n;o++)a[o]=r.charCodeAt(o);return i}(window.atob(r));return new window.Blob([i],{type:"image/"+n})},n.octetStream=function(r){document.location.href="data:application/octet-stream"+r},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(r,n,i){var a=i(81792),o={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:i(91536),toSVG:i(37164),svgToImg:i(63268),toImage:i(61808),downloadImage:i(39792)};r.exports=o},63268:function(r,n,i){var a=i(3400),o=i(61252).EventEmitter,s=i(81792);r.exports=function(r){var n=r.emitter||new o,i=new Promise(function(o,l){var c=window.Image,u=r.svg,f=r.format||"png";if(a.isIE()&&"svg"!==f){var h=Error(s.MSG_IE_BAD_FORMAT);return l(h),r.promise?i:n.emit("error",h)}var p,d,y=r.canvas,g=r.scale||1,v=r.width||300,m=r.height||150,x=g*v,b=g*m,_=y.getContext("2d",{willReadFrequently:!0}),w=new c;"svg"===f||a.isSafari()?d=s.encodeSVG(u):(p=s.createBlob(u,"svg"),d=s.createObjectURL(p)),y.width=x,y.height=b,w.onload=function(){var i;switch(p=null,s.revokeObjectURL(d),"svg"!==f&&_.drawImage(w,0,0,x,b),f){case"jpeg":i=y.toDataURL("image/jpeg");break;case"png":i=y.toDataURL("image/png");break;case"webp":i=y.toDataURL("image/webp");break;case"svg":i=d;break;default:var a="Image format is not jpeg, png, svg or webp.";if(l(Error(a)),!r.promise)return n.emit("error",a)}o(i),r.promise||n.emit("success",i)},w.onerror=function(i){if(p=null,s.revokeObjectURL(d),l(i),!r.promise)return n.emit("error",i)},w.src=d});return r.promise?i:n}},61808:function(r,n,i){var a=i(61252).EventEmitter,o=i(24040),s=i(3400),l=i(81792),c=i(91536),u=i(37164),f=i(63268);r.exports=function(r,n){var i=new a,h=c(r,{format:"png"}),p=h.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var d=l.getRedrawFunc(p);return o.call("_doPlot",p,h.data,h.layout,h.config).then(d).then(function(){setTimeout(function(){var r=u(p),a=document.createElement("canvas");a.id=s.randstr(),(i=f({format:n.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:a,emitter:i,svg:r})).clean=function(){p&&document.body.removeChild(p)}},l.getDelay(p._fullLayout))}).catch(function(r){i.emit("error",r)}),i}},37164:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(76308),c=i(9616),u=/"/g,f="TOBESTRIPPED",h=RegExp('("'+f+")|("+f+'")',"g");r.exports=function(r,n,i){var p,d,y,g,v=r._fullLayout,m=v._paper,x=v._toppaper,b=v.width,_=v.height;m.insert("rect",":first-child").call(s.setRect,0,0,b,_).call(l.fill,v.paper_bgcolor);var w=v._basePlotModules||[];for(g=0;g<w.length;g++){var T=w[g];T.toSVG&&T.toSVG(r)}if(x){var A=x.node().childNodes,k=Array.prototype.slice.call(A);for(g=0;g<k.length;g++){var M=k[g];M.childNodes.length&&m.node().appendChild(M)}}v._draggers&&v._draggers.remove(),m.node().style.background="",m.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var r=a.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){r.style({visibility:null,display:null});var n=this.style.fontFamily;n&&-1!==n.indexOf('"')&&r.style("font-family",n.replace(u,f));var i=this.style.fontWeight;i&&("normal"===i||"400"===i)&&r.style("font-weight",void 0);var o=this.style.fontStyle;o&&"normal"===o&&r.style("font-style",void 0);var s=this.style.fontVariant;s&&"normal"===s&&r.style("font-variant",void 0)}else r.remove()}),m.selectAll(".gradient_filled,.pattern_filled").each(function(){var r=a.select(this),n=this.style.fill;n&&-1!==n.indexOf("url(")&&r.style("fill",n.replace(u,f));var i=this.style.stroke;i&&-1!==i.indexOf("url(")&&r.style("stroke",i.replace(u,f))}),"pdf"!==n&&"eps"!==n||m.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),m.node().setAttributeNS(c.xmlns,"xmlns",c.svg),m.node().setAttributeNS(c.xmlns,"xmlns:xlink",c.xlink),"svg"===n&&i&&(m.attr("width",i*b),m.attr("height",i*_),m.attr("viewBox","0 0 "+b+" "+_));var S=(new window.XMLSerializer).serializeToString(m.node());return S=(S=(p=S,d=a.select("body").append("div").style({display:"none"}).html(""),y=p.replace(/(&[^;]*;)/gi,function(r){return"&lt;"===r?"&#60;":"&rt;"===r?"&#62;":-1!==r.indexOf("<")||-1!==r.indexOf(">")?"":d.html(r).text()}),d.remove(),S=y).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(h,"'"),o.isIE()&&(S=(S=(S=S.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),S}},84664:function(r,n,i){var a=i(3400);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.hovertext,r,"htx");var o=n.marker;if(o){a.mergeArray(o.opacity,r,"mo",!0),a.mergeArray(o.color,r,"mc");var s=o.line;s&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"))}}},20832:function(r,n,i){var a=i(52904),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(21776).Gw,c=i(49084),u=i(25376),f=i(78048),h=i(98192).c,p=i(92880).extendFlat,d=u({editType:"calc",arrayOk:!0,colorEditType:"style"}),y=p({},a.marker.line.width,{dflt:0}),g=p({width:y,editType:"calc"},c("marker.line")),v=p({line:g,editType:"calc"},c("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:h,cornerradius:{valType:"any",editType:"calc"}});r.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:a.text,texttemplate:l({editType:"plot"},{keys:f.eventDataKeys}),hovertext:a.hovertext,hovertemplate:s({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:p({},d,{}),insidetextfont:p({},d,{}),outsidetextfont:p({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:p({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:v,offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},zorder:a.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(r,n,i){var a=i(54460),o=i(1220),s=i(94288).hasColorscale,l=i(47128),c=i(84664),u=i(4500);r.exports=function(r,n){var i,f,h,p,d,y,g=a.getFromId(r,n.xaxis||"x"),v=a.getFromId(r,n.yaxis||"y"),m={msUTC:!(!n.base&&0!==n.base)};"h"===n.orientation?(i=g.makeCalcdata(n,"x",m),h=v.makeCalcdata(n,"y"),p=o(n,v,"y",h),d=!!n.yperiodalignment,y="y"):(i=v.makeCalcdata(n,"y",m),h=g.makeCalcdata(n,"x"),p=o(n,g,"x",h),d=!!n.xperiodalignment,y="x"),f=p.vals;for(var x=Math.min(f.length,i.length),b=Array(x),_=0;_<x;_++)b[_]={p:f[_],s:i[_]},d&&(b[_].orig_p=h[_],b[_][y+"End"]=p.ends[_],b[_][y+"Start"]=p.starts[_]),n.ids&&(b[_].id=String(n.ids[_]));return s(n,"marker")&&l(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),s(n,"marker.line")&&l(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),c(b,n),u(b,n),b}},78048:function(r){r.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(r,n,i){var a=i(38248),o=i(3400).isArrayOrTypedArray,s=i(39032).BADNUM,l=i(24040),c=i(54460),u=i(71888).getAxisGroup,f=i(72592);function h(r,n,i,l,h){if(l.length){var w,T,A,k,M;switch(function(r,n){var i,s;for(i=0;i<n.length;i++){var l,c=n[i],u=c[0].trace,f="funnel"===u.type?u._base:u.base,h="h"===u.orientation?u.xcalendar:u.ycalendar,p="category"===r.type||"multicategory"===r.type?function(){return null}:r.d2c;if(o(f)){for(s=0;s<Math.min(f.length,c.length);s++)a(l=p(f[s],0,h))?(c[s].b=+l,c[s].hasB=1):c[s].b=0;for(;s<c.length;s++)c[s].b=0}else{var d=a(l=p(f,0,h));for(l=d?l:0,s=0;s<c.length;s++)c[s].b=l,d&&(c[s].hasB=1)}}}(i,l),h.mode){case"overlay":p(n,i,l,h);break;case"group":for(w=[],T=[],A=0;A<l.length;A++)void 0===(k=l[A])[0].trace.offset?T.push(k):w.push(k);T.length&&(M=new f(T,{posAxis:n,sepNegVal:!1,overlapNoMerge:!h.norm}),function(r,n,i,a){for(var o=r._fullLayout,s=i.positions,l=i.distinctPositions,c=i.minDiff,f=i.traces,h=f.length,p=s.length!==l.length,d=c*(1-a.gap),m=u(o,n._id)+f[0][0].trace.orientation,x=o._alignmentOpts[m]||{},b=0;b<h;b++){var _,w,T=f[b],A=T[0].trace,k=Object.keys((x[A.alignmentgroup]||{}).offsetGroups||{}).length,M=(_=k?d/k:p?d/h:d)*(1-(a.groupgap||0));w=k?((2*A._offsetIndex+1-k)*_-M)/2:p?((2*b+1-h)*_-M)/2:-M/2;var S=T[0].t;S.barwidth=M,S.poffset=w,S.bargroupwidth=d,S.bardelta=c}i.binWidth=f[0][0].t.barwidth/100,y(i),g(n,i),v(n,i,p)}(r,n,M,h),function(r,n){for(var i=r.traces,a=0;a<i.length;a++){var o=i[a];if(void 0===o[0].trace.base)for(var l=new f([o],{posAxis:n,sepNegVal:!0,overlapNoMerge:!0}),c=0;c<o.length;c++){var u=o[c];if(u.p!==s){var h=l.put(u.p,u.b+u.s);h&&(u.b=h)}}}}(M,n),h.norm?(x(M),b(i,M,h)):m(i,M)),w.length&&p(n,i,w,h);break;case"stack":case"relative":for(w=[],T=[],A=0;A<l.length;A++)void 0===(k=l[A])[0].trace.base?T.push(k):w.push(k);(function(r){if(!(r.length<2)){var n,i,o,s,l,c;for(n=0;n<r.length&&void 0===(s=(i=r[n][0].trace).marker?i.marker.cornerradius:void 0);n++);if(void 0!==s)for(l=a(s)?+s:+s.slice(0,-1),c=a(s)?"px":"%",n=0;n<r.length;n++)(o=r[n][0].t).cornerradiusvalue=l,o.cornerradiusform=c}})(T),T.length&&function(r,n,i,a,o){var l=new f(a,{posAxis:n,sepNegVal:"relative"===o.mode,overlapNoMerge:!(o.norm||"stack"===o.mode||"relative"===o.mode)});d(n,l,o),function(r,n,i){var a,o,l,u,f,h,p=_(r),d=n.traces;for(u=0;u<d.length;u++)if("funnel"===(o=(a=d[u])[0].trace).type)for(f=0;f<a.length;f++)(h=a[f]).s!==s&&n.put(h.p,-.5*h.s);for(u=0;u<d.length;u++){l="funnel"===(o=(a=d[u])[0].trace).type;var y=[];for(f=0;f<a.length;f++)if((h=a[f]).s!==s){g=l?h.s:h.s+h.b;var g,v=n.put(h.p,g),m=v+g;h.b=v,h[p]=m,i.norm||(y.push(m),h.hasB&&y.push(v))}i.norm||(o._extremes[r._id]=c.findExtremes(r,y,{tozero:!0,padded:!0}))}}(i,l,o);for(var u=0;u<a.length;u++)for(var h=a[u],p=0;p<h.length;p++){var y=h[p];y.s!==s&&y.b+y.s===l.get(y.p,y.s)&&(y._outmost=!0)}o.norm&&b(i,l,o)}(0,n,i,T,h),w.length&&p(n,i,w,h)}(function(r){var n,i,o,s,l,c,u;for(n=0;n<r.length;n++)o=(i=r[n])[0].trace,void 0===(s=i[0].t).cornerradiusvalue&&void 0!==(l=o.marker?o.marker.cornerradius:void 0)&&(c=a(l)?+l:+l.slice(0,-1),u=a(l)?"px":"%",s.cornerradiusvalue=c,s.cornerradiusform=u)})(l),function(r,n){var i,s,l,c=_(n),u={},f=1/0,h=-1/0;for(i=0;i<r.length;i++)for(l=r[i],s=0;s<l.length;s++){var p=l[s].p;a(p)&&(f=Math.min(f,p),h=Math.max(h,p))}var d=1e4/(h-f),y=u.round=function(r){return String(Math.round(d*(r-f)))},g={},v={},m=r.some(function(r){var n=r[0].trace;return"marker"in n&&n.marker.cornerradius});for(i=0;i<r.length;i++){(l=r[i])[0].t.extents=u;var x=l[0].t.poffset,b=o(x);for(s=0;s<l.length;s++){var w=l[s],T=w[c]-w.w/2;if(a(T)){var A=w[c]+w.w/2,k=y(w.p);u[k]?u[k]=[Math.min(T,u[k][0]),Math.max(A,u[k][1])]:u[k]=[T,A]}if(w.p0=w.p+(b?x[s]:x),w.p1=w.p0+w.w,w.s0=w.b,w.s1=w.s0+w.s,m){var M=Math.min(w.s0,w.s1)||0,S=Math.max(w.s0,w.s1)||0,E=w[c];g[E]=E in g?Math.min(g[E],M):M,v[E]=E in v?Math.max(v[E],S):S}}}m&&function(r,n,i,a){for(var o=_(a),s=0;s<r.length;s++)for(var l=r[s],c=0;c<l.length;c++){var u=l[c],f=u[o];u._sMin=n[f],u._sMax=i[f]}}(r,g,v,n)}(l,n)}}function p(r,n,i,a){for(var o=0;o<i.length;o++){var s=new f([i[o]],{posAxis:r,sepNegVal:!1,overlapNoMerge:!a.norm});d(r,s,a),a.norm?(x(s),b(n,s,a)):m(n,s)}}function d(r,n,i){for(var a=n.minDiff,o=n.traces,s=a*(1-i.gap),l=s*(1-(i.groupgap||0)),c=-l/2,u=0;u<o.length;u++){var f=o[u][0].t;f.barwidth=l,f.poffset=c,f.bargroupwidth=s,f.bardelta=a}n.binWidth=o[0][0].t.barwidth/100,y(n),g(r,n),v(r,n)}function y(r){var n,i,s=r.traces;for(n=0;n<s.length;n++){var l,c=s[n],u=c[0],f=u.trace,h=u.t,p=f._offset||f.offset,d=h.poffset;if(o(p)){for(l=Array.prototype.slice.call(p,0,c.length),i=0;i<l.length;i++)a(l[i])||(l[i]=d);for(i=l.length;i<c.length;i++)l.push(d);h.poffset=l}else void 0!==p&&(h.poffset=p);var y=f._width||f.width,g=h.barwidth;if(o(y)){var v=Array.prototype.slice.call(y,0,c.length);for(i=0;i<v.length;i++)a(v[i])||(v[i]=g);for(i=v.length;i<c.length;i++)v.push(g);if(h.barwidth=v,void 0===p){for(l=[],i=0;i<c.length;i++)l.push(d+(g-v[i])/2);h.poffset=l}}else void 0!==y&&(h.barwidth=y,void 0===p&&(h.poffset=d+(g-y)/2))}}function g(r,n){for(var i=n.traces,a=_(r),s=0;s<i.length;s++)for(var l=i[s],c=l[0].t,u=c.poffset,f=o(u),h=c.barwidth,p=o(h),d=0;d<l.length;d++){var y=l[d],g=y.w=p?h[d]:h;void 0===y.p&&(y.p=y[a],y["orig_"+a]=y[a]);var v=(f?u[d]:u)+g/2;y[a]=y.p+v}}function v(r,n,i){var a=n.traces,s=n.minDiff/2;c.minDtick(r,n.minDiff,n.distinctPositions[0],i);for(var l=0;l<a.length;l++){var u,f,h,p,d=a[l],y=d[0],g=y.trace,v=[];for(p=0;p<d.length;p++)f=(u=d[p]).p-s,h=u.p+s,v.push(f,h);if(g.width||g.offset){var m=y.t,x=m.poffset,b=m.barwidth,_=o(x),w=o(b);for(p=0;p<d.length;p++){u=d[p];var T=_?x[p]:x,A=w?b[p]:b;h=(f=u.p+T)+A,v.push(f,h)}}g._extremes[r._id]=c.findExtremes(r,v,{padded:!1})}}function m(r,n){for(var i=n.traces,a=_(r),o=0;o<i.length;o++){for(var s=i[o],l=s[0].trace,u="scatter"===l.type,f="v"===l.orientation,h=[],p=!1,d=0;d<s.length;d++){var y=s[d],g=u?0:y.b,v=u?f?y.y:y.x:g+y.s;y[a]=v,h.push(v),y.hasB&&h.push(g),y.hasB&&y.b||(p=!0)}l._extremes[r._id]=c.findExtremes(r,h,{tozero:p,padded:!0})}}function x(r){for(var n=r.traces,i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++){var l=a[o];l.s!==s&&r.put(l.p,l.b+l.s)}}function b(r,n,i){var o=n.traces,l=_(r),u="fraction"===i.norm?1:100,f=u/1e9,h=r.l2c(r.c2l(0)),p="stack"===i.mode?u:h;function d(n){return a(r.c2l(n))&&(n<h-f||n>p+f||!a(h))}for(var y=0;y<o.length;y++){for(var g=o[y],v=g[0].trace,m=[],x=!1,b=!1,w=0;w<g.length;w++){var T=g[w];if(T.s!==s){var A=Math.abs(u/n.get(T.p,T.s));T.b*=A,T.s*=A;var k=T.b,M=k+T.s;T[l]=M,m.push(M),b=b||d(M),T.hasB&&(m.push(k),b=b||d(k)),T.hasB&&T.b||(x=!0)}}v._extremes[r._id]=c.findExtremes(r,m,{tozero:x,padded:b})}}function _(r){return r._id.charAt(0)}r.exports={crossTraceCalc:function(r,n){for(var i=n.xaxis,a=n.yaxis,o=r._fullLayout,s=r._fullData,c=r.calcdata,u=[],f=[],p=0;p<s.length;p++){var d=s[p];if(!0===d.visible&&l.traceIs(d,"bar")&&d.xaxis===i._id&&d.yaxis===a._id&&("h"===d.orientation?u.push(c[p]):f.push(c[p]),d._computePh))for(var y=r.calcdata[p],g=0;g<y.length;g++)"function"==typeof y[g].ph0&&(y[g].ph0=y[g].ph0()),"function"==typeof y[g].ph1&&(y[g].ph1=y[g].ph1())}var v={xCat:"category"===i.type||"multicategory"===i.type,yCat:"category"===a.type||"multicategory"===a.type,mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap};h(r,i,a,f,v),h(r,a,i,u,v)},setGroupPositions:h}},31508:function(r,n,i){var a=i(38248),o=i(3400),s=i(76308),l=i(24040),c=i(43980),u=i(31147),f=i(55592),h=i(20011),p=i(20832),d=o.coerceFont;function y(r){if(a(r)){if((r=+r)>=0)return r}else if("string"==typeof r&&"%"===(r=r.trim()).slice(-1)&&a(r.slice(0,-1))&&(r=+r.slice(0,-1))>=0)return r+"%"}function g(r,n,i,a,s,l){var c=!1!==(l=l||{}).moduleHasSelected,u=!1!==l.moduleHasUnselected,f=!1!==l.moduleHasConstrain,h=!1!==l.moduleHasCliponaxis,p=!1!==l.moduleHasTextangle,y=!1!==l.moduleHasInsideanchor,g=!!l.hasPathbar,v=Array.isArray(s)||"auto"===s,m=v||"inside"===s,x=v||"outside"===s;if(m||x){var b=d(a,"textfont",i.font),_=o.extendFlat({},b),w=!(r.textfont&&r.textfont.color);if(w&&delete _.color,d(a,"insidetextfont",_),g){var T=o.extendFlat({},b);w&&delete T.color,d(a,"pathbar.textfont",T)}x&&d(a,"outsidetextfont",b),c&&a("selected.textfont.color"),u&&a("unselected.textfont.color"),f&&a("constraintext"),h&&a("cliponaxis"),p&&a("textangle"),a("texttemplate")}m&&y&&a("insidetextanchor")}r.exports={supplyDefaults:function(r,n,i,a){function h(i,a){return o.coerce(r,n,p,i,a)}if(c(r,n,a,h)){u(r,n,a,h),h("xhoverformat"),h("yhoverformat"),h("zorder"),h("orientation",n.x&&!n.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var d=h("textposition");g(r,0,a,h,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f(r,n,h,i,a);var y=(n.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(r,n,y||s.defaultLine,{axis:"y"}),v(r,n,y||s.defaultLine,{axis:"x",inherit:"y"}),o.coerceSelectionMarkerOpacity(n,h)}else n.visible=!1},crossTraceDefaults:function(r,n){var i,a;function s(r,n){return o.coerce(a._input,a,p,r,n)}for(var l=0;l<r.length;l++)if("bar"===(a=r[l]).type){i=a._input;var c=s("marker.cornerradius",n.barcornerradius);a.marker&&(a.marker.cornerradius=y(c)),"group"===n.barmode&&h(i,a,n,s)}},handleText:g,validateCornerradius:y}},52160:function(r){r.exports=function(r,n,i){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),"h"===i.orientation?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y),r}},60444:function(r,n,i){var a=i(38248),o=i(49760),s=i(3400).isArrayOrTypedArray;n.coerceString=function(r,n,i){if("string"==typeof n){if(n||!r.noBlank)return n}else if(("number"==typeof n||!0===n)&&!r.strict)return String(n);return void 0!==i?i:r.dflt},n.coerceNumber=function(r,n,i){if(a(n)){n=+n;var o=r.min,s=r.max;if(!(void 0!==o&&n<o||void 0!==s&&n>s))return n}return void 0!==i?i:r.dflt},n.coerceColor=function(r,n,i){return o(n).isValid()?n:void 0!==i?i:r.dflt},n.coerceEnumerated=function(r,n,i){return r.coerceNumber&&(n=+n),-1!==r.values.indexOf(n)?n:void 0!==i?i:r.dflt},n.getValue=function(r,n){var i;return s(r)?n<r.length&&(i=r[n]):i=r,i},n.getLineWidth=function(r,n){return 0<n.mlw?n.mlw:s(r.marker.line.width)?0:r.marker.line.width}},63400:function(r,n,i){var a=i(93024),o=i(24040),s=i(76308),l=i(3400).fillText,c=i(60444).getLineWidth,u=i(54460).hoverLabelText,f=i(39032).BADNUM;function h(r,n,i,o,s){var c,h,p,d,y,g,v,m=r.cd,x=m[0].trace,b=m[0].t,_="closest"===o,w="waterfall"===x.type,T=r.maxHoverDistance,A=r.maxSpikeDistance;"h"===x.orientation?(c=i,h=n,p="y",d="x",y=B,g=D):(c=n,h=i,p="x",d="y",g=B,y=D);var k=x[p+"period"];function M(r){return E(r,-1)}function S(r){return E(r,1)}function E(r,n){var i=r.w;return r[p]+n*i/2}function I(r){return r[p+"End"]-r[p+"Start"]}var L=_?M:k?function(r){return r.p-I(r)/2}:function(r){return Math.min(M(r),r.p-b.bardelta/2)},C=_?S:k?function(r){return r.p+I(r)/2}:function(r){return Math.max(S(r),r.p+b.bardelta/2)};function O(r,n,i){return s.finiteRange&&(i=0),a.inbox(r-c,n-c,i+Math.min(1,Math.abs(n-r)/v)-1)}function D(r){return O(L(r),C(r),T)}function P(r){var n=r[d];if(w){var i=Math.abs(r.rawS)||0;h>0?n+=i:h<0&&(n-=i)}return n}function B(r){var n=h,i=r.b,o=P(r);return a.inbox(i-n,o-n,T+(o-n)/(o-i)-1)}var R=r[p+"a"],z=r[d+"a"];v=Math.abs(R.r2c(R.range[1])-R.r2c(R.range[0]));var F=a.getDistanceFunction(o,y,g,function(r){return(y(r)+g(r))/2});if(a.getClosest(m,F,r),!1!==r.index&&m[r.index].p!==f){_||k||(L=function(r){return Math.min(M(r),r.p-b.bargroupwidth/2)},C=function(r){return Math.max(S(r),r.p+b.bargroupwidth/2)});var N,U,j,V=m[r.index],H=x.base?V.b+V.s:V.s;r[d+"0"]=r[d+"1"]=z.c2p(V[d],!0),r[d+"LabelVal"]=H;var q=b.extents[b.extents.round(V.p)];r[p+"0"]=R.c2p(_?L(V):q[0],!0),r[p+"1"]=R.c2p(_?C(V):q[1],!0);var G=void 0!==V.orig_p;return r[p+"LabelVal"]=G?V.orig_p:V.p,r.labelLabel=u(R,r[p+"LabelVal"],x[p+"hoverformat"]),r.valueLabel=u(z,r[d+"LabelVal"],x[d+"hoverformat"]),r.baseLabel=u(z,V.b,x[d+"hoverformat"]),r.spikeDistance=(N=h,U=V.b,j=P(V),(a.inbox(U-N,j-N,A+(j-N)/(j-U)-1)+O(M(V),S(V),A))/2),r[p+"Spike"]=R.c2p(V.p,!0),l(V,x,r),r.hovertemplate=x.hovertemplate,r}}function p(r,n){var i=n.mcc||r.marker.color,a=n.mlcc||r.marker.line.color,o=c(r,n);return s.opacity(i)?i:s.opacity(a)&&o?a:void 0}r.exports={hoverPoints:function(r,n,i,a,s){var l=h(r,n,i,a,s);if(l){var c=l.cd,u=c[0].trace,f=c[l.index];return l.color=p(u,f),o.getComponentMethod("errorbars","hoverInfo")(f,u,l),[l]}},hoverOnBars:h,getTraceColor:p}},51132:function(r,n,i){r.exports={attributes:i(20832),layoutAttributes:i(39324),supplyDefaults:i(31508).supplyDefaults,crossTraceDefaults:i(31508).crossTraceDefaults,supplyLayoutDefaults:i(37156),calc:i(71820),crossTraceCalc:i(96376).crossTraceCalc,colorbar:i(5528),arraysToCalcdata:i(84664),plot:i(98184).plot,style:i(60100).style,styleOnSelect:i(60100).styleOnSelect,hoverPoints:i(63400).hoverPoints,eventData:i(52160),selectPoints:i(45784),moduleType:"trace",name:"bar",basePlotModule:i(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(r){r.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(r,n,i){var a=i(24040),o=i(54460),s=i(3400),l=i(39324),c=i(31508).validateCornerradius;r.exports=function(r,n,i){function u(i,a){return s.coerce(r,n,l,i,a)}for(var f=!1,h=!1,p=!1,d={},y=u("barmode"),g=0;g<i.length;g++){var v=i[g];if(a.traceIs(v,"bar")&&v.visible){if(f=!0,"group"===y){var m=v.xaxis+v.yaxis;d[m]&&(p=!0),d[m]=!0}v.visible&&"histogram"===v.type&&"category"!==o.getFromId({_fullLayout:n},v["v"===v.orientation?"xaxis":"yaxis"]).type&&(h=!0)}}if(f){"overlay"!==y&&u("barnorm"),u("bargap",h&&!p?0:.2),u("bargroupgap");var x=u("barcornerradius");n.barcornerradius=c(x)}else delete n.barmode}},98184:function(r,n,i){var a=i(33428),o=i(38248),s=i(3400),l=i(72736),c=i(76308),u=i(43616),f=i(24040),h=i(54460).tickText,p=i(82744),d=p.recordMinTextSize,y=p.clearMinTextSize,g=i(60100),v=i(60444),m=i(78048),x=i(20832),b=x.text,_=x.textposition,w=i(10624).appendArrayPointValue,T=m.TEXTPAD;function A(r){return r.id}function k(r,n,i,a){var o;return!n.uniformtext.mode&&M(i)?(a&&(o=a()),r.transition().duration(i.duration).ease(i.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()})):r}function M(r){return r&&r.duration>0}function S(r,n,i,a,o){return!(r<0||n<0)&&(i<=r&&a<=n||i<=n&&a<=r||(o?r>=n/a*i:n>=r/i*a))}function E(r){return"auto"===r?0:r}function I(r,n){var i=Math.PI/180*n,a=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));return{x:r.width*o+r.height*a,y:r.width*a+r.height*o}}function L(r,n,i,a,o,s){var l=!!s.isHorizontal,c=!!s.constrained,u=s.angle||0,f=s.anchor,h="end"===f,p="start"===f,d=((s.leftToRight||0)+1)/2,y=1-d,g=s.hasB,v=s.r,m=s.overhead,x=o.width,b=o.height,_=Math.abs(n-r),w=Math.abs(a-i),A=_>2*T&&w>2*T?T:0;_-=2*A,w-=2*A;var k=E(u);"auto"!==u||x<=_&&b<=w||!(x>_||b>w)||(x>w||b>_)&&x<b==_<w||(k+=90);var M,S,L=I(o,k);if(v&&v-m>T){var C,O,D,P,B,R,z,F,N=(B=Math.max(0,Math.abs(n-r)-2*T),R=Math.max(0,Math.abs(a-i)-2*T),z=v-T,F=m?z-Math.sqrt(z*z-(z-m)*(z-m)):z,L.y/L.x>=R/(B-(g?2*z:l?z-m:2*F))?P=R/L.y:L.y/L.x<=(R-(g?2*z:l?2*F:z-m))/B?P=B/L.x:!g&&l?(C=L.x*L.x+L.y*L.y/4,D=(B-z)*(B-z)+(R/2-z)*(R/2-z)-z*z,P=(-(O=-2*L.x*(B-z)-L.y*(R/2-z))+Math.sqrt(O*O-4*C*D))/(2*C)):g?(C=(L.x*L.x+L.y*L.y)/4,D=(B/2-z)*(B/2-z)+(R/2-z)*(R/2-z)-z*z,P=(-(O=-L.x*(B/2-z)-L.y*(R/2-z))+Math.sqrt(O*O-4*C*D))/(2*C)):(C=L.x*L.x/4+L.y*L.y,D=(B/2-z)*(B/2-z)+(R-z)*(R-z)-z*z,P=(-(O=-L.x*(B/2-z)-2*L.y*(R-z))+Math.sqrt(O*O-4*C*D))/(2*C)),{scale:P=Math.min(1,P),pad:l?Math.max(0,z-Math.sqrt(Math.max(0,z*z-(z-(R-L.y*P)/2)*(z-(R-L.y*P)/2)))-m):Math.max(0,z-Math.sqrt(Math.max(0,z*z-(z-(B-L.x*P)/2)*(z-(B-L.x*P)/2)))-m)});M=N.scale,S=N.pad}else M=1,c&&(M=Math.min(1,_/L.x,w/L.y)),S=0;var U=o.left*y+o.right*d,j=(o.top+o.bottom)/2,V=(r+T)*y+(n-T)*d,H=(i+a)/2,q=0,G=0;if(p||h){var W=(l?L.x:L.y)/2;v&&(h||g)&&(A+=S);var Y=l?r<n?1:-1:i<a?1:-1;l?p?(V=r+Y*A,q=-Y*W):(V=n-Y*A,q=Y*W):p?(H=i+Y*A,G=-Y*W):(H=a-Y*A,G=Y*W)}return{textX:U,textY:j,targetX:V,targetY:H,anchorX:q,anchorY:G,scale:M,rotate:k}}r.exports={plot:function(r,n,i,p,m,x){var C=n.xaxis,O=n.yaxis,D=r._fullLayout,P=r._context.staticPlot;m||(m={mode:D.barmode,norm:D.barmode,gap:D.bargap,groupgap:D.bargroupgap},y("bar",D));var B=s.makeTraceGroups(p,i,"trace bars").each(function(i){var f=a.select(this),p=i[0].trace,y=i[0].t,B="waterfall"===p.type,R="funnel"===p.type,z="histogram"===p.type,F="bar"===p.type,N=F||R,U=0;B&&p.connector.visible&&"between"===p.connector.mode&&(U=p.connector.line.width/2);var j="h"===p.orientation,V=M(m),H=s.ensureSingle(f,"g","points"),q=function(r){if(r.ids)return A}(p),G=H.selectAll("g.point").data(s.identity,q);G.enter().append("g").classed("point",!0),G.exit().remove(),G.each(function(f,A){var M,B,R,H,q,G,W=a.select(this),Y=(M=[],B=[],R=j?C:O,H=j?O:C,M[0]=R.c2p(f.s0,!0),B[0]=H.c2p(f.p0,!0),M[1]=R.c2p(f.s1,!0),B[1]=H.c2p(f.p1,!0),j?[M,B]:[B,M]),Z=Y[0][0],X=Y[0][1],K=Y[1][0],J=Y[1][1],$=0==(j?X-Z:J-K);if($&&N&&v.getLineWidth(p,f)&&($=!1),$||($=!(o(Z)&&o(X)&&o(K)&&o(J))),f.isBlank=$,$&&(j?X=Z:J=K),U&&!$&&(j?(Z-=(Z<X?1:-1)*U,X+=(Z<X?1:-1)*U):(K-=(K<J?1:-1)*U,J+=(K<J?1:-1)*U)),"waterfall"===p.type){if(!$){var Q=p[f.dir].marker;q=Q.line.width,G=Q.color}}else q=v.getLineWidth(p,f),G=f.mc||p.marker.color;function tt(r){var n=a.round(q/2%1,2);return 0===m.gap&&0===m.groupgap?a.round(Math.round(r)-n,2):r}var te=1>c.opacity(G)||q>.01?tt:function(r,n,i){return i&&r===n?r:Math.abs(r-n)>=2?tt(r):r>n?Math.ceil(r):Math.floor(r)};r._context.staticPlot||(Z=te(Z,X,j),X=te(X,Z,j),K=te(K,J,!j),J=te(J,K,!j));var tr,tn=j?C.c2p:O.c2p;tr=f.s0>0?f._sMax:f.s0<0?f._sMin:f.s1>0?f._sMax:f._sMin;var ti,ta,to=F||z?function(r,n){if(!r)return 0;var i=j?Math.abs(J-K):Math.abs(X-Z),a=j?Math.abs(X-Z):Math.abs(J-K),o=te(Math.abs(tn(tr,!0)-tn(0,!0))),s=f.hasB?Math.min(i/2,a/2):Math.min(i/2,o);return te(Math.max(Math.min("%"===n?Math.min(50,r)/100*i:r,s),0))}(y.cornerradiusvalue,y.cornerradiusform):0,ts="M"+Z+","+K+"V"+J+"H"+X+"V"+K+"Z",tl=0;if(to&&f.s){var tc,tu,tf,th=0==((tc=f.s0)>0)-(tc<0)||((tu=f.s)>0)-(tu<0)==((tf=f.s0)>0)-(tf<0)?f.s1:f.s0;if((tl=te(f.hasB?0:Math.abs(tn(tr,!0)-tn(th,!0))))<to){var tp=Z<X?1:-1,td=K<J?1:-1,ty=tp===-td?1:0;if(j){if(f.hasB)ti="M"+(Z+to*tp)+","+K+"A "+to+","+to+" 0 0 "+ty+" "+Z+","+(K+to*td)+"V"+(J-to*td)+"A "+to+","+to+" 0 0 "+ty+" "+(Z+to*tp)+","+J+"H"+(X-to*tp)+"A "+to+","+to+" 0 0 "+ty+" "+X+","+(J-to*td)+"V"+(K+to*td)+"A "+to+","+to+" 0 0 "+ty+" "+(X-to*tp)+","+K+"Z";else{var tg=(ta=Math.abs(X-Z)+tl)<to?to-Math.sqrt(ta*(2*to-ta)):0,tv=tl>0?Math.sqrt(tl*(2*to-tl)):0,tm=tp>0?Math.max:Math.min;ti="M"+Z+","+K+"V"+(J-tg*td)+"H"+tm(X-(to-tl)*tp,Z)+"A "+to+","+to+" 0 0 "+ty+" "+X+","+(J-to*td-tv)+"V"+(K+to*td+tv)+"A "+to+","+to+" 0 0 "+ty+" "+tm(X-(to-tl)*tp,Z)+","+(K+tg*td)+"Z"}}else if(f.hasB)ti="M"+(Z+to*tp)+","+K+"A "+to+","+to+" 0 0 "+ty+" "+Z+","+(K+to*td)+"V"+(J-to*td)+"A "+to+","+to+" 0 0 "+ty+" "+(Z+to*tp)+","+J+"H"+(X-to*tp)+"A "+to+","+to+" 0 0 "+ty+" "+X+","+(J-to*td)+"V"+(K+to*td)+"A "+to+","+to+" 0 0 "+ty+" "+(X-to*tp)+","+K+"Z";else{var tx=(ta=Math.abs(J-K)+tl)<to?to-Math.sqrt(ta*(2*to-ta)):0,tb=tl>0?Math.sqrt(tl*(2*to-tl)):0,t_=td>0?Math.max:Math.min;ti="M"+(Z+tx*tp)+","+K+"V"+t_(J-(to-tl)*td,K)+"A "+to+","+to+" 0 0 "+ty+" "+(Z+to*tp-tb)+","+J+"H"+(X-to*tp+tb)+"A "+to+","+to+" 0 0 "+ty+" "+(X-tx*tp)+","+t_(J-(to-tl)*td,K)+"V"+K+"Z"}}else ti=ts}else ti=ts;var tw=k(s.ensureSingle(W,"path"),D,m,x);if(tw.style("vector-effect",P?"none":"non-scaling-stroke").attr("d",isNaN((X-Z)*(J-K))||$&&r._context.staticPlot?"M0,0Z":ti).call(u.setClipUrl,n.layerClipId,r),!D.uniformtext.mode&&V){var tT=u.makePointStyleFns(p);u.singlePointStyle(f,tw,p,tT,r)}(function(r,n,i,a,o,c,f,p,y,m,x,A,M){var C,O=n.xaxis,D=n.yaxis,P=r._fullLayout;function B(n,i,a){return s.ensureSingle(n,"text").text(i).attr({class:"bartext bartext-"+C,"text-anchor":"middle","data-notex":1}).call(u.font,a).call(l.convertToTspans,r)}var R=a[0].trace,z="h"===R.orientation,F=(q=(G=a[0].trace).texttemplate?function(r,n,i,a,o){var l=n[0].trace,c=s.castOption(l,i,"texttemplate");if(!c)return"";var u,f,p,d,y="histogram"===l.type,g="waterfall"===l.type,v="funnel"===l.type,m="h"===l.orientation;function x(r){return h(d,d.c2l(r),!0).text}m?(u="y",f=o,p="x",d=a):(u="x",f=a,p="y",d=o);var b,_=n[i],T={};T.label=_.p,T.labelLabel=T[u+"Label"]=(b=_.p,h(f,f.c2l(b),!0).text);var A=s.castOption(l,_.i,"text");(0===A||A)&&(T.text=A),T.value=_.s,T.valueLabel=T[p+"Label"]=x(_.s);var k={};w(k,l,_.i),(y||void 0===k.x)&&(k.x=m?T.value:T.label),(y||void 0===k.y)&&(k.y=m?T.label:T.value),(y||void 0===k.xLabel)&&(k.xLabel=m?T.valueLabel:T.labelLabel),(y||void 0===k.yLabel)&&(k.yLabel=m?T.labelLabel:T.valueLabel),g&&(T.delta=+_.rawS||_.s,T.deltaLabel=x(T.delta),T.final=_.v,T.finalLabel=x(T.final),T.initial=T.final-T.delta,T.initialLabel=x(T.initial)),v&&(T.value=_.s,T.valueLabel=x(T.value),T.percentInitial=_.begR,T.percentInitialLabel=s.formatPercent(_.begR),T.percentPrevious=_.difR,T.percentPreviousLabel=s.formatPercent(_.difR),T.percentTotal=_.sumR,T.percenTotalLabel=s.formatPercent(_.sumR));var M=s.castOption(l,_.i,"customdata");return M&&(T.customdata=M),s.texttemplateString(c,T,r._d3locale,k,T,l._meta||{})}(P,a,o,O,D):G.textinfo?function(r,n,i,a){var o=r[0].trace,l="h"===o.orientation,c="waterfall"===o.type,u="funnel"===o.type;function f(r){return h(l?i:a,+r,!0).text}var p,d=o.textinfo,y=r[n],g=d.split("+"),v=[],m=function(r){return -1!==g.indexOf(r)};if(m("label")&&v.push(h(l?a:i,r[n].p,!0).text),m("text")&&(0===(p=s.castOption(o,y.i,"text"))||p)&&v.push(p),c){var x=+y.rawS||y.s,b=y.v;m("initial")&&v.push(f(b-x)),m("delta")&&v.push(f(x)),m("final")&&v.push(f(b))}if(u){m("value")&&v.push(f(y.s));var _=0;m("percent initial")&&_++,m("percent previous")&&_++,m("percent total")&&_++;var w=_>1;m("percent initial")&&(p=s.formatPercent(y.begR),w&&(p+=" of initial"),v.push(p)),m("percent previous")&&(p=s.formatPercent(y.difR),w&&(p+=" of previous"),v.push(p)),m("percent total")&&(p=s.formatPercent(y.sumR),w&&(p+=" of total"),v.push(p))}return v.join("<br>")}(a,o,O,D):v.getValue(G.text,o),v.coerceString(b,q));W=v.getValue(R.textposition,o),C=v.coerceEnumerated(_,W);var N="stack"===A.mode||"relative"===A.mode,U=a[o],j=!N||U._outmost,V=U.hasB,H=m&&m-x>T;if(F&&"none"!==C&&(!U.isBlank&&c!==f&&p!==y||"auto"!==C&&"inside"!==C)){var q,G,W,Y,Z,X,K,J,$,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tc,tu,tf,th,tp,td,ty,tg=P.font,tv=g.getBarColor(a[o],R),tm=g.getInsideTextFont(R,o,tg,tv),tx=g.getOutsideTextFont(R,o,tg),tb=R.insidetextanchor||"end",t_=i.datum();z?"log"===O.type&&t_.s0<=0&&(c=O.range[0]<O.range[1]?0:O._length):"log"===D.type&&t_.s0<=0&&(p=D.range[0]<D.range[1]?D._length:0);var tw,tT,tA,tk,tM,tS=Math.abs(f-c)-2*T,tE=Math.abs(y-p)-2*T;if("outside"===C&&(j||U.hasB||(C="inside")),"auto"===C){if(j){C="inside",tw=B(i,F,tM=s.ensureUniformFontSize(r,tm)),tA=(tT=u.bBox(tw.node())).width,tk=tT.height;var tI,tL=tA>0&&tk>0;tI=H?V?S(tS-2*m,tE,tA,tk,z)||S(tS,tE-2*m,tA,tk,z):z?S(tS-(m-x),tE,tA,tk,z)||S(tS,tE-2*(m-x),tA,tk,z):S(tS,tE-(m-x),tA,tk,z)||S(tS-2*(m-x),tE,tA,tk,z):S(tS,tE,tA,tk,z),tL&&tI?C="inside":(C="outside",tw.remove(),tw=null)}else C="inside"}if(!tw){var tC=(tw=B(i,F,tM=s.ensureUniformFontSize(r,"outside"===C?tx:tm))).attr("transform");if(tw.attr("transform",""),tA=(tT=u.bBox(tw.node())).width,tk=tT.height,tw.attr("transform",tC),tA<=0||tk<=0)return void tw.remove()}var tO,tD=R.textangle;(tO="outside"===C?(Y=c,Z=p,X=tT,$=!!(K={isHorizontal:z,constrained:"both"===R.constraintext||"outside"===R.constraintext,angle:tD}).isHorizontal,Q=!!K.constrained,tt=K.angle||0,te=X.width,tr=X.height,tn=Math.abs(f-Y),ti=Math.abs(y-Z),J=$?ti>2*T?T:0:tn>2*T?T:0,ta=1,Q&&(ta=$?Math.min(1,ti/tr):Math.min(1,tn/te)),ts=I(X,to=E(tt)),tl=($?ts.x:ts.y)/2,tc=(X.left+X.right)/2,tu=(X.top+X.bottom)/2,tf=(Y+f)/2,th=(Z+y)/2,tp=0,td=0,ty=$?f<Y?1:-1:Z<y?1:-1,$?(tf=f-ty*J,tp=ty*tl):(th=y+ty*J,td=-ty*tl),{textX:tc,textY:tu,targetX:tf,targetY:th,anchorX:tp,anchorY:td,scale:ta,rotate:to}):L(c,f,p,y,tT,{isHorizontal:z,constrained:"both"===R.constraintext||"inside"===R.constraintext,angle:tD,anchor:tb,hasB:V,r:m,overhead:x})).fontSize=tM.size,d("histogram"===R.type?"bar":R.type,tO,P),U.transform=tO;var tP=k(tw,P,A,M);s.setTransormAndDisplay(tP,tO)}else i.select("text").remove()})(r,n,W,i,A,Z,X,K,J,to,tl,m,x),n.layerClipId&&u.hideOutsideRangePoint(f,W.select("text"),C,O,p.xcalendar,p.ycalendar)});var W=!1===p.cliponaxis;u.setClipUrl(f,W?null:n.layerClipId,r)});f.getComponentMethod("errorbars","plot")(r,B,n,m)},toMoveInsideBar:L}},45784:function(r){r.exports=function(r,n){var i,a=r.cd,o=r.xaxis,s=r.yaxis,l=a[0].trace,c="funnel"===l.type,u="h"===l.orientation,f=[];if(!1===n)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var h=a[i],p="ct"in h?h.ct:function(r,n,i,a,o){var s=n.c2p(a?r.s0:r.p0,!0),l=n.c2p(a?r.s1:r.p1,!0),c=i.c2p(a?r.p0:r.s0,!0),u=i.c2p(a?r.p1:r.s1,!0);return o?[(s+l)/2,(c+u)/2]:a?[l,(c+u)/2]:[(s+l)/2,u]}(h,o,s,u,c);n.contains(p,!1,i,r)?(f.push({pointNumber:i,x:o.c2d(h.x),y:s.c2d(h.y)}),h.selected=1):h.selected=0}return f}},72592:function(r,n,i){r.exports=o;var a=i(3400).distinctVals;function o(r,n){this.traces=r,this.sepNegVal=n.sepNegVal,this.overlapNoMerge=n.overlapNoMerge;for(var i=1/0,o=n.posAxis._id.charAt(0),s=[],l=0;l<r.length;l++){for(var c=r[l],u=0;u<c.length;u++){var f=c[u],h=f.p;void 0===h&&(h=f[o]),void 0!==h&&s.push(h)}c[0]&&c[0].width1&&(i=Math.min(c[0].width1,i))}this.positions=s;var p=a(s);this.distinctPositions=p.vals,1===p.vals.length&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(p.minDiff,i);var d=(n.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(r,n){var i=this.getLabel(r,n),a=this.bins[i]||0;return this.bins[i]=a+n,a},o.prototype.get=function(r,n){var i=this.getLabel(r,n);return this.bins[i]||0},o.prototype.getLabel=function(r,n){return(n<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?r:Math.round(r/this.binWidth))}},60100:function(r,n,i){var a=i(33428),o=i(76308),s=i(43616),l=i(3400),c=i(24040),u=i(82744).resizeText,f=i(20832),h=f.textfont,p=f.insidetextfont,d=f.outsidetextfont,y=i(60444);function g(r,n,i){s.pointStyle(r.selectAll("path"),n,i),v(r,n,i)}function v(r,n,i){r.selectAll("text").each(function(r){var o=a.select(this),c=l.ensureUniformFontSize(i,m(o,r,n,i));s.font(o,c)})}function m(r,n,i,a){var o=a._fullLayout.font,s=i.textfont;if(r.classed("bartext-inside")){var l=T(n,i);s=b(i,n.i,o,l)}else r.classed("bartext-outside")&&(s=_(i,n.i,o));return s}function x(r,n,i){return w(h,r.textfont,n,i)}function b(r,n,i,a){var s=x(r,n,i);return(void 0===r._input.textfont||void 0===r._input.textfont.color||Array.isArray(r.textfont.color)&&void 0===r.textfont.color[n])&&(s={color:o.contrast(a),family:s.family,size:s.size,weight:s.weight,style:s.style,variant:s.variant,textcase:s.textcase,lineposition:s.lineposition,shadow:s.shadow}),w(p,r.insidetextfont,n,s)}function _(r,n,i){var a=x(r,n,i);return w(d,r.outsidetextfont,n,a)}function w(r,n,i,a){n=n||{};var o=y.getValue(n.family,i),s=y.getValue(n.size,i),l=y.getValue(n.color,i),c=y.getValue(n.weight,i),u=y.getValue(n.style,i),f=y.getValue(n.variant,i),h=y.getValue(n.textcase,i),p=y.getValue(n.lineposition,i),d=y.getValue(n.shadow,i);return{family:y.coerceString(r.family,o,a.family),size:y.coerceNumber(r.size,s,a.size),color:y.coerceColor(r.color,l,a.color),weight:y.coerceString(r.weight,c,a.weight),style:y.coerceString(r.style,u,a.style),variant:y.coerceString(r.variant,f,a.variant),textcase:y.coerceString(r.variant,h,a.textcase),lineposition:y.coerceString(r.variant,p,a.lineposition),shadow:y.coerceString(r.variant,d,a.shadow)}}function T(r,n){return"waterfall"===n.type?n[r.dir].marker.color:r.mcc||r.mc||n.marker.color}r.exports={style:function(r){var n=a.select(r).selectAll('g[class^="barlayer"]').selectAll("g.trace");u(r,n,"bar");var i=n.size(),o=r._fullLayout;n.style("opacity",function(r){return r[0].trace.opacity}).each(function(r){("stack"===o.barmode&&i>1||0===o.bargap&&0===o.bargroupgap&&!r[0].trace.marker.line.width)&&a.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(n){g(a.select(this),n[0].trace,r)}),c.getComponentMethod("errorbars","style")(n)},styleTextPoints:v,styleOnSelect:function(r,n,i){var o=n[0].trace;o.selectedpoints?(s.selectedPointStyle(i.selectAll("path"),o),function(r,n,i){r.each(function(r){var o,c=a.select(this);if(r.selected){o=l.ensureUniformFontSize(i,m(c,r,n,i));var u=n.selected.textfont&&n.selected.textfont.color;u&&(o.color=u),s.font(c,o)}else s.selectedTextStyle(c,n)})}(i.selectAll("text"),o,r)):(g(i,o,r),c.getComponentMethod("errorbars","style")(i))},getInsideTextFont:b,getOutsideTextFont:_,getBarColor:T,resizeText:u}},55592:function(r,n,i){var a=i(76308),o=i(94288).hasColorscale,s=i(27260),l=i(3400).coercePattern;r.exports=function(r,n,i,c,u){var f=i("marker.color",c),h=o(r,"marker");h&&s(r,n,u,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",a.defaultLine),o(r,"marker.line")&&s(r,n,u,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),l(i,"marker.pattern",f,h),i("selected.marker.color"),i("unselected.marker.color")}},82744:function(r,n,i){var a=i(33428),o=i(3400);function s(r){return"_"+r+"Text_minsize"}r.exports={recordMinTextSize:function(r,n,i){if(i.uniformtext.mode){var a=s(r),o=i.uniformtext.minsize,l=n.scale*n.fontSize;n.hide=l<o,i[a]=i[a]||1/0,n.hide||(i[a]=Math.min(i[a],Math.max(l,o)))}},clearMinTextSize:function(r,n){n[s(r)]=void 0},resizeText:function(r,n,i){var s=r._fullLayout,l=s["_"+i+"Text_minsize"];if(l){var c,u="hide"===s.uniformtext.mode;switch(i){case"funnelarea":case"pie":case"sunburst":c="g.slice";break;case"treemap":case"icicle":c="g.slice, g.pathbar";break;default:c="g.points > g.point"}n.selectAll(c).each(function(r){var n=r.transform;if(n){n.scale=u&&n.hide?0:l/n.fontSize;var i=a.select(this).select("text");o.setTransormAndDisplay(i,n)}})}}}},78100:function(r,n,i){var a,o=i(21776).Ks,s=i(92880).extendFlat,l=i(8319),c=i(20832);r.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:s({},c.base,{}),offset:s({},c.offset,{}),width:s({},c.width,{}),text:s({},c.text,{}),hovertext:s({},c.hovertext,{}),marker:(a=s({},c.marker),delete a.cornerradius,a),hoverinfo:l.hoverinfo,hovertemplate:o(),selected:c.selected,unselected:c.unselected}},47056:function(r,n,i){var a=i(94288).hasColorscale,o=i(47128),s=i(3400).isArrayOrTypedArray,l=i(84664),c=i(96376).setGroupPositions,u=i(4500),f=i(24040).traceIs,h=i(3400).extendFlat;r.exports={calc:function(r,n){for(var i=r._fullLayout,c=n.subplot,f=i[c].radialaxis,h=i[c].angularaxis,p=f.makeCalcdata(n,"r"),d=h.makeCalcdata(n,"theta"),y=n._length,g=Array(y),v=0;v<y;v++)g[v]={p:d[v],s:p[v]};function m(r){var i=n[r];void 0!==i&&(n["_"+r]=s(i)?h.makeCalcdata(n,r):h.d2c(i,n.thetaunit))}return"linear"===h.type&&(m("width"),m("offset")),a(n,"marker")&&o(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),a(n,"marker.line")&&o(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(g,n),u(g,n),g},crossTraceCalc:function(r,n,i){for(var a=r.calcdata,o=[],s=0;s<a.length;s++){var l=a[s],u=l[0].trace;!0===u.visible&&f(u,"bar")&&u.subplot===i&&o.push(l)}var p=h({},n.radialaxis,{_id:"x"});c(r,n.angularaxis,p,o,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(r,n,i){var a=i(3400),o=i(85968).handleRThetaDefaults,s=i(55592),l=i(78100);r.exports=function(r,n,i,c){function u(i,o){return a.coerce(r,n,l,i,o)}o(r,n,c,u)?(u("thetaunit"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate"),s(r,n,u,i,c),a.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},68896:function(r,n,i){var a=i(93024),o=i(3400),s=i(63400).getTraceColor,l=o.fillText,c=i(8504).makeHoverPointText,u=i(57384).isPtInsidePolygon;r.exports=function(r,n,i){var f=r.cd,h=f[0].trace,p=r.subplot,d=p.radialAxis,y=p.angularAxis,g=p.vangles,v=g?u:o.isPtInsideSector,m=r.maxHoverDistance,x=y._period||2*Math.PI,b=Math.abs(d.g2p(Math.sqrt(n*n+i*i))),_=Math.atan2(i,n);if(d.range[0]>d.range[1]&&(_+=Math.PI),a.getClosest(f,function(r){return v(b,_,[r.rp0,r.rp1],[r.thetag0,r.thetag1],g)?m+Math.min(1,Math.abs(r.thetag1-r.thetag0)/x)-1+(r.rp1-b)/(r.rp1-r.rp0)-1:1/0},r),!1!==r.index){var w=f[r.index];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var T=o.extendFlat({},w,{r:w.s,theta:w.p});return l(w,h,r),c(T,h,p,r),r.hovertemplate=h.hovertemplate,r.color=s(h,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},94456:function(r,n,i){r.exports={moduleType:"trace",name:"barpolar",basePlotModule:i(40872),categories:["polar","bar","showLegend"],attributes:i(78100),layoutAttributes:i(9320),supplyDefaults:i(70384),supplyLayoutDefaults:i(89580),calc:i(47056).calc,crossTraceCalc:i(47056).crossTraceCalc,plot:i(42040),colorbar:i(5528),formatLabels:i(22852),style:i(60100).style,styleOnSelect:i(60100).styleOnSelect,hoverPoints:i(68896),selectPoints:i(45784),meta:{}}},9320:function(r){r.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(r,n,i){var a=i(3400),o=i(9320);r.exports=function(r,n,i){var s,l={};function c(i,l){return a.coerce(r[s]||{},n[s],o,i,l)}for(var u=0;u<i.length;u++){var f=i[u];"barpolar"===f.type&&!0===f.visible&&(l[s=f.subplot]||(c("barmode"),c("bargap"),l[s]=1))}}},42040:function(r,n,i){var a=i(33428),o=i(38248),s=i(3400),l=i(43616),c=i(57384);r.exports=function(r,n,i){var u,f,h=r._context.staticPlot,p=n.xaxis,d=n.yaxis,y=n.radialAxis,g=n.angularAxis,v=(u=n.cxx,f=n.cyy,n.vangles?function(r,i,a,o){s.angleDelta(a,o)>0?(l=a,h=o):(l=o,h=a);var l,h,p=[c.findEnclosingVertexAngles(l,n.vangles)[0],(l+h)/2,c.findEnclosingVertexAngles(h,n.vangles)[1]];return c.pathPolygonAnnulus(r,i,l,h,p,u,f)}:function(r,n,i,a){return s.pathAnnulus(r,n,i,a,u,f)}),m=n.layers.frontplot.select("g.barlayer");s.makeTraceGroups(m,i,"trace bars").each(function(){var i=a.select(this),c=s.ensureSingle(i,"g","points").selectAll("g.point").data(s.identity);c.enter().append("g").style("vector-effect",h?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),c.exit().remove(),c.each(function(r){var n,i=a.select(this),l=r.rp0=y.c2p(r.s0),c=r.rp1=y.c2p(r.s1),u=r.thetag0=g.c2g(r.p0),f=r.thetag1=g.c2g(r.p1);if(o(l)&&o(c)&&o(u)&&o(f)&&l!==c&&u!==f){var h=y.c2g(r.s1),m=(u+f)/2;r.ct=[p.c2p(h*Math.cos(m)),d.c2p(h*Math.sin(m))],n=v(l,c,u,f)}else n="M0,0Z";s.ensureSingle(i,"path").attr("d",n)}),l.setClipUrl(i,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})}},63188:function(r,n,i){var a=i(98304),o=i(52904),s=i(20832),l=i(22548),c=i(29736).axisHoverFormat,u=i(21776).Ks,f=i(92880).extendFlat,h=o.marker,p=h.line;r.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:f({},h.symbol,{arrayOk:!1,editType:"plot"}),opacity:f({},h.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:f({},h.angle,{arrayOk:!1,editType:"calc"}),size:f({},h.size,{arrayOk:!1,editType:"calc"}),color:f({},h.color,{arrayOk:!1,editType:"style"}),line:{color:f({},p.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:f({},p.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:{marker:o.selected.marker,editType:"style"},unselected:{marker:o.unselected.marker,editType:"style"},text:f({},o.text,{}),hovertext:f({},o.hovertext,{}),hovertemplate:u({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:o.zorder}},62555:function(r,n,i){var a=i(38248),o=i(54460),s=i(1220),l=i(3400),c=i(39032).BADNUM,u=l._;r.exports=function(r,n){var i,f,b,_,w,T,A,k=r._fullLayout,M=o.getFromId(r,n.xaxis||"x"),S=o.getFromId(r,n.yaxis||"y"),E=[],I="violin"===n.type?"_numViolins":"_numBoxes";"h"===n.orientation?(b=M,_="x",w=S,T="y",A=!!n.yperiodalignment):(b=S,_="y",w=M,T="x",A=!!n.xperiodalignment);var L,C,O,D,P,B,R=function(r,n,i,o){var c,u=n+"0" in r;if(n in r||u&&"d"+n in r){var f=i.makeCalcdata(r,n);return[s(r,i,n,f).vals,f]}c=u?r[n+"0"]:"name"in r&&("category"===i.type||a(r.name)&&-1!==["linear","log"].indexOf(i.type)||l.isDateTime(r.name)&&"date"===i.type)?r.name:o;for(var h="multicategory"===i.type?i.r2c_just_indices(c):i.d2c(c,0,r[n+"calendar"]),p=r._length,d=Array(p),y=0;y<p;y++)d[y]=h;return[d]}(n,T,w,k[I]),z=R[0],F=R[1],N=l.distinctVals(z,w),U=N.vals,j=N.minDiff/2,V="all"===(n.boxpoints||n.points)?l.identity:function(r){return r.v<L.lf||r.v>L.uf};if(n._hasPreCompStats){var H=n[_],q=function(r){return b.d2c((n[r]||[])[i])},G=1/0,W=-1/0;for(i=0;i<n._length;i++){var Y=z[i];if(a(Y)){if((L={}).pos=L[T]=Y,A&&F&&(L.orig_p=F[i]),L.q1=q("q1"),L.med=q("median"),L.q3=q("q3"),C=[],H&&l.isArrayOrTypedArray(H[i]))for(f=0;f<H[i].length;f++)(B=b.d2c(H[i][f]))!==c&&(h(P={v:B,i:[i,f]},n,[i,f]),C.push(P));if(L.pts=C.sort(p),D=(O=L[_]=C.map(d)).length,L.med!==c&&L.q1!==c&&L.q3!==c&&L.med>=L.q1&&L.q3>=L.med){var Z,X=q("lowerfence");L.lf=X!==c&&X<=L.q1?X:y(L,O,D);var K=q("upperfence");L.uf=K!==c&&K>=L.q3?K:g(L,O,D);var J=q("mean");L.mean=J!==c?J:D?l.mean(O,D):(L.q1+L.q3)/2;var $=q("sd");L.sd=J!==c&&$>=0?$:D?l.stdev(O,D,L.mean):L.q3-L.q1,L.lo=v(L),L.uo=m(L);var Q=q("notchspan");Q=Q!==c&&Q>0?Q:x(L,D),L.ln=L.med-Q,L.un=L.med+Q;var tt=L.lf,te=L.uf;n.boxpoints&&O.length&&(tt=Math.min(tt,O[0]),te=Math.max(te,O[D-1])),n.notched&&(tt=Math.min(tt,L.ln),te=Math.max(te,L.un)),L.min=tt,L.max=te}else l.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+L.q1,"median = "+L.med,"q3 = "+L.q3].join("\n")),Z=L.med!==c?L.med:L.q1!==c?L.q3!==c?(L.q1+L.q3)/2:L.q1:L.q3!==c?L.q3:0,L.med=Z,L.q1=L.q3=Z,L.lf=L.uf=Z,L.mean=L.sd=Z,L.ln=L.un=Z,L.min=L.max=Z;G=Math.min(G,L.min),W=Math.max(W,L.max),L.pts2=C.filter(V),E.push(L)}}n._extremes[b._id]=o.findExtremes(b,[G,W],{padded:!0})}else{var tr=b.makeCalcdata(n,_),tn=function(r,n){for(var i=r.length,a=Array(i+1),o=0;o<i;o++)a[o]=r[o]-n;return a[i]=r[i-1]+n,a}(U,j),ti=U.length,ta=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=[];return n}(ti);for(i=0;i<n._length;i++)if(a(B=tr[i])){var to=l.findBin(z[i],tn);to>=0&&to<ti&&(h(P={v:B,i:i},n,i),ta[to].push(P))}var ts=1/0,tl=-1/0,tc=n.quartilemethod,tu="exclusive"===tc,tf="inclusive"===tc;for(i=0;i<ti;i++)if(ta[i].length>0){(L={}).pos=L[T]=U[i],C=L.pts=ta[i].sort(p),D=(O=L[_]=C.map(d)).length,L.min=O[0],L.max=O[D-1],L.mean=l.mean(O,D),L.sd=l.stdev(O,D,L.mean)*n.sdmultiple,L.med=l.interp(O,.5),D%2&&(tu||tf)?(tu?(th=O.slice(0,D/2),tp=O.slice(D/2+1)):tf&&(th=O.slice(0,D/2+1),tp=O.slice(D/2)),L.q1=l.interp(th,.5),L.q3=l.interp(tp,.5)):(L.q1=l.interp(O,.25),L.q3=l.interp(O,.75)),L.lf=y(L,O,D),L.uf=g(L,O,D),L.lo=v(L),L.uo=m(L);var th,tp,td=x(L,D);L.ln=L.med-td,L.un=L.med+td,ts=Math.min(ts,L.ln),tl=Math.max(tl,L.un),L.pts2=C.filter(V),E.push(L)}n.notched&&l.isTypedArray(tr)&&(tr=Array.from(tr)),n._extremes[b._id]=o.findExtremes(b,n.notched?tr.concat([ts,tl]):tr,{padded:!0})}return function(r,n){if(l.isArrayOrTypedArray(n.selectedpoints))for(var i=0;i<r.length;i++){for(var a=r[i].pts||[],o={},s=0;s<a.length;s++)o[a[s].i]=s;l.tagSelected(a,n,o)}}(E,n),E.length>0?(E[0].t={num:k[I],dPos:j,posLetter:T,valLetter:_,labels:{med:u(r,"median:"),min:u(r,"min:"),q1:u(r,"q1:"),q3:u(r,"q3:"),max:u(r,"max:"),mean:"sd"===n.boxmean||"sd"===n.sizemode?u(r,"mean ± σ:").replace("σ",1===n.sdmultiple?"σ":n.sdmultiple+"σ"):u(r,"mean:"),lf:u(r,"lower fence:"),uf:u(r,"upper fence:")}},k[I]++,E):[{t:{empty:!0}}]};var f={text:"tx",hovertext:"htx"};function h(r,n,i){for(var a in f)l.isArrayOrTypedArray(n[a])&&(Array.isArray(i)?l.isArrayOrTypedArray(n[a][i[0]])&&(r[f[a]]=n[a][i[0]][i[1]]):r[f[a]]=n[a][i])}function p(r,n){return r.v-n.v}function d(r){return r.v}function y(r,n,i){return 0===i?r.q1:Math.min(r.q1,n[Math.min(l.findBin(2.5*r.q1-1.5*r.q3,n,!0)+1,i-1)])}function g(r,n,i){return 0===i?r.q3:Math.max(r.q3,n[Math.max(l.findBin(2.5*r.q3-1.5*r.q1,n),0)])}function v(r){return 4*r.q1-3*r.q3}function m(r){return 4*r.q3-3*r.q1}function x(r,n){return 0===n?0:1.57*(r.q3-r.q1)/Math.sqrt(n)}},96404:function(r,n,i){var a=i(54460),o=i(3400),s=i(71888).getAxisGroup,l=["v","h"];function c(r,n,i,l){var c,u,f,h=n.calcdata,p=n._fullLayout,d=l._id,y=d.charAt(0),g=[],v=0;for(c=0;c<i.length;c++)for(f=h[i[c]],u=0;u<f.length;u++)g.push(l.c2l(f[u].pos,!0)),v+=(f[u].pts2||[]).length;if(g.length){var m=o.distinctVals(g);"category"!==l.type&&"multicategory"!==l.type||(m.minDiff=1);var x=m.minDiff/2;a.minDtick(l,m.minDiff,m.vals[0],!0);var b=p["violin"===r?"_numViolins":"_numBoxes"],_="group"===p[r+"mode"]&&b>1,w=1-p[r+"gap"],T=1-p[r+"groupgap"];for(c=0;c<i.length;c++){var A,k,M,S,E,I,L=(f=h[i[c]])[0].trace,C=f[0].t,O=L.width,D=L.side;if(O)A=k=S=O/2,M=0;else if(A=x,_){var P=s(p,l._id)+L.orientation,B=Object.keys(((p._alignmentOpts[P]||{})[L.alignmentgroup]||{}).offsetGroups||{}).length,R=B||b;k=A*w*T/R,M=2*A*(((B?L._offsetIndex:C.num)+.5)/R-.5)*w,S=A*w/R}else k=A*w*T,M=0,S=A;C.dPos=A,C.bPos=M,C.bdPos=k,C.wHover=S;var z,F,N,U,j,V,H=M+k,q=!!O;if("positive"===D?(E=A*(O?1:.5),z=H,I=z=M):"negative"===D?(E=z=M,I=A*(O?1:.5),F=H):(E=I=A,z=F=H),(L.boxpoints||L.points)&&v>0){var G=L.pointpos,W=L.jitter,Y=L.marker.size/2,Z=0;G+W>=0&&((Z=H*(G+W))>E?(q=!0,j=Y,N=Z):Z>z&&(j=Y,N=E)),Z<=E&&(N=E);var X=0;G-W<=0&&((X=-H*(G-W))>I?(q=!0,V=Y,U=X):X>F&&(V=Y,U=I)),X<=I&&(U=I)}else N=E,U=I;var K=Array(f.length);for(u=0;u<f.length;u++)K[u]=f[u].pos;L._extremes[d]=a.findExtremes(l,K,{padded:q,vpadminus:U,vpadplus:N,vpadLinearized:!0,ppadminus:{x:V,y:j}[y],ppadplus:{x:j,y:V}[y]})}}}r.exports={crossTraceCalc:function(r,n){for(var i=r.calcdata,a=n.xaxis,o=n.yaxis,s=0;s<l.length;s++){for(var u=l[s],f="h"===u?o:a,h=[],p=0;p<i.length;p++){var d=i[p],y=d[0].t,g=d[0].trace;!0!==g.visible||"box"!==g.type&&"candlestick"!==g.type||y.empty||(g.orientation||"v")!==u||g.xaxis!==a._id||g.yaxis!==o._id||h.push(p)}c("box",r,h,f)}},setPositionOffset:c}},90624:function(r,n,i){var a=i(3400),o=i(24040),s=i(76308),l=i(31147),c=i(20011),u=i(52976),f=i(63188);function h(r,n,i,s){function l(r){var n=0;return r&&r.length&&(n+=1,a.isArrayOrTypedArray(r[0])&&r[0].length&&(n+=1)),n}function c(n){return a.validate(r[n],f[n])}var h,p=i("y"),d=i("x");if("box"===n.type){var y=i("q1"),g=i("median"),v=i("q3");n._hasPreCompStats=y&&y.length&&g&&g.length&&v&&v.length,h=Math.min(a.minRowLength(y),a.minRowLength(g),a.minRowLength(v))}var m,x,b=l(p),_=l(d),w=b&&a.minRowLength(p),T=_&&a.minRowLength(d),A=s.calendar,k={autotypenumbers:s.autotypenumbers};if(n._hasPreCompStats)switch(String(_)+String(b)){case"00":var M=c("x0")||c("dx");m=(c("y0")||c("dy"))&&!M?"h":"v",x=h;break;case"10":m="v",x=Math.min(h,T);break;case"20":m="h",x=Math.min(h,d.length);break;case"01":m="h",x=Math.min(h,w);break;case"02":m="v",x=Math.min(h,p.length);break;case"12":m="v",x=Math.min(h,T,p.length);break;case"21":m="h",x=Math.min(h,d.length,w);break;case"11":x=0;break;case"22":var S,E=!1;for(S=0;S<d.length;S++)if("category"===u(d[S],A,k)){E=!0;break}if(E)m="v",x=Math.min(h,T,p.length);else{for(S=0;S<p.length;S++)if("category"===u(p[S],A,k)){E=!0;break}E?(m="h",x=Math.min(h,d.length,w)):(m="v",x=Math.min(h,T,p.length))}}else b>0?(m="v",x=_>0?Math.min(T,w):Math.min(w)):_>0?(m="h",x=Math.min(T)):x=0;if(x){n._length=x;var I=i("orientation",m);n._hasPreCompStats?"v"===I&&0===_?(i("x0",0),i("dx",1)):"h"===I&&0===b&&(i("y0",0),i("dy",1)):"v"===I&&0===_?i("x0"):"h"===I&&0===b&&i("y0"),o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s)}else n.visible=!1}function p(r,n,i,o){var s=o.prefix,l=a.coerce2(r,n,f,"marker.outliercolor"),c=i("marker.line.outliercolor"),u="outliers";n._hasPreCompStats?u="all":(l||c)&&(u="suspectedoutliers");var h=i(s+"points",u);h?(i("jitter","all"===h?.3:0),i("pointpos","all"===h?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.angle"),i("marker.color",n.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===h&&(i("marker.line.outliercolor",n.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete n.marker;var p=i("hoveron");"all"!==p&&-1===p.indexOf("points")||i("hovertemplate"),a.coerceSelectionMarkerOpacity(n,i)}r.exports={supplyDefaults:function(r,n,i,o){function c(i,o){return a.coerce(r,n,f,i,o)}if(h(r,n,c,o),!1!==n.visible){l(r,n,o,c),c("xhoverformat"),c("yhoverformat");var u=n._hasPreCompStats;u&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||i),c("line.width"),c("fillcolor",s.addOpacity(n.line.color,.5));var d=!1;if(u){var y=c("mean"),g=c("sd");y&&y.length&&(d=!0,g&&g.length&&(d="sd"))}c("whiskerwidth");var v,m=c("sizemode");"quartiles"===m&&(v=c("boxmean",d)),c("showwhiskers","quartiles"===m),"sd"!==m&&"sd"!==v||c("sdmultiple"),c("width"),c("quartilemethod");var x=!1;if(u){var b=c("notchspan");b&&b.length&&(x=!0)}else a.validate(r.notchwidth,f.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),p(r,n,c,{prefix:"box"}),c("zorder")}},crossTraceDefaults:function(r,n){var i,o;function s(r){return a.coerce(o._input,o,f,r)}for(var l=0;l<r.length;l++){var u=(o=r[l]).type;"box"!==u&&"violin"!==u||(i=o._input,"group"===n[u+"mode"]&&c(i,o,n,s))}},handleSampleDefaults:h,handlePointsDefaults:p}},10392:function(r){r.exports=function(r,n){return n.hoverOnBox&&(r.hoverOnBox=n.hoverOnBox),"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},27576:function(r,n,i){var a=i(54460),o=i(3400),s=i(93024),l=i(76308),c=o.fillText;function u(r,n,i,c){var u,f,h,p,d,y,g,v,m,x,b,_,w,T,A=r.cd,k=r.xa,M=r.ya,S=A[0].trace,E=A[0].t,I="violin"===S.type,L=E.bdPos,C=E.wHover,O=function(r){return h.c2l(r.pos)+E.bPos-h.c2l(y)};I&&"both"!==S.side?("positive"===S.side&&(m=function(r){var n=O(r);return s.inbox(n,n+C,x)},_=L,w=0),"negative"===S.side&&(m=function(r){var n=O(r);return s.inbox(n-C,n,x)},_=0,w=L)):(m=function(r){var n=O(r);return s.inbox(n-C,n+C,x)},_=w=L),T=I?function(r){return s.inbox(r.span[0]-d,r.span[1]-d,x)}:function(r){return s.inbox(r.min-d,r.max-d,x)},"h"===S.orientation?(d=n,y=i,g=T,v=m,u="y",h=M,f="x",p=k):(d=i,y=n,g=m,v=T,u="x",h=k,f="y",p=M);var D=Math.min(1,L/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));function P(r){return(g(r)+v(r))/2}x=r.maxHoverDistance-D,b=r.maxSpikeDistance-D;var B=s.getDistanceFunction(c,g,v,P);if(s.getClosest(A,B,r),!1===r.index)return[];var R=A[r.index],z=S.line.color,F=(S.marker||{}).color;l.opacity(z)&&S.line.width?r.color=z:l.opacity(F)&&S.boxpoints?r.color=F:r.color=S.fillcolor,r[u+"0"]=h.c2p(R.pos+E.bPos-w,!0),r[u+"1"]=h.c2p(R.pos+E.bPos+_,!0),r[u+"LabelVal"]=void 0!==R.orig_p?R.orig_p:R.pos;var N=u+"Spike";r.spikeDistance=P(R)*b/x,r[N]=h.c2p(R.pos,!0);var U=S.boxmean||"sd"===S.sizemode||(S.meanline||{}).visible,j=S.boxpoints||S.points,V=j&&U?["max","uf","q3","med","mean","q1","lf","min"]:j&&!U?["max","uf","q3","med","q1","lf","min"]:!j&&U?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=p.range[1]<p.range[0];S.orientation===(H?"v":"h")&&V.reverse();for(var q=r.spikeDistance,G=r[N],W=[],Y=0;Y<V.length;Y++){var Z=V[Y];if(Z in R){var X=R[Z],K=p.c2p(X,!0),J=o.extendFlat({},r);J.attr=Z,J[f+"0"]=J[f+"1"]=K,J[f+"LabelVal"]=X,J[f+"Label"]=(E.labels?E.labels[Z]+" ":"")+a.hoverLabelText(p,X,S[f+"hoverformat"]),J.hoverOnBox=!0,"mean"===Z&&"sd"in R&&("sd"===S.boxmean||"sd"===S.sizemode)&&(J[f+"err"]=R.sd),J.hovertemplate=!1,W.push(J)}}r.name="",r.spikeDistance=void 0,r[N]=void 0;for(var $=0;$<W.length;$++)"med"!==W[$].attr?(W[$].name="",W[$].spikeDistance=void 0,W[$][N]=void 0):(W[$].spikeDistance=q,W[$][N]=G);return W}function f(r,n,i){for(var a,l,u,f=r.cd,h=r.xa,p=r.ya,d=f[0].trace,y=h.c2p(n),g=p.c2p(i),v=s.quadrature(function(r){var n=Math.max(3,r.mrc||0);return Math.max(Math.abs(h.c2p(r.x)-y)-n,1-3/n)},function(r){var n=Math.max(3,r.mrc||0);return Math.max(Math.abs(p.c2p(r.y)-g)-n,1-3/n)}),m=!1,x=0;x<f.length;x++){l=f[x];for(var b=0;b<(l.pts||[]).length;b++){var _=v(u=l.pts[b]);_<=r.distance&&(r.distance=_,m=[x,b])}}if(!m)return!1;u=(l=f[m[0]]).pts[m[1]];var w=h.c2p(u.x,!0),T=p.c2p(u.y,!0),A=u.mrc||1;a=o.extendFlat({},r,{index:u.i,color:(d.marker||{}).color,name:d.name,x0:w-A,x1:w+A,y0:T-A,y1:T+A,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var k,M=l.orig_p,S=void 0!==M?M:l.pos;return"h"===d.orientation?(k=p,a.xLabelVal=u.x,a.yLabelVal=S):(k=h,a.xLabelVal=S,a.yLabelVal=u.y),a[k._id.charAt(0)+"Spike"]=k.c2p(l.pos,!0),c(u,d,a),a}r.exports={hoverPoints:function(r,n,i,a){var o,s=r.cd[0].trace.hoveron,l=[];return -1!==s.indexOf("boxes")&&(l=l.concat(u(r,n,i,a))),-1!==s.indexOf("points")&&(o=f(r,n,i)),"closest"===a?o?[o]:l:(o&&l.push(o),l)},hoverOnBoxes:u,hoverOnPoints:f}},67244:function(r,n,i){r.exports={attributes:i(63188),layoutAttributes:i(16560),supplyDefaults:i(90624).supplyDefaults,crossTraceDefaults:i(90624).crossTraceDefaults,supplyLayoutDefaults:i(68832).supplyLayoutDefaults,calc:i(62555),crossTraceCalc:i(96404).crossTraceCalc,plot:i(18728).plot,style:i(25776).style,styleOnSelect:i(25776).styleOnSelect,hoverPoints:i(27576).hoverPoints,eventData:i(10392),selectPoints:i(8264),moduleType:"trace",name:"box",basePlotModule:i(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(r){r.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(r,n,i){var a=i(24040),o=i(3400),s=i(16560);function l(r,n,i,o,s){for(var l=s+"Layout",c=!1,u=0;u<i.length;u++){var f=i[u];if(a.traceIs(f,l)){c=!0;break}}c&&(o(s+"mode"),o(s+"gap"),o(s+"groupgap"))}r.exports={supplyLayoutDefaults:function(r,n,i){l(0,0,i,function(i,a){return o.coerce(r,n,s,i,a)},"box")},_supply:l}},18728:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616);function l(r,n,i,s,l){var c,u,f="h"===i.orientation,h=n.val,p=n.pos,d=!!p.rangebreaks,y=s.bPos,g=s.wdPos||0,v=s.bPosPxOffset||0,m=i.whiskerwidth||0,x=!1!==i.showwhiskers,b=i.notched||!1,_=b?1-2*i.notchwidth:1;Array.isArray(s.bdPos)?(c=s.bdPos[0],u=s.bdPos[1]):(c=s.bdPos,u=s.bdPos);var w=r.selectAll("path.box").data("violin"!==i.type||i.box.visible?o.identity:[]);w.enter().append("path").style("vector-effect",l?"none":"non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(r){if(r.empty)return a.select(this).attr("d","M0,0Z");var n=p.c2l(r.pos+y,!0),s=p.l2p(n-c)+v,l=p.l2p(n+u)+v,w=d?(s+l)/2:p.l2p(n)+v,T=i.whiskerwidth,A=d?s*T+(1-T)*w:p.l2p(n-g)+v,k=d?l*T+(1-T)*w:p.l2p(n+g)+v,M=p.l2p(n-c*_)+v,S=p.l2p(n+u*_)+v,E="sd"===i.sizemode,I=h.c2p(E?r.mean-r.sd:r.q1,!0),L=E?h.c2p(r.mean+r.sd,!0):h.c2p(r.q3,!0),C=o.constrain(E?h.c2p(r.mean,!0):h.c2p(r.med,!0),Math.min(I,L)+1,Math.max(I,L)-1),O=void 0===r.lf||!1===i.boxpoints||E,D=h.c2p(O?r.min:r.lf,!0),P=h.c2p(O?r.max:r.uf,!0),B=h.c2p(r.ln,!0),R=h.c2p(r.un,!0);f?a.select(this).attr("d","M"+C+","+M+"V"+S+"M"+I+","+s+"V"+l+(b?"H"+B+"L"+C+","+S+"L"+R+","+l:"")+"H"+L+"V"+s+(b?"H"+R+"L"+C+","+M+"L"+B+","+s:"")+"Z"+(x?"M"+I+","+w+"H"+D+"M"+L+","+w+"H"+P+(0===m?"":"M"+D+","+A+"V"+k+"M"+P+","+A+"V"+k):"")):a.select(this).attr("d","M"+M+","+C+"H"+S+"M"+s+","+I+"H"+l+(b?"V"+B+"L"+S+","+C+"L"+l+","+R:"")+"V"+L+"H"+s+(b?"V"+R+"L"+M+","+C+"L"+s+","+B:"")+"Z"+(x?"M"+w+","+I+"V"+D+"M"+w+","+L+"V"+P+(0===m?"":"M"+A+","+D+"H"+k+"M"+A+","+P+"H"+k):""))})}function c(r,n,i,a){var l=n.x,c=n.y,u=a.bdPos,f=a.bPos,h=i.boxpoints||i.points;o.seedPseudoRandom();var p=r.selectAll("g.points").data(h?function(r){return r.forEach(function(r){r.t=a,r.trace=i}),r}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var d=p.selectAll("path").data(function(r){var n,a,s=r.pts2,l=Math.max((r.max-r.min)/10,r.q3-r.q1),c=1e-9*l,p=.01*l,d=[],y=0;if(i.jitter){if(0===l)for(y=1,d=Array(s.length),n=0;n<s.length;n++)d[n]=1;else for(n=0;n<s.length;n++){var g=Math.max(0,n-5),v=s[g].v,m=Math.min(s.length-1,n+5),x=s[m].v;"all"!==h&&(s[n].v<r.lf?x=Math.min(x,r.lf):v=Math.max(v,r.uf));var b=Math.sqrt(p*(m-g)/(x-v+c))||0;b=o.constrain(Math.abs(b),0,1),d.push(b),y=Math.max(b,y)}a=2*i.jitter/(y||1)}for(n=0;n<s.length;n++){var _=s[n],w=_.v,T=i.jitter?a*d[n]*(o.pseudoRandom()-.5):0,A=r.pos+f+u*(i.pointpos+T);"h"===i.orientation?(_.y=A,_.x=w):(_.x=A,_.y=w),"suspectedoutliers"===h&&w<r.uo&&w>r.lo&&(_.so=!0)}return s});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(s.translatePoints,l,c)}function u(r,n,i,s){var l,c,u=n.val,f=n.pos,h=!!f.rangebreaks,p=s.bPos,d=s.bPosPxOffset||0,y=i.boxmean||(i.meanline||{}).visible;Array.isArray(s.bdPos)?(l=s.bdPos[0],c=s.bdPos[1]):(l=s.bdPos,c=s.bdPos);var g=r.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?o.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(r){var n=f.c2l(r.pos+p,!0),o=f.l2p(n-l)+d,s=f.l2p(n+c)+d,g=h?(o+s)/2:f.l2p(n)+d,v=u.c2p(r.mean,!0),m=u.c2p(r.mean-r.sd,!0),x=u.c2p(r.mean+r.sd,!0);"h"===i.orientation?a.select(this).attr("d","M"+v+","+o+"V"+s+("sd"===y?"m0,0L"+m+","+g+"L"+v+","+o+"L"+x+","+g+"Z":"")):a.select(this).attr("d","M"+o+","+v+"H"+s+("sd"===y?"m0,0L"+g+","+m+"L"+o+","+v+"L"+g+","+x+"Z":""))})}r.exports={plot:function(r,n,i,s){var f=r._context.staticPlot,h=n.xaxis,p=n.yaxis;o.makeTraceGroups(s,i,"trace boxes").each(function(r){var n,i,o=a.select(this),s=r[0],d=s.t,y=s.trace;d.wdPos=d.bdPos*y.whiskerwidth,!0!==y.visible||d.empty?o.remove():("h"===y.orientation?(n=p,i=h):(n=h,i=p),l(o,{pos:n,val:i},y,d,f),c(o,{x:h,y:p},y,d),u(o,{pos:n,val:i},y,d))})},plotBoxAndWhiskers:l,plotPoints:c,plotBoxMean:u}},8264:function(r){r.exports=function(r,n){var i,a,o=r.cd,s=r.xaxis,l=r.yaxis,c=[];if(!1===n)for(i=0;i<o.length;i++)for(a=0;a<(o[i].pts||[]).length;a++)o[i].pts[a].selected=0;else for(i=0;i<o.length;i++)for(a=0;a<(o[i].pts||[]).length;a++){var u=o[i].pts[a],f=s.c2p(u.x),h=l.c2p(u.y);n.contains([f,h],null,u.i,r)?(c.push({pointNumber:u.i,x:s.c2d(u.x),y:l.c2d(u.y)}),u.selected=1):u.selected=0}return c}},25776:function(r,n,i){var a=i(33428),o=i(76308),s=i(43616);r.exports={style:function(r,n,i){var l=i||a.select(r).selectAll("g.trace.boxes");l.style("opacity",function(r){return r[0].trace.opacity}),l.each(function(n){var i=a.select(this),l=n[0].trace,c=l.line.width;function u(r,n,i,a){r.style("stroke-width",n+"px").call(o.stroke,i).call(o.fill,a)}var f=i.selectAll("path.box");if("candlestick"===l.type)f.each(function(r){if(!r.empty){var n=a.select(this),i=l[r.dir];u(n,i.line.width,i.line.color,i.fillcolor),n.style("opacity",l.selectedpoints&&!r.selected?.3:1)}});else{u(f,c,l.line.color,l.fillcolor),i.selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(o.stroke,l.line.color);var h=i.selectAll("path.point");s.pointStyle(h,l,r)}})},styleOnSelect:function(r,n,i){var a=n[0].trace,o=i.selectAll("path.point");a.selectedpoints?s.selectedPointStyle(o,a):s.pointStyle(o,a,r)}}},64216:function(r,n,i){var a=i(3400).extendFlat,o=i(29736).axisHoverFormat,s=i(20279),l=i(63188);function c(r){return{line:{color:a({},l.line.color,{dflt:r}),width:l.line.width,editType:"style"},fillcolor:l.fillcolor,editType:"style"}}r.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:s.x,open:s.open,high:s.high,low:s.low,close:s.close,line:{width:a({},l.line.width,{}),editType:"style"},increasing:c(s.increasing.line.color.dflt),decreasing:c(s.decreasing.line.color.dflt),text:s.text,hovertext:s.hovertext,whiskerwidth:a({},l.whiskerwidth,{dflt:0}),hoverlabel:s.hoverlabel,zorder:l.zorder}},46283:function(r,n,i){var a=i(3400),o=i(54460),s=i(1220),l=i(42812).calcCommon;function c(r,n,i,a){return{min:i,q1:Math.min(r,a),med:a,q3:Math.max(r,a),max:n}}r.exports=function(r,n){var i=r._fullLayout,u=o.getFromId(r,n.xaxis),f=o.getFromId(r,n.yaxis),h=u.makeCalcdata(n,"x"),p=s(n,u,"x",h).vals,d=l(r,n,h,p,f,c);return d.length?(a.extendFlat(d[0].t,{num:i._numBoxes,dPos:a.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),i._numBoxes++,d):[{t:{empty:!0}}]}},64588:function(r,n,i){var a=i(3400),o=i(76308),s=i(52744),l=i(31147),c=i(64216);function u(r,n,i,a){var s=i(a+".line.color");i(a+".line.width",n.line.width),i(a+".fillcolor",o.addOpacity(s,.5))}r.exports=function(r,n,i,o){function f(i,o){return a.coerce(r,n,c,i,o)}s(r,n,f,o)?(l(r,n,o,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),u(0,n,f,"increasing"),u(0,n,f,"decreasing"),f("text"),f("hovertext"),f("whiskerwidth"),o._requestRangeslider[n.xaxis]=!0,f("zorder")):n.visible=!1}},61712:function(r,n,i){r.exports={moduleType:"trace",name:"candlestick",basePlotModule:i(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:i(64216),layoutAttributes:i(16560),supplyLayoutDefaults:i(68832).supplyLayoutDefaults,crossTraceCalc:i(96404).crossTraceCalc,supplyDefaults:i(64588),calc:i(46283),plot:i(18728).plot,layerName:"boxlayer",style:i(25776).style,hoverPoints:i(18720).hoverPoints,selectPoints:i(97384)}},93504:function(r,n,i){var a=i(63856),o=i(31780);r.exports=function(r,n,i,s,l){s("a")||(s("da"),s("a0")),s("b")||(s("db"),s("b0")),["aaxis","baxis"].forEach(function(s){var c=s.charAt(0),u=r[s]||{},f=o.newContainer(n,s);a(u,f,{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,tickfont:"x",id:c+"axis",letter:c,font:n.font,name:s,data:r[c],calendar:n.calendar,dfltColor:l,bgColor:i.paper_bgcolor,autotypenumbersDflt:i.autotypenumbers,fullLayout:i}),f._categories=f._categories||[],r[s]||"-"===u.type||(r[s]={type:u.type})})}},51676:function(r,n,i){var a=i(3400).isArrayOrTypedArray;r.exports=function(r){return function r(n,i){if(!a(n)||i>=10)return null;for(var o=1/0,s=-1/0,l=n.length,c=0;c<l;c++){var u=n[c];if(a(u)){var f=r(u,i+1);f&&(o=Math.min(f[0],o),s=Math.max(f[1],s))}else o=Math.min(u,o),s=Math.max(u,s)}return[o,s]}(r,0)}},85720:function(r,n,i){var a=i(25376),o=i(98692),s=i(22548),l=a({editType:"calc"}),c=i(52904).zorder;l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=s.defaultLine,r.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:o,baxis:o,font:l,color:{valType:"color",dflt:s.defaultLine,editType:"plot"},transforms:void 0,zorder:c}},77712:function(r,n,i){var a=i(3400).isArrayOrTypedArray;r.exports=function(r,n,i,o){var s,l,c,u,f,h,p,d,y,g,v,m,x,b=a(i)?"a":"b",_=("a"===b?r.aaxis:r.baxis).smoothing,w="a"===b?r.a2i:r.b2j,T="a"===b?i:o,A="a"===b?o:i,k="a"===b?n.a.length:n.b.length,M="a"===b?n.b.length:n.a.length,S=Math.floor("a"===b?r.b2j(A):r.a2i(A)),E="a"===b?function(n){return r.evalxy([],n,S)}:function(n){return r.evalxy([],S,n)};_&&(c=Math.max(0,Math.min(M-2,S)),u=S-c,l="a"===b?function(n,i){return r.dxydi([],n,c,i,u)}:function(n,i){return r.dxydj([],c,n,u,i)});var I=w(T[0]),L=w(T[1]),C=I<L?1:-1,O=1e-8*(L-I),D=C>0?Math.floor:Math.ceil,P=C>0?Math.ceil:Math.floor,B=C>0?Math.min:Math.max,R=C>0?Math.max:Math.min,z=D(I+O),F=P(L-O),N=[[p=E(I)]];for(s=z;s*C<F*C;s+=C)f=[],v=R(I,s),x=(m=B(L,s+C))-v,h=Math.max(0,Math.min(k-2,Math.floor(.5*(v+m)))),d=E(m),_&&(y=l(h,v-h),g=l(h,m-h),f.push([p[0]+y[0]/3*x,p[1]+y[1]/3*x]),f.push([d[0]-g[0]/3*x,d[1]-g[1]/3*x])),f.push(d),N.push(f),p=d;return N}},98692:function(r,n,i){var a=i(25376),o=i(22548),s=i(94724),l=i(29736).descriptionWithDates,c=i(67824).overrideAll,u=i(98192).u,f=i(92880).extendFlat;r.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:a({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:s.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:f({},s.labelalias,{editType:"calc"}),tickfont:a({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:l("tick label")},tickformatstops:c(s.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:f({},u,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:f({},u,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:o.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:a({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(r,n,i){var a=i(85720),o=i(76308).addOpacity,s=i(24040),l=i(3400),c=i(26332),u=i(95936),f=i(42568),h=i(22416),p=i(78344),d=i(52976);r.exports=function(r,n,i){var y=i.letter,g=i.font||{},v=a[y+"axis"];function m(i,a){return l.coerce(r,n,v,i,a)}function x(i,a){return l.coerce2(r,n,v,i,a)}i.name&&(n._name=i.name,n._id=i.name),m("autotypenumbers",i.autotypenumbersDflt);var b=m("type");"-"===b&&(i.data&&function(r,n){if("-"===r.type){var i=r._id.charAt(0),a=r[i+"calendar"];r.type=d(n,a,{autotypenumbers:r.autotypenumbers})}}(n,i.data),"-"===n.type?n.type="linear":b=r.type=n.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",y+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===n.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),n._hovertitle=y,"date"===b&&s.getComponentMethod("calendars","handleDefaults")(r,n,"calendar",i.calendar),p(n,i.fullLayout),n.c2p=l.identity;var _=m("color",i.dfltColor),w=_===r.color?_:g.color;m("title.text")&&(l.coerceFont(m,"title.font",g,{overrideDflt:{size:l.bigFont(g.size),color:w}}),m("title.offset")),m("tickangle"),m("autorange",!n.isValidRange(r.range))&&m("rangemode"),m("range"),n.cleanRange(),m("fixedrange"),c(r,n,m,b),f(r,n,m,b,i),u(r,n,m,b,i),h(r,n,m,{data:i.data,dataAttr:y});var T=x("gridcolor",o(_,.3)),A=x("gridwidth"),k=x("griddash"),M=m("showgrid");M||(delete n.gridcolor,delete n.gridwidth,delete n.griddash);var S=x("startlinecolor",_),E=x("startlinewidth",A);m("startline",n.showgrid||!!S||!!E)||(delete n.startlinecolor,delete n.startlinewidth);var I=x("endlinecolor",_),L=x("endlinewidth",A);return m("endline",n.showgrid||!!I||!!L)||(delete n.endlinecolor,delete n.endlinewidth),M?(m("minorgridcount"),m("minorgridwidth",A),m("minorgriddash",k),m("minorgridcolor",o(T,.06)),n.minorgridcount||(delete n.minorgridwidth,delete n.minorgriddash,delete n.minorgridcolor)):(delete n.gridcolor,delete n.gridwidth,delete n.griddash),"none"===n.showticklabels&&(delete n.tickfont,delete n.tickangle,delete n.showexponent,delete n.exponentformat,delete n.minexponent,delete n.tickformat,delete n.showticksuffix,delete n.showtickprefix),n.showticksuffix||delete n.ticksuffix,n.showtickprefix||delete n.tickprefix,m("tickmode"),n}},58744:function(r,n,i){var a=i(54460),o=i(3400).isArray1D,s=i(60776),l=i(51676),c=i(19216),u=i(14724),f=i(24944),h=i(26136),p=i(51512),d=i(2872),y=i(81e3);r.exports=function(r,n){var i=a.getFromId(r,n.xaxis),g=a.getFromId(r,n.yaxis),v=n.aaxis,m=n.baxis,x=n.x,b=n.y,_=[];x&&o(x)&&_.push("x"),b&&o(b)&&_.push("y"),_.length&&d(n,v,m,"a","b",_);var w=n._a=n._a||n.a,T=n._b=n._b||n.b;x=n._x||n.x,b=n._y||n.y;var A={};n._cheater&&(x=s("index"===v.cheatertype?w.length:w,"index"===m.cheatertype?T.length:T,n.cheaterslope)),n._x=x=h(x),n._y=b=h(b),p(x,w,T),p(b,w,T),y(n),n.setScale();var k=l(x),M=l(b),S=.5*(k[1]-k[0]),E=.5*(k[1]+k[0]),I=.5*(M[1]-M[0]),L=.5*(M[1]+M[0]);return k=[E-1.3*S,E+1.3*S],M=[L-1.3*I,L+1.3*I],n._extremes[i._id]=a.findExtremes(i,k,{padded:!0}),n._extremes[g._id]=a.findExtremes(g,M,{padded:!0}),c(n,"a","b"),c(n,"b","a"),u(n,v),u(n,m),A.clipsegments=f(n._xctrl,n._yctrl,v,m),A.x=x,A.y=b,A.a=w,A.b=T,[A]}},24944:function(r){r.exports=function(r,n,i,a){var o,s,l,c=[],u=!!i.smoothing,f=!!a.smoothing,h=r[0].length-1,p=r.length-1;for(o=0,s=[],l=[];o<=h;o++)s[o]=r[0][o],l[o]=n[0][o];for(c.push({x:s,y:l,bicubic:u}),o=0,s=[],l=[];o<=p;o++)s[o]=r[o][h],l[o]=n[o][h];for(c.push({x:s,y:l,bicubic:f}),o=h,s=[],l=[];o>=0;o--)s[h-o]=r[p][o],l[h-o]=n[p][o];for(c.push({x:s,y:l,bicubic:u}),o=p,s=[],l=[];o>=0;o--)s[p-o]=r[o][0],l[p-o]=n[o][0];return c.push({x:s,y:l,bicubic:f}),c}},19216:function(r,n,i){var a=i(54460),o=i(92880).extendFlat;r.exports=function(r,n,i){var s,l,c,u,f,h,p,d,y,g,v,m,x,b,_=r["_"+n],w=r[n+"axis"],T=w._gridlines=[],A=w._minorgridlines=[],k=w._boundarylines=[],M=r["_"+i],S=r[i+"axis"];"array"===w.tickmode&&(w.tickvals=_.slice());var E=r._xctrl,I=r._yctrl,L=E[0].length,C=E.length,O=r._a.length,D=r._b.length;a.prepTicks(w),"array"===w.tickmode&&delete w.tickvals;var P=w.smoothing?3:1;function B(a){var o,s,l,c,u,f,h,p,y,g,v,m,x=[],b=[],_={};if("b"===n)for(l=Math.floor(Math.max(0,Math.min(D-2,s=r.b2j(a)))),c=s-l,_.length=D,_.crossLength=O,_.xy=function(n){return r.evalxy([],n,s)},_.dxy=function(n,i){return r.dxydi([],n,l,i,c)},o=0;o<O;o++)f=Math.min(O-2,o),h=o-f,p=r.evalxy([],o,s),S.smoothing&&o>0&&(y=r.dxydi([],o-1,l,0,c),x.push(u[0]+y[0]/3),b.push(u[1]+y[1]/3),g=r.dxydi([],o-1,l,1,c),x.push(p[0]-g[0]/3),b.push(p[1]-g[1]/3)),x.push(p[0]),b.push(p[1]),u=p;else for(f=Math.floor(Math.max(0,Math.min(O-2,o=r.a2i(a)))),h=o-f,_.length=O,_.crossLength=D,_.xy=function(n){return r.evalxy([],o,n)},_.dxy=function(n,i){return r.dxydj([],f,n,h,i)},s=0;s<D;s++)l=Math.min(D-2,s),c=s-l,p=r.evalxy([],o,s),S.smoothing&&s>0&&(v=r.dxydj([],f,s-1,h,0),x.push(u[0]+v[0]/3),b.push(u[1]+v[1]/3),m=r.dxydj([],f,s-1,h,1),x.push(p[0]-m[0]/3),b.push(p[1]-m[1]/3)),x.push(p[0]),b.push(p[1]),u=p;return _.axisLetter=n,_.axis=w,_.crossAxis=S,_.value=a,_.constvar=i,_.index=d,_.x=x,_.y=b,_.smoothing=S.smoothing,_}function R(a){var o,s,l,c,u,f=[],h=[],p={};if(p.length=_.length,p.crossLength=M.length,"b"===n)for(l=Math.max(0,Math.min(D-2,a)),u=Math.min(1,Math.max(0,a-l)),p.xy=function(n){return r.evalxy([],n,a)},p.dxy=function(n,i){return r.dxydi([],n,l,i,u)},o=0;o<L;o++)f[o]=E[a*P][o],h[o]=I[a*P][o];else for(s=Math.max(0,Math.min(O-2,a)),c=Math.min(1,Math.max(0,a-s)),p.xy=function(n){return r.evalxy([],a,n)},p.dxy=function(n,i){return r.dxydj([],s,n,c,i)},o=0;o<C;o++)f[o]=E[o][a*P],h[o]=I[o][a*P];return p.axisLetter=n,p.axis=w,p.crossAxis=S,p.value=_[a],p.constvar=i,p.index=a,p.x=f,p.y=h,p.smoothing=S.smoothing,p}if("array"===w.tickmode){for(u=5e-15,h=(f=[Math.floor((_.length-1-w.arraytick0)/w.arraydtick*(1+u)),Math.ceil(-w.arraytick0/w.arraydtick/(1+u))].sort(function(r,n){return r-n}))[0]-1,p=f[1]+1,d=h;d<p;d++)(l=w.arraytick0+w.arraydtick*d)<0||l>_.length-1||T.push(o(R(l),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(d=h;d<p;d++)if(v=Math.min((c=w.arraytick0+w.arraydtick*d)+w.arraydtick,_.length-1),!(c<0||c>_.length-1||v<0||v>_.length-1))for(m=_[c],x=_[v],s=0;s<w.minorgridcount;s++)(b=v-c)<=0||(g=m+(x-m)*(s+1)/(w.minorgridcount+1)*(w.arraydtick/b))<_[0]||g>_[_.length-1]||A.push(o(B(g),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&k.push(o(R(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(o(R(_.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(u=5e-15,h=(f=[Math.floor((_[_.length-1]-w.tick0)/w.dtick*(1+u)),Math.ceil((_[0]-w.tick0)/w.dtick/(1+u))].sort(function(r,n){return r-n}))[0],p=f[1],d=h;d<=p;d++)y=w.tick0+w.dtick*d,T.push(o(B(y),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(d=h-1;d<p+1;d++)for(y=w.tick0+w.dtick*d,s=0;s<w.minorgridcount;s++)(g=y+w.dtick*(s+1)/(w.minorgridcount+1))<_[0]||g>_[_.length-1]||A.push(o(B(g),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&k.push(o(B(_[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(o(B(_[_.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},14724:function(r,n,i){var a=i(54460),o=i(92880).extendFlat;r.exports=function(r,n){var i,s,l,c=n._labels=[],u=n._gridlines;for(i=0;i<u.length;i++)l=u[i],-1!==["start","both"].indexOf(n.showticklabels)&&(o(s=a.tickText(n,l.value),{prefix:void 0,suffix:void 0,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===i,isLast:i===u.length-1}),c.push(s)),-1!==["end","both"].indexOf(n.showticklabels)&&(o(s=a.tickText(n,l.value),{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===i,isLast:i===u.length-1}),c.push(s))}},62284:function(r){r.exports=function(r,n,i,a){var o=r[0]-n[0],s=r[1]-n[1],l=i[0]-n[0],c=i[1]-n[1],u=Math.pow(o*o+s*s,.25),f=Math.pow(l*l+c*c,.25),h=(f*f*o-u*u*l)*a,p=(f*f*s-u*u*c)*a,d=f*(u+f)*3,y=u*(u+f)*3;return[[n[0]+(d&&h/d),n[1]+(d&&p/d)],[n[0]-(y&&h/y),n[1]-(y&&p/y)]]}},60776:function(r,n,i){var a=i(3400).isArrayOrTypedArray;r.exports=function(r,n,i){var o,s,l,c,u,f,h=[],p=a(r)?r.length:r,d=a(n)?n.length:n,y=a(r)?r:null,g=a(n)?n:null;y&&(l=(y.length-1)/(y[y.length-1]-y[0])/(p-1)),g&&(c=(g.length-1)/(g[g.length-1]-g[0])/(d-1));var v=1/0,m=-1/0;for(s=0;s<d;s++)for(h[s]=[],u=g?(g[s]-g[0])*c:s/(d-1),o=0;o<p;o++)v=Math.min(f=(y?(y[o]-y[0])*l:o/(p-1))-u*i,v),m=Math.max(f,m),h[s][o]=f;var x=1/(m-v),b=-v*x;for(s=0;s<d;s++)for(o=0;o<p;o++)h[s][o]=x*h[s][o]+b;return h}},30180:function(r,n,i){var a=i(62284),o=i(3400).ensureArray;function s(r,n,i){var a=-.5*i[0]+1.5*n[0],o=-.5*i[1]+1.5*n[1];return[(2*a+r[0])/3,(2*o+r[1])/3]}r.exports=function(r,n,i,l,c,u){var f,h,p,d,y,g,v,m,x,b,_=i[0].length,w=i.length,T=c?3*_-2:_,A=u?3*w-2:w;for(r=o(r,A),n=o(n,A),p=0;p<A;p++)r[p]=o(r[p],T),n[p]=o(n[p],T);for(h=0,d=0;h<w;h++,d+=u?3:1)for(y=r[d],g=n[d],v=i[h],m=l[h],f=0,p=0;f<_;f++,p+=c?3:1)y[p]=v[f],g[p]=m[f];if(c)for(h=0,d=0;h<w;h++,d+=u?3:1){for(f=1,p=3;f<_-1;f++,p+=3)x=a([i[h][f-1],l[h][f-1]],[i[h][f],l[h][f]],[i[h][f+1],l[h][f+1]],c),r[d][p-1]=x[0][0],n[d][p-1]=x[0][1],r[d][p+1]=x[1][0],n[d][p+1]=x[1][1];b=s([r[d][0],n[d][0]],[r[d][2],n[d][2]],[r[d][3],n[d][3]]),r[d][1]=b[0],n[d][1]=b[1],b=s([r[d][T-1],n[d][T-1]],[r[d][T-3],n[d][T-3]],[r[d][T-4],n[d][T-4]]),r[d][T-2]=b[0],n[d][T-2]=b[1]}if(u)for(p=0;p<T;p++){for(d=3;d<A-3;d+=3)x=a([r[d-3][p],n[d-3][p]],[r[d][p],n[d][p]],[r[d+3][p],n[d+3][p]],u),r[d-1][p]=x[0][0],n[d-1][p]=x[0][1],r[d+1][p]=x[1][0],n[d+1][p]=x[1][1];b=s([r[0][p],n[0][p]],[r[2][p],n[2][p]],[r[3][p],n[3][p]]),r[1][p]=b[0],n[1][p]=b[1],b=s([r[A-1][p],n[A-1][p]],[r[A-3][p],n[A-3][p]],[r[A-4][p],n[A-4][p]]),r[A-2][p]=b[0],n[A-2][p]=b[1]}if(c&&u)for(d=1;d<A;d+=(d+1)%3==0?2:1){for(p=3;p<T-3;p+=3)x=a([r[d][p-3],n[d][p-3]],[r[d][p],n[d][p]],[r[d][p+3],n[d][p+3]],c),r[d][p-1]=.5*(r[d][p-1]+x[0][0]),n[d][p-1]=.5*(n[d][p-1]+x[0][1]),r[d][p+1]=.5*(r[d][p+1]+x[1][0]),n[d][p+1]=.5*(n[d][p+1]+x[1][1]);b=s([r[d][0],n[d][0]],[r[d][2],n[d][2]],[r[d][3],n[d][3]]),r[d][1]=.5*(r[d][1]+b[0]),n[d][1]=.5*(n[d][1]+b[1]),b=s([r[d][T-1],n[d][T-1]],[r[d][T-3],n[d][T-3]],[r[d][T-4],n[d][T-4]]),r[d][T-2]=.5*(r[d][T-2]+b[0]),n[d][T-2]=.5*(n[d][T-2]+b[1])}return[r,n]}},24588:function(r){r.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(r){r.exports=function(r,n,i){return n&&i?function(n,i,a,o,s){n||(n=[]),i*=3,a*=3;var l,c,u,f,h,p,d=o*o,y=1-o,g=y*y,v=y*o*2,m=-3*g,x=3*(g-v),b=3*(v-d),_=3*d,w=s*s,T=w*s,A=1-s,k=A*A,M=k*A;for(p=0;p<r.length;p++)l=m*(h=r[p])[a][i]+x*h[a][i+1]+b*h[a][i+2]+_*h[a][i+3],c=m*h[a+1][i]+x*h[a+1][i+1]+b*h[a+1][i+2]+_*h[a+1][i+3],u=m*h[a+2][i]+x*h[a+2][i+1]+b*h[a+2][i+2]+_*h[a+2][i+3],f=m*h[a+3][i]+x*h[a+3][i+1]+b*h[a+3][i+2]+_*h[a+3][i+3],n[p]=M*l+3*(k*s*c+A*w*u)+T*f;return n}:n?function(n,i,a,o,s){n||(n=[]),i*=3;var l,c,u,f,h=o*o,p=1-o,d=p*p,y=p*o*2,g=-3*d,v=3*(d-y),m=3*(y-h),x=3*h,b=1-s;for(u=0;u<r.length;u++)l=g*(f=r[u])[a][i]+v*f[a][i+1]+m*f[a][i+2]+x*f[a][i+3],c=g*f[a+1][i]+v*f[a+1][i+1]+m*f[a+1][i+2]+x*f[a+1][i+3],n[u]=b*l+s*c;return n}:i?function(n,i,a,o,s){n||(n=[]),a*=3;var l,c,u,f,h,p,d=s*s,y=d*s,g=1-s,v=g*g,m=v*g;for(h=0;h<r.length;h++)l=(p=r[h])[a][i+1]-p[a][i],c=p[a+1][i+1]-p[a+1][i],u=p[a+2][i+1]-p[a+2][i],f=p[a+3][i+1]-p[a+3][i],n[h]=m*l+3*(v*s*c+g*d*u)+y*f;return n}:function(n,i,a,o,s){n||(n=[]);var l,c,u,f,h=1-s;for(u=0;u<r.length;u++)l=(f=r[u])[a][i+1]-f[a][i],c=f[a+1][i+1]-f[a+1][i],n[u]=h*l+s*c;return n}}},24464:function(r){r.exports=function(r,n,i){return n&&i?function(n,i,a,o,s){n||(n=[]),i*=3,a*=3;var l,c,u,f,h,p,d=o*o,y=d*o,g=1-o,v=g*g,m=v*g,x=s*s,b=1-s,_=b*b,w=b*s*2,T=-3*_,A=3*(_-w),k=3*(w-x),M=3*x;for(p=0;p<r.length;p++)l=T*(h=r[p])[a][i]+A*h[a+1][i]+k*h[a+2][i]+M*h[a+3][i],c=T*h[a][i+1]+A*h[a+1][i+1]+k*h[a+2][i+1]+M*h[a+3][i+1],u=T*h[a][i+2]+A*h[a+1][i+2]+k*h[a+2][i+2]+M*h[a+3][i+2],f=T*h[a][i+3]+A*h[a+1][i+3]+k*h[a+2][i+3]+M*h[a+3][i+3],n[p]=m*l+3*(v*o*c+g*d*u)+y*f;return n}:n?function(n,i,a,o,s){n||(n=[]),i*=3;var l,c,u,f,h,p,d=s*s,y=d*s,g=1-s,v=g*g,m=v*g;for(h=0;h<r.length;h++)l=(p=r[h])[a+1][i]-p[a][i],c=p[a+1][i+1]-p[a][i+1],u=p[a+1][i+2]-p[a][i+2],f=p[a+1][i+3]-p[a][i+3],n[h]=m*l+3*(v*s*c+g*d*u)+y*f;return n}:i?function(n,i,a,o,s){n||(n=[]),a*=3;var l,c,u,f,h=1-o,p=s*s,d=1-s,y=d*d,g=d*s*2,v=-3*y,m=3*(y-g),x=3*(g-p),b=3*p;for(u=0;u<r.length;u++)l=v*(f=r[u])[a][i]+m*f[a+1][i]+x*f[a+2][i]+b*f[a+3][i],c=v*f[a][i+1]+m*f[a+1][i+1]+x*f[a+2][i+1]+b*f[a+3][i+1],n[u]=h*l+o*c;return n}:function(n,i,a,o,s){n||(n=[]);var l,c,u,f,h=1-o;for(u=0;u<r.length;u++)l=(f=r[u])[a+1][i]-f[a][i],c=f[a+1][i+1]-f[a][i+1],n[u]=h*l+o*c;return n}}},29056:function(r){r.exports=function(r,n,i,a,o){var s=n-2,l=i-2;return a&&o?function(n,i,a){n||(n=[]);var o,c,u,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),y=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),v=Math.max(0,Math.min(1,a-y));d*=3,y*=3;var m=g*g,x=m*g,b=1-g,_=b*b,w=_*b,T=v*v,A=T*v,k=1-v,M=k*k,S=M*k;for(p=0;p<r.length;p++)o=w*(h=r[p])[y][d]+3*(_*g*h[y][d+1]+b*m*h[y][d+2])+x*h[y][d+3],c=w*h[y+1][d]+3*(_*g*h[y+1][d+1]+b*m*h[y+1][d+2])+x*h[y+1][d+3],u=w*h[y+2][d]+3*(_*g*h[y+2][d+1]+b*m*h[y+2][d+2])+x*h[y+2][d+3],f=w*h[y+3][d]+3*(_*g*h[y+3][d+1]+b*m*h[y+3][d+2])+x*h[y+3][d+3],n[p]=S*o+3*(M*v*c+k*T*u)+A*f;return n}:a?function(n,i,a){n||(n=[]);var o,c,u,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),y=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),v=Math.max(0,Math.min(1,a-y));d*=3;var m=g*g,x=m*g,b=1-g,_=b*b,w=_*b,T=1-v;for(h=0;h<r.length;h++)o=T*(p=r[h])[y][d]+v*p[y+1][d],c=T*p[y][d+1]+v*p[y+1][d+1],u=T*p[y][d+2]+v*p[y+1][d+1],f=T*p[y][d+3]+v*p[y+1][d+1],n[h]=w*o+3*(_*g*c+b*m*u)+x*f;return n}:o?function(n,i,a){n||(n=[]);var o,c,u,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),y=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),v=Math.max(0,Math.min(1,a-y));y*=3;var m=v*v,x=m*v,b=1-v,_=b*b,w=_*b,T=1-g;for(h=0;h<r.length;h++)o=T*(p=r[h])[y][d]+g*p[y][d+1],c=T*p[y+1][d]+g*p[y+1][d+1],u=T*p[y+2][d]+g*p[y+2][d+1],f=T*p[y+3][d]+g*p[y+3][d+1],n[h]=w*o+3*(_*v*c+b*m*u)+x*f;return n}:function(n,i,a){n||(n=[]);var o,c,u,f,h=Math.max(0,Math.min(Math.floor(i),s)),p=Math.max(0,Math.min(Math.floor(a),l)),d=Math.max(0,Math.min(1,i-h)),y=Math.max(0,Math.min(1,a-p)),g=1-y,v=1-d;for(u=0;u<r.length;u++)o=v*(f=r[u])[p][h]+d*f[p][h+1],c=v*f[p+1][h]+d*f[p+1][h+1],n[u]=g*o+y*c;return n}}},38356:function(r,n,i){var a=i(3400),o=i(86411),s=i(93504),l=i(85720),c=i(22548);r.exports=function(r,n,i,u){function f(i,o){return a.coerce(r,n,l,i,o)}n._clipPathId="clip"+n.uid+"carpet";var h=f("color",c.defaultLine);a.coerceFont(f,"font",u.font),f("carpet"),s(r,n,u,f,h),n.a&&n.b?(n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0),o(r,n,f)||(n.visible=!1),n._cheater&&f("cheaterslope"),f("zorder")):n.visible=!1}},95856:function(r,n,i){r.exports={attributes:i(85720),supplyDefaults:i(38356),plot:i(164),calc:i(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:i(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(r){r.exports=function(r,n){for(var i,a=r._fullData.length,o=0;o<a;o++){var s=r._fullData[o];if(s.index!==n.index&&"carpet"===s.type&&(i||(i=s),s.carpet===n.carpet))return s}return i}},53416:function(r){r.exports=function(r,n,i){if(0===r.length)return"";var a,o=[],s=i?3:1;for(a=0;a<r.length;a+=s)o.push(r[a]+","+n[a]),i&&a<r.length-s&&(o.push("C"),o.push([r[a+1]+","+n[a+1],r[a+2]+","+n[a+2]+" "].join(" ")));return o.join(i?"":"L")}},87072:function(r,n,i){var a=i(3400).isArrayOrTypedArray;r.exports=function(r,n,i){var o;for(a(r)?r.length>n.length&&(r=r.slice(0,n.length)):r=[],o=0;o<n.length;o++)r[o]=i(n[o]);return r}},15584:function(r){r.exports=function(r,n,i,a,o,s){var l=o[0]*r.dpdx(n),c=o[1]*r.dpdy(i),u=1,f=1;if(s){var h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),p=Math.sqrt(s[0]*s[0]+s[1]*s[1]);f=Math.max(0,(o[0]*s[0]+o[1]*s[1])/h/p)}var d=180*Math.atan2(c,l)/Math.PI;return d<-90?(d+=180,u=-u):d>90&&(d-=180,u=-u),{angle:d,flip:u,p:r.c2p(a,n,i),offsetMultplier:f}}},164:function(r,n,i){var a=i(33428),o=i(43616),s=i(87072),l=i(53416),c=i(15584),u=i(72736),f=i(3400),h=f.strRotate,p=f.strTranslate,d=i(84284);function y(r,n,i,c,u,f,h){var p="const-"+u+"-lines",d=i.selectAll("."+p).data(f);d.enter().append("path").classed(p,!0).style("vector-effect",h?"none":"non-scaling-stroke"),d.each(function(i){var c=i.x,u=i.y,f="M"+l(s([],c,r.c2p),s([],u,n.c2p),i.smoothing);a.select(this).attr("d",f).style("stroke-width",i.width).style("stroke",i.color).style("stroke-dasharray",o.dashStyle(i.dash,i.width)).style("fill","none")}),d.exit().remove()}function g(r,n,i,s,l,f,d,y){var g=f.selectAll("text."+y).data(d);g.enter().append("text").classed(y,!0);var v=0,m={};return g.each(function(l,f){if("auto"===l.axis.tickangle)d=c(s,n,i,l.xy,l.dxy);else{var d,y=(l.axis.tickangle+180)*Math.PI/180;d=c(s,n,i,l.xy,[Math.cos(y),Math.sin(y)])}f||(m={angle:d.angle,flip:d.flip});var g=(l.endAnchor?-1:1)*d.flip,x=a.select(this).attr({"text-anchor":g>0?"start":"end","data-notex":1}).call(o.font,l.font).text(l.text).call(u.convertToTspans,r),b=o.bBox(this);x.attr("transform",p(d.p[0],d.p[1])+h(d.angle)+p(l.axis.labelpadding*g,.3*b.height)),v=Math.max(v,b.width+l.axis.labelpadding)}),g.exit().remove(),m.maxExtent=v,m}r.exports=function(r,n,i,o){var u=r._context.staticPlot,h=n.xaxis,p=n.yaxis,d=r._fullLayout._clips;f.makeTraceGroups(o,i,"trace").each(function(n){var i,o,v,m,b,_,w,T,A=a.select(this),k=n[0],M=k.trace,S=M.aaxis,E=M.baxis,I=f.ensureSingle(A,"g","minorlayer"),L=f.ensureSingle(A,"g","majorlayer"),C=f.ensureSingle(A,"g","boundarylayer"),O=f.ensureSingle(A,"g","labellayer");A.style("opacity",M.opacity),y(h,p,L,0,"a",S._gridlines,!0),y(h,p,L,0,"b",E._gridlines,!0),y(h,p,I,0,"a",S._minorgridlines,!0),y(h,p,I,0,"b",E._minorgridlines,!0),y(h,p,C,0,"a-boundary",S._boundarylines,u),y(h,p,C,0,"b-boundary",E._boundarylines,u);var D=g(r,h,p,M,0,O,S._labels,"a-label"),P=g(r,h,p,M,0,O,E._labels,"b-label");b=f.aggNums(Math.min,null,M.a),_=f.aggNums(Math.max,null,M.a),w=f.aggNums(Math.min,null,M.b),T=f.aggNums(Math.max,null,M.b),i=.5*(b+_),o=w,v=M.ab2xy(i,o,!0),m=M.dxyda_rough(i,o),void 0===D.angle&&f.extendFlat(D,c(M,h,p,v,M.dxydb_rough(i,o))),x(r,O,M,0,v,m,M.aaxis,h,p,D,"a-title"),i=b,o=.5*(w+T),v=M.ab2xy(i,o,!0),m=M.dxydb_rough(i,o),void 0===P.angle&&f.extendFlat(P,c(M,h,p,v,M.dxyda_rough(i,o))),x(r,O,M,0,v,m,M.baxis,h,p,P,"b-title"),function(r,n,i,a,o){var c,u,h=i.select("#"+r._clipPathId);h.size()||(h=i.append("clipPath").classed("carpetclip",!0));var p=f.ensureSingle(h,"path","carpetboundary"),d=n.clipsegments,y=[];for(u=0;u<d.length;u++)y.push(l(s([],(c=d[u]).x,a.c2p),s([],c.y,o.c2p),c.bicubic));var g="M"+y.join("L")+"Z";h.attr("id",r._clipPathId),p.attr("d",g)}(M,k,d,h,p)})};var v=d.LINE_SPACING,m=(1-d.MID_SHIFT)/v+1;function x(r,n,i,s,l,f,d,y,g,x,b){var _=[];d.title.text&&_.push(d.title.text);var w=n.selectAll("text."+b).data(_),T=x.maxExtent;w.enter().append("text").classed(b,!0),w.each(function(){var n=c(i,y,g,l,f);-1===["start","both"].indexOf(d.showticklabels)&&(T=0);var s=d.title.font.size;T+=s+d.title.offset;var b=(x.angle+(x.flip<0?180:0)-n.angle+450)%360,_=a.select(this);_.text(d.title.text).call(u.convertToTspans,r),b>90&&b<270&&(T=(-u.lineCount(_)+m)*v*s-T),_.attr("transform",p(n.p[0],n.p[1])+h(n.angle)+p(0,T)).attr("text-anchor","middle").call(o.font,d.title.font)}),w.exit().remove()}},81e3:function(r,n,i){var a=i(24588),o=i(14952).findBin,s=i(30180),l=i(29056),c=i(26435),u=i(24464);r.exports=function(r){var n=r._a,i=r._b,f=n.length,h=i.length,p=r.aaxis,d=r.baxis,y=n[0],g=n[f-1],v=i[0],m=i[h-1],x=n[n.length-1]-n[0],b=i[i.length-1]-i[0],_=x*a.RELATIVE_CULL_TOLERANCE,w=b*a.RELATIVE_CULL_TOLERANCE;y-=_,g+=_,v-=w,m+=w,r.isVisible=function(r,n){return r>y&&r<g&&n>v&&n<m},r.isOccluded=function(r,n){return r<y||r>g||n<v||n>m},r.setScale=function(){var n=r._x,i=r._y,a=s(r._xctrl,r._yctrl,n,i,p.smoothing,d.smoothing);r._xctrl=a[0],r._yctrl=a[1],r.evalxy=l([r._xctrl,r._yctrl],f,h,p.smoothing,d.smoothing),r.dxydi=c([r._xctrl,r._yctrl],p.smoothing,d.smoothing),r.dxydj=u([r._xctrl,r._yctrl],p.smoothing,d.smoothing)},r.i2a=function(r){var i=Math.max(0,Math.floor(r[0]),f-2),a=r[0]-i;return(1-a)*n[i]+a*n[i+1]},r.j2b=function(r){var n=Math.max(0,Math.floor(r[1]),f-2),a=r[1]-n;return(1-a)*i[n]+a*i[n+1]},r.ij2ab=function(n){return[r.i2a(n[0]),r.j2b(n[1])]},r.a2i=function(r){var i=Math.max(0,Math.min(o(r,n),f-2)),a=n[i],s=n[i+1];return Math.max(0,Math.min(f-1,i+(r-a)/(s-a)))},r.b2j=function(r){var n=Math.max(0,Math.min(o(r,i),h-2)),a=i[n],s=i[n+1];return Math.max(0,Math.min(h-1,n+(r-a)/(s-a)))},r.ab2ij=function(n){return[r.a2i(n[0]),r.b2j(n[1])]},r.i2c=function(n,i){return r.evalxy([],n,i)},r.ab2xy=function(a,o,s){if(!s&&(a<n[0]||a>n[f-1]|o<i[0]||o>i[h-1]))return[!1,!1];var l=r.a2i(a),c=r.b2j(o),u=r.evalxy([],l,c);if(s){var p,d,y,g,v=0,m=0,x=[];a<n[0]?(p=0,d=0,v=(a-n[0])/(n[1]-n[0])):a>n[f-1]?(p=f-2,d=1,v=(a-n[f-1])/(n[f-1]-n[f-2])):d=l-(p=Math.max(0,Math.min(f-2,Math.floor(l)))),o<i[0]?(y=0,g=0,m=(o-i[0])/(i[1]-i[0])):o>i[h-1]?(y=h-2,g=1,m=(o-i[h-1])/(i[h-1]-i[h-2])):g=c-(y=Math.max(0,Math.min(h-2,Math.floor(c)))),v&&(r.dxydi(x,p,y,d,g),u[0]+=x[0]*v,u[1]+=x[1]*v),m&&(r.dxydj(x,p,y,d,g),u[0]+=x[0]*m,u[1]+=x[1]*m)}return u},r.c2p=function(r,n,i){return[n.c2p(r[0]),i.c2p(r[1])]},r.p2x=function(r,n,i){return[n.p2c(r[0]),i.p2c(r[1])]},r.dadi=function(r){var i=Math.max(0,Math.min(n.length-2,r));return n[i+1]-n[i]},r.dbdj=function(r){var n=Math.max(0,Math.min(i.length-2,r));return i[n+1]-i[n]},r.dxyda=function(n,i,a,o){var s=r.dxydi(null,n,i,a,o),l=r.dadi(n,a);return[s[0]/l,s[1]/l]},r.dxydb=function(n,i,a,o){var s=r.dxydj(null,n,i,a,o),l=r.dbdj(i,o);return[s[0]/l,s[1]/l]},r.dxyda_rough=function(n,i,a){var o=x*(a||.1),s=r.ab2xy(n+o,i,!0),l=r.ab2xy(n-o,i,!0);return[.5*(s[0]-l[0])/o,.5*(s[1]-l[1])/o]},r.dxydb_rough=function(n,i,a){var o=b*(a||.1),s=r.ab2xy(n,i+o,!0),l=r.ab2xy(n,i-o,!0);return[.5*(s[0]-l[0])/o,.5*(s[1]-l[1])/o]},r.dpdx=function(r){return r._m},r.dpdy=function(r){return r._m}}},51512:function(r,n,i){var a=i(3400);r.exports=function(r,n,i){var o,s,l,c,u,f,h,p,d,y,g,v,m,x,b=[],_=[],w=r[0].length,T=r.length,A=0;for(o=0;o<w;o++)for(s=0;s<T;s++)void 0===r[s][o]&&(b.push(o),_.push(s),r[s][o]=function(n,i){var a,o=0,s=0;return n>0&&void 0!==(a=r[i][n-1])&&(s++,o+=a),n<w-1&&void 0!==(a=r[i][n+1])&&(s++,o+=a),i>0&&void 0!==(a=r[i-1][n])&&(s++,o+=a),i<T-1&&void 0!==(a=r[i+1][n])&&(s++,o+=a),o/Math.max(1,s)}(o,s)),A=Math.max(A,Math.abs(r[s][o]));if(!b.length)return r;var k=0,M=0,S=b.length;do{for(k=0,l=0;l<S;l++){o=b[l],s=_[l];var E,I,L,C,O,D,P=0,B=0;0===o?(L=n[O=Math.min(w-1,2)],C=n[1],E=r[s][O],B+=(I=r[s][1])+(I-E)*(n[0]-C)/(C-L),P++):o===w-1&&(L=n[O=Math.max(0,w-3)],C=n[w-2],E=r[s][O],B+=(I=r[s][w-2])+(I-E)*(n[w-1]-C)/(C-L),P++),(0===o||o===w-1)&&s>0&&s<T-1&&(c=i[s+1]-i[s],B+=((u=i[s]-i[s-1])*r[s+1][o]+c*r[s-1][o])/(u+c),P++),0===s?(L=i[D=Math.min(T-1,2)],C=i[1],E=r[D][o],B+=(I=r[1][o])+(I-E)*(i[0]-C)/(C-L),P++):s===T-1&&(L=i[D=Math.max(0,T-3)],C=i[T-2],E=r[D][o],B+=(I=r[T-2][o])+(I-E)*(i[T-1]-C)/(C-L),P++),(0===s||s===T-1)&&o>0&&o<w-1&&(c=n[o+1]-n[o],B+=((u=n[o]-n[o-1])*r[s][o+1]+c*r[s][o-1])/(u+c),P++),P?B/=P:(f=n[o+1]-n[o],h=n[o]-n[o-1],g=(p=i[s+1]-i[s])*(d=i[s]-i[s-1])*(p+d),B=((y=f*h*(f+h))*(d*r[s+1][o]+p*r[s-1][o])+g*(h*r[s][o+1]+f*r[s][o-1]))/(g*(h+f)+y*(d+p))),k+=(m=(v=B-r[s][o])/A)*m,x=P?0:.85,r[s][o]+=v*(1+x)}k=Math.sqrt(k)}while(M++<100&&k>1e-5)return a.log("Smoother converged to",k,"after",M,"iterations"),r}},86411:function(r,n,i){var a=i(3400).isArray1D;r.exports=function(r,n,i){var o=i("x"),s=o&&o.length,l=i("y"),c=l&&l.length;if(!s&&!c)return!1;if(n._cheater=!o,s&&!a(o)||c&&!a(l))n._length=null;else{var u=s?o.length:1/0;c&&(u=Math.min(u,l.length)),n.a&&n.a.length&&(u=Math.min(u,n.a.length)),n.b&&n.b.length&&(u=Math.min(u,n.b.length)),n._length=u}return!0}},83372:function(r,n,i){var a=i(21776).Ks,o=i(6096),s=i(49084),l=i(45464),c=i(22548).defaultLine,u=i(92880).extendFlat,f=o.marker.line;r.exports=u({locations:{valType:"data_array",editType:"calc"},locationmode:o.locationmode,z:{valType:"data_array",editType:"calc"},geojson:u({},o.geojson,{}),featureidkey:o.featureidkey,text:u({},o.text,{}),hovertext:u({},o.hovertext,{}),marker:{line:{color:u({},f.color,{dflt:c}),width:u({},f.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:u({},l.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:a(),showlegend:u({},l.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(r,n,i){var a=i(38248),o=i(39032).BADNUM,s=i(47128),l=i(20148),c=i(4500);function u(r){return r&&"string"==typeof r}r.exports=function(r,n){var i,f=n._length,h=Array(f);i=n.geojson?function(r){return u(r)||a(r)}:u;for(var p=0;p<f;p++){var d=h[p]={},y=n.locations[p],g=n.z[p];i(y)&&a(g)?(d.loc=y,d.z=g):(d.loc=null,d.z=o),d.index=p}return l(h,n),s(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),c(h,n),h}},30972:function(r,n,i){var a=i(3400),o=i(27260),s=i(83372);r.exports=function(r,n,i,l){function c(i,o){return a.coerce(r,n,s,i,o)}var u=c("locations"),f=c("z");if(u&&u.length&&a.isArrayOrTypedArray(f)&&f.length){n._length=Math.min(u.length,f.length);var h,p=c("geojson");("string"==typeof p&&""!==p||a.isPlainObject(p))&&(h="geojson-id"),"geojson-id"===c("locationmode",h)&&c("featureidkey"),c("text"),c("hovertext"),c("hovertemplate"),c("marker.line.width")&&c("marker.line.color"),c("marker.opacity"),o(r,n,l,c,{prefix:"",cLetter:"z"}),a.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},52428:function(r){r.exports=function(r,n,i,a,o){r.location=n.location,r.z=n.z;var s=a[o];return s.fIn&&s.fIn.properties&&(r.properties=s.fIn.properties),r.ct=s.ct,r}},69224:function(r,n,i){var a=i(54460),o=i(83372),s=i(3400).fillText;r.exports=function(r,n,i){var l,c,u,f,h=r.cd,p=h[0].trace,d=r.subplot,y=[n,i],g=[n+360,i];for(c=0;c<h.length;c++)if(f=!1,(l=h[c])._polygons){for(u=0;u<l._polygons.length;u++)l._polygons[u].contains(y)&&(f=!f),l._polygons[u].contains(g)&&(f=!f);if(f)break}if(f&&l)return r.x0=r.x1=r.xa.c2p(l.ct),r.y0=r.y1=r.ya.c2p(l.ct),r.index=l.index,r.location=l.loc,r.z=l.z,r.zLabel=a.tickText(d.mockAxis,d.mockAxis.c2l(l.z),"hover").text,r.hovertemplate=l.hovertemplate,function(r,n,i){if(!n.hovertemplate){var a=i.hi||n.hoverinfo,l=String(i.loc),c="all"===a?o.hoverinfo.flags:a.split("+"),u=-1!==c.indexOf("name"),f=-1!==c.indexOf("location"),h=-1!==c.indexOf("z"),p=-1!==c.indexOf("text"),d=[];!u&&f?r.nameOverride=l:(u&&(r.nameOverride=n.name),f&&d.push(l)),h&&d.push(r.zLabel),p&&s(i,n,d),r.extraText=d.join("<br>")}}(r,p,l),[r]}},54272:function(r,n,i){r.exports={attributes:i(83372),supplyDefaults:i(30972),colorbar:i(96288),calc:i(7924),calcGeoJSON:i(88364).calcGeoJSON,plot:i(88364).plot,style:i(7947).style,styleOnSelect:i(7947).styleOnSelect,hoverPoints:i(69224),eventData:i(52428),selectPoints:i(17328),moduleType:"trace",name:"choropleth",basePlotModule:i(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(r,n,i){var a=i(33428),o=i(3400),s=i(27144),l=i(59972).getTopojsonFeatures,c=i(19280).findExtremes,u=i(7947).style;r.exports={calcGeoJSON:function(r,n){for(var i=r[0].trace,a=n[i.geo],o=a._subplot,u=i.locationmode,f=i._length,h="geojson-id"===u?s.extractTraceFeature(r):l(i,o.topojson),p=[],d=[],y=0;y<f;y++){var g=r[y],v="geojson-id"===u?g.fOut:s.locationToFeature(u,g.loc,h);if(v){g.geojson=v,g.ct=v.properties.ct,g._polygons=s.feature2polygons(v);var m=s.computeBbox(v);p.push(m[0],m[2]),d.push(m[1],m[3])}else g.geojson=null}if("geojson"===a.fitbounds&&"geojson-id"===u){var x=s.computeBbox(s.getTraceGeojson(i));p=[x[0],x[2]],d=[x[1],x[3]]}var b={padded:!0};i._extremes.lon=c(a.lonaxis._ax,p,b),i._extremes.lat=c(a.lataxis._ax,d,b)},plot:function(r,n,i){var s=n.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(s,i,"trace choropleth").each(function(n){var i=a.select(this).selectAll("path.choroplethlocation").data(o.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),u(r,n)})}}},17328:function(r){r.exports=function(r,n){var i,a,o,s,l,c=r.cd,u=r.xaxis,f=r.yaxis,h=[];if(!1===n)for(i=0;i<c.length;i++)c[i].selected=0;else for(i=0;i<c.length;i++)(o=(a=c[i]).ct)&&(s=u.c2p(o),l=f.c2p(o),n.contains([s,l],null,i,r)?(h.push({pointNumber:i,lon:o[0],lat:o[1]}),a.selected=1):a.selected=0);return h}},7947:function(r,n,i){var a=i(33428),o=i(76308),s=i(43616),l=i(8932);function c(r,n){var i=n[0].trace,c=n[0].node3.selectAll(".choroplethlocation"),u=i.marker||{},f=u.line||{},h=l.makeColorScaleFuncFromTrace(i);c.each(function(r){a.select(this).attr("fill",h(r.z)).call(o.stroke,r.mlc||f.color).call(s.dashLine,"",r.mlw||f.width||0).style("opacity",u.opacity)}),s.selectedPointStyle(c,i)}r.exports={style:function(r,n){n&&c(0,n)},styleOnSelect:function(r,n){var i=n[0].node3,a=n[0].trace;a.selectedpoints?s.selectedPointStyle(i.selectAll(".choroplethlocation"),a):c(0,n)}}},45608:function(r,n,i){var a=i(83372),o=i(49084),s=i(21776).Ks,l=i(45464),c=i(92880).extendFlat;r.exports=c({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:c({},a.featureidkey,{}),below:{valType:"string",editType:"plot"},text:a.text,hovertext:a.hovertext,marker:{line:{color:c({},a.marker.line.color,{editType:"plot"}),width:c({},a.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:c({},a.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:c({},a.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c({},a.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:a.hoverinfo,hovertemplate:s({},{keys:["properties"]}),showlegend:c({},l.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(r,n,i){var a=i(38248),o=i(3400),s=i(8932),l=i(43616),c=i(44808).makeBlank,u=i(27144);function f(r){var n,i=r[0].trace,a=i._opts;if(i.selectedpoints){for(var s=l.makeSelectedPointStyleFns(i),c=0;c<r.length;c++){var u=r[c];u.fOut&&(u.fOut.properties.mo2=s.selectedOpacityFn(u))}n={type:"identity",property:"mo2"}}else n=o.isArrayOrTypedArray(i.marker.opacity)?{type:"identity",property:"mo"}:i.marker.opacity;return o.extendFlat(a.fill.paint,{"fill-opacity":n}),o.extendFlat(a.line.paint,{"line-opacity":n}),a}r.exports={convert:function(r){var n=r[0].trace,i=!0===n.visible&&0!==n._length,l={layout:{visibility:"none"},paint:{}},h={layout:{visibility:"none"},paint:{}},p=n._opts={fill:l,line:h,geojson:c()};if(!i)return p;var d=u.extractTraceFeature(r);if(!d)return p;var y,g,v,m=s.makeColorScaleFuncFromTrace(n),x=n.marker,b=x.line||{};o.isArrayOrTypedArray(x.opacity)&&(y=function(r){var n=r.mo;return a(n)?+o.constrain(n,0,1):0}),o.isArrayOrTypedArray(b.color)&&(g=function(r){return r.mlc}),o.isArrayOrTypedArray(b.width)&&(v=function(r){return r.mlw});for(var _=0;_<r.length;_++){var w=r[_],T=w.fOut;if(T){var A=T.properties;A.fc=m(w.z),y&&(A.mo=y(w)),g&&(A.mlc=g(w)),v&&(A.mlw=v(w)),w.ct=A.ct,w._polygons=u.feature2polygons(T)}}var k=y?{type:"identity",property:"mo"}:x.opacity;return o.extendFlat(l.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":k}),o.extendFlat(h.paint,{"line-color":g?{type:"identity",property:"mlc"}:b.color,"line-width":v?{type:"identity",property:"mlw"}:b.width,"line-opacity":k}),l.layout.visibility="visible",h.layout.visibility="visible",p.geojson={type:"FeatureCollection",features:d},f(r),p},convertOnSelect:f}},9352:function(r,n,i){var a=i(3400),o=i(27260),s=i(45608);r.exports=function(r,n,i,l){function c(i,o){return a.coerce(r,n,s,i,o)}var u=c("locations"),f=c("z"),h=c("geojson");a.isArrayOrTypedArray(u)&&u.length&&a.isArrayOrTypedArray(f)&&f.length&&("string"==typeof h&&""!==h||a.isPlainObject(h))?(c("featureidkey"),n._length=Math.min(u.length,f.length),c("below"),c("text"),c("hovertext"),c("hovertemplate"),c("marker.line.width")&&c("marker.line.color"),c("marker.opacity"),o(r,n,l,c,{prefix:"",cLetter:"z"}),a.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},85404:function(r,n,i){r.exports={attributes:i(45608),supplyDefaults:i(9352),colorbar:i(96288),calc:i(7924),plot:i(61288),hoverPoints:i(69224),eventData:i(52428),selectPoints:i(17328),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(r,n){for(var i=n.getMapLayers(),a=i.length-2;a>=0;a--){var o=i[a].id;if("string"==typeof o&&0===o.indexOf("water")){for(var s=a+1;s<i.length;s++)if("string"==typeof(o=i[s].id)&&-1===o.indexOf("plotly-"))return o}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:i(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(r,n,i){var a=i(13504).convert,o=i(13504).convertOnSelect,s=i(47552).traceLayerPrefix;function l(r,n){this.type="choroplethmapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",s+n+"-fill"],["line",s+n+"-line"]],this.below=null}var c=l.prototype;c.update=function(r){this._update(a(r)),r[0].trace._glTrace=this},c.updateOnSelect=function(r){this._update(o(r))},c._update=function(r){var n=this.subplot,i=this.layerList,a=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(r.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(r,a),this.below=a);for(var o=0;o<i.length;o++){var s=i[o],l=s[0],c=s[1],u=r[l];n.setOptions(c,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&n.setOptions(c,"setPaintProperty",u.paint)}},c._addLayers=function(r,n){for(var i=this.subplot,a=this.layerList,o=this.sourceId,s=0;s<a.length;s++){var l=a[s],c=l[0],u=r[c];i.addLayer({type:c,id:l[1],source:o,layout:u.layout,paint:u.paint},n)}},c._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,i=n.length-1;i>=0;i--)r.removeLayer(n[i][1])},c.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},r.exports=function(r,n){var i=n[0].trace,o=new l(r,i.uid),s=o.sourceId,c=a(n),u=o.below=r.belowLookup["trace-"+i.uid];return r.map.addSource(s,{type:"geojson",data:c.geojson}),o._addLayers(c,u),n[0].trace._glTrace=o,o}},86040:function(r,n,i){var a=i(49084),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(52948),c=i(45464),u=i(92880).extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["norm"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:u({},c.showlegend,{dflt:!1})};u(f,a("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){f[r]=l[r]}),f.hoverinfo=u({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,r.exports=f},83344:function(r,n,i){var a=i(47128);r.exports=function(r,n){for(var i=n.u,o=n.v,s=n.w,l=Math.min(n.x.length,n.y.length,n.z.length,i.length,o.length,s.length),c=-1/0,u=1/0,f=0;f<l;f++){var h=i[f],p=o[f],d=s[f],y=Math.sqrt(h*h+p*p+d*d);c=Math.max(c,y),u=Math.min(u,y)}n._len=l,n._normMax=c,a(r,n,{vals:[u,c],containerStr:"",cLetter:"c"})}},6648:function(r,n,i){var a=i(67792).gl_cone3d,o=i(67792).gl_cone3d.createConeMesh,s=i(3400).simpleMap,l=i(33040).parseColorScale,c=i(8932).extractOpts,u=i(3400).isArrayOrTypedArray,f=i(52094);function h(r,n){this.scene=r,this.uid=n,this.mesh=null,this.data=null}var p=h.prototype;p.handlePick=function(r){if(r.object===this.mesh){var n=r.index=r.data.index,i=this.data.x[n],a=this.data.y[n],o=this.data.z[n],s=this.data.u[n],l=this.data.v[n],c=this.data.w[n];r.traceCoordinate=[i,a,o,s,l,c,Math.sqrt(s*s+l*l+c*c)];var f=this.data.hovertext||this.data.text;return u(f)&&void 0!==f[n]?r.textLabel=f[n]:f&&(r.textLabel=f),!0}};var d={xaxis:0,yaxis:1,zaxis:2},y={tip:1,tail:0,cm:.25,center:.5},g={tip:1,tail:1,cm:.75,center:.5};function v(r,n){var i=r.fullSceneLayout,o=r.dataScale,u={};function h(r,n){var a=i[n],l=o[d[n]];return s(r,function(r){return a.d2l(r)*l})}u.vectors=f(h(n.u,"xaxis"),h(n.v,"yaxis"),h(n.w,"zaxis"),n._len),u.positions=f(h(n.x,"xaxis"),h(n.y,"yaxis"),h(n.z,"zaxis"),n._len);var p=c(n);u.colormap=l(n),u.vertexIntensityBounds=[p.min/n._normMax,p.max/n._normMax],u.coneOffset=y[n.anchor];var v=n.sizemode;"scaled"===v?u.coneSize=n.sizeref||.5:"absolute"===v?u.coneSize=n.sizeref&&n._normMax?n.sizeref/n._normMax:.5:"raw"===v&&(u.coneSize=n.sizeref),u.coneSizemode=v;var m=a(u),x=n.lightposition;return m.lightPosition=[x.x,x.y,x.z],m.ambient=n.lighting.ambient,m.diffuse=n.lighting.diffuse,m.specular=n.lighting.specular,m.roughness=n.lighting.roughness,m.fresnel=n.lighting.fresnel,m.opacity=n.opacity,n._pad=g[n.anchor]*m.vectorScale*m.coneScale*n._normMax,m}p.update=function(r){this.data=r;var n=v(this.scene,r);this.mesh.update(n)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=o(r.glplot.gl,v(r,n)),a=new h(r,n.uid);return a.mesh=i,a.data=n,i._trace=a,r.glplot.add(i),a}},86096:function(r,n,i){var a=i(3400),o=i(27260),s=i(86040);r.exports=function(r,n,i,l){function c(i,o){return a.coerce(r,n,s,i,o)}var u=c("u"),f=c("v"),h=c("w"),p=c("x"),d=c("y"),y=c("z");if(u&&u.length&&f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length&&y&&y.length){var g=c("sizemode");c("sizeref","raw"===g?1:.5),c("anchor"),c("lighting.ambient"),c("lighting.diffuse"),c("lighting.specular"),c("lighting.roughness"),c("lighting.fresnel"),c("lightposition.x"),c("lightposition.y"),c("lightposition.z"),o(r,n,l,c,{prefix:"",cLetter:"c"}),c("text"),c("hovertext"),c("hovertemplate"),c("uhoverformat"),c("vhoverformat"),c("whoverformat"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),n._length=null}else n.visible=!1}},26048:function(r,n,i){r.exports={moduleType:"trace",name:"cone",basePlotModule:i(12536),categories:["gl3d","showLegend"],attributes:i(86040),supplyDefaults:i(86096),colorbar:{min:"cmin",max:"cmax"},calc:i(83344),plot:i(6648),eventData:function(r,n){return r.norm=n.traceCoordinate[6],r},meta:{}}},67104:function(r,n,i){var a=i(83328),o=i(52904),s=i(29736),l=s.axisHoverFormat,c=s.descriptionOnlyNumbers,u=i(49084),f=i(98192).u,h=i(25376),p=i(92880).extendFlat,d=i(69104),y=d.COMPARISON_OPS2,g=d.INTERVAL_OPS,v=o.line;r.exports=p({z:a.z,x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,text:a.text,hovertext:a.hovertext,transpose:a.transpose,xtype:a.xtype,ytype:a.ytype,xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:a.hovertemplate,texttemplate:p({},a.texttemplate,{}),textfont:p({},a.textfont,{}),hoverongaps:a.hoverongaps,connectgaps:p({},a.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:c("contour label")},operation:{valType:"enumerated",values:[].concat(y).concat(g),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:p({},v.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:f,smoothing:p({},v.smoothing,{}),editType:"plot"},zorder:o.zorder},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(r,n,i){var a=i(8932),o=i(19512),s=i(54444),l=i(46960);r.exports=function(r,n){var i=o(r,n),c=i[0].z;s(n,c);var u,f=n.contours,h=a.extractOpts(n);if("heatmap"===f.coloring&&h.auto&&!1===n.autocontour){var p=f.start,d=l(f),y=f.size||1,g=Math.floor((d-p)/y)+1;isFinite(y)||(y=1,g=1);var v=p-y/2;u=[v,v+g*y]}else u=c;return a.calc(r,n,{vals:u,cLetter:"z"}),i}},56008:function(r){r.exports=function(r,n){var i,a=r[0],o=a.z;switch(n.type){case"levels":var s=Math.min(o[0][0],o[0][1]);for(i=0;i<r.length;i++){var l=r[i];l.prefixBoundary=!l.edgepaths.length&&(s>l.level||l.starts.length&&s===l.level)}break;case"constraint":if(a.prefixBoundary=!1,a.edgepaths.length)return;var c=a.x.length,u=a.y.length,f=-1/0,h=1/0;for(i=0;i<u;i++)h=Math.min(h=Math.min(h,o[i][0]),o[i][c-1]),f=Math.max(f=Math.max(f,o[i][0]),o[i][c-1]);for(i=1;i<c-1;i++)h=Math.min(h=Math.min(h,o[0][i]),o[u-1][i]),f=Math.max(f=Math.max(f,o[0][i]),o[u-1][i]);var p,d,y=n.value;switch(n._operation){case">":y>f&&(a.prefixBoundary=!0);break;case"<":(y<h||a.starts.length&&y===h)&&(a.prefixBoundary=!0);break;case"[]":p=Math.min(y[0],y[1]),((d=Math.max(y[0],y[1]))<h||p>f||a.starts.length&&d===h)&&(a.prefixBoundary=!0);break;case"][":p=Math.min(y[0],y[1]),d=Math.max(y[0],y[1]),p<h&&d>f&&(a.prefixBoundary=!0)}}}},55296:function(r,n,i){var a=i(8932),o=i(41076),s=i(46960);r.exports={min:"zmin",max:"zmax",calc:function(r,n,i){var l=n.contours,c=n.line,u=l.size||1,f=l.coloring,h=o(n,{isColorbar:!0});if("heatmap"===f){var p=a.extractOpts(n);i._fillgradient=p.reversescale?a.flipScale(p.colorscale):p.colorscale,i._zrange=[p.min,p.max]}else"fill"===f&&(i._fillcolor=h);i._line={color:"lines"===f?h:c.color,width:!1!==l.showlines?c.width:0,dash:c.dash},i._levels={start:l.start,end:s(l),size:u}}}},93252:function(r){r.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(r,n,i){var a=i(38248),o=i(17428),s=i(76308),l=s.addOpacity,c=s.opacity,u=i(69104),f=i(3400).isArrayOrTypedArray,h=u.CONSTRAINT_REDUCTION,p=u.COMPARISON_OPS2;r.exports=function(r,n,i,s,u,d){var y,g,v,m,x=n.contours,b=i("contours.operation");x._operation=h[b],-1===p.indexOf(x.operation)?(i("contours.value",[0,1]),f(x.value)?x.value.length>2?x.value=x.value.slice(2):0===x.length?x.value=[0,1]:x.length<2?(y=parseFloat(x.value[0]),x.value=[y,y+1]):x.value=[parseFloat(x.value[0]),parseFloat(x.value[1])]:a(x.value)&&(y=parseFloat(x.value),x.value=[y,y+1])):(i("contours.value",0),a(x.value)||(f(x.value)?x.value=parseFloat(x.value[0]):x.value=0)),"="===b?g=x.showlines=!0:(g=i("contours.showlines"),m=i("fillcolor",l((r.line||{}).color||u,.5))),g&&(v=i("line.color",m&&c(m)?l(n.fillcolor,1):u),i("line.width",2),i("line.dash")),i("line.smoothing"),o(i,s,v,d)}},3212:function(r,n,i){var a=i(69104),o=i(38248);function s(r,n){var i,s=Array.isArray(n);function l(r){return o(r)?+r:null}return -1!==a.COMPARISON_OPS2.indexOf(r)?i=l(s?n[0]:n):-1!==a.INTERVAL_OPS.indexOf(r)?i=s?[l(n[0]),l(n[1])]:[l(n),l(n)]:-1!==a.SET_OPS.indexOf(r)&&(i=s?n.map(l):[l(n)]),i}function l(r){return function(n){var i=Math.min((n=s(r,n))[0],n[1]),a=Math.max(n[0],n[1]);return{start:i,end:a,size:a-i}}}function c(r){return function(n){return{start:n=s(r,n),end:1/0,size:1/0}}}r.exports={"[]":l("[]"),"][":l("]["),">":c(">"),"<":c("<"),"=":c("=")}},84952:function(r){r.exports=function(r,n,i,a){var o=a("contours.start"),s=a("contours.end"),l=i("contours.size");((!1===o||!1===s?n.autocontour=!0:i("autocontour",!1))||!l)&&i("ncontours")}},82172:function(r,n,i){var a=i(3400);function o(r){return a.extendFlat({},r,{edgepaths:a.extendDeep([],r.edgepaths),paths:a.extendDeep([],r.paths),starts:a.extendDeep([],r.starts)})}r.exports=function(r,n){var i,s,l,c=function(r){return r.reverse()},u=function(r){return r};switch(n){case"=":case"<":return r;case">":for(1!==r.length&&a.warn("Contour data invalid for the specified inequality operation."),s=r[0],i=0;i<s.edgepaths.length;i++)s.edgepaths[i]=c(s.edgepaths[i]);for(i=0;i<s.paths.length;i++)s.paths[i]=c(s.paths[i]);for(i=0;i<s.starts.length;i++)s.starts[i]=c(s.starts[i]);return r;case"][":var f=c;c=u,u=f;case"[]":for(2!==r.length&&a.warn("Contour data invalid for the specified inequality range operation."),s=o(r[0]),l=o(r[1]),i=0;i<s.edgepaths.length;i++)s.edgepaths[i]=c(s.edgepaths[i]);for(i=0;i<s.paths.length;i++)s.paths[i]=c(s.paths[i]);for(i=0;i<s.starts.length;i++)s.starts[i]=c(s.starts[i]);for(;l.edgepaths.length;)s.edgepaths.push(u(l.edgepaths.shift()));for(;l.paths.length;)s.paths.push(u(l.paths.shift()));for(;l.starts.length;)s.starts.push(u(l.starts.shift()));return[s]}}},57004:function(r,n,i){var a=i(3400),o=i(51264),s=i(31147),l=i(95536),c=i(84952),u=i(97680),f=i(39096),h=i(67104);r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,h,i,o)}if(o(r,n,d,p)){s(r,n,p,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var y="constraint"===d("contours.type");d("connectgaps",a.isArray1D(n.z)),y?l(r,n,d,p,i):(c(r,n,d,function(i){return a.coerce2(r,n,h,i)}),u(r,n,d,p)),n.contours&&"heatmap"===n.contours.coloring&&f(d,p),d("zorder")}else n.visible=!1}},61512:function(r,n,i){var a=i(3400),o=i(3212),s=i(46960);r.exports=function(r,n,i){for(var l="constraint"===r.type?o[r._operation](r.value):r,c=l.size,u=[],f=s(l),h=i.trace._carpetTrace,p=h?{xaxis:h.aaxis,yaxis:h.baxis,x:i.a,y:i.b}:{xaxis:n.xaxis,yaxis:n.yaxis,x:i.x,y:i.y},d=l.start;d<f;d+=c)if(u.push(a.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},p)),u.length>1e3){a.warn("Too many contours, clipping at 1000",r);break}return u}},46960:function(r){r.exports=function(r){return r.end+r.size/1e6}},88748:function(r,n,i){var a=i(3400),o=i(93252);function s(r,n,i,a){return Math.abs(r[0]-n[0])<i&&Math.abs(r[1]-n[1])<a}function l(r,n,i,l,u){var f,h,p,d,y=n.join(","),g=r.crossings[y],v=(h=0,p=0,(f=g)>20&&i?208===f||1114===f?h=0===n[0]?1:-1:p=0===n[1]?1:-1:-1!==o.BOTTOMSTART.indexOf(f)?p=1:-1!==o.LEFTSTART.indexOf(f)?h=1:-1!==o.TOPSTART.indexOf(f)?p=-1:h=-1,[h,p]),m=[c(r,n,[-v[0],-v[1]])],x=r.z.length,b=r.z[0].length,_=n.slice(),w=v.slice();for(d=0;d<1e4;d++){if(g>20?(g=o.CHOOSESADDLE[g][0>(v[0]||v[1])?0:1],r.crossings[y]=o.SADDLEREMAINDER[g]):delete r.crossings[y],!(v=o.NEWDELTA[g])){a.log("Found bad marching index:",g,n,r.level);break}m.push(c(r,n,v)),n[0]+=v[0],n[1]+=v[1],y=n.join(","),s(m[m.length-1],m[m.length-2],l,u)&&m.pop();var T=v[0]&&(n[0]<0||n[0]>b-2)||v[1]&&(n[1]<0||n[1]>x-2);if(n[0]===_[0]&&n[1]===_[1]&&v[0]===w[0]&&v[1]===w[1]||i&&T)break;g=r.crossings[y]}1e4===d&&a.log("Infinite loop in contour?");var A,k,M,S,E,I,L,C,O,D,P,B,R,z,F,N=s(m[0],m[m.length-1],l,u),U=0,j=.2*r.smoothing,V=[],H=0;for(d=1;d<m.length;d++)B=m[d],R=m[d-1],U+=L=Math.sqrt((z=B[2]-R[2])*z+(F=B[3]-R[3])*F),V.push(L);var q=U/V.length*j;function G(r){return m[r%m.length]}for(d=m.length-2;d>=H;d--)if((A=V[d])<q){for(M=0,k=d-1;k>=H&&A+V[k]<q;k--)A+=V[k];if(N&&d===m.length-2)for(M=0;M<k&&A+V[M]<q;M++)A+=V[M];E=d-k+M+1,I=Math.floor((d+k+M+2)/2),S=N||d!==m.length-2?N||-1!==k?E%2?G(I):[(G(I)[0]+G(I+1)[0])/2,(G(I)[1]+G(I+1)[1])/2]:m[0]:m[m.length-1],m.splice(k+1,d-k+1,S),d=k+1,M&&(H=M),N&&(d===m.length-2?m[M]=m[m.length-1]:0===d&&(m[m.length-1]=m[0]))}for(m.splice(0,H),d=0;d<m.length;d++)m[d].length=2;if(!(m.length<2)){if(N)m.pop(),r.paths.push(m);else{i||a.log("Unclosed interior contour?",r.level,_.join(","),m.join("L"));var W=!1;for(C=0;C<r.edgepaths.length;C++)if(D=r.edgepaths[C],!W&&s(D[0],m[m.length-1],l,u)){m.pop(),W=!0;var Y=!1;for(O=0;O<r.edgepaths.length;O++)if(s((P=r.edgepaths[O])[P.length-1],m[0],l,u)){Y=!0,m.shift(),r.edgepaths.splice(C,1),O===C?r.paths.push(m.concat(P)):(O>C&&O--,r.edgepaths[O]=P.concat(m,D));break}Y||(r.edgepaths[C]=m.concat(D))}for(C=0;C<r.edgepaths.length&&!W;C++)s((D=r.edgepaths[C])[D.length-1],m[0],l,u)&&(m.shift(),r.edgepaths[C]=D.concat(m),W=!0);W||r.edgepaths.push(m)}}}function c(r,n,i){var a=n[0]+Math.max(i[0],0),o=n[1]+Math.max(i[1],0),s=r.z[o][a],l=r.xaxis,c=r.yaxis;if(i[1]){var u=(r.level-s)/(r.z[o][a+1]-s),f=(1!==u?(1-u)*l.c2l(r.x[a]):0)+(0!==u?u*l.c2l(r.x[a+1]):0);return[l.c2p(l.l2c(f),!0),c.c2p(r.y[o],!0),a+u,o]}var h=(r.level-s)/(r.z[o+1][a]-s),p=(1!==h?(1-h)*c.c2l(r.y[o]):0)+(0!==h?h*c.c2l(r.y[o+1]):0);return[l.c2p(r.x[a],!0),c.c2p(c.l2c(p),!0),a,o+h]}r.exports=function(r,n,i){var o,s,c,u;for(n=n||.01,i=i||.01,s=0;s<r.length;s++){for(c=r[s],u=0;u<c.starts.length;u++)l(c,c.starts[u],"edge",n,i);for(o=0;Object.keys(c.crossings).length&&o<1e4;)o++,l(c,Object.keys(c.crossings)[0].split(",").map(Number),void 0,n,i);1e4===o&&a.log("Infinite loop in contour?")}}},38200:function(r,n,i){var a=i(76308),o=i(55512);r.exports=function(r,n,i,s,l){l||(l={}),l.isContour=!0;var c=o(r,n,i,s,l);return c&&c.forEach(function(r){var n=r.trace;"constraint"===n.contours.type&&(n.fillcolor&&a.opacity(n.fillcolor)?r.color=a.addOpacity(n.fillcolor,1):n.contours.showlines&&a.opacity(n.line.color)&&(r.color=a.addOpacity(n.line.color,1)))}),c}},66240:function(r,n,i){r.exports={attributes:i(67104),supplyDefaults:i(57004),calc:i(20688),plot:i(23676).plot,style:i(52440),colorbar:i(55296),hoverPoints:i(38200),moduleType:"trace",name:"contour",basePlotModule:i(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(r,n,i){var a=i(3400);r.exports=function(r,n,i,o){if(o||(o={}),r("contours.showlabels")){var s=n.font;a.coerceFont(r,"contours.labelfont",s,{overrideDflt:{color:i}}),r("contours.labelformat")}!1!==o.hasHover&&r("zhoverformat")}},41076:function(r,n,i){var a=i(33428),o=i(8932),s=i(46960);r.exports=function(r){var n=r.contours,i=n.start,l=s(n),c=n.size||1,u=Math.floor((l-i)/c)+1,f="lines"===n.coloring?0:1,h=o.extractOpts(r);isFinite(c)||(c=1,u=1);var p,d,y=h.reversescale?o.flipScale(h.colorscale):h.colorscale,g=y.length,v=Array(g),m=Array(g),x=h.min,b=h.max;if("heatmap"===n.coloring){for(d=0;d<g;d++)p=y[d],v[d]=p[0]*(b-x)+x,m[d]=p[1];var _=a.extent([x,b,n.start,n.start+c*(u-1)]),w=_[x<b?0:1],T=_[x<b?1:0];w!==x&&(v.splice(0,0,w),m.splice(0,0,m[0])),T!==b&&(v.push(T),m.push(m[m.length-1]))}else{var A=r._input&&"number"==typeof r._input.zmin&&"number"==typeof r._input.zmax;for(A&&(i<=x||l>=b)&&(i<=x&&(i=x),l>=b&&(l=b),u=Math.floor((l-i)/c)+1,f=0),d=0;d<g;d++)p=y[d],v[d]=(p[0]*(u+f-1)-f/2)*c+i,m[d]=p[1];(A||r.autocontour)&&(v[0]>x&&(v.unshift(x),m.unshift(m[0])),v[v.length-1]<b&&(v.push(b),m.push(m[m.length-1])))}return o.makeColorScaleFunc({domain:v,range:m},{noNumericCheck:!0})}},72424:function(r,n,i){var a=i(93252);r.exports=function(r){var n,i,o,s,l,c,u,f,h,p=r[0].z,d=p.length,y=p[0].length,g=2===d||2===y;for(i=0;i<d-1;i++)for(s=[],0===i&&(s=s.concat(a.BOTTOMSTART)),i===d-2&&(s=s.concat(a.TOPSTART)),n=0;n<y-1;n++)for(o=s.slice(),0===n&&(o=o.concat(a.LEFTSTART)),n===y-2&&(o=o.concat(a.RIGHTSTART)),l=n+","+i,c=[[p[i][n],p[i][n+1]],[p[i+1][n],p[i+1][n+1]]],h=0;h<r.length;h++)(u=function(r,n){var i=(n[0][0]>r?0:1)+(n[0][1]>r?0:2)+(n[1][1]>r?0:4)+(n[1][0]>r?0:8);return 5===i||10===i?r>(n[0][0]+n[0][1]+n[1][0]+n[1][1])/4?5===i?713:1114:5===i?104:208:15===i?0:i}((f=r[h]).level,c))&&(f.crossings[l]=u,-1!==o.indexOf(u)&&(f.starts.push([n,i]),g&&-1!==o.indexOf(u,o.indexOf(u)+1)&&f.starts.push([n,i])))}},23676:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(8932),c=i(72736),u=i(54460),f=i(78344),h=i(41420),p=i(72424),d=i(88748),y=i(61512),g=i(82172),v=i(56008),m=i(93252),x=m.LABELOPTIMIZER;function b(r,n){var i,a,l,c,u,f,h="",p=0,d=r.edgepaths.map(function(r,n){return n}),y=!0;function g(r){return .01>Math.abs(r[0]-n[2][0])}for(;d.length;){for(f=s.smoothopen(r.edgepaths[p],r.smoothing),h+=y?f:f.replace(/^M/,"L"),d.splice(d.indexOf(p),1),i=r.edgepaths[p][r.edgepaths[p].length-1],c=-1,l=0;l<4;l++){if(!i){o.log("Missing end?",p,r);break}for(.01>Math.abs(i[1]-n[0][1])&&!g(i)?a=n[1]:.01>Math.abs(i[0]-n[0][0])?a=n[0]:.01>Math.abs(i[1]-n[2][1])?a=n[3]:g(i)&&(a=n[2]),u=0;u<r.edgepaths.length;u++){var v=r.edgepaths[u][0];.01>Math.abs(i[0]-a[0])?.01>Math.abs(i[0]-v[0])&&(v[1]-i[1])*(a[1]-v[1])>=0&&(a=v,c=u):.01>Math.abs(i[1]-a[1])?.01>Math.abs(i[1]-v[1])&&(v[0]-i[0])*(a[0]-v[0])>=0&&(a=v,c=u):o.log("endpt to newendpt is not vert. or horz.",i,a,v)}if(i=a,c>=0)break;h+="L"+a}if(c===r.edgepaths.length){o.log("unclosed perimeter path");break}p=c,(y=-1===d.indexOf(p))&&(p=d[0],h+="Z")}for(p=0;p<r.paths.length;p++)h+=s.smoothclosed(r.paths[p],r.smoothing);return h}n.plot=function(r,i,l,c){var u=i.xaxis,f=i.yaxis;o.makeTraceGroups(c,l,"contour").each(function(l){var c,x,_,w,T,A=a.select(this),k=l[0],M=k.trace,S=k.x,E=k.y,I=M.contours,L=y(I,i,k),C=o.ensureSingle(A,"g","heatmapcoloring"),O=[];"heatmap"===I.coloring&&(O=[l]),h(r,i,O,C),p(L),d(L);var D=u.c2p(S[0],!0),P=u.c2p(S[S.length-1],!0),B=f.c2p(E[0],!0),R=f.c2p(E[E.length-1],!0),z=[[D,R],[P,R],[P,B],[D,B]],F=L;"constraint"===I.type&&(F=g(L,I._operation)),(c=o.ensureSingle(A,"g","contourbg").selectAll("path").data("fill"===I.coloring?[0]:[])).enter().append("path"),c.exit().remove(),c.attr("d","M"+z.join("L")+"Z").style("stroke","none"),x=F,_="fill"===I.coloring||"constraint"===I.type&&"="!==I._operation,w="M"+z.join("L")+"Z",_&&v(x,I),(T=o.ensureSingle(A,"g","contourfill").selectAll("path").data(_?x:[])).enter().append("path"),T.exit().remove(),T.each(function(r){var n=(r.prefixBoundary?w:"")+b(r,z);n?a.select(this).attr("d",n).style("stroke","none"):a.select(this).remove()}),function(r,i,l,c,u){var f=l._context.staticPlot,h=o.ensureSingle(r,"g","contourlines"),p=!1!==u.showlines,d=u.showlabels,y=p&&d,g=n.createLines(h,p||d,i,f),v=n.createLineClip(h,y,l,c.trace.uid),x=r.selectAll("g.contourlabels").data(d?[0]:[]);if(x.exit().remove(),x.enter().append("g").classed("contourlabels",!0),d){var b=[],_=[];o.clearLocationCache();var w=n.labelFormatter(l,c),T=s.tester.append("text").attr("data-notex",1).call(s.font,u.labelfont),A=i[0].xaxis,k=i[0].yaxis,M=A._length,S=k._length,E=A.range,I=k.range,L=o.aggNums(Math.min,null,c.x),C=o.aggNums(Math.max,null,c.x),O=o.aggNums(Math.min,null,c.y),D=o.aggNums(Math.max,null,c.y),P=Math.max(A.c2p(L,!0),0),B=Math.min(A.c2p(C,!0),M),R=Math.max(k.c2p(D,!0),0),z=Math.min(k.c2p(O,!0),S),F={};E[0]<E[1]?(F.left=P,F.right=B):(F.left=B,F.right=P),I[0]<I[1]?(F.top=R,F.bottom=z):(F.top=z,F.bottom=R),F.middle=(F.top+F.bottom)/2,F.center=(F.left+F.right)/2,b.push([[F.left,F.top],[F.right,F.top],[F.right,F.bottom],[F.left,F.bottom]]);var N=Math.sqrt(M*M+S*S),U=m.LABELDISTANCE*N/Math.max(1,i.length/m.LABELINCREASE);g.each(function(r){var i=n.calcTextOpts(r.level,w,T,l);a.select(this).selectAll("path").each(function(){var r=o.getVisibleSegment(this,F,i.height/2);if(r&&!(r.len<(i.width+i.height)*m.LABELMIN))for(var a=Math.min(Math.ceil(r.len/U),m.LABELMAX),s=0;s<a;s++){var l=n.findBestTextLocation(this,r,i,_,F);if(!l)break;n.addLabelData(l,i,_,b)}})}),T.remove(),n.drawLabels(x,_,l,v,y?b:null)}d&&!p&&g.remove()}(A,L,r,k,I),function(r,n,i,a,l){var c=a.trace,u=i._fullLayout._clips,f="clip"+c.uid,h=u.selectAll("#"+f).data(c.connectgaps?[]:[0]);if(h.enter().append("clipPath").classed("contourclip",!0).attr("id",f),h.exit().remove(),!1===c.connectgaps){var y={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:n.xaxis,yaxis:n.yaxis,x:a.x,y:a.y,z:function(r){var n,i,a=r.trace._emptypoints,o=[],s=r.z.length,l=r.z[0].length,c=[];for(n=0;n<l;n++)c.push(1);for(n=0;n<s;n++)o.push(c.slice());for(n=0;n<a.length;n++)o[(i=a[n])[0]][i[1]]=0;return r.zmask=o,o}(a),smoothing:0};p([y]),d([y]),v([y],{type:"levels"}),o.ensureSingle(h,"path","").attr("d",(y.prefixBoundary?"M"+l.join("L")+"Z":"")+b(y,l))}else f=null;s.setClipUrl(r,f,i)}(A,i,r,k,z)})},n.createLines=function(r,n,i,a){var o=i[0].smoothing,l=r.selectAll("g.contourlevel").data(n?i:[]);if(l.exit().remove(),l.enter().append("g").classed("contourlevel",!0),n){var c=l.selectAll("path.openline").data(function(r){return r.pedgepaths||r.edgepaths});c.exit().remove(),c.enter().append("path").classed("openline",!0),c.attr("d",function(r){return s.smoothopen(r,o)}).style("stroke-miterlimit",1).style("vector-effect",a?"none":"non-scaling-stroke");var u=l.selectAll("path.closedline").data(function(r){return r.ppaths||r.paths});u.exit().remove(),u.enter().append("path").classed("closedline",!0),u.attr("d",function(r){return s.smoothclosed(r,o)}).style("stroke-miterlimit",1).style("vector-effect",a?"none":"non-scaling-stroke")}return l},n.createLineClip=function(r,n,i,a){var o=n?"clipline"+a:null,l=i._fullLayout._clips.selectAll("#"+o).data(n?[0]:[]);return l.exit().remove(),l.enter().append("clipPath").classed("contourlineclip",!0).attr("id",o),s.setClipUrl(r,o,i),l},n.labelFormatter=function(r,n){var i=r._fullLayout,a=n.trace,s=a.contours,c={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(s.labelformat)c.tickformat=s.labelformat,f(c,i);else{var h=l.extractOpts(a);if(h&&h.colorbar&&h.colorbar._axis)c=h.colorbar._axis;else{if("constraint"===s.type){var p=s.value;o.isArrayOrTypedArray(p)?c.range=[p[0],p[p.length-1]]:c.range=[p,p]}else c.range=[s.start,s.end],c.nticks=(s.end-s.start)/s.size;c.range[0]===c.range[1]&&(c.range[1]+=c.range[0]||1),c.nticks||(c.nticks=1e3),f(c,i),u.prepTicks(c),c._tmin=null,c._tmax=null}}return function(r){return u.tickText(c,r).text}},n.calcTextOpts=function(r,n,i,a){var o=n(r);i.text(o).call(c.convertToTspans,a);var l=i.node(),u=s.bBox(l,!0);return{text:o,width:u.width,height:u.height,fontSize:+l.style["font-size"].replace("px",""),level:r,dy:(u.top+u.bottom)/2}},n.findBestTextLocation=function(r,n,i,a,s){var l,c,u,f,h,p=i.width;n.isClosed?(c=n.len/x.INITIALSEARCHPOINTS,l=n.min+c/2,u=n.max):(c=(n.len-p)/(x.INITIALSEARCHPOINTS+1),l=n.min+c+p/2,u=n.max-(c+p)/2);for(var d=1/0,y=0;y<x.ITERATIONS;y++){for(var g=l;g<u;g+=c){var v=o.getTextLocation(r,n.total,g,p),m=function(r,n,i,a){var s=n.width/2,l=n.height/2,c=r.x,u=r.y,f=r.theta,h=Math.cos(f)*s,p=Math.sin(f)*s,d=(c>a.center?a.right-c:c-a.left)/(h+Math.abs(Math.sin(f)*l)),y=(u>a.middle?a.bottom-u:u-a.top)/(Math.abs(p)+Math.cos(f)*l);if(d<1||y<1)return 1/0;var g=x.EDGECOST*(1/(d-1)+1/(y-1));g+=x.ANGLECOST*f*f;for(var v=c-h,m=u-p,b=c+h,_=u+p,w=0;w<i.length;w++){var T=i[w],A=Math.cos(T.theta)*T.width/2,k=Math.sin(T.theta)*T.width/2,M=2*o.segmentDistance(v,m,b,_,T.x-A,T.y-k,T.x+A,T.y+k)/(n.height+T.height),S=T.level===n.level,E=S?x.SAMELEVELDISTANCE:1;if(M<=E)return 1/0;g+=x.NEIGHBORCOST*(S?x.SAMELEVELFACTOR:1)/(M-E)}return g}(v,i,a,s);m<d&&(d=m,h=v,f=g)}if(d>2*x.MAXCOST)break;y&&(c/=2),u=(l=f-c/2)+1.5*c}if(d<=x.MAXCOST)return h},n.addLabelData=function(r,n,i,a){var o=n.fontSize,s=n.width+o/3,l=Math.max(0,n.height-o/3),c=r.x,u=r.y,f=r.theta,h=Math.sin(f),p=Math.cos(f),d=function(r,n){return[c+r*p-n*h,u+r*h+n*p]},y=[d(-s/2,-l/2),d(-s/2,l/2),d(s/2,l/2),d(s/2,-l/2)];i.push({text:n.text,x:c,y:u,dy:n.dy,theta:f,level:n.level,width:s,height:l}),a.push(y)},n.drawLabels=function(r,n,i,s,l){var u=r.selectAll("text").data(n,function(r){return r.text+","+r.x+","+r.y+","+r.theta});if(u.exit().remove(),u.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(r){var n=r.x+Math.sin(r.theta)*r.dy,o=r.y-Math.cos(r.theta)*r.dy;a.select(this).text(r.text).attr({x:n,y:o,transform:"rotate("+180*r.theta/Math.PI+" "+n+" "+o+")"}).call(c.convertToTspans,i)}),l){for(var f="",h=0;h<l.length;h++)f+="M"+l[h].join("L")+"Z";o.ensureSingle(s,"path","").attr("d",f)}}},54444:function(r,n,i){var a=i(54460),o=i(3400);function s(r,n,i){var o={type:"linear",range:[r,n]};return a.autoTicks(o,(n-r)/(i||15)),o}r.exports=function(r,n){var i=r.contours;if(r.autocontour){var l=r.zmin,c=r.zmax;(r.zauto||void 0===l)&&(l=o.aggNums(Math.min,null,n)),(r.zauto||void 0===c)&&(c=o.aggNums(Math.max,null,n));var u=s(l,c,r.ncontours);i.size=u.dtick,i.start=a.tickFirst(u),u.range.reverse(),i.end=a.tickFirst(u),i.start===l&&(i.start+=i.size),i.end===c&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),r._input.contours||(r._input.contours={}),o.extendFlat(r._input.contours,{start:i.start,end:i.end,size:i.size}),r._input.autocontour=!0}else if("constraint"!==i.type){var f,h=i.start,p=i.end,d=r._input.contours;h>p&&(i.start=d.start=p,p=i.end=d.end=h,h=i.start),i.size>0||(f=h===p?1:s(h,p,r.ncontours).dtick,d.size=i.size=f)}}},52440:function(r,n,i){var a=i(33428),o=i(43616),s=i(41648),l=i(41076);r.exports=function(r){var n=a.select(r).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var n,i=a.select(this),s=r[0].trace,c=s.contours,u=s.line,f=c.size||1,h=c.start,p="constraint"===c.type,d=!p&&"lines"===c.coloring,y=!p&&"fill"===c.coloring,g=d||y?l(s):null;i.selectAll("g.contourlevel").each(function(r){a.select(this).selectAll("path").call(o.lineGroupStyle,u.width,d?g(r.level):u.color,u.dash)});var v=c.labelfont;(i.selectAll("g.contourlabels text").each(function(r){o.font(a.select(this),{weight:v.weight,style:v.style,variant:v.variant,textcase:v.textcase,lineposition:v.lineposition,shadow:v.shadow,family:v.family,size:v.size,color:v.color||(d?g(r.level):u.color)})}),p)?i.selectAll("g.contourfill path").style("fill",s.fillcolor):y&&(i.selectAll("g.contourfill path").style("fill",function(r){return void 0===n&&(n=r.level),g(r.level+.5*f)}),void 0===n&&(n=h),i.selectAll("g.contourbg path").style("fill",g(n-.5*f)))}),s(r)}},97680:function(r,n,i){var a=i(27260),o=i(17428);r.exports=function(r,n,i,s,l){var c,u=i("contours.coloring"),f="";"fill"===u&&(c=i("contours.showlines")),!1!==c&&("lines"!==u&&(f=i("line.color","#000")),i("line.width",.5),i("line.dash")),"none"!==u&&(!0!==r.showlegend&&(n.showlegend=!1),n._dfltShowLegend=!1,a(r,n,s,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),o(i,s,f,l)}},37960:function(r,n,i){var a=i(83328),o=i(67104),s=i(49084),l=i(92880).extendFlat,c=o.contours;r.exports=l({carpet:{valType:"string",editType:"calc"},z:a.z,a:a.x,a0:a.x0,da:a.dx,b:a.y,b0:a.y0,db:a.dy,text:a.text,hovertext:a.hovertext,transpose:a.transpose,atype:a.xtype,btype:a.ytype,fillcolor:o.fillcolor,autocontour:o.autocontour,ncontours:o.ncontours,contours:{type:c.type,start:c.start,end:c.end,size:c.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:c.showlines,showlabels:c.showlabels,labelfont:c.labelfont,labelformat:c.labelformat,operation:c.operation,value:c.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o.line.color,width:o.line.width,dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},zorder:o.zorder,transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},30572:function(r,n,i){var a=i(47128),o=i(3400),s=i(2872),l=i(26136),c=i(70448),u=i(11240),f=i(35744),h=i(3252),p=i(50948),d=i(54444);r.exports=function(r,n){var i=n._carpetTrace=p(r,n);if(i&&i.visible&&"legendonly"!==i.visible){if(!n.a||!n.b){var y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L=r.data[i.index],C=r.data[n.index];C.a||(C.a=L.a),C.b||(C.b=L.b),h(C,n,n._defaultColor,r._fullLayout)}var O=(T=(w=n._carpetTrace).aaxis,A=w.baxis,T._minDtick=0,A._minDtick=0,o.isArray1D(n.z)&&s(n,T,A,"a","b",["z"]),y=n._a=n._a||n.a,m=n._b=n._b||n.b,y=y?T.makeCalcdata(n,"_a"):[],m=m?A.makeCalcdata(n,"_b"):[],g=n.a0||0,v=n.da||1,x=n.b0||0,b=n.db||1,_=n._z=l(n._z||n.z,n.transpose),n._emptypoints=u(_),c(_,n._emptypoints),k=o.maxRowLength(_),M="scaled"===n.xtype?"":y,S=f(n,M,g,v,k,T),E="scaled"===n.ytype?"":m,I={a:S,b:f(n,E,x,b,_.length,A),z:_},"levels"===n.contours.type&&"none"!==n.contours.coloring&&a(r,n,{vals:_,containerStr:"",cLetter:"z"}),[I]);return d(n,n._z),O}}},3252:function(r,n,i){var a=i(3400),o=i(51264),s=i(37960),l=i(95536),c=i(84952),u=i(97680);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,s,i,o)}if(h("carpet"),r.a&&r.b){if(!o(r,n,h,f,"a","b"))return void(n.visible=!1);h("text"),"constraint"===h("contours.type")?l(r,n,h,f,i,{hasHover:!1}):(c(r,n,h,function(i){return a.coerce2(r,n,s,i)}),u(r,n,h,f,{hasHover:!1}))}else n._defaultColor=i,n._length=null;h("zorder")}},40448:function(r,n,i){r.exports={attributes:i(37960),supplyDefaults:i(3252),colorbar:i(55296),calc:i(30572),plot:i(94440),style:i(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:i(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(r,n,i){var a=i(33428),o=i(87072),s=i(53416),l=i(43616),c=i(3400),u=i(72424),f=i(88748),h=i(23676),p=i(93252),d=i(82172),y=i(61512),g=i(56008),v=i(50948),m=i(77712);function x(r,n,i){var a=r.getPointAtLength(n),o=r.getPointAtLength(i),s=o.x-a.x,l=o.y-a.y,c=Math.sqrt(s*s+l*l);return[s/c,l/c]}function b(r){var n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return[r[0]/n,r[1]/n]}function _(r,n){var i=Math.abs(r[0]*n[0]+r[1]*n[1]);return Math.sqrt(1-i*i)/i}r.exports=function(r,n,i,w){var T=n.xaxis,A=n.yaxis;c.makeTraceGroups(w,i,"contour").each(function(i){var w=a.select(this),k=i[0],M=k.trace,S=M._carpetTrace=v(r,M),E=r.calcdata[S.index][0];if(S.visible&&"legendonly"!==S.visible){var I,L,C,O=k.a,D=k.b,P=M.contours,B=y(P,n,k),R="constraint"===P.type,z=P._operation,F=R?"="===z?"lines":"fill":P.coloring,N=[[O[0],D[D.length-1]],[O[O.length-1],D[D.length-1]],[O[O.length-1],D[0]],[O[0],D[0]]];u(B),f(B,1e-8*(O[O.length-1]-O[0]),1e-8*(D[D.length-1]-D[0]));var U,j,V,H,q=B;"constraint"===P.type&&(q=d(B,z)),function(r,n){var i,a,o,s,l,c,u,f,h;for(i=0;i<r.length;i++){for(l=(s=r[i]).pedgepaths=[],c=s.ppaths=[],a=0;a<s.edgepaths.length;a++){for(h=s.edgepaths[a],u=[],o=0;o<h.length;o++)u[o]=n(h[o]);l.push(u)}for(a=0;a<s.paths.length;a++){for(h=s.paths[a],f=[],o=0;o<h.length;o++)f[o]=n(h[o]);c.push(f)}}}(B,Y);var G=[];for(H=E.clipsegments.length-1;H>=0;H--)j=o([],(U=E.clipsegments[H]).x,T.c2p),V=o([],U.y,A.c2p),j.reverse(),V.reverse(),G.push(s(j,V,U.bicubic));var W="M"+G.join("L")+"Z";(function(r,n,i,a,l,u){var f,h,p=c.ensureSingle(r,"g","contourbg").selectAll("path").data("fill"!==u||l?[]:[0]);p.enter().append("path"),p.exit().remove();var d=[];for(h=0;h<n.length;h++)d.push(s(o([],(f=n[h]).x,i.c2p),o([],f.y,a.c2p),f.bicubic));p.attr("d","M"+d.join("L")+"Z").style("stroke","none")})(w,E.clipsegments,T,A,R,F),I=q,(L="fill"===F)&&g(I,M.contours),(C=c.ensureSingle(w,"g","contourfill").selectAll("path").data(L?I:[])).enter().append("path"),C.exit().remove(),C.each(function(r){var n=(r.prefixBoundary?W:"")+function(r,n,i,a,o,s,u,f){var h,p,d,y,g,v,x,b="",_=n.edgepaths.map(function(r,n){return n}),w=!0,T=1e-4*Math.abs(i[0][0]-i[2][0]),A=1e-4*Math.abs(i[0][1]-i[2][1]);function k(r){return Math.abs(r[1]-i[0][1])<A}function M(r){return Math.abs(r[1]-i[2][1])<A}function S(r){return Math.abs(r[0]-i[0][0])<T}function E(r){return Math.abs(r[0]-i[2][0])<T}function I(r,n){var i,a,l,c,h="";for(k(r)&&!E(r)||M(r)&&!S(r)?(c=o.aaxis,l=m(o,s,[r[0],n[0]],.5*(r[1]+n[1]))):(c=o.baxis,l=m(o,s,.5*(r[0]+n[0]),[r[1],n[1]])),i=1;i<l.length;i++)for(h+=c.smoothing?"C":"L",a=0;a<l[i].length;a++){var p=l[i][a];h+=[u.c2p(p[0]),f.c2p(p[1])]+" "}return h}for(h=0,p=null;_.length;){var L=n.edgepaths[h][0];for(p&&(b+=I(p,L)),x=l.smoothopen(n.edgepaths[h].map(a),n.smoothing),b+=w?x:x.replace(/^M/,"L"),_.splice(_.indexOf(h),1),p=n.edgepaths[h][n.edgepaths[h].length-1],g=-1,y=0;y<4;y++){if(!p){c.log("Missing end?",h,n);break}for(k(p)&&!E(p)?d=i[1]:S(p)?d=i[0]:M(p)?d=i[3]:E(p)&&(d=i[2]),v=0;v<n.edgepaths.length;v++){var C=n.edgepaths[v][0];Math.abs(p[0]-d[0])<T?Math.abs(p[0]-C[0])<T&&(C[1]-p[1])*(d[1]-C[1])>=0&&(d=C,g=v):Math.abs(p[1]-d[1])<A?Math.abs(p[1]-C[1])<A&&(C[0]-p[0])*(d[0]-C[0])>=0&&(d=C,g=v):c.log("endpt to newendpt is not vert. or horz.",p,d,C)}if(g>=0)break;b+=I(p,d),p=d}if(g===n.edgepaths.length){c.log("unclosed perimeter path");break}h=g,(w=-1===_.indexOf(h))&&(h=_[0],b+=I(p,d)+"Z",p=null)}for(h=0;h<n.paths.length;h++)b+=l.smoothclosed(n.paths[h].map(a),n.smoothing);return b}(0,r,N,Y,S,E,T,A);n?a.select(this).attr("d",n).style("stroke","none"):a.select(this).remove()}),function(r,n,i,o,s,u,f){var d=i._context.staticPlot,y=c.ensureSingle(r,"g","contourlines"),g=!1!==s.showlines,v=s.showlabels,m=g&&v,w=h.createLines(y,g||v,n,d),T=h.createLineClip(y,m,i,o.trace.uid),A=r.selectAll("g.contourlabels").data(v?[0]:[]);if(A.exit().remove(),A.enter().append("g").classed("contourlabels",!0),v){var k=u.xaxis,M=u.yaxis,S=k._length,E=M._length,I=[[[0,0],[S,0],[S,E],[0,E]]],L=[];c.clearLocationCache();var C=h.labelFormatter(i,o),O=l.tester.append("text").attr("data-notex",1).call(l.font,s.labelfont),D={left:0,right:S,center:S/2,top:0,bottom:E,middle:E/2},P=Math.sqrt(S*S+E*E),B=p.LABELDISTANCE*P/Math.max(1,n.length/p.LABELINCREASE);w.each(function(r){var n=h.calcTextOpts(r.level,C,O,i);a.select(this).selectAll("path").each(function(i){var a=c.getVisibleSegment(this,D,n.height/2);if(a&&(function(r,n,i,a,o,s){for(var l,c=0;c<i.pedgepaths.length;c++)n===i.pedgepaths[c]&&(l=i.edgepaths[c]);if(l){var u=o.a[0],f=o.a[o.a.length-1],h=o.b[0],p=o.b[o.b.length-1],d=x(r,0,1),y=x(r,a.total,a.total-1),g=m(l[0],d),v=a.total-m(l[l.length-1],y);a.min<g&&(a.min=g),a.max>v&&(a.max=v),a.len=a.max-a.min}function m(r,n){var i=0;return(.1>Math.abs(r[0]-u)||.1>Math.abs(r[0]-f))&&(i=Math.max(i,s*_(n,b(o.dxydb_rough(r[0],r[1],.1)))/2)),(.1>Math.abs(r[1]-h)||.1>Math.abs(r[1]-p))&&(i=Math.max(i,s*_(n,b(o.dxyda_rough(r[0],r[1],.1)))/2)),i}}(this,i,r,a,f,n.height),!(a.len<(n.width+n.height)*p.LABELMIN)))for(var o=Math.min(Math.ceil(a.len/B),p.LABELMAX),s=0;s<o;s++){var l=h.findBestTextLocation(this,a,n,L,D);if(!l)break;h.addLabelData(l,n,L,I)}})}),O.remove(),h.drawLabels(A,L,i,T,m?I:null)}v&&!g&&w.remove()}(w,B,r,k,P,n,S),l.setClipUrl(w,S._clipPathId,r)}function Y(r){var n=S.ab2xy(r[0],r[1],!0);return[T.c2p(n[0]),A.c2p(n[1])]}})}},33928:function(r,n,i){var a=i(49084),o=i(21776).Ks,s=i(45464),l=i(31512),c=i(92880).extendFlat;r.exports=c({lon:l.lon,lat:l.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:l.text,hovertext:l.hovertext,hoverinfo:c({},s.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:o(),showlegend:c({},s.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(r,n,i){var a=i(38248),o=i(3400).isArrayOrTypedArray,s=i(39032).BADNUM,l=i(47128),c=i(3400)._;r.exports=function(r,n){for(var i=n._length,u=Array(i),f=n.z,h=o(f)&&f.length,p=0;p<i;p++){var d=u[p]={},y=n.lon[p],g=n.lat[p];if(d.lonlat=a(y)&&a(g)?[+y,+g]:[s,s],h){var v=f[p];d.z=a(v)?v:s}}return l(r,n,{vals:h?f:[0,1],containerStr:"",cLetter:"z"}),i&&(u[0].t={labels:{lat:c(r,"lat:")+" ",lon:c(r,"lon:")+" "}}),u}},4629:function(r,n,i){var a=i(38248),o=i(3400),s=i(76308),l=i(8932),c=i(39032).BADNUM,u=i(44808).makeBlank;r.exports=function(r){var n=r[0].trace,i=!0===n.visible&&0!==n._length,f=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:u()};if(!i)return f;var h,p=[],d=n.z,y=n.radius,g=o.isArrayOrTypedArray(d)&&d.length,v=o.isArrayOrTypedArray(y);for(h=0;h<r.length;h++){var m=r[h],x=m.lonlat;if(x[0]!==c){var b={};if(g){var _=m.z;b.z=_!==c?_:0}v&&(b.r=a(y[h])&&y[h]>0?+y[h]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:b})}}var w=l.extractOpts(n),T=w.reversescale?l.flipScale(w.colorscale):w.colorscale,A=T[0][1],k=["interpolate",["linear"],["heatmap-density"],0,1>s.opacity(A)?A:s.addOpacity(A,0)];for(h=1;h<T.length;h++)k.push(T[h][0],T[h][1]);var M=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];return o.extendFlat(f.heatmap.paint,{"heatmap-weight":g?M:1/(w.max-w.min),"heatmap-color":k,"heatmap-radius":v?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),f.geojson={type:"FeatureCollection",features:p},f.heatmap.layout.visibility="visible",f}},97664:function(r,n,i){var a=i(3400),o=i(27260),s=i(33928);r.exports=function(r,n,i,l){function c(i,o){return a.coerce(r,n,s,i,o)}var u=c("lon")||[],f=c("lat")||[],h=Math.min(u.length,f.length);h?(n._length=h,c("z"),c("radius"),c("below"),c("text"),c("hovertext"),c("hovertemplate"),o(r,n,l,c,{prefix:"",cLetter:"z"})):n.visible=!1}},96176:function(r){r.exports=function(r,n){return r.lon=n.lon,r.lat=n.lat,r.z=n.z,r}},25336:function(r,n,i){var a=i(54460),o=i(63312).hoverPoints,s=i(63312).getExtraText;r.exports=function(r,n,i){var l=o(r,n,i);if(l){var c=l[0],u=c.cd,f=u[0].trace,h=u[c.index];if(delete c.color,"z"in h){var p=c.subplot.mockAxis;c.z=h.z,c.zLabel=a.tickText(p,p.c2l(h.z),"hover").text}return c.extraText=s(f,h,u[0].t.labels),[c]}}},15088:function(r,n,i){r.exports={attributes:i(33928),supplyDefaults:i(97664),colorbar:i(96288),formatLabels:i(11960),calc:i(90876),plot:i(35256),hoverPoints:i(25336),eventData:i(96176),getBelow:function(r,n){for(var i=n.getMapLayers(),a=0;a<i.length;a++){var o=i[a],s=o.id;if("symbol"===o.type&&"string"==typeof s&&-1===s.indexOf("plotly-"))return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:i(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(r,n,i){var a=i(4629),o=i(47552).traceLayerPrefix;function s(r,n){this.type="densitymapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",o+n+"-heatmap"]],this.below=null}var l=s.prototype;l.update=function(r){var n=this.subplot,i=this.layerList,o=a(r),s=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(o.geojson),s!==this.below&&(this._removeLayers(),this._addLayers(o,s),this.below=s);for(var l=0;l<i.length;l++){var c=i[l],u=c[0],f=c[1],h=o[u];n.setOptions(f,"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&n.setOptions(f,"setPaintProperty",h.paint)}},l._addLayers=function(r,n){for(var i=this.subplot,a=this.layerList,o=this.sourceId,s=0;s<a.length;s++){var l=a[s],c=l[0],u=r[c];i.addLayer({type:c,id:l[1],source:o,layout:u.layout,paint:u.paint},n)}},l._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,i=n.length-1;i>=0;i--)r.removeLayer(n[i][1])},l.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},r.exports=function(r,n){var i=n[0].trace,o=new s(r,i.uid),l=o.sourceId,c=a(n),u=o.below=r.belowLookup["trace-"+i.uid];return r.map.addSource(l,{type:"geojson",data:c.geojson}),o._addLayers(c,u),o}},74248:function(r,n,i){var a=i(3400);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.hovertext,r,"htx");var o=n.marker;if(o){a.mergeArray(o.opacity,r,"mo"),a.mergeArray(o.color,r,"mc");var s=o.line;s&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"))}}},20088:function(r,n,i){var a,o=i(20832),s=i(52904).line,l=i(45464),c=i(29736).axisHoverFormat,u=i(21776).Ks,f=i(21776).Gw,h=i(74732),p=i(92880).extendFlat,d=i(76308);r.exports={x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),hovertext:o.hovertext,hovertemplate:u({},{keys:h.eventDataKeys}),hoverinfo:p({},l.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),text:o.text,textposition:o.textposition,insidetextanchor:p({},o.insidetextanchor,{dflt:"middle"}),textangle:p({},o.textangle,{dflt:0}),textfont:o.textfont,insidetextfont:o.insidetextfont,outsidetextfont:o.outsidetextfont,constraintext:o.constraintext,cliponaxis:o.cliponaxis,orientation:p({},o.orientation,{}),offset:p({},o.offset,{arrayOk:!1}),width:p({},o.width,{arrayOk:!1}),marker:(a=p({},o.marker),delete a.pattern,delete a.cornerradius,a),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:p({},s.color,{dflt:d.defaultLine}),width:p({},s.width,{dflt:0,editType:"plot"}),dash:s.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,zorder:o.zorder}},23096:function(r,n,i){var a=i(54460),o=i(1220),s=i(74248),l=i(4500),c=i(39032).BADNUM;function u(r){return r===c?0:r}r.exports=function(r,n){var i,f,h,p,d,y,g,v,m=a.getFromId(r,n.xaxis||"x"),x=a.getFromId(r,n.yaxis||"y");"h"===n.orientation?(i=m.makeCalcdata(n,"x"),h=x.makeCalcdata(n,"y"),p=o(n,x,"y",h),d=!!n.yperiodalignment,y="y"):(i=x.makeCalcdata(n,"y"),h=m.makeCalcdata(n,"x"),p=o(n,m,"x",h),d=!!n.xperiodalignment,y="x");var b,_=Math.min((f=p.vals).length,i.length),w=Array(_);for(n._base=[],g=0;g<_;g++){i[g]<0&&(i[g]=c);var T=!1;i[g]!==c&&g+1<_&&i[g+1]!==c&&(T=!0),v=w[g]={p:f[g],s:i[g],cNext:T},n._base[g]=-.5*v.s,d&&(w[g].orig_p=h[g],w[g][y+"End"]=p.ends[g],w[g][y+"Start"]=p.starts[g]),n.ids&&(v.id=String(n.ids[g])),0===g&&(w[0].vTotal=0),w[0].vTotal+=u(v.s),v.begR=u(v.s)/u(w[0].s)}for(g=0;g<_;g++)(v=w[g]).s!==c&&(v.sumR=v.s/w[0].vTotal,v.difR=void 0!==b?v.s/b:1,b=v.s);return s(w,n),l(w,n),w}},74732:function(r){r.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(r,n,i){var a=i(96376).setGroupPositions;r.exports=function(r,n){var i,o,s=r._fullLayout,l=r._fullData,c=r.calcdata,u=n.xaxis,f=n.yaxis,h=[],p=[],d=[];for(o=0;o<l.length;o++){var y=l[o],g="h"===y.orientation;!0===y.visible&&y.xaxis===u._id&&y.yaxis===f._id&&"funnel"===y.type&&(i=c[o],g?d.push(i):p.push(i),h.push(i))}var v={mode:s.funnelmode,norm:s.funnelnorm,gap:s.funnelgap,groupgap:s.funnelgroupgap};for(a(r,u,f,p,v),a(r,f,u,d,v),o=0;o<h.length;o++){i=h[o];for(var m=0;m<i.length;m++)m+1<i.length&&(i[m].nextP0=i[m+1].p0,i[m].nextS0=i[m+1].s0,i[m].nextP1=i[m+1].p1,i[m].nextS1=i[m+1].s1)}}},45432:function(r,n,i){var a=i(3400),o=i(20011),s=i(31508).handleText,l=i(43980),c=i(31147),u=i(20088),f=i(76308);r.exports={supplyDefaults:function(r,n,i,o){function h(i,o){return a.coerce(r,n,u,i,o)}if(l(r,n,o,h)){c(r,n,o,h),h("xhoverformat"),h("yhoverformat"),h("orientation",n.y&&!n.x?"v":"h"),h("offset"),h("width");var p,d=h("text");h("hovertext"),h("hovertemplate");var y=h("textposition");s(r,n,o,h,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===n.textposition||n.texttemplate||h("textinfo",a.isArrayOrTypedArray(d)?"text+value":"value");var g=h("marker.color",i);h("marker.line.color",f.defaultLine),h("marker.line.width"),h("connector.visible")&&(h("connector.fillcolor",(p=a.isArrayOrTypedArray(g)?"#000":g,f.addOpacity(p,.5*f.opacity(p)))),h("connector.line.width")&&(h("connector.line.color"),h("connector.line.dash"))),h("zorder")}else n.visible=!1},crossTraceDefaults:function(r,n){var i;function s(r){return a.coerce(i._input,i,u,r)}if("group"===n.funnelmode)for(var l=0;l<r.length;l++)o((i=r[l])._input,i,n,s)}}},34580:function(r){r.exports=function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"percentInitial"in n&&(r.percentInitial=n.percentInitial),"percentPrevious"in n&&(r.percentPrevious=n.percentPrevious),"percentTotal"in n&&(r.percentTotal=n.percentTotal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},31488:function(r,n,i){var a=i(76308).opacity,o=i(63400).hoverOnBars,s=i(3400).formatPercent;r.exports=function(r,n,i,l,c){var u=o(r,n,i,l,c);if(u){var f,h,p,d,y=u.cd,g=y[0].trace,v="h"===g.orientation,m=y[u.index];u[(v?"x":"y")+"LabelVal"]=m.s,u.percentInitial=m.begR,u.percentInitialLabel=s(m.begR,1),u.percentPrevious=m.difR,u.percentPreviousLabel=s(m.difR,1),u.percentTotal=m.sumR,u.percentTotalLabel=s(m.sumR,1);var x=m.hi||g.hoverinfo,b=[];if(x&&"none"!==x&&"skip"!==x){var _="all"===x,w=x.split("+"),T=function(r){return _||-1!==w.indexOf(r)};T("percent initial")&&b.push(u.percentInitialLabel+" of initial"),T("percent previous")&&b.push(u.percentPreviousLabel+" of previous"),T("percent total")&&b.push(u.percentTotalLabel+" of total")}return u.extraText=b.join("<br>"),u.color=(f=g.marker,h=m.mc||f.color,p=m.mlc||f.line.color,d=m.mlw||f.line.width,a(h)?h:a(p)&&d?p:void 0),[u]}}},94704:function(r,n,i){r.exports={attributes:i(20088),layoutAttributes:i(7076),supplyDefaults:i(45432).supplyDefaults,crossTraceDefaults:i(45432).crossTraceDefaults,supplyLayoutDefaults:i(11631),calc:i(23096),crossTraceCalc:i(4804),plot:i(42200),style:i(44544).style,hoverPoints:i(31488),eventData:i(34580),selectPoints:i(45784),moduleType:"trace",name:"funnel",basePlotModule:i(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(r){r.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(r,n,i){var a=i(3400),o=i(7076);r.exports=function(r,n,i){var s=!1;function l(i,s){return a.coerce(r,n,o,i,s)}for(var c=0;c<i.length;c++){var u=i[c];if(u.visible&&"funnel"===u.type){s=!0;break}}s&&(l("funnelmode"),l("funnelgap",.2),l("funnelgroupgap"))}},42200:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(39032).BADNUM,c=i(98184),u=i(82744).clearMinTextSize;function f(r,n,i,a){var o=[],s=[],l=a?n:i,c=a?i:n;return o[0]=l.c2p(r.s0,!0),s[0]=c.c2p(r.p0,!0),o[1]=l.c2p(r.s1,!0),s[1]=c.c2p(r.p1,!0),o[2]=l.c2p(r.nextS0,!0),s[2]=c.c2p(r.nextP0,!0),o[3]=l.c2p(r.nextS1,!0),s[3]=c.c2p(r.nextP1,!0),a?[o,s]:[s,o]}r.exports=function(r,n,i,h){var p=r._fullLayout;u("funnel",p),function(r,n,i,c){var u=n.xaxis,h=n.yaxis;o.makeTraceGroups(c,i,"trace bars").each(function(i){var c=a.select(this),p=i[0].trace,d=o.ensureSingle(c,"g","regions");if(p.connector&&p.connector.visible){var y="h"===p.orientation,g=d.selectAll("g.region").data(o.identity);g.enter().append("g").classed("region",!0),g.exit().remove();var v=g.size();g.each(function(i,c){if(c===v-1||i.cNext){var p=f(i,u,h,y),d=p[0],g=p[1],m="";d[0]!==l&&g[0]!==l&&d[1]!==l&&g[1]!==l&&d[2]!==l&&g[2]!==l&&d[3]!==l&&g[3]!==l&&(m+=y?"M"+d[0]+","+g[1]+"L"+d[2]+","+g[2]+"H"+d[3]+"L"+d[1]+","+g[1]+"Z":"M"+d[1]+","+g[1]+"L"+d[2]+","+g[3]+"V"+g[2]+"L"+d[1]+","+g[0]+"Z"),""===m&&(m="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",m).call(s.setClipUrl,n.layerClipId,r)}})}else d.remove()})}(r,n,i,h),function(r,n,i,l){var c=n.xaxis,u=n.yaxis;o.makeTraceGroups(l,i,"trace bars").each(function(i){var l=a.select(this),h=i[0].trace,p=o.ensureSingle(l,"g","lines");if(h.connector&&h.connector.visible&&h.connector.line.width){var d="h"===h.orientation,y=p.selectAll("g.line").data(o.identity);y.enter().append("g").classed("line",!0),y.exit().remove();var g=y.size();y.each(function(i,l){if(l===g-1||i.cNext){var h=f(i,c,u,d),p=h[0],y=h[1],v="";void 0!==p[3]&&void 0!==y[3]&&(d?v+="M"+p[0]+","+y[1]+"L"+p[2]+","+y[2]+("M"+p[1]+","+y[1]+"L"+p[3])+","+y[2]:v+="M"+p[1]+","+y[1]+"L"+p[2]+","+y[3]+("M"+p[1]+","+y[0]+"L"+p[2])+","+y[2]),""===v&&(v="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",v).call(s.setClipUrl,n.layerClipId,r)}})}else p.remove()})}(r,n,i,h),c.plot(r,n,i,h,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})}},44544:function(r,n,i){var a=i(33428),o=i(43616),s=i(76308),l=i(13448).DESELECTDIM,c=i(60100),u=i(82744).resizeText,f=c.styleTextPoints;r.exports={style:function(r,n,i){var c=i||a.select(r).selectAll('g[class^="funnellayer"]').selectAll("g.trace");u(r,c,"funnel"),c.style("opacity",function(r){return r[0].trace.opacity}),c.each(function(n){var i=a.select(this),c=n[0].trace;i.selectAll(".point > path").each(function(r){if(!r.isBlank){var n=c.marker;a.select(this).call(s.fill,r.mc||n.color).call(s.stroke,r.mlc||n.line.color).call(o.dashLine,n.line.dash,r.mlw||n.line.width).style("opacity",c.selectedpoints&&!r.selected?l:1)}}),f(i,c,r),i.selectAll(".regions").each(function(){a.select(this).selectAll("path").style("stroke-width",0).call(s.fill,c.connector.fillcolor)}),i.selectAll(".lines").each(function(){var r=c.connector.line;o.lineGroupStyle(a.select(this).selectAll("path"),r.width,r.color,r.dash)})})}}},22332:function(r,n,i){var a=i(74996),o=i(45464),s=i(86968).u,l=i(21776).Ks,c=i(21776).Gw,u=i(92880).extendFlat;r.exports={labels:a.labels,label0:a.label0,dlabel:a.dlabel,values:a.values,marker:{colors:a.marker.colors,line:{color:u({},a.marker.line.color,{dflt:null}),width:u({},a.marker.line.width,{dflt:1}),editType:"calc"},pattern:a.marker.pattern,editType:"calc"},text:a.text,hovertext:a.hovertext,scalegroup:u({},a.scalegroup,{}),textinfo:u({},a.textinfo,{flags:["label","text","value","percent"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:u({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","text","percent"]}),textposition:u({},a.textposition,{values:["inside","none"],dflt:"inside"}),textfont:a.textfont,insidetextfont:a.insidetextfont,title:{text:a.title.text,font:a.title.font,position:u({},a.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:s({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(r,n,i){var a=i(7316);n.name="funnelarea",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},54e3:function(r,n,i){var a=i(45768);r.exports={calc:function(r,n){return a.calc(r,n)},crossTraceCalc:function(r){a.crossTraceCalc(r,{type:"funnelarea"})}}},92688:function(r,n,i){var a=i(3400),o=i(22332),s=i(86968).Q,l=i(31508).handleText,c=i(74174).handleLabelsAndValues,u=i(74174).handleMarkerDefaults;r.exports=function(r,n,i,f){function h(i,s){return a.coerce(r,n,o,i,s)}var p=c(h("labels"),h("values")),d=p.len;if(n._hasLabels=p.hasLabels,n._hasValues=p.hasValues,!n._hasLabels&&n._hasValues&&(h("label0"),h("dlabel")),d){n._length=d,u(r,n,f,h),h("scalegroup");var y,g=h("text"),v=h("texttemplate");if(v||(y=h("textinfo",Array.isArray(g)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),v||y&&"none"!==y){var m=h("textposition");l(r,n,f,h,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else"none"===y&&h("textposition","none");s(n,f,h),h("title.text")&&(h("title.position"),a.coerceFont(h,"title.font",f.font)),h("aspectratio"),h("baseratio")}else n.visible=!1}},62396:function(r,n,i){r.exports={moduleType:"trace",name:"funnelarea",basePlotModule:i(91248),categories:["pie-like","funnelarea","showLegend"],attributes:i(22332),layoutAttributes:i(61280),supplyDefaults:i(92688),supplyLayoutDefaults:i(35384),calc:i(54e3).calc,crossTraceCalc:i(54e3).crossTraceCalc,plot:i(39472),style:i(62096),styleOne:i(10528),meta:{}}},61280:function(r,n,i){var a=i(85204).hiddenlabels;r.exports={hiddenlabels:a,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(r,n,i){var a=i(3400),o=i(61280);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("hiddenlabels"),i("funnelareacolorway",n.colorway),i("extendfunnelareacolors")}},39472:function(r,n,i){var a=i(33428),o=i(43616),s=i(3400),l=s.strScale,c=s.strTranslate,u=i(72736),f=i(98184).toMoveInsideBar,h=i(82744),p=h.recordMinTextSize,d=h.clearMinTextSize,y=i(69656),g=i(37820),v=g.attachFxHandlers,m=g.determineInsideTextFont,x=g.layoutAreas,b=g.prerenderTitles,_=g.positionTitleOutside,w=g.formatSliceLabel;function T(r,n){return"l"+(n[0]-r[0])+","+(n[1]-r[1])}r.exports=function(r,n){var i=r._context.staticPlot,h=r._fullLayout;d("funnelarea",h),b(n,r),x(n,h._size),s.makeTraceGroups(h._funnelarealayer,n,"trace").each(function(n){var d=a.select(this),g=n[0],x=g.trace;(function(r){if(r.length){var n=r[0],i=n.trace,a=i.aspectratio,o=i.baseratio;o>.999&&(o=.999);var s,l,c,u=Math.pow(o,2),f=n.vTotal,h=f*u/(1-u)/f,p=[];for(p.push(I()),l=r.length-1;l>-1;l--)if(!(c=r[l]).hidden){var d=c.v/f;h+=d,p.push(I())}var y=1/0,g=-1/0;for(l=0;l<p.length;l++)y=Math.min(y,(s=p[l])[1]),g=Math.max(g,s[1]);for(l=0;l<p.length;l++)p[l][1]-=(g+y)/2;var v=p[p.length-1][0],m=n.r,x=(g-y)/2,b=m/v,_=m/x*a;for(n.r=_*x,l=0;l<p.length;l++)p[l][0]*=b,p[l][1]*=_;var w,T,A=[-(s=p[0])[0],s[1]],k=[s[0],s[1]],M=0;for(l=r.length-1;l>-1;l--)if(!(c=r[l]).hidden){var S=p[M+=1][0],E=p[M][1];c.TL=[-S,E],c.TR=[S,E],c.BL=A,c.BR=k,c.pxmid=(w=c.TR,T=c.BR,[.5*(w[0]+T[0]),.5*(w[1]+T[1])]),A=c.TL,k=c.TR}}function I(){var r,n={x:r=Math.sqrt(h),y:-r};return[n.x,n.y]}})(n),d.each(function(){var d=a.select(this).selectAll("g.slice").data(n);d.enter().append("g").classed("slice",!0),d.exit().remove(),d.each(function(l,c){if(l.hidden)a.select(this).selectAll("path,g").remove();else{l.pointNumber=l.i,l.curveNumber=x.index;var d=g.cx,b=g.cy,_=a.select(this),A=_.selectAll("path.surface").data([l]);A.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),_.call(v,r,n);var k="M"+(d+l.TR[0])+","+(b+l.TR[1])+T(l.TR,l.BR)+T(l.BR,l.BL)+T(l.BL,l.TL)+"Z";A.attr("d",k),w(r,l,g);var M=y.castOption(x.textposition,l.pts),S=_.selectAll("g.slicetext").data(l.text&&"none"!==M?[0]:[]);S.enter().append("g").classed("slicetext",!0),S.exit().remove(),S.each(function(){var i=s.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),y=s.ensureUniformFontSize(r,m(x,l,h.font));i.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,y).call(u.convertToTspans,r);var g,v=o.bBox(i.node()),_=Math.min(l.BL[1],l.BR[1])+b,w=Math.max(l.TL[1],l.TR[1])+b;(g=f(Math.max(l.TL[0],l.BL[0])+d,Math.min(l.TR[0],l.BR[0])+d,_,w,v,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=y.size,p(x.type,g,h),n[c].transform=g,s.setTransormAndDisplay(i,g)})}});var b=a.select(this).selectAll("g.titletext").data(x.title.text?[0]:[]);b.enter().append("g").classed("titletext",!0),b.exit().remove(),b.each(function(){var n=s.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),i=x.title.text;x._meta&&(i=s.templateString(i,x._meta)),n.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,x.title.font).call(u.convertToTspans,r);var f=_(g,h._size);n.attr("transform",c(f.x,f.y)+l(Math.min(1,f.scale))+c(f.tx,f.ty))})})})}},62096:function(r,n,i){var a=i(33428),o=i(10528),s=i(82744).resizeText;r.exports=function(r){var n=r._fullLayout._funnelarealayer.selectAll(".trace");s(r,n,"funnelarea"),n.each(function(n){var i=n[0].trace,s=a.select(this);s.style({opacity:i.opacity}),s.selectAll("path.surface").each(function(n){a.select(this).call(o,n,i,r)})})}},83328:function(r,n,i){var a=i(52904),o=i(45464),s=i(25376),l=i(29736).axisHoverFormat,c=i(21776).Ks,u=i(21776).Gw,f=i(49084),h=i(92880).extendFlat;r.exports=h({z:{valType:"data_array",editType:"calc"},x:h({},a.x,{impliedEdits:{xtype:"array"}}),x0:h({},a.x0,{impliedEdits:{xtype:"scaled"}}),dx:h({},a.dx,{impliedEdits:{xtype:"scaled"}}),y:h({},a.y,{impliedEdits:{ytype:"array"}}),y0:h({},a.y0,{impliedEdits:{ytype:"scaled"}}),dy:h({},a.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:h({},a.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:h({},a.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:h({},a.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:h({},a.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:h({},a.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:h({},a.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:c(),texttemplate:u({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:s({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:h({},o.showlegend,{dflt:!1}),zorder:a.zorder},{transforms:void 0},f("",{cLetter:"z",autoColorDflt:!1}))},19512:function(r,n,i){var a=i(24040),o=i(3400),s=i(54460),l=i(1220),c=i(55480),u=i(47128),f=i(2872),h=i(26136),p=i(70448),d=i(11240),y=i(35744),g=i(39032).BADNUM;function v(r){for(var n=[],i=r.length,a=0;a<i;a++){var o=r[a];o!==g&&n.push(o)}return n}r.exports=function(r,n){var i,m,x,b,_,w,T,A,k,M,S,E=s.getFromId(r,n.xaxis||"x"),I=s.getFromId(r,n.yaxis||"y"),L=a.traceIs(n,"contour"),C=a.traceIs(n,"histogram"),O=a.traceIs(n,"gl2d"),D=L?"best":n.zsmooth;if(E._minDtick=0,I._minDtick=0,C)b=(S=c(r,n)).orig_x,i=S.x,m=S.x0,x=S.dx,A=S.orig_y,_=S.y,w=S.y0,T=S.dy,k=S.z;else{var P=n.z;o.isArray1D(P)?(f(n,E,I,"x","y",["z"]),i=n._x,_=n._y,P=n._z):(b=n.x?E.makeCalcdata(n,"x"):[],A=n.y?I.makeCalcdata(n,"y"):[],i=l(n,E,"x",b).vals,_=l(n,I,"y",A).vals,n._x=i,n._y=_),m=n.x0,x=n.dx,w=n.y0,T=n.dy,k=h(P,n,E,I)}function B(r){D=n._input.zsmooth=n.zsmooth=!1,o.warn('cannot use zsmooth: "fast": '+r)}function R(r){if(r.length>1){var n=(r[r.length-1]-r[0])/(r.length-1),i=Math.abs(n/100);for(M=0;M<r.length-1;M++)if(Math.abs(r[M+1]-r[M]-n)>i)return!1}return!0}(E.rangebreaks||I.rangebreaks)&&(k=function(r,n,i){for(var a=[],o=-1,s=0;s<i.length;s++)if(n[s]!==g){a[++o]=[];for(var l=0;l<i[s].length;l++)r[l]!==g&&a[o].push(i[s][l])}return a}(i,_,k),C||(i=v(i),_=v(_),n._x=i,n._y=_)),!C&&(L||n.connectgaps)&&(n._emptypoints=d(k),p(k,n._emptypoints)),n._islinear=!1,"log"===E.type||"log"===I.type?"fast"===D&&B("log axis found"):R(i)?R(_)?n._islinear=!0:"fast"===D&&B("y scale is not linear"):"fast"===D&&B("x scale is not linear");var z=o.maxRowLength(k),F="scaled"===n.xtype?"":i,N=y(n,F,m,x,z,E),U="scaled"===n.ytype?"":_,j=y(n,U,w,T,k.length,I);O||(n._extremes[E._id]=s.findExtremes(E,N),n._extremes[I._id]=s.findExtremes(I,j));var V={x:N,y:j,z:k,text:n._text||n.text,hovertext:n._hovertext||n.hovertext};if(n.xperiodalignment&&b&&(V.orig_x=b),n.yperiodalignment&&A&&(V.orig_y=A),F&&F.length===N.length-1&&(V.xCenter=F),U&&U.length===j.length-1&&(V.yCenter=U),C&&(V.xRanges=S.xRanges,V.yRanges=S.yRanges,V.pts=S.pts),L||u(r,n,{vals:k,cLetter:"z"}),L&&n.contours&&"heatmap"===n.contours.coloring){var H={type:"contour"===n.type?"heatmap":"histogram2d",xcalendar:n.xcalendar,ycalendar:n.ycalendar};V.xfill=y(H,F,m,x,z,E),V.yfill=y(H,U,w,T,k.length,I)}return[V]}},26136:function(r,n,i){var a=i(38248),o=i(3400),s=i(39032).BADNUM;r.exports=function(r,n,i,l){if(n&&n.transpose){for(u=0,d=0;d<r.length;d++)u=Math.max(u,r[d].length);if(0===u)return!1;h=function(r){return r.length},p=function(r,n,i){return(r[i]||[])[n]}}else u=r.length,h=function(r,n){return r[n].length},p=function(r,n,i){return(r[n]||[])[i]};function c(r){if(n&&"carpet"!==n.type&&"contourcarpet"!==n.type&&r&&"category"===r.type&&n["_"+r._id.charAt(0)].length){var i=r._id.charAt(0),a={},l=n["_"+i+"CategoryMap"]||n[i];for(d=0;d<l.length;d++)a[l[d]]=d;return function(n){var i=a[r._categories[n]];return i+1?i:s}}return o.identity}var u,f,h,p,d,y,g,v,m=c(i),x=c(l);l&&"category"===l.type&&(u=l._categories.length);var b=Array(u);for(d=0;d<u;d++)for(f=i&&"category"===i.type?i._categories.length:h(r,d),b[d]=Array(f),y=0;y<f;y++)b[d][y]=function(r){if(a(r))return+r}((g=x(d),v=m(y),g===s||v===s?s:p(r,g,v)));return b}},96288:function(r){r.exports={min:"zmin",max:"zmax"}},2872:function(r,n,i){var a=i(3400),o=i(39032).BADNUM,s=i(1220);r.exports=function(r,n,i,l,c,u){var f=r._length,h=n.makeCalcdata(r,l),p=i.makeCalcdata(r,c);h=s(r,n,l,h).vals,p=s(r,i,c,p).vals;var d,y,g,v,m=r.text,x=void 0!==m&&a.isArray1D(m),b=r.hovertext,_=void 0!==b&&a.isArray1D(b),w=a.distinctVals(h),T=w.vals,A=a.distinctVals(p),k=A.vals,M=[],S=k.length,E=T.length;for(d=0;d<u.length;d++)M[d]=a.init2dArray(S,E);x&&(g=a.init2dArray(S,E)),_&&(v=a.init2dArray(S,E));var I=a.init2dArray(S,E);for(d=0;d<f;d++)if(h[d]!==o&&p[d]!==o){var L=a.findBin(h[d]+w.minDiff/2,T),C=a.findBin(p[d]+A.minDiff/2,k);for(y=0;y<u.length;y++){var O=r[u[y]];M[y][C][L]=O[d],I[C][L]=d}x&&(g[C][L]=m[d]),_&&(v[C][L]=b[d])}for(r["_"+l]=T,r["_"+c]=k,y=0;y<u.length;y++)r["_"+u[y]]=M[y];x&&(r._text=g),_&&(r._hovertext=v),n&&"category"===n.type&&(r["_"+l+"CategoryMap"]=T.map(function(r){return n._categories[r]})),i&&"category"===i.type&&(r["_"+c+"CategoryMap"]=k.map(function(r){return i._categories[r]})),r._after2before=I}},24480:function(r,n,i){var a=i(3400),o=i(51264),s=i(39096),l=i(31147),c=i(82748),u=i(27260),f=i(83328);r.exports=function(r,n,i,h){function p(i,o){return a.coerce(r,n,f,i,o)}o(r,n,p,h)?(l(r,n,h,p),p("xhoverformat"),p("yhoverformat"),p("text"),p("hovertext"),p("hovertemplate"),s(p,h),c(r,n,p,h),p("hoverongaps"),p("connectgaps",a.isArray1D(n.z)&&!1!==n.zsmooth),u(r,n,h,p,{prefix:"",cLetter:"z"}),p("zorder")):n.visible=!1}},11240:function(r,n,i){var a=i(3400).maxRowLength;r.exports=function(r){var n,i,o,s,l,c,u,f,h=[],p={},d=[],y=r[0],g=[],v=[0,0,0],m=a(r);for(i=0;i<r.length;i++)for(n=g,g=y,y=r[i+1]||[],o=0;o<m;o++)void 0===g[o]&&((c=(void 0!==g[o-1]?1:0)+(void 0!==g[o+1]?1:0)+(void 0!==n[o]?1:0)+(void 0!==y[o]?1:0))?(0===i&&c++,0===o&&c++,i===r.length-1&&c++,o===g.length-1&&c++,c<4&&(p[[i,o]]=[i,o,c]),h.push([i,o,c])):d.push([i,o]));for(;d.length;){for(u={},f=!1,l=d.length-1;l>=0;l--)(c=((p[[(i=(s=d[l])[0])-1,o=s[1]]]||v)[2]+(p[[i+1,o]]||v)[2]+(p[[i,o-1]]||v)[2]+(p[[i,o+1]]||v)[2])/20)&&(u[s]=[i,o,c],d.splice(l,1),f=!0);if(!f)throw"findEmpties iterated with no new neighbors";for(s in u)p[s]=u[s],h.push(u[s])}return h.sort(function(r,n){return n[2]-r[2]})}},55512:function(r,n,i){var a=i(93024),o=i(3400),s=o.isArrayOrTypedArray,l=i(54460),c=i(8932).extractOpts;r.exports=function(r,n,i,u,f){f||(f={});var h,p,d,y,g=f.isContour,v=r.cd[0],m=v.trace,x=r.xa,b=r.ya,_=v.x,w=v.y,T=v.z,A=v.xCenter,k=v.yCenter,M=v.zmask,S=m.zhoverformat,E=_,I=w;if(!1!==r.index){try{d=Math.round(r.index[1]),y=Math.round(r.index[0])}catch(n){return void o.error("Error hovering on heatmap, pointNumber must be [row,col], found:",r.index)}if(d<0||d>=T[0].length||y<0||y>T.length)return}else{if(a.inbox(n-_[0],n-_[_.length-1],0)>0||a.inbox(i-w[0],i-w[w.length-1],0)>0)return;if(g){for(E=[2*_[0]-_[1]],L=1;L<_.length;L++)E.push((_[L]+_[L-1])/2);for(E.push([2*_[_.length-1]-_[_.length-2]]),I=[2*w[0]-w[1]],L=1;L<w.length;L++)I.push((w[L]+w[L-1])/2);I.push([2*w[w.length-1]-w[w.length-2]])}d=Math.max(0,Math.min(E.length-2,o.findBin(n,E))),y=Math.max(0,Math.min(I.length-2,o.findBin(i,I)))}var L,C,O,D=x.c2p(_[d]),P=x.c2p(_[d+1]),B=b.c2p(w[y]),R=b.c2p(w[y+1]);g?(C=v.orig_x||_,O=v.orig_y||w,P=D,h=C[d],R=B,p=O[y]):(C=v.orig_x||A||_,O=v.orig_y||k||w,h=A?C[d]:(C[d]+C[d+1])/2,p=k?O[y]:(O[y]+O[y+1])/2,x&&"category"===x.type&&(h=_[d]),b&&"category"===b.type&&(p=w[y]),m.zsmooth&&(D=P=x.c2p(h),B=R=b.c2p(p)));var z=T[y][d];if(M&&!M[y][d]&&(z=void 0),void 0!==z||m.hoverongaps){s(v.hovertext)&&s(v.hovertext[y])?F=v.hovertext[y][d]:s(v.text)&&s(v.text[y])&&(F=v.text[y][d]);var F,N=c(m),U={type:"linear",range:[N.min,N.max],hoverformat:S,_separators:x._separators,_numFormat:x._numFormat},j=l.tickText(U,z,"hover").text;return[o.extendFlat(r,{index:m._after2before?m._after2before[y][d]:[y,d],distance:r.maxHoverDistance,spikeDistance:r.maxSpikeDistance,x0:D,x1:P,y0:B,y1:R,xLabelVal:h,yLabelVal:p,zLabelVal:z,zLabel:j,text:F})]}}},81932:function(r,n,i){r.exports={attributes:i(83328),supplyDefaults:i(24480),calc:i(19512),plot:i(41420),colorbar:i(96288),style:i(41648),hoverPoints:i(55512),moduleType:"trace",name:"heatmap",basePlotModule:i(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(r,n,i){var a=i(3400),o=[[-1,0],[1,0],[0,-1],[0,1]];function s(r,n,i){var a,s,l,c,u,f,h,p,d,y,g,v,m,x=0;for(c=0;c<n.length;c++){for(s=(a=n[c])[0],l=a[1],g=r[s][l],y=0,d=0,u=0;u<4;u++)(h=r[s+(f=o[u])[0]])&&void 0!==(p=h[l+f[1]])&&(0===y?v=m=p:(v=Math.min(v,p),m=Math.max(m,p)),d++,y+=p);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";r[s][l]=y/d,void 0===g?d<4&&(x=1):(r[s][l]=(1+i)*r[s][l]-i*g,m>v&&(x=Math.max(x,Math.abs(r[s][l]-g)/(m-v))))}return x}r.exports=function(r,n){var i,o=1;for(s(r,n),i=0;i<n.length&&!(n[i][2]<4);i++);for(n=n.slice(i),i=0;i<100&&o>.01;i++)o=s(r,n,.5-.25*Math.min(1,.5*o));return o>.01&&a.log("interp2d didn't converge quickly",o),r}},39096:function(r,n,i){var a=i(3400);r.exports=function(r,n){r("texttemplate");var i=a.extendFlat({},n.font,{color:"auto",size:"auto"});a.coerceFont(r,"textfont",i)}},35744:function(r,n,i){var a=i(24040),o=i(3400).isArrayOrTypedArray;r.exports=function(r,n,i,s,l,c){var u,f,h,p=[],d=a.traceIs(r,"contour"),y=a.traceIs(r,"histogram"),g=a.traceIs(r,"gl2d");if(o(n)&&n.length>1&&!y&&"category"!==c.type){var v=n.length;if(!(v<=l))return d?n.slice(0,l):n.slice(0,l+1);if(d||g)p=Array.from(n).slice(0,l);else if(1===l)p="log"===c.type?[.5*n[0],2*n[0]]:[n[0]-.5,n[0]+.5];else if("log"===c.type){for(p=[Math.pow(n[0],1.5)/Math.pow(n[1],.5)],h=1;h<v;h++)p.push(Math.sqrt(n[h-1]*n[h]));p.push(Math.pow(n[v-1],1.5)/Math.pow(n[v-2],.5))}else{for(p=[1.5*n[0]-.5*n[1]],h=1;h<v;h++)p.push(.5*(n[h-1]+n[h]));p.push(1.5*n[v-1]-.5*n[v-2])}if(v<l){var m,x=p[p.length-1];if("log"===c.type)for(m=x/p[p.length-2],h=v;h<l;h++)x*=m,p.push(x);else for(m=x-p[p.length-2],h=v;h<l;h++)x+=m,p.push(x)}}else{var b=r[c._id.charAt(0)+"calendar"];for(u=y?c.r2c(i,0,b):o(n)&&1===n.length?n[0]:void 0===i?0:("log"===c.type?c.d2c:c.r2c)(i,0,b),f=s||1,h=d||g?0:-.5;h<l;h++)p.push(u+f*h)}return p}},41420:function(r,n,i){var a=i(33428),o=i(49760),s=i(24040),l=i(43616),c=i(54460),u=i(3400),f=i(72736),h=i(76688),p=i(76308),d=i(8932).extractOpts,y=i(8932).makeColorScaleFuncFromTrace,g=i(9616),v=i(84284).LINE_SPACING,m=i(9188),x=i(2264).STYLE,b="heatmap-label";function _(r){return r.selectAll("g."+b)}function w(r){_(r).remove()}function T(r,n){var i=n.length-2,a=u.constrain(u.findBin(r,n),0,i),o=n[a],s=n[a+1],l=u.constrain(a+(r-o)/(s-o)-.5,0,i),c=Math.round(l),f=Math.abs(l-c);return l&&l!==i&&f?{bin0:c,frac:f,bin1:Math.round(c+f/(l-c))}:{bin0:c,bin1:c,frac:0}}function A(r,n){var i=n.length-1,a=u.constrain(u.findBin(r,n),0,i),o=n[a],s=(r-o)/(n[a+1]-o)||0;return s<=0?{bin0:a,bin1:a,frac:0}:s<.5?{bin0:a,bin1:a+1,frac:s}:{bin0:a+1,bin1:a,frac:1-s}}function k(r,n,i){r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=Math.round(255*i[3])}r.exports=function(r,n,i,M){var S=n.xaxis,E=n.yaxis;u.makeTraceGroups(M,i,"hm").each(function(n){var i,M,I,L,C,O,D,P,B=a.select(this),R=n[0],z=R.trace,F=z.xgap||0,N=z.ygap||0,U=R.z,j=R.x,V=R.y,H=R.xCenter,q=R.yCenter,G=s.traceIs(z,"contour"),W=G?"best":z.zsmooth,Y=U.length,Z=u.maxRowLength(U),X=!1,K=!1;for(O=0;void 0===i&&O<j.length-1;)i=S.c2p(j[O]),O++;for(O=j.length-1;void 0===M&&O>0;)M=S.c2p(j[O]),O--;for(M<i&&(I=M,M=i,i=I,X=!0),O=0;void 0===L&&O<V.length-1;)L=E.c2p(V[O]),O++;for(O=V.length-1;void 0===C&&O>0;)C=E.c2p(V[O]),O--;C<L&&(I=L,L=C,C=I,K=!0),G&&(H=j,q=V,j=R.xfill,V=R.yfill);var J="default";if(W?J="best"===W?"smooth":"fast":z._islinear&&0===F&&0===N&&m()&&(J="fast"),"fast"!==J){var $="best"===W?0:.5;i=Math.max(-$*S._length,i),M=Math.min((1+$)*S._length,M),L=Math.max(-$*E._length,L),C=Math.min((1+$)*E._length,C)}var Q,tt,te=Math.round(M-i),tr=Math.round(C-L);if(i>=S._length||M<=0||L>=E._length||C<=0)return B.selectAll("image").data([]).exit().remove(),void w(B);"fast"===J?(Q=Z,tt=Y):(Q=te,tt=tr);var tn=document.createElement("canvas");tn.width=Q,tn.height=tt;var ti,ta,to=tn.getContext("2d",{willReadFrequently:!0}),ts=y(z,{noNumericCheck:!0,returnArray:!0});"fast"===J?(ti=X?function(r){return Z-1-r}:u.identity,ta=K?function(r){return Y-1-r}:u.identity):(ti=function(r){return u.constrain(Math.round(S.c2p(j[r])-i),0,te)},ta=function(r){return u.constrain(Math.round(E.c2p(V[r])-L),0,tr)});var tl,tc,tu,tf,th=ta(0),tp=[th,th],td=X?0:1,ty=K?0:1,tg=0,tv=0,tm=0,tx=0;function tb(r,n){if(void 0!==r){var i=ts(r);return i[0]=Math.round(i[0]),i[1]=Math.round(i[1]),i[2]=Math.round(i[2]),tg+=n,tv+=i[0]*n,tm+=i[1]*n,tx+=i[2]*n,i}return[0,0,0,0]}if("default"!==J){var t_,tw=0;try{t_=new Uint8Array(Q*tt*4)}catch(r){t_=Array(Q*tt*4)}if("smooth"===J){var tT,tA,tk,tM=H||j,tS=q||V,tE=Array(tM.length),tI=Array(tS.length),tL=Array(te),tC=H?A:T,tO=q?A:T;for(O=0;O<tM.length;O++)tE[O]=Math.round(S.c2p(tM[O])-i);for(O=0;O<tS.length;O++)tI[O]=Math.round(E.c2p(tS[O])-L);for(O=0;O<te;O++)tL[O]=tC(O,tE);for(D=0;D<tr;D++)for(tA=U[(tT=tO(D,tI)).bin0],tk=U[tT.bin1],O=0;O<te;O++,tw+=4)k(t_,tw,tf=function(r,n,i,a){var o=r[i.bin0];if(void 0===o)return tb(void 0,1);var s,l=r[i.bin1],c=n[i.bin0],u=n[i.bin1];return s=void 0===l?void 0===u?0:void 0===c?2*(u-o):2*(2*u-c-o)/3:void 0===u?void 0===c?0:2*(2*o-l-c)/3:void 0===c?2*(2*u-l-o)/3:u+o-l-c,tb(o+i.frac*(l-o||0)+a.frac*((c-o||0)+i.frac*s))}(tA,tk,tL[O],tT))}else for(D=0;D<Y;D++)for(tu=U[D],tp=ta(D),O=0;O<Z;O++)tf=tb(tu[O],1),k(t_,tw=4*(tp*Z+ti(O)),tf);var tD=to.createImageData(Q,tt);try{tD.data.set(t_)}catch(r){var tP=tD.data,tB=tP.length;for(D=0;D<tB;D++)tP[D]=t_[D]}to.putImageData(tD,0,0)}else{var tR=Math.floor(F/2),tz=Math.floor(N/2);for(D=0;D<Y;D++)if(tu=U[D],tp.reverse(),tp[ty]=ta(D+1),tp[0]!==tp[1]&&void 0!==tp[0]&&void 0!==tp[1])for(tl=[tc=ti(0),tc],O=0;O<Z;O++)tl.reverse(),tl[td]=ti(O+1),tl[0]!==tl[1]&&void 0!==tl[0]&&void 0!==tl[1]&&(tf=tb(tu[O],(tl[1]-tl[0])*(tp[1]-tp[0])),to.fillStyle="rgba("+tf.join(",")+")",to.fillRect(tl[0]+tR,tp[0]+tz,tl[1]-tl[0]-F,tp[1]-tp[0]-N))}var tF=o("rgb("+(tv=Math.round(tv/tg))+","+(tm=Math.round(tm/tg))+","+(tx=Math.round(tx/tg))+")");r._hmpixcount=(r._hmpixcount||0)+tg,r._hmlumcount=(r._hmlumcount||0)+tg*tF.getLuminance();var tN=B.selectAll("image").data(n);tN.enter().append("svg:image").attr({xmlns:g.svg,preserveAspectRatio:"none"}),tN.attr({height:tr,width:te,x:i,y:L,"xlink:href":tn.toDataURL("image/png")}),"fast"!==J||W||tN.attr("style",x),w(B);var tU=z.texttemplate;if(tU){var tj=d(z),tV={type:"linear",range:[tj.min,tj.max],_separators:S._separators,_numFormat:S._numFormat},tH="histogram2dcontour"===z.type,tq="contour"===z.type,tG=tq?Y-1:Y,tW=tq?1:0,tY=tq?Z-1:Z,tZ=[];for(O=tq?1:0;O<tG;O++){if(tq)tK=R.y[O];else if(tH){if(0===O||O===Y-1)continue;tK=R.y[O]}else if(R.yCenter)tK=R.yCenter[O];else{if(O+1===Y&&void 0===R.y[O+1])continue;tK=(R.y[O]+R.y[O+1])/2}var tX=Math.round(E.c2p(tK));if(!(0>tX||tX>E._length))for(D=tW;D<tY;D++){if(tq)tJ=R.x[D];else if(tH){if(0===D||D===Z-1)continue;tJ=R.x[D]}else if(R.xCenter)tJ=R.xCenter[D];else{if(D+1===Z&&void 0===R.x[D+1])continue;tJ=(R.x[D]+R.x[D+1])/2}var tK,tJ,t$=Math.round(S.c2p(tJ));if(!(0>t$||t$>S._length)){var tQ=h({x:tJ,y:tK},z,r._fullLayout);tQ.x=tJ,tQ.y=tK;var t0=R.z[O][D];void 0===t0?(tQ.z="",tQ.zLabel=""):(tQ.z=t0,tQ.zLabel=c.tickText(tV,t0,"hover").text);var t1=R.text&&R.text[O]&&R.text[O][D];void 0!==t1&&!1!==t1||(t1=""),tQ.text=t1;var t2=u.texttemplateString(tU,tQ,r._fullLayout._d3locale,tQ,z._meta||{});if(t2){var t3=t2.split("<br>"),t4=t3.length,t6=0;for(P=0;P<t4;P++)t6=Math.max(t6,t3[P].length);tZ.push({l:t4,c:t6,t:t2,x:t$,y:tX,z:t0})}}}}var t5=z.textfont,t8=t5.size,t7=r._fullLayout.font.size;if(!t8||"auto"===t8){var t9=1/0,et=1/0,ee=0,er=0;for(P=0;P<tZ.length;P++){var en=tZ[P];if(ee=Math.max(ee,en.l),er=Math.max(er,en.c),P<tZ.length-1){var ei=tZ[P+1],ea=Math.abs(ei.x-en.x),eo=Math.abs(ei.y-en.y);ea&&(t9=Math.min(t9,ea)),eo&&(et=Math.min(et,eo))}}isFinite(t9)&&isFinite(et)?(t9-=F,et-=N,t9/=er,et/=ee,t9/=v/2,et/=v,t8=Math.min(Math.floor(t9),Math.floor(et),t7)):t8=t7}if(t8<=0||!isFinite(t8))return;_(B).data(tZ).enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(n){var i=a.select(this),o=t5.color;o&&"auto"!==o||(o=p.contrast(void 0===n.z?r._fullLayout.plot_bgcolor:"rgba("+ts(n.z).join()+")")),i.attr("data-notex",1).call(f.positionText,n.x,n.y-t8*(n.l*v/2-1)).call(l.font,{family:t5.family,size:t8,color:o,weight:t5.weight,style:t5.style,variant:t5.variant,textcase:t5.textcase,lineposition:t5.lineposition,shadow:t5.shadow}).text(n.t).call(f.convertToTspans,r)})}})}},41648:function(r,n,i){var a=i(33428);r.exports=function(r){a.select(r).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}},82748:function(r){r.exports=function(r,n,i){!1===i("zsmooth")&&(i("xgap"),i("ygap")),i("zhoverformat")}},51264:function(r,n,i){var a=i(38248),o=i(3400),s=i(24040);function l(r,n){var i=n(r);return"scaled"===(i?n(r+"type","array"):"scaled")&&(n(r+"0"),n("d"+r)),i}r.exports=function(r,n,i,c,u,f){var h,p,d=i("z");if(u=u||"x",f=f||"y",void 0===d||!d.length)return 0;if(o.isArray1D(d)){h=i(u),p=i(f);var y=o.minRowLength(h),g=o.minRowLength(p);if(0===y||0===g)return 0;n._length=Math.min(y,g,d.length)}else{if(h=l(u,i),p=l(f,i),!function(r){for(var n,i=!0,s=!1,l=!1,c=0;c<r.length;c++){if(n=r[c],!o.isArrayOrTypedArray(n)){i=!1;break}n.length>0&&(s=!0);for(var u=0;u<n.length;u++)if(a(n[u])){l=!0;break}}return i&&s&&l}(d))return 0;i("transpose"),n._length=null}return"heatmapgl"===r.type||s.getComponentMethod("calendars","handleTraceDefaults")(r,n,[u,f],c),!0}},74512:function(r,n,i){for(var a=i(83328),o=i(49084),s=i(92880).extendFlat,l=i(67824).overrideAll,c=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],u={},f=0;f<c.length;f++){var h=c[f];u[h]=a[h]}u.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},s(u,o("",{cLetter:"z",autoColorDflt:!1})),r.exports=l(u,"calc","nested")},84656:function(r,n,i){var a=i(67792).gl_heatmap2d,o=i(54460),s=i(43080);function l(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=a(r.glplot,this.options),this.heatmap._trace=this}var c=l.prototype;c.handlePick=function(r){var n=this.options,i=n.shape,a=r.pointId,o=a%i[0],s=Math.floor(a/i[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[o],n.y[s],n.z[a]],textLabel:this.textLabels[a],name:this.name,pointIndex:[s,o],hoverinfo:this.hoverinfo}},c.update=function(r,n){var i=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var a=i.z;this.options.z=[].concat.apply([],a);var l=a[0].length,c=a.length;this.options.shape=[l,c],this.options.x=i.x,this.options.y=i.y,this.options.zsmooth=r.zsmooth;var u=function(r){for(var n=r.colorscale,i=r.zmin,a=r.zmax,o=n.length,l=Array(o),c=Array(4*o),u=0;u<o;u++){var f=n[u],h=s(f[1]);l[u]=i+f[0]*(a-i);for(var p=0;p<4;p++)c[4*u+p]=h[p]}return{colorLevels:l,colorValues:c}}(r);this.options.colorLevels=u.colorLevels,this.options.colorValues=u.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var f,h,p=this.scene.xaxis,d=this.scene.yaxis;!1===r.zsmooth&&(f={ppad:i.x[1]-i.x[0]},h={ppad:i.y[1]-i.y[0]}),r._extremes[p._id]=o.findExtremes(p,i.x,f),r._extremes[d._id]=o.findExtremes(d,i.y,h)},c.dispose=function(){this.heatmap.dispose()},r.exports=function(r,n,i){var a=new l(r,n.uid);return a.update(n,i),a}},86464:function(r,n,i){var a=i(3400),o=i(51264),s=i(27260),l=i(74512);r.exports=function(r,n,i,c){function u(i,o){return a.coerce(r,n,l,i,o)}o(r,n,u,c)?(u("text"),u("zsmooth"),s(r,n,c,u,{prefix:"",cLetter:"z"})):n.visible=!1}},45536:function(r,n,i){r.exports={attributes:i(74512),supplyDefaults:i(86464),colorbar:i(96288),calc:i(19512),plot:i(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:i(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(r,n,i){var a=i(20832),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(21776).Gw,c=i(25376),u=i(11120),f=i(73316),h=i(92880).extendFlat;r.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:o("x"),yhoverformat:o("y"),text:h({},a.text,{}),hovertext:h({},a.hovertext,{}),orientation:a.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:u("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:u("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({},{keys:f.eventDataKeys}),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:h({},a.textposition,{arrayOk:!1}),textfont:c({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:c({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:c({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:a.insidetextanchor,textangle:a.textangle,cliponaxis:a.cliponaxis,constraintext:a.constraintext,marker:a.marker,offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,_deprecated:{bardir:a._deprecated.bardir},zorder:a.zorder}},2e3:function(r){r.exports=function(r,n){for(var i=r.length,a=0,o=0;o<i;o++)n[o]?(r[o]/=n[o],a+=r[o]):r[o]=null;return a}},11120:function(r){r.exports=function(r,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(r,n,i){var a=i(38248);r.exports={count:function(r,n,i){return i[r]++,1},sum:function(r,n,i,o){var s=o[n];return a(s)?(s=Number(s),i[r]+=s,s):0},avg:function(r,n,i,o,s){var l=o[n];return a(l)&&(l=Number(l),i[r]+=l,s[r]++),0},min:function(r,n,i,o){var s=o[n];if(a(s)){if(s=Number(s),!a(i[r]))return i[r]=s,s;if(i[r]>s){var l=s-i[r];return i[r]=s,l}}return 0},max:function(r,n,i,o){var s=o[n];if(a(s)){if(s=Number(s),!a(i[r]))return i[r]=s,s;if(i[r]<s){var l=s-i[r];return i[r]=s,l}}return 0}}},67712:function(r,n,i){var a=i(39032),o=a.ONEAVGYEAR,s=a.ONEAVGMONTH,l=a.ONEDAY,c=a.ONEHOUR,u=a.ONEMIN,f=a.ONESEC,h=i(54460).tickIncrement;function p(r,n,i,a){if(r*n<=0)return 1/0;for(var s=Math.abs(n-r),c="date"===i.type,u=d(s,c),f=0;f<10;f++){var h=d(80*u,c);if(u===h||!function(r,n,i,a,s,c){if(a&&r>l){var u=y(n,s,c),f=y(i,s,c),h=r===o?0:1;return u[h]!==f[h]}return Math.floor(i/r)-Math.floor(n/r)>.1}(h,r,n,c,i,a))break;u=h}return u}function d(r,n){return n&&r>f?r>l?r>1.1*o?o:r>1.1*s?s:l:r>c?c:r>u?u:f:Math.pow(10,Math.floor(Math.log(r)/Math.LN10))}function y(r,n,i){var a=n.c2d(r,o,i).split("-");return""===a[0]&&(a.unshift(),a[0]="-"+a[0]),a}r.exports=function(r,n,i,a,s){var c,u,f=-1.1*n,d=-.1*n,y=r-d,g=i[0],v=i[1],m=Math.min(p(g+d,g+y,a,s),p(v+d,v+y,a,s)),x=Math.min(p(g+f,g+d,a,s),p(v+f,v+d,a,s));if(m>x&&x<Math.abs(v-g)/4e3?(c=m,u=!1):(c=Math.min(m,x),u=!0),"date"===a.type&&c>l){var b=c===o?1:6,_=c===o?"M12":"M1";return function(n,i){var l=a.c2d(n,o,s),c=l.indexOf("-",b);c>0&&(l=l.substr(0,c));var f=a.d2c(l,0,s);if(f<n){var p=h(f,_,!1,s);(f+p)/2<n+r&&(f=p)}return i&&u?h(f,_,!0,s):f}}return function(n,i){var a=c*Math.round(n/c);return a+c/10<n&&a+.9*c<n+r&&(a+=c),i&&u&&(a-=c),a}}},35852:function(r,n,i){var a=i(38248),o=i(3400),s=i(24040),l=i(54460),c=i(84664),u=i(16964),f=i(10648),h=i(2e3),p=i(67712);function d(r,n,i,c,u){var f,h,p,y,g,v,m,x=c+"bins",b=r._fullLayout,_=n["_"+c+"bingroup"],w=b._histogramBinOpts[_],T="overlay"===b.barmode,A=function(r){return i.r2c(r,0,y)},k=function(r){return i.c2r(r,0,y)},M="date"===i.type?function(r){return r||0===r?o.cleanDate(r,null,y):null}:function(r){return a(r)?Number(r):null};function S(r,n,i){n[r+"Found"]?(n[r]=M(n[r]),null===n[r]&&(n[r]=i[r])):(v[r]=n[r]=i[r],o.nestedProperty(h[0],x+"."+r).set(i[r]))}if(n["_"+c+"autoBinFinished"])delete n["_"+c+"autoBinFinished"];else{h=w.traces;var E=[],I=!0,L=!1,C=!1;for(f=0;f<h.length;f++)if((p=h[f]).visible){var O=w.dirs[f];g=p["_"+O+"pos0"]=i.makeCalcdata(p,O),E=o.concat(E,g),delete p["_"+c+"autoBinFinished"],!0===n.visible&&(I?I=!1:(delete p._autoBin,p["_"+c+"autoBinFinished"]=1),s.traceIs(p,"2dMap")&&(L=!0),"histogram2dcontour"===p.type&&(C=!0))}y=h[0][c+"calendar"];var D=l.autoBin(E,i,w.nbins,L,y,w.sizeFound&&w.size);if(v=(h[0]._autoBin={})[w.dirs[0]]={},C&&(w.size||(D.start=k(l.tickIncrement(A(D.start),D.size,!0,y))),void 0===w.end&&(D.end=k(l.tickIncrement(A(D.end),D.size,!1,y)))),T&&!s.traceIs(n,"2dMap")&&0===D._dataSpan&&"category"!==i.type&&"multicategory"!==i.type&&""===n.bingroup&&void 0===n.xbins){if(u)return[D,g,!0];D=function(r,n,i,a,s){var l,c,u,f=r._fullLayout,h=function(r,n){for(var i=n.xaxis,a=n.yaxis,o=n.orientation,s=[],l=r._fullData,c=0;c<l.length;c++){var u=l[c];"histogram"===u.type&&!0===u.visible&&u.orientation===o&&u.xaxis===i&&u.yaxis===a&&s.push(u)}return s}(r,n),p=!1,y=1/0,g=[n];for(l=0;l<h.length;l++)if((c=h[l])===n)p=!0;else if(p){var v=d(r,c,i,a,!0),m=v[0],x=v[2];c["_"+a+"autoBinFinished"]=1,c["_"+a+"pos0"]=v[1],x?g.push(c):y=Math.min(y,m.size)}else y=Math.min(y,(u=f._histogramBinOpts[c["_"+a+"bingroup"]]).size||c[s].size);var b=Array(g.length);for(l=0;l<g.length;l++)for(var _=g[l]["_"+a+"pos0"],w=0;w<_.length;w++)if(void 0!==_[w]){b[l]=_[w];break}for(isFinite(y)||(y=o.distinctVals(b).minDiff),l=0;l<g.length;l++){var T=(c=g[l])[a+"calendar"],A={start:i.c2r(b[l]-y/2,0,T),end:i.c2r(b[l]+y/2,0,T),size:y};c._input[s]=c[s]=A,(u=f._histogramBinOpts[c["_"+a+"bingroup"]])&&o.extendFlat(u,A)}return n[s]}(r,n,i,c,x)}(m=p.cumulative||{}).enabled&&"include"!==m.currentbin&&("decreasing"===m.direction?D.start=k(l.tickIncrement(A(D.start),D.size,!0,y)):D.end=k(l.tickIncrement(A(D.end),D.size,!1,y))),w.size=D.size,w.sizeFound||(v.size=D.size,o.nestedProperty(h[0],x+".size").set(D.size)),S("start",w,D),S("end",w,D)}g=n["_"+c+"pos0"],delete n["_"+c+"pos0"];var P=n._input[x]||{},B=o.extendFlat({},w),R=w.start,z=i.r2l(P.start),F=void 0!==z;if((w.startFound||F)&&z!==i.r2l(R)){var N=F?z:o.aggNums(Math.min,null,g),U={type:"category"===i.type||"multicategory"===i.type?"linear":i.type,r2l:i.r2l,dtick:w.size,tick0:R,calendar:y,range:[N,l.tickIncrement(N,w.size,!1,y)].map(i.l2r)},j=l.tickFirst(U);j>i.r2l(N)&&(j=l.tickIncrement(j,w.size,!0,y)),B.start=i.l2r(j),F||o.nestedProperty(n,x+".start").set(B.start)}var V=w.end,H=i.r2l(P.end),q=void 0!==H;if((w.endFound||q)&&H!==i.r2l(V)){var G=q?H:o.aggNums(Math.max,null,g);B.end=i.l2r(G),q||o.nestedProperty(n,x+".start").set(B.end)}var W="autobin"+c;return!1===n._input[W]&&(n._input[x]=o.extendFlat({},n[x]||{}),delete n._input[W],delete n[W]),[B,g]}r.exports={calc:function(r,n){var i,s,y,g,v=[],m=[],x="h"===n.orientation,b=l.getFromId(r,x?n.yaxis:n.xaxis),_=x?"y":"x",w={x:"y",y:"x"}[_],T=n[_+"calendar"],A=n.cumulative,k=d(r,n,b,_),M=k[0],S=k[1],E="string"==typeof M.size,I=[],L=E?I:M,C=[],O=[],D=[],P=0,B=n.histnorm,R=n.histfunc,z=-1!==B.indexOf("density");A.enabled&&z&&(B=B.replace(/ ?density$/,""),z=!1);var F,N="max"===R||"min"===R?null:0,U=u.count,j=f[B],V=!1,H=function(r){return b.r2c(r,0,T)};for(o.isArrayOrTypedArray(n[w])&&"count"!==R&&(F=n[w],V="avg"===R,U=u[R]),i=H(M.start),y=H(M.end)+(i-l.tickIncrement(i,M.size,!1,T))/1e6;i<y&&v.length<1e6&&(s=l.tickIncrement(i,M.size,!1,T),v.push((i+s)/2),m.push(N),D.push([]),I.push(i),z&&C.push(1/(s-i)),V&&O.push(0),!(s<=i));)i=s;I.push(i),E||"date"!==b.type||(L={start:H(L.start),end:H(L.end),size:L.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var q=n["_"+_+"bingroup"],G={leftGap:1/0,rightGap:1/0};q&&(r._fullLayout._roundFnOpts[q]||(r._fullLayout._roundFnOpts[q]=G),G=r._fullLayout._roundFnOpts[q]);var W,Y=m.length,Z=!0,X=G.leftGap,K=G.rightGap,J={};for(i=0;i<S.length;i++){var $=S[i];(g=o.findBin($,L))>=0&&g<Y&&(P+=U(g,i,m,F,O),Z&&D[g].length&&$!==S[D[g][0]]&&(Z=!1),D[g].push(i),J[i]=g,X=Math.min(X,$-I[g]),K=Math.min(K,I[g+1]-$))}G.leftGap=X,G.rightGap=K,Z||(W=function(n,i){return function(){var a=r._fullLayout._roundFnOpts[q];return p(a.leftGap,a.rightGap,I,b,T)(n,i)}}),V&&(P=h(m,O)),j&&j(m,P,C),A.enabled&&function(r,n,i){var a,o,s;function l(n){s=r[n],r[n]/=2}function c(n){o=r[n],r[n]=s+o/2,s+=o}if("half"===i){if("increasing"===n)for(l(0),a=1;a<r.length;a++)c(a);else for(l(r.length-1),a=r.length-2;a>=0;a--)c(a)}else if("increasing"===n){for(a=1;a<r.length;a++)r[a]+=r[a-1];"exclude"===i&&(r.unshift(0),r.pop())}else{for(a=r.length-2;a>=0;a--)r[a]+=r[a+1];"exclude"===i&&(r.push(0),r.shift())}}(m,A.direction,A.currentbin);var Q=Math.min(v.length,m.length),tt=[],te=0,tr=Q-1;for(i=0;i<Q;i++)if(m[i]){te=i;break}for(i=Q-1;i>=te;i--)if(m[i]){tr=i;break}for(i=te;i<=tr;i++)if(a(v[i])&&a(m[i])){var tn={p:v[i],s:m[i],b:0};A.enabled||(tn.pts=D[i],Z?tn.ph0=tn.ph1=D[i].length?S[D[i][0]]:v[i]:(n._computePh=!0,tn.ph0=W(I[i]),tn.ph1=W(I[i+1],!0))),tt.push(tn)}return 1===tt.length&&(tt[0].width1=l.tickIncrement(tt[0].p,M.size,!1,T)-tt[0].p),c(tt,n),o.isArrayOrTypedArray(n.selectedpoints)&&o.tagSelected(tt,n,J),tt},calcAllAutoBins:d}},73316:function(r){r.exports={eventDataKeys:["binNumber"]}},80536:function(r,n,i){var a=i(3400),o=i(79811),s=i(24040).traceIs,l=i(20011),c=i(31508).validateCornerradius,u=a.nestedProperty,f=i(71888).getAxisGroup,h=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],p=["x","y"];r.exports=function(r,n){var i,d,y,g,v,m,x,b=n._histogramBinOpts={},_=[],w={},T=[];function A(r,n){return a.coerce(i._input,i,i._module.attributes,r,n)}function k(r){return"v"===r.orientation?"x":"y"}function M(r,i,s){var l=r.uid+"__"+s;i||(i=l);var c=o.getFromTrace({_fullLayout:n},r,s).type,u=r[s+"calendar"]||"",f=b[i],h=!0;f&&(c===f.axType&&u===f.calendar?(h=!1,f.traces.push(r),f.dirs.push(s)):(i=l,c!==f.axType&&a.warn(["Attempted to group the bins of trace",r.index,"set on a","type:"+c,"axis","with bins on","type:"+f.axType,"axis."].join(" ")),u!==f.calendar&&a.warn(["Attempted to group the bins of trace",r.index,"set with a",u,"calendar","with bins",f.calendar?"on a "+f.calendar+" calendar":"w/o a set calendar"].join(" ")))),h&&(b[i]={traces:[r],dirs:[s],axType:c,calendar:r[s+"calendar"]||""}),r["_"+s+"bingroup"]=i}for(v=0;v<r.length;v++)if(s(i=r[v],"histogram")){if(_.push(i),delete i._xautoBinFinished,delete i._yautoBinFinished,"histogram"===i.type){var S=A("marker.cornerradius",n.barcornerradius);i.marker&&(i.marker.cornerradius=c(S))}s(i,"2dMap")||l(i._input,i,n,A)}var E=n._alignmentOpts||{};for(v=0;v<_.length;v++){if(i=_[v],y="",!s(i,"2dMap")){if(g=k(i),"group"===n.barmode&&i.alignmentgroup){var I=f(n,i[g+"axis"])+i.orientation;(E[I]||{})[i.alignmentgroup]&&(y=I)}y||"overlay"===n.barmode||(y=f(n,i.xaxis)+f(n,i.yaxis)+k(i))}y?(w[y]||(w[y]=[]),w[y].push(i)):T.push(i)}for(y in w)if(1!==(d=w[y]).length){var L=!1;for(d.length&&(i=d[0],L=A("bingroup")),y=L||y,v=0;v<d.length;v++){var C=(i=d[v])._input.bingroup;C&&C!==y&&a.warn(["Trace",i.index,"must match","within bingroup",y+".","Ignoring its bingroup:",C,"setting."].join(" ")),i.bingroup=y,M(i,y,k(i))}}else T.push(d[0]);for(v=0;v<T.length;v++){i=T[v];var O=A("bingroup");if(s(i,"2dMap"))for(x=0;x<2;x++){var D=A((g=p[x])+"bingroup",O?O+"__"+g:null);M(i,D,g)}else M(i,O,k(i))}for(y in b){var P=b[y];for(d=P.traces,m=0;m<h.length;m++){var B,R,z=h[m],F=z.name;if("nbins"!==F||!P.sizeFound){for(v=0;v<d.length;v++){if(i=d[v],g=P.dirs[v],B=z.aStr[g],void 0!==u(i._input,B).get()){P[F]=A(B),P[F+"Found"]=!0;break}(R=(i._autoBin||{})[g]||{})[F]&&u(i,B).set(R[F])}if("start"===F||"end"===F)for(;v<d.length;v++)(i=d[v])["_"+g+"bingroup"]&&A(B,(R=(i._autoBin||{})[g]||{})[F]);"nbins"!==F||P.sizeFound||P.nbinsFound||(i=d[0],P[F]=A(B))}}}}},6616:function(r,n,i){var a=i(24040),o=i(3400),s=i(76308),l=i(31508).handleText,c=i(55592),u=i(40196);r.exports=function(r,n,i,f){function h(i,a){return o.coerce(r,n,u,i,a)}var p=h("x"),d=h("y");h("cumulative.enabled")&&(h("cumulative.direction"),h("cumulative.currentbin")),h("text");var y=h("textposition");l(r,n,f,h,y,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat");var g=h("orientation",d&&!p?"h":"v"),v="v"===g?"x":"y",m=p&&d?Math.min(o.minRowLength(p)&&o.minRowLength(d)):o.minRowLength(n[v]||[]);if(m){n._length=m,a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],f),n["v"===g?"y":"x"]&&h("histfunc"),h("histnorm"),h("autobin"+v),c(r,n,h,i,f),o.coerceSelectionMarkerOpacity(n,h);var x=(n.marker.line||{}).color,b=a.getComponentMethod("errorbars","supplyDefaults");b(r,n,x||s.defaultLine,{axis:"y"}),b(r,n,x||s.defaultLine,{axis:"x",inherit:"y"}),h("zorder")}else n.visible=!1}},84980:function(r){r.exports=function(r,n,i,a,o){if(r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"zLabelVal"in n&&(r.z=n.zLabelVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),!(i.cumulative||{}).enabled){var s,l=Array.isArray(o)?a[0].pts[o[0]][o[1]]:a[o].pts;if(r.pointNumbers=l,r.binNumber=r.pointNumber,delete r.pointNumber,delete r.pointIndex,i._indexToPoints){s=[];for(var c=0;c<l.length;c++)s=s.concat(i._indexToPoints[l[c]])}else s=l;r.pointIndices=s}return r}},43339:function(r,n,i){var a=i(63400).hoverPoints,o=i(54460).hoverLabelText;r.exports=function(r,n,i,s,l){var c=a(r,n,i,s,l);if(c){var u=(r=c[0]).cd[r.index],f=r.cd[0].trace;if(!f.cumulative.enabled){var h="h"===f.orientation?"y":"x";r[h+"Label"]=o(r[h+"a"],[u.ph0,u.ph1],f[h+"hoverformat"])}return c}}},42600:function(r,n,i){r.exports={attributes:i(40196),layoutAttributes:i(39324),supplyDefaults:i(6616),crossTraceDefaults:i(80536),supplyLayoutDefaults:i(37156),calc:i(35852).calc,crossTraceCalc:i(96376).crossTraceCalc,plot:i(98184).plot,layerName:"barlayer",style:i(60100).style,styleOnSelect:i(60100).styleOnSelect,colorbar:i(5528),hoverPoints:i(43339),selectPoints:i(45784),eventData:i(84980),moduleType:"trace",name:"histogram",basePlotModule:i(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(r){r.exports={percent:function(r,n){for(var i=r.length,a=100/n,o=0;o<i;o++)r[o]*=a},probability:function(r,n){for(var i=r.length,a=0;a<i;a++)r[a]/=n},density:function(r,n,i,a){var o=r.length;a=a||1;for(var s=0;s<o;s++)r[s]*=i[s]*a},"probability density":function(r,n,i,a){var o=r.length;a&&(n/=a);for(var s=0;s<o;s++)r[s]*=i[s]/n}}},37008:function(r,n,i){var a=i(40196),o=i(11120),s=i(83328),l=i(45464),c=i(29736).axisHoverFormat,u=i(21776).Ks,f=i(21776).Gw,h=i(49084),p=i(92880).extendFlat;r.exports=p({x:a.x,y:a.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:o("x"),nbinsy:a.nbinsy,ybins:o("y"),autobinx:a.autobinx,autobiny:a.autobiny,bingroup:p({},a.bingroup,{}),xbingroup:p({},a.bingroup,{}),ybingroup:p({},a.bingroup,{}),xgap:s.xgap,ygap:s.ygap,zsmooth:s.zsmooth,xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z",1),hovertemplate:u({},{keys:"z"}),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:s.textfont,showlegend:p({},l.showlegend,{dflt:!1})},h("",{cLetter:"z",autoColorDflt:!1}))},55480:function(r,n,i){var a=i(3400),o=i(54460),s=i(16964),l=i(10648),c=i(2e3),u=i(67712),f=i(35852).calcAllAutoBins;function h(r,n,i,a){var o,s=Array(r);if(a)for(o=0;o<r;o++)s[o]=1/(n[o+1]-n[o]);else{var l=1/i;for(o=0;o<r;o++)s[o]=l}return s}function p(r,n){return{start:r(n.start),end:r(n.end),size:n.size}}function d(r,n,i,a,o,s){var l,c=r.length-1,f=Array(c),h=u(i,a,r,o,s);for(l=0;l<c;l++){var p=(n||[])[l];f[l]=void 0===p?[h(r[l]),h(r[l+1],!0)]:[p,p]}return f}r.exports=function(r,n){var i,u,y,g,v,m=o.getFromId(r,n.xaxis),x=o.getFromId(r,n.yaxis),b=n.xcalendar,_=n.ycalendar,w=function(r){return m.r2c(r,0,b)},T=function(r){return x.r2c(r,0,_)},A=f(r,n,m,"x"),k=A[0],M=A[1],S=f(r,n,x,"y"),E=S[0],I=S[1],L=n._length;M.length>L&&M.splice(L,M.length-L),I.length>L&&I.splice(L,I.length-L);var C=[],O=[],D=[],P="string"==typeof k.size,B="string"==typeof E.size,R=[],z=[],F=P?R:k,N=B?z:E,U=0,j=[],V=[],H=n.histnorm,q=n.histfunc,G=-1!==H.indexOf("density"),W="max"===q||"min"===q?null:0,Y=s.count,Z=l[H],X=!1,K=[],J=[],$="z"in n?n.z:"marker"in n&&Array.isArray(n.marker.color)?n.marker.color:"";$&&"count"!==q&&(X="avg"===q,Y=s[q]);var Q=k.size,tt=w(k.start),te=w(k.end)+(tt-o.tickIncrement(tt,Q,!1,b))/1e6;for(u=tt;u<te;u=o.tickIncrement(u,Q,!1,b))O.push(W),R.push(u),X&&D.push(0);R.push(u);var tr,tn=O.length,ti=(u-tt)/tn,ta=(tr=tt+ti/2,m.c2r(tr,0,b)),to=E.size,ts=T(E.start),tl=T(E.end)+(ts-o.tickIncrement(ts,to,!1,_))/1e6;for(u=ts;u<tl;u=o.tickIncrement(u,to,!1,_)){C.push(O.slice()),z.push(u);var tc=Array(tn);for(y=0;y<tn;y++)tc[y]=[];V.push(tc),X&&j.push(D.slice())}z.push(u);var tu=C.length,tf=(u-ts)/tu,th=(i=ts+tf/2,x.c2r(i,0,_));G&&(K=h(O.length,F,ti,P),J=h(C.length,N,tf,B)),P||"date"!==m.type||(F=p(w,F)),B||"date"!==x.type||(N=p(T,N));var tp=!0,td=!0,ty=Array(tn),tg=Array(tu),tv=1/0,tm=1/0,tx=1/0,tb=1/0;for(u=0;u<L;u++){var t_=M[u],tw=I[u];g=a.findBin(t_,F),v=a.findBin(tw,N),g>=0&&g<tn&&v>=0&&v<tu&&(U+=Y(g,u,C[v],$,j[v]),V[v][g].push(u),tp&&(void 0===ty[g]?ty[g]=t_:ty[g]!==t_&&(tp=!1)),td&&(void 0===tg[v]?tg[v]=tw:tg[v]!==tw&&(td=!1)),tv=Math.min(tv,t_-R[g]),tm=Math.min(tm,R[g+1]-t_),tx=Math.min(tx,tw-z[v]),tb=Math.min(tb,z[v+1]-tw))}if(X)for(v=0;v<tu;v++)U+=c(C[v],j[v]);if(Z)for(v=0;v<tu;v++)Z(C[v],U,K,J[v]);return{x:M,xRanges:d(R,tp&&ty,tv,tm,m,b),x0:ta,dx:ti,y:I,yRanges:d(z,td&&tg,tx,tb,x,_),y0:th,dy:tf,z:C,pts:V}}},99784:function(r,n,i){var a=i(3400),o=i(56408),s=i(82748),l=i(27260),c=i(39096),u=i(37008);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,u,i,o)}o(r,n,h,f),!1!==n.visible&&(s(r,n,h,f),l(r,n,f,h,{prefix:"",cLetter:"z"}),h("hovertemplate"),c(h,f),h("xhoverformat"),h("yhoverformat"))}},59576:function(r,n,i){var a=i(55512),o=i(54460).hoverLabelText;r.exports=function(r,n,i,s,l){var c=a(r,n,i,s,l);if(c){var u=(r=c[0]).index,f=u[0],h=u[1],p=r.cd[0],d=p.trace,y=p.xRanges[h],g=p.yRanges[f];return r.xLabel=o(r.xa,[y[0],y[1]],d.xhoverformat),r.yLabel=o(r.ya,[g[0],g[1]],d.yhoverformat),c}}},21536:function(r,n,i){r.exports={attributes:i(37008),supplyDefaults:i(99784),crossTraceDefaults:i(80536),calc:i(19512),plot:i(41420),layerName:"heatmaplayer",colorbar:i(96288),style:i(41648),hoverPoints:i(59576),eventData:i(84980),moduleType:"trace",name:"histogram2d",basePlotModule:i(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(r,n,i){var a=i(24040),o=i(3400);r.exports=function(r,n,i,s){var l=i("x"),c=i("y"),u=o.minRowLength(l),f=o.minRowLength(c);u&&f?(n._length=Math.min(u,f),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s),(i("z")||i("marker.color"))&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")):n.visible=!1}},81220:function(r,n,i){var a=i(37008),o=i(67104),s=i(49084),l=i(29736).axisHoverFormat,c=i(92880).extendFlat;r.exports=c({x:a.x,y:a.y,z:a.z,marker:a.marker,histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:a.xbins,nbinsy:a.nbinsy,ybins:a.ybins,autobinx:a.autobinx,autobiny:a.autobiny,bingroup:a.bingroup,xbingroup:a.xbingroup,ybingroup:a.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:c({},o.line.width,{dflt:.5}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:a.hovertemplate,texttemplate:o.texttemplate,textfont:o.textfont},s("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(r,n,i){var a=i(3400),o=i(56408),s=i(84952),l=i(97680),c=i(39096),u=i(81220);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,u,i,o)}o(r,n,h,f),!1!==n.visible&&(s(r,n,h,function(i){return a.coerce2(r,n,u,i)}),l(r,n,h,f),h("xhoverformat"),h("yhoverformat"),h("hovertemplate"),n.contours&&"heatmap"===n.contours.coloring&&c(h,f))}},65664:function(r,n,i){r.exports={attributes:i(81220),supplyDefaults:i(3704),crossTraceDefaults:i(80536),calc:i(20688),plot:i(23676).plot,layerName:"contourlayer",style:i(52440),colorbar:i(55296),hoverPoints:i(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:i(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(49084),l=i(86968).u,c=i(74996),u=i(424),f=i(40516),h=i(32984),p=i(92880).extendFlat,d=i(98192).c;r.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:f.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:p({colors:u.marker.colors,line:u.marker.line,pattern:d,editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),leaf:u.leaf,pathbar:f.pathbar,text:c.text,textinfo:u.textinfo,texttemplate:o({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),hovertext:c.hovertext,hoverinfo:u.hoverinfo,hovertemplate:a({},{keys:h.eventDataKeys}),textfont:c.textfont,insidetextfont:c.insidetextfont,outsidetextfont:f.outsidetextfont,textposition:f.textposition,sort:c.sort,root:u.root,domain:l({name:"icicle",trace:!0,editType:"calc"})}},59564:function(r,n,i){var a=i(7316);n.name="icicle",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},73876:function(r,n,i){var a=i(3776);n.r=function(r,n){return a.calc(r,n)},n.q=function(r){return a._runCrossTraceCalc("icicle",r)}},7045:function(r,n,i){var a=i(3400),o=i(97376),s=i(76308),l=i(86968).Q,c=i(31508).handleText,u=i(78048).TEXTPAD,f=i(74174).handleMarkerDefaults,h=i(8932),p=h.hasColorscale,d=h.handleDefaults;r.exports=function(r,n,i,h){function y(i,s){return a.coerce(r,n,o,i,s)}var g=y("labels"),v=y("parents");if(g&&g.length&&v&&v.length){var m=y("values");y(m&&m.length?"branchvalues":"count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var x=y("text");y("texttemplate"),n.texttemplate||y("textinfo",a.isArrayOrTypedArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var b=y("pathbar.visible");c(r,n,h,y,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition"),f(r,n,h,y);var _=n._hasColorscale=p(r,"marker","colors")||(r.marker||{}).coloraxis;_&&d(r,n,h,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",_?1:.7),n._hovered={marker:{line:{width:2,color:s.contrast(h.paper_bgcolor)}}},b&&(y("pathbar.thickness",n.pathbar.textfont.size+2*u),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),l(n,h,y),n._length=null}else n.visible=!1}},67880:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(72736),c=i(25132),u=i(47192).styleOne,f=i(32984),h=i(78176),p=i(45716),d=i(96488).formatSliceLabel;r.exports=function(r,n,i,y,g){var v=g.width,m=g.height,x=g.viewX,b=g.viewY,_=g.pathSlice,w=g.toMoveInsideSlice,T=g.strTransform,A=g.hasTransition,k=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,S=g.makeUpdateTextInterpolator,E=g.prevEntry,I=r._context.staticPlot,L=r._fullLayout,C=n[0].trace,O=-1!==C.textposition.indexOf("left"),D=-1!==C.textposition.indexOf("right"),P=-1!==C.textposition.indexOf("bottom"),B=c(i,[v,m],{flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1,orientation:C.tiling.orientation,pad:{inner:C.tiling.pad},maxDepth:C._maxDepth}).descendants(),R=1/0,z=-1/0;B.forEach(function(r){var n=r.depth;n>=C._maxDepth?(r.x0=r.x1=(r.x0+r.x1)/2,r.y0=r.y1=(r.y0+r.y1)/2):(R=Math.min(R,n),z=Math.max(z,n))}),y=y.data(B,h.getPtId),C._maxVisibleLayers=isFinite(z)?z-R+1:0,y.enter().append("g").classed("slice",!0),k(y,!1,{},[v,m],_),y.order();var F=null;if(A&&E){var N=h.getPtId(E);y.each(function(r){null===F&&h.getPtId(r)===N&&(F={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})})}var U=function(){return F||{x0:0,x1:v,y0:0,y1:m}},j=y;return A&&(j=j.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(c){c._x0=x(c.x0),c._x1=x(c.x1),c._y0=b(c.y0),c._y1=b(c.y1),c._hoverX=x(c.x1-C.tiling.pad),c._hoverY=b(P?c.y1-C.tiling.pad/2:c.y0+C.tiling.pad/2);var y=a.select(this),g=o.ensureSingle(y,"path","surface",function(r){r.style("pointer-events",I?"none":"all")});A?g.transition().attrTween("d",function(r){var n=M(r,!1,U(),[v,m],{orientation:C.tiling.orientation,flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1});return function(r){return _(n(r))}}):g.attr("d",_),y.call(p,i,r,n,{styleOne:u,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{isTransitioning:r._transitioning}),g.call(u,c,C,r,{hovered:!1}),c.x0===c.x1||c.y0===c.y1?c._text="":c._text=d(c,i,C,n,L)||"";var k=o.ensureSingle(y,"g","slicetext"),E=o.ensureSingle(k,"text","",function(r){r.attr("data-notex",1)}),B=o.ensureUniformFontSize(r,h.determineTextFont(C,c,L.font));E.text(c._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":O?"start":"middle").call(s.font,B).call(l.convertToTspans,r),c.textBB=s.bBox(E.node()),c.transform=w(c,{fontSize:B.size}),c.transform.fontSize=B.size,A?E.transition().attrTween("transform",function(r){var n=S(r,!1,U(),[v,m]);return function(r){return T(n(r))}}):E.attr("transform",T(c))}),F}},29044:function(r,n,i){r.exports={moduleType:"trace",name:"icicle",basePlotModule:i(59564),categories:[],animatable:!0,attributes:i(97376),layoutAttributes:i(90676),supplyDefaults:i(7045),supplyLayoutDefaults:i(4304),calc:i(73876).r,crossTraceCalc:i(73876).q,plot:i(38364),style:i(47192).style,colorbar:i(5528),meta:{}}},90676:function(r){r.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(r,n,i){var a=i(3400),o=i(90676);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("iciclecolorway",n.colorway),i("extendiciclecolors")}},25132:function(r,n,i){var a=i(74148),o=i(83024);r.exports=function(r,n,i){var s=i.flipX,l=i.flipY,c="h"===i.orientation,u=i.maxDepth,f=n[0],h=n[1];u&&(f=(r.height+1)*n[0]/Math.min(r.height+1,u),h=(r.height+1)*n[1]/Math.min(r.height+1,u));var p=a.partition().padding(i.pad.inner).size(c?[n[1],f]:[n[0],h])(r);return(c||s||l)&&o(p,n,{swapXY:c,flipX:s,flipY:l}),p}},38364:function(r,n,i){var a=i(95808),o=i(67880);r.exports=function(r,n,i,s){return a(r,n,i,s,{type:"icicle",drawDescendants:o})}},47192:function(r,n,i){var a=i(33428),o=i(76308),s=i(3400),l=i(82744).resizeText,c=i(60404);function u(r,n,i,a){var l=n.data.data,u=!n.children,f=l.i,h=s.castOption(i,f,"marker.line.color")||o.defaultLine,p=s.castOption(i,f,"marker.line.width")||0;r.call(c,n,i,a).style("stroke-width",p).call(o.stroke,h).style("opacity",u?i.leaf.opacity:null)}r.exports={style:function(r){var n=r._fullLayout._iciclelayer.selectAll(".trace");l(r,n,"icicle"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(u,n,o,r)})})},styleOne:u}},95188:function(r,n,i){for(var a=i(45464),o=i(52904).zorder,s=i(21776).Ks,l=i(92880).extendFlat,c=i(47797).colormodel,u=["rgb","rgba","rgba256","hsl","hsla"],f=[],h=[],p=0;p<u.length;p++){var d=c[u[p]];f.push("For the `"+u[p]+"` colormodel, it is ["+(d.zminDflt||d.min).join(", ")+"]."),h.push("For the `"+u[p]+"` colormodel, it is ["+(d.zmaxDflt||d.max).join(", ")+"].")}r.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:u,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},a.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:s({},{keys:["z","color","colormodel"]}),zorder:o,transforms:void 0})},93336:function(r,n,i){var a=i(3400),o=i(47797),s=i(38248),l=i(54460),c=i(3400).maxRowLength,u=i(18712).i;r.exports=function(r,n){if(n._hasZ)f=n.z.length,h=c(n.z);else if(n._hasSource){var i=u(n.source);f=i.height,h=i.width}var f,h,p,d=l.getFromId(r,n.xaxis||"x"),y=l.getFromId(r,n.yaxis||"y"),g=d.d2c(n.x0)-n.dx/2,v=y.d2c(n.y0)-n.dy/2,m=[g,g+h*n.dx],x=[v,v+f*n.dy];if(d&&"log"===d.type)for(p=0;p<h;p++)m.push(g+p*n.dx);if(y&&"log"===y.type)for(p=0;p<f;p++)x.push(v+p*n.dy);return n._extremes[d._id]=l.findExtremes(d,m),n._extremes[y._id]=l.findExtremes(y,x),n._scaler=function(r){var n=o.colormodel[r.colormodel],i=(n.colormodel||r.colormodel).length;r._sArray=[];for(var l=0;l<i;l++)n.min[l]!==r.zmin[l]||n.max[l]!==r.zmax[l]?r._sArray.push(function(r,n,i,o){return function(s){return a.constrain((s-r)*n,i,o)}}(r.zmin[l],(n.max[l]-n.min[l])/(r.zmax[l]-r.zmin[l]),n.min[l],n.max[l])):r._sArray.push(function(r,n){return function(i){return a.constrain(i,r,n)}}(n.min[l],n.max[l]));return function(n){for(var a=n.slice(0,i),o=0;o<i;o++){var l=a[o];if(!s(l))return!1;a[o]=r._sArray[o](l)}return a}}(n),[{x0:g,y0:v,z:n.z,w:h,h:f}]}},47797:function(r){r.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){var n=r.slice(0,3);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){var n=r.slice(0,4);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["°","%","%",""]}}}},13188:function(r,n,i){var a=i(3400),o=i(95188),s=i(47797),l=i(81792).IMAGE_URL_PREFIX;r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("source"),n.source&&!n.source.match(l)&&delete n.source,n._hasSource=!!n.source;var c,u=i("z");n._hasZ=!(void 0===u||!u.length||!u[0]||!u[0].length),n._hasZ||n._hasSource?(i("x0"),i("y0"),i("dx"),i("dy"),n._hasZ?(i("colormodel","rgb"),i("zmin",(c=s.colormodel[n.colormodel]).zminDflt||c.min),i("zmax",c.zmaxDflt||c.max)):n._hasSource&&(n.colormodel="rgba256",c=s.colormodel[n.colormodel],n.zmin=c.zminDflt,n.zmax=c.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),n._length=null,i("zorder")):n.visible=!1}},79972:function(r){r.exports=function(r,n){return"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r.color=n.color,r.colormodel=n.trace.colormodel,r.z||(r.z=n.color),r}},18712:function(r,n,i){var a=i(19480),o=i(81792).IMAGE_URL_PREFIX,s=i(33576).Buffer;n.i=function(r){return a(new s(r.replace(o,""),"base64"))}},24892:function(r,n,i){var a=i(93024),o=i(3400),s=o.isArrayOrTypedArray,l=i(47797);r.exports=function(r,n,i){var c=r.cd[0],u=c.trace,f=r.xa,h=r.ya;if(!(a.inbox(n-c.x0,n-(c.x0+c.w*u.dx),0)>0||a.inbox(i-c.y0,i-(c.y0+c.h*u.dy),0)>0)){var p,d=Math.floor((n-c.x0)/u.dx),y=Math.floor(Math.abs(i-c.y0)/u.dy);if(u._hasZ?p=c.z[y][d]:u._hasSource&&(p=u._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(d,y,1,1).data),p){var g,v=c.hi||u.hoverinfo;if(v){var m=v.split("+");-1!==m.indexOf("all")&&(m=["color"]),-1!==m.indexOf("color")&&(g=!0)}var x,b=l.colormodel[u.colormodel],_=b.colormodel||u.colormodel,w=_.length,T=u._scaler(p),A=b.suffix,k=[];(u.hovertemplate||g)&&(k.push("["+[T[0]+A[0],T[1]+A[1],T[2]+A[2]].join(", ")),4===w&&k.push(", "+T[3]+A[3]),k.push("]"),k=k.join(""),r.extraText=_.toUpperCase()+": "+k),s(u.hovertext)&&s(u.hovertext[y])?x=u.hovertext[y][d]:s(u.text)&&s(u.text[y])&&(x=u.text[y][d]);var M=h.c2p(c.y0+(y+.5)*u.dy),S=c.x0+(d+.5)*u.dx,E=c.y0+(y+.5)*u.dy,I="["+p.slice(0,u.colormodel.length).join(", ")+"]";return[o.extendFlat(r,{index:[y,d],x0:f.c2p(c.x0+d*u.dx),x1:f.c2p(c.x0+(d+1)*u.dx),y0:M,y1:M,color:T,xVal:S,xLabelVal:S,yVal:E,yLabelVal:E,zLabelVal:I,text:x,hovertemplateLabels:{zLabel:I,colorLabel:k,"color[0]Label":T[0]+A[0],"color[1]Label":T[1]+A[1],"color[2]Label":T[2]+A[2],"color[3]Label":T[3]+A[3]}})]}}}},48928:function(r,n,i){r.exports={attributes:i(95188),supplyDefaults:i(13188),calc:i(93336),plot:i(63715),style:i(28576),hoverPoints:i(24892),eventData:i(79972),moduleType:"trace",name:"image",basePlotModule:i(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(r,n,i){var a=i(33428),o=i(3400),s=o.strTranslate,l=i(9616),c=i(47797),u=i(9188),f=i(2264).STYLE;r.exports=function(r,n,i,h){var p=n.xaxis,d=n.yaxis,y=!r._context._exportedPlot&&u();o.makeTraceGroups(h,i,"im").each(function(n){var i=a.select(this),u=n[0],h=u.trace,g=("fast"===h.zsmooth||!1===h.zsmooth&&y)&&!h._hasZ&&h._hasSource&&"linear"===p.type&&"linear"===d.type;h._realImage=g;var v,m,x,b,_,w,T=u.z,A=u.x0,k=u.y0,M=u.w,S=u.h,E=h.dx,I=h.dy;for(w=0;void 0===v&&w<M;)v=p.c2p(A+w*E),w++;for(w=M;void 0===m&&w>0;)m=p.c2p(A+w*E),w--;for(w=0;void 0===b&&w<S;)b=d.c2p(k+w*I),w++;for(w=S;void 0===_&&w>0;)_=d.c2p(k+w*I),w--;m<v&&(x=m,m=v,v=x),_<b&&(x=b,b=_,_=x),g||(v=Math.max(-.5*p._length,v),m=Math.min(1.5*p._length,m),b=Math.max(-.5*d._length,b),_=Math.min(1.5*d._length,_));var L=Math.round(m-v),C=Math.round(_-b);if(L<=0||C<=0)i.selectAll("image").data([]).exit().remove();else{var O=i.selectAll("image").data([n]);O.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),O.exit().remove();var D=!1===h.zsmooth?f:"";if(g){var P=o.simpleMap(p.range,p.r2l),B=o.simpleMap(d.range,d.r2l),R=P[1]<P[0],z=B[1]>B[0];if(R||z){var F=v+L/2,N=b+C/2;D+="transform:"+s(F+"px",N+"px")+"scale("+(R?-1:1)+","+(z?-1:1)+")"+s(-F+"px",-N+"px")+";"}}O.attr("style",D);var U=new Promise(function(r){if(h._hasZ)r();else if(h._hasSource){if(h._canvas&&h._canvas.el.width===M&&h._canvas.el.height===S&&h._canvas.source===h.source)r();else{var n=document.createElement("canvas");n.width=M,n.height=S;var i=n.getContext("2d",{willReadFrequently:!0});h._image=h._image||new Image;var a=h._image;a.onload=function(){i.drawImage(a,0,0),h._canvas={el:n,source:h.source},r()},a.setAttribute("src",h.source)}}}).then(function(){var r;if(h._hasZ)r=j(function(r,n){var i=T[n][r];return o.isTypedArray(i)&&(i=Array.from(i)),i}).toDataURL("image/png");else if(h._hasSource){if(g)r=h.source;else{var n=h._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,M,S).data;r=j(function(r,i){var a=4*(i*M+r);return[n[a],n[a+1],n[a+2],n[a+3]]}).toDataURL("image/png")}}O.attr({"xlink:href":r,height:C,width:L,x:v,y:b})});r._promises.push(U)}function j(r){var n=document.createElement("canvas");n.width=L,n.height=C;var i,a=n.getContext("2d",{willReadFrequently:!0}),s=function(r){return o.constrain(Math.round(p.c2p(A+r*E)-v),0,L)},l=function(r){return o.constrain(Math.round(d.c2p(k+r*I)-b),0,C)},f=c.colormodel[h.colormodel],y=f.colormodel||h.colormodel,g=f.fmt;for(w=0;w<u.w;w++){var m=s(w),x=s(w+1);if(x!==m&&!isNaN(x)&&!isNaN(m))for(var _=0;_<u.h;_++){var T=l(_),M=l(_+1);M===T||isNaN(M)||isNaN(T)||!r(w,_)||(i=h._scaler(r(w,_)),a.fillStyle=i?y+"("+g(i).join(",")+")":"rgba(0,0,0,0)",a.fillRect(m,T,x-m,M-T))}}return n}})}},28576:function(r,n,i){var a=i(33428);r.exports=function(r){a.select(r).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}},89864:function(r,n,i){var a=i(92880).extendFlat,o=i(92880).extendDeep,s=i(67824).overrideAll,l=i(25376),c=i(22548),u=i(86968).u,f=i(94724),h=i(31780).templatedArray,p=i(48164),d=i(29736).descriptionOnlyNumbers,y=l({editType:"plot",colorEditType:"plot"}),g={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:c.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},v={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},m=h("step",o({},g,{range:v}));r.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:u({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:a({},y,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:a({},y,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:p.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:p.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:a({},y,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:o({},g,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:s({range:v,visible:a({},f.visible,{dflt:!0}),tickmode:f.minor.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:a({},f.ticks,{dflt:"outside"}),ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,labelalias:f.labelalias,tickfont:l({}),tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,separatethousands:f.separatethousands,exponentformat:f.exponentformat,minexponent:f.minexponent,showexponent:f.showexponent,editType:"plot"},"plot"),steps:m,threshold:{line:{color:a({},g.line.color,{}),width:a({},g.line.width,{dflt:1}),editType:"plot"},thickness:a({},g.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(r,n,i){var a=i(7316);n.name="indicator",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},79136:function(r){r.exports={calc:function(r,n){var i=[],a=n.value;"number"!=typeof n._lastValue&&(n._lastValue=n.value);var o=n._lastValue,s=o;return n._hasDelta&&"number"==typeof n.delta.reference&&(s=n.delta.reference),i[0]={y:a,lastY:o,delta:a-s,relativeDelta:(a-s)/s},i}}},12096:function(r){r.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(r,n,i){var a=i(3400),o=i(89864),s=i(86968).Q,l=i(31780),c=i(51272),u=i(12096),f=i(26332),h=i(25404),p=i(95936),d=i(42568);function y(r,n){function i(i,s){return a.coerce(r,n,o.gauge.steps,i,s)}i("color"),i("line.color"),i("line.width"),i("range"),i("thickness")}r.exports={supplyDefaults:function(r,n,i,g){function v(i,s){return a.coerce(r,n,o,i,s)}s(n,g,v),v("mode"),n._hasNumber=-1!==n.mode.indexOf("number"),n._hasDelta=-1!==n.mode.indexOf("delta"),n._hasGauge=-1!==n.mode.indexOf("gauge");var m=v("value");n._range=[0,"number"==typeof m?1.5*m:1];var x,b,_=[,,];if(n._hasNumber){v("number.valueformat");var w=a.extendFlat({},g.font);w.size=void 0,a.coerceFont(v,"number.font",w),void 0===n.number.font.size&&(n.number.font.size=u.defaultNumberFontSize,_[0]=!0),v("number.prefix"),v("number.suffix"),x=n.number.font.size}if(n._hasDelta){var T=a.extendFlat({},g.font);T.size=void 0,a.coerceFont(v,"delta.font",T),void 0===n.delta.font.size&&(n.delta.font.size=(n._hasNumber?.5:1)*(x||u.defaultNumberFontSize),_[1]=!0),v("delta.reference",n.value),v("delta.relative"),v("delta.valueformat",n.delta.relative?"2%":""),v("delta.increasing.symbol"),v("delta.increasing.color"),v("delta.decreasing.symbol"),v("delta.decreasing.color"),v("delta.position"),v("delta.prefix"),v("delta.suffix"),b=n.delta.font.size}n._scaleNumbers=(!n._hasNumber||_[0])&&(!n._hasDelta||_[1])||!1;var A,k,M,S,E=a.extendFlat({},g.font);function I(r,n){return a.coerce(A,k,o.gauge,r,n)}function L(r,n){return a.coerce(M,S,o.gauge.axis,r,n)}if(E.size=.25*(x||b||u.defaultNumberFontSize),a.coerceFont(v,"title.font",E),v("title.text"),n._hasGauge){(A=r.gauge)||(A={}),k=l.newContainer(n,"gauge"),I("shape"),(n._isBullet="bullet"===n.gauge.shape)||v("title.align","center"),(n._isAngular="angular"===n.gauge.shape)||v("align","center"),I("bgcolor",g.paper_bgcolor),I("borderwidth"),I("bordercolor"),I("bar.color"),I("bar.line.color"),I("bar.line.width"),I("bar.thickness",u.valueThickness*("bullet"===n.gauge.shape?.5:1)),c(A,k,{name:"steps",handleItemDefaults:y}),I("threshold.value"),I("threshold.thickness"),I("threshold.line.width"),I("threshold.line.color"),M={},A&&(M=A.axis||{}),S=l.newContainer(k,"axis"),L("visible"),n._range=L("range",n._range);var C={font:g.font,noAutotickangles:!0,outerTicks:!0,noTicklabelshift:!0,noTicklabelstandoff:!0};f(M,S,L,"linear"),d(M,S,L,"linear",C),p(M,S,L,"linear",C),h(M,S,L,C)}else v("title.align","center"),v("align","center"),n._isAngular=n._isBullet=!1;n._length=null}}},43480:function(r,n,i){r.exports={moduleType:"trace",name:"indicator",basePlotModule:i(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:i(89864),supplyDefaults:i(20424).supplyDefaults,calc:i(79136).calc,plot:i(97864),meta:{}}},97864:function(r,n,i){var a=i(33428),o=i(67756).qy,s=i(67756).Gz,l=i(3400),c=l.strScale,u=l.strTranslate,f=l.rad2deg,h=i(84284).MID_SHIFT,p=i(43616),d=i(12096),y=i(72736),g=i(54460),v=i(28336),m=i(37668),x=i(94724),b=i(76308),_={left:"start",center:"middle",right:"end"},w={left:0,center:.5,right:1},T=/[yzafpnµmkMGTPEZY]/;function A(r){return r&&r.duration>0}function k(r){r.each(function(r){b.stroke(a.select(this),r.line.color)}).each(function(r){b.fill(a.select(this),r.color)}).style("stroke-width",function(r){return r.line.width})}function M(r,n,i){var a=r._fullLayout,o=l.extendFlat({type:"linear",ticks:"outside",range:i,showline:!0},n),s={type:"linear",_id:"x"+n._id},c={letter:"x",font:a.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function u(r,n){return l.coerce(o,s,x,r,n)}return v(o,s,u,c,a),m(o,s,u,c),s}function S(r,n,i){return[Math.min(n/r.width,i/r.height),r,n+"x"+i]}function E(r,n,i,o){var s=document.createElementNS("http://www.w3.org/2000/svg","text"),l=a.select(s);return l.text(r).attr("x",0).attr("y",0).attr("text-anchor",i).attr("data-unformatted",r).call(y.convertToTspans,o).call(p.font,n),p.bBox(l.node())}function I(r,n,i,a,o,s){var c="_cache"+n;r[c]&&r[c].key===o||(r[c]={key:o,value:i});var u=l.aggNums(s,null,[r[c].value,a],2);return r[c].value=u,u}r.exports=function(r,n,i,v){var m,x=r._fullLayout;A(i)&&v&&(m=v()),l.makeTraceGroups(x._indicatorlayer,n,"trace").each(function(n){var v,L,C,O,D,P=n[0].trace,B=a.select(this),R=P._hasGauge,z=P._isAngular,F=P._isBullet,N=P.domain,U={w:x._size.w*(N.x[1]-N.x[0]),h:x._size.h*(N.y[1]-N.y[0]),l:x._size.l+x._size.w*N.x[0],r:x._size.r+x._size.w*(1-N.x[1]),t:x._size.t+x._size.h*(1-N.y[1]),b:x._size.b+x._size.h*N.y[0]},j=U.l+U.w/2,V=U.t+U.h/2,H=Math.min(U.w/2,U.h),q=d.innerRadius*H,G=P.align||"center";if(L=V,R){if(z&&(v=j,L=V+H/2,C=function(r){var n;return[(n=.9*q)/Math.sqrt(r.width/2*(r.width/2)+r.height*r.height),r,n]}),F){var W=d.bulletPadding,Y=1-d.bulletNumberDomainSize+W;v=U.l+(Y+(1-Y)*w[G])*U.w,C=function(r){return S(r,(d.bulletNumberDomainSize-W)*U.w,U.h)}}}else v=U.l+w[G]*U.w,C=function(r){return S(r,U.w,U.h)};(function(r,n,i,o){var f,h,d,v=i[0].trace,m=o.numbersX,x=o.numbersY,k=v.align||"center",S=_[k],L=o.transitionOpts,C=o.onComplete,O=l.ensureSingle(n,"g","numbers"),D=[];v._hasNumber&&D.push("number"),v._hasDelta&&(D.push("delta"),"left"===v.delta.position&&D.reverse());var P=O.selectAll("text").data(D);function B(n,i,a,o){if(!n.match("s")||a>=0==o>=0||i(a).slice(-1).match(T)||i(o).slice(-1).match(T))return i;var s=M(r,{tickformat:n.slice().replace("s","f").replace(/\d+/,function(r){return parseInt(r)-1})});return function(r){return 1>Math.abs(r)?g.tickText(s,r).text:i(r)}}P.enter().append("text"),P.attr("text-anchor",function(){return S}).attr("class",function(r){return r}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),P.exit().remove();var R,z=v.mode+v.align;if(v._hasDelta&&(R=function(){var n=M(r,{tickformat:v.delta.valueformat},v._range);n.setScale(),g.prepTicks(n);var o=function(r){return g.tickText(n,r).text},l=v.delta.suffix,c=v.delta.prefix,u=function(r){return v.delta.relative?r.relativeDelta:r.delta},f=function(r,n){return 0===r||"number"!=typeof r||isNaN(r)?"-":(r>0?v.delta.increasing.symbol:v.delta.decreasing.symbol)+c+n(r)+l},d=function(r){return r.delta>=0?v.delta.increasing.color:v.delta.decreasing.color};void 0===v._deltaLastValue&&(v._deltaLastValue=u(i[0]));var m=O.select("text.delta");function x(){m.text(f(u(i[0]),o)).call(b.fill,d(i[0])).call(y.convertToTspans,r)}return m.call(p.font,v.delta.font).call(b.fill,d({delta:v._deltaLastValue})),A(L)?m.transition().duration(L.duration).ease(L.easing).tween("text",function(){var r=a.select(this),n=u(i[0]),l=v._deltaLastValue,c=B(v.delta.valueformat,o,l,n),h=s(l,n);return v._deltaLastValue=n,function(n){r.text(f(h(n),c)),r.call(b.fill,d({delta:h(n)}))}}).each("end",function(){x(),C&&C()}).each("interrupt",function(){x(),C&&C()}):x(),h=E(f(u(i[0]),o),v.delta.font,S,r),m}(),z+=v.delta.position+v.delta.font.size+v.delta.font.family+v.delta.valueformat+(v.delta.increasing.symbol+v.delta.decreasing.symbol),d=h),v._hasNumber&&(function(){var n=M(r,{tickformat:v.number.valueformat},v._range);n.setScale(),g.prepTicks(n);var o=function(r){return g.tickText(n,r).text},l=v.number.suffix,c=v.number.prefix,u=O.select("text.number");function h(){var n="number"==typeof i[0].y?c+o(i[0].y)+l:"-";u.text(n).call(p.font,v.number.font).call(y.convertToTspans,r)}A(L)?u.transition().duration(L.duration).ease(L.easing).each("end",function(){h(),C&&C()}).each("interrupt",function(){h(),C&&C()}).attrTween("text",function(){var r=a.select(this),n=s(i[0].lastY,i[0].y);v._lastValue=i[0].y;var u=B(v.number.valueformat,o,i[0].lastY,i[0].y);return function(i){r.text(c+u(n(i))+l)}}):h(),f=E(c+o(i[0].y)+l,v.number.font,S,r)}(),z+=v.number.font.size+v.number.font.family+v.number.valueformat+v.number.suffix+v.number.prefix,d=f),v._hasDelta&&v._hasNumber){var F,N,U=[(f.left+f.right)/2,(f.top+f.bottom)/2],j=[(h.left+h.right)/2,(h.top+h.bottom)/2],V=.75*v.delta.font.size;"left"===v.delta.position&&(F=I(v,"deltaPos",0,-1*(f.width*w[v.align]+h.width*(1-w[v.align])+V),z,Math.min),N=U[1]-j[1],d={width:f.width+h.width+V,height:Math.max(f.height,h.height),left:h.left+F,right:f.right,top:Math.min(f.top,h.top+N),bottom:Math.max(f.bottom,h.bottom+N)}),"right"===v.delta.position&&(F=I(v,"deltaPos",0,f.width*(1-w[v.align])+h.width*w[v.align]+V,z,Math.max),N=U[1]-j[1],d={width:f.width+h.width+V,height:Math.max(f.height,h.height),left:f.left,right:h.right+F,top:Math.min(f.top,h.top+N),bottom:Math.max(f.bottom,h.bottom+N)}),"bottom"===v.delta.position&&(F=null,N=h.height,d={width:Math.max(f.width,h.width),height:f.height+h.height,left:Math.min(f.left,h.left),right:Math.max(f.right,h.right),top:f.bottom-f.height,bottom:f.bottom+h.height}),"top"===v.delta.position&&(F=null,N=f.top,d={width:Math.max(f.width,h.width),height:f.height+h.height,left:Math.min(f.left,h.left),right:Math.max(f.right,h.right),top:f.bottom-f.height-h.height,bottom:f.bottom}),R.attr({dx:F,dy:N})}(v._hasNumber||v._hasDelta)&&O.attr("transform",function(){var r=o.numbersScaler(d);z+=r[2];var n,i=I(v,"numbersScale",1,r[0],z,Math.min);v._scaleNumbers||(i=1),n=v._isAngular?x-i*d.bottom:x-i*(d.top+d.bottom)/2,v._numbersTop=i*d.top+n;var a=d[k];"center"===k&&(a=(d.left+d.right)/2);var s=m-i*a;return u(s=I(v,"numbersTranslate",0,s,z,Math.max),n)+c(i)})})(r,B,n,{numbersX:v,numbersY:L,numbersScaler:C,transitionOpts:i,onComplete:m}),R&&(O={range:P.gauge.axis.range,color:P.gauge.bgcolor,line:{color:P.gauge.bordercolor,width:0},thickness:1},D={range:P.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:P.gauge.bordercolor,width:P.gauge.borderwidth},thickness:1});var Z=B.selectAll("g.angular").data(z?n:[]);Z.exit().remove();var X=B.selectAll("g.angularaxis").data(z?n:[]);X.exit().remove(),z&&function(r,n,i,s){var l,c,p,d,y=i[0].trace,v=s.size,m=s.radius,x=s.innerRadius,b=s.gaugeBg,_=s.gaugeOutline,w=[v.l+v.w/2,v.t+v.h/2+m/2],T=s.gauge,S=s.layer,E=s.transitionOpts,I=s.onComplete,L=Math.PI/2;function C(r){var n=y.gauge.axis.range[0],i=(r-n)/(y.gauge.axis.range[1]-n)*Math.PI-L;return i<-L?-L:i>L?L:i}function O(r){return a.svg.arc().innerRadius((x+m)/2-r/2*(m-x)).outerRadius((x+m)/2+r/2*(m-x)).startAngle(-L)}function D(r){r.attr("d",function(r){return O(r.thickness).startAngle(C(r.range[0])).endAngle(C(r.range[1]))()})}T.enter().append("g").classed("angular",!0),T.attr("transform",u(w[0],w[1])),S.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),S.selectAll("g.xangularaxistick,path,text").remove(),(l=M(r,y.gauge.axis)).type="linear",l.range=y.gauge.axis.range,l._id="xangularaxis",l.ticklabeloverflow="allow",l.setScale();var P=function(r){return(l.range[0]-r.x)/(l.range[1]-l.range[0])*Math.PI+Math.PI},B={},R=g.makeLabelFns(l,0).labelStandoff;B.xFn=function(r){return Math.cos(P(r))*R},B.yFn=function(r){var n=P(r),i=Math.sin(n)>0?.2:1;return-Math.sin(n)*(R+r.fontSize*i)+Math.abs(Math.cos(n))*(r.fontSize*h)},B.anchorFn=function(r){var n=Math.cos(P(r));return .1>Math.abs(n)?"middle":n>0?"start":"end"},B.heightFn=function(r,n,i){return -.5*(1+Math.sin(P(r)))*i};var z=function(r){return u(w[0]+m*Math.cos(r),w[1]-m*Math.sin(r))};if(p=function(r){return z(P(r))},c=g.calcTicks(l),d=g.getTickSigns(l)[2],l.visible){d="inside"===l.ticks?-1:1;var F=(l.linewidth||1)/2;g.drawTicks(r,l,{vals:c,layer:S,path:"M"+d*F+",0h"+d*l.ticklen,transFn:function(r){var n=P(r);return z(n)+"rotate("+-f(n)+")"}}),g.drawLabels(r,l,{vals:c,layer:S,transFn:p,labelFns:B})}var N=[b].concat(y.gauge.steps),U=T.selectAll("g.bg-arc").data(N);U.enter().append("g").classed("bg-arc",!0).append("path"),U.select("path").call(D).call(k),U.exit().remove();var j=O(y.gauge.bar.thickness),V=T.selectAll("g.value-arc").data([y.gauge.bar]);V.enter().append("g").classed("value-arc",!0).append("path");var H,q,G=V.select("path");A(E)?(G.transition().duration(E.duration).ease(E.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()}).attrTween("d",(H=C(i[0].lastY),q=C(i[0].y),function(){var r=o(H,q);return function(n){return j.endAngle(r(n))()}})),y._lastValue=i[0].y):G.attr("d","number"==typeof i[0].y?j.endAngle(C(i[0].y)):"M0,0Z"),G.call(k),V.exit().remove(),N=[];var W=y.gauge.threshold.value;(W||0===W)&&N.push({range:[W,W],color:y.gauge.threshold.color,line:{color:y.gauge.threshold.line.color,width:y.gauge.threshold.line.width},thickness:y.gauge.threshold.thickness});var Y=T.selectAll("g.threshold-arc").data(N);Y.enter().append("g").classed("threshold-arc",!0).append("path"),Y.select("path").call(D).call(k),Y.exit().remove();var Z=T.selectAll("g.gauge-outline").data([_]);Z.enter().append("g").classed("gauge-outline",!0).append("path"),Z.select("path").call(D).call(k),Z.exit().remove()}(r,0,n,{radius:H,innerRadius:q,gauge:Z,layer:X,size:U,gaugeBg:O,gaugeOutline:D,transitionOpts:i,onComplete:m});var K=B.selectAll("g.bullet").data(F?n:[]);K.exit().remove();var J=B.selectAll("g.bulletaxis").data(F?n:[]);J.exit().remove(),F&&function(r,n,i,a){var o,s,l,c,f,h=i[0].trace,p=a.gauge,y=a.layer,v=a.gaugeBg,m=a.gaugeOutline,x=a.size,_=h.domain,w=a.transitionOpts,T=a.onComplete;p.enter().append("g").classed("bullet",!0),p.attr("transform",u(x.l,x.t)),y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),y.selectAll("g.xbulletaxistick,path,text").remove();var S=x.h,E=h.gauge.bar.thickness*S,I=_.x[0],L=_.x[0]+(_.x[1]-_.x[0])*(h._hasNumber||h._hasDelta?1-d.bulletNumberDomainSize:1);function C(r){r.attr("width",function(r){return Math.max(0,o.c2p(r.range[1])-o.c2p(r.range[0]))}).attr("x",function(r){return o.c2p(r.range[0])}).attr("y",function(r){return .5*(1-r.thickness)*S}).attr("height",function(r){return r.thickness*S})}(o=M(r,h.gauge.axis))._id="xbulletaxis",o.domain=[I,L],o.setScale(),s=g.calcTicks(o),l=g.makeTransTickFn(o),c=g.getTickSigns(o)[2],f=x.t+x.h,o.visible&&(g.drawTicks(r,o,{vals:"inside"===o.ticks?g.clipEnds(o,s):s,layer:y,path:g.makeTickPath(o,f,c),transFn:l}),g.drawLabels(r,o,{vals:s,layer:y,transFn:l,labelFns:g.makeLabelFns(o,f)}));var O=[v].concat(h.gauge.steps),D=p.selectAll("g.bg-bullet").data(O);D.enter().append("g").classed("bg-bullet",!0).append("rect"),D.select("rect").call(C).call(k),D.exit().remove();var P=p.selectAll("g.value-bullet").data([h.gauge.bar]);P.enter().append("g").classed("value-bullet",!0).append("rect"),P.select("rect").attr("height",E).attr("y",(S-E)/2).call(k),A(w)?P.select("rect").transition().duration(w.duration).ease(w.easing).each("end",function(){T&&T()}).each("interrupt",function(){T&&T()}).attr("width",Math.max(0,o.c2p(Math.min(h.gauge.axis.range[1],i[0].y)))):P.select("rect").attr("width","number"==typeof i[0].y?Math.max(0,o.c2p(Math.min(h.gauge.axis.range[1],i[0].y))):0),P.exit().remove();var B=i.filter(function(){return h.gauge.threshold.value||0===h.gauge.threshold.value}),R=p.selectAll("g.threshold-bullet").data(B);R.enter().append("g").classed("threshold-bullet",!0).append("line"),R.select("line").attr("x1",o.c2p(h.gauge.threshold.value)).attr("x2",o.c2p(h.gauge.threshold.value)).attr("y1",(1-h.gauge.threshold.thickness)/2*S).attr("y2",(1-(1-h.gauge.threshold.thickness)/2)*S).call(b.stroke,h.gauge.threshold.line.color).style("stroke-width",h.gauge.threshold.line.width),R.exit().remove();var z=p.selectAll("g.gauge-outline").data([m]);z.enter().append("g").classed("gauge-outline",!0).append("rect"),z.select("rect").call(C).call(k),z.exit().remove()}(r,0,n,{gauge:K,layer:J,size:U,gaugeBg:O,gaugeOutline:D,transitionOpts:i,onComplete:m});var $=B.selectAll("text.title").data(n);$.exit().remove(),$.enter().append("text").classed("title",!0),$.attr("text-anchor",function(){return F?_.right:_[P.title.align]}).text(P.title.text).call(p.font,P.title.font).call(y.convertToTspans,r),$.attr("transform",function(){var r,n=U.l+U.w*w[P.title.align],i=d.titlePadding,a=p.bBox($.node());return R?(z&&(r=P.gauge.axis.visible?p.bBox(X.node()).top-i-a.bottom:U.t+U.h/2-H/2-a.bottom-i),F&&(r=L-(a.top+a.bottom)/2,n=U.l-d.bulletPadding*U.w)):r=P._numbersTop-i-a.bottom,u(n,r)})})}},50048:function(r,n,i){var a=i(49084),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(52948),c=i(45464),u=i(92880).extendFlat,f=i(67824).overrideAll,h=r.exports=f(u({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:s(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),valuehoverformat:o("value",1),showlegend:u({},c.showlegend,{dflt:!1})},a("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:u({},c.hoverinfo)}),"calc","nested");h.flatshading.dflt=!0,h.lighting.facenormalsepsilon.dflt=0,h.x.editType=h.y.editType=h.z.editType=h.value.editType="calc+clearAxisTypes",h.transforms=void 0},62624:function(r,n,i){var a=i(47128),o=i(3832).processGrid,s=i(3832).filter;r.exports=function(r,n){n._len=Math.min(n.x.length,n.y.length,n.z.length,n.value.length),n._x=s(n.x,n._len),n._y=s(n.y,n._len),n._z=s(n.z,n._len),n._value=s(n.value,n._len);var i=o(n);n._gridFill=i.fill,n._Xs=i.Xs,n._Ys=i.Ys,n._Zs=i.Zs,n._len=i.len;for(var l=1/0,c=-1/0,u=0;u<n._len;u++){var f=n._value[u];l=Math.min(l,f),c=Math.max(c,f)}n._minValues=l,n._maxValues=c,n._vMin=void 0===n.isomin||null===n.isomin?l:n.isomin,n._vMax=void 0===n.isomax||null===n.isomax?c:n.isomax,a(r,n,{vals:[n._vMin,n._vMax],containerStr:"",cLetter:"c"})}},31460:function(r,n,i){var a=i(67792).gl_mesh3d,o=i(33040).parseColorScale,s=i(3400).isArrayOrTypedArray,l=i(43080),c=i(8932).extractOpts,u=i(52094),f=function(r,n){for(var i=n.length-1;i>0;i--){var a=Math.min(n[i],n[i-1]),o=Math.max(n[i],n[i-1]);if(o>a&&a<r&&r<=o)return{id:i,distRatio:(o-r)/(o-a)}}return{id:0,distRatio:0}};function h(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var p=h.prototype;p.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshX[n],a=this.data._meshY[n],o=this.data._meshZ[n],l=this.data._Ys.length,c=this.data._Zs.length,u=f(i,this.data._Xs).id,h=f(a,this.data._Ys).id,p=f(o,this.data._Zs).id,d=r.index=p+c*h+c*l*u;r.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var y=this.data.hovertext||this.data.text;return s(y)&&void 0!==y[d]?r.textLabel=y[d]:y&&(r.textLabel=y),!0}},p.update=function(r){var n=this.scene,i=n.fullSceneLayout;function a(r,n,i,a){return n.map(function(n){return r.d2l(n,0,a)*i})}this.data=y(r);var s={positions:u(a(i.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(i.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(i.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:u(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},f=c(r);s.vertexIntensity=r._meshIntensity,s.vertexIntensityBounds=[f.min,f.max],s.colormap=o(r),this.mesh.update(s)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var d=["xyz","xzy","yxz","yzx","zxy","zyx"];function y(r){r._meshI=[],r._meshJ=[],r._meshK=[];var n,i,a,o,s,l,c,u=r.surface.show,h=r.spaceframe.show,p=r.surface.fill,y=r.spaceframe.fill,g=!1,v=!1,m=0,x=r._Xs,b=r._Ys,_=r._Zs,w=x.length,T=b.length,A=_.length,k=d.indexOf(r._gridFill.replace(/-/g,"").replace(/\+/g,"")),M=function(r,n,i){switch(k){case 5:return i+A*n+A*T*r;case 4:return i+A*r+A*w*n;case 3:return n+T*i+T*A*r;case 2:return n+T*r+T*w*i;case 1:return r+w*i+w*A*n;default:return r+w*n+w*T*i}},S=r._minValues,E=r._maxValues,I=r._vMin,L=r._vMax;function C(){a=[],o=[],s=[],l=[],i=n=0}function O(r,i,c,u){return a.push(r),o.push(i),s.push(c),l.push(u),++n-1}function D(r,n,i){for(var a=[],o=0;o<r.length;o++)a[o]=r[o]*(1-i)+i*n[o];return a}function P(r,n){return"all"===r||null===r||r.indexOf(n)>-1}function B(u,f,h){i=n;var p,d,y,g=[f],v=[h];if(c>=1)g=[f],v=[h];else if(c>0){var x,b,_,w,T,A,k,M,S,E,I,L,C,P=(x=f,b=h,M=D(A=function(r,n,i){for(var a=[],o=0;o<r.length;o++)a[o]=(r[o]+n[o]+i[o])/3;return a}(_=x[0],w=x[1],T=x[2]),_,k=Math.sqrt(1-c)),S=D(A,w,k),E=D(A,T,k),{xyzv:[[_,w,S],[S,M,_],[w,T,E],[E,S,w],[T,_,M],[M,E,T]],abc:[[I=b[0],L=b[1],-1],[-1,-1,I],[L,C=b[2],-1],[-1,-1,L],[C,I,-1],[-1,-1,C]]});g=P.xyzv,v=P.abc}for(var B=0;B<g.length;B++){f=g[B],h=v[B];for(var R=[],z=0;z<3;z++){var F=f[z][0],N=f[z][1],U=f[z][2],j=f[z][3],V=h[z]>-1?h[z]:function(r,n,c){for(var u=l.length,f=i;f<u;f++)if(r===a[f]&&n===o[f]&&c===s[f])return f;return -1}(F,N,U);R[z]=V>-1?V:O(F,N,U,null===u?j:u)}p=R[0],d=R[1],y=R[2],r._meshI.push(p),r._meshJ.push(d),r._meshK.push(y),++m}}function R(r,n,i,a){var o=r[3];o<i&&(o=i),o>a&&(o=a);for(var s=(r[3]-o)/(r[3]-n[3]+1e-9),l=[],c=0;c<4;c++)l[c]=(1-s)*r[c]+s*n[c];return l}function z(r){var n=.001*(L-I);return r>=I-n&&r<=L+n}function F(n){for(var i=[],a=0;a<4;a++){var o=n[a];i.push([r._x[o],r._y[o],r._z[o],r._value[o]])}return i}function N(r,n,i,a,o,s){s||(s=1),i=[-1,-1,-1];var l,c,u,f=!1,h=[(l=n[0][3])>=a&&l<=o,(c=n[1][3])>=a&&c<=o,(u=n[2][3])>=a&&u<=o];if(!h[0]&&!h[1]&&!h[2])return!1;var p=function(r,n,i){return z(n[0][3])&&z(n[1][3])&&z(n[2][3])?(B(r,n,i),!0):s<3&&N(r,n,i,I,L,++s)};if(h[0]&&h[1]&&h[2])return p(r,n,i)||f;var d=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(s){if(h[s[0]]&&h[s[1]]&&!h[s[2]]){var l=n[s[0]],c=n[s[1]],u=n[s[2]],y=R(u,l,a,o),g=R(u,c,a,o);f=p(r,[g,y,l],[-1,-1,i[s[0]]])||f,f=p(r,[l,c,g],[i[s[0]],i[s[1]],-1])||f,d=!0}}),d||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(s){if(h[s[0]]&&!h[s[1]]&&!h[s[2]]){var l=n[s[0]],c=n[s[1]],u=n[s[2]],y=R(c,l,a,o);f=p(r,[R(u,l,a,o),y,l],[-1,-1,i[s[0]]])||f,d=!0}}),f}function U(r,n,i,a){var o,s,l,c,u,f=!1,h=F(n),p=[(o=h[0][3])>=i&&o<=a,(s=h[1][3])>=i&&s<=a,(l=h[2][3])>=i&&l<=a,(c=h[3][3])>=i&&c<=a];if(!(p[0]||p[1]||p[2]||p[3]))return f;if(p[0]&&p[1]&&p[2]&&p[3])return v&&((u=function(i,a,o){B(r,[h[i],h[a],h[o]],[n[i],n[a],n[o]])})(0,1,2),u(3,0,1),u(2,3,0),u(1,2,3)),f;var d=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(o){if(p[o[0]]&&p[o[1]]&&p[o[2]]&&!p[o[3]]){var s=h[o[0]],l=h[o[1]],c=h[o[2]],u=h[o[3]];f=v?B(r,[s,l,c],[n[o[0]],n[o[1]],n[o[2]]])||f:B(null,[R(u,s,i,a),R(u,l,i,a),R(u,c,i,a)],[-1,-1,-1])||f,d=!0}}),d||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(o){if(p[o[0]]&&p[o[1]]&&!p[o[2]]&&!p[o[3]]){var s,l,c,u=h[o[0]],y=h[o[1]],g=h[o[2]],m=h[o[3]],x=R(g,u,i,a),b=R(g,y,i,a),_=R(m,y,i,a),w=R(m,u,i,a);v?(f=B(r,[u,w,x],[n[o[0]],-1,-1])||f,f=B(r,[y,b,_],[n[o[1]],-1,-1])||f):(s=[x,b,_,w],l=[-1,-1,-1,-1],(c=function(r,n,i){B(null,[s[r],s[n],s[i]],[l[r],l[n],l[i]])})(0,1,2),c(2,3,0)),d=!0}}),d||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(o){if(p[o[0]]&&!p[o[1]]&&!p[o[2]]&&!p[o[3]]){var s=h[o[0]],l=h[o[1]],c=h[o[2]],u=h[o[3]],y=R(l,s,i,a),g=R(c,s,i,a),m=R(u,s,i,a);v?(f=B(r,[s,y,g],[n[o[0]],-1,-1])||f,f=B(r,[s,g,m],[n[o[0]],-1,-1])||f,f=B(r,[s,m,y],[n[o[0]],-1,-1])||f):f=B(null,[y,g,m],[-1,-1,-1])||f,d=!0}})),f}function j(r,n,i,a,o,s,l,c,u,f,h){var p=!1;return g&&(P(r,"A")&&(p=U(null,[n,i,a,s],f,h)||p),P(r,"B")&&(p=U(null,[i,a,o,u],f,h)||p),P(r,"C")&&(p=U(null,[i,s,l,u],f,h)||p),P(r,"D")&&(p=U(null,[a,s,c,u],f,h)||p),P(r,"E")&&(p=U(null,[i,a,s,u],f,h)||p)),v&&(p=U(r,[i,a,s,u],f,h)||p),p}function V(r,n,i,a,o,s,l,c){return[!0===c[0]||N(r,F([n,i,a]),[n,i,a],s,l),!0===c[1]||N(r,F([a,o,n]),[a,o,n],s,l)]}function H(r,n,i,a,o,s,l,c,u){return c?V(r,n,i,o,a,s,l,u):V(r,i,o,a,n,s,l,u)}function q(r,n,i,a,o,s,l){var c,u,f,h,p=!1,d=function(){p=N(r,[c,u,f],[-1,-1,-1],o,s)||p,p=N(r,[f,h,c],[-1,-1,-1],o,s)||p},y=l[0],g=l[1],v=l[2];return y&&(c=D(F([M(n,i-0,a-0)])[0],F([M(n-1,i-0,a-0)])[0],y),u=D(F([M(n,i-0,a-1)])[0],F([M(n-1,i-0,a-1)])[0],y),f=D(F([M(n,i-1,a-1)])[0],F([M(n-1,i-1,a-1)])[0],y),h=D(F([M(n,i-1,a-0)])[0],F([M(n-1,i-1,a-0)])[0],y),d()),g&&(c=D(F([M(n-0,i,a-0)])[0],F([M(n-0,i-1,a-0)])[0],g),u=D(F([M(n-0,i,a-1)])[0],F([M(n-0,i-1,a-1)])[0],g),f=D(F([M(n-1,i,a-1)])[0],F([M(n-1,i-1,a-1)])[0],g),h=D(F([M(n-1,i,a-0)])[0],F([M(n-1,i-1,a-0)])[0],g),d()),v&&(c=D(F([M(n-0,i-0,a)])[0],F([M(n-0,i-0,a-1)])[0],v),u=D(F([M(n-0,i-1,a)])[0],F([M(n-0,i-1,a-1)])[0],v),f=D(F([M(n-1,i-1,a)])[0],F([M(n-1,i-1,a-1)])[0],v),h=D(F([M(n-1,i-0,a)])[0],F([M(n-1,i-0,a-1)])[0],v),d()),p}function G(r,n,i,a,o){for(var s=[],l=0,c=0;c<n.length;c++)for(var u=n[c],f=1;f<A;f++)for(var h=1;h<T;h++)s.push(H(r,M(u,h-1,f-1),M(u,h-1,f),M(u,h,f-1),M(u,h,f),i,a,(u+h+f)%2,o&&o[l]?o[l]:[])),l++;return s}function W(r,n,i,a,o){for(var s=[],l=0,c=0;c<n.length;c++)for(var u=n[c],f=1;f<w;f++)for(var h=1;h<A;h++)s.push(H(r,M(f-1,u,h-1),M(f,u,h-1),M(f-1,u,h),M(f,u,h),i,a,(f+u+h)%2,o&&o[l]?o[l]:[])),l++;return s}function Y(r,n,i,a,o){for(var s=[],l=0,c=0;c<n.length;c++)for(var u=n[c],f=1;f<T;f++)for(var h=1;h<w;h++)s.push(H(r,M(h-1,f-1,u),M(h-1,f,u),M(h,f-1,u),M(h,f,u),i,a,(h+f+u)%2,o&&o[l]?o[l]:[])),l++;return s}function Z(r,n,i){for(var a=1;a<A;a++)for(var o=1;o<T;o++)for(var s=1;s<w;s++)!function(r,n,i,a,o,s,l,c,u,f,h,p){var d=r;p?(g&&"even"===r&&(d=null),j(d,n,i,a,o,s,l,c,u,f,h)):(g&&"odd"===r&&(d=null),j(d,u,c,l,s,o,a,i,n,f,h))}(r,M(s-1,o-1,a-1),M(s-1,o-1,a),M(s-1,o,a-1),M(s-1,o,a),M(s,o-1,a-1),M(s,o-1,a),M(s,o,a-1),M(s,o,a),n,i,(s+o+a)%2)}return function(){if(C(),function(){for(var n=0;n<w;n++)for(var i=0;i<T;i++)for(var a=0;a<A;a++){var o=M(n,i,a);O(r._x[o],r._y[o],r._z[o],r._value[o])}}(),h&&y&&(c=y,v=!0,Z(null,I,L),v=!1),u&&p){c=p;for(var n=r.surface.pattern,i=r.surface.count,d=0;d<i;d++){var k=1===i?.5:d/(i-1),D=(1-k)*I+k*L,P=Math.abs(D-S)>Math.abs(D-E)?[S,D]:[D,E];g=!0,Z(n,P[0],P[1]),g=!1}}var B=[[Math.min(I,E),Math.max(I,E)],[Math.min(S,L),Math.max(S,L)]];["x","y","z"].forEach(function(n){for(var i=[],a=0;a<B.length;a++){var o=0,s=B[a][0],l=B[a][1],u=r.slices[n];if(u.show&&u.fill){c=u.fill;var h=[],p=[],d=[];if(u.locations.length)for(var y=0;y<u.locations.length;y++){var g=f(u.locations[y],"x"===n?x:"y"===n?b:_);0===g.distRatio?h.push(g.id):g.id>0&&(p.push(g.id),"x"===n?d.push([g.distRatio,0,0]):"y"===n?d.push([0,g.distRatio,0]):d.push([0,0,g.distRatio]))}else h=function(r,n){for(var i=[],a=1;a<n;a++)i.push(a);return i}(0,"x"===n?w-1:"y"===n?T-1:A-1);p.length>0&&(i[o]="x"===n?function(r,n,i,a,o,s){for(var l=[],c=0,u=0;u<n.length;u++)for(var f=n[u],h=1;h<A;h++)for(var p=1;p<T;p++)l.push(q(null,f,p,h,i,a,o[u],s&&s[c]&&s[c])),c++;return l}(0,p,s,l,d,i[o]):"y"===n?function(r,n,i,a,o,s){for(var l=[],c=0,u=0;u<n.length;u++)for(var f=n[u],h=1;h<w;h++)for(var p=1;p<A;p++)l.push(q(null,h,f,p,i,a,o[u],s&&s[c]&&s[c])),c++;return l}(0,p,s,l,d,i[o]):function(r,n,i,a,o,s){for(var l=[],c=0,u=0;u<n.length;u++)for(var f=n[u],h=1;h<T;h++)for(var p=1;p<w;p++)l.push(q(null,p,h,f,i,a,o[u],s&&s[c]&&s[c])),c++;return l}(0,p,s,l,d,i[o]),o++),h.length>0&&(i[o]="x"===n?G(null,h,s,l,i[o]):"y"===n?W(null,h,s,l,i[o]):Y(null,h,s,l,i[o]),o++)}var v=r.caps[n];v.show&&v.fill&&(c=v.fill,i[o]="x"===n?G(null,[0,w-1],s,l,i[o]):"y"===n?W(null,[0,T-1],s,l,i[o]):Y(null,[0,A-1],s,l,i[o]),o++)}}),0===m&&C(),r._meshX=a,r._meshY=o,r._meshZ=s,r._meshIntensity=l,r._Xs=x,r._Ys=b,r._Zs=_}(),r}r.exports={findNearestOnAxis:f,generateIsoMeshes:y,createIsosurfaceTrace:function(r,n){var i=a({gl:r.glplot.gl}),o=new h(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}}},70548:function(r,n,i){var a=i(3400),o=i(24040),s=i(50048),l=i(27260);function c(r,n,i,a,s){var c=s("isomin"),u=s("isomax");null!=u&&null!=c&&c>u&&(n.isomin=null,n.isomax=null);var f=s("x"),h=s("y"),p=s("z"),d=s("value");f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length?(o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],a),s("valuehoverformat"),["x","y","z"].forEach(function(r){s(r+"hoverformat");var n="caps."+r;s(n+".show")&&s(n+".fill");var i="slices."+r;s(i+".show")&&(s(i+".fill"),s(i+".locations"))}),s("spaceframe.show")&&s("spaceframe.fill"),s("surface.show")&&(s("surface.count"),s("surface.fill"),s("surface.pattern")),s("contour.show")&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(r){s(r)}),l(r,n,a,s,{prefix:"",cLetter:"c"}),n._length=null):n.visible=!1}r.exports={supplyDefaults:function(r,n,i,o){c(r,n,0,o,function(i,o){return a.coerce(r,n,s,i,o)})},supplyIsoDefaults:c}},6296:function(r,n,i){r.exports={attributes:i(50048),supplyDefaults:i(70548).supplyDefaults,calc:i(62624),colorbar:{min:"cmin",max:"cmax"},plot:i(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:i(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(r,n,i){var a=i(49084),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(16716),c=i(45464),u=i(92880).extendFlat;r.exports=u({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"}),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},a("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:u({},l.contours.x.show,{}),color:l.contours.x.color,width:l.contours.x.width,editType:"calc"},lightposition:{x:u({},l.lightposition.x,{dflt:1e5}),y:u({},l.lightposition.y,{dflt:1e5}),z:u({},l.lightposition.z,{dflt:0}),editType:"calc"},lighting:u({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},l.lighting),hoverinfo:u({},c.hoverinfo,{editType:"calc"}),showlegend:u({},c.showlegend,{dflt:!1})})},1876:function(r,n,i){var a=i(47128);r.exports=function(r,n){n.intensity&&a(r,n,{vals:n.intensity,containerStr:"",cLetter:"c"})}},576:function(r,n,i){var a=i(67792).gl_mesh3d,o=i(67792).delaunay_triangulate,s=i(67792).alpha_shape,l=i(67792).convex_hull,c=i(33040).parseColorScale,u=i(3400).isArrayOrTypedArray,f=i(43080),h=i(8932).extractOpts,p=i(52094);function d(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var y=d.prototype;function g(r){for(var n=[],i=r.length,a=0;a<i;a++)n[a]=f(r[a]);return n}function v(r,n,i,a){for(var o=[],s=n.length,l=0;l<s;l++)o[l]=r.d2l(n[l],0,a)*i;return o}function m(r){for(var n=[],i=r.length,a=0;a<i;a++)n[a]=Math.round(r[a]);return n}function x(r,n){for(var i=r.length,a=0;a<i;a++)if(r[a]<=-.5||r[a]>=n-.5)return!1;return!0}y.handlePick=function(r){if(r.object===this.mesh){var n=r.index=r.data.index;r.data._cellCenter?r.traceCoordinate=r.data.dataCoordinate:r.traceCoordinate=[this.data.x[n],this.data.y[n],this.data.z[n]];var i=this.data.hovertext||this.data.text;return u(i)&&void 0!==i[n]?r.textLabel=i[n]:i&&(r.textLabel=i),!0}},y.update=function(r){var n=this.scene,i=n.fullSceneLayout;this.data=r;var a,u=r.x.length,d=p(v(i.xaxis,r.x,n.dataScale[0],r.xcalendar),v(i.yaxis,r.y,n.dataScale[1],r.ycalendar),v(i.zaxis,r.z,n.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!x(r.i,u)||!x(r.j,u)||!x(r.k,u))return;a=p(m(r.i),m(r.j),m(r.k))}else a=0===r.alphahull?l(d):r.alphahull>0?s(r.alphahull,d):function(r,n){for(var i=["x","y","z"].indexOf(r),a=[],s=n.length,l=0;l<s;l++)a[l]=[n[l][(i+1)%3],n[l][(i+2)%3]];return o(a)}(r.delaunayaxis,d);var y={positions:d,cells:a,lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:f(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};if(r.intensity){var b=h(r);this.color="#fff";var _=r.intensitymode;y[_+"Intensity"]=r.intensity,y[_+"IntensityBounds"]=[b.min,b.max],y.colormap=c(r)}else r.vertexcolor?(this.color=r.vertexcolor[0],y.vertexColors=g(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],y.cellColors=g(r.facecolor)):(this.color=r.color,y.meshColor=f(r.color));this.mesh.update(y)},y.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new d(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},74212:function(r,n,i){var a=i(24040),o=i(3400),s=i(27260),l=i(52948);r.exports=function(r,n,i,c){function u(i,a){return o.coerce(r,n,l,i,a)}function f(r){var n=r.map(function(r){var n=u(r);return n&&o.isArrayOrTypedArray(n)?n:null});return n.every(function(r){return r&&r.length===n[0].length})&&n}f(["x","y","z"])?(f(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],c),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){u(r)}),u("contour.show")&&(u("contour.color"),u("contour.width")),"intensity"in r?(u("intensity"),u("intensitymode"),s(r,n,c,u,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in r?u("facecolor"):"vertexcolor"in r?u("vertexcolor"):u("color",i)),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},7404:function(r,n,i){r.exports={attributes:i(52948),supplyDefaults:i(74212),calc:i(1876),colorbar:{min:"cmin",max:"cmax"},plot:i(576),moduleType:"trace",name:"mesh3d",basePlotModule:i(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(r,n,i){var a=i(3400).extendFlat,o=i(52904),s=i(29736).axisHoverFormat,l=i(98192).u,c=i(55756),u=i(48164),f=u.INCREASING.COLOR,h=u.DECREASING.COLOR,p=o.line;function d(r){return{line:{color:a({},p.color,{dflt:r}),width:p.width,dash:l,editType:"style"},editType:"style"}}r.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:a({},p.width,{}),dash:a({},l,{}),editType:"style"},increasing:d(f),decreasing:d(h),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:a({},c.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:o.zorder}},42812:function(r,n,i){var a=i(3400),o=a._,s=i(54460),l=i(1220),c=i(39032).BADNUM;function u(r,n,i,a){return{o:r,h:n,l:i,c:a}}function f(r,n,i,l,u,f){for(var h=u.makeCalcdata(n,"open"),p=u.makeCalcdata(n,"high"),d=u.makeCalcdata(n,"low"),y=u.makeCalcdata(n,"close"),g=a.isArrayOrTypedArray(n.text),v=a.isArrayOrTypedArray(n.hovertext),m=!0,x=null,b=!!n.xperiodalignment,_=[],w=0;w<l.length;w++){var T=l[w],A=h[w],k=p[w],M=d[w],S=y[w];if(T!==c&&A!==c&&k!==c&&M!==c&&S!==c){S===A?null!==x&&S!==x&&(m=S>x):m=S>A,x=S;var E=f(A,k,M,S);E.pos=T,E.yc=(A+S)/2,E.i=w,E.dir=m?"increasing":"decreasing",E.x=E.pos,E.y=[M,k],b&&(E.orig_p=i[w]),g&&(E.tx=n.text[w]),v&&(E.htx=n.hovertext[w]),_.push(E)}else _.push({pos:T,empty:!0})}return n._extremes[u._id]=s.findExtremes(u,a.concat(d,p),{padded:!0}),_.length&&(_[0].t={labels:{open:o(r,"open:")+" ",high:o(r,"high:")+" ",low:o(r,"low:")+" ",close:o(r,"close:")+" "}}),_}r.exports={calc:function(r,n){var i=s.getFromId(r,n.xaxis),o=s.getFromId(r,n.yaxis),c=function(r,n,i){var o=i._minDiff;if(!o){var s,c=r._fullData,u=[];for(o=1/0,s=0;s<c.length;s++){var f=c[s];if("ohlc"===f.type&&!0===f.visible&&f.xaxis===n._id){u.push(f);var h=n.makeCalcdata(f,"x");f._origX=h;var p=l(i,n,"x",h).vals;f._xcalc=p;var d=a.distinctVals(p).minDiff;d&&isFinite(d)&&(o=Math.min(o,d))}}for(o===1/0&&(o=1),s=0;s<u.length;s++)u[s]._minDiff=o}return o*i.tickwidth}(r,i,n),h=n._minDiff;n._minDiff=null;var p=n._origX;n._origX=null;var d=n._xcalc;n._xcalc=null;var y=f(r,n,p,d,o,u);return n._extremes[i._id]=s.findExtremes(i,d,{vpad:h/2}),y.length?(a.extendFlat(y[0].t,{wHover:h/2,tickLen:c}),y):[{t:{empty:!0}}]},calcCommon:f}},23860:function(r,n,i){var a=i(3400),o=i(52744),s=i(31147),l=i(20279);function c(r,n,i,a){i(a+".line.color"),i(a+".line.width",n.line.width),i(a+".line.dash",n.line.dash)}r.exports=function(r,n,i,u){function f(i,o){return a.coerce(r,n,l,i,o)}o(r,n,f,u)?(s(r,n,u,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),f("line.dash"),c(0,n,f,"increasing"),c(0,n,f,"decreasing"),f("text"),f("hovertext"),f("tickwidth"),u._requestRangeslider[n.xaxis]=!0,f("zorder")):n.visible=!1}},18720:function(r,n,i){var a=i(54460),o=i(3400),s=i(93024),l=i(76308),c=i(3400).fillText,u=i(48164),f={increasing:u.INCREASING.SYMBOL,decreasing:u.DECREASING.SYMBOL};function h(r,n,i,a){var o,c,u=r.cd,f=r.xa,h=u[0].trace,p=u[0].t,d=h.type,y="ohlc"===d?"l":"min",g="ohlc"===d?"h":"max",v=p.bPos||0,m=p.bdPos||p.tickLen,x=p.wHover,b=Math.min(1,m/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function _(r){var i=r.pos+v-n;return s.inbox(i-x,i+x,o)}function w(r){var n=r[y],a=r[g];return n===a||s.inbox(n-i,a-i,o)}function T(r){return(_(r)+w(r))/2}o=r.maxHoverDistance-b,c=r.maxSpikeDistance-b;var A=s.getDistanceFunction(a,_,w,T);if(s.getClosest(u,A,r),!1===r.index)return null;var k=u[r.index];if(k.empty)return null;var M=h[k.dir],S=M.line.color;return l.opacity(S)&&M.line.width?r.color=S:r.color=M.fillcolor,r.x0=f.c2p(k.pos+v-m,!0),r.x1=f.c2p(k.pos+v+m,!0),r.xLabelVal=void 0!==k.orig_p?k.orig_p:k.pos,r.spikeDistance=T(k)*c/o,r.xSpike=f.c2p(k.pos,!0),r}function p(r,n,i,s){var l=r.cd,c=r.ya,u=l[0].trace,f=l[0].t,p=[],d=h(r,n,i,s);if(!d)return[];var y=l[d.index].hi||u.hoverinfo,g=y.split("+");if("all"!==y&&-1===g.indexOf("y"))return[];for(var v=["high","open","close","low"],m={},x=0;x<v.length;x++){var b,_=v[x],w=u[_][d.index],T=c.c2p(w,!0);w in m?(b=m[w]).yLabel+="<br>"+f.labels[_]+a.hoverLabelText(c,w,u.yhoverformat):((b=o.extendFlat({},d)).y0=b.y1=T,b.yLabelVal=w,b.yLabel=f.labels[_]+a.hoverLabelText(c,w,u.yhoverformat),b.name="",p.push(b),m[w]=b)}return p}function d(r,n,i,o){var s=r.cd,l=r.ya,u=s[0].trace,p=s[0].t,d=h(r,n,i,o);if(!d)return[];var y=s[d.index],g=d.index=y.i,v=y.dir;function m(r){return p.labels[r]+a.hoverLabelText(l,u[r][g],u.yhoverformat)}var x=y.hi||u.hoverinfo,b=x.split("+"),_="all"===x,w=_||-1!==b.indexOf("y"),T=_||-1!==b.indexOf("text"),A=w?[m("open"),m("high"),m("low"),m("close")+"  "+f[v]]:[];return T&&c(y,u,A),d.extraText=A.join("<br>"),d.y0=d.y1=l.c2p(y.yc,!0),[d]}r.exports={hoverPoints:function(r,n,i,a){return r.cd[0].trace.hoverlabel.split?p(r,n,i,a):d(r,n,i,a)},hoverSplit:p,hoverOnPoints:d}},65456:function(r,n,i){r.exports={moduleType:"trace",name:"ohlc",basePlotModule:i(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:i(20279),supplyDefaults:i(23860),calc:i(42812).calc,plot:i(36664),style:i(14008),hoverPoints:i(18720).hoverPoints,selectPoints:i(97384)}},52744:function(r,n,i){var a=i(24040),o=i(3400);r.exports=function(r,n,i,s){var l=i("x"),c=i("open"),u=i("high"),f=i("low"),h=i("close");if(i("hoverlabel.split"),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x"],s),c&&u&&f&&h){var p=Math.min(c.length,u.length,f.length,h.length);return l&&(p=Math.min(p,o.minRowLength(l))),n._length=p,p}}},36664:function(r,n,i){var a=i(33428),o=i(3400);r.exports=function(r,n,i,s){var l=n.yaxis,c=n.xaxis,u=!!c.rangebreaks;o.makeTraceGroups(s,i,"trace ohlc").each(function(r){var n=a.select(this),i=r[0],s=i.t;if(!0!==i.trace.visible||s.empty)n.remove();else{var f=s.tickLen,h=n.selectAll("path").data(o.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(r){if(r.empty)return"M0,0Z";var n=c.c2p(r.pos-f,!0),i=c.c2p(r.pos+f,!0),a=u?(n+i)/2:c.c2p(r.pos,!0);return"M"+n+","+l.c2p(r.o,!0)+"H"+a+"M"+a+","+l.c2p(r.h,!0)+"V"+l.c2p(r.l,!0)+"M"+i+","+l.c2p(r.c,!0)+"H"+a})}})}},97384:function(r){r.exports=function(r,n){var i,a=r.cd,o=r.xaxis,s=r.yaxis,l=[],c=a[0].t.bPos||0;if(!1===n)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var u=a[i];n.contains([o.c2p(u.pos+c),s.c2p(u.yc)],null,u.i,r)?(l.push({pointNumber:u.i,x:o.c2d(u.pos),y:s.c2d(u.yc)}),u.selected=1):u.selected=0}return l}},14008:function(r,n,i){var a=i(33428),o=i(43616),s=i(76308);r.exports=function(r,n,i){var l=i||a.select(r).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(r){return r[0].trace.opacity}),l.each(function(r){var n=r[0].trace;a.select(this).selectAll("path").each(function(r){if(!r.empty){var i=n[r.dir].line;a.select(this).style("fill","none").call(s.stroke,i.color).call(o.dashLine,i.dash,i.width).style("opacity",n.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(r,n,i){var a=i(92880).extendFlat,o=i(45464),s=i(25376),l=i(49084),c=i(21776).Ks,u=i(86968).u,f=a({editType:"calc"},l("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:c({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});r.exports={domain:u({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:a({},o.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:c({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:s({editType:"calc"}),tickfont:s({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:f,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(r,n,i){var a=i(84888)._M,o=i(60268),s="parcats";n.name=s,n.plot=function(r,n,i,l){var c=a(r.calcdata,s);c.length&&o(r,c[0],i,l)},n.clean=function(r,n,i,a){var o=a._has&&a._has("parcats"),s=n._has&&n._has("parcats");o&&!s&&a._paperdiv.selectAll(".parcats").remove()}},69136:function(r,n,i){var a=i(71688).wrap,o=i(94288).hasColorscale,s=i(47128),l=i(68944),c=i(43616),u=i(3400),f=i(38248);r.exports=function(r,n){var i,h,p=u.filterVisible(n.dimensions);if(0===p.length)return[];var d,y,g,v=p.map(function(r){var n;if("trace"===r.categoryorder)n=null;else if("array"===r.categoryorder)n=r.categoryarray;else{n=l(r.values);for(var i=!0,a=0;a<n.length;a++)if(!f(n[a])){i=!1;break}n.sort(i?u.sorterAsc:void 0),"category descending"===r.categoryorder&&(n=n.reverse())}return function(r,n){n=null==n?[]:n.map(function(r){return r});var i={},a={},o=[];n.forEach(function(r,n){i[r]=0,a[r]=n});for(var s=0;s<r.length;s++){var l,c=r[s];void 0===i[c]?(i[c]=1,l=n.push(c)-1,a[c]=l):(i[c]++,l=a[c]),o.push(l)}var u=n.map(function(r){return i[r]});return{uniqueValues:n,uniqueCounts:u,inds:o}}(r.values,n)});d=u.isArrayOrTypedArray(n.counts)?n.counts:[n.counts],function(r){var n;if(function(r){for(var n=Array(r.length),i=0;i<r.length;i++){if(r[i]<0||r[i]>=r.length||void 0!==n[r[i]])return!1;n[r[i]]=!0}return!0}(r.map(function(r){return r.displayindex})))for(n=0;n<r.length;n++)r[n]._displayindex=r[n].displayindex;else for(n=0;n<r.length;n++)r[n]._displayindex=n}(p),p.forEach(function(r,n){!function(r,n){r._categoryarray=n.uniqueValues,null===r.ticktext||void 0===r.ticktext?r._ticktext=[]:r._ticktext=r.ticktext.slice();for(var i=r._ticktext.length;i<n.uniqueValues.length;i++)r._ticktext.push(n.uniqueValues[i])}(r,v[n])});var m,x=n.line;x?(o(n,"line")&&s(r,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),m=c.tryColorscale(x)):m=u.identity;var b,_,w,T,A,k=p[0].values.length,M={},S=v.map(function(r){return r.inds});for(g=0,b=0;b<k;b++){var E,I,L,C=[];for(_=0;_<S.length;_++)C.push(S[_][b]);y=d[b%d.length],g+=y;var O=(w=b,T=void 0,A=void 0,u.isArrayOrTypedArray(x.color)?A=T=x.color[w%x.color.length]:T=x.color,{color:m(T),rawColor:A}),D=C+"-"+O.rawColor;void 0===M[D]&&(M[D]={categoryInds:C,color:O.color,rawColor:O.rawColor,valueInds:[],count:0}),E=M[D],I=b,L=y,E.valueInds.push(I),E.count+=L}var P=p.map(function(r,n){var i;return i=r._index,{dimensionInd:n,containerInd:i,displayInd:r._displayindex,dimensionLabel:r.label,count:g,categories:[],dragX:null}});for(b=0;b<k;b++)for(y=d[b%d.length],_=0;_<P.length;_++){var B,R,z,F=P[_].containerInd,N=v[_].inds[b],U=P[_].categories;if(void 0===U[N]){var j=n.dimensions[F]._categoryarray[N],V=n.dimensions[F]._ticktext[N];U[N]={dimensionInd:_,categoryInd:N,categoryValue:j,displayInd:N,categoryLabel:V,valueInds:[],count:0,dragY:null}}B=U[N],R=b,z=y,B.valueInds.push(R),B.count+=z}return a((i=g,h=P.map(function(r){return r.categories.length}).reduce(function(r,n){return Math.max(r,n)}),{dimensions:P,paths:M,trace:void 0,maxCats:h,count:i}))}},76671:function(r,n,i){var a=i(3400),o=i(94288).hasColorscale,s=i(27260),l=i(86968).Q,c=i(51272),u=i(72140),f=i(26284),h=i(38116).isTypedArraySpec;function p(r,n){function i(i,o){return a.coerce(r,n,u.dimensions,i,o)}var o=i("values"),s=i("visible");if(o&&o.length||(s=n.visible=!1),s){i("label"),i("displayindex",n._index);var l,c=r.categoryarray,f=a.isArrayOrTypedArray(c)&&c.length>0||h(c);f&&(l="array");var p=i("categoryorder",l);"array"===p?(i("categoryarray"),i("ticktext")):(delete r.categoryarray,delete r.ticktext),f||"array"!==p||(n.categoryorder="trace")}}r.exports=function(r,n,i,h){function d(i,o){return a.coerce(r,n,u,i,o)}var y=c(r,n,{name:"dimensions",handleItemDefaults:p}),g=function(r,n,i,l,c){c("line.shape"),c("line.hovertemplate");var u=c("line.color",l.colorway[0]);if(o(r,"line")&&a.isArrayOrTypedArray(u)){if(u.length)return c("line.colorscale"),s(r,n,l,c,{prefix:"line.",cLetter:"c"}),u.length;n.line.color=i}return 1/0}(r,n,i,h,d);l(n,h,d),Array.isArray(y)&&y.length||(n.visible=!1),f(n,y,"values",g),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var v=h.font;a.coerceFont(d,"labelfont",v,{overrideDflt:{size:Math.round(v.size)}}),a.coerceFont(d,"tickfont",v,{autoShadowDflt:!0,overrideDflt:{size:Math.round(v.size/1.2)}})}},22020:function(r,n,i){r.exports={attributes:i(72140),supplyDefaults:i(76671),calc:i(69136),plot:i(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:i(91800),categories:["noOpacity"],meta:{}}},51036:function(r,n,i){var a=i(33428),o=i(67756).Gz,s=i(36424),l=i(93024),c=i(3400),u=c.strTranslate,f=i(43616),h=i(49760),p=i(72736);function d(r){return r.key}function y(r){var n=r.parcatsViewModel.dimensions.length,i=r.parcatsViewModel.dimensions[n-1].model.dimensionInd;return r.model.dimensionInd===i}function g(r,n){return r.model.rawColor>n.model.rawColor?1:r.model.rawColor<n.model.rawColor?-1:0}function v(r){if(!r.parcatsViewModel.dragDimension&&-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")){c.raiseToTop(this),T(a.select(this));var n=x(r),i=b(r);if(r.parcatsViewModel.graphDiv.emit("plotly_hover",{points:n,event:a.event,constraints:i}),-1===r.parcatsViewModel.hoverinfoItems.indexOf("none")){var o,s,u,f=a.mouse(this)[0],p=r.parcatsViewModel.graphDiv,d=r.parcatsViewModel.trace,y=p._fullLayout,g=y._paperdiv.node().getBoundingClientRect(),v=r.parcatsViewModel.graphDiv.getBoundingClientRect();for(u=0;u<r.leftXs.length-1;u++)if(r.leftXs[u]+r.dimWidths[u]-2<=f&&f<=r.leftXs[u+1]+2){var m=r.parcatsViewModel.dimensions[u],_=r.parcatsViewModel.dimensions[u+1];o=(m.x+m.width+_.x)/2,s=(r.topYs[u]+r.topYs[u+1]+r.height)/2;break}var w=r.parcatsViewModel.x+o,A=r.parcatsViewModel.y+s,k=h.mostReadable(r.model.color,["black","white"]),M=r.model.count,S=M/r.parcatsViewModel.model.count,E={countLabel:M,probabilityLabel:S.toFixed(3)},I=[];-1!==r.parcatsViewModel.hoverinfoItems.indexOf("count")&&I.push(["Count:",E.countLabel].join(" ")),-1!==r.parcatsViewModel.hoverinfoItems.indexOf("probability")&&I.push(["P:",E.probabilityLabel].join(" "));var L=I.join("<br>"),C=a.mouse(p)[0];l.loneHover({trace:d,x:w-g.left+v.left,y:A-g.top+v.top,text:L,color:r.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:k,idealAlign:C<w?"right":"left",hovertemplate:(d.line||{}).hovertemplate,hovertemplateLabels:E,eventData:[{data:d._input,fullData:d,count:M,probability:S}]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:p})}}}function m(r){if(!r.parcatsViewModel.dragDimension&&(w(a.select(this)),l.loneUnhover(r.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),r.parcatsViewModel.pathSelection.sort(g),-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var n=x(r),i=b(r);r.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:n,event:a.event,constraints:i})}}function x(r){for(var n=[],i=B(r.parcatsViewModel),a=0;a<r.model.valueInds.length;a++){var o=r.model.valueInds[a];n.push({curveNumber:i,pointNumber:o})}return n}function b(r){for(var n={},i=r.parcatsViewModel.model.dimensions,a=0;a<i.length;a++){var o=i[a],s=o.categories[r.model.categoryInds[a]];n[o.containerInd]=s.categoryValue}return void 0!==r.model.rawColor&&(n.color=r.model.rawColor),n}function _(r){if(-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")){var n=x(r),i=b(r);r.parcatsViewModel.graphDiv.emit("plotly_click",{points:n,event:a.event,constraints:i})}}function w(r){r.attr("fill",function(r){return r.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function T(r){r.attr("fill-opacity",.8).attr("stroke",function(r){return h.mostReadable(r.model.color,["black","white"])}).attr("stroke-width",.3)}function A(r){r.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function k(r){r.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(r){var n=r.parcatsViewModel.pathSelection,i=r.categoryViewModel.model.dimensionInd,a=r.categoryViewModel.model.categoryInd;return n.filter(function(n){return n.model.categoryInds[i]===a&&n.model.color===r.color})}function S(r,n,i){var o=a.select(r).datum(),s=o.categoryViewModel.model,l=o.parcatsViewModel.graphDiv,c=a.select(r.parentNode).selectAll("rect.bandrect"),u=[];c.each(function(r){M(r).each(function(r){Array.prototype.push.apply(u,x(r))})});var f={};f[s.dimensionInd]=s.categoryValue,l.emit(n,{points:u,event:i,constraints:f})}function E(r,n,i){var o=a.select(r).datum(),s=o.categoryViewModel.model,l=o.parcatsViewModel.graphDiv,c=M(o),u=[];c.each(function(r){Array.prototype.push.apply(u,x(r))});var f={};f[s.dimensionInd]=s.categoryValue,void 0!==o.rawColor&&(f.color=o.rawColor),l.emit(n,{points:u,event:i,constraints:f})}function I(r,n,i){r._fullLayout._calcInverseTransform(r);var o,s,l=r._fullLayout._invScaleX,c=r._fullLayout._invScaleY,u=a.select(i.parentNode).select("rect.catrect"),f=u.node().getBoundingClientRect(),h=u.datum(),p=h.parcatsViewModel,d=p.model.dimensions[h.model.dimensionInd],y=p.trace,g=f.top+f.height/2;p.dimensions.length>1&&d.displayInd===p.dimensions.length-1?(o=f.left,s="left"):(o=f.left+f.width,s="right");var v=h.model.count,m=h.model.categoryLabel,x=v/h.parcatsViewModel.model.count,b={countLabel:v,categoryLabel:m,probabilityLabel:x.toFixed(3)},_=[];-1!==h.parcatsViewModel.hoverinfoItems.indexOf("count")&&_.push(["Count:",b.countLabel].join(" ")),-1!==h.parcatsViewModel.hoverinfoItems.indexOf("probability")&&_.push(["P("+b.categoryLabel+"):",b.probabilityLabel].join(" "));var w=_.join("<br>");return{trace:y,x:l*(o-n.left),y:c*(g-n.top),text:w,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:s,hovertemplate:y.hovertemplate,hovertemplateLabels:b,eventData:[{data:y._input,fullData:y,count:v,category:m,probability:x}]}}function L(r){if(!r.parcatsViewModel.dragDimension&&-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!(a.mouse(this)[1]<-1)){var n,i,o,s,u=r.parcatsViewModel.graphDiv,f=u._fullLayout,p=f._paperdiv.node().getBoundingClientRect(),d=r.parcatsViewModel.hoveron;"color"===d?(T(i=M(n=a.select(this).datum())),i.each(function(){c.raiseToTop(this)}),a.select(this.parentNode).selectAll("rect.bandrect").filter(function(r){return r.color===n.color}).each(function(){c.raiseToTop(this),a.select(this).attr("stroke","black").attr("stroke-width",1.5)}),E(this,"plotly_hover",a.event)):(a.select(this.parentNode).selectAll("rect.bandrect").each(function(r){var n=M(r);T(n),n.each(function(){c.raiseToTop(this)})}),a.select(this.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5),S(this,"plotly_hover",a.event)),-1===r.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===d?s=I(u,p,this):"color"===d?s=function(r,n,i){r._fullLayout._calcInverseTransform(r);var o,s,l=r._fullLayout._invScaleX,c=r._fullLayout._invScaleY,u=i.getBoundingClientRect(),f=a.select(i).datum(),p=f.categoryViewModel,d=p.parcatsViewModel,y=d.model.dimensions[p.model.dimensionInd],g=d.trace,v=u.y+u.height/2;d.dimensions.length>1&&y.displayInd===d.dimensions.length-1?(o=u.left,s="left"):(o=u.left+u.width,s="right");var m=p.model.categoryLabel,x=f.parcatsViewModel.model.count,b=0;f.categoryViewModel.bands.forEach(function(r){r.color===f.color&&(b+=r.count)});var _=p.model.count,w=0;d.pathSelection.each(function(r){r.model.color===f.color&&(w+=r.model.count)});var T=b/x,A=b/w,k=b/_,M={countLabel:b,categoryLabel:m,probabilityLabel:T.toFixed(3)},S=[];-1!==p.parcatsViewModel.hoverinfoItems.indexOf("count")&&S.push(["Count:",M.countLabel].join(" ")),-1!==p.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(S.push("P(color ∩ "+m+"): "+M.probabilityLabel),S.push("P("+m+" | color): "+A.toFixed(3)),S.push("P(color | "+m+"): "+k.toFixed(3)));var E=S.join("<br>"),I=h.mostReadable(f.color,["black","white"]);return{trace:g,x:l*(o-n.left),y:c*(v-n.top),text:E,color:f.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:I,fontSize:10,idealAlign:s,hovertemplate:g.hovertemplate,hovertemplateLabels:M,eventData:[{data:g._input,fullData:g,category:m,count:x,probability:T,categorycount:_,colorcount:w,bandcolorcount:b}]}}(u,p,this):"dimension"===d&&(o=[],a.select(this.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){o.push(I(u,p,this))}),s=o),s&&l.loneHover(s,{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:u}))}}function C(r){var n=r.parcatsViewModel;n.dragDimension||(w(n.pathSelection),A(n.dimensionSelection.selectAll("g.category")),k(n.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),l.loneUnhover(n.graphDiv._fullLayout._hoverlayer.node()),n.pathSelection.sort(g),-1!==n.hoverinfoItems.indexOf("skip"))||("color"===r.parcatsViewModel.hoveron?E(this,"plotly_unhover",a.event):S(this,"plotly_unhover",a.event))}function O(r){"fixed"!==r.parcatsViewModel.arrangement&&(r.dragDimensionDisplayInd=r.model.displayInd,r.initialDragDimensionDisplayInds=r.parcatsViewModel.model.dimensions.map(function(r){return r.displayInd}),r.dragHasMoved=!1,r.dragCategoryDisplayInd=null,a.select(this).selectAll("g.category").select("rect.catrect").each(function(n){var i=a.mouse(this)[0],o=a.mouse(this)[1];-2<=i&&i<=n.width+2&&-2<=o&&o<=n.height+2&&(r.dragCategoryDisplayInd=n.model.displayInd,r.initialDragCategoryDisplayInds=r.model.categories.map(function(r){return r.displayInd}),n.model.dragY=n.y,c.raiseToTop(this.parentNode),a.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<o&&o<=n.y+n.height&&(r.potentialClickBand=this)}))}),r.parcatsViewModel.dragDimension=r,l.loneUnhover(r.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function D(r){if("fixed"!==r.parcatsViewModel.arrangement&&(r.dragHasMoved=!0,null!==r.dragDimensionDisplayInd)){var n=r.dragDimensionDisplayInd,i=r.parcatsViewModel.dimensions[n];if(null!==r.dragCategoryDisplayInd){var o=i.categories[r.dragCategoryDisplayInd];o.model.dragY+=a.event.dy;var s=o.model.dragY,l=o.model.displayInd,c=i.categories,u=c[l-1],f=c[l+1];void 0!==u&&s<u.y+u.height/2&&(o.model.displayInd=u.model.displayInd,u.model.displayInd=l),void 0!==f&&s+o.height>f.y+f.height/2&&(o.model.displayInd=f.model.displayInd,f.model.displayInd=l),r.dragCategoryDisplayInd=o.model.displayInd}if(null===r.dragCategoryDisplayInd||"freeform"===r.parcatsViewModel.arrangement){i.model.dragX=a.event.x;var h=r.parcatsViewModel.dimensions[n-1],p=r.parcatsViewModel.dimensions[n+1];void 0!==h&&i.model.dragX<h.x+h.width&&(i.model.displayInd=h.model.displayInd,h.model.displayInd=n),void 0!==p&&i.model.dragX+i.width>p.x&&(i.model.displayInd=p.model.displayInd,p.model.displayInd=r.dragDimensionDisplayInd),r.dragDimensionDisplayInd=i.model.displayInd}j(r.parcatsViewModel),U(r.parcatsViewModel),z(r.parcatsViewModel),R(r.parcatsViewModel)}}function P(r){if("fixed"!==r.parcatsViewModel.arrangement&&null!==r.dragDimensionDisplayInd){a.select(this).selectAll("text").attr("font-weight","normal");var n={},i=B(r.parcatsViewModel),o=r.parcatsViewModel.model.dimensions.map(function(r){return r.displayInd}),l=r.initialDragDimensionDisplayInds.some(function(r,n){return r!==o[n]});l&&o.forEach(function(i,a){n["dimensions["+r.parcatsViewModel.model.dimensions[a].containerInd+"].displayindex"]=i});var c=!1;if(null!==r.dragCategoryDisplayInd){var u=r.model.categories.map(function(r){return r.displayInd});if(c=r.initialDragCategoryDisplayInds.some(function(r,n){return r!==u[n]})){var f=r.model.categories.slice().sort(function(r,n){return r.displayInd-n.displayInd}),h=f.map(function(r){return r.categoryValue}),p=f.map(function(r){return r.categoryLabel});n["dimensions["+r.model.containerInd+"].categoryarray"]=[h],n["dimensions["+r.model.containerInd+"].ticktext"]=[p],n["dimensions["+r.model.containerInd+"].categoryorder"]="array"}}-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!r.dragHasMoved&&r.potentialClickBand&&("color"===r.parcatsViewModel.hoveron?E(r.potentialClickBand,"plotly_click",a.event.sourceEvent):S(r.potentialClickBand,"plotly_click",a.event.sourceEvent)),r.model.dragX=null,null!==r.dragCategoryDisplayInd&&(r.parcatsViewModel.dimensions[r.dragDimensionDisplayInd].categories[r.dragCategoryDisplayInd].model.dragY=null,r.dragCategoryDisplayInd=null),r.dragDimensionDisplayInd=null,r.parcatsViewModel.dragDimension=null,r.dragHasMoved=null,r.potentialClickBand=null,j(r.parcatsViewModel),U(r.parcatsViewModel),a.transition().duration(300).ease("cubic-in-out").each(function(){z(r.parcatsViewModel,!0),R(r.parcatsViewModel,!0)}).each("end",function(){(l||c)&&s.restyle(r.parcatsViewModel.graphDiv,n,[i])})}}function B(r){for(var n,i=r.graphDiv._fullData,a=0;a<i.length;a++)if(r.key===i[a].uid){n=a;break}return n}function R(r,n){var i;void 0===n&&(n=!1),r.pathSelection.data(function(r){return r.paths},d),(i=r.pathSelection,n?i.transition():i).attr("d",function(r){return r.svgD})}function z(r,n){function i(r){return n?r.transition():r}void 0===n&&(n=!1),r.dimensionSelection.data(function(r){return r.dimensions},d);var o=r.dimensionSelection.selectAll("g.category").data(function(r){return r.categories},d);i(r.dimensionSelection).attr("transform",function(r){return u(r.x,0)}),i(o).attr("transform",function(r){return u(0,r.y)}),o.select(".dimlabel").text(function(r,n){return 0===n?r.parcatsViewModel.model.dimensions[r.model.dimensionInd].dimensionLabel:null}),o.select(".catlabel").attr("text-anchor",function(r){return y(r)?"start":"end"}).attr("x",function(r){return y(r)?r.width+5:-5}).each(function(r){var n,i;y(r)?(n=r.width+5,i="start"):(n=-5,i="end"),a.select(this).selectAll("tspan").attr("x",n).attr("text-anchor",i)});var s=o.selectAll("rect.bandrect").data(function(r){return r.bands},d),l=s.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(r){return r.color}).attr("fill-opacity",0);s.attr("fill",function(r){return r.color}).attr("width",function(r){return r.width}).attr("height",function(r){return r.height}).attr("y",function(r){return r.y}),k(l),s.each(function(){c.raiseToTop(this)}),s.exit().remove()}function F(r,n,i){var a,o=i[0],s=n.margin||{l:80,r:80,t:100,b:80},l=o.trace,c=l.domain,u=n.width,f=n.height,h=Math.floor(u*(c.x[1]-c.x[0])),p=Math.floor(f*(c.y[1]-c.y[0])),d=c.x[0]*u+s.l,y=n.height-c.y[1]*n.height+s.t,g=l.line.shape;a="all"===l.hoverinfo?["count","probability"]:(l.hoverinfo||"").split("+");var v={trace:l,key:l.uid,model:o,x:d,y:y,width:h,height:p,hoveron:l.hoveron,hoverinfoItems:a,arrangement:l.arrangement,bundlecolors:l.bundlecolors,sortpaths:l.sortpaths,labelfont:l.labelfont,categorylabelfont:l.tickfont,pathShape:g,dragDimension:null,margin:s,paths:[],dimensions:[],graphDiv:r,traceSelection:null,pathSelection:null,dimensionSelection:null};return o.dimensions&&(j(v),U(v)),v}function N(r,n,i,a,s){var l,c,u=[],f=[];for(c=0;c<i.length-1;c++)u.push((l=o(i[c]+r[c],r[c+1]))(s)),f.push(l(1-s));var h="M "+r[0]+","+n[0];for(h+="l"+i[0]+",0 ",c=1;c<i.length;c++)h+="C"+u[c-1]+","+n[c-1]+" "+f[c-1]+","+n[c]+" "+r[c]+","+n[c]+"l"+i[c]+",0 ";for(h+="l0,"+a+" l -"+i[i.length-1]+",0 ",c=i.length-2;c>=0;c--)h+="C"+f[c]+","+(n[c+1]+a)+" "+u[c]+","+(n[c]+a)+" "+(r[c]+i[c])+","+(n[c]+a)+"l-"+i[c]+",0 ";return h+"Z"}function U(r){var n=r.dimensions,i=r.model,a=n.map(function(r){return r.categories.map(function(r){return r.y})}),o=r.model.dimensions.map(function(r){return r.categories.map(function(r){return r.displayInd})}),s=r.model.dimensions.map(function(r){return r.displayInd}),l=r.dimensions.map(function(r){return r.model.dimensionInd}),c=n.map(function(r){return r.x}),u=n.map(function(r){return r.width}),f=[];for(var h in i.paths)i.paths.hasOwnProperty(h)&&f.push(i.paths[h]);function p(r){var n=r.categoryInds.map(function(r,n){return o[n][r]});return l.map(function(r){return n[r]})}f.sort(function(n,i){var a=p(n),o=p(i);return"backward"===r.sortpaths&&(a.reverse(),o.reverse()),a.push(n.valueInds[0]),o.push(i.valueInds[0]),r.bundlecolors&&(a.unshift(n.rawColor),o.unshift(i.rawColor)),a<o?-1:a>o?1:0});for(var d=Array(f.length),y=n[0].model.count,g=n[0].categories.map(function(r){return r.height}).reduce(function(r,n){return r+n}),v=0;v<f.length;v++){var m,x=f[v];m=y>0?g*(x.count/y):0;for(var b,_=Array(a.length),w=0;w<x.categoryInds.length;w++){var T=x.categoryInds[w],A=o[w][T],k=s[w];_[k]=a[k][A],a[k][A]+=m;var M=r.dimensions[k].categories[A],S=M.bands.length,E=M.bands[S-1];if(void 0===E||x.rawColor!==E.rawColor){var I=void 0===E?0:E.y+E.height;M.bands.push({key:I,color:x.color,rawColor:x.rawColor,height:m,width:M.width,count:x.count,y:I,categoryViewModel:M,parcatsViewModel:r})}else{var L=M.bands[S-1];L.height+=m,L.count+=x.count}}b="hspline"===r.pathShape?N(c,_,u,m,.5):N(c,_,u,m,0),d[v]={key:x.valueInds[0],model:x,height:m,leftXs:c,topYs:_,dimWidths:u,svgD:b,parcatsViewModel:r}}r.paths=d}function j(r){var n=r.model.dimensions.map(function(r){return{displayInd:r.displayInd,dimensionInd:r.dimensionInd}});n.sort(function(r,n){return r.displayInd-n.displayInd});var i=[];for(var a in n){var o=n[a].dimensionInd,s=r.model.dimensions[o];i.push(function(r,n){var i,a=r.model.dimensions.length,o=n.displayInd;i=40+(a>1?(r.width-80-16)/(a-1):0)*o;var s,l,c,u,f,h=[],p=r.model.maxCats,d=n.categories.length,y=n.count,g=r.height-8*(p-1),v=8*(p-d)/2,m=n.categories.map(function(r){return{displayInd:r.displayInd,categoryInd:r.categoryInd}});for(m.sort(function(r,n){return r.displayInd-n.displayInd}),f=0;f<d;f++)u=m[f].categoryInd,l=n.categories[u],s=y>0?l.count/y*g:0,c={key:l.valueInds[0],model:l,width:16,height:s,y:null!==l.dragY?l.dragY:v,bands:[],parcatsViewModel:r},v=v+s+8,h.push(c);return{key:n.dimensionInd,x:null!==n.dragX?n.dragX:i,y:0,width:16,model:n,categories:h,parcatsViewModel:r,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}(r,s))}r.dimensions=i}r.exports=function(r,n,i,o){var s,l,h,x,b,T,M,S,E,I,B,R;s=r._context.staticPlot,l=i.map(F.bind(0,r,o)),(h=n.selectAll("g.parcatslayer").data([null])).enter().append("g").attr("class","parcatslayer").style("pointer-events",s?"none":"all"),b=(x=h.selectAll("g.trace.parcats").data(l,d)).enter().append("g").attr("class","trace parcats"),x.attr("transform",function(r){return u(r.x,r.y)}),b.append("g").attr("class","paths"),(T=x.select("g.paths").selectAll("path.path").data(function(r){return r.paths},d)).attr("fill",function(r){return r.model.color}),w(M=T.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(r){return r.model.color}).attr("fill-opacity",0)),T.attr("d",function(r){return r.svgD}),M.empty()||T.sort(g),T.exit().remove(),T.on("mouseover",v).on("mouseout",m).on("click",_),b.append("g").attr("class","dimensions"),(S=x.select("g.dimensions").selectAll("g.dimension").data(function(r){return r.dimensions},d)).enter().append("g").attr("class","dimension"),S.attr("transform",function(r){return u(r.x,0)}),S.exit().remove(),I=(E=S.selectAll("g.category").data(function(r){return r.categories},d)).enter().append("g").attr("class","category"),E.attr("transform",function(r){return u(0,r.y)}),I.append("rect").attr("class","catrect").attr("pointer-events","none"),E.select("rect.catrect").attr("fill","none").attr("width",function(r){return r.width}).attr("height",function(r){return r.height}),A(I),(B=E.selectAll("rect.bandrect").data(function(r){return r.bands},d)).each(function(){c.raiseToTop(this)}),B.attr("fill",function(r){return r.color}),R=B.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(r){return r.color}).attr("fill-opacity",0),B.attr("fill",function(r){return r.color}).attr("width",function(r){return r.width}).attr("height",function(r){return r.height}).attr("y",function(r){return r.y}).attr("cursor",function(r){return"fixed"===r.parcatsViewModel.arrangement?"default":"perpendicular"===r.parcatsViewModel.arrangement?"ns-resize":"move"}),k(R),B.exit().remove(),I.append("text").attr("class","catlabel").attr("pointer-events","none"),E.select("text.catlabel").attr("text-anchor",function(r){return y(r)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(r){return y(r)?r.width+5:-5}).attr("y",function(r){return r.height/2}).text(function(r){return r.model.categoryLabel}).each(function(n){f.font(a.select(this),n.parcatsViewModel.categorylabelfont),p.convertToTspans(a.select(this),r)}),I.append("text").attr("class","dimlabel"),E.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(r){return"fixed"===r.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(r){return r.width/2}).attr("y",-5).text(function(r,n){return 0===n?r.parcatsViewModel.model.dimensions[r.model.dimensionInd].dimensionLabel:null}).each(function(r){f.font(a.select(this),r.parcatsViewModel.labelfont)}),E.selectAll("rect.bandrect").on("mouseover",L).on("mouseout",C),E.exit().remove(),S.call(a.behavior.drag().origin(function(r){return{x:r.x,y:0}}).on("dragstart",O).on("drag",D).on("dragend",P)),x.each(function(r){r.traceSelection=a.select(this),r.pathSelection=a.select(this).selectAll("g.paths").selectAll("path.path"),r.dimensionSelection=a.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),x.exit().remove()}},60268:function(r,n,i){var a=i(51036);r.exports=function(r,n,i,o){var s=r._fullLayout,l=s._paper,c=s._size;a(r,l,n,{width:c.w,height:c.h,margin:{t:c.t,r:c.r,b:c.b,l:c.l}},i,o)}},82296:function(r,n,i){var a=i(49084),o=i(94724),s=i(25376),l=i(86968).u,c=i(92880).extendFlat,u=i(31780).templatedArray;r.exports={domain:l({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:s({editType:"plot"}),tickfont:s({autoShadowDflt:!0,editType:"plot"}),rangefont:s({editType:"plot"}),dimensions:u("dimension",{label:{valType:"string",editType:"plot"},tickvals:c({},o.tickvals,{editType:"plot"}),ticktext:c({},o.ticktext,{editType:"plot"}),tickformat:c({},o.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:c({editType:"calc"},a("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(r,n,i){var a=i(30140),o=i(33428),s=i(71688).keyFun,l=i(71688).repeat,c=i(3400).sorterAsc,u=i(3400).strTranslate,f=a.bar.snapRatio,h=a.bar.snapClose;function p(r,n,i,a){if(function(r,n){for(var i=0;i<n.length;i++)if(r>=n[i][0]&&r<=n[i][1])return!0;return!1}(i,a))return i;var o=r?-1:1,s=0,l=n.length-1;if(o<0){var c=s;s=l,l=c}for(var u=n[s],p=u,d=s;o*d<o*l;d+=o){var y=d+o,g=n[y];if(o*i<o*(u*(1-h)+g*h))return u*(1-f)+p*f;if(o*i<o*g||y===l)return g*(1-f)+u*f;p=u,u=g}}function d(r){r.attr("x",-a.bar.captureWidth/2).attr("width",a.bar.captureWidth)}function y(r){r.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(r){if(!r.brush.filterSpecified)return"0,"+r.height;for(var n,i,a,o=v(r.brush.filter.getConsolidated(),r.height),s=[0],l=o.length?o[0][0]:null,c=0;c<o.length;c++)i=(n=o[c])[1]-n[0],s.push(l),s.push(i),(a=c+1)<o.length&&(l=o[a][0]-n[1]);return s.push(r.height),s}function v(r,n){return r.map(function(r){return r.map(function(r){return Math.max(0,r*n)}).sort(c)})}function m(){o.select(document.body).style("cursor",null)}function x(r){r.attr("stroke-dasharray",g)}function b(r,n){var i=o.select(r).selectAll(".highlight, .highlight-shadow");x(n?i.transition().duration(a.bar.snapDuration).each("end",n):i)}function _(r,n){var i,o=r.brush,s=NaN,l={};if(o.filterSpecified){var c=r.height,u=o.filter.getConsolidated(),f=v(u,c),h=NaN,p=NaN,d=NaN;for(i=0;i<=f.length;i++){var y=f[i];if(y&&y[0]<=n&&n<=y[1]){h=i;break}if(p=i?i-1:NaN,y&&y[0]>n){d=i;break}}if(isNaN(s=h)&&(s=isNaN(p)||isNaN(d)?isNaN(p)?d:p:n-f[p][1]<f[d][0]-n?p:d),!isNaN(s)){var g=f[s],m=function(r,n){var i=a.bar.handleHeight;if(!(n>r[1]+i||n<r[0]-i))return n>=.9*r[1]+.1*r[0]?"n":n<=.9*r[0]+.1*r[1]?"s":"ns"}(g,n);m&&(l.interval=u[s],l.intervalPix=g,l.region=m)}}if(r.ordinal&&!l.region){var x=r.unitTickvals,b=r.unitToPaddedPx.invert(n);for(i=0;i<x.length;i++){var _=[.25*x[Math.max(i-1,0)]+.75*x[i],.25*x[Math.min(i+1,x.length-1)]+.75*x[i]];if(b>=_[0]&&b<=_[1]){l.clickableOrdinalRange=_;break}}}return l}function w(r,n){o.event.sourceEvent.stopPropagation();var i=n.height-o.mouse(r)[1]-2*a.verticalPadding,s=n.brush.svgBrush;s.wasDragged=!0,s._dragging=!0,s.grabbingBar?s.newExtent=[i-s.grabPoint,i+s.barLength-s.grabPoint].map(n.unitToPaddedPx.invert):s.newExtent=[s.startExtent,n.unitToPaddedPx.invert(i)].sort(c),n.brush.filterSpecified=!0,s.extent=s.stayingIntervals.concat([s.newExtent]),s.brushCallback(n),b(r.parentNode)}function T(r,n){var i=_(n,n.height-o.mouse(r)[1]-2*a.verticalPadding),s="crosshair";i.clickableOrdinalRange?s="pointer":i.region&&(s=i.region+"-resize"),o.select(document.body).style("cursor",s)}function A(r){r.on("mousemove",function(r){o.event.preventDefault(),r.parent.inBrushDrag||T(this,r)}).on("mouseleave",function(r){r.parent.inBrushDrag||m()}).call(o.behavior.drag().on("dragstart",function(r){!function(r,n){o.event.sourceEvent.stopPropagation();var i=n.height-o.mouse(r)[1]-2*a.verticalPadding,s=n.unitToPaddedPx.invert(i),l=n.brush,c=_(n,i),u=c.interval,f=l.svgBrush;if(f.wasDragged=!1,f.grabbingBar="ns"===c.region,f.grabbingBar){var h=u.map(n.unitToPaddedPx);f.grabPoint=i-h[0]-a.verticalPadding,f.barLength=h[1]-h[0]}f.clickableOrdinalRange=c.clickableOrdinalRange,f.stayingIntervals=n.multiselect&&l.filterSpecified?l.filter.getConsolidated():[],u&&(f.stayingIntervals=f.stayingIntervals.filter(function(r){return r[0]!==u[0]&&r[1]!==u[1]})),f.startExtent=c.region?u["s"===c.region?1:0]:s,n.parent.inBrushDrag=!0,f.brushStartCallback()}(this,r)}).on("drag",function(r){w(this,r)}).on("dragend",function(r){!function(r,n){var i=n.brush,a=i.filter,s=i.svgBrush;s._dragging||(T(r,n),w(r,n),n.brush.svgBrush.wasDragged=!1),s._dragging=!1,o.event.sourceEvent.stopPropagation();var l=s.grabbingBar;if(s.grabbingBar=!1,s.grabLocation=void 0,n.parent.inBrushDrag=!1,m(),!s.wasDragged)return s.wasDragged=void 0,s.clickableOrdinalRange?i.filterSpecified&&n.multiselect?s.extent.push(s.clickableOrdinalRange):(s.extent=[s.clickableOrdinalRange],i.filterSpecified=!0):l?(s.extent=s.stayingIntervals,0===s.extent.length&&M(i)):M(i),s.brushCallback(n),b(r.parentNode),void s.brushEndCallback(i.filterSpecified?a.getConsolidated():[]);var c=function(){a.set(a.getConsolidated())};if(n.ordinal){var u=n.unitTickvals;u[u.length-1]<u[0]&&u.reverse(),s.newExtent=[p(0,u,s.newExtent[0],s.stayingIntervals),p(1,u,s.newExtent[1],s.stayingIntervals)];var f=s.newExtent[1]>s.newExtent[0];s.extent=s.stayingIntervals.concat(f?[s.newExtent]:[]),s.extent.length||M(i),s.brushCallback(n),f?b(r.parentNode,c):(c(),b(r.parentNode))}else c();s.brushEndCallback(i.filterSpecified?a.getConsolidated():[])}(this,r)}))}function k(r,n){return r[0]-n[0]}function M(r){r.filterSpecified=!1,r.svgBrush.extent=[[-1/0,1/0]]}function S(r){for(var n,i=r.slice(),a=[],o=i.shift();o;){for(n=o.slice();(o=i.shift())&&o[0]<=n[1];)n[1]=Math.max(n[1],o[1]);a.push(n)}return 1===a.length&&a[0][0]>a[0][1]&&(a=[]),a}r.exports={makeBrush:function(r,n,i,a,o,s){var l,u,f,h=(f=[],{set:function(r){1===(f=r.map(function(r){return r.slice().sort(c)}).sort(k)).length&&f[0][0]===-1/0&&f[0][1]===1/0&&(f=[[0,-1]]),l=S(f),u=f.reduce(function(r,n){return[Math.min(r[0],n[0]),Math.max(r[1],n[1])]},[1/0,-1/0])},get:function(){return f.slice()},getConsolidated:function(){return l},getBounds:function(){return u}});return h.set(i),{filter:h,filterSpecified:n,svgBrush:{extent:[],brushStartCallback:a,brushCallback:function(r){var n=r.brush,i=n.svgBrush.extent.map(function(r){return r.slice()}).slice();n.filter.set(i),o()},brushEndCallback:s}}},ensureAxisBrush:function(r,n,i){var o,c,f,h,p=r.selectAll("."+a.cn.axisBrush).data(l,s);p.enter().append("g").classed(a.cn.axisBrush,!0),o=i._context.staticPlot,(c=p.selectAll(".background").data(l)).enter().append("rect").classed("background",!0).call(d).call(y).style("pointer-events",o?"none":"auto").attr("transform",u(0,a.verticalPadding)),c.call(A).attr("height",function(r){return r.height-a.verticalPadding}),(f=p.selectAll(".highlight-shadow").data(l)).enter().append("line").classed("highlight-shadow",!0).attr("x",-a.bar.width/2).attr("stroke-width",a.bar.width+a.bar.strokeWidth).attr("stroke",n).attr("opacity",a.bar.strokeOpacity).attr("stroke-linecap","butt"),f.attr("y1",function(r){return r.height}).call(x),(h=p.selectAll(".highlight").data(l)).enter().append("line").classed("highlight",!0).attr("x",-a.bar.width/2).attr("stroke-width",a.bar.width-a.bar.strokeWidth).attr("stroke",a.bar.fillColor).attr("opacity",a.bar.fillOpacity).attr("stroke-linecap","butt"),h.attr("y1",function(r){return r.height}).call(x)},cleanRanges:function(r,n){if(Array.isArray(r[0])?(r=r.map(function(r){return r.sort(c)}),r=n.multiselect?S(r.sort(k)):[r[0]]):r=[r.sort(c)],n.tickvals){var i=n.tickvals.slice().sort(c);if(!(r=r.map(function(r){var n=[p(0,i,r[0],[]),p(1,i,r[1],[])];if(n[1]>n[0])return n}).filter(function(r){return r})).length)return}return r.length>1?r:r[0]}}},61664:function(r,n,i){r.exports={attributes:i(82296),supplyDefaults:i(60664),calc:i(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:i(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(r,n,i){var a=i(33428),o=i(84888)._M,s=i(24196),l=i(9616);n.name="parcoords",n.plot=function(r){var n=o(r.calcdata,"parcoords")[0];n.length&&s(r,n)},n.clean=function(r,n,i,a){var o=a._has&&a._has("parcoords"),s=n._has&&n._has("parcoords");o&&!s&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},n.toSVG=function(r){var n=r._fullLayout._glimages,i=a.select(r).selectAll(".svg-container");i.filter(function(r,n){return n===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:l.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){a.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(r,n,i){var a=i(3400).isArrayOrTypedArray,o=i(8932),s=i(71688).wrap;r.exports=function(r,n){var i,l;return o.hasColorscale(n,"line")&&a(n.line.color)?(i=n.line.color,l=o.extractOpts(n.line).colorscale,o.calc(r,n,{vals:i,containerStr:"line",cLetter:"c"})):(i=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=.5;return n}(n._length),l=[[0,n.line.color],[1,n.line.color]]),s({lineColor:i,cscale:l})}},30140:function(r){r.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(r,n,i){var a=i(3400),o=i(94288).hasColorscale,s=i(27260),l=i(86968).Q,c=i(51272),u=i(54460),f=i(82296),h=i(71864),p=i(30140).maxDimensionCount,d=i(26284);function y(r,n,i,o){function s(i,o){return a.coerce(r,n,f.dimensions,i,o)}var l=s("values"),c=s("visible");if(l&&l.length||(c=n.visible=!1),c){s("label"),s("tickvals"),s("ticktext"),s("tickformat");var p=s("range");n._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},u.setConvert(n._ax,o.layout),s("multiselect");var d=s("constraintrange");d&&(n.constraintrange=h.cleanRanges(d,n))}}r.exports=function(r,n,i,u){function h(i,o){return a.coerce(r,n,f,i,o)}var g=r.dimensions;Array.isArray(g)&&g.length>p&&(a.log("parcoords traces support up to "+p+" dimensions at the moment"),g.splice(p));var v=c(r,n,{name:"dimensions",layout:u,handleItemDefaults:y}),m=function(r,n,i,l,c){var u=c("line.color",i);if(o(r,"line")&&a.isArrayOrTypedArray(u)){if(u.length)return c("line.colorscale"),s(r,n,l,c,{prefix:"line.",cLetter:"c"}),u.length;n.line.color=i}return 1/0}(r,n,i,u,h);l(n,u,h),Array.isArray(v)&&v.length||(n.visible=!1),d(n,v,"values",m);var x=a.extendFlat({},u.font,{size:Math.round(u.font.size/1.2)});a.coerceFont(h,"labelfont",x),a.coerceFont(h,"tickfont",x,{autoShadowDflt:!0}),a.coerceFont(h,"rangefont",x),h("labelangle"),h("labelside"),h("unselected.line.color"),h("unselected.line.opacity")}},95724:function(r,n,i){var a=i(3400).isTypedArray;n.convertTypedArray=function(r){return a(r)?Array.prototype.slice.call(r):r},n.isOrdinal=function(r){return!!r.tickvals},n.isVisible=function(r){return r.visible||!("visible"in r)}},29928:function(r,n,i){var a=i(61664);a.plot=i(24196),r.exports=a},51352:function(r,n,i){var a=i(30140).maxDimensionCount,o=i(3400),s=new Uint8Array(4),l=new Uint8Array(4),c={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function u(r,n,i,a,o){var s=r._gl;s.enable(s.SCISSOR_TEST),s.scissor(n,i,a,o),r.clear({color:[0,0,0,0],depth:1})}function f(r,n){return(r>>>8*n)%256/255}function h(r){var n="0"+r;return n.substr(n.length-2)}function p(r){return r<a?"p"+h(r+1)+"_"+h(r+4):"colors"}function d(r){var n=Math.max(0,Math.floor(2047*r[0]),0),i=Math.min(2047,Math.ceil(2047*r[1]),2047);return[Math.min(n,i),Math.max(n,i)]}r.exports=function(r,n){var i,h,y,g,v=n.context,m=n.pick,x=n.regl,b=x._gl,_=b.getParameter(b.ALIASED_LINE_WIDTH_RANGE),w=Math.max(_[0],Math.min(_[1],n.viewModel.plotGlPixelRatio)),T={currentRafs:{},drawCompleted:!0,clearOnly:!1},A=function(r){for(var n={},i=0;i<=a;i+=4)n[p(i)]=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return n}(x),k=x.texture(c),M=[];E(n);var S=x({profile:!1,blend:{enable:v,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!v,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:x.prop("scissorX"),y:x.prop("scissorY"),width:x.prop("scissorWidth"),height:x.prop("scissorHeight")}},viewport:{x:x.prop("viewportX"),y:x.prop("viewportY"),width:x.prop("viewportWidth"),height:x.prop("viewportHeight")},dither:!1,vert:"precision highp float;\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}",frag:"precision highp float;\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}",primitive:"lines",lineWidth:w,attributes:A,uniforms:{resolution:x.prop("resolution"),viewBoxPos:x.prop("viewBoxPos"),viewBoxSize:x.prop("viewBoxSize"),dim0A:x.prop("dim0A"),dim1A:x.prop("dim1A"),dim0B:x.prop("dim0B"),dim1B:x.prop("dim1B"),dim0C:x.prop("dim0C"),dim1C:x.prop("dim1C"),dim0D:x.prop("dim0D"),dim1D:x.prop("dim1D"),loA:x.prop("loA"),hiA:x.prop("hiA"),loB:x.prop("loB"),hiB:x.prop("hiB"),loC:x.prop("loC"),hiC:x.prop("hiC"),loD:x.prop("loD"),hiD:x.prop("hiD"),palette:k,contextColor:x.prop("contextColor"),maskTexture:x.prop("maskTexture"),drwLayer:x.prop("drwLayer"),maskHeight:x.prop("maskHeight")},offset:x.prop("offset"),count:x.prop("count")});function E(r){i=r.model,y=(h=r.viewModel.dimensions.slice())[0]?h[0].values.length:0;var n=i.lines,s=m?n.color.map(function(r,i){return i/n.color.length}):n.color,l=function(r,n,i){for(var o=Array(r*(a+4)),s=0,l=0;l<r;l++){for(var c=0;c<a;c++)o[s++]=c<n.length?n[c].paddedUnitValues[l]:.5;o[s++]=f(l,2),o[s++]=f(l,1),o[s++]=f(l,0),o[s++]=Math.max(1e-6,Math.min(.999999,i[l]))}return o}(y,h,s);(function(r,n,i){for(var o=0;o<=a;o+=4)r[p(o)](function(r,n,i){for(var a=Array(8*n),o=0,s=0;s<n;s++)for(var l=0;l<2;l++)for(var c=0;c<4;c++){var u=4*r+c,f=i[64*s+u];63===u&&0===l&&(f*=-1),a[o++]=f}return a}(o/4,n,i))})(A,y,l),v||m||(k=x.texture(o.extendFlat({data:function(r,n){for(var i=Array(256),a=0;a<256;a++)i[a]=r(a/255).concat(255);return i}(i.unitToColor,0)},c)))}return{render:function(r,n,a){var l,c,f,p=r.length,b=1/0,_=-1/0;for(l=0;l<p;l++)r[l].dim0.canvasX<b&&(b=r[l].dim0.canvasX,c=l),r[l].dim1.canvasX>_&&(_=r[l].dim1.canvasX,f=l);0===p&&u(x,0,0,i.canvasWidth,i.canvasHeight);var w=function(r){var n,i,a,o=[[],[]];for(a=0;a<64;a++){var s=!r&&a<h.length?h[a].brush.filter.getBounds():[-1/0,1/0];o[0][a]=s[0],o[1][a]=s[1]}var l=Array(16384);for(n=0;n<16384;n++)l[n]=255;if(!r)for(n=0;n<h.length;n++){var c=n%8,u=(n-c)/8,f=Math.pow(2,c),p=h[n].brush.filter.get();if(!(p.length<2)){var y=d(p[0])[1];for(i=1;i<p.length;i++){var v=d(p[i]);for(a=y+1;a<v[0];a++)l[8*a+u]&=~f;y=Math.max(y,v[1])}}}var m={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:l};return g?g(m):g=x.texture(m),{maskTexture:g,maskHeight:2048,loA:o[0].slice(0,16),loB:o[0].slice(16,32),loC:o[0].slice(32,48),loD:o[0].slice(48,64),hiA:o[1].slice(0,16),hiB:o[1].slice(16,32),hiC:o[1].slice(32,48),hiD:o[1].slice(48,64)}}(v);for(l=0;l<p;l++){var A=r[l],k=A.dim0.crossfilterDimensionIndex,E=A.dim1.crossfilterDimensionIndex,I=A.canvasX,L=A.canvasY,C=I+A.panelSizeX,O=A.plotGlPixelRatio;if(n||!M[k]||M[k][0]!==I||M[k][1]!==C){M[k]=[I,C];var D=function(r,n,i,a,s,l,c,u,f,h,p,d,y,g){for(var v=[[],[]],m=0;m<64;m++)v[0][m]=m===s?1:0,v[1][m]=m===l?1:0;c*=g,u*=g,f*=g,h*=g;var x=r.lines.canvasOverdrag*g,b=r.domain,_=r.canvasWidth*g,w=r.canvasHeight*g,T=r.pad.l*g,A=r.pad.b*g,k=r.layoutHeight*g,M=r.layoutWidth*g,S=r.deselectedLines.color,E=r.deselectedLines.opacity;return o.extendFlat({key:p,resolution:[_,w],viewBoxPos:[c+x,u],viewBoxSize:[f,h],i0:s,i1:l,dim0A:v[0].slice(0,16),dim0B:v[0].slice(16,32),dim0C:v[0].slice(32,48),dim0D:v[0].slice(48,64),dim1A:v[1].slice(0,16),dim1B:v[1].slice(16,32),dim1C:v[1].slice(32,48),dim1D:v[1].slice(48,64),drwLayer:d,contextColor:[S[0]/255,S[1]/255,S[2]/255,"auto"!==E?S[3]*E:Math.max(1/255,Math.pow(1/r.lines.color.length,1/3))],scissorX:(a===n?0:c+x)+(T-x)+M*b.x[0],scissorWidth:(a===i?_-c+x:f+.5)+(a===n?c+x:0),scissorY:u+A+k*b.y[0],scissorHeight:h,viewportX:T-x+M*b.x[0],viewportY:A+k*b.y[0],viewportWidth:_,viewportHeight:w},y)}(i,c,f,l,k,E,I,L,A.panelSizeX,A.panelSizeY,A.dim0.crossfilterDimensionIndex,v?0:m?2:1,w,O);T.clearOnly=a,function(r,n,i,a,o,l){var c=l.key;i.drawCompleted||(function(r){r.read({x:0,y:0,width:1,height:1,data:s})}(r),i.drawCompleted=!0),function s(f){var h=Math.min(a,o-f*a);0===f&&(window.cancelAnimationFrame(i.currentRafs[c]),delete i.currentRafs[c],u(r,l.scissorX,l.scissorY,l.scissorWidth,l.viewBoxSize[1])),i.clearOnly||(l.count=2*h,l.offset=2*f*a,n(l),f*a+h<o&&(i.currentRafs[c]=window.requestAnimationFrame(function(){s(f+1)})),i.drawCompleted=!1)}(0)}(x,S,T,n?i.lines.blockLineCount:y,y,D)}}},readPixel:function(r,n){return x.read({x:r,y:n,width:1,height:1,data:l}),l},readPixels:function(r,n,i,a){var o=new Uint8Array(4*i*a);return x.read({x:r,y:n,width:i,height:a,data:o}),o},destroy:function(){for(var n in r.style["pointer-events"]="none",k.destroy(),g&&g.destroy(),A)A[n].destroy()},update:E}}},26284:function(r){r.exports=function(r,n,i,a){var o,s;for(a||(a=1/0),o=0;o<n.length;o++)(s=n[o]).visible&&(a=Math.min(a,s[i].length));for(a===1/0&&(a=0),r._length=a,o=0;o<n.length;o++)(s=n[o]).visible&&(s._length=a);return a}},36336:function(r,n,i){var a=i(33428),o=i(3400),s=o.isArrayOrTypedArray,l=o.numberFormat,c=i(96824),u=i(54460),f=o.strRotate,h=o.strTranslate,p=i(72736),d=i(43616),y=i(8932),g=i(71688),v=g.keyFun,m=g.repeat,x=g.unwrap,b=i(95724),_=i(30140),w=i(71864),T=i(51352);function A(r,n,i){return o.aggNums(r,null,n,i)}function k(r,n){return S(A(Math.min,r,n),A(Math.max,r,n))}function M(r){var n=r.range;return n?S(n[0],n[1]):k(r.values,r._length)}function S(r,n){return!isNaN(r)&&isFinite(r)||(r=0),!isNaN(n)&&isFinite(n)||(n=0),r===n&&(0===r?(r-=1,n+=1):(r*=.9,n*=1.1)),[r,n]}function E(r){return r.dimensions.some(function(r){return r.brush.filterSpecified})}function I(r,n,i){var s,l,u,f=x(n),h=f.trace,p=b.convertTypedArray(f.lineColor),d=h.line,g={color:c(h.unselected.line.color),opacity:h.unselected.line.opacity},v=y.extractOpts(d),m=v.reversescale?y.flipScale(f.cscale):f.cscale,w=h.domain,T=h.dimensions,A=r.width,k=h.labelangle,S=h.labelside,E=h.labelfont,I=h.tickfont,L=h.rangefont,C=o.extendDeepNoArrays({},d,{color:p.map(a.scale.linear().domain(M({values:p,range:[v.min,v.max],_length:h._length}))),blockLineCount:_.blockLineCount,canvasOverdrag:_.overdrag*_.canvasPixelRatio}),O=Math.floor(A*(w.x[1]-w.x[0])),D=Math.floor(r.height*(w.y[1]-w.y[0])),P=r.margin||{l:80,r:80,t:100,b:80};return{key:i,colCount:T.filter(b.isVisible).length,dimensions:T,tickDistance:_.tickDistance,unitToColor:(s=m.map(function(r){return r[0]}),l=m.map(function(r){var n=c(r[1]);return a.rgb("rgb("+n[0]+","+n[1]+","+n[2]+")")}),u="rgb".split("").map(function(r){return a.scale.linear().clamp(!0).domain(s).range(l.map(function(n){return n[r]}))}),function(r){return u.map(function(n){return n(r)})}),lines:C,deselectedLines:g,labelAngle:k,labelSide:S,labelFont:E,tickFont:I,rangeFont:L,layoutWidth:A,layoutHeight:r.height,domain:w,translateX:w.x[0]*A,translateY:r.height-w.y[1]*r.height,pad:P,canvasWidth:O*_.canvasPixelRatio+2*C.canvasOverdrag,canvasHeight:D*_.canvasPixelRatio,width:O,height:D,canvasPixelRatio:_.canvasPixelRatio}}function L(r,n,i){var c,u=i.width,f=i.height,h=i.dimensions,p=i.canvasPixelRatio,d=function(r){return u*r/Math.max(1,i.colCount-1)},y=_.verticalPadding/f,g=(c=_.verticalPadding,a.scale.linear().range([c,f-c])),v={key:i.key,xScale:d,model:i,inBrushDrag:!1},m={};return v.dimensions=h.filter(b.isVisible).map(function(c,u){var h,x,T,A,k,S=a.scale.linear().domain(M(c)).range([y,1-y]),I=m[c.label];m[c.label]=(I||0)+1;var L=c.label+(I?"__"+I:""),C=c.constraintrange,O=C&&C.length;O&&!s(C[0])&&(C=[C]);var D=O?C.map(function(r){return r.map(S)}):[[-1/0,1/0]],P=c.values;P.length>c._length&&(P=P.slice(0,c._length));var B,R=c.tickvals;function z(r,n){return{val:r,text:B[n]}}function F(r,n){return r.val-n.val}if(s(R)&&R.length){o.isTypedArray(R)&&(R=Array.from(R)),s(B=c.ticktext)&&B.length?B.length>R.length?B=B.slice(0,R.length):R.length>B.length&&(R=R.slice(0,B.length)):B=R.map(l(c.tickformat));for(var N=1;N<R.length;N++)if(R[N]<R[N-1]){for(var U=R.map(z).sort(F),j=0;j<R.length;j++)R[j]=U[j].val,B[j]=U[j].text;break}}else R=void 0;return P=b.convertTypedArray(P),{key:L,label:c.label,tickFormat:c.tickformat,tickvals:R,ticktext:B,ordinal:b.isOrdinal(c),multiselect:c.multiselect,xIndex:u,crossfilterDimensionIndex:u,visibleIndex:c._index,height:f,values:P,paddedUnitValues:P.map(S),unitTickvals:R&&R.map(S),xScale:d,x:d(u),canvasX:d(u)*p,unitToPaddedPx:g,domainScale:(h=_.verticalPadding,x=R,T=B,k=M(c),x?a.scale.ordinal().domain(x.map((A=l(c.tickformat),T?function(r,n){var i=T[n];return null==i?A(r):i}:A))).range(x.map(function(r){return f-h+(r-k[0])/(k[1]-k[0])*(2*h-f)})):a.scale.linear().domain(k).range([f-h,h])),ordinalScale:function(r){if(r.tickvals){var n=M(r);return a.scale.ordinal().domain(r.tickvals).range(r.tickvals.map(function(r){return(r-n[0])/(n[1]-n[0])}))}}(c),parent:v,model:i,brush:w.makeBrush(r,O,D,function(){r.linePickActive(!1)},function(){v.focusLayer&&v.focusLayer.render(v.panels,!0);var n=E(v);!r.contextShown()&&n?(v.contextLayer&&v.contextLayer.render(v.panels,!0),r.contextShown(!0)):r.contextShown()&&!n&&(v.contextLayer&&v.contextLayer.render(v.panels,!0,!0),r.contextShown(!1))},function(i){if(v.focusLayer.render(v.panels,!0),v.pickLayer&&v.pickLayer.render(v.panels,!0),r.linePickActive(!0),n&&n.filterChanged){var a=S.invert,s=i.map(function(r){return r.map(a).sort(o.sorterAsc)}).sort(function(r,n){return r[0]-n[0]});n.filterChanged(v.key,c._index,s)}})}}),v}function C(r){r.classed(_.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(r,n){var i=r*Math.PI/180;return{dir:"top"===n?1:-1,dx:Math.sin(i),dy:Math.cos(i),degrees:r}}function D(r,n,i){for(var a=n.panels||(n.panels=[]),o=r.data(),s=0;s<o.length-1;s++){var l=a[s]||(a[s]={}),c=o[s],u=o[s+1];l.dim0=c,l.dim1=u,l.canvasX=c.canvasX,l.panelSizeX=u.canvasX-c.canvasX,l.panelSizeY=n.model.canvasHeight,l.y=0,l.canvasY=0,l.plotGlPixelRatio=i}}function P(r,n){return u.tickText(r._ax,n,!1).text}function B(r,n){if(r.ordinal)return"";var i=r.domainScale.domain(),a=i[n?i.length-1:0];return P(r.model.dimensions[r.visibleIndex],a)}r.exports=function(r,n,i,s){var l=r._context.staticPlot,c=r._fullLayout,y=c._toppaper,g=c._glcontainer,A=r._context.plotGlPixelRatio,M=r._fullLayout.paper_bgcolor;!function(r){for(var n=0;n<r.length;n++)for(var i=0;i<r[n].length;i++)for(var a=r[n][i].trace,o=a.dimensions,s=0;s<o.length;s++){var l=o[s].values,c=o[s]._ax;c&&(c.range?c.range=S(c.range[0],c.range[1]):c.range=k(l,a._length),c.dtick||(c.dtick=.01*(Math.abs(c.range[1]-c.range[0])||1)),c.tickformat=o[s].tickformat,u.calcTicks(c),c.cleanRange())}}(n);var R,z,F=(R=!0,z=!1,{linePickActive:function(r){return arguments.length?R=!!r:R},contextShown:function(r){return arguments.length?z=!!r:z}}),N=n.filter(function(r){return x(r).trace.visible}).map(I.bind(0,i)).map(L.bind(0,F,s));g.each(function(r,n){return o.extendFlat(r,N[n])});var U=g.selectAll(".gl-canvas").each(function(r){r.viewModel=N[0],r.viewModel.plotGlPixelRatio=A,r.viewModel.paperColor=M,r.model=r.viewModel?r.viewModel.model:null}),j=null;U.filter(function(r){return r.pick}).style("pointer-events",l?"none":"auto").on("mousemove",function(r){if(F.linePickActive()&&r.lineLayer&&s&&s.hover){var n=a.event,i=this.width,o=this.height,l=a.mouse(this),c=l[0],u=l[1];if(!(c<0)&&!(u<0)&&!(c>=i)&&!(u>=o)){var f=r.lineLayer.readPixel(c,o-1-u),h=0!==f[3],p=h?f[2]+256*(f[1]+256*f[0]):null,d={x:c,y:u,clientX:n.clientX,clientY:n.clientY,dataIndex:r.model.key,curveNumber:p};p!==j&&(h?s.hover(d):s.unhover&&s.unhover(d),j=p)}}}),U.style("opacity",function(r){return r.pick?0:1}),y.style("background","rgba(255, 255, 255, 0)");var V=y.selectAll("."+_.cn.parcoords).data(N,v);V.exit().remove(),V.enter().append("g").classed(_.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),V.attr("transform",function(r){return h(r.model.translateX,r.model.translateY)});var H=V.selectAll("."+_.cn.parcoordsControlView).data(m,v);H.enter().append("g").classed(_.cn.parcoordsControlView,!0),H.attr("transform",function(r){return h(r.model.pad.l,r.model.pad.t)});var q=H.selectAll("."+_.cn.yAxis).data(function(r){return r.dimensions},v);q.enter().append("g").classed(_.cn.yAxis,!0),H.each(function(r){D(q,r,A)}),U.each(function(r){if(r.viewModel){!r.lineLayer||s?r.lineLayer=T(this,r):r.lineLayer.update(r),(r.key||0===r.key)&&(r.viewModel[r.key]=r.lineLayer);var n=!r.context||s;r.lineLayer.render(r.viewModel.panels,n)}}),q.attr("transform",function(r){return h(r.xScale(r.xIndex),0)}),q.call(a.behavior.drag().origin(function(r){return r}).on("drag",function(r){var n=r.parent;F.linePickActive(!1),r.x=Math.max(-_.overdrag,Math.min(r.model.width+_.overdrag,a.event.x)),r.canvasX=r.x*r.model.canvasPixelRatio,q.sort(function(r,n){return r.x-n.x}).each(function(n,i){n.xIndex=i,n.x=r===n?n.x:n.xScale(n.xIndex),n.canvasX=n.x*n.model.canvasPixelRatio}),D(q,n,A),q.filter(function(n){return 0!==Math.abs(r.xIndex-n.xIndex)}).attr("transform",function(r){return h(r.xScale(r.xIndex),0)}),a.select(this).attr("transform",h(r.x,0)),q.each(function(i,a,o){o===r.parent.key&&(n.dimensions[a]=i)}),n.contextLayer&&n.contextLayer.render(n.panels,!1,!E(n)),n.focusLayer.render&&n.focusLayer.render(n.panels)}).on("dragend",function(r){var n=r.parent;r.x=r.xScale(r.xIndex),r.canvasX=r.x*r.model.canvasPixelRatio,D(q,n,A),a.select(this).attr("transform",function(r){return h(r.x,0)}),n.contextLayer&&n.contextLayer.render(n.panels,!1,!E(n)),n.focusLayer&&n.focusLayer.render(n.panels),n.pickLayer&&n.pickLayer.render(n.panels,!0),F.linePickActive(!0),s&&s.axesMoved&&s.axesMoved(n.key,n.dimensions.map(function(r){return r.crossfilterDimensionIndex}))})),q.exit().remove();var G=q.selectAll("."+_.cn.axisOverlays).data(m,v);G.enter().append("g").classed(_.cn.axisOverlays,!0),G.selectAll("."+_.cn.axis).remove();var W=G.selectAll("."+_.cn.axis).data(m,v);W.enter().append("g").classed(_.cn.axis,!0),W.each(function(r){var n=r.model.height/r.model.tickDistance,i=r.domainScale,o=i.domain();a.select(this).call(a.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(n,r.tickFormat).tickValues(r.ordinal?o:null).tickFormat(function(n){return b.isOrdinal(r)?n:P(r.model.dimensions[r.visibleIndex],n)}).scale(i)),d.font(W.selectAll("text"),r.model.tickFont)}),W.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),W.selectAll("text").style("cursor","default");var Y=G.selectAll("."+_.cn.axisHeading).data(m,v);Y.enter().append("g").classed(_.cn.axisHeading,!0);var Z=Y.selectAll("."+_.cn.axisTitle).data(m,v);Z.enter().append("text").classed(_.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",l?"none":"auto"),Z.text(function(r){return r.label}).each(function(n){var i=a.select(this);d.font(i,n.model.labelFont),p.convertToTspans(i,r)}).attr("transform",function(r){var n=O(r.model.labelAngle,r.model.labelSide),i=_.axisTitleOffset;return(n.dir>0?"":h(0,2*i+r.model.height))+f(n.degrees)+h(-i*n.dx,-i*n.dy)}).attr("text-anchor",function(r){var n=O(r.model.labelAngle,r.model.labelSide);return 2*Math.abs(n.dx)>Math.abs(n.dy)?n.dir*n.dx<0?"start":"end":"middle"});var X=G.selectAll("."+_.cn.axisExtent).data(m,v);X.enter().append("g").classed(_.cn.axisExtent,!0);var K=X.selectAll("."+_.cn.axisExtentTop).data(m,v);K.enter().append("g").classed(_.cn.axisExtentTop,!0),K.attr("transform",h(0,-_.axisExtentOffset));var J=K.selectAll("."+_.cn.axisExtentTopText).data(m,v);J.enter().append("text").classed(_.cn.axisExtentTopText,!0).call(C),J.text(function(r){return B(r,!0)}).each(function(r){d.font(a.select(this),r.model.rangeFont)});var $=X.selectAll("."+_.cn.axisExtentBottom).data(m,v);$.enter().append("g").classed(_.cn.axisExtentBottom,!0),$.attr("transform",function(r){return h(0,r.model.height+_.axisExtentOffset)});var Q=$.selectAll("."+_.cn.axisExtentBottomText).data(m,v);Q.enter().append("text").classed(_.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),Q.text(function(r){return B(r,!1)}).each(function(r){d.font(a.select(this),r.model.rangeFont)}),w.ensureAxisBrush(G,M,r)}},24196:function(r,n,i){var a=i(36336),o=i(5048),s=i(95724).isVisible,l={};function c(r,n,i){var a=n.indexOf(i),o=r.indexOf(a);return -1===o&&(o+=n.length),o}(r.exports=function(r,n){var i=r._fullLayout;if(o(r,[],l)){var u={},f={},h={},p={},d=i._size;n.forEach(function(n,i){var a=n[0].trace;h[i]=a.index;var o=p[i]=a._fullInput.index;u[i]=r.data[o].dimensions,f[i]=r.data[o].dimensions.slice()}),a(r,n,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(n,a,o){var s=f[n][a],l=o.map(function(r){return r.slice()}),c="dimensions["+a+"].constraintrange",u=i._tracePreGUI[r._fullData[h[n]]._fullInput.uid];if(void 0===u[c]){var d=s.constraintrange;u[c]=d||null}var y=r._fullData[h[n]].dimensions[a];l.length?(1===l.length&&(l=l[0]),s.constraintrange=l,y.constraintrange=l.slice(),l=[l]):(delete s.constraintrange,delete y.constraintrange,l=null);var g={};g[c]=l,r.emit("plotly_restyle",[g,[p[n]]])},hover:function(n){r.emit("plotly_hover",n)},unhover:function(n){r.emit("plotly_unhover",n)},axesMoved:function(n,i){var a,o=(a=f[n].filter(s),function(r,n){return c(i,a,r)-c(i,a,n)});u[n].sort(o),f[n].filter(function(r){return!s(r)}).sort(function(r){return f[n].indexOf(r)}).forEach(function(r){u[n].splice(u[n].indexOf(r),1),u[n].splice(f[n].indexOf(r),0,r)}),r.emit("plotly_restyle",[{dimensions:[u[n]]},[p[n]]])}})}}).reglPrecompiled=l},74996:function(r,n,i){var a=i(45464),o=i(86968).u,s=i(25376),l=i(22548),c=i(21776).Ks,u=i(21776).Gw,f=i(92880).extendFlat,h=i(98192).c,p=s({editType:"plot",arrayOk:!0,colorEditType:"plot"});r.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:h,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:f({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:c({},{keys:["label","color","value","percent","text"]}),texttemplate:u({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:f({},p,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:f({},p,{}),outsidetextfont:f({},p,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:f({},p,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:o({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:f({},p,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(r,n,i){var a=i(7316);n.name="pie",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},45768:function(r,n,i){var a=i(38248),o=i(49760),s=i(76308),l={};function c(r){return function(n,i){return!!n&&!!(n=o(n)).isValid()&&(n=s.addOpacity(n,n.getAlpha()),r[i]||(r[i]=n),n)}}function u(r,n){var i,a=JSON.stringify(r),s=n[a];if(!s){for(s=r.slice(),i=0;i<r.length;i++)s.push(o(r[i]).lighten(20).toHexString());for(i=0;i<r.length;i++)s.push(o(r[i]).darken(20).toHexString());n[a]=s}return s}r.exports={calc:function(r,n){var i,o,s=[],l=r._fullLayout,u=l.hiddenlabels||[],f=n.labels,h=n.marker.colors||[],p=n.values,d=n._length,y=n._hasValues&&d;if(n.dlabel)for(f=Array(d),i=0;i<d;i++)f[i]=String(n.label0+i*n.dlabel);var g={},v=c(l["_"+n.type+"colormap"]),m=0,x=!1;for(i=0;i<d;i++){if(y){if(!a(b=p[i]))continue;b=+b}else b=1;void 0!==(_=f[i])&&""!==_||(_=i);var b,_,w,T=g[_=String(_)];void 0===T?(g[_]=s.length,(w=-1!==u.indexOf(_))||(m+=b),s.push({v:b,label:_,color:v(h[i],_),i:i,pts:[i],hidden:w})):(x=!0,(o=s[T]).v+=b,o.pts.push(i),o.hidden||(m+=b),!1===o.color&&h[i]&&(o.color=v(h[i],_)))}return s=s.filter(function(r){return r.v>=0}),("funnelarea"===n.type?x:n.sort)&&s.sort(function(r,n){return n.v-r.v}),s[0]&&(s[0].vTotal=m),s},crossTraceCalc:function(r,n){var i=(n||{}).type;i||(i="pie");var a=r._fullLayout,o=r.calcdata,s=a[i+"colorway"],c=a["_"+i+"colormap"];a["extend"+i+"colors"]&&(s=u(s,l));for(var f=0,h=0;h<o.length;h++){var p=o[h];if(p[0].trace.type===i)for(var d=0;d<p.length;d++){var y=p[d];!1===y.color&&(c[y.label]?y.color=c[y.label]:(c[y.label]=y.color=s[f%s.length],f++))}}},makePullColorFn:c,generateExtendedColors:u}},74174:function(r,n,i){var a=i(38248),o=i(3400),s=i(74996),l=i(86968).Q,c=i(31508).handleText,u=i(3400).coercePattern;function f(r,n){var i=o.isArrayOrTypedArray(r),s=o.isArrayOrTypedArray(n),l=Math.min(i?r.length:1/0,s?n.length:1/0);if(isFinite(l)||(l=0),l&&s){for(var c,u=0;u<l;u++){var f=n[u];if(a(f)&&f>0){c=!0;break}}c||(l=0)}return{hasLabels:i,hasValues:s,len:l}}function h(r,n,i,a,o){a("marker.line.width")&&a("marker.line.color",o?void 0:i.paper_bgcolor);var s=a("marker.colors");u(a,"marker.pattern",s),r.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=r.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=i.paper_bgcolor)}r.exports={handleLabelsAndValues:f,handleMarkerDefaults:h,supplyDefaults:function(r,n,i,a){function u(i,a){return o.coerce(r,n,s,i,a)}var p=f(u("labels"),u("values")),d=p.len;if(n._hasLabels=p.hasLabels,n._hasValues=p.hasValues,!n._hasLabels&&n._hasValues&&(u("label0"),u("dlabel")),d){n._length=d,h(r,n,a,u,!0),u("scalegroup");var y,g=u("text"),v=u("texttemplate");if(v||(y=u("textinfo",o.isArrayOrTypedArray(g)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),v||y&&"none"!==y){var m=u("textposition");c(r,n,a,u,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&u("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&u("insidetextorientation")}else"none"===y&&u("textposition","none");l(n,a,u);var x=u("hole");if(u("title.text")){var b=u("title.position",x?"middle center":"top center");x||"middle center"!==b||(n.title.position="top center"),o.coerceFont(u,"title.font",a.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else n.visible=!1}}},53644:function(r,n,i){var a=i(10624).appendArrayMultiPointValues;r.exports=function(r,n){var i={curveNumber:n.index,pointNumbers:r.pts,data:n._input,fullData:n,label:r.label,color:r.color,value:r.v,percent:r.percent,text:r.text,bbox:r.bbox,v:r.v};return 1===r.pts.length&&(i.pointNumber=i.i=r.pts[0]),a(i,n,r.pts),"funnelarea"===n.type&&(delete i.v,delete i.i),i}},21552:function(r,n,i){var a=i(43616),o=i(76308);r.exports=function(r,n,i,s){var l=i.marker.pattern;l&&l.shape?a.pointStyle(r,i,s,n):o.fill(r,n.color)}},69656:function(r,n,i){var a=i(3400);function o(r){return -1!==r.indexOf("e")?r.replace(/[.]?0+e/,"e"):-1!==r.indexOf(".")?r.replace(/[.]?0+$/,""):r}n.formatPiePercent=function(r,n){var i=o((100*r).toPrecision(3));return a.numSeparate(i,n)+"%"},n.formatPieValue=function(r,n){var i=o(r.toPrecision(10));return a.numSeparate(i,n)},n.getFirstFilled=function(r,n){if(a.isArrayOrTypedArray(r))for(var i=0;i<n.length;i++){var o=r[n[i]];if(o||0===o||""===o)return o}},n.castOption=function(r,i){return a.isArrayOrTypedArray(r)?n.getFirstFilled(r,i):r||void 0},n.getRotationAngle=function(r){return("auto"===r?0:r)*Math.PI/180}},75792:function(r,n,i){r.exports={attributes:i(74996),supplyDefaults:i(74174).supplyDefaults,supplyLayoutDefaults:i(90248),layoutAttributes:i(85204),calc:i(45768).calc,crossTraceCalc:i(45768).crossTraceCalc,plot:i(37820).plot,style:i(22152),styleOne:i(10528),moduleType:"trace",name:"pie",basePlotModule:i(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(r){r.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(r,n,i){var a=i(3400),o=i(85204);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("hiddenlabels"),i("piecolorway",n.colorway),i("extendpiecolors")}},37820:function(r,n,i){var a=i(33428),o=i(7316),s=i(93024),l=i(76308),c=i(43616),u=i(3400),f=u.strScale,h=u.strTranslate,p=i(72736),d=i(82744),y=d.recordMinTextSize,g=d.clearMinTextSize,v=i(78048).TEXTPAD,m=i(69656),x=i(53644),b=i(3400).isValidTextValue;function _(r,n,i){var o=i[0],l=o.cx,c=o.cy,f=o.trace,h="funnelarea"===f.type;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(r){var i=n._fullLayout,p=n._fullData[f.index];if(!n._dragging&&!1!==i.hovermode){var d=p.hoverinfo;if(Array.isArray(d)&&(d=s.castHoverinfo({hoverinfo:[m.castOption(d,r.pts)],_module:f._module},i,0)),"all"===d&&(d="label+text+value+percent+name"),p.hovertemplate||"none"!==d&&"skip"!==d&&d){var y=r.rInscribed||0,g=l+r.pxmid[0]*(1-y),v=c+r.pxmid[1]*(1-y),b=i.separators,_=[];if(d&&-1!==d.indexOf("label")&&_.push(r.label),r.text=m.castOption(p.hovertext||p.text,r.pts),d&&-1!==d.indexOf("text")){var w=r.text;u.isValidTextValue(w)&&_.push(w)}r.value=r.v,r.valueLabel=m.formatPieValue(r.v,b),d&&-1!==d.indexOf("value")&&_.push(r.valueLabel),r.percent=r.v/o.vTotal,r.percentLabel=m.formatPiePercent(r.percent,b),d&&-1!==d.indexOf("percent")&&_.push(r.percentLabel);var T=p.hoverlabel,A=T.font,k=[];s.loneHover({trace:f,x0:g-y*o.r,x1:g+y*o.r,y:v,_x0:h?l+r.TL[0]:g-y*o.r,_x1:h?l+r.TR[0]:g+y*o.r,_y0:h?c+r.TL[1]:v-y*o.r,_y1:h?c+r.BL[1]:v+y*o.r,text:_.join("<br>"),name:p.hovertemplate||-1!==d.indexOf("name")?p.name:void 0,idealAlign:r.pxmid[0]<0?"left":"right",color:m.castOption(T.bgcolor,r.pts)||r.color,borderColor:m.castOption(T.bordercolor,r.pts),fontFamily:m.castOption(A.family,r.pts),fontSize:m.castOption(A.size,r.pts),fontColor:m.castOption(A.color,r.pts),nameLength:m.castOption(T.namelength,r.pts),textAlign:m.castOption(T.align,r.pts),hovertemplate:m.castOption(p.hovertemplate,r.pts),hovertemplateLabels:r,eventData:[x(r,p)]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:n,inOut_bbox:k}),r.bbox=k[0],f._hasHoverLabel=!0}f._hasHoverEvent=!0,n.emit("plotly_hover",{points:[x(r,p)],event:a.event})}}),r.on("mouseout",function(r){var i=n._fullLayout,o=n._fullData[f.index],l=a.select(this).datum();f._hasHoverEvent&&(r.originalEvent=a.event,n.emit("plotly_unhover",{points:[x(l,o)],event:a.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(s.loneUnhover(i._hoverlayer.node()),f._hasHoverLabel=!1)}),r.on("click",function(r){var i=n._fullLayout,o=n._fullData[f.index];n._dragging||!1===i.hovermode||(n._hoverdata=[x(r,o)],s.click(n,a.event))})}function w(r,n,i){var a=m.castOption(r.insidetextfont.color,n.pts);!a&&r._input.textfont&&(a=m.castOption(r._input.textfont.color,n.pts));var o=m.castOption(r.insidetextfont.family,n.pts)||m.castOption(r.textfont.family,n.pts)||i.family,s=m.castOption(r.insidetextfont.size,n.pts)||m.castOption(r.textfont.size,n.pts)||i.size,c=m.castOption(r.insidetextfont.weight,n.pts)||m.castOption(r.textfont.weight,n.pts)||i.weight,u=m.castOption(r.insidetextfont.style,n.pts)||m.castOption(r.textfont.style,n.pts)||i.style,f=m.castOption(r.insidetextfont.variant,n.pts)||m.castOption(r.textfont.variant,n.pts)||i.variant,h=m.castOption(r.insidetextfont.textcase,n.pts)||m.castOption(r.textfont.textcase,n.pts)||i.textcase,p=m.castOption(r.insidetextfont.lineposition,n.pts)||m.castOption(r.textfont.lineposition,n.pts)||i.lineposition,d=m.castOption(r.insidetextfont.shadow,n.pts)||m.castOption(r.textfont.shadow,n.pts)||i.shadow;return{color:a||l.contrast(n.color),family:o,size:s,weight:c,style:u,variant:f,textcase:h,lineposition:p,shadow:d}}function T(r,n){for(var i,a,o=0;o<r.length;o++)if((a=(i=r[o][0]).trace).title.text){var s=a.title.text;a._meta&&(s=u.templateString(s,a._meta));var l=c.tester.append("text").attr("data-notex",1).text(s).call(c.font,a.title.font).call(p.convertToTspans,n),f=c.bBox(l.node(),!0);i.titleBox={width:f.width,height:f.height},l.remove()}}function A(r,n,i){var a=i.r||n.rpx1,o=n.rInscribed;if(n.startangle===n.stopangle)return{rCenter:1-o,scale:0,rotate:0,textPosAngle:0};var s,l=n.ring,c=1===l&&Math.abs(n.startangle-n.stopangle)===2*Math.PI,u=n.halfangle,f=n.midangle,h=i.trace.insidetextorientation,p="horizontal"===h,d="tangential"===h,y="radial"===h,g="auto"===h,v=[];if(!g){var m,x=function(i,o){if(c=n.startangle,u=n.stopangle,c>i&&i>u||c<i&&i<u){var c,u,f=Math.abs(i-n.startangle),h=Math.abs(i-n.stopangle),p=f<h?f:h;(s="tan"===o?M(r,a,l,p,0):k(r,a,l,p,Math.PI/2)).textPosAngle=i,v.push(s)}};if(p||d){for(m=4;m>=-4;m-=2)x(Math.PI*m,"tan");for(m=4;m>=-4;m-=2)x(Math.PI*(m+1),"tan")}if(p||y){for(m=4;m>=-4;m-=2)x(Math.PI*(m+1.5),"rad");for(m=4;m>=-4;m-=2)x(Math.PI*(m+.5),"rad")}}if(c||g||p){if((s={scale:o*a*2/Math.sqrt(r.width*r.width+r.height*r.height),rCenter:1-o,rotate:0}).textPosAngle=(n.startangle+n.stopangle)/2,s.scale>=1)return s;v.push(s)}(g||y)&&((s=k(r,a,l,u,f)).textPosAngle=(n.startangle+n.stopangle)/2,v.push(s)),(g||d)&&((s=M(r,a,l,u,f)).textPosAngle=(n.startangle+n.stopangle)/2,v.push(s));for(var b=0,_=0,w=0;w<v.length;w++){var T=v[w].scale;if(_<T&&(_=T,b=w),!g&&_>=1)break}return v[b]}function k(r,n,i,a,o){n=Math.max(0,n-2*v);var s=r.width/r.height,l=I(s,a,n,i);return{scale:2*l/r.height,rCenter:S(s,l/n),rotate:E(o)}}function M(r,n,i,a,o){n=Math.max(0,n-2*v);var s=r.height/r.width,l=I(s,a,n,i);return{scale:2*l/r.width,rCenter:S(s,l/n),rotate:E(o+Math.PI/2)}}function S(r,n){return Math.cos(n)-r*n}function E(r){return(180/Math.PI*r+720)%180-90}function I(r,n,i,a){var o=r+1/(2*Math.tan(n));return i*Math.min(1/(Math.sqrt(o*o+.5)+o),a/(Math.sqrt(r*r+a/2)+r))}function L(r,n){var i=n.pxmid[0],a=n.pxmid[1],o=r.width/2,s=r.height/2;return i<0&&(o*=-1),a<0&&(s*=-1),{scale:1,rCenter:1,rotate:0,x:o+Math.abs(s)*(o>0?1:-1)/2,y:s/(1+i*i/(a*a)),outside:!0}}function C(r,n){var i,a,o,s=r.trace,l={x:r.cx,y:r.cy},c={tx:0,ty:0};c.ty+=s.title.font.size,o=D(s),-1!==s.title.position.indexOf("top")?(l.y-=(1+o)*r.r,c.ty-=r.titleBox.height):-1!==s.title.position.indexOf("bottom")&&(l.y+=(1+o)*r.r);var u,f=r.r/(void 0===(u=r.trace.aspectratio)?1:u),h=n.w*(s.domain.x[1]-s.domain.x[0])/2;return -1!==s.title.position.indexOf("left")?(h+=f,l.x-=(1+o)*f,c.tx+=r.titleBox.width/2):-1!==s.title.position.indexOf("center")?h*=2:-1!==s.title.position.indexOf("right")&&(h+=f,l.x+=(1+o)*f,c.tx-=r.titleBox.width/2),i=h/r.titleBox.width,a=O(r,n)/r.titleBox.height,{x:l.x,y:l.y,scale:Math.min(i,a),tx:c.tx,ty:c.ty}}function O(r,n){var i=r.trace,a=n.h*(i.domain.y[1]-i.domain.y[0]);return Math.min(r.titleBox.height,a/2)}function D(r){var n,i=r.pull;if(!i)return 0;if(u.isArrayOrTypedArray(i))for(i=0,n=0;n<r.pull.length;n++)r.pull[n]>i&&(i=r.pull[n]);return i}function P(r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a][0],s=o.trace,l=s.domain,c=n.w*(l.x[1]-l.x[0]),u=n.h*(l.y[1]-l.y[0]);s.title.text&&"middle center"!==s.title.position&&(u-=O(o,n));var f=c/2,h=u/2;"funnelarea"!==s.type||s.scalegroup||(h/=s.aspectratio),o.r=Math.min(f,h)/(1+D(s)),o.cx=n.l+n.w*(s.domain.x[1]+s.domain.x[0])/2,o.cy=n.t+n.h*(1-s.domain.y[0])-u/2,s.title.text&&-1!==s.title.position.indexOf("bottom")&&(o.cy-=O(o,n)),s.scalegroup&&-1===i.indexOf(s.scalegroup)&&i.push(s.scalegroup)}!function(r,n){for(var i,a,o,s=0;s<n.length;s++){var l,c,u,f=1/0,h=n[s];for(a=0;a<r.length;a++)(o=(i=r[a][0]).trace).scalegroup===h&&("pie"===o.type?l=i.r*i.r:"funnelarea"===o.type&&(o.aspectratio>1?u=(c=i.r)/o.aspectratio:c=(u=i.r)*o.aspectratio,l=(c*=(1+o.baseratio)/2)*u),f=Math.min(f,l/i.vTotal));for(a=0;a<r.length;a++)if((o=(i=r[a][0]).trace).scalegroup===h){var p=f*i.vTotal;"funnelarea"===o.type&&(p/=(1+o.baseratio)/2,p/=o.aspectratio),i.r=Math.sqrt(p)}}}(r,i)}function B(r,n){return[r*Math.sin(n),-r*Math.cos(n)]}function R(r,n,i){var a=r._fullLayout,o=i.trace,s=o.texttemplate,l=o.textinfo;if(!s&&l&&"none"!==l){var c,f=l.split("+"),h=function(r){return -1!==f.indexOf(r)},p=h("label"),d=h("text"),y=h("value"),g=h("percent"),v=a.separators;if(c=p?[n.label]:[],d){var x=m.getFirstFilled(o.text,n.pts);b(x)&&c.push(x)}y&&c.push(m.formatPieValue(n.v,v)),g&&c.push(m.formatPiePercent(n.v/i.vTotal,v)),n.text=c.join("<br>")}if(s){var _=u.castOption(o,n.i,"texttemplate");if(_){var w={label:n.label,value:n.v,valueLabel:m.formatPieValue(n.v,a.separators),percent:n.v/i.vTotal,percentLabel:m.formatPiePercent(n.v/i.vTotal,a.separators),color:n.color,text:n.text,customdata:u.castOption(o,n.i,"customdata")},T=m.getFirstFilled(o.text,n.pts);(b(T)||""===T)&&(w.text=T),n.text=u.texttemplateString(_,w,r._fullLayout._d3locale,w,o._meta||{})}else n.text=""}}function z(r,n){var i=r.rotate*Math.PI/180,a=Math.cos(i),o=Math.sin(i),s=(n.left+n.right)/2,l=(n.top+n.bottom)/2;r.textX=s*a-l*o,r.textY=s*o+l*a,r.noCenter=!0}r.exports={plot:function(r,n){var i=r._context.staticPlot,s=r._fullLayout,d=s._size;g("pie",s),T(n,r),P(n,d);var v=u.makeTraceGroups(s._pielayer,n,"trace").each(function(n){var g=a.select(this),v=n[0],x=v.trace;(function(r){var n,i,a,o=r[0],s=o.r,l=o.trace,c=m.getRotationAngle(l.rotation),u=2*Math.PI/o.vTotal,f="px0",h="px1";if("counterclockwise"===l.direction){for(n=0;n<r.length&&r[n].hidden;n++);if(n===r.length)return;c+=u*r[n].v,u*=-1,f="px1",h="px0"}for(a=B(s,c),n=0;n<r.length;n++)(i=r[n]).hidden||(i[f]=a,i.startangle=c,c+=u*i.v/2,i.pxmid=B(s,c),i.midangle=c,a=B(s,c+=u*i.v/2),i.stopangle=c,i[h]=a,i.largeArc=i.v>o.vTotal/2?1:0,i.halfangle=Math.PI*Math.min(i.v/o.vTotal,.5),i.ring=1-l.hole,i.rInscribed=i.v!==o.vTotal||o.trace.hole?Math.min(1/(1+1/Math.sin(i.halfangle)),i.ring/2):1)})(n),g.attr("stroke-linejoin","round"),g.each(function(){var b=a.select(this).selectAll("g.slice").data(n);b.enter().append("g").classed("slice",!0),b.exit().remove();var T=[[[],[]],[[],[]]],k=!1;b.each(function(o,l){if(o.hidden)a.select(this).selectAll("path,g").remove();else{o.pointNumber=o.i,o.curveNumber=x.index,T[o.pxmid[1]<0?0:1][o.pxmid[0]<0?0:1].push(o);var f=v.cx,h=v.cy,d=a.select(this),g=d.selectAll("path.surface").data([o]);if(g.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),d.call(_,r,n),x.pull){var b=+m.castOption(x.pull,o.pts)||0;b>0&&(f+=b*o.pxmid[0],h+=b*o.pxmid[1])}o.cxFinal=f,o.cyFinal=h;var M=x.hole;if(o.v===v.vTotal){var S="M"+(f+o.px0[0])+","+(h+o.px0[1])+D(o.px0,o.pxmid,!0,1)+D(o.pxmid,o.px0,!0,1)+"Z";M?g.attr("d","M"+(f+M*o.px0[0])+","+(h+M*o.px0[1])+D(o.px0,o.pxmid,!1,M)+D(o.pxmid,o.px0,!1,M)+"Z"+S):g.attr("d",S)}else{var E=D(o.px0,o.px1,!0,1);if(M){var I=1-M;g.attr("d","M"+(f+M*o.px1[0])+","+(h+M*o.px1[1])+D(o.px1,o.px0,!1,M)+"l"+I*o.px0[0]+","+I*o.px0[1]+E+"Z")}else g.attr("d","M"+f+","+h+"l"+o.px0[0]+","+o.px0[1]+E+"Z")}R(r,o,v);var C=m.castOption(x.textposition,o.pts),O=d.selectAll("g.slicetext").data(o.text&&"none"!==C?[0]:[]);O.enter().append("g").classed("slicetext",!0),O.exit().remove(),O.each(function(){var i=u.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),d=u.ensureUniformFontSize(r,"outside"===C?(g=s.font,{color:m.castOption(x.outsidetextfont.color,o.pts)||m.castOption(x.textfont.color,o.pts)||g.color,family:m.castOption(x.outsidetextfont.family,o.pts)||m.castOption(x.textfont.family,o.pts)||g.family,size:m.castOption(x.outsidetextfont.size,o.pts)||m.castOption(x.textfont.size,o.pts)||g.size,weight:m.castOption(x.outsidetextfont.weight,o.pts)||m.castOption(x.textfont.weight,o.pts)||g.weight,style:m.castOption(x.outsidetextfont.style,o.pts)||m.castOption(x.textfont.style,o.pts)||g.style,variant:m.castOption(x.outsidetextfont.variant,o.pts)||m.castOption(x.textfont.variant,o.pts)||g.variant,textcase:m.castOption(x.outsidetextfont.textcase,o.pts)||m.castOption(x.textfont.textcase,o.pts)||g.textcase,lineposition:m.castOption(x.outsidetextfont.lineposition,o.pts)||m.castOption(x.textfont.lineposition,o.pts)||g.lineposition,shadow:m.castOption(x.outsidetextfont.shadow,o.pts)||m.castOption(x.textfont.shadow,o.pts)||g.shadow}):w(x,o,s.font));i.text(o.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(c.font,d).call(p.convertToTspans,r);var g,b,_=c.bBox(i.node());if("outside"===C)b=L(_,o);else if(b=A(_,o,v),"auto"===C&&b.scale<1){var T=u.ensureUniformFontSize(r,x.outsidetextfont);i.call(c.font,T),b=L(_=c.bBox(i.node()),o)}var M=b.textPosAngle,S=void 0===M?o.pxmid:B(v.r,M);if(b.targetX=f+S[0]*b.rCenter+(b.x||0),b.targetY=h+S[1]*b.rCenter+(b.y||0),z(b,_),b.outside){var E=b.targetY;o.yLabelMin=E-_.height/2,o.yLabelMid=E,o.yLabelMax=E+_.height/2,o.labelExtraX=0,o.labelExtraY=0,k=!0}b.fontSize=d.size,y(x.type,b,s),n[l].transform=b,u.setTransormAndDisplay(i,b)})}function D(r,n,i,a){var s=a*(n[0]-r[0]),l=a*(n[1]-r[1]);return"a"+a*v.r+","+a*v.r+" 0 "+o.largeArc+(i?" 1 ":" 0 ")+s+","+l}});var M=a.select(this).selectAll("g.titletext").data(x.title.text?[0]:[]);if(M.enter().append("g").classed("titletext",!0),M.exit().remove(),M.each(function(){var n,i,o=u.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),s=x.title.text;x._meta&&(s=u.templateString(s,x._meta)),o.text(s).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(c.font,x.title.font).call(p.convertToTspans,r),i="middle center"===x.title.position?(n=Math.sqrt(v.titleBox.width*v.titleBox.width+v.titleBox.height*v.titleBox.height),{x:v.cx,y:v.cy,scale:v.trace.hole*v.r*2/n,tx:0,ty:-v.titleBox.height/2+v.trace.title.font.size}):C(v,d),o.attr("transform",h(i.x,i.y)+f(Math.min(1,i.scale))+h(i.tx,i.ty))}),k&&function(r,n){var i,a,o,s,l,c,f,h,p,d,y,g,v;function x(r,n){return r.pxmid[1]-n.pxmid[1]}function b(r,n){return n.pxmid[1]-r.pxmid[1]}for(a=0;a<2;a++)for(o=a?x:b,l=a?Math.max:Math.min,f=a?1:-1,i=0;i<2;i++){for(s=i?Math.max:Math.min,c=i?1:-1,(h=r[a][i]).sort(o),d=(p=r[1-a][i]).concat(h),g=[],y=0;y<h.length;y++)void 0!==h[y].yLabelMid&&g.push(h[y]);for(v=!1,y=0;a&&y<p.length;y++)if(void 0!==p[y].yLabelMid){v=p[y];break}for(y=0;y<g.length;y++){var _=y&&g[y-1];v&&!y&&(_=v),function(r,i){i||(i={});var o,h,p,y,g=i.labelExtraY+(a?i.yLabelMax:i.yLabelMin),v=a?r.yLabelMin:r.yLabelMax,x=a?r.yLabelMax:r.yLabelMin,b=r.cyFinal+l(r.px0[1],r.px1[1]),_=g-v;if(_*f>0&&(r.labelExtraY=_),u.isArrayOrTypedArray(n.pull))for(h=0;h<d.length;h++)(p=d[h])===r||(m.castOption(n.pull,r.pts)||0)>=(m.castOption(n.pull,p.pts)||0)||((r.pxmid[1]-p.pxmid[1])*f>0?(_=p.cyFinal+l(p.px0[1],p.px1[1])-v-r.labelExtraY)*f>0&&(r.labelExtraY+=_):(x+r.labelExtraY-b)*f>0&&(o=3*c*Math.abs(h-d.indexOf(r)),(y=p.cxFinal+s(p.px0[0],p.px1[0])+o-(r.cxFinal+r.pxmid[0])-r.labelExtraX)*c>0&&(r.labelExtraX+=y)))}(g[y],_)}}}(T,x),function(r,n){r.each(function(r){var i=a.select(this);if(r.labelExtraX||r.labelExtraY){var o=i.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,u.setTransormAndDisplay(o,r.transform);var s=r.cxFinal+r.pxmid[0],c="M"+s+","+(r.cyFinal+r.pxmid[1]),f=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var h=r.labelExtraX*r.pxmid[1]/r.pxmid[0],p=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(h)>Math.abs(p)?c+="l"+p*r.pxmid[0]/r.pxmid[1]+","+p+"H"+(s+r.labelExtraX+f):c+="l"+r.labelExtraX+","+h+"v"+(p-h)+"h"+f}else c+="V"+(r.yLabelMid+r.labelExtraY)+"h"+f;u.ensureSingle(i,"path","textline").call(l.stroke,n.outsidetextfont.color).attr({"stroke-width":Math.min(2,n.outsidetextfont.size/8),d:c,fill:"none"})}else i.select("path.textline").remove()})}(b,x),k&&x.automargin){var S=c.bBox(g.node()),E=x.domain,I=d.w*(E.x[1]-E.x[0]),O=d.h*(E.y[1]-E.y[0]),D=(.5*I-v.r)/d.w,P=(.5*O-v.r)/d.h;o.autoMargin(r,"pie."+x.uid+".automargin",{xl:E.x[0]-D,xr:E.x[1]+D,yb:E.y[0]-P,yt:E.y[1]+P,l:Math.max(v.cx-v.r-S.left,0),r:Math.max(S.right-(v.cx+v.r),0),b:Math.max(S.bottom-(v.cy+v.r),0),t:Math.max(v.cy-v.r-S.top,0),pad:5})}})});setTimeout(function(){v.selectAll("tspan").each(function(){var r=a.select(this);r.attr("dy")&&r.attr("dy",r.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:A,determineInsideTextFont:w,positionTitleOutside:C,prerenderTitles:T,layoutAreas:P,attachFxHandlers:_,computeTransform:z}},22152:function(r,n,i){var a=i(33428),o=i(10528),s=i(82744).resizeText;r.exports=function(r){var n=r._fullLayout._pielayer.selectAll(".trace");s(r,n,"pie"),n.each(function(n){var i=n[0].trace,s=a.select(this);s.style({opacity:i.opacity}),s.selectAll("path.surface").each(function(n){a.select(this).call(o,n,i,r)})})}},10528:function(r,n,i){var a=i(76308),o=i(69656).castOption,s=i(21552);r.exports=function(r,n,i,l){var c=i.marker.line,u=o(c.color,n.pts)||a.defaultLine,f=o(c.width,n.pts)||0;r.call(s,n,i,l).style("stroke-width",f).call(a.stroke,u)}},35484:function(r,n,i){var a=i(52904);r.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(r,n,i){var a=i(67792).gl_pointcloud2d,o=i(3400).isArrayOrTypedArray,s=i(43080),l=i(19280).findExtremes,c=i(44928);function u(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=a(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=u.prototype;f.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*n],this.pickXYData[2*n+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:o(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},f.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=c(r,{})},f.updateFast=function(r){var n,i,a,o,c,u,f=this.xData=this.pickXData=r.x,h=this.yData=this.pickYData=r.y,p=this.pickXYData=r.xy,d=r.xbounds&&r.ybounds,y=r.indices,g=this.bounds;if(p){if(a=p,n=p.length>>>1,d)g[0]=r.xbounds[0],g[2]=r.xbounds[1],g[1]=r.ybounds[0],g[3]=r.ybounds[1];else for(u=0;u<n;u++)o=a[2*u],c=a[2*u+1],o<g[0]&&(g[0]=o),o>g[2]&&(g[2]=o),c<g[1]&&(g[1]=c),c>g[3]&&(g[3]=c);if(y)i=y;else for(i=new Int32Array(n),u=0;u<n;u++)i[u]=u}else for(a=new Float32Array(2*(n=f.length)),i=new Int32Array(n),u=0;u<n;u++)o=f[u],c=h[u],i[u]=u,a[2*u]=o,a[2*u+1]=c,o<g[0]&&(g[0]=o),o>g[2]&&(g[2]=o),c<g[1]&&(g[1]=c),c>g[3]&&(g[3]=c);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=a;var v=s(r.marker.color),m=s(r.marker.border.color),x=r.opacity*r.marker.opacity;v[3]*=x,this.pointcloudOptions.color=v;var b=r.marker.blend;null===b&&(b=f.length<100||h.length<100),this.pointcloudOptions.blend=b,m[3]*=x,this.pointcloudOptions.borderColor=m;var _=r.marker.sizemin,w=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=_,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var T=this.scene.xaxis,A=this.scene.yaxis,k=w/2||.5;r._extremes[T._id]=l(T,[g[0],g[2]],{ppad:k}),r._extremes[A._id]=l(A,[g[1],g[3]],{ppad:k})},f.dispose=function(){this.pointcloud.dispose()},r.exports=function(r,n){var i=new u(r,n.uid);return i.update(n),i}},41904:function(r,n,i){var a=i(3400),o=i(35484);r.exports=function(r,n,i){function s(i,s){return a.coerce(r,n,o,i,s)}s("x"),s("y"),s("xbounds"),s("ybounds"),r.xy&&r.xy instanceof Float32Array&&(n.xy=r.xy),r.indices&&r.indices instanceof Int32Array&&(n.indices=r.indices),s("text"),s("marker.color",i),s("marker.opacity"),s("marker.blend"),s("marker.sizemin"),s("marker.sizemax"),s("marker.border.color",i),s("marker.border.arearatio"),n._length=null}},156:function(r,n,i){r.exports={attributes:i(35484),supplyDefaults:i(41904),calc:i(41484),plot:i(11072),moduleType:"trace",name:"pointcloud",basePlotModule:i(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(r,n,i){var a=i(25376),o=i(45464),s=i(22548),l=i(55756),c=i(86968).u,u=i(21776).Ks,f=i(49084),h=i(31780).templatedArray,p=i(29736).descriptionOnlyNumbers,d=i(92880).extendFlat,y=i(67824).overrideAll;(r.exports=y({hoverinfo:d({},o.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:l.hoverlabel,domain:c({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:p("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:a({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:u({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:u({},{keys:["value","label"]}),colorscales:h("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(f().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(r,n,i){var a=i(67824).overrideAll,o=i(84888)._M,s=i(59596),l=i(65460),c=i(93972),u=i(86476),f=i(22676).prepSelect,h=i(3400),p=i(24040),d="sankey";n.name=d,n.baseLayoutAttrOverrides=a({hoverlabel:l.hoverlabel},"plot","nested"),n.plot=function(r){var i=o(r.calcdata,d)[0];s(r,i),n.updateFx(r)},n.clean=function(r,n,i,a){var o=a._has&&a._has(d),s=n._has&&n._has(d);o&&!s&&(a._paperdiv.selectAll(".sankey").remove(),a._paperdiv.selectAll(".bgsankey").remove())},n.updateFx=function(r){for(var n=0;n<r._fullData.length;n++)(function(r,n){var i=r._fullData[n],a=r._fullLayout,o=a.dragmode,s="pan"===a.dragmode?"move":"crosshair",l=i._bgRect;if(l&&"pan"!==o&&"zoom"!==o){c(l,s);var d={_id:"x",c2p:h.identity,_offset:i._sankey.translateX,_length:i._sankey.width},y={_id:"y",c2p:h.identity,_offset:i._sankey.translateY,_length:i._sankey.height},g={gd:r,element:l.node(),plotinfo:{id:n,xaxis:d,yaxis:y,fillRangeItems:h.noop},subplot:n,xaxes:[d],yaxes:[y],doneFnCompleted:function(i){for(var a,o=r._fullData[n],s=o.node.groups.slice(),l=[],c=0;c<i.length;c++){var u=function(r){for(var n=o._sankey.graph.nodes,i=0;i<n.length;i++)if(n[i].pointNumber===r)return n[i]}(i[c].pointNumber);if(u){if(u.group){for(var f=0;f<u.childrenNodes.length;f++)l.push(u.childrenNodes[f].pointNumber);s[u.pointNumber-o.node._count]=!1}else l.push(u.pointNumber)}}a=s.filter(Boolean).concat([l]),p.call("_guiRestyle",r,{"node.groups":[a]},n)},prepFn:function(r,n,i){f(r,n,i,g,o)}};u.init(g)}})(r,n)}},48068:function(r,n,i){var a=i(78484),o=i(3400),s=i(71688).wrap,l=o.isArrayOrTypedArray,c=o.isIndex,u=i(8932);r.exports=function(r,n){var i=function(r){var n,i=r.node,s=r.link,f=[],h=l(s.color),p=l(s.hovercolor),d=l(s.customdata),y={},g={},v=s.colorscales.length;for(n=0;n<v;n++){var m=s.colorscales[n],x=u.extractScale(m,{cLetter:"c"}),b=u.makeColorScaleFunc(x);g[m.label]=b}var _=0;for(n=0;n<s.value.length;n++)s.source[n]>_&&(_=s.source[n]),s.target[n]>_&&(_=s.target[n]);var w,T=_+1;r.node._count=T;var A=r.node.groups,k={};for(n=0;n<A.length;n++){var M=A[n];for(w=0;w<M.length;w++){var S=M[w],E=T+n;k.hasOwnProperty(S)?o.warn("Node "+S+" is already part of a group."):k[S]=E}}var I={source:[],target:[]};for(n=0;n<s.value.length;n++){var L=s.value[n],C=s.source[n],O=s.target[n];if(L>0&&c(C,T)&&c(O,T)&&(!k.hasOwnProperty(C)||!k.hasOwnProperty(O)||k[C]!==k[O])){k.hasOwnProperty(O)&&(O=k[O]),k.hasOwnProperty(C)&&(C=k[C]),O=+O,y[C=+C]=y[O]=!0;var D="";s.label&&s.label[n]&&(D=s.label[n]);var P=null;D&&g.hasOwnProperty(D)&&(P=g[D]),f.push({pointNumber:n,label:D,color:h?s.color[n]:s.color,hovercolor:p?s.hovercolor[n]:s.hovercolor,customdata:d?s.customdata[n]:s.customdata,concentrationscale:P,source:C,target:O,value:+L}),I.source.push(C),I.target.push(O)}}var B=T+A.length,R=l(i.color),z=l(i.customdata),F=[];for(n=0;n<B;n++)if(y[n]){var N=i.label[n];F.push({group:n>T-1,childrenNodes:[],pointNumber:n,label:N,color:R?i.color[n]:i.color,customdata:z?i.customdata[n]:i.customdata})}var U=!1;return function(r,n,i){for(var s=o.init2dArray(r,0),l=0;l<Math.min(n.length,i.length);l++)if(o.isIndex(n[l],r)&&o.isIndex(i[l],r)){if(n[l]===i[l])return!0;s[n[l]].push(i[l])}return a(s).components.some(function(r){return r.length>1})}(B,I.source,I.target)&&(U=!0),{circular:U,links:f,nodes:F,groups:A,groupLookup:k}}(n);return s({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(r){r.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(r,n,i){var a=i(3400),o=i(41440),s=i(76308),l=i(49760),c=i(86968).Q,u=i(16132),f=i(31780),h=i(51272);function p(r,n){function i(i,s){return a.coerce(r,n,o.link.colorscales,i,s)}i("label"),i("cmin"),i("cmax"),i("colorscale")}r.exports=function(r,n,i,d){function y(i,s){return a.coerce(r,n,o,i,s)}var g=a.extendDeep(d.hoverlabel,r.hoverlabel),v=r.node,m=f.newContainer(n,"node");function x(r,n){return a.coerce(v,m,o.node,r,n)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",r.hoverinfo),u(v,m,x,g),x("hovertemplate"),x("align");var b=d.colorway;x("color",m.label.map(function(r,n){return s.addOpacity(b[n%b.length],.8)})),x("customdata");var _=r.link||{},w=f.newContainer(n,"link");function T(r,n){return a.coerce(_,w,o.link,r,n)}T("label"),T("arrowlen"),T("source"),T("target"),T("value"),T("line.color"),T("line.width"),T("hoverinfo",r.hoverinfo),u(_,w,T,g),T("hovertemplate");var A,k=.333>l(d.paper_bgcolor).getLuminance(),M=T("color",k?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function S(r){var n=l(r);if(!n.isValid())return r;var i=n.getAlpha();return i<=.8?n.setAlpha(i+.2):n=k?n.brighten():n.darken(),n.toRgbString()}T("hovercolor",Array.isArray(M)?M.map(S):S(M)),T("customdata"),h(_,w,{name:"colorscales",handleItemDefaults:p}),c(n,d,y),y("orientation"),y("valueformat"),y("valuesuffix"),m.x.length&&m.y.length&&(A="freeform"),y("arrangement",A),a.coerceFont(y,"textfont",d.font,{autoShadowDflt:!0}),n._length=null}},45499:function(r,n,i){r.exports={attributes:i(41440),supplyDefaults:i(47140),calc:i(48068),plot:i(59596),moduleType:"trace",name:"sankey",basePlotModule:i(10760),selectPoints:i(81128),categories:["noOpacity"],meta:{}}},59596:function(r,n,i){var a=i(33428),o=i(3400),s=o.numberFormat,l=i(83248),c=i(93024),u=i(76308),f=i(11820).cn,h=o._;function p(r){return""!==r}function d(r,n){return r.filter(function(r){return r.key===n.traceId})}function y(r,n){a.select(r).select("path").style("fill-opacity",n),a.select(r).select("rect").style("fill-opacity",n)}function g(r){a.select(r).select("text.name").style("fill","black")}function v(r){return function(n){return -1!==r.node.sourceLinks.indexOf(n.link)||-1!==r.node.targetLinks.indexOf(n.link)}}function m(r){return function(n){return -1!==n.node.sourceLinks.indexOf(r.link)||-1!==n.node.targetLinks.indexOf(r.link)}}function x(r,n,i){n&&i&&d(i,n).selectAll("."+f.sankeyLink).filter(v(n)).call(_.bind(0,n,i,!1))}function b(r,n,i){n&&i&&d(i,n).selectAll("."+f.sankeyLink).filter(v(n)).call(w.bind(0,n,i,!1))}function _(r,n,i,a){a.style("fill",function(r){if(!r.link.concentrationscale)return r.tinyColorHoverHue}).style("fill-opacity",function(r){if(!r.link.concentrationscale)return r.tinyColorHoverAlpha}),a.each(function(i){var a=i.link.label;""!==a&&d(n,r).selectAll("."+f.sankeyLink).filter(function(r){return r.link.label===a}).style("fill",function(r){if(!r.link.concentrationscale)return r.tinyColorHoverHue}).style("fill-opacity",function(r){if(!r.link.concentrationscale)return r.tinyColorHoverAlpha})}),i&&d(n,r).selectAll("."+f.sankeyNode).filter(m(r)).call(x)}function w(r,n,i,a){a.style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha}),a.each(function(i){var a=i.link.label;""!==a&&d(n,r).selectAll("."+f.sankeyLink).filter(function(r){return r.link.label===a}).style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha})}),i&&d(n,r).selectAll(f.sankeyNode).filter(m(r)).call(b)}function T(r,n){var i=r.hoverlabel||{},a=o.nestedProperty(i,n).get();return!Array.isArray(a)&&a}r.exports=function(r,n){for(var i=r._fullLayout,o=i._paper,d=i._size,v=0;v<r._fullData.length;v++)if(r._fullData[v].visible&&r._fullData[v].type===f.sankey&&!r._fullData[v]._viewInitial){var m=r._fullData[v].node;r._fullData[v]._viewInitial={node:{groups:m.groups.slice(),x:m.x.slice(),y:m.y.slice()}}}var A=h(r,"source:")+" ",k=h(r,"target:")+" ",M=h(r,"concentration:")+" ",S=h(r,"incoming flow count:")+" ",E=h(r,"outgoing flow count:")+" ";l(r,o,n,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(n,i,o){!1!==r._fullLayout.hovermode&&(a.select(n).call(_.bind(0,i,o,!0)),"skip"!==i.link.trace.link.hoverinfo&&(i.link.fullData=i.link.trace,r.emit("plotly_hover",{event:a.event,points:[i.link]})))},follow:function(n,o){if(!1!==r._fullLayout.hovermode){var l=o.link.trace.link;if("none"!==l.hoverinfo&&"skip"!==l.hoverinfo){for(var f=[],h=0,d=0;d<o.flow.links.length;d++){var v=o.flow.links[d];if("closest"!==r._fullLayout.hovermode||o.link.pointNumber===v.pointNumber){o.link.pointNumber===v.pointNumber&&(h=d),v.fullData=v.trace,l=o.link.trace.link;var m=function(r){r.circular?(n=(r.circularPathData.leftInnerExtent+r.circularPathData.rightInnerExtent)/2,i=r.circularPathData.verticalFullExtent):(n=(r.source.x1+r.target.x0)/2,i=(r.y0+r.y1)/2);var n,i,a=[n,i];return"v"===r.trace.orientation&&a.reverse(),a[0]+=o.parent.translateX,a[1]+=o.parent.translateY,a}(v),x={valueLabel:s(o.valueFormat)(v.value)+o.valueSuffix};f.push({x:m[0],y:m[1],name:x.valueLabel,text:[v.label||"",A+v.source.label,k+v.target.label,v.concentrationscale?M+s("%0.2f")(v.flow.labelConcentration):""].filter(p).join("<br>"),color:T(l,"bgcolor")||u.addOpacity(v.color,1),borderColor:T(l,"bordercolor"),fontFamily:T(l,"font.family"),fontSize:T(l,"font.size"),fontColor:T(l,"font.color"),fontWeight:T(l,"font.weight"),fontStyle:T(l,"font.style"),fontVariant:T(l,"font.variant"),fontTextcase:T(l,"font.textcase"),fontLineposition:T(l,"font.lineposition"),fontShadow:T(l,"font.shadow"),nameLength:T(l,"namelength"),textAlign:T(l,"align"),idealAlign:a.event.x<m[0]?"right":"left",hovertemplate:l.hovertemplate,hovertemplateLabels:x,eventData:[v]})}}c.loneHover(f,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r,anchorIndex:h}).each(function(){o.link.concentrationscale||y(this,.65),g(this)})}}},unhover:function(n,o,s){!1!==r._fullLayout.hovermode&&(a.select(n).call(w.bind(0,o,s,!0)),"skip"!==o.link.trace.link.hoverinfo&&(o.link.fullData=o.link.trace,r.emit("plotly_unhover",{event:a.event,points:[o.link]})),c.loneUnhover(i._hoverlayer.node()))},select:function(n,i){var o=i.link;o.originalEvent=a.event,r._hoverdata=[o],c.click(r,{target:!0})}},nodeEvents:{hover:function(n,i,o){!1!==r._fullLayout.hovermode&&(a.select(n).call(x,i,o),"skip"!==i.node.trace.node.hoverinfo&&(i.node.fullData=i.node.trace,r.emit("plotly_hover",{event:a.event,points:[i.node]})))},follow:function(n,o){if(!1!==r._fullLayout.hovermode){var l=o.node.trace.node;if("none"!==l.hoverinfo&&"skip"!==l.hoverinfo){var u=a.select(n).select("."+f.nodeRect),h=r._fullLayout._paperdiv.node().getBoundingClientRect(),d=u.node().getBoundingClientRect(),v=d.left-2-h.left,m=d.right+2-h.left,x=d.top+d.height/4-h.top,b={valueLabel:s(o.valueFormat)(o.node.value)+o.valueSuffix};o.node.fullData=o.node.trace,r._fullLayout._calcInverseTransform(r);var _=r._fullLayout._invScaleX,w=r._fullLayout._invScaleY,A=c.loneHover({x0:_*v,x1:_*m,y:w*x,name:s(o.valueFormat)(o.node.value)+o.valueSuffix,text:[o.node.label,S+o.node.targetLinks.length,E+o.node.sourceLinks.length].filter(p).join("<br>"),color:T(l,"bgcolor")||o.tinyColorHue,borderColor:T(l,"bordercolor"),fontFamily:T(l,"font.family"),fontSize:T(l,"font.size"),fontColor:T(l,"font.color"),fontWeight:T(l,"font.weight"),fontStyle:T(l,"font.style"),fontVariant:T(l,"font.variant"),fontTextcase:T(l,"font.textcase"),fontLineposition:T(l,"font.lineposition"),fontShadow:T(l,"font.shadow"),nameLength:T(l,"namelength"),textAlign:T(l,"align"),idealAlign:"left",hovertemplate:l.hovertemplate,hovertemplateLabels:b,eventData:[o.node]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r});y(A,.85),g(A)}}},unhover:function(n,o,s){!1!==r._fullLayout.hovermode&&(a.select(n).call(b,o,s),"skip"!==o.node.trace.node.hoverinfo&&(o.node.fullData=o.node.trace,r.emit("plotly_unhover",{event:a.event,points:[o.node]})),c.loneUnhover(i._hoverlayer.node()))},select:function(n,i,o){var s=i.node;s.originalEvent=a.event,r._hoverdata=[s],a.select(n).call(b,i,o),c.click(r,{target:!0})}}})}},83248:function(r,n,i){var a=i(49812),o=i(67756).Gz,s=i(33428),l=i(26800),c=i(48932),u=i(11820),f=i(49760),h=i(76308),p=i(43616),d=i(3400),y=d.strTranslate,g=d.strRotate,v=i(71688),m=v.keyFun,x=v.repeat,b=v.unwrap,_=i(72736),w=i(24040),T=i(84284),A=T.CAP_SHIFT,k=T.LINE_SPACING;function M(r,n,i){var a,o=b(n),s=o.trace,h=s.domain,p="h"===s.orientation,y=s.node.pad,g=s.node.thickness,v={justify:l.sankeyJustify,left:l.sankeyLeft,right:l.sankeyRight,center:l.sankeyCenter}[s.node.align],m=r.width*(h.x[1]-h.x[0]),x=r.height*(h.y[1]-h.y[0]),_=o._nodes,w=o._links,T=o.circular;(a=T?c.sankeyCircular().circularLinkGap(0):l.sankey()).iterations(u.sankeyIterations).size(p?[m,x]:[x,m]).nodeWidth(g).nodePadding(y).nodeId(function(r){return r.pointNumber}).nodeAlign(v).nodes(_).links(w);var A,k,M,S=a();for(var E in a.nodePadding()<y&&d.warn("node.pad was reduced to ",a.nodePadding()," to fit within the figure."),o._groupLookup){var I,L=parseInt(o._groupLookup[E]);for(A=0;A<S.nodes.length;A++)if(S.nodes[A].pointNumber===L){I=S.nodes[A];break}if(I){var C={pointNumber:parseInt(E),x0:I.x0,x1:I.x1,y0:I.y0,y1:I.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};S.nodes.unshift(C),I.childrenNodes.unshift(C)}}if(function(){for(A=0;A<S.nodes.length;A++){var r,n,i=S.nodes[A],a={};for(k=0;k<i.targetLinks.length;k++)r=(n=i.targetLinks[k]).source.pointNumber+":"+n.target.pointNumber,a.hasOwnProperty(r)||(a[r]=[]),a[r].push(n);var o=Object.keys(a);for(k=0;k<o.length;k++){var s=a[r=o[k]],l=0,c={};for(M=0;M<s.length;M++)c[(n=s[M]).label]||(c[n.label]=0),c[n.label]+=n.value,l+=n.value;for(M=0;M<s.length;M++)(n=s[M]).flow={value:l,labelConcentration:c[n.label]/l,concentration:n.value/l,links:s},n.concentrationscale&&(n.color=f(n.concentrationscale(n.flow.labelConcentration)))}var u=0;for(k=0;k<i.sourceLinks.length;k++)u+=i.sourceLinks[k].value;for(k=0;k<i.sourceLinks.length;k++)(n=i.sourceLinks[k]).concentrationOut=n.value/u;var h=0;for(k=0;k<i.targetLinks.length;k++)h+=i.targetLinks[k].value;for(k=0;k<i.targetLinks.length;k++)(n=i.targetLinks[k]).concenrationIn=n.value/h}}(),s.node.x.length&&s.node.y.length){for(A=0;A<Math.min(s.node.x.length,s.node.y.length,S.nodes.length);A++)if(s.node.x[A]&&s.node.y[A]){var O=[s.node.x[A]*m,s.node.y[A]*x];S.nodes[A].x0=O[0]-g/2,S.nodes[A].x1=O[0]+g/2;var D=S.nodes[A].y1-S.nodes[A].y0;S.nodes[A].y0=O[1]-D/2,S.nodes[A].y1=O[1]+D/2}"snap"===s.arrangement&&(function(r){var n,i,a=r.map(function(r,n){return{x0:r.x0,index:n}}).sort(function(r,n){return r.x0-n.x0}),o=[],s=-1,l=-1/0;for(A=0;A<a.length;A++){var c=r[a[A].index];c.x0>l+g&&(s+=1,n=c.x0),l=c.x0,o[s]||(o[s]=[]),o[s].push(c),i=n-c.x0,c.x0+=i,c.x1+=i}return o})(_=S.nodes).forEach(function(r){var n,i,a,o=0,s=r.length;for(r.sort(function(r,n){return r.y0-n.y0}),a=0;a<s;++a)(n=r[a]).y0>=o||(i=o-n.y0)>1e-6&&(n.y0+=i,n.y1+=i),o=n.y1+y}),a.update(S)}return{circular:T,key:i,trace:s,guid:d.randstr(),horizontal:p,width:m,height:x,nodePad:s.node.pad,nodeLineColor:s.node.line.color,nodeLineWidth:s.node.line.width,linkLineColor:s.link.line.color,linkLineWidth:s.link.line.width,linkArrowLength:s.link.arrowlen,valueFormat:s.valueformat,valueSuffix:s.valuesuffix,textFont:s.textfont,translateX:h.x[0]*r.width+r.margin.l,translateY:r.height-h.y[1]*r.height+r.margin.t,dragParallel:p?x:m,dragPerpendicular:p?m:x,arrangement:s.arrangement,sankey:a,graph:S,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function S(r,n,i){var a=f(n.color),o=f(n.hovercolor),s=n.source.label+"|"+n.target.label+"__"+i;return n.trace=r.trace,n.curveNumber=r.trace.index,{circular:r.circular,key:s,traceId:r.key,pointNumber:n.pointNumber,link:n,tinyColorHue:h.tinyRGB(a),tinyColorAlpha:a.getAlpha(),tinyColorHoverHue:h.tinyRGB(o),tinyColorHoverAlpha:o.getAlpha(),linkPath:E,linkLineColor:r.linkLineColor,linkLineWidth:r.linkLineWidth,linkArrowLength:r.linkArrowLength,valueFormat:r.valueFormat,valueSuffix:r.valueSuffix,sankey:r.sankey,parent:r,interactionState:r.interactionState,flow:n.flow}}function E(){return function(r){var n,i,a,s,l=r.linkArrowLength;if(r.link.circular)return n=r.link,i=l,a=n.width/2,s=n.circularPathData,"top"===n.circularLinkType?"M "+(s.targetX-i)+" "+(s.targetY+a)+" L"+(s.rightInnerExtent-i)+" "+(s.targetY+a)+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightSmallArcRadius+a)+" 0 0 1 "+(s.rightFullExtent-a-i)+" "+(s.targetY-s.rightSmallArcRadius)+"L"+(s.rightFullExtent-a-i)+" "+s.verticalRightInnerExtent+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightLargeArcRadius+a)+" 0 0 1 "+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent-a)+"L"+s.leftInnerExtent+" "+(s.verticalFullExtent-a)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftLargeArcRadius+a)+" 0 0 1 "+(s.leftFullExtent+a)+" "+s.verticalLeftInnerExtent+"L"+(s.leftFullExtent+a)+" "+(s.sourceY-s.leftSmallArcRadius)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftSmallArcRadius+a)+" 0 0 1 "+s.leftInnerExtent+" "+(s.sourceY+a)+"L"+s.sourceX+" "+(s.sourceY+a)+"L"+s.sourceX+" "+(s.sourceY-a)+"L"+s.leftInnerExtent+" "+(s.sourceY-a)+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftSmallArcRadius-a)+" 0 0 0 "+(s.leftFullExtent-a)+" "+(s.sourceY-s.leftSmallArcRadius)+"L"+(s.leftFullExtent-a)+" "+s.verticalLeftInnerExtent+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftLargeArcRadius-a)+" 0 0 0 "+s.leftInnerExtent+" "+(s.verticalFullExtent+a)+"L"+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent+a)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightLargeArcRadius-a)+" 0 0 0 "+(s.rightFullExtent+a-i)+" "+s.verticalRightInnerExtent+"L"+(s.rightFullExtent+a-i)+" "+(s.targetY-s.rightSmallArcRadius)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightSmallArcRadius-a)+" 0 0 0 "+(s.rightInnerExtent-i)+" "+(s.targetY-a)+"L"+(s.targetX-i)+" "+(s.targetY-a)+(i>0?"L"+s.targetX+" "+s.targetY:"")+"Z":"M "+(s.targetX-i)+" "+(s.targetY-a)+" L"+(s.rightInnerExtent-i)+" "+(s.targetY-a)+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightSmallArcRadius+a)+" 0 0 0 "+(s.rightFullExtent-a-i)+" "+(s.targetY+s.rightSmallArcRadius)+"L"+(s.rightFullExtent-a-i)+" "+s.verticalRightInnerExtent+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightLargeArcRadius+a)+" 0 0 0 "+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent+a)+"L"+s.leftInnerExtent+" "+(s.verticalFullExtent+a)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftLargeArcRadius+a)+" 0 0 0 "+(s.leftFullExtent+a)+" "+s.verticalLeftInnerExtent+"L"+(s.leftFullExtent+a)+" "+(s.sourceY+s.leftSmallArcRadius)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftSmallArcRadius+a)+" 0 0 0 "+s.leftInnerExtent+" "+(s.sourceY-a)+"L"+s.sourceX+" "+(s.sourceY-a)+"L"+s.sourceX+" "+(s.sourceY+a)+"L"+s.leftInnerExtent+" "+(s.sourceY+a)+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftSmallArcRadius-a)+" 0 0 1 "+(s.leftFullExtent-a)+" "+(s.sourceY+s.leftSmallArcRadius)+"L"+(s.leftFullExtent-a)+" "+s.verticalLeftInnerExtent+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftLargeArcRadius-a)+" 0 0 1 "+s.leftInnerExtent+" "+(s.verticalFullExtent-a)+"L"+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent-a)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightLargeArcRadius-a)+" 0 0 1 "+(s.rightFullExtent+a-i)+" "+s.verticalRightInnerExtent+"L"+(s.rightFullExtent+a-i)+" "+(s.targetY+s.rightSmallArcRadius)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightSmallArcRadius-a)+" 0 0 1 "+(s.rightInnerExtent-i)+" "+(s.targetY+a)+"L"+(s.targetX-i)+" "+(s.targetY+a)+(i>0?"L"+s.targetX+" "+s.targetY:"")+"Z";var c=Math.abs((r.link.target.x0-r.link.source.x1)/2);l>c&&(l=c);var u=r.link.source.x1,f=r.link.target.x0-l,h=o(u,f),p=h(.5),d=h(.5),y=r.link.y0-r.link.width/2,g=r.link.y0+r.link.width/2,v=r.link.y1-r.link.width/2,m=r.link.y1+r.link.width/2,x="M"+u+","+y,b="C"+p+","+y+" "+d+","+v+" "+f+","+v,_="C"+d+","+m+" "+p+","+g+" "+u+","+g,w=l>0?"L"+(f+l)+","+(v+r.link.width/2):"";return x+b+(w+="L"+f+","+m)+_+"Z"}}function I(r,n){var i=f(n.color),a=u.nodePadAcross,o=r.nodePad/2;n.dx=n.x1-n.x0,n.dy=n.y1-n.y0;var s=n.dx,l=Math.max(.5,n.dy),c="node_"+n.pointNumber;return n.group&&(c=d.randstr()),n.trace=r.trace,n.curveNumber=r.trace.index,{index:n.pointNumber,key:c,partOfGroup:n.partOfGroup||!1,group:n.group,traceId:r.key,trace:r.trace,node:n,nodePad:r.nodePad,nodeLineColor:r.nodeLineColor,nodeLineWidth:r.nodeLineWidth,textFont:r.textFont,size:r.horizontal?r.height:r.width,visibleWidth:Math.ceil(s),visibleHeight:l,zoneX:-a,zoneY:-o,zoneWidth:s+2*a,zoneHeight:l+2*o,labelY:r.horizontal?n.dy/2+1:n.dx/2+1,left:1===n.originalLayer,sizeAcross:r.width,forceLayouts:r.forceLayouts,horizontal:r.horizontal,darkBackground:128>=i.getBrightness(),tinyColorHue:h.tinyRGB(i),tinyColorAlpha:i.getAlpha(),valueFormat:r.valueFormat,valueSuffix:r.valueSuffix,sankey:r.sankey,graph:r.graph,arrangement:r.arrangement,uniqueNodeLabelPathId:[r.guid,r.key,c].join("_"),interactionState:r.interactionState,figure:r}}function L(r){r.attr("transform",function(r){return y(r.node.x0.toFixed(3),r.node.y0.toFixed(3))})}function C(r){r.call(L)}function O(r,n){r.call(C),n.attr("d",E())}function D(r){r.attr("width",function(r){return r.node.x1-r.node.x0}).attr("height",function(r){return r.visibleHeight})}function P(r){return r.link.width>1||r.linkLineWidth>0}function B(r){return y(r.translateX,r.translateY)+(r.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function R(r,n,i){r.on(".basic",null).on("mouseover.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.hover(this,r,n),r.interactionState.hovered=[this,r])}).on("mousemove.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.follow(this,r),r.interactionState.hovered=[this,r])}).on("mouseout.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.unhover(this,r,n),r.interactionState.hovered=!1)}).on("click.basic",function(r){r.interactionState.hovered&&(i.unhover(this,r,n),r.interactionState.hovered=!1),r.interactionState.dragInProgress||r.partOfGroup||i.select(this,r,n)})}function z(r,n,i,o){var l=s.behavior.drag().origin(function(r){return{x:r.node.x0+r.visibleWidth/2,y:r.node.y0+r.visibleHeight/2}}).on("dragstart",function(s){if("fixed"!==s.arrangement&&(d.ensureSingle(o._fullLayout._infolayer,"g","dragcover",function(r){o._fullLayout._dragCover=r}),d.raiseToTop(this),s.interactionState.dragInProgress=s.node,N(s.node),s.interactionState.hovered&&(i.nodeEvents.unhover.apply(0,s.interactionState.hovered),s.interactionState.hovered=!1),"snap"===s.arrangement)){var l,c=s.traceId+"|"+s.key;s.forceLayouts[c]?s.forceLayouts[c].alpha(1):(function(r){for(var n=0;n<r.length;n++)r[n].y=(r[n].y0+r[n].y1)/2,r[n].x=(r[n].x0+r[n].x1)/2}(s.graph.nodes),l=s.graph.nodes.filter(function(r){return r.originalX===s.node.originalX}).filter(function(r){return!r.partOfGroup}),s.forceLayouts[c]=a.forceSimulation(l).alphaDecay(0).force("collide",a.forceCollide().radius(function(r){return r.dy/2+s.nodePad/2}).strength(1).iterations(u.forceIterations)).force("constrain",function(){for(var r=0,n=0;n<l.length;n++){var i=l[n];i===s.interactionState.dragInProgress?(i.x=i.lastDraggedX,i.y=i.lastDraggedY):(i.vx=(i.originalX-i.x)/u.forceTicksPerFrame,i.y=Math.min(s.size-i.dy/2,Math.max(i.dy/2,i.y))),r=Math.max(r,Math.abs(i.vx),Math.abs(i.vy))}!s.interactionState.dragInProgress&&r<.1&&s.forceLayouts[c].alpha()>0&&s.forceLayouts[c].alpha(0)}).stop()),window.requestAnimationFrame(function i(){var a;for(a=0;a<u.forceTicksPerFrame;a++)s.forceLayouts[c].tick();if(function(r){for(var n=0;n<r.length;n++)r[n].y0=r[n].y-r[n].dy/2,r[n].y1=r[n].y0+r[n].dy,r[n].x0=r[n].x-r[n].dx/2,r[n].x1=r[n].x0+r[n].dx}(s.graph.nodes),s.sankey.update(s.graph),O(r.filter(U(s)),n),s.forceLayouts[c].alpha()>0)window.requestAnimationFrame(i);else{var l=s.node.originalX;s.node.x0=l-s.visibleWidth/2,s.node.x1=l+s.visibleWidth/2,F(s,o)}})}}).on("drag",function(i){if("fixed"!==i.arrangement){var a=s.event.x,o=s.event.y;"snap"===i.arrangement?(i.node.x0=a-i.visibleWidth/2,i.node.x1=a+i.visibleWidth/2):("freeform"===i.arrangement&&(i.node.x0=a-i.visibleWidth/2,i.node.x1=a+i.visibleWidth/2),o=Math.max(0,Math.min(i.size-i.visibleHeight/2,o))),i.node.y0=o-i.visibleHeight/2,i.node.y1=o+i.visibleHeight/2,N(i.node),"snap"!==i.arrangement&&(i.sankey.update(i.graph),O(r.filter(U(i)),n))}}).on("dragend",function(r){if("fixed"!==r.arrangement){r.interactionState.dragInProgress=!1;for(var n=0;n<r.node.childrenNodes.length;n++)r.node.childrenNodes[n].x=r.node.x,r.node.childrenNodes[n].y=r.node.y;"snap"!==r.arrangement&&F(r,o)}});r.on(".drag",null).call(l)}function F(r,n){for(var i=[],a=[],o=0;o<r.graph.nodes.length;o++){var s=(r.graph.nodes[o].x0+r.graph.nodes[o].x1)/2,l=(r.graph.nodes[o].y0+r.graph.nodes[o].y1)/2;i.push(s/r.figure.width),a.push(l/r.figure.height)}w.call("_guiRestyle",n,{"node.x":[i],"node.y":[a]},r.trace.index).then(function(){n._fullLayout._dragCover&&n._fullLayout._dragCover.remove()})}function N(r){r.lastDraggedX=r.x0+r.dx/2,r.lastDraggedY=r.y0+r.dy/2}function U(r){return function(n){return n.node.originalX===r.node.originalX}}r.exports=function(r,n,i,a,o){var l=r._context.staticPlot,c=!1;d.ensureSingle(r._fullLayout._infolayer,"g","first-render",function(){c=!0});var v=r._fullLayout._dragCover,w=i.filter(function(r){return b(r).trace.visible}).map(M.bind(null,a)),T=n.selectAll("."+u.cn.sankey).data(w,m);T.exit().remove(),T.enter().append("g").classed(u.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",l?"none":"auto").attr("transform",B),T.each(function(n,i){r._fullData[i]._sankey=n;var a="bgsankey-"+n.trace.uid+"-"+i;d.ensureSingle(r._fullLayout._draggers,"rect",a),r._fullData[i]._bgRect=s.select("."+a),r._fullData[i]._bgRect.style("pointer-events",l?"none":"all").attr("width",n.width).attr("height",n.height).attr("x",n.translateX).attr("y",n.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),T.transition().ease(u.ease).duration(u.duration).attr("transform",B);var C=T.selectAll("."+u.cn.sankeyLinks).data(x,m);C.enter().append("g").classed(u.cn.sankeyLinks,!0).style("fill","none");var O=C.selectAll("."+u.cn.sankeyLink).data(function(r){return r.graph.links.filter(function(r){return r.value}).map(S.bind(null,r))},m);O.enter().append("path").classed(u.cn.sankeyLink,!0).call(R,T,o.linkEvents),O.style("stroke",function(r){return P(r)?h.tinyRGB(f(r.linkLineColor)):r.tinyColorHue}).style("stroke-opacity",function(r){return P(r)?h.opacity(r.linkLineColor):r.tinyColorAlpha}).style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha}).style("stroke-width",function(r){return P(r)?r.linkLineWidth:1}).attr("d",E()),O.style("opacity",function(){return r._context.staticPlot||c||v?1:0}).transition().ease(u.ease).duration(u.duration).style("opacity",1),O.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var F=T.selectAll("."+u.cn.sankeyNodeSet).data(x,m);F.enter().append("g").classed(u.cn.sankeyNodeSet,!0),F.style("cursor",function(r){switch(r.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var N=F.selectAll("."+u.cn.sankeyNode).data(function(r){var n=r.graph.nodes;return function(r){var n,i=[];for(n=0;n<r.length;n++)r[n].originalX=(r[n].x0+r[n].x1)/2,r[n].originalY=(r[n].y0+r[n].y1)/2,-1===i.indexOf(r[n].originalX)&&i.push(r[n].originalX);for(i.sort(function(r,n){return r-n}),n=0;n<r.length;n++)r[n].originalLayerIndex=i.indexOf(r[n].originalX),r[n].originalLayer=r[n].originalLayerIndex/(i.length-1)}(n),n.map(I.bind(null,r))},m);N.enter().append("g").classed(u.cn.sankeyNode,!0).call(L).style("opacity",function(n){return(r._context.staticPlot||c)&&!n.partOfGroup?1:0}),N.call(R,T,o.nodeEvents).call(z,O,o,r),N.transition().ease(u.ease).duration(u.duration).call(L).style("opacity",function(r){return r.partOfGroup?0:1}),N.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var U=N.selectAll("."+u.cn.nodeRect).data(x);U.enter().append("rect").classed(u.cn.nodeRect,!0).call(D),U.style("stroke-width",function(r){return r.nodeLineWidth}).style("stroke",function(r){return h.tinyRGB(f(r.nodeLineColor))}).style("stroke-opacity",function(r){return h.opacity(r.nodeLineColor)}).style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha}),U.transition().ease(u.ease).duration(u.duration).call(D);var j=N.selectAll("."+u.cn.nodeLabel).data(x);j.enter().append("text").classed(u.cn.nodeLabel,!0).style("cursor","default"),j.attr("data-notex",1).text(function(r){return r.node.label}).each(function(n){var i=s.select(this);p.font(i,n.textFont),_.convertToTspans(i,r)}).attr("text-anchor",function(r){return r.horizontal&&r.left?"end":"start"}).attr("transform",function(r){var n=s.select(this),i=_.lineCount(n),a=r.textFont.size*((i-1)*k-A),o=r.nodeLineWidth/2+3,l=((r.horizontal?r.visibleHeight:r.visibleWidth)-a)/2;r.horizontal&&(r.left?o=-o:o+=r.visibleWidth);var c=r.horizontal?"":"scale(-1,1)"+g(90);return y(r.horizontal?o:l,r.horizontal?l:o)+c}),j.transition().ease(u.ease).duration(u.duration)}},81128:function(r){r.exports=function(r,n){for(var i=[],a=r.cd[0].trace,o=a._sankey.graph.nodes,s=0;s<o.length;s++){var l=o[s];if(!l.partOfGroup){var c=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];"v"===a.orientation&&c.reverse(),n&&n.contains(c,!1,s,r)&&i.push({pointNumber:l.pointNumber})}}return i}},20148:function(r,n,i){var a=i(3400);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.texttemplate,r,"txt"),a.mergeArray(n.hovertext,r,"htx"),a.mergeArray(n.customdata,r,"data"),a.mergeArray(n.textposition,r,"tp"),n.textfont&&(a.mergeArrayCastPositive(n.textfont.size,r,"ts"),a.mergeArray(n.textfont.color,r,"tc"),a.mergeArray(n.textfont.family,r,"tf"),a.mergeArray(n.textfont.weight,r,"tw"),a.mergeArray(n.textfont.style,r,"ty"),a.mergeArray(n.textfont.variant,r,"tv"),a.mergeArray(n.textfont.textcase,r,"tC"),a.mergeArray(n.textfont.lineposition,r,"tE"),a.mergeArray(n.textfont.shadow,r,"tS"));var o=n.marker;if(o){a.mergeArrayCastPositive(o.size,r,"ms"),a.mergeArrayCastPositive(o.opacity,r,"mo"),a.mergeArray(o.symbol,r,"mx"),a.mergeArray(o.angle,r,"ma"),a.mergeArray(o.standoff,r,"mf"),a.mergeArray(o.color,r,"mc");var s=o.line;o.line&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"));var l=o.gradient;l&&"none"!==l.type&&(a.mergeArray(l.type,r,"mgt"),a.mergeArray(l.color,r,"mgc"))}}},52904:function(r,n,i){var a=i(29736).axisHoverFormat,o=i(21776).Gw,s=i(21776).Ks,l=i(49084),c=i(25376),u=i(98192).u,f=i(98192).c,h=i(43616),p=i(88200),d=i(92880).extendFlat,y=i(98304);r.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:a("x"),yhoverformat:a("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:o({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:s({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},u,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:y(!0),fillgradient:d({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:f,marker:d({symbol:{valType:"enumerated",values:h.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:c({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(r,n,i){var a=i(38248),o=i(3400),s=i(54460),l=i(1220),c=i(39032).BADNUM,u=i(43028),f=i(90136),h=i(20148),p=i(4500);function d(r,n,i,a,o,l,c){var f=n._length,h=r._fullLayout,p=i._id,d=a._id,y=h._firstScatter[v(n)]===n.uid,g=(m(n,h,i,a)||{}).orientation,x=n.fill;i._minDtick=0,a._minDtick=0;var b={padded:!0},_={padded:!0};c&&(b.ppad=_.ppad=c);var w=f<2||o[0]!==o[f-1]||l[0]!==l[f-1];w&&("tozerox"===x||"tonextx"===x&&(y||"h"===g))?b.tozero=!0:(n.error_y||{}).visible||"tonexty"!==x&&"tozeroy"!==x&&(u.hasMarkers(n)||u.hasText(n))||(b.padded=!1,b.ppad=0),w&&("tozeroy"===x||"tonexty"===x&&(y||"v"===g))?_.tozero=!0:"tonextx"!==x&&"tozerox"!==x||(_.padded=!1),p&&(n._extremes[p]=s.findExtremes(i,o,b)),d&&(n._extremes[d]=s.findExtremes(a,l,_))}function y(r,n){if(u.hasMarkers(r)){var i,a=r.marker,l=1.6*(r.marker.sizeref||1);if(i="area"===r.marker.sizemode?function(r){return Math.max(Math.sqrt((r||0)/l),3)}:function(r){return Math.max((r||0)/l,3)},o.isArrayOrTypedArray(a.size)){var c={type:"linear"};s.setConvert(c);for(var f=c.makeCalcdata(r.marker,"size"),h=Array(n),p=0;p<n;p++)h[p]=i(f[p]);return h}return i(a.size)}}function g(r,n){var i=v(n),a=r._firstScatter;a[i]||(a[i]=n.uid)}function v(r){var n=r.stackgroup;return r.xaxis+r.yaxis+r.type+(n?"-"+n:"")}function m(r,n,i,a){var o=r.stackgroup;if(o){var s=n._scatterStackOpts[i._id+a._id][o],l="v"===s.orientation?a:i;return"linear"===l.type||"log"===l.type?s:void 0}}r.exports={calc:function(r,n){var i,u,v,x,b,_,w=r._fullLayout,T=n._xA=s.getFromId(r,n.xaxis||"x","x"),A=n._yA=s.getFromId(r,n.yaxis||"y","y"),k=T.makeCalcdata(n,"x"),M=A.makeCalcdata(n,"y"),S=l(n,T,"x",k),E=l(n,A,"y",M),I=S.vals,L=E.vals,C=n._length,O=Array(C),D=n.ids,P=m(n,w,T,A),B=!1;g(w,n);var R,z="x",F="y";P?(o.pushUnique(P.traceIndices,n._expandedIndex),(i="v"===P.orientation)?(F="s",R="x"):(z="s",R="y"),b="interpolate"===P.stackgaps):d(r,n,T,A,I,L,y(n,C));var N=!!n.xperiodalignment,U=!!n.yperiodalignment;for(u=0;u<C;u++){var j=O[u]={},V=a(I[u]),H=a(L[u]);V&&H?(j[z]=I[u],j[F]=L[u],N&&(j.orig_x=k[u],j.xEnd=S.ends[u],j.xStart=S.starts[u]),U&&(j.orig_y=M[u],j.yEnd=E.ends[u],j.yStart=E.starts[u])):P&&(i?V:H)?(j[R]=i?I[u]:L[u],j.gap=!0,b?(j.s=c,B=!0):j.s=0):j[z]=j[F]=c,D&&(j.id=String(D[u]))}if(h(O,n),f(r,n),p(O,n),P){for(u=0;u<O.length;)O[u][R]===c?O.splice(u,1):u++;if(o.sort(O,function(r,n){return r[R]-n[R]||r.i-n.i}),B){for(u=0;u<O.length-1&&O[u].gap;)u++;for((_=O[u].s)||(_=O[u].s=0),v=0;v<u;v++)O[v].s=_;for(x=O.length-1;x>u&&O[x].gap;)x--;for(_=O[x].s,v=O.length-1;v>x;v--)O[v].s=_;for(;u<x;)if(O[++u].gap){for(v=u+1;O[v].gap;)v++;for(var q=O[u-1][R],G=O[u-1].s,W=(O[v].s-G)/(O[v][R]-q);u<v;)O[u].s=G+(O[u][R]-q)*W,u++}}}return O},calcMarkerSize:y,calcAxisExpansion:d,setFirstScatter:g,getStackOpts:m}},4500:function(r,n,i){var a=i(3400);r.exports=function(r,n){a.isArrayOrTypedArray(n.selectedpoints)&&a.tagSelected(r,n)}},90136:function(r,n,i){var a=i(94288).hasColorscale,o=i(47128),s=i(43028);r.exports=function(r,n){s.hasLines(n)&&a(n,"line")&&o(r,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),s.hasMarkers(n)&&(a(n,"marker")&&o(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),a(n,"marker.line")&&o(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(r){r.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(r,n,i){var a=i(16356),o=i(96376).setGroupPositions;function s(r,n,i,a,o,s,l){o[a]=!0;var c,u,f={i:null,gap:!0,s:0};if(f[l]=i,r.splice(n,0,f),n&&i===r[n-1][l]){var h=r[n-1];f.s=h.s,f.i=h.i,f.gap=h.gap}else s&&(f.s=(c=r[n-1],(u=r[n+1])?c?c.s+(u.s-c.s)*(i-c[l])/(u[l]-c[l]):u.s:c.s));n||(r[0].t=r[1].t,r[0].trace=r[1].trace,delete r[1].t,delete r[1].trace)}r.exports=function(r,n){"group"===r._fullLayout.scattermode&&function(r,n){for(var i=n.xaxis,a=n.yaxis,s=r._fullLayout,l=r._fullData,c=r.calcdata,u=[],f=[],h=0;h<l.length;h++){var p=l[h];!0===p.visible&&"scatter"===p.type&&p.xaxis===i._id&&p.yaxis===a._id&&("h"===p.orientation?u.push(c[h]):"v"===p.orientation&&f.push(c[h]))}var d={mode:s.scattermode,gap:s.scattergap};o(r,i,a,f,d),o(r,a,i,u,d)}(r,n);var i=n.xaxis,l=n.yaxis,c=i._id+l._id,u=r._fullLayout._scatterStackOpts[c];if(u){var f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M=r.calcdata;for(var S in u){var E=(b=u[S]).traceIndices;if(E.length){for(_="interpolate"===b.stackgaps,w=b.groupnorm,"v"===b.orientation?(T="x",A="y"):(T="y",A="x"),k=Array(E.length),f=0;f<k.length;f++)k[f]=!1;var I=Array((g=M[E[0]]).length);for(f=0;f<g.length;f++)I[f]=g[f][T];for(f=1;f<E.length;f++){for(y=M[E[f]],h=p=0;h<y.length;h++){for(v=y[h][T];v>I[p]&&p<I.length;p++)s(y,h,I[p],f,k,_,T),h++;if(v!==I[p]){for(d=0;d<f;d++)s(M[E[d]],p,v,d,k,_,T);I.splice(p,0,v)}p++}for(;p<I.length;p++)s(y,h,I[p],f,k,_,T),h++}var L=I.length;for(h=0;h<g.length;h++){for(m=g[h][A]=g[h].s,f=1;f<E.length;f++)(y=M[E[f]])[0].trace._rawLength=y[0].trace._length,y[0].trace._length=L,m+=y[h].s,y[h][A]=m;if(w)for(x=("fraction"===w?m:m/100)||1,f=0;f<E.length;f++){var C=M[E[f]][h];C[A]/=x,C.sNorm=C.s/x}}for(f=0;f<E.length;f++){var O=(y=M[E[f]])[0].trace,D=a.calcMarkerSize(O,O._rawLength),P=Array.isArray(D);if(D&&k[f]||P){var B=D;for(D=Array(L),h=0;h<L;h++)D[h]=y[h].gap?0:P?B[y[h].i]:B}var R=Array(L),z=Array(L);for(h=0;h<L;h++)R[h]=y[h].x,z[h]=y[h].y;a.calcAxisExpansion(r,O,i,l,R,z,D),y[0].t.orientation=b.orientation}}}}}},35036:function(r,n,i){var a=i(3400),o=i(20011),s=i(52904);r.exports=function(r,n){var i,l;function c(r){return a.coerce(i._input,i,s,r)}if("group"===n.scattermode)for(l=0;l<r.length;l++)"scatter"===(i=r[l]).type&&o(i._input,i,n,c);for(l=0;l<r.length;l++){var u=r[l];if("scatter"===u.type){var f=u.fill;if("none"!==f&&"toself"!==f&&(u.opacity=void 0,"tonexty"===f||"tonextx"===f))for(var h=l-1;h>=0;h--){var p=r[h];if("scatter"===p.type&&p.xaxis===u.xaxis&&p.yaxis===u.yaxis){p.opacity=void 0;break}}}}}},18800:function(r,n,i){var a=i(3400),o=i(24040),s=i(52904),l=i(88200),c=i(43028),u=i(43980),f=i(31147),h=i(43912),p=i(74428),d=i(66828),y=i(11731),g=i(124),v=i(70840),m=i(3400).coercePattern;r.exports=function(r,n,i,x){function b(i,o){return a.coerce(r,n,s,i,o)}var _=u(r,n,x,b);if(_||(n.visible=!1),n.visible){f(r,n,x,b),b("xhoverformat"),b("yhoverformat"),b("zorder");var w=h(r,n,x,b);"group"===x.scattermode&&void 0===n.orientation&&b("orientation","v");var T=!w&&_<l.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("mode",T),c.hasMarkers(n)&&p(r,n,i,x,b,{gradient:!0}),c.hasLines(n)&&(d(r,n,i,x,b,{backoff:!0}),y(r,n,b),b("connectgaps"),b("line.simplify")),c.hasText(n)&&(b("texttemplate"),g(r,n,x,b));var A=[];(c.hasMarkers(n)||c.hasText(n))&&(b("cliponaxis"),b("marker.maxdisplayed"),A.push("points")),b("fill",w?w.fillDflt:"none"),"none"!==n.fill&&(v(r,n,i,b,{moduleHasFillgradient:!0}),c.hasLines(n)||y(r,n,b),m(b,"fillpattern",n.fillcolor,!1));var k=(n.line||{}).color,M=(n.marker||{}).color;"tonext"!==n.fill&&"toself"!==n.fill||A.push("fills"),b("hoveron",A.join("+")||"points"),"fills"!==n.hoveron&&b("hovertemplate");var S=o.getComponentMethod("errorbars","supplyDefaults");S(r,n,k||M||i,{axis:"y"}),S(r,n,k||M||i,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(n,b)}}},98304:function(r){r.exports=function(r){return{valType:"color",editType:"style",anim:!0}}},70840:function(r,n,i){var a=i(76308),o=i(3400).isArrayOrTypedArray;r.exports=function(r,n,i,s,l){l||(l={});var c,u=!1;if(n.marker){var f=n.marker.color,h=(n.marker.line||{}).color;f&&!o(f)?u=f:h&&!o(h)&&(u=h)}if(l.moduleHasFillgradient&&"none"!==s("fillgradient.type")){s("fillgradient.start"),s("fillgradient.stop");var p=s("fillgradient.colorscale");p&&(c=function(r){for(var n=a.interpolate(r[0][1],r[1][1],.5),i=2;i<r.length;i++){var o=a.interpolate(r[i-1][1],r[i][1],.5);n=a.interpolate(n,o,r[i-1][0]/r[i][0])}return n}(p))}s("fillcolor",a.addOpacity((n.line||{}).color||u||c||i,.5))}},76688:function(r,n,i){var a=i(54460);r.exports=function(r,n,i){var o={},s={_fullLayout:i},l=a.getFromTrace(s,n,"x"),c=a.getFromTrace(s,n,"y"),u=r.orig_x;void 0===u&&(u=r.x);var f=r.orig_y;return void 0===f&&(f=r.y),o.xLabel=a.tickText(l,l.c2l(u),!0).text,o.yLabel=a.tickText(c,c.c2l(f),!0).text,o}},44928:function(r,n,i){var a=i(76308),o=i(43028);r.exports=function(r,n){if("lines"===r.mode)return(i=r.line.color)&&a.opacity(i)?i:r.fillcolor;if("none"===r.mode)return r.fill?r.fillcolor:"";var i,s,l=n.mcc||(r.marker||{}).color,c=n.mlcc||((r.marker||{}).line||{}).color;return(s=l&&a.opacity(l)?l:c&&a.opacity(c)&&(n.mlw||((r.marker||{}).line||{}).width)?c:"")?.3>a.opacity(s)?a.addOpacity(s,.3):s:(i=(r.line||{}).color)&&a.opacity(i)&&o.hasLines(r)&&r.line.width?i:r.fillcolor}},20011:function(r,n,i){var a=i(71888).getAxisGroup;r.exports=function(r,n,i,o){var s=n.orientation,l=a(i,n[({v:"x",h:"y"})[s]+"axis"])+s,c=i._alignmentOpts||{},u=o("alignmentgroup"),f=c[l];f||(f=c[l]={});var h=f[u];h?h.traces.push(n):h=f[u]={traces:[n],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var p=o("offsetgroup"),d=h.offsetGroups,y=d[p];p&&(y||(y=d[p]={offsetIndex:Object.keys(d).length}),n._offsetIndex=y.offsetIndex)}},98723:function(r,n,i){var a=i(3400),o=i(93024),s=i(24040),l=i(44928),c=i(76308),u=a.fillText;r.exports=function(r,n,i,f){var h=r.cd,p=h[0].trace,d=r.xa,y=r.ya,g=d.c2p(n),v=y.c2p(i),m=[g,v],x=p.hoveron||"",b=-1!==p.mode.indexOf("markers")?3:.5,_=!!p.xperiodalignment,w=!!p.yperiodalignment;if(-1!==x.indexOf("points")){var T=function(r){var n=Math.max(b,r.mrc||0),i=d.c2p(r.x)-g,a=y.c2p(r.y)-v;return Math.max(Math.sqrt(i*i+a*a)-n,1-b/n)},A=o.getDistanceFunction(f,function(r){if(_){var n=d.c2p(r.xStart),i=d.c2p(r.xEnd);return g>=Math.min(n,i)&&g<=Math.max(n,i)?0:1/0}var a=Math.max(3,r.mrc||0),o=1-1/a,s=Math.abs(d.c2p(r.x)-g);return s<a?o*s/a:s-a+o},function(r){if(w){var n=y.c2p(r.yStart),i=y.c2p(r.yEnd);return v>=Math.min(n,i)&&v<=Math.max(n,i)?0:1/0}var a=Math.max(3,r.mrc||0),o=1-1/a,s=Math.abs(y.c2p(r.y)-v);return s<a?o*s/a:s-a+o},T);if(o.getClosest(h,A,r),!1!==r.index){var k=h[r.index],M=d.c2p(k.x,!0),S=y.c2p(k.y,!0),E=k.mrc||1;r.index=k.i;var I=h[0].t.orientation,L=I&&(k.sNorm||k.s),C="h"===I?L:void 0!==k.orig_x?k.orig_x:k.x,O="v"===I?L:void 0!==k.orig_y?k.orig_y:k.y;return a.extendFlat(r,{color:l(p,k),x0:M-E,x1:M+E,xLabelVal:C,y0:S-E,y1:S+E,yLabelVal:O,spikeDistance:T(k),hovertemplate:p.hovertemplate}),u(k,p,r),s.getComponentMethod("errorbars","hoverInfo")(k,p,r),[r]}}function D(r){if(!r)return!1;var n=r.node();try{var i=new DOMPoint(m[0],m[1]);return n.isPointInFill(i)}catch(r){var a=n.ownerSVGElement.createSVGPoint();return a.x=m[0],a.y=m[1],n.isPointInFill(a)}}if(-1!==x.indexOf("fills")&&p._fillElement&&D(p._fillElement)&&!D(p._fillExclusionElement)){var P=function(r){var n,i,a,o,s,l,c,u,f,h=[],p=1/0,g=-1/0,v=1/0,x=-1/0;for(n=0;n<r.length;n++){var b=r[n];b.contains(m)&&(h.push(b),v=Math.min(v,b.ymin),x=Math.max(x,b.ymax))}if(0===h.length)return null;for(i=((v=Math.max(v,0))+(x=Math.min(x,y._length)))/2,n=0;n<h.length;n++)for(o=h[n].pts,a=1;a<o.length;a++)(u=o[a-1][1])>i!=(f=o[a][1])>=i&&(l=o[a-1][0],c=o[a][0],f-u&&(p=Math.min(p,s=l+(c-l)*(i-u)/(f-u)),g=Math.max(g,s)));return{x0:p=Math.max(p,0),x1:g=Math.min(g,d._length),y0:i,y1:i}}(p._polygons);null===P&&(P={x0:m[0],x1:m[0],y0:m[1],y1:m[1]});var B=c.defaultLine;return c.opacity(p.fillcolor)?B=p.fillcolor:c.opacity((p.line||{}).color)&&(B=p.line.color),a.extendFlat(r,{distance:r.maxHoverDistance,x0:P.x0,x1:P.x1,y0:P.y0,y1:P.y1,color:B,hovertemplate:!1}),delete r.index,p.text&&!a.isArrayOrTypedArray(p.text)?r.text=String(p.text):r.text=p.name,[r]}}},65875:function(r,n,i){var a=i(43028);r.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:i(52904),layoutAttributes:i(55308),supplyDefaults:i(18800),crossTraceDefaults:i(35036),supplyLayoutDefaults:i(59748),calc:i(16356).calc,crossTraceCalc:i(96664),arraysToCalcdata:i(20148),plot:i(96504),colorbar:i(5528),formatLabels:i(76688),style:i(49224).style,styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(98723),selectPoints:i(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:i(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(r){r.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(r,n,i){var a=i(3400),o=i(55308);r.exports=function(r,n){var i,s="group"===n.barmode;"group"===n.scattermode&&(i=s?n.bargap:.2,a.coerce(r,n,o,"scattergap",i))}},66828:function(r,n,i){var a=i(3400).isArrayOrTypedArray,o=i(94288).hasColorscale,s=i(27260);r.exports=function(r,n,i,l,c,u){u||(u={});var f=(r.marker||{}).color;f&&f._inputArray&&(f=f._inputArray),c("line.color",i),o(r,"line")?s(r,n,l,c,{prefix:"line.",cLetter:"c"}):c("line.color",!a(f)&&f||i),c("line.width"),u.noDash||c("line.dash"),u.backoff&&c("line.backoff")}},52340:function(r,n,i){var a=i(43616),o=i(39032),s=o.BADNUM,l=o.LOG_CLIP,c=l+.5,u=l-.5,f=i(3400),h=f.segmentsIntersect,p=f.constrain,d=i(88200);r.exports=function(r,n){var i,o,l,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L=n.trace||{},C=n.xaxis,O=n.yaxis,D="log"===C.type,P="log"===O.type,B=C._length,R=O._length,z=n.backoff,F=L.marker,N=n.connectGaps,U=n.baseTolerance,j=n.shape,V="linear"===j,H=L.fill&&"none"!==L.fill,q=[],G=d.minTolerance,W=r.length,Y=Array(W),Z=0;function X(i){var a=r[i];if(!a)return!1;var o=n.linearized?C.l2p(a.x):C.c2p(a.x),l=n.linearized?O.l2p(a.y):O.c2p(a.y);if(o===s){if(D&&(o=C.c2p(a.x,!0)),o===s)return!1;P&&l===s&&(o*=Math.abs(C._m*R*(C._m>0?c:u)/(O._m*B*(O._m>0?c:u)))),o*=1e3}if(l===s){if(P&&(l=O.c2p(a.y,!0)),l===s)return!1;l*=1e3}return[o,l]}function K(r,n,i,a){var o=i-r,s=a-n,l=.5-r,c=.5-n,u=o*o+s*s,f=o*l+s*c;if(f>0&&f<u){var h=l*s-c*o;if(h*h<u)return!0}}function J(r,n){var i=r[0]/B,a=r[1]/R,o=Math.max(0,-i,i-1,-a,a-1);return o&&void 0!==E&&K(i,a,E,I)&&(o=0),o&&n&&K(i,a,n[0]/B,n[1]/R)&&(o=0),(1+d.toleranceGrowth*o)*U}function $(r,n){var i=r[0]-n[0],a=r[1]-n[1];return Math.sqrt(i*i+a*a)}var Q,tt,te,tr,tn,ti,ta,to=d.maxScreensAway,ts=-B*to,tl=B*(1+to),tc=-R*to,tu=R*(1+to),tf=[[ts,tc,tl,tc],[tl,tc,tl,tu],[tl,tu,ts,tu],[ts,tu,ts,tc]];function th(r){if(r[0]<ts||r[0]>tl||r[1]<tc||r[1]>tu)return[p(r[0],ts,tl),p(r[1],tc,tu)]}function tp(r,n){return r[0]===n[0]&&(r[0]===ts||r[0]===tl)||r[1]===n[1]&&(r[1]===tc||r[1]===tu)||void 0}function td(r,n,i){return function(a,o){var s=th(a),l=th(o),c=[];if(s&&l&&tp(s,l))return c;s&&c.push(s),l&&c.push(l);var u=2*f.constrain((a[r]+o[r])/2,n,i)-((s||a)[r]+(l||o)[r]);return u&&((s&&l?u>0==s[r]>l[r]?s:l:s||l)[r]+=u),c}}function ty(r){var n=r[0],i=r[1],a=n===Y[Z-1][0],o=i===Y[Z-1][1];if(!a||!o){if(Z>1){var s=n===Y[Z-2][0],l=i===Y[Z-2][1];a&&(n===ts||n===tl)&&s?l?Z--:Y[Z-1]=r:o&&(i===tc||i===tu)&&l?s?Z--:Y[Z-1]=r:Y[Z++]=r}else Y[Z++]=r}}function tg(r){Y[Z-1][0]!==r[0]&&Y[Z-1][1]!==r[1]&&ty([te,tr]),ty(r),tn=null,te=tr=0}"linear"===j||"spline"===j?ta=function(r,n){for(var i=[],a=0,o=0;o<4;o++){var s=tf[o],l=h(r[0],r[1],n[0],n[1],s[0],s[1],s[2],s[3]);l&&(!a||Math.abs(l.x-i[0][0])>1||Math.abs(l.y-i[0][1])>1)&&(l=[l.x,l.y],a&&$(l,r)<$(i[0],r)?i.unshift(l):i.push(l),a++)}return i}:"hv"===j||"vh"===j?ta=function(r,n){var i=[],a=th(r),o=th(n);return a&&o&&tp(a,o)||(a&&i.push(a),o&&i.push(o)),i}:"hvh"===j?ta=td(0,ts,tl):"vhv"===j&&(ta=td(1,tc,tu));var tv=f.isArrayOrTypedArray(F);function tm(n){if(n&&z&&(n.i=i,n.d=r,n.trace=L,n.marker=tv?F[n.i]:F,n.backoff=z),E=n[0]/B,I=n[1]/R,Q=n[0]<ts?ts:n[0]>tl?tl:0,tt=n[1]<tc?tc:n[1]>tu?tu:0,Q||tt){if(Z){if(tn){var a,o,s,l=ta(tn,n);l.length>1&&(tg(l[0]),Y[Z++]=l[1])}else ti=ta(Y[Z-1],n)[0],Y[Z++]=ti}else Y[Z++]=[Q||n[0],tt||n[1]];var c=Y[Z-1];Q&&tt&&(c[0]!==Q||c[1]!==tt)?(tn&&(te!==Q&&tr!==tt?ty(te&&tr?(a=tn,o=n[0]-a[0],s=(n[1]-a[1])/o,(a[1]*n[0]-n[1]*a[0])/o>0?[s>0?ts:tl,tu]:[s>0?tl:ts,tc]):[te||Q,tr||tt]):te&&tr&&ty([te,tr])),ty([Q,tt])):te-Q&&tr-tt&&ty([Q||te,tt||tr]),tn=n,te=Q,tr=tt}else tn&&tg(ta(tn,n)[0]),Y[Z++]=n}for(i=0;i<W;i++)if(o=X(i)){for(Z=0,tn=null,tm(o),i++;i<W;i++){if(!(y=X(i))){if(N)continue;break}if(V&&n.simplify){var tx=X(i+1);if(_=$(y,o),H&&(0===Z||Z===W-1)||!(_<J(y,tx)*G)){for(x=[(y[0]-o[0])/_,(y[1]-o[1])/_],g=o,w=_,T=k=M=0,m=!1,l=y,i++;i<r.length;i++){if(v=tx,tx=X(i+1),!v){if(N)continue;break}if(k=Math.min(k,S=(b=[v[0]-o[0],v[1]-o[1]])[0]*x[1]-b[1]*x[0]),(M=Math.max(M,S))-k>J(v,tx))break;l=v,(A=b[0]*x[0]+b[1]*x[1])>w?(w=A,y=v,m=!1):A<T&&(T=A,g=v,m=!0)}if(m?(tm(y),l!==g&&tm(g)):(g!==o&&tm(g),l!==y&&tm(y)),tm(l),i>=r.length||!v)break;tm(v),o=v}}else tm(y)}tn&&ty([te||tn[0],tr||tn[1]]),q.push(Y.slice(0,Z))}var tb=j.slice(j.length-1);if(z&&"h"!==tb&&"v"!==tb){for(var t_=!1,tw=-1,tT=[],tA=0;tA<q.length;tA++)for(var tk=0;tk<q[tA].length-1;tk++){var tM=q[tA][tk],tS=q[tA][tk+1],tE=a.applyBackoff(tS,tM);tE[0]===tS[0]&&tE[1]===tS[1]||(t_=!0),tT[tw+1]||(tT[++tw]=[tM,[tE[0],tE[1]]])}return t_?tT:q}return q}},11731:function(r){r.exports=function(r,n,i){"spline"===i("line.shape")&&i("line.smoothing")}},14328:function(r){var n={tonextx:1,tonexty:1,tonext:1};r.exports=function(r,i,a){var o,s,l,c,u,f={},h=!1,p=-1,d=0,y=-1;for(s=0;s<a.length;s++)(l=(o=a[s][0].trace).stackgroup||"")?l in f?u=f[l]:(u=f[l]=d,d++):o.fill in n&&y>=0?u=y:(u=y=d,d++),u<p&&(h=!0),o._groupIndex=p=u;var g=a.slice();h&&g.sort(function(r,n){var i=r[0].trace,a=n[0].trace;return i._groupIndex-a._groupIndex||i.index-a.index});var v={};for(s=0;s<g.length;s++)l=(o=g[s][0].trace).stackgroup||"",!0===o.visible?(o._nexttrace=null,o.fill in n&&(c=v[l],o._prevtrace=c||null,c&&(c._nexttrace=o)),o._ownfill=o.fill&&("tozero"===o.fill.substr(0,6)||"toself"===o.fill||"to"===o.fill.substr(0,2)&&!o._prevtrace),v[l]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return g}},7152:function(r,n,i){var a=i(38248);r.exports=function(r,n){n||(n=2);var i=r.marker,o=i.sizeref||1,s=i.sizemin||0,l="area"===i.sizemode?function(r){return Math.sqrt(r/o)}:function(r){return r/o};return function(r){var i=l(r/n);return a(i)&&i>0?Math.max(i,s):0}}},5528:function(r){r.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(r,n,i){var a=i(76308),o=i(94288).hasColorscale,s=i(27260),l=i(43028);r.exports=function(r,n,i,c,u,f){var h=l.isBubble(r),p=(r.line||{}).color;f=f||{},p&&(i=p),u("marker.symbol"),u("marker.opacity",h?.7:1),u("marker.size"),f.noAngle||(u("marker.angle"),f.noAngleRef||u("marker.angleref"),f.noStandOff||u("marker.standoff")),u("marker.color",i),o(r,"marker")&&s(r,n,c,u,{prefix:"marker.",cLetter:"c"}),f.noSelect||(u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size")),f.noLine||(u("marker.line.color",p&&!Array.isArray(p)&&n.marker.color!==p?p:h?a.background:a.defaultLine),o(r,"marker.line")&&s(r,n,c,u,{prefix:"marker.line.",cLetter:"c"}),u("marker.line.width",h?1:0)),h&&(u("marker.sizeref"),u("marker.sizemin"),u("marker.sizemode")),f.gradient&&"none"!==u("marker.gradient.type")&&u("marker.gradient.color")}},31147:function(r,n,i){var a=i(3400).dateTick0,o=i(39032).ONEWEEK;function s(r,n){return a(n,r%o==0?1:0)}r.exports=function(r,n,i,a,o){if(o||(o={x:!0,y:!0}),o.x){var l=a("xperiod");l&&(a("xperiod0",s(l,n.xcalendar)),a("xperiodalignment"))}if(o.y){var c=a("yperiod");c&&(a("yperiod0",s(c,n.ycalendar)),a("yperiodalignment"))}}},96504:function(r,n,i){var a=i(33428),o=i(24040),s=i(3400),l=s.ensureSingle,c=s.identity,u=i(43616),f=i(43028),h=i(52340),p=i(14328),d=i(92065).tester;function y(r,n,i,p,y,g,v){var m,x=r._context.staticPlot;!function(r,n,i,o,l){var c=i.xaxis,u=i.yaxis,h=a.extent(s.simpleMap(c.range,c.r2c)),p=a.extent(s.simpleMap(u.range,u.r2c)),d=o[0].trace;if(f.hasMarkers(d)){var y=d.marker.maxdisplayed;if(0!==y){var g=o.filter(function(r){return r.x>=h[0]&&r.x<=h[1]&&r.y>=p[0]&&r.y<=p[1]}),v=Math.ceil(g.length/y),m=0;l.forEach(function(r,i){var a=r[0].trace;f.hasMarkers(a)&&a.marker.maxdisplayed>0&&i<n&&m++});var x=Math.round(m*v/3+Math.floor(m/3)*v/7.1);o.forEach(function(r){delete r.vis}),g.forEach(function(r,n){0===Math.round((n+x)%v)&&(r.vis=!0)})}}}(0,n,i,p,y);var b=!!v&&v.duration>0;function _(r){return b?r.transition():r}var w=i.xaxis,T=i.yaxis,A=p[0].trace,k=A.line,M=a.select(g),S=l(M,"g","errorbars"),E=l(M,"g","lines"),I=l(M,"g","points"),L=l(M,"g","text");if(o.getComponentMethod("errorbars","plot")(r,S,i,v),!0===A.visible){_(M).style("opacity",A.opacity);var C,O,D,P,B=A.fill.charAt(A.fill.length-1);"x"!==B&&"y"!==B&&(B=""),"y"===B?(D=1,P=T.c2p(0,!0)):"x"===B&&(D=0,P=w.c2p(0,!0)),p[0][i.isRangePlot?"nodeRangePlot3":"node3"]=M;var R,z,F="",N=[],U=A._prevtrace,j=null,V=null;U&&(F=U._prevRevpath||"",O=U._nextFill,N=U._ownPolygons,j=U._fillsegments,V=U._fillElement);var H,q,G,W,Y,Z,X="",K="",J=[];A._polygons=[];var $=[],Q=[],tt=s.noop;if(C=A._ownFill,f.hasLines(A)||"none"!==A.fill){O&&O.datum(p),-1!==["hv","vh","hvh","vhv"].indexOf(k.shape)?(H=u.steps(k.shape),q=u.steps(k.shape.split("").reverse().join(""))):H=q="spline"===k.shape?function(r){var n=r[r.length-1];return r.length>1&&r[0][0]===n[0]&&r[0][1]===n[1]?u.smoothclosed(r.slice(1),k.smoothing):u.smoothopen(r,k.smoothing)}:function(r){return"M"+r.join("L")},G=function(r){return q(r.reverse())},$=Array((Q=h(p,{xaxis:w,yaxis:T,trace:A,connectGaps:A.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:A.fill})).length);var te=0;for(m=0;m<Q.length;m++){var tr,tn=Q[m];tr&&B?tr.push.apply(tr,tn):(tr=tn.slice(),$[te]=tr,te++)}A._fillElement=null,A._fillExclusionElement=V,A._fillsegments=$.slice(0,te),$=A._fillsegments,Q.length&&(W=Q[0][0].slice(),Z=(Y=Q[Q.length-1])[Y.length-1].slice()),tt=function(r){return function(n){if(R=H(n),z=G(n),X?B?(X+="L"+R.substr(1),K=z+"L"+K.substr(1)):(X+="Z"+R,K=z+"Z"+K):(X=R,K=z),f.hasLines(A)){var i=a.select(this);if(i.datum(p),r)_(i.style("opacity",0).attr("d",R).call(u.lineGroupStyle)).style("opacity",1);else{var o=_(i);o.attr("d",R),u.singleLineStyle(p,o)}}}}}var ti=E.selectAll(".js-line").data(Q);_(ti.exit()).style("opacity",0).remove(),ti.each(tt(!1)),ti.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(u.lineGroupStyle).each(tt(!0)),u.setClipUrl(ti,i.layerClipId,r);var ta=function(){var r=Array($.length);for(m=0;m<$.length;m++)r[m]=d($[m]);return r},to=function(r){var n,i;if(r&&0!==r.length){for(n=Array(r.length-1+$.length),i=0;i<r.length-1;i++)n[i]=d(r[i]);var a=r[r.length-1].slice();for(a.reverse(),i=0;i<$.length;i++)n[r.length-1+i]=d($[i].concat(a))}else for(n=Array($.length),i=0;i<$.length;i++){var o=$[i][0].slice(),s=$[i][$[i].length-1].slice();o[D]=s[D]=P;var l=[s,o].concat($[i]);n[i]=d(l)}return n};Q.length?(C?(C.datum(p),W&&Z&&(B?(W[D]=Z[D]=P,_(C).attr("d","M"+Z+"L"+W+"L"+X.substr(1)).call(u.singleFillStyle,r),J=to(null)):(_(C).attr("d",X+"Z").call(u.singleFillStyle,r),J=ta())),A._polygons=J,A._fillElement=C):O&&("tonext"===A.fill.substr(0,6)&&X&&F?("tonext"===A.fill?(_(O).attr("d",X+"Z"+F+"Z").call(u.singleFillStyle,r),J=ta(),A._polygons=J.concat(N)):(_(O).attr("d",X+"L"+F.substr(1)+"Z").call(u.singleFillStyle,r),J=to(j),A._polygons=J),A._fillElement=O):tl(O)),A._prevRevpath=K):(C?tl(C):O&&tl(O),A._prevRevpath=null),A._ownPolygons=J,I.datum(p),L.datum(p),function(n,o,s){var l,h=s[0].trace,p=f.hasMarkers(h),d=f.hasText(h),y=function(r){if(r.ids)return th}(h),g=tp,v=tp;if(p||d){var m=c,x=h.stackgroup,A=x&&"infer zero"===r._fullLayout._scatterStackOpts[w._id+T._id][x].stackgaps;h.marker.maxdisplayed||h._needsCull?m=A?tu:tc:x&&!A&&(m=tf),p&&(g=m),d&&(v=m)}var k,M=(l=n.selectAll("path.point").data(g,y)).enter().append("path").classed("point",!0);b&&M.call(u.pointStyle,h,r).call(u.translatePoints,w,T).style("opacity",0).transition().style("opacity",1),l.order(),p&&(k=u.makePointStyleFns(h)),l.each(function(n){var o=a.select(this),s=_(o);u.translatePoint(n,s,w,T)?(u.singlePointStyle(n,s,h,k,r),i.layerClipId&&u.hideOutsideRangePoint(n,s,w,T,h.xcalendar,h.ycalendar),h.customdata&&o.classed("plotly-customdata",null!==n.data&&void 0!==n.data)):s.remove()}),b?l.exit().transition().style("opacity",0).remove():l.exit().remove(),(l=o.selectAll("g").data(v,y)).enter().append("g").classed("textpoint",!0).append("text"),l.order(),l.each(function(r){var n=a.select(this),o=_(n.select("text"));u.translatePoint(r,o,w,T)?i.layerClipId&&u.hideOutsideRangePoint(r,n,w,T,h.xcalendar,h.ycalendar):n.remove()}),l.selectAll("text").call(u.textPointStyle,h,r).each(function(r){var n=w.c2p(r.x),i=T.c2p(r.y);a.select(this).selectAll("tspan.line").each(function(){_(a.select(this)).attr({x:n,y:i})})}),l.exit().remove()}(I,L,p);var ts=!1===A.cliponaxis?null:i.layerClipId;u.setClipUrl(I,ts,r),u.setClipUrl(L,ts,r)}function tl(r){_(r).attr("d","M0,0Z")}function tc(r){return r.filter(function(r){return!r.gap&&r.vis})}function tu(r){return r.filter(function(r){return r.vis})}function tf(r){return r.filter(function(r){return!r.gap})}function th(r){return r.id}function tp(){return!1}}r.exports=function(r,n,i,o,s,f){var h,d,g=!s,v=!!s&&s.duration>0,m=p(r,n,i);(h=o.selectAll("g.trace").data(m,function(r){return r[0].trace.uid})).enter().append("g").attr("class",function(r){return"trace scatter trace"+r[0].trace.uid}).style("stroke-miterlimit",2),h.order(),function(r,n,i){n.each(function(n){var o=l(a.select(this),"g","fills");u.setClipUrl(o,i.layerClipId,r);var s=n[0].trace,f=[];s._ownfill&&f.push("_ownFill"),s._nexttrace&&f.push("_nextFill");var h=o.selectAll("g").data(f,c);h.enter().append("g"),h.exit().each(function(r){s[r]=null}).remove(),h.order().each(function(r){s[r]=l(a.select(this),"path","js-fill")})})}(r,h,n),v?(f&&(d=f()),a.transition().duration(s.duration).ease(s.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){o.selectAll("g.trace").each(function(i,a){y(r,a,n,i,m,this,s)})})):h.each(function(i,a){y(r,a,n,i,m,this,s)}),g&&h.exit().remove(),o.selectAll("path:not([d])").remove()}},91560:function(r,n,i){var a=i(43028);r.exports=function(r,n){var i,o,s,l,c=r.cd,u=r.xaxis,f=r.yaxis,h=[],p=c[0].trace;if(!a.hasMarkers(p)&&!a.hasText(p))return[];if(!1===n)for(i=0;i<c.length;i++)c[i].selected=0;else for(i=0;i<c.length;i++)o=c[i],s=u.c2p(o.x),l=f.c2p(o.y),null!==o.i&&n.contains([s,l],!1,i,r)?(h.push({pointNumber:o.i,x:u.c2d(o.x),y:f.c2d(o.y)}),o.selected=1):o.selected=0;return h}},43912:function(r){var n=["orientation","groupnorm","stackgaps"];r.exports=function(r,i,a,o){var s=a._scatterStackOpts,l=o("stackgroup");if(l){var c=i.xaxis+i.yaxis,u=s[c];u||(u=s[c]={});var f=u[l],h=!1;f?f.traces.push(i):(f=u[l]={traceIndices:[],traces:[i]},h=!0);for(var p={orientation:i.x&&!i.y?"h":"v"},d=0;d<n.length;d++){var y=n[d],g=y+"Found";if(!f[g]){var v=void 0!==r[y],m="orientation"===y;if((v||h)&&(f[y]=o(y,p[y]),m&&(f.fillDflt="h"===f[y]?"tonextx":"tonexty"),v&&(f[g]=!0,!h&&(delete f.traces[0][y],m))))for(var x=0;x<f.traces.length-1;x++){var b=f.traces[x];b._input.fill!==b.fill&&(b.fill=f.fillDflt)}}}return f}}},49224:function(r,n,i){var a=i(33428),o=i(43616),s=i(24040);function l(r,n,i){o.pointStyle(r.selectAll("path.point"),n,i)}function c(r,n,i){o.textPointStyle(r.selectAll("text"),n,i)}r.exports={style:function(r){var n=a.select(r).selectAll("g.trace.scatter");n.style("opacity",function(r){return r[0].trace.opacity}),n.selectAll("g.points").each(function(n){l(a.select(this),n.trace||n[0].trace,r)}),n.selectAll("g.text").each(function(n){c(a.select(this),n.trace||n[0].trace,r)}),n.selectAll("g.trace path.js-line").call(o.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(o.fillGroupStyle,r,!1),s.getComponentMethod("errorbars","style")(n)},stylePoints:l,styleText:c,styleOnSelect:function(r,n,i){var a=n[0].trace;a.selectedpoints?(o.selectedPointStyle(i.selectAll("path.point"),a),o.selectedTextStyle(i.selectAll("text"),a)):(l(i,a,r),c(i,a,r))}}},43028:function(r,n,i){var a=i(3400),o=i(38116).isTypedArraySpec;r.exports={hasLines:function(r){return r.visible&&r.mode&&-1!==r.mode.indexOf("lines")},hasMarkers:function(r){return r.visible&&(r.mode&&-1!==r.mode.indexOf("markers")||"splom"===r.type)},hasText:function(r){return r.visible&&r.mode&&-1!==r.mode.indexOf("text")},isBubble:function(r){var n=r.marker;return a.isPlainObject(n)&&(a.isArrayOrTypedArray(n.size)||o(n.size))}}},124:function(r,n,i){var a=i(3400);r.exports=function(r,n,i,o,s){s=s||{},o("textposition"),a.coerceFont(o,"textfont",s.font||i.font,s),s.noSelect||(o("selected.textfont.color"),o("unselected.textfont.color"))}},43980:function(r,n,i){var a=i(3400),o=i(24040);r.exports=function(r,n,i,s){var l,c=s("x"),u=s("y");if(o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i),c){var f=a.minRowLength(c);u?l=Math.min(f,a.minRowLength(u)):(l=f,s("y0"),s("dy"))}else{if(!u)return 0;l=a.minRowLength(u),s("x0"),s("dx")}return n._length=l,l}},91592:function(r,n,i){var a=i(52904),o=i(25376),s=i(49084),l=i(29736).axisHoverFormat,c=i(21776).Ks,u=i(21776).Gw,f=i(45464),h=i(99168),p=i(87792),d=i(92880).extendFlat,y=i(67824).overrideAll,g=i(95376),v=a.line,m=a.marker,x=m.line,b=d({width:v.width,dash:{valType:"enumerated",values:g(h),dflt:"solid"}},s("line")),_=r.exports=y({x:a.x,y:a.y,z:{valType:"data_array"},text:d({},a.text,{}),texttemplate:u({},{}),hovertext:d({},a.hovertext,{}),hovertemplate:c(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:d({},a.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:a.connectgaps,line:b,marker:d({symbol:{valType:"enumerated",values:g(p),dflt:"circle",arrayOk:!0},size:d({},m.size,{dflt:8}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:d({},m.opacity,{arrayOk:!1}),colorbar:m.colorbar,line:d({width:d({},x.width,{arrayOk:!1})},s("marker.line"))},s("marker")),textposition:d({},a.textposition,{dflt:"top center"}),textfont:o({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:f.opacity,hoverinfo:d({},f.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},41484:function(r,n,i){var a=i(20148),o=i(90136);r.exports=function(r,n){var i=[{x:!1,y:!1,trace:n,t:{}}];return a(i,n),o(r,n),i}},45156:function(r,n,i){var a=i(24040);function o(r,n,i,o){if(!n||!n.visible)return null;for(var s=a.getComponentMethod("errorbars","makeComputeError")(n),l=Array(r.length),c=0;c<r.length;c++){var u=s(+r[c],c);if("log"===o.type){var f=o.c2l(r[c]),h=r[c]-u[0],p=r[c]+u[1];if(l[c]=[(o.c2l(h,!0)-f)*i,(o.c2l(p,!0)-f)*i],h>0){var d=o.c2l(h);o._lowerLogErrorBound||(o._lowerLogErrorBound=d),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,d)}}else l[c]=[-u[0]*i,u[1]*i]}return l}r.exports=function(r,n,i){var a=[o(r.x,r.error_x,n[0],i.xaxis),o(r.y,r.error_y,n[1],i.yaxis),o(r.z,r.error_z,n[2],i.zaxis)],s=function(r){for(var n=0;n<r.length;n++)if(r[n])return r[n].length;return 0}(a);if(0===s)return null;for(var l=Array(s),c=0;c<s;c++){for(var u=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(a[f])for(var h=0;h<2;h++)u[h][f]=a[f][c][h];l[c]=u}return l}},41064:function(r,n,i){var a=i(67792).gl_line3d,o=i(67792).gl_scatter3d,s=i(67792).gl_error3d,l=i(67792).gl_mesh3d,c=i(67792).delaunay_triangulate,u=i(3400),f=i(43080),h=i(33040).formatColor,p=i(7152),d=i(99168),y=i(87792),g=i(54460),v=i(10624).appendArrayPointValue,m=i(45156);function x(r,n){this.scene=r,this.uid=n,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var b=x.prototype;function _(r){return null==r?0:r.indexOf("left")>-1?-1:r.indexOf("right")>-1?1:0}function w(r){return null==r?0:r.indexOf("top")>-1?-1:r.indexOf("bottom")>-1?1:0}function T(r,n){return n(4*r)}function A(r){return y[r]}function k(r,n,i,a,o){var s=null;if(u.isArrayOrTypedArray(r)){s=[];for(var l=0;l<n;l++)void 0===r[l]?s[l]=a:s[l]=i(r[l],o)}else s=i(r,u.identity);return s}function M(r){if(u.isArrayOrTypedArray(r)){var n=r[0];return u.isArrayOrTypedArray(n)&&(r=n),"rgb("+r.slice(0,3).map(function(r){return Math.round(255*r)})+")"}return null}function S(r){return u.isArrayOrTypedArray(r)?4===r.length&&"number"==typeof r[0]?M(r):r.map(M):null}b.handlePick=function(r){if(r.object&&(r.object===this.linePlot||r.object===this.delaunayMesh||r.object===this.textMarkers||r.object===this.scatterPlot)){var n=r.index=r.data.index;return r.object.highlight&&r.object.highlight(null),this.scatterPlot&&(r.object=this.scatterPlot,this.scatterPlot.highlight(r.data)),r.textLabel="",this.textLabels&&(u.isArrayOrTypedArray(this.textLabels)?(this.textLabels[n]||0===this.textLabels[n])&&(r.textLabel=this.textLabels[n]):r.textLabel=this.textLabels),r.traceCoordinate=[this.data.x[n],this.data.y[n],this.data.z[n]],!0}},b.update=function(r){var n,i,y,x,b=this.scene.glplot.gl,M=d.solid;this.data=r;var E=function(r,n){var i,a,o,s,l,c,d=[],y=r.fullSceneLayout,x=r.dataScale,b=y.xaxis,M=y.yaxis,S=y.zaxis,E=n.marker,I=n.line,L=n.x||[],C=n.y||[],O=n.z||[],D=L.length,P=n.xcalendar,B=n.ycalendar,R=n.zcalendar;for(l=0;l<D;l++)i=b.d2l(L[l],0,P)*x[0],a=M.d2l(C[l],0,B)*x[1],o=S.d2l(O[l],0,R)*x[2],d[l]=[i,a,o];if(Array.isArray(n.text))c=n.text;else if(u.isTypedArray(n.text))c=Array.from(n.text);else if(void 0!==n.text)for(c=Array(D),l=0;l<D;l++)c[l]=n.text;function z(r,n){var i=y[r];return g.tickText(i,i.d2l(n),!0).text}var F=n.texttemplate;if(F){var N=r.fullLayout._d3locale,U=Array.isArray(F),j=U?Math.min(F.length,D):D,V=U?function(r){return F[r]}:function(){return F};for(c=Array(j),l=0;l<j;l++){var H={x:L[l],y:C[l],z:O[l]},q={xLabel:z("xaxis",L[l]),yLabel:z("yaxis",C[l]),zLabel:z("zaxis",O[l])},G={};v(G,n,l);var W=n._meta||{};c[l]=u.texttemplateString(V(l),q,N,G,H,W)}}if(s={position:d,mode:n.mode,text:c},"line"in n&&(s.lineColor=h(I,1,D),s.lineWidth=I.width,s.lineDashes=I.dash),"marker"in n){var Y=p(n);s.scatterColor=h(E,1,D),s.scatterSize=k(E.size,D,T,20,Y),s.scatterMarker=k(E.symbol,D,A,"●"),s.scatterLineWidth=E.line.width,s.scatterLineColor=h(E.line,1,D),s.scatterAngle=0}"textposition"in n&&(s.textOffset=function(r){var n=[0,0];if(Array.isArray(r))for(var i=0;i<r.length;i++)n[i]=[0,0],r[i]&&(n[i][0]=_(r[i]),n[i][1]=w(r[i]));else n[0]=_(r),n[1]=w(r);return n}(n.textposition),s.textColor=h(n.textfont,1,D),s.textSize=k(n.textfont.size,D,u.identity,12),s.textFontFamily=n.textfont.family,s.textFontWeight=n.textfont.weight,s.textFontStyle=n.textfont.style,s.textFontVariant=n.textfont.variant,s.textAngle=0);var Z=["x","y","z"];for(s.project=[!1,!1,!1],s.projectScale=[1,1,1],s.projectOpacity=[1,1,1],l=0;l<3;++l){var X=n.projection[Z[l]];(s.project[l]=X.show)&&(s.projectOpacity[l]=X.opacity,s.projectScale[l]=X.scale)}s.errorBounds=m(n,x,y);var K=function(r){for(var n=[0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],a=[1,1,1],o=0;o<3;o++){var s=r[o];s&&!1!==s.copy_zstyle&&!1!==r[2].visible&&(s=r[2]),s&&s.visible&&(n[o]=s.width/2,i[o]=f(s.color),a[o]=s.thickness)}return{capSize:n,color:i,lineWidth:a}}([n.error_x,n.error_y,n.error_z]);return s.errorColor=K.color,s.errorLineWidth=K.lineWidth,s.errorCapSize=K.capSize,s.delaunayAxis=n.surfaceaxis,s.delaunayColor=f(n.surfacecolor),s}(this.scene,r);"mode"in E&&(this.mode=E.mode),"lineDashes"in E&&E.lineDashes in d&&(M=d[E.lineDashes]),this.color=S(E.scatterColor)||S(E.lineColor),this.dataPoints=E.position,n={gl:this.scene.glplot.gl,position:E.position,color:E.lineColor,lineWidth:E.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:r.opacity,connectGaps:r.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(n):(this.linePlot=a(n),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var I=r.opacity;if(r.marker&&void 0!==r.marker.opacity&&(I*=r.marker.opacity),i={gl:this.scene.glplot.gl,position:E.position,color:E.scatterColor,size:E.scatterSize,glyph:E.scatterMarker,opacity:I,orthographic:!0,lineWidth:E.scatterLineWidth,lineColor:E.scatterLineColor,project:E.project,projectScale:E.projectScale,projectOpacity:E.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=o(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),x={gl:this.scene.glplot.gl,position:E.position,glyph:E.text,color:E.textColor,size:E.textSize,angle:E.textAngle,alignment:E.textOffset,font:E.textFontFamily,fontWeight:E.textFontWeight,fontStyle:E.textFontStyle,fontVariant:E.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:r.opacity},this.textLabels=r.hovertext||r.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(x):(this.textMarkers=o(x),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),y={gl:this.scene.glplot.gl,position:E.position,color:E.errorColor,error:E.errorBounds,lineWidth:E.errorLineWidth,capSize:E.errorCapSize,opacity:r.opacity},this.errorBars?E.errorBounds?this.errorBars.update(y):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):E.errorBounds&&(this.errorBars=s(y),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),E.delaunayAxis>=0){var L=function(r,n,i){var a,o=(i+1)%3,s=(i+2)%3,l=[],u=[];for(a=0;a<r.length;++a){var f=r[a];!isNaN(f[o])&&isFinite(f[o])&&!isNaN(f[s])&&isFinite(f[s])&&(l.push([f[o],f[s]]),u.push(a))}var h=c(l);for(a=0;a<h.length;++a)for(var p=h[a],d=0;d<p.length;++d)p[d]=u[p[d]];return{positions:r,cells:h,meshColor:n}}(E.position,E.delaunayColor,E.delaunayAxis);L.opacity=r.opacity,this.delaunayMesh?this.delaunayMesh.update(L):(L.gl=b,this.delaunayMesh=l(L),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},r.exports=function(r,n){var i=new x(r,n.uid);return i.update(n),i}},83484:function(r,n,i){var a=i(24040),o=i(3400),s=i(43028),l=i(74428),c=i(66828),u=i(124),f=i(91592);r.exports=function(r,n,i,h){function p(i,a){return o.coerce(r,n,f,i,a)}if(d=0,y=p("x"),g=p("y"),v=p("z"),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],h),y&&g&&v&&(d=Math.min(y.length,g.length,v.length),n._length=n._xlength=n._ylength=n._zlength=d),d){p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),p("zhoverformat"),p("mode"),s.hasMarkers(n)&&l(r,n,i,h,p,{noSelect:!0,noAngle:!0}),s.hasLines(n)&&(p("connectgaps"),c(r,n,i,h,p)),s.hasText(n)&&(p("texttemplate"),u(r,n,h,p,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var d,y,g,v,m=(n.line||{}).color,x=(n.marker||{}).color;p("surfaceaxis")>=0&&p("surfacecolor",m||x);for(var b=["x","y","z"],_=0;_<3;++_){var w="projection."+b[_];p(w+".show")&&(p(w+".opacity"),p(w+".scale"))}var T=a.getComponentMethod("errorbars","supplyDefaults");T(r,n,m||x||i,{axis:"z"}),T(r,n,m||x||i,{axis:"y",inherit:"z"}),T(r,n,m||x||i,{axis:"x",inherit:"z"})}else n.visible=!1}},3296:function(r,n,i){r.exports={plot:i(41064),attributes:i(91592),markerSymbols:i(87792),supplyDefaults:i(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:i(41484),moduleType:"trace",name:"scatter3d",basePlotModule:i(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(r,n,i){var a=i(98304),o=i(52904),s=i(45464),l=i(21776).Ks,c=i(21776).Gw,u=i(49084),f=i(92880).extendFlat,h=o.marker,p=o.line,d=h.line;r.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:f({},o.mode,{dflt:"markers"}),text:f({},o.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","text"]}),hovertext:f({},o.hovertext,{}),line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:f({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:o.connectgaps,fill:f({},o.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a(),marker:f({symbol:h.symbol,opacity:h.opacity,maxdisplayed:h.maxdisplayed,angle:h.angle,angleref:h.angleref,standoff:h.standoff,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,line:f({width:d.width,editType:"calc"},u("marker.line")),gradient:h.gradient,editType:"calc"},u("marker")),textfont:o.textfont,textposition:o.textposition,selected:o.selected,unselected:o.unselected,hoverinfo:f({},s.hoverinfo,{flags:["a","b","text","name"]}),hoveron:o.hoveron,hovertemplate:l(),zorder:o.zorder}},48228:function(r,n,i){var a=i(38248),o=i(90136),s=i(20148),l=i(4500),c=i(16356).calcMarkerSize,u=i(50948);r.exports=function(r,n){var i=n._carpetTrace=u(r,n);if(i&&i.visible&&"legendonly"!==i.visible){n.xaxis=i.xaxis,n.yaxis=i.yaxis;var f,h,p,d=n._length,y=Array(d),g=!1;for(f=0;f<d;f++)if(h=n.a[f],p=n.b[f],a(h)&&a(p)){var v=i.ab2xy(+h,+p,!0),m=i.isVisible(+h,+p);m||(g=!0),y[f]={x:v[0],y:v[1],a:h,b:p,vis:m}}else y[f]={x:!1,y:!1};return n._needsCull=g,y[0].carpet=i,y[0].trace=n,c(n,d),o(r,n),s(y,n),l(y,n),y}}},6176:function(r,n,i){var a=i(3400),o=i(88200),s=i(43028),l=i(74428),c=i(66828),u=i(11731),f=i(124),h=i(70840),p=i(90372);r.exports=function(r,n,i,d){function y(i,o){return a.coerce(r,n,p,i,o)}y("carpet"),n.xaxis="x",n.yaxis="y";var g=y("a"),v=y("b"),m=Math.min(g.length,v.length);if(m){n._length=m,y("text"),y("texttemplate"),y("hovertext"),y("mode",m<o.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(n)&&l(r,n,i,d,y,{gradient:!0}),s.hasLines(n)&&(c(r,n,i,d,y,{backoff:!0}),u(r,n,y),y("connectgaps")),s.hasText(n)&&f(r,n,d,y);var x=[];(s.hasMarkers(n)||s.hasText(n))&&(y("marker.maxdisplayed"),x.push("points")),y("fill"),"none"!==n.fill&&(h(r,n,i,y),s.hasLines(n)||u(r,n,y)),"tonext"!==n.fill&&"toself"!==n.fill||x.push("fills"),"fills"!==y("hoveron",x.join("+")||"points")&&y("hovertemplate"),y("zorder"),a.coerceSelectionMarkerOpacity(n,y)}else n.visible=!1}},89307:function(r){r.exports=function(r,n,i,a,o){var s=a[o];return r.a=s.a,r.b=s.b,r.y=s.y,r}},52364:function(r){r.exports=function(r,n){var i={},a=n._carpet,o=a.ab2ij([r.a,r.b]),s=Math.floor(o[0]),l=o[0]-s,c=Math.floor(o[1]),u=o[1]-c,f=a.evalxy([],s,c,l,u);return i.yLabel=f[1].toFixed(3),i}},58960:function(r,n,i){var a=i(98723),o=i(3400).fillText;r.exports=function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var c=l[0];if(void 0===c.index){var u=1-c.y0/r.ya._length,f=r.xa._length,h=f*u/2,p=f-h;return c.x0=Math.max(Math.min(c.x0,p),h),c.x1=Math.max(Math.min(c.x1,p),h),l}var d=c.cd[c.index];c.a=d.a,c.b=d.b,c.xLabelVal=void 0,c.yLabelVal=void 0;var y=c.trace,g=y._carpet,v=y._module.formatLabels(d,y);c.yLabel=v.yLabel,delete c.text;var m=[];if(!y.hovertemplate){var x=(d.hi||y.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","text"]),-1!==x.indexOf("a")&&b(g.aaxis,d.a),-1!==x.indexOf("b")&&b(g.baxis,d.b),m.push("y: "+c.yLabel),-1!==x.indexOf("text")&&o(d,y,m),c.extraText=m.join("<br>")}return l}function b(r,n){var i;i=r.labelprefix&&r.labelprefix.length>0?r.labelprefix.replace(/ = $/,""):r._hovertitle,m.push(i+": "+n.toFixed(3)+r.labelsuffix)}}},4184:function(r,n,i){r.exports={attributes:i(90372),supplyDefaults:i(6176),colorbar:i(5528),formatLabels:i(52364),calc:i(48228),plot:i(20036),style:i(49224).style,styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(58960),selectPoints:i(91560),eventData:i(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:i(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(r,n,i){var a=i(96504),o=i(54460),s=i(43616);r.exports=function(r,n,i,l){var c,u,f,h=i[0][0].carpet,p=o.getFromId(r,h.xaxis||"x"),d=o.getFromId(r,h.yaxis||"y"),y={xaxis:p,yaxis:d,plot:n.plot};for(c=0;c<i.length;c++)(u=i[c][0].trace)._xA=p,u._yA=d;for(a(r,y,i,l),c=0;c<i.length;c++)u=i[c][0].trace,f=l.selectAll("g.trace"+u.uid+" .js-line"),s.setClipUrl(f,i[c][0].carpet._clipPathId,r)}},6096:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(98304),l=i(52904),c=i(45464),u=i(49084),f=i(98192).u,h=i(92880).extendFlat,p=i(67824).overrideAll,d=l.marker,y=l.line,g=d.line;r.exports=p({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:h({},l.mode,{dflt:"markers"}),text:h({},l.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:h({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:y.color,width:y.width,dash:f},connectgaps:l.connectgaps,marker:h({symbol:d.symbol,opacity:d.opacity,angle:d.angle,angleref:h({},d.angleref,{values:["previous","up","north"]}),standoff:d.standoff,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,colorbar:d.colorbar,line:h({width:g.width},u("marker.line")),gradient:d.gradient},u("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:s(),selected:l.selected,unselected:l.unselected,hoverinfo:h({},c.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:a()},"calc","nested")},25212:function(r,n,i){var a=i(38248),o=i(39032).BADNUM,s=i(90136),l=i(20148),c=i(4500),u=i(3400).isArrayOrTypedArray,f=i(3400)._;function h(r){return r&&"string"==typeof r}r.exports=function(r,n){var i,p=u(n.locations),d=p?n.locations.length:n._length,y=Array(d);i=n.geojson?function(r){return h(r)||a(r)}:h;for(var g=0;g<d;g++){var v=y[g]={};if(p){var m=n.locations[g];v.loc=i(m)?m:null}else{var x=n.lon[g],b=n.lat[g];a(x)&&a(b)?v.lonlat=[+x,+b]:v.lonlat=[o,o]}}return l(y,n),s(r,n),c(y,n),d&&(y[0].t={labels:{lat:f(r,"lat:")+" ",lon:f(r,"lon:")+" "}}),y}},86188:function(r,n,i){var a=i(3400),o=i(43028),s=i(74428),l=i(66828),c=i(124),u=i(70840),f=i(6096);r.exports=function(r,n,i,h){function p(i,o){return a.coerce(r,n,f,i,o)}var d,y=p("locations");if(y&&y.length){var g,v=p("geojson");("string"==typeof v&&""!==v||a.isPlainObject(v))&&(g="geojson-id"),"geojson-id"===p("locationmode",g)&&p("featureidkey"),d=y.length}else{var m=p("lon")||[],x=p("lat")||[];d=Math.min(m.length,x.length)}d?(n._length=d,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),o.hasMarkers(n)&&s(r,n,i,h,p,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,h,p),p("connectgaps")),o.hasText(n)&&(p("texttemplate"),c(r,n,h,p)),p("fill"),"none"!==n.fill&&u(r,n,i,p),a.coerceSelectionMarkerOpacity(n,p)):n.visible=!1}},58544:function(r){r.exports=function(r,n,i,a,o){r.lon=n.lon,r.lat=n.lat,r.location=n.loc?n.loc:null;var s=a[o];return s.fIn&&s.fIn.properties&&(r.properties=s.fIn.properties),r}},56696:function(r,n,i){var a=i(54460);r.exports=function(r,n,i){var o={},s=i[n.geo]._subplot.mockAxis,l=r.lonlat;return o.lonLabel=a.tickText(s,s.c2l(l[0]),!0).text,o.latLabel=a.tickText(s,s.c2l(l[1]),!0).text,o}},64292:function(r,n,i){var a=i(93024),o=i(39032).BADNUM,s=i(44928),l=i(3400).fillText,c=i(6096);r.exports=function(r,n,i){var u=r.cd,f=u[0].trace,h=r.xa,p=r.ya,d=r.subplot,y=d.projection.isLonLatOverEdges,g=d.project;if(a.getClosest(u,function(r){var a=r.lonlat;if(a[0]===o||y(a))return 1/0;var s=g(a),l=g([n,i]),c=Math.abs(s[0]-l[0]),u=Math.abs(s[1]-l[1]),f=Math.max(3,r.mrc||0);return Math.max(Math.sqrt(c*c+u*u)-f,1-3/f)},r),!1!==r.index){var v=u[r.index],m=v.lonlat,x=[h.c2p(m),p.c2p(m)],b=v.mrc||1;r.x0=x[0]-b,r.x1=x[0]+b,r.y0=x[1]-b,r.y1=x[1]+b,r.loc=v.loc,r.lon=m[0],r.lat=m[1];var _={};_[f.geo]={_subplot:d};var w=f._module.formatLabels(v,f,_);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=s(f,v),r.extraText=function(r,n,i,a){if(!r.hovertemplate){var o=n.hi||r.hoverinfo,s="all"===o?c.hoverinfo.flags:o.split("+"),u=-1!==s.indexOf("location")&&Array.isArray(r.locations),f=-1!==s.indexOf("lon"),h=-1!==s.indexOf("lat"),p=-1!==s.indexOf("text"),d=[];return u?d.push(n.loc):f&&h?d.push("("+i.latLabel+"°, "+i.lonLabel+"°)"):f?d.push(a.lon+(i.lonLabel+"°")):h&&d.push(a.lat+(i.latLabel+"°")),p&&l(n,r,d),d.join("<br>")}}(f,v,r,u[0].t.labels),r.hovertemplate=f.hovertemplate,[r]}}},36952:function(r,n,i){r.exports={attributes:i(6096),supplyDefaults:i(86188),colorbar:i(5528),formatLabels:i(56696),calc:i(25212),calcGeoJSON:i(48691).calcGeoJSON,plot:i(48691).plot,style:i(25064),styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(64292),eventData:i(58544),selectPoints:i(8796),moduleType:"trace",name:"scattergeo",basePlotModule:i(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(r,n,i){var a=i(33428),o=i(3400),s=i(59972).getTopojsonFeatures,l=i(44808),c=i(27144),u=i(19280).findExtremes,f=i(39032).BADNUM,h=i(16356).calcMarkerSize,p=i(43028),d=i(25064);r.exports={calcGeoJSON:function(r,n){var i,a,l=r[0].trace,p=n[l.geo],d=p._subplot,y=l._length;if(o.isArrayOrTypedArray(l.locations)){var g=l.locationmode,v="geojson-id"===g?c.extractTraceFeature(r):s(l,d.topojson);for(i=0;i<y;i++){a=r[i];var m="geojson-id"===g?a.fOut:c.locationToFeature(g,a.loc,v);a.lonlat=m?m.properties.ct:[f,f]}}var x,b,_={padded:!0};if("geojson"===p.fitbounds&&"geojson-id"===l.locationmode){var w=c.computeBbox(c.getTraceGeojson(l));x=[w[0],w[2]],b=[w[1],w[3]]}else{for(x=Array(y),b=Array(y),i=0;i<y;i++)a=r[i],x[i]=a.lonlat[0],b[i]=a.lonlat[1];_.ppad=h(l,y)}l._extremes.lon=u(p.lonaxis._ax,x,_),l._extremes.lat=u(p.lataxis._ax,b,_)},plot:function(r,n,i){var s=n.layers.frontplot.select(".scatterlayer"),c=o.makeTraceGroups(s,i,"trace scattergeo");function u(r,n){r.lonlat[0]===f&&a.select(n).remove()}c.selectAll("*").remove(),c.each(function(n){var i=a.select(this),s=n[0].trace;if(p.hasLines(s)||"none"!==s.fill){var c=l.calcTraceToLineCoords(n),f="none"!==s.fill?l.makePolygon(c):l.makeLine(c);i.selectAll("path.js-line").data([{geojson:f,trace:s}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}p.hasMarkers(s)&&i.selectAll("path.point").data(o.identity).enter().append("path").classed("point",!0).each(function(r){u(r,this)}),p.hasText(s)&&i.selectAll("g").data(o.identity).enter().append("g").append("text").each(function(r){u(r,this)}),d(r,n)})}}},8796:function(r,n,i){var a=i(43028),o=i(39032).BADNUM;r.exports=function(r,n){var i,s,l,c,u,f=r.cd,h=r.xaxis,p=r.yaxis,d=[],y=f[0].trace;if(!a.hasMarkers(y)&&!a.hasText(y))return[];if(!1===n)for(u=0;u<f.length;u++)f[u].selected=0;else for(u=0;u<f.length;u++)(s=(i=f[u]).lonlat)[0]!==o&&(l=h.c2p(s),c=p.c2p(s),n.contains([l,c],null,u,r)?(d.push({pointNumber:u,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return d}},25064:function(r,n,i){var a=i(33428),o=i(43616),s=i(76308),l=i(49224),c=l.stylePoints,u=l.styleText;r.exports=function(r,n){var i,l;n&&(i=n[0].trace,(l=n[0].node3).style("opacity",n[0].trace.opacity),c(l,i,r),u(l,i,r),l.selectAll("path.js-line").style("fill","none").each(function(r){var n=a.select(this),i=r.trace,l=i.line||{};n.call(s.stroke,l.color).call(o.dashLine,l.dash||"",l.width||0),"none"!==i.fill&&n.call(s.fill,i.fillcolor)}))}},2876:function(r,n,i){var a=i(45464),o=i(25376),s=i(98304),l=i(52904),c=i(29736).axisHoverFormat,u=i(49084),f=i(95376),h=i(92880).extendFlat,p=i(67824).overrideAll,d=i(67072).DASHES,y=l.line,g=l.marker,v=g.line,m=r.exports=p({x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:l.text,hovertext:l.hovertext,textposition:l.textposition,textfont:o({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:y.color,width:y.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:f(d),dflt:"solid"}},marker:h({},u("marker"),{symbol:g.symbol,angle:g.angle,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:g.opacity,colorbar:g.colorbar,line:h({},u("marker.line"),{width:v.width})}),connectgaps:l.connectgaps,fill:h({},l.fill,{dflt:"none"}),fillcolor:s(),selected:{marker:l.selected.marker,textfont:l.selected.textfont},unselected:{marker:l.unselected.marker,textfont:l.unselected.textfont},opacity:a.opacity},"calc","nested");m.x.editType=m.y.editType=m.x0.editType=m.y0.editType="calc+clearAxisTypes",m.hovertemplate=l.hovertemplate,m.texttemplate=l.texttemplate},64628:function(r,n,i){var a=i(41272);r.exports={moduleType:"trace",name:"scattergl",basePlotModule:i(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:i(2876),supplyDefaults:i(80220),crossTraceDefaults:i(35036),colorbar:i(5528),formatLabels:i(99396),calc:i(24856),hoverPoints:a.hoverPoints,selectPoints:i(73224),meta:{}}},24856:function(r,n,i){var a=i(3108),o=i(3400),s=i(79811),l=i(19280).findExtremes,c=i(1220),u=i(16356),f=u.calcMarkerSize,h=u.calcAxisExpansion,p=u.setFirstScatter,d=i(90136),y=i(84236),g=i(74588),v=i(39032).BADNUM,m=i(67072).TOO_MANY_POINTS;function x(r,n,i){var a=r._extremes[n._id],o=l(n,i._bnds,{padded:!0});a.min=a.min.concat(o.min),a.max=a.max.concat(o.max)}r.exports=function(r,n){var i,l=r._fullLayout,u=n._xA=s.getFromId(r,n.xaxis,"x"),b=n._yA=s.getFromId(r,n.yaxis,"y"),_=l._plots[n.xaxis+n.yaxis],w=n._length,T=w>=m,A=2*w,k={},M=u.makeCalcdata(n,"x"),S=b.makeCalcdata(n,"y"),E=c(n,u,"x",M),I=c(n,b,"y",S),L=E.vals,C=I.vals;n._x=L,n._y=C,n.xperiodalignment&&(n._origX=M,n._xStarts=E.starts,n._xEnds=E.ends),n.yperiodalignment&&(n._origY=S,n._yStarts=I.starts,n._yEnds=I.ends);var O=Array(A),D=Array(w);for(i=0;i<w;i++)O[2*i]=L[i]===v?NaN:L[i],O[2*i+1]=C[i]===v?NaN:C[i],D[i]=i;if("log"===u.type)for(i=0;i<A;i+=2)O[i]=u.c2l(O[i]);if("log"===b.type)for(i=1;i<A;i+=2)O[i]=b.c2l(O[i]);T&&"log"!==u.type&&"log"!==b.type?k.tree=a(O):k.ids=D,d(r,n);var P,B=function(r,n,i,a,s,l){var c=y.style(r,i);if(c.marker&&(c.marker.positions=a),c.line&&a.length>1&&o.extendFlat(c.line,y.linePositions(r,i,a)),c.errorX||c.errorY){var u=y.errorBarPositions(r,i,a,s,l);c.errorX&&o.extendFlat(c.errorX,u.x),c.errorY&&o.extendFlat(c.errorY,u.y)}return c.text&&(o.extendFlat(c.text,{positions:a},y.textPosition(r,i,c.text,c.marker)),o.extendFlat(c.textSel,{positions:a},y.textPosition(r,i,c.text,c.markerSel)),o.extendFlat(c.textUnsel,{positions:a},y.textPosition(r,i,c.text,c.markerUnsel))),c}(r,0,n,O,L,C),R=g(r,_);return p(l,n),T?B.marker&&(P=B.marker.sizeAvg||Math.max(B.marker.size,3)):P=f(n,w),h(r,n,u,b,L,C,P),B.errorX&&x(n,u,B.errorX),B.errorY&&x(n,b,B.errorY),B.fill&&!R.fill2d&&(R.fill2d=!0),B.marker&&!R.scatter2d&&(R.scatter2d=!0),B.line&&!R.line2d&&(R.line2d=!0),(B.errorX||B.errorY)&&!R.error2d&&(R.error2d=!0),B.text&&!R.glText&&(R.glText=!0),B.marker&&(B.marker.snap=w),R.lineOptions.push(B.line),R.errorXOptions.push(B.errorX),R.errorYOptions.push(B.errorY),R.fillOptions.push(B.fill),R.markerOptions.push(B.marker),R.markerSelectedOptions.push(B.markerSel),R.markerUnselectedOptions.push(B.markerUnsel),R.textOptions.push(B.text),R.textSelectedOptions.push(B.textSel),R.textUnselectedOptions.push(B.textUnsel),R.selectBatch.push([]),R.unselectBatch.push([]),k._scene=R,k.index=R.count,k.x=L,k.y=C,k.positions=O,R.count++,[{x:!1,y:!1,t:k,trace:n}]}},67072:function(r){r.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(r,n,i){var a=i(38248),o=i(20472),s=i(72160),l=i(24040),c=i(3400),u=c.isArrayOrTypedArray,f=i(43616),h=i(79811),p=i(33040).formatColor,d=i(43028),y=i(7152),g=i(80088),v=i(67072),m=i(13448).DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},b=i(10624).appendArrayPointValue;function _(r,n){var i,o=r._fullLayout,s=n._length,l=n.textfont,f=n.textposition,h=u(f)?f:[f],p=l.color,d=l.size,y=l.family,g=l.weight,v=l.style,m=l.variant,x={},_=r._context.plotGlPixelRatio,T=n.texttemplate;if(T){x.text=[];var A=o._d3locale,k=Array.isArray(T),M=k?Math.min(T.length,s):s,S=k?function(r){return T[r]}:function(){return T};for(i=0;i<M;i++){var E={i:i},I=n._module.formatLabels(E,n,o),L={};b(L,n,i);var C=n._meta||{};x.text.push(c.texttemplateString(S(i),I,A,L,E,C))}}else u(n.text)&&n.text.length<s?x.text=n.text.slice():x.text=n.text;if(u(x.text))for(i=x.text.length;i<s;i++)x.text[i]="";for(x.opacity=n.opacity,x.font={},x.align=[],x.baseline=[],i=0;i<h.length;i++){var O=h[i].split(/\s+/);switch(O[1]){case"left":x.align.push("right");break;case"right":x.align.push("left");break;default:x.align.push(O[1])}switch(O[0]){case"top":x.baseline.push("bottom");break;case"bottom":x.baseline.push("top");break;default:x.baseline.push(O[0])}}if(u(p))for(x.color=Array(s),i=0;i<s;i++)x.color[i]=p[i];else x.color=p;if(u(d)||Array.isArray(y)||u(g)||Array.isArray(v)||Array.isArray(m))for(x.font=Array(s),i=0;i<s;i++){var D=x.font[i]={};D.size=(c.isTypedArray(d)?d[i]:u(d)?a(d[i])?d[i]:0:d)*_,D.family=Array.isArray(y)?y[i]:y,D.weight=w(u(g)?g[i]:g),D.style=Array.isArray(v)?v[i]:v,D.variant=Array.isArray(m)?m[i]:m}else x.font={size:d*_,family:y,weight:w(g),style:v,variant:m};return x}function w(r){return r<=1e3?r>500?"bold":"normal":r}function T(r,n){var i,a,o=n._length,l=n.marker,c={},f=u(l.symbol),h=u(l.angle),d=u(l.color),v=u(l.line.color),m=u(l.opacity),x=u(l.size),b=u(l.line.width);if(f||(a=g.isOpenSymbol(l.symbol)),f||d||v||m||h){c.symbols=Array(o),c.angles=Array(o),c.colors=Array(o),c.borderColors=Array(o);var _=l.symbol,w=l.angle,T=p(l,l.opacity,o),A=p(l.line,l.opacity,o);if(!u(A[0])){var k=A;for(A=Array(o),i=0;i<o;i++)A[i]=k}if(!u(T[0])){var M=T;for(T=Array(o),i=0;i<o;i++)T[i]=M}if(!u(_)){var S=_;for(_=Array(o),i=0;i<o;i++)_[i]=S}if(!u(w)){var E=w;for(w=Array(o),i=0;i<o;i++)w[i]=E}for(c.symbols=_,c.angles=w,c.colors=T,c.borderColors=A,i=0;i<o;i++)f&&(a=g.isOpenSymbol(l.symbol[i])),a&&(A[i]=T[i].slice(),T[i]=T[i].slice(),T[i][3]=0);for(c.opacity=n.opacity,c.markers=Array(o),i=0;i<o;i++)c.markers[i]=O({mx:c.symbols[i],ma:c.angles[i]},n)}else a?(c.color=s(l.color,"uint8"),c.color[3]=0,c.borderColor=s(l.color,"uint8")):(c.color=s(l.color,"uint8"),c.borderColor=s(l.line.color,"uint8")),c.opacity=n.opacity*l.opacity,c.marker=O({mx:l.symbol,ma:l.angle},n);var I,L=y(n,1);if(x||b){var C,D=c.sizes=Array(o),P=c.borderSizes=Array(o),B=0;if(x){for(i=0;i<o;i++)D[i]=L(l.size[i]),B+=D[i];C=B/o}else for(I=L(l.size),i=0;i<o;i++)D[i]=I;if(b)for(i=0;i<o;i++)P[i]=l.line.width[i];else for(I=l.line.width,i=0;i<o;i++)P[i]=I;c.sizeAvg=C}else c.size=L(l&&l.size||10),c.borderSizes=L(l.line.width);return c}function A(r,n,i){var a=n.marker,o={};return i&&(i.marker&&i.marker.symbol?o=T(0,c.extendFlat({},a,i.marker)):i.marker&&(i.marker.size&&(o.size=i.marker.size),i.marker.color&&(o.colors=i.marker.color),void 0!==i.marker.opacity&&(o.opacity=i.marker.opacity))),o}function k(r,n,i){var a={};if(!i)return a;if(i.textfont){var o={opacity:1,text:n.text,texttemplate:n.texttemplate,textposition:n.textposition,textfont:c.extendFlat({},n.textfont)};i.textfont&&c.extendFlat(o.textfont,i.textfont),a=_(r,o)}return a}function M(r,n,i){var a={capSize:2*n.width*i,lineWidth:n.thickness*i,color:n.color};return n.copy_ystyle&&(a=r.error_y),a}var S=v.SYMBOL_SDF_SIZE,E=v.SYMBOL_SIZE,I=v.SYMBOL_STROKE,L={},C=f.symbolFuncs[0](.05*E);function O(r,n){var i,a=r.mx;if("circle"===a)return null;var s=f.symbolNumber(a),l=f.symbolFuncs[s%100],c=!!f.symbolNoDot[s%100],u=!!f.symbolNoFill[s%100],h=g.isDotSymbol(a);if(r.ma&&(a+="_"+r.ma),L[a])return L[a];var p=f.getMarkerAngle(r,n);return i=o(h&&!c?l(1.1*E,p)+C:l(E,p),{w:S,h:S,viewBox:[-E,-E,E,E],stroke:u?I:-I}),L[a]=i,i||null}r.exports={style:function(r,n){var i,a={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},o=r._context.plotGlPixelRatio;if(!0!==n.visible)return a;if(d.hasText(n)&&(a.text=_(r,n),a.textSel=k(r,n,n.selected),a.textUnsel=k(r,n,n.unselected)),d.hasMarkers(n)&&(a.marker=T(0,n),a.markerSel=A(0,n,n.selected),a.markerUnsel=A(0,n,n.unselected),!n.unselected&&u(n.marker.opacity))){var s=n.marker.opacity;for(a.markerUnsel.opacity=Array(s.length),i=0;i<s.length;i++)a.markerUnsel.opacity[i]=m*s[i]}if(d.hasLines(n)){a.line={overlay:!0,thickness:n.line.width*o,color:n.line.color,opacity:n.opacity};var l=(v.DASHES[n.line.dash]||[1]).slice();for(i=0;i<l.length;++i)l[i]*=n.line.width*o;a.line.dashes=l}return n.error_x&&n.error_x.visible&&(a.errorX=M(n,n.error_x,o)),n.error_y&&n.error_y.visible&&(a.errorY=M(n,n.error_y,o)),n.fill&&"none"!==n.fill&&(a.fill={closed:!0,fill:n.fillcolor,thickness:0}),a},markerStyle:T,markerSelection:A,linePositions:function(r,n,i){var a,o,s=i.length,l=s/2;if(d.hasLines(n)&&l){if("hv"===n.line.shape){for(a=[],o=0;o<l-1;o++)isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN,NaN,NaN):(a.push(i[2*o],i[2*o+1]),isNaN(i[2*o+2])||isNaN(i[2*o+3])?a.push(NaN,NaN):a.push(i[2*o+2],i[2*o+1]));a.push(i[s-2],i[s-1])}else if("hvh"===n.line.shape){for(a=[],o=0;o<l-1;o++)if(isNaN(i[2*o])||isNaN(i[2*o+1])||isNaN(i[2*o+2])||isNaN(i[2*o+3]))isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+1]),a.push(NaN,NaN);else{var c=(i[2*o]+i[2*o+2])/2;a.push(i[2*o],i[2*o+1],c,i[2*o+1],c,i[2*o+3])}a.push(i[s-2],i[s-1])}else if("vhv"===n.line.shape){for(a=[],o=0;o<l-1;o++)if(isNaN(i[2*o])||isNaN(i[2*o+1])||isNaN(i[2*o+2])||isNaN(i[2*o+3]))isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+1]),a.push(NaN,NaN);else{var u=(i[2*o+1]+i[2*o+3])/2;a.push(i[2*o],i[2*o+1],i[2*o],u,i[2*o+2],u)}a.push(i[s-2],i[s-1])}else if("vh"===n.line.shape){for(a=[],o=0;o<l-1;o++)isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN,NaN,NaN):(a.push(i[2*o],i[2*o+1]),isNaN(i[2*o+2])||isNaN(i[2*o+3])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+3]));a.push(i[s-2],i[s-1])}else a=i}var f=!1;for(o=0;o<a.length;o++)if(isNaN(a[o])){f=!0;break}var h=f||a.length>v.TOO_MANY_POINTS||d.hasMarkers(n)?"rect":"round";if(f&&n.connectgaps){var p=a[0],y=a[1];for(o=0;o<a.length;o+=2)isNaN(a[o])||isNaN(a[o+1])?(a[o]=p,a[o+1]=y):(p=a[o],y=a[o+1])}return{join:h,positions:a}},errorBarPositions:function(r,n,i,o,s){var c=l.getComponentMethod("errorbars","makeComputeError"),u=h.getFromId(r,n.xaxis,"x"),f=h.getFromId(r,n.yaxis,"y"),p=i.length/2,d={};function y(r,o){var s=o._id.charAt(0),l=n["error_"+s];if(l&&l.visible&&("linear"===o.type||"log"===o.type)){for(var u=c(l),f={x:0,y:1}[s],h={x:[0,1,2,3],y:[2,3,0,1]}[s],y=new Float64Array(4*p),g=1/0,v=-1/0,m=0,x=0;m<p;m++,x+=4){var b=r[m];if(a(b)){var _=i[2*m+f],w=u(b,m),T=w[0],A=w[1];if(a(T)&&a(A)){var k=b-T,M=b+A;y[x+h[0]]=_-o.c2l(k),y[x+h[1]]=o.c2l(M)-_,y[x+h[2]]=0,y[x+h[3]]=0,g=Math.min(g,b-T),v=Math.max(v,b+A)}}}d[s]={positions:i,errors:y,_bnds:[g,v]}}}return y(o,u),y(s,f),d},textPosition:function(r,n,i,a){var o,s=n._length,l={};if(d.hasMarkers(n)){var c=i.font,f=i.align,h=i.baseline;for(l.offset=Array(s),o=0;o<s;o++){var p=a.sizes?a.sizes[o]:a.size,y=u(c)?c[o].size:c.size,g=u(f)?f.length>1?f[o]:f[0]:f,v=u(h)?h.length>1?h[o]:h[0]:h,m=x[g],b=x[v],_=p?p/.8+1:0,w=-b*_-.5*b;l.offset[o]=[m*_/y,w/y]}}return l}}},80220:function(r,n,i){var a=i(3400),o=i(24040),s=i(80088),l=i(2876),c=i(88200),u=i(43028),f=i(43980),h=i(31147),p=i(74428),d=i(66828),y=i(70840),g=i(124);r.exports=function(r,n,i,v){function m(i,o){return a.coerce(r,n,l,i,o)}var x=!!r.marker&&s.isOpenSymbol(r.marker.symbol),b=u.isBubble(r),_=f(r,n,v,m);if(_){h(r,n,v,m),m("xhoverformat"),m("yhoverformat");var w=_<c.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",w),u.hasMarkers(n)&&(p(r,n,i,v,m,{noAngleRef:!0,noStandOff:!0}),m("marker.line.width",x||b?1:0)),u.hasLines(n)&&(m("connectgaps"),d(r,n,i,v,m),m("line.shape")),u.hasText(n)&&(m("texttemplate"),g(r,n,v,m,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var T=(n.line||{}).color,A=(n.marker||{}).color;m("fill"),"none"!==n.fill&&y(r,n,i,m);var k=o.getComponentMethod("errorbars","supplyDefaults");k(r,n,T||A||i,{axis:"y"}),k(r,n,T||A||i,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(n,m)}else n.visible=!1}},26768:function(r,n,i){var a=i(3400),o=i(76308),s=i(13448).DESELECTDIM;r.exports={styleTextSelection:function(r){var n,i,l=r[0],c=l.trace,u=l.t,f=u._scene,h=u.index,p=f.selectBatch[h],d=f.unselectBatch[h],y=f.textOptions[h],g=f.textSelectedOptions[h]||{},v=f.textUnselectedOptions[h]||{},m=a.extendFlat({},y);if(p.length||d.length){var x=g.color,b=v.color,_=y.color,w=a.isArrayOrTypedArray(_);for(m.color=Array(c._length),n=0;n<p.length;n++)i=p[n],m.color[i]=x||(w?_[i]:_);for(n=0;n<d.length;n++){i=d[n];var T=w?_[i]:_;m.color[i]=b||(x?T:o.addOpacity(T,s))}}f.glText[h].update(m)}}},99396:function(r,n,i){var a=i(76688);r.exports=function(r,n,i){var o=r.i;return"x"in r||(r.x=n._x[o]),"y"in r||(r.y=n._y[o]),a(r,n,i)}},80088:function(r,n,i){var a=i(67072);n.isOpenSymbol=function(r){return"string"==typeof r?a.OPEN_RE.test(r):r%200>100},n.isDotSymbol=function(r){return"string"==typeof r?a.DOT_RE.test(r):r>200}},41272:function(r,n,i){var a=i(24040),o=i(3400),s=i(44928);function l(r,n,i,l){var c=r.xa,u=r.ya,f=r.distance,h=r.dxy,p=r.index,d={pointNumber:p,x:n[p],y:i[p]};d.tx=o.isArrayOrTypedArray(l.text)?l.text[p]:l.text,d.htx=Array.isArray(l.hovertext)?l.hovertext[p]:l.hovertext,d.data=Array.isArray(l.customdata)?l.customdata[p]:l.customdata,d.tp=Array.isArray(l.textposition)?l.textposition[p]:l.textposition;var y=l.textfont;y&&(d.ts=o.isArrayOrTypedArray(y.size)?y.size[p]:y.size,d.tc=o.isArrayOrTypedArray(y.color)?y.color[p]:y.color,d.tf=Array.isArray(y.family)?y.family[p]:y.family,d.tw=Array.isArray(y.weight)?y.weight[p]:y.weight,d.ty=Array.isArray(y.style)?y.style[p]:y.style,d.tv=Array.isArray(y.variant)?y.variant[p]:y.variant);var g=l.marker;g&&(d.ms=o.isArrayOrTypedArray(g.size)?g.size[p]:g.size,d.mo=o.isArrayOrTypedArray(g.opacity)?g.opacity[p]:g.opacity,d.mx=o.isArrayOrTypedArray(g.symbol)?g.symbol[p]:g.symbol,d.ma=o.isArrayOrTypedArray(g.angle)?g.angle[p]:g.angle,d.mc=o.isArrayOrTypedArray(g.color)?g.color[p]:g.color);var v=g&&g.line;v&&(d.mlc=Array.isArray(v.color)?v.color[p]:v.color,d.mlw=o.isArrayOrTypedArray(v.width)?v.width[p]:v.width);var m=g&&g.gradient;m&&"none"!==m.type&&(d.mgt=Array.isArray(m.type)?m.type[p]:m.type,d.mgc=Array.isArray(m.color)?m.color[p]:m.color);var x=c.c2p(d.x,!0),b=u.c2p(d.y,!0),_=d.mrc||1,w=l.hoverlabel;w&&(d.hbg=Array.isArray(w.bgcolor)?w.bgcolor[p]:w.bgcolor,d.hbc=Array.isArray(w.bordercolor)?w.bordercolor[p]:w.bordercolor,d.hts=o.isArrayOrTypedArray(w.font.size)?w.font.size[p]:w.font.size,d.htc=Array.isArray(w.font.color)?w.font.color[p]:w.font.color,d.htf=Array.isArray(w.font.family)?w.font.family[p]:w.font.family,d.hnl=o.isArrayOrTypedArray(w.namelength)?w.namelength[p]:w.namelength);var T=l.hoverinfo;T&&(d.hi=Array.isArray(T)?T[p]:T);var A=l.hovertemplate;A&&(d.ht=Array.isArray(A)?A[p]:A);var k={};k[r.index]=d;var M=l._origX,S=l._origY,E=o.extendFlat({},r,{color:s(l,d),x0:x-_,x1:x+_,xLabelVal:M?M[p]:d.x,y0:b-_,y1:b+_,yLabelVal:S?S[p]:d.y,cd:k,distance:f,spikeDistance:h,hovertemplate:d.ht});return d.htx?E.text=d.htx:d.tx?E.text=d.tx:l.text&&(E.text=l.text),o.fillText(d,l,E),a.getComponentMethod("errorbars","hoverInfo")(d,l,E),E}r.exports={hoverPoints:function(r,n,i,a){var o,s,c,u,f,h,p,d,y,g,v=r.cd,m=v[0].t,x=v[0].trace,b=r.xa,_=r.ya,w=m.x,T=m.y,A=b.c2p(n),k=_.c2p(i),M=r.distance;if(m.tree){var S=b.p2c(A-M),E=b.p2c(A+M),I=_.p2c(k-M),L=_.p2c(k+M);o="x"===a?m.tree.range(Math.min(S,E),Math.min(_._rl[0],_._rl[1]),Math.max(S,E),Math.max(_._rl[0],_._rl[1])):m.tree.range(Math.min(S,E),Math.min(I,L),Math.max(S,E),Math.max(I,L))}else o=m.ids;var C=M;if("x"===a){var O=!!x.xperiodalignment,D=!!x.yperiodalignment;for(h=0;h<o.length;h++){if(u=w[s=o[h]],p=Math.abs(b.c2p(u)-A),O){var P=b.c2p(x._xStarts[s]),B=b.c2p(x._xEnds[s]);p=A>=Math.min(P,B)&&A<=Math.max(P,B)?0:1/0}if(p<C){if(C=p,f=T[s],d=_.c2p(f)-k,D){var R=_.c2p(x._yStarts[s]),z=_.c2p(x._yEnds[s]);d=k>=Math.min(R,z)&&k<=Math.max(R,z)?0:1/0}g=Math.sqrt(p*p+d*d),c=o[h]}}}else for(h=o.length-1;h>-1;h--)u=w[s=o[h]],f=T[s],(y=Math.sqrt((p=b.c2p(u)-A)*p+(d=_.c2p(f)-k)*d))<C&&(C=g=y,c=s);return r.index=c,r.distance=C,r.dxy=g,void 0===c?[r]:[l(r,w,T,x)]},calcHover:l}},38983:function(r,n,i){var a=i(64628);a.plot=i(89876),r.exports=a},89876:function(r,n,i){var a=i(38540),o=i(13472),s=i(24544),l=i(23352),c=i(3400),u=i(72760).selectMode,f=i(5048),h=i(43028),p=i(14328),d=i(26768).styleTextSelection,y={};(r.exports=function(r,n,i){if(i.length){var g,v,m=r._fullLayout,x=n._scene,b=n.xaxis,_=n.yaxis;if(x){if(f(r,["ANGLE_instanced_arrays","OES_element_index_uint"],y)){var w,T,A,k,M,S,E,I,L,C,O=x.count,D=m._glcanvas.data()[0].regl;if(p(r,n,i),x.dirty){if(!x.line2d&&!x.error2d||x.scatter2d||x.fill2d||x.glText||D.clear({}),!0===x.error2d&&(x.error2d=s(D)),!0===x.line2d&&(x.line2d=o(D)),!0===x.scatter2d&&(x.scatter2d=a(D)),!0===x.fill2d&&(x.fill2d=o(D)),!0===x.glText)for(x.glText=Array(O),g=0;g<O;g++)x.glText[g]=new l(D);if(x.glText){if(O>x.glText.length){var P=O-x.glText.length;for(g=0;g<P;g++)x.glText.push(new l(D))}else if(O<x.glText.length){var B=x.glText.length-O;x.glText.splice(O,B).forEach(function(r){r.destroy()})}for(g=0;g<O;g++)x.glText[g].update(x.textOptions[g])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(r){if(r&&r.positions){for(var n=r.positions,i=0;i<n.length&&(isNaN(n[i])||isNaN(n[i+1]));)i+=2;for(var a=n.length-2;a>i&&(isNaN(n[a])||isNaN(n[a+1]));)a-=2;r.positions=n.slice(i,a+2)}return r}),x.line2d.update(x.lineOptions)),x.error2d){var R=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(R)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=c.repeat(null,O),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(r,n){var a=i[n];if(r&&a&&a[0]&&a[0].trace){var o,s,l=a[0],c=l.trace,u=l.t,f=x.lineOptions[n],h=[];c._ownfill&&h.push(n),c._nexttrace&&h.push(n+1),h.length&&(x.fillOrder[n]=h);var p,d,y=[],g=f&&f.positions||u.positions;if("tozeroy"===c.fill){for(p=0;p<g.length&&isNaN(g[p+1]);)p+=2;for(d=g.length-2;d>p&&isNaN(g[d+1]);)d-=2;0!==g[p+1]&&(y=[g[p],0]),y=y.concat(g.slice(p,d+2)),0!==g[d+1]&&(y=y.concat([g[d],0]))}else if("tozerox"===c.fill){for(p=0;p<g.length&&isNaN(g[p]);)p+=2;for(d=g.length-2;d>p&&isNaN(g[d]);)d-=2;0!==g[p]&&(y=[0,g[p+1]]),y=y.concat(g.slice(p,d+2)),0!==g[d]&&(y=y.concat([0,g[d+1]]))}else if("toself"===c.fill||"tonext"===c.fill){for(y=[],o=0,r.splitNull=!0,s=0;s<g.length;s+=2)(isNaN(g[s])||isNaN(g[s+1]))&&((y=y.concat(g.slice(o,s))).push(g[o],g[o+1]),y.push(null,null),o=s+2);y=y.concat(g.slice(o)),o&&y.push(g[o],g[o+1])}else{var v=c._nexttrace;if(v){var m=x.lineOptions[n+1];if(m){var b=m.positions;if("tonexty"===c.fill){for(y=g.slice(),n=Math.floor(b.length/2);n--;){var _=b[2*n],w=b[2*n+1];isNaN(_)||isNaN(w)||y.push(_,w)}r.fill=v.fillcolor}}}}if(c._prevtrace&&"tonext"===c._prevtrace.fill){var T=x.lineOptions[n-1].positions,A=y.length/2,k=[o=A];for(s=0;s<T.length;s+=2)(isNaN(T[s])||isNaN(T[s+1]))&&(k.push(s/2+A+1),o=s+2);y=y.concat(T),r.hole=k}return r.fillmode=c.fill,r.opacity=c.opacity,r.positions=y,r}}),x.fill2d.update(x.fillOptions))}var z=u(m.dragmode),F=m.clickmode.indexOf("select")>-1;for(g=0;g<O;g++){var N=i[g][0],U=N.trace,j=N.t,V=j.index,H=U._length,q=j.x,G=j.y;if(U.selectedpoints||z||F){if(z||(z=!0),U.selectedpoints){var W=x.selectBatch[V]=c.selIndices2selPoints(U),Y={};for(v=0;v<W.length;v++)Y[W[v]]=1;var Z=[];for(v=0;v<H;v++)Y[v]||Z.push(v);x.unselectBatch[V]=Z}var X=j.xpx=Array(H),K=j.ypx=Array(H);for(v=0;v<H;v++)X[v]=b.c2p(q[v]),K[v]=_.c2p(G[v])}else j.xpx=j.ypx=null}if(z){if(x.select2d||(x.select2d=a(m._glcanvas.data()[1].regl)),x.scatter2d){var J=Array(O);for(g=0;g<O;g++)J[g]=x.selectBatch[g].length||x.unselectBatch[g].length?x.markerUnselectedOptions[g]:{};x.scatter2d.update(J)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&i.forEach(function(r){var n=((r||[])[0]||{}).trace||{};h.hasText(n)&&d(r)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var $={viewport:(w=r._context.plotGlPixelRatio,T=m._size,A=m.width*w,k=m.height*w,M=T.l*w,S=T.b*w,E=T.r*w,I=T.t*w,L=T.w*w,C=T.h*w,[M+b.domain[0]*L,S+_.domain[0]*C,A-E-(1-b.domain[1])*L,k-I-(1-_.domain[1])*C]),range:[(b._rl||b.range)[0],(_._rl||_.range)[0],(b._rl||b.range)[1],(_._rl||_.range)[1]]},Q=c.repeat($,x.count);x.fill2d&&x.fill2d.update(Q),x.line2d&&x.line2d.update(Q),x.error2d&&x.error2d.update(Q.concat(Q)),x.scatter2d&&x.scatter2d.update(Q),x.select2d&&x.select2d.update(Q),x.glText&&x.glText.forEach(function(r){r.update($)})}else x.init()}}}).reglPrecompiled=y},74588:function(r,n,i){var a=i(3400);r.exports=function(r,n){var i=n._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},s={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return n._scene||((i=n._scene={}).init=function(){a.extendFlat(i,s,o)},i.init(),i.update=function(r){var n=a.repeat(r,i.count);if(i.fill2d&&i.fill2d.update(n),i.scatter2d&&i.scatter2d.update(n),i.line2d&&i.line2d.update(n),i.error2d&&i.error2d.update(n.concat(n)),i.select2d&&i.select2d.update(n),i.glText)for(var o=0;o<i.count;o++)i.glText[o].update(r)},i.draw=function(){for(var r=i.count,n=i.fill2d,o=i.error2d,s=i.line2d,l=i.scatter2d,c=i.glText,u=i.select2d,f=i.selectBatch,h=i.unselectBatch,p=0;p<r;p++){if(n&&i.fillOrder[p]&&n.draw(i.fillOrder[p]),s&&i.lineOptions[p]&&s.draw(p),o&&(i.errorXOptions[p]&&o.draw(p),i.errorYOptions[p]&&o.draw(p+r)),l&&i.markerOptions[p]){if(h[p].length){var d=a.repeat([],i.count);d[p]=h[p],l.draw(d)}else f[p].length||l.draw(p)}c[p]&&i.textOptions[p]&&c[p].render()}u&&u.draw(f),i.dirty=!1},i.destroy=function(){i.fill2d&&i.fill2d.destroy&&i.fill2d.destroy(),i.scatter2d&&i.scatter2d.destroy&&i.scatter2d.destroy(),i.error2d&&i.error2d.destroy&&i.error2d.destroy(),i.line2d&&i.line2d.destroy&&i.line2d.destroy(),i.select2d&&i.select2d.destroy&&i.select2d.destroy(),i.glText&&i.glText.forEach(function(r){r.destroy&&r.destroy()}),i.lineOptions=null,i.fillOptions=null,i.markerOptions=null,i.markerSelectedOptions=null,i.markerUnselectedOptions=null,i.errorXOptions=null,i.errorYOptions=null,i.textOptions=null,i.textSelectedOptions=null,i.textUnselectedOptions=null,i.selectBatch=null,i.unselectBatch=null,n._scene=null}),i.dirty||a.extendFlat(i,o),i}},73224:function(r,n,i){var a=i(43028),o=i(26768).styleTextSelection;r.exports=function(r,n){var i=r.cd,s=r.xaxis,l=r.yaxis,c=[],u=i[0].trace,f=i[0].t,h=u._length,p=f.x,d=f.y,y=f._scene,g=f.index;if(!y)return c;var v=a.hasText(u),m=a.hasMarkers(u);if(!0!==u.visible||!m&&!v)return c;var x=[],b=[];if(!1!==n&&!n.degenerate)for(var _=0;_<h;_++)n.contains([f.xpx[_],f.ypx[_]],!1,_,r)?(x.push(_),c.push({pointNumber:_,x:s.c2d(p[_]),y:l.c2d(d[_])})):b.push(_);if(m){var w=y.scatter2d;if(x.length||b.length){if(!y.selectBatch[g].length&&!y.unselectBatch[g].length){var T=Array(y.count);T[g]=y.markerUnselectedOptions[g],w.update.apply(w,T)}}else{var A=Array(y.count);A[g]=y.markerOptions[g],w.update.apply(w,A)}}return y.selectBatch[g]=x,y.unselectBatch[g]=b,v&&o(i),c}},31512:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(98304),l=i(6096),c=i(52904),u=i(5232),f=i(45464),h=i(49084),p=i(92880).extendFlat,d=i(67824).overrideAll,y=i(5232),g=l.line,v=l.marker;r.exports=d({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:p({},y.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:p({},v.opacity,{dflt:1})},mode:p({},c.mode,{dflt:"markers"}),text:p({},c.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:p({},c.hovertext,{}),line:{color:g.color,width:g.width},connectgaps:c.connectgaps,marker:p({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:v.opacity,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode},h("marker")),fill:l.fill,fillcolor:s(),textfont:u.layers.symbol.textfont,textposition:u.layers.symbol.textposition,below:{valType:"string"},selected:{marker:c.selected.marker},unselected:{marker:c.unselected.marker},hoverinfo:p({},f.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:a()},"calc","nested")},79732:function(r){var n=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];r.exports={isSupportedFont:function(r){return -1!==n.indexOf(r)}}},59392:function(r,n,i){var a=i(38248),o=i(3400),s=i(39032).BADNUM,l=i(44808),c=i(8932),u=i(43616),f=i(7152),h=i(43028),p=i(79732).isSupportedFont,d=i(89032),y=i(10624).appendArrayPointValue,g=i(72736).NEWLINES,v=i(72736).BR_TAG_ALL;function m(r){return{type:r,geojson:l.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function x(r,n){return o.isArrayOrTypedArray(r)?n?function(n){return a(r[n])?+r[n]:0}:function(n){return r[n]}:r?function(){return r}:b}function b(){return""}function _(r,n){var i;if(o.isArrayOrTypedArray(r)&&o.isArrayOrTypedArray(n)){i=["step",["get","point_count"],r[0]];for(var a=1;a<r.length;a++)i.push(n[a-1],r[a])}else i=r;return i}function w(r){var n=r.textfont,i=n.family,a=n.style,o=n.weight,s=i.split(" "),l="Italic"===s[s.length-1];l&&s.pop(),l=l||"italic"===a;var c=s.join(" ");return"bold"===o&&-1===s.indexOf("Bold")?c+=" Bold":o<=1e3&&("Metropolis"===s[0]?c="Metropolis"+(o>850?" Black":o>750?" Extra Bold":o>650?" Bold":o>550?" Semi Bold":o>450?" Medium":o>350?" Regular":o>250?" Light":o>150?" Extra Light":" Thin"):"Open Sans"===s.slice(0,2).join(" ")?c="Open Sans"+(o>750?" Extrabold":o>650?" Bold":o>550?" Semibold":o>350?" Regular":" Light"):"Klokantech Noto Sans"===s.slice(0,3).join(" ")&&(c="Klokantech Noto Sans","CJK"===s[3]&&(c+=" CJK"),c+=o>500?" Bold":" Regular")),l&&(c+=" Italic"),"Open Sans Regular Italic"===c?c="Open Sans Italic":"Open Sans Regular Bold"===c?c="Open Sans Bold":"Open Sans Regular Bold Italic"===c?c="Open Sans Bold Italic":"Klokantech Noto Sans Regular Italic"===c&&(c="Klokantech Noto Sans Italic"),p(c)||(c=i),c.split(", ")}r.exports=function(r,n){var i,p=n[0].trace,T=!0===p.visible&&0!==p._length,A="none"!==p.fill,k=h.hasLines(p),M=h.hasMarkers(p),S=h.hasText(p),E=M&&"circle"===p.marker.symbol,I=M&&"circle"!==p.marker.symbol,L=p.cluster&&p.cluster.enabled,C=m("fill"),O=m("line"),D=m("circle"),P=m("symbol"),B={fill:C,line:O,circle:D,symbol:P};if(!T)return B;if((A||k)&&(i=l.calcTraceToLineCoords(n)),A&&(C.geojson=l.makePolygon(i),C.layout.visibility="visible",o.extendFlat(C.paint,{"fill-color":p.fillcolor})),k&&(O.geojson=l.makeLine(i),O.layout.visibility="visible",o.extendFlat(O.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),E){var R=function(r){var n,i,l,h,p=r[0].trace,d=p.marker,y=p.selectedpoints,g=o.isArrayOrTypedArray(d.color),v=o.isArrayOrTypedArray(d.size),m=o.isArrayOrTypedArray(d.opacity);function x(r){return p.opacity*r}g&&(i=c.hasColorscale(p,"marker")?c.makeColorScaleFuncFromTrace(d):o.identity),v&&(l=f(p)),m&&(h=function(r){return x(a(r)?+o.constrain(r,0,1):0)});var b,_=[];for(n=0;n<r.length;n++){var w=r[n],T=w.lonlat;if(T[0]!==s){var A={};i&&(A.mcc=w.mcc=i(w.mc)),l&&(A.mrc=w.mrc=l(w.ms)),h&&(A.mo=h(w.mo)),y&&(A.selected=w.selected||0),_.push({type:"Feature",id:n+1,geometry:{type:"Point",coordinates:T},properties:A})}}if(y)for(b=u.makeSelectedPointStyleFns(p),n=0;n<_.length;n++){var k=_[n].properties;b.selectedOpacityFn&&(k.mo=x(b.selectedOpacityFn(k))),b.selectedColorFn&&(k.mcc=b.selectedColorFn(k)),b.selectedSizeFn&&(k.mrc=b.selectedSizeFn(k))}return{geojson:{type:"FeatureCollection",features:_},mcc:g||b&&b.selectedColorFn?{type:"identity",property:"mcc"}:d.color,mrc:v||b&&b.selectedSizeFn?{type:"identity",property:"mrc"}:d.size/2,mo:m||b&&b.selectedOpacityFn?{type:"identity",property:"mo"}:x(d.opacity)}}(n);D.geojson=R.geojson,D.layout.visibility="visible",L&&(D.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":_(p.cluster.color,p.cluster.step),"circle-radius":_(p.cluster.size,p.cluster.step),"circle-opacity":_(p.cluster.opacity,p.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":w(p),"text-size":12}}),o.extendFlat(D.paint,{"circle-color":R.mcc,"circle-radius":R.mrc,"circle-opacity":R.mo})}if(E&&L&&(D.filter=["!",["has","point_count"]]),(I||S)&&(P.geojson=function(r,n){for(var i=n._fullLayout,a=r[0].trace,l=a.marker||{},c=l.symbol,u=l.angle,f="circle"!==c?x(c):b,p="auto"!==u?x(u,!0):b,d=h.hasText(a)?x(a.text):b,m=[],_=0;_<r.length;_++){var w=r[_];if(w.lonlat[0]!==s){var T,A=a.texttemplate;if(A){var k=Array.isArray(A)?A[_]||"":A,M=a._module.formatLabels(w,a,i),S={};y(S,a,w.i);var E=a._meta||{};T=o.texttemplateString(k,M,i._d3locale,S,w,E)}else T=d(_);T&&(T=T.replace(g,"").replace(v,"\n")),m.push({type:"Feature",geometry:{type:"Point",coordinates:w.lonlat},properties:{symbol:f(_),angle:p(_),text:T}})}}return{type:"FeatureCollection",features:m}}(n,r),o.extendFlat(P.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),I&&(o.extendFlat(P.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&"auto"!==p.marker.angle&&o.extendFlat(P.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),P.layout["icon-allow-overlap"]=p.marker.allowoverlap,o.extendFlat(P.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),S)){var z=(p.marker||{}).size,F=d(p.textposition,z);o.extendFlat(P.layout,{"text-size":p.textfont.size,"text-anchor":F.anchor,"text-offset":F.offset,"text-font":w(p)}),o.extendFlat(P.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return B}},15752:function(r,n,i){var a=i(3400),o=i(43028),s=i(74428),l=i(66828),c=i(124),u=i(70840),f=i(31512),h=i(79732).isSupportedFont;r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,f,i,o)}function y(i,o){return a.coerce2(r,n,f,i,o)}if(g=d("lon")||[],v=d("lat")||[],m=Math.min(g.length,v.length),n._length=m,m){if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),o.hasMarkers(n)){s(r,n,i,p,d,{noLine:!0,noAngle:!0}),d("marker.allowoverlap"),d("marker.angle");var g,v,m,x=n.marker;"circle"!==x.symbol&&(a.isArrayOrTypedArray(x.size)&&(x.size=x.size[0]),a.isArrayOrTypedArray(x.color)&&(x.color=x.color[0]))}o.hasLines(n)&&(l(r,n,i,p,d,{noDash:!0}),d("connectgaps"));var b=y("cluster.maxzoom"),_=y("cluster.step"),w=y("cluster.color",n.marker&&n.marker.color||i),T=y("cluster.size"),A=y("cluster.opacity");if(d("cluster.enabled",!1!==b||!1!==_||!1!==w||!1!==T||!1!==A)||o.hasText(n)){var k=p.font.family;c(r,n,p,d,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:h(k)?k:"Open Sans Regular",weight:p.font.weight,style:p.font.style,size:p.font.size,color:p.font.color}})}d("fill"),"none"!==n.fill&&u(r,n,i,d),a.coerceSelectionMarkerOpacity(n,d)}else n.visible=!1}},37920:function(r){r.exports=function(r,n){return r.lon=n.lon,r.lat=n.lat,r}},11960:function(r,n,i){var a=i(54460);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot.mockAxis,l=r.lonlat;return o.lonLabel=a.tickText(s,s.c2l(l[0]),!0).text,o.latLabel=a.tickText(s,s.c2l(l[1]),!0).text,o}},63312:function(r,n,i){var a=i(93024),o=i(3400),s=i(44928),l=o.fillText,c=i(39032).BADNUM,u=i(47552).traceLayerPrefix;function f(r,n,i){if(!r.hovertemplate){var a=(n.hi||r.hoverinfo).split("+"),o=-1!==a.indexOf("all"),s=-1!==a.indexOf("lon"),c=-1!==a.indexOf("lat"),u=n.lonlat,f=[];return o||s&&c?f.push("("+u[1]+"°, "+u[0]+"°)"):s?f.push(i.lon+(u[0]+"°")):c&&f.push(i.lat+(u[1]+"°")),(o||-1!==a.indexOf("text"))&&l(n,r,f),f.join("<br>")}}r.exports={hoverPoints:function(r,n,i){var l=r.cd,h=l[0].trace,p=r.xa,d=r.ya,y=r.subplot,g=[],v=u+h.uid+"-circle",m=h.cluster&&h.cluster.enabled;m&&(g=y.map.queryRenderedFeatures(null,{layers:[v]}).map(function(r){return r.id}));var x=360*(n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360)),b=n-x;if(a.getClosest(l,function(r){var n=r.lonlat;if(n[0]===c||m&&-1===g.indexOf(r.i+1))return 1/0;var a=o.modHalf(n[0],360),s=n[1],l=y.project([a,s]),u=l.x-p.c2p([b,s]),f=l.y-d.c2p([a,i]),h=Math.max(3,r.mrc||0);return Math.max(Math.sqrt(u*u+f*f)-h,1-3/h)},r),!1!==r.index){var _=l[r.index],w=_.lonlat,T=[o.modHalf(w[0],360)+x,w[1]],A=p.c2p(T),k=d.c2p(T),M=_.mrc||1;r.x0=A-M,r.x1=A+M,r.y0=k-M,r.y1=k+M;var S={};S[h.subplot]={_subplot:y};var E=h._module.formatLabels(_,h,S);return r.lonLabel=E.lonLabel,r.latLabel=E.latLabel,r.color=s(h,_),r.extraText=f(h,_,l[0].t.labels),r.hovertemplate=h.hovertemplate,[r]}},getExtraText:f}},11572:function(r,n,i){r.exports={attributes:i(31512),supplyDefaults:i(15752),colorbar:i(5528),formatLabels:i(11960),calc:i(25212),plot:i(9660),hoverPoints:i(63312).hoverPoints,eventData:i(37920),selectPoints:i(404),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:i(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(r,n,i){var a=i(3400),o=i(59392),s=i(47552).traceLayerPrefix,l={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function c(r,n,i,a){this.type="scattermapbox",this.subplot=r,this.uid=n,this.clusterEnabled=i,this.isHidden=a,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:s+n+"-fill",line:s+n+"-line",circle:s+n+"-circle",symbol:s+n+"-symbol",cluster:s+n+"-cluster",clusterCount:s+n+"-cluster-count"},this.below=null}var u=c.prototype;u.addSource=function(r,n,i){var o={type:"geojson",data:n.geojson};i&&i.enabled&&a.extendFlat(o,{cluster:!0,clusterMaxZoom:i.maxzoom});var s=this.subplot.map.getSource(this.sourceIds[r]);s?s.setData(n.geojson):this.subplot.map.addSource(this.sourceIds[r],o)},u.setSourceData=function(r,n){this.subplot.map.getSource(this.sourceIds[r]).setData(n.geojson)},u.addLayer=function(r,n,i){var a={type:n.type,id:this.layerIds[r],source:this.sourceIds[r],layout:n.layout,paint:n.paint};n.filter&&(a.filter=n.filter);for(var o,s=this.layerIds[r],l=this.subplot.getMapLayers(),c=0;c<l.length;c++)if(l[c].id===s){o=!0;break}o?(this.subplot.setOptions(s,"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&this.subplot.setOptions(s,"setPaintProperty",a.paint)):this.subplot.addLayer(a,i)},u.update=function(r){var n=r[0].trace,i=this.subplot,a=i.map,s=o(i.gd,r),c=i.belowLookup["trace-"+this.uid],u=!(!n.cluster||!n.cluster.enabled),f=!!this.clusterEnabled,h=this;function p(r){f?function(r){for(var n=l.cluster,i=n.length-1;i>=0;i--){var o=n[i];a.removeLayer(h.layerIds[o])}r||a.removeSource(h.sourceIds.circle)}(r):function(r){for(var n=l.nonCluster,i=n.length-1;i>=0;i--){var o=n[i];a.removeLayer(h.layerIds[o]),r||a.removeSource(h.sourceIds[o])}}(r)}function d(r){u?function(r){r||h.addSource("circle",s.circle,n.cluster);for(var i=l.cluster,a=0;a<i.length;a++){var o=i[a],u=s[o];h.addLayer(o,u,c)}}(r):function(r){for(var n=l.nonCluster,i=0;i<n.length;i++){var a=n[i],o=s[a];r||h.addSource(a,o),h.addLayer(a,o,c)}}(r)}var y=this.isHidden,g=!0!==n.visible;g?y||p():y?g||d():f!==u?(p(),d()):(this.below!==c&&(p(!0),d(!0)),function(){for(var r=u?l.cluster:l.nonCluster,n=0;n<r.length;n++){var a=r[n],o=s[a];o&&(i.setOptions(h.layerIds[a],"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&("cluster"!==a&&h.setSourceData(a,o),i.setOptions(h.layerIds[a],"setPaintProperty",o.paint)))}}()),this.clusterEnabled=u,this.isHidden=g,this.below=c,r[0].trace._glTrace=this},u.dispose=function(){for(var r=this.subplot.map,n=this.clusterEnabled?l.cluster:l.nonCluster,i=n.length-1;i>=0;i--){var a=n[i];r.removeLayer(this.layerIds[a]),r.removeSource(this.sourceIds[a])}},r.exports=function(r,n){var i,a,s,u=n[0].trace,f=u.cluster&&u.cluster.enabled,h=!0!==u.visible,p=new c(r,u.uid,f,h),d=o(r.gd,n),y=p.below=r.belowLookup["trace-"+u.uid];if(f)for(p.addSource("circle",d.circle,u.cluster),i=0;i<l.cluster.length;i++)s=d[a=l.cluster[i]],p.addLayer(a,s,y);else for(i=0;i<l.nonCluster.length;i++)s=d[a=l.nonCluster[i]],p.addSource(a,s,u.cluster),p.addLayer(a,s,y);return n[0].trace._glTrace=p,p}},404:function(r,n,i){var a=i(3400),o=i(43028),s=i(39032).BADNUM;r.exports=function(r,n){var i,l=r.cd,c=r.xaxis,u=r.yaxis,f=[],h=l[0].trace;if(!o.hasMarkers(h))return[];if(!1===n)for(i=0;i<l.length;i++)l[i].selected=0;else for(i=0;i<l.length;i++){var p=l[i],d=p.lonlat;if(d[0]!==s){var y=[a.modHalf(d[0],360),d[1]],g=[c.c2p(y),u.c2p(y)];n.contains(g,null,i,r)?(f.push({pointNumber:i,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return f}},8319:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(92880).extendFlat,l=i(98304),c=i(52904),u=i(45464),f=c.line;r.exports={mode:c.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:c.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:c.hovertext,line:{color:f.color,width:f.width,dash:f.dash,backoff:f.backoff,shape:s({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:c.connectgaps,marker:c.marker,cliponaxis:s({},c.cliponaxis,{dflt:!1}),textposition:c.textposition,textfont:c.textfont,fill:s({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l(),hoverinfo:s({},u.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:c.hoveron,hovertemplate:a(),selected:c.selected,unselected:c.unselected}},58320:function(r,n,i){var a=i(38248),o=i(39032).BADNUM,s=i(54460),l=i(90136),c=i(20148),u=i(4500),f=i(16356).calcMarkerSize;r.exports=function(r,n){for(var i=r._fullLayout,h=n.subplot,p=i[h].radialaxis,d=i[h].angularaxis,y=p.makeCalcdata(n,"r"),g=d.makeCalcdata(n,"theta"),v=n._length,m=Array(v),x=0;x<v;x++){var b=y[x],_=g[x],w=m[x]={};a(b)&&a(_)?(w.r=b,w.theta=_):w.r=o}var T=f(n,v);return n._extremes.x=s.findExtremes(p,y,{ppad:T}),l(r,n),c(m,n),u(m,n),m}},85968:function(r,n,i){var a=i(3400),o=i(43028),s=i(74428),l=i(66828),c=i(11731),u=i(124),f=i(70840),h=i(88200).PTS_LINESONLY,p=i(8319);function d(r,n,i,o){var s,l=o("r"),c=o("theta");if(a.isTypedArray(l)&&(n.r=l=Array.from(l)),a.isTypedArray(c)&&(n.theta=c=Array.from(c)),l)c?s=Math.min(l.length,c.length):(s=l.length,o("theta0"),o("dtheta"));else{if(!c)return 0;s=n.theta.length,o("r0"),o("dr")}return n._length=s,s}r.exports={handleRThetaDefaults:d,supplyDefaults:function(r,n,i,y){function g(i,o){return a.coerce(r,n,p,i,o)}var v=d(0,n,0,g);if(v){g("thetaunit"),g("mode",v<h?"lines+markers":"lines"),g("text"),g("hovertext"),"fills"!==n.hoveron&&g("hovertemplate"),o.hasMarkers(n)&&s(r,n,i,y,g,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,y,g,{backoff:!0}),c(r,n,g),g("connectgaps")),o.hasText(n)&&(g("texttemplate"),u(r,n,y,g));var m=[];(o.hasMarkers(n)||o.hasText(n))&&(g("cliponaxis"),g("marker.maxdisplayed"),m.push("points")),g("fill"),"none"!==n.fill&&(f(r,n,i,g),o.hasLines(n)||c(r,n,g)),"tonext"!==n.fill&&"toself"!==n.fill||m.push("fills"),g("hoveron",m.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,g)}else n.visible=!1}}},22852:function(r,n,i){var a=i(3400),o=i(54460);r.exports=function(r,n,i){var s,l,c={},u=i[n.subplot]._subplot;u?(s=u.radialAxis,l=u.angularAxis):(s=(u=i[n.subplot]).radialaxis,l=u.angularaxis);var f=s.c2l(r.r);c.rLabel=o.tickText(s,f,!0).text;var h="degrees"===l.thetaunit?a.rad2deg(r.theta):r.theta;return c.thetaLabel=o.tickText(l,h,!0).text,c}},8504:function(r,n,i){var a=i(98723);function o(r,n,i,a){var o=i.radialAxis,s=i.angularAxis;o._hovertitle="r",s._hovertitle="θ";var l={};l[n.subplot]={_subplot:i};var c=n._module.formatLabels(r,n,l);a.rLabel=c.rLabel,a.thetaLabel=c.thetaLabel;var u=r.hi||n.hoverinfo,f=[];function h(r,n){f.push(r._hovertitle+": "+n)}if(!n.hovertemplate){var p=u.split("+");-1!==p.indexOf("all")&&(p=["r","theta","text"]),-1!==p.indexOf("r")&&h(o,a.rLabel),-1!==p.indexOf("theta")&&h(s,a.thetaLabel),-1!==p.indexOf("text")&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}r.exports={hoverPoints:function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var c=l[0];if(void 0===c.index)return l;var u=r.subplot,f=c.cd[c.index],h=c.trace;if(u.isPtInside(f))return c.xLabelVal=void 0,c.yLabelVal=void 0,o(f,h,u,c),c.hovertemplate=h.hovertemplate,l}},makeHoverPointText:o}},76924:function(r,n,i){r.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:i(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:i(8319),supplyDefaults:i(85968).supplyDefaults,colorbar:i(5528),formatLabels:i(22852),calc:i(58320),plot:i(43456),style:i(49224).style,styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(8504).hoverPoints,selectPoints:i(91560),meta:{}}},43456:function(r,n,i){var a=i(96504),o=i(39032).BADNUM;r.exports=function(r,n,i){for(var s=n.layers.frontplot.select("g.scatterlayer"),l=n.xaxis,c=n.yaxis,u={xaxis:l,yaxis:c,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},f=n.radialAxis,h=n.angularAxis,p=0;p<i.length;p++)for(var d=i[p],y=0;y<d.length;y++){0===y&&(d[0].trace._xA=l,d[0].trace._yA=c);var g=d[y],v=g.r;if(v===o)g.x=g.y=o;else{var m=f.c2g(v),x=h.c2g(g.theta);g.x=m*Math.cos(x),g.y=m*Math.sin(x)}}a(r,u,i,s)}},24396:function(r,n,i){var a=i(8319),o=i(2876),s=i(21776).Gw;r.exports={mode:a.mode,r:a.r,theta:a.theta,r0:a.r0,dr:a.dr,theta0:a.theta0,dtheta:a.dtheta,thetaunit:a.thetaunit,text:a.text,texttemplate:s({editType:"plot"},{keys:["r","theta","text"]}),hovertext:a.hovertext,hovertemplate:a.hovertemplate,line:{color:o.line.color,width:o.line.width,dash:o.line.dash,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:a.hoverinfo,selected:a.selected,unselected:a.unselected}},27160:function(r,n,i){r.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:i(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:i(24396),supplyDefaults:i(98608),colorbar:i(5528),formatLabels:i(94120),calc:i(66720),hoverPoints:i(1600).hoverPoints,selectPoints:i(73224),meta:{}}},66720:function(r,n,i){var a=i(90136),o=i(16356).calcMarkerSize,s=i(84236),l=i(54460),c=i(67072).TOO_MANY_POINTS;r.exports=function(r,n){var i=r._fullLayout,u=n.subplot,f=i[u].radialaxis,h=i[u].angularaxis,p=n._r=f.makeCalcdata(n,"r"),d=n._theta=h.makeCalcdata(n,"theta"),y=n._length,g={};y<p.length&&(p=p.slice(0,y)),y<d.length&&(d=d.slice(0,y)),g.r=p,g.theta=d,a(r,n);var v,m=g.opts=s.style(r,n);return y<c?v=o(n,y):m.marker&&(v=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),n._extremes.x=l.findExtremes(f,p,{ppad:v}),[{x:!1,y:!1,t:g,trace:n}]}},98608:function(r,n,i){var a=i(3400),o=i(43028),s=i(85968).handleRThetaDefaults,l=i(74428),c=i(66828),u=i(124),f=i(70840),h=i(88200).PTS_LINESONLY,p=i(24396);r.exports=function(r,n,i,d){function y(i,o){return a.coerce(r,n,p,i,o)}var g=s(r,n,d,y);g?(y("thetaunit"),y("mode",g<h?"lines+markers":"lines"),y("text"),y("hovertext"),"fills"!==n.hoveron&&y("hovertemplate"),o.hasMarkers(n)&&l(r,n,i,d,y,{noAngleRef:!0,noStandOff:!0}),o.hasLines(n)&&(c(r,n,i,d,y),y("connectgaps")),o.hasText(n)&&(y("texttemplate"),u(r,n,d,y,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),y("fill"),"none"!==n.fill&&f(r,n,i,y),a.coerceSelectionMarkerOpacity(n,y)):n.visible=!1}},94120:function(r,n,i){var a=i(22852);r.exports=function(r,n,i){var o=r.i;return"r"in r||(r.r=n._r[o]),"theta"in r||(r.theta=n._theta[o]),a(r,n,i)}},1600:function(r,n,i){var a=i(41272),o=i(8504).makeHoverPointText;r.exports={hoverPoints:function(r,n,i,s){var l=r.cd[0].t,c=l.r,u=l.theta,f=a.hoverPoints(r,n,i,s);if(f&&!1!==f[0].index){var h=f[0];if(void 0===h.index)return f;var p=r.subplot,d=h.cd[h.index],y=h.trace;if(d.r=c[h.index],d.theta=u[h.index],p.isPtInside(d))return h.xLabelVal=void 0,h.yLabelVal=void 0,o(d,y,p,h),f}}}},62944:function(r,n,i){var a=i(27160);a.plot=i(56512),r.exports=a},56512:function(r,n,i){var a=i(3108),o=i(38248),s=i(89876),l=i(74588),c=i(84236),u=i(3400),f=i(67072).TOO_MANY_POINTS;r.exports=function(r,n,i){if(i.length){var h=n.radialAxis,p=n.angularAxis,d=l(r,n);return i.forEach(function(i){if(i&&i[0]&&i[0].trace){var s,l=i[0],y=l.trace,g=l.t,v=y._length,m=g.r,x=g.theta,b=g.opts,_=m.slice(),w=x.slice();for(s=0;s<m.length;s++)n.isPtInside({r:m[s],theta:x[s]})||(_[s]=NaN,w[s]=NaN);var T=Array(2*v),A=Array(v),k=Array(v);for(s=0;s<v;s++){var M,S,E=_[s];if(o(E)){var I=h.c2g(E),L=p.c2g(w[s],y.thetaunit);M=I*Math.cos(L),S=I*Math.sin(L)}else M=S=NaN;A[s]=T[2*s]=M,k[s]=T[2*s+1]=S}g.tree=a(T),b.marker&&v>=f&&(b.marker.cluster=g.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=T),b.line&&T.length>1&&u.extendFlat(b.line,c.linePositions(r,y,T)),b.text&&(u.extendFlat(b.text,{positions:T},c.textPosition(r,y,b.text,b.marker)),u.extendFlat(b.textSel,{positions:T},c.textPosition(r,y,b.text,b.markerSel)),u.extendFlat(b.textUnsel,{positions:T},c.textPosition(r,y,b.text,b.markerUnsel))),b.fill&&!d.fill2d&&(d.fill2d=!0),b.marker&&!d.scatter2d&&(d.scatter2d=!0),b.line&&!d.line2d&&(d.line2d=!0),b.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(b.line),d.fillOptions.push(b.fill),d.markerOptions.push(b.marker),d.markerSelectedOptions.push(b.markerSel),d.markerUnselectedOptions.push(b.markerUnsel),d.textOptions.push(b.text),d.textSelectedOptions.push(b.textSel),d.textUnselectedOptions.push(b.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),g.x=A,g.y=k,g.rawx=A,g.rawy=k,g.r=m,g.theta=x,g.positions=T,g._scene=d,g.index=d.count,d.count++}}),s(r,n,i)}},r.exports.reglPrecompiled={}},69496:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(92880).extendFlat,l=i(98304),c=i(52904),u=i(45464),f=c.line;r.exports={mode:c.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:c.text,texttemplate:o({editType:"plot"},{keys:["real","imag","text"]}),hovertext:c.hovertext,line:{color:f.color,width:f.width,dash:f.dash,backoff:f.backoff,shape:s({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:c.connectgaps,marker:c.marker,cliponaxis:s({},c.cliponaxis,{dflt:!1}),textposition:c.textposition,textfont:c.textfont,fill:s({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l(),hoverinfo:s({},u.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:c.hoveron,hovertemplate:a(),selected:c.selected,unselected:c.unselected}},47507:function(r,n,i){var a=i(38248),o=i(39032).BADNUM,s=i(90136),l=i(20148),c=i(4500),u=i(16356).calcMarkerSize;r.exports=function(r,n){for(var i=r._fullLayout,f=n.subplot,h=i[f].realaxis,p=i[f].imaginaryaxis,d=h.makeCalcdata(n,"real"),y=p.makeCalcdata(n,"imag"),g=n._length,v=Array(g),m=0;m<g;m++){var x=d[m],b=y[m],_=v[m]={};a(x)&&a(b)?(_.real=x,_.imag=b):_.real=o}return u(n,g),s(r,n),l(v,n),c(v,n),v}},76716:function(r,n,i){var a=i(3400),o=i(43028),s=i(74428),l=i(66828),c=i(11731),u=i(124),f=i(70840),h=i(88200).PTS_LINESONLY,p=i(69496);r.exports=function(r,n,i,d){function y(i,o){return a.coerce(r,n,p,i,o)}var g,v,m,x=(v=y("real"),m=y("imag"),v&&m&&(g=Math.min(v.length,m.length)),a.isTypedArray(v)&&(n.real=v=Array.from(v)),a.isTypedArray(m)&&(n.imag=m=Array.from(m)),n._length=g,g);if(x){y("mode",x<h?"lines+markers":"lines"),y("text"),y("hovertext"),"fills"!==n.hoveron&&y("hovertemplate"),o.hasMarkers(n)&&s(r,n,i,d,y,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,d,y,{backoff:!0}),c(r,n,y),y("connectgaps")),o.hasText(n)&&(y("texttemplate"),u(r,n,d,y));var b=[];(o.hasMarkers(n)||o.hasText(n))&&(y("cliponaxis"),y("marker.maxdisplayed"),b.push("points")),y("fill"),"none"!==n.fill&&(f(r,n,i,y),o.hasLines(n)||c(r,n,y)),"tonext"!==n.fill&&"toself"!==n.fill||b.push("fills"),y("hoveron",b.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,y)}else n.visible=!1}},49504:function(r,n,i){var a=i(54460);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot;return o.realLabel=a.tickText(s.radialAxis,r.real,!0).text,o.imagLabel=a.tickText(s.angularAxis,r.imag,!0).text,o}},25292:function(r,n,i){var a=i(98723);function o(r,n,i,a){var o=i.radialAxis,s=i.angularAxis;o._hovertitle="real",s._hovertitle="imag";var l={};l[n.subplot]={_subplot:i};var c=n._module.formatLabels(r,n,l);a.realLabel=c.realLabel,a.imagLabel=c.imagLabel;var u=r.hi||n.hoverinfo,f=[];function h(r,n){f.push(r._hovertitle+": "+n)}if(!n.hovertemplate){var p=u.split("+");-1!==p.indexOf("all")&&(p=["real","imag","text"]),-1!==p.indexOf("real")&&h(o,a.realLabel),-1!==p.indexOf("imag")&&h(s,a.imagLabel),-1!==p.indexOf("text")&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}r.exports={hoverPoints:function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var c=l[0];if(void 0===c.index)return l;var u=r.subplot,f=c.cd[c.index],h=c.trace;if(u.isPtInside(f))return c.xLabelVal=void 0,c.yLabelVal=void 0,o(f,h,u,c),c.hovertemplate=h.hovertemplate,l}},makeHoverPointText:o}},95443:function(r,n,i){r.exports={moduleType:"trace",name:"scattersmith",basePlotModule:i(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:i(69496),supplyDefaults:i(76716),colorbar:i(5528),formatLabels:i(49504),calc:i(47507),plot:i(34927),style:i(49224).style,styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(25292).hoverPoints,selectPoints:i(91560),meta:{}}},34927:function(r,n,i){var a=i(96504),o=i(39032).BADNUM,s=i(36416).smith;r.exports=function(r,n,i){for(var l=n.layers.frontplot.select("g.scatterlayer"),c=n.xaxis,u=n.yaxis,f={xaxis:c,yaxis:u,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},h=0;h<i.length;h++)for(var p=i[h],d=0;d<p.length;d++){0===d&&(p[0].trace._xA=c,p[0].trace._yA=u);var y=p[d],g=y.real;if(g===o)y.x=y.y=o;else{var v=s([g,y.imag]);y.x=v[0],y.y=v[1]}}a(r,f,i,l)}},5896:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(98304),l=i(52904),c=i(45464),u=i(49084),f=i(98192).u,h=i(92880).extendFlat,p=l.marker,d=l.line,y=p.line;r.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:h({},l.mode,{dflt:"markers"}),text:h({},l.text,{}),texttemplate:o({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:h({},l.hovertext,{}),line:{color:d.color,width:d.width,dash:f,backoff:d.backoff,shape:h({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:h({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:s(),marker:h({symbol:p.symbol,opacity:p.opacity,angle:p.angle,angleref:p.angleref,standoff:p.standoff,maxdisplayed:p.maxdisplayed,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,line:h({width:y.width,editType:"calc"},u("marker.line")),gradient:p.gradient,editType:"calc"},u("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:h({},c.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:a()}},34335:function(r,n,i){var a=i(38248),o=i(90136),s=i(20148),l=i(4500),c=i(16356).calcMarkerSize,u=["a","b","c"],f={a:["b","c"],b:["a","c"],c:["a","b"]};r.exports=function(r,n){var i,h,p,d,y,g,v=r._fullLayout[n.subplot].sum,m=n.sum||v,x={a:n.a,b:n.b,c:n.c};for(i=0;i<u.length;i++)if(!x[p=u[i]]){for(y=x[f[p][0]],g=x[f[p][1]],d=Array(y.length),h=0;h<y.length;h++)d[h]=m-y[h]-g[h];x[p]=d}var b,_,w,T,A,k,M=n._length,S=Array(M);for(i=0;i<M;i++)b=x.a[i],_=x.b[i],w=x.c[i],a(b)&&a(_)&&a(w)?(1!=(T=v/((b=+b)+(_=+_)+(w=+w)))&&(b*=T,_*=T,w*=T),k=b,A=w-_,S[i]={x:A,y:k,a:b,b:_,c:w}):S[i]={x:!1,y:!1};return c(n,M),o(r,n),s(S,n),l(S,n),S}},84256:function(r,n,i){var a=i(3400),o=i(88200),s=i(43028),l=i(74428),c=i(66828),u=i(11731),f=i(124),h=i(70840),p=i(5896);r.exports=function(r,n,i,d){function y(i,o){return a.coerce(r,n,p,i,o)}var g,v=y("a"),m=y("b"),x=y("c");if(v?(g=v.length,m?(g=Math.min(g,m.length),x&&(g=Math.min(g,x.length))):g=x?Math.min(g,x.length):0):m&&x&&(g=Math.min(m.length,x.length)),g){n._length=g,y("sum"),y("text"),y("hovertext"),"fills"!==n.hoveron&&y("hovertemplate"),y("mode",g<o.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(n)&&l(r,n,i,d,y,{gradient:!0}),s.hasLines(n)&&(c(r,n,i,d,y,{backoff:!0}),u(r,n,y),y("connectgaps")),s.hasText(n)&&(y("texttemplate"),f(r,n,d,y));var b=[];(s.hasMarkers(n)||s.hasText(n))&&(y("cliponaxis"),y("marker.maxdisplayed"),b.push("points")),y("fill"),"none"!==n.fill&&(h(r,n,i,y),s.hasLines(n)||u(r,n,y)),"tonext"!==n.fill&&"toself"!==n.fill||b.push("fills"),y("hoveron",b.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,y)}else n.visible=!1}},97476:function(r){r.exports=function(r,n,i,a,o){if(n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),a[o]){var s=a[o];r.a=s.a,r.b=s.b,r.c=s.c}else r.a=n.a,r.b=n.b,r.c=n.c;return r}},90404:function(r,n,i){var a=i(54460);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot;return o.aLabel=a.tickText(s.aaxis,r.a,!0).text,o.bLabel=a.tickText(s.baxis,r.b,!0).text,o.cLabel=a.tickText(s.caxis,r.c,!0).text,o}},26596:function(r,n,i){var a=i(98723);r.exports=function(r,n,i,o){var s=a(r,n,i,o);if(s&&!1!==s[0].index){var l=s[0];if(void 0===l.index){var c=1-l.y0/r.ya._length,u=r.xa._length,f=u*c/2,h=u-f;return l.x0=Math.max(Math.min(l.x0,h),f),l.x1=Math.max(Math.min(l.x1,h),f),s}var p=l.cd[l.index],d=l.trace,y=l.subplot;l.a=p.a,l.b=p.b,l.c=p.c,l.xLabelVal=void 0,l.yLabelVal=void 0;var g={};g[d.subplot]={_subplot:y};var v=d._module.formatLabels(p,d,g);l.aLabel=v.aLabel,l.bLabel=v.bLabel,l.cLabel=v.cLabel;var m=p.hi||d.hoverinfo,x=[];if(!d.hovertemplate){var b=m.split("+");-1!==b.indexOf("all")&&(b=["a","b","c"]),-1!==b.indexOf("a")&&_(y.aaxis,l.aLabel),-1!==b.indexOf("b")&&_(y.baxis,l.bLabel),-1!==b.indexOf("c")&&_(y.caxis,l.cLabel)}return l.extraText=x.join("<br>"),l.hovertemplate=d.hovertemplate,s}function _(r,n){x.push(r._hovertitle+": "+n)}}},34864:function(r,n,i){r.exports={attributes:i(5896),supplyDefaults:i(84256),colorbar:i(5528),formatLabels:i(90404),calc:i(34335),plot:i(88776),style:i(49224).style,styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(26596),selectPoints:i(91560),eventData:i(97476),moduleType:"trace",name:"scatterternary",basePlotModule:i(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(r,n,i){var a=i(96504);r.exports=function(r,n,i){var o=n.plotContainer;o.select(".scatterlayer").selectAll("*").remove();for(var s=n.xaxis,l=n.yaxis,c={xaxis:s,yaxis:l,plot:o,layerClipId:n._hasClipOnAxisFalse?n.clipIdRelative:null},u=n.layers.frontplot.select("g.scatterlayer"),f=0;f<i.length;f++){var h=i[f];h.length&&(h[0].trace._xA=s,h[0].trace._yA=l)}a(r,c,i,u)}},44524:function(r,n,i){var a=i(52904),o=i(49084),s=i(29736).axisHoverFormat,l=i(21776).Ks,c=i(2876),u=i(33816).idRegex,f=i(31780).templatedArray,h=i(92880).extendFlat,p=a.marker,d=p.line,y=h(o("marker.line",{editTypeOverride:"calc"}),{width:h({},d.width,{editType:"calc"}),editType:"calc"}),g=h(o("marker"),{symbol:p.symbol,angle:p.angle,size:h({},p.size,{editType:"markerSize"}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:y,editType:"calc"});function v(r){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:u[r],editType:"plot"}}}g.color.editType=g.cmin.editType=g.cmax.editType="style",r.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:h({},c.text,{}),hovertext:h({},c.hovertext,{}),hovertemplate:l(),xhoverformat:s("x"),yhoverformat:s("y"),marker:g,xaxes:v("x"),yaxes:v("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:c.selected.marker,editType:"calc"},unselected:{marker:c.unselected.marker,editType:"calc"},opacity:c.opacity}},28888:function(r,n,i){var a=i(24040),o=i(12704);r.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:i(44524),supplyDefaults:i(69544),colorbar:i(5528),calc:i(66821),plot:i(54840),hoverPoints:i(72248).hoverPoints,selectPoints:i(62500),editStyle:i(83156),meta:{}},a.register(o)},99332:function(r,n,i){var a=i(13472),o=i(24040),s=i(5048),l=i(84888)._M,c=i(57952),u=i(79811).getFromId,f=i(54460).shouldShowZeroLine,h="splom",p={};function d(r){var n=r._fullLayout,i=n._glcanvas.data()[0].regl,o=n._splomGrid;o||(o=n._splomGrid=a(i)),o.update(function(r){var n,i=r._context.plotGlPixelRatio,a=r._fullLayout,o=a._size,s=[0,0,a.width*i,a.height*i],l={};function c(r,n,a,o,c,u){a*=i,o*=i,c*=i,u*=i;var f=n[r+"color"],h=n[r+"width"],p=String(f+h);p in l?l[p].data.push(NaN,NaN,a,o,c,u):l[p]={data:[a,o,c,u],join:"rect",thickness:h*i,color:f,viewport:s,range:s,overlay:!1}}for(n in a._splomSubplots){var u,h,p=a._plots[n],d=p.xaxis,y=p.yaxis,g=d._gridVals,v=y._gridVals,m=d._offset,x=d._length,b=y._length,_=o.b+y.domain[0]*o.h,w=-y._m,T=-w*y.r2l(y.range[0],y.calendar);if(d.showgrid)for(n=0;n<g.length;n++)u=m+d.l2p(g[n].x),c("grid",d,u,_,u,_+b);if(y.showgrid)for(n=0;n<v.length;n++)c("grid",y,m,h=_+T+w*v[n].x,m+x,h);f(r,d,y)&&(u=m+d.l2p(0),c("zeroline",d,u,_,u,_+b)),f(r,y,d)&&c("zeroline",y,m,h=_+T+0,m+x,h)}var A=[];for(n in l)A.push(l[n]);return A}(r))}r.exports={name:h,attr:c.attr,attrRegex:c.attrRegex,layoutAttributes:c.layoutAttributes,supplyLayoutDefaults:c.supplyLayoutDefaults,drawFramework:c.drawFramework,plot:function(r){var n=r._fullLayout,i=o.getModule(h),a=l(r.calcdata,i)[0];s(r,["ANGLE_instanced_arrays","OES_element_index_uint"],p)&&(n._hasOnlyLargeSploms&&d(r),i.plot(r,{},a))},drag:function(r){var n=r.calcdata,i=r._fullLayout;i._hasOnlyLargeSploms&&d(r);for(var a=0;a<n.length;a++){var o=n[a][0].trace,s=i._splomScenes[o.uid];"splom"===o.type&&s&&s.matrix&&function(r,n,i){for(var a=i.matrixOptions.data.length,o=n._visibleDims,s=i.viewOpts.ranges=Array(a),l=0;l<o.length;l++){var c=o[l],f=s[l]=[,,,,],h=u(r,n._diag[c][0]);h&&(f[0]=h.r2l(h.range[0]),f[2]=h.r2l(h.range[1]));var p=u(r,n._diag[c][1]);p&&(f[1]=p.r2l(p.range[0]),f[3]=p.r2l(p.range[1]))}i.selectBatch.length||i.unselectBatch.length?i.matrix.update({ranges:s},{ranges:s}):i.matrix.update({ranges:s})}(r,o,s)}},updateGrid:d,clean:function(r,n,i,a){var o,s={};if(a._splomScenes){for(o=0;o<r.length;o++){var l=r[o];"splom"===l.type&&(s[l.uid]=1)}for(o=0;o<i.length;o++){var u=i[o];if(!s[u.uid]){var f=a._splomScenes[u.uid];f&&f.destroy&&f.destroy(),a._splomScenes[u.uid]=null,delete a._splomScenes[u.uid]}}}0===Object.keys(a._splomScenes||{}).length&&delete a._splomScenes,a._splomGrid&&!n._hasOnlyLargeSploms&&a._hasOnlyLargeSploms&&(a._splomGrid.destroy(),a._splomGrid=null,delete a._splomGrid),c.clean(r,n,i,a)},updateFx:c.updateFx,toSVG:c.toSVG,reglPrecompiled:p}},66821:function(r,n,i){var a=i(3400),o=i(79811),s=i(16356).calcMarkerSize,l=i(16356).calcAxisExpansion,c=i(90136),u=i(84236).markerSelection,f=i(84236).markerStyle,h=i(72308),p=i(39032).BADNUM,d=i(67072).TOO_MANY_POINTS;r.exports=function(r,n){var i,y,g,v,m,x,b=n.dimensions,_=n._length,w={},T=w.cdata=[],A=w.data=[],k=n._visibleDims=[];function M(r,i){for(var o=r.makeCalcdata({v:i.values,vcalendar:n.calendar},"v"),s=0;s<o.length;s++)o[s]=o[s]===p?NaN:o[s];T.push(o),A.push("log"===r.type?a.simpleMap(o,r.c2l):o)}for(i=0;i<b.length;i++)if((g=b[i]).visible){if(v=o.getFromId(r,n._diag[i][0]),m=o.getFromId(r,n._diag[i][1]),v&&m&&v.type!==m.type){a.log("Skipping splom dimension "+i+" with conflicting axis types");continue}v?(M(v,g),m&&"category"===m.type&&(m._categories=v._categories.slice())):M(m,g),k.push(i)}for(c(r,n),a.extendFlat(w,f(r,n)),x=T.length*_>d?w.sizeAvg||Math.max(w.size,3):s(n,_),y=0;y<k.length;y++)g=b[i=k[y]],v=o.getFromId(r,n._diag[i][0])||{},m=o.getFromId(r,n._diag[i][1])||{},l(r,n,v,m,T[y],T[y],x);var S=h(r,n);return S.matrix||(S.matrix=!0),S.matrixOptions=w,S.selectedOptions=u(r,n,n.selected),S.unselectedOptions=u(r,n,n.unselected),[{x:!1,y:!1,t:{},trace:n}]}},69544:function(r,n,i){var a=i(3400),o=i(51272),s=i(44524),l=i(43028),c=i(74428),u=i(26284),f=i(80088).isOpenSymbol;function h(r,n){function i(i,o){return a.coerce(r,n,s.dimensions,i,o)}i("label");var o=i("values");o&&o.length?i("visible"):n.visible=!1,i("axis.type"),i("axis.matches")}r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,s,i,o)}var y=o(r,n,{name:"dimensions",handleItemDefaults:h}),g=d("diagonal.visible"),v=d("showupperhalf"),m=d("showlowerhalf");if(u(n,y,"values")&&(g||v||m)){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),c(r,n,i,p,d,{noAngleRef:!0,noStandOff:!0});var x=f(n.marker.symbol),b=l.isBubble(n);d("marker.line.width",x||b?1:0),function(r,n,i,a){var o,s,l=n.dimensions,c=l.length,u=n.showupperhalf,f=n.showlowerhalf,h=n.diagonal.visible,p=Array(c),d=Array(c);for(o=0;o<c;o++){var y=o?o+1:"";p[o]="x"+y,d[o]="y"+y}var g=a("xaxes",p),v=a("yaxes",d),m=n._diag=Array(c);n._xaxes={},n._yaxes={};var x=[],b=[];function _(r,a,o,s){if(r){var l=r.charAt(0),c=i._splomAxes[l];if(n["_"+l+"axes"][r]=1,s.push(r),!(r in c)){var u=c[r]={};o&&(u.label=o.label||"",o.visible&&o.axis&&(o.axis.type&&(u.type=o.axis.type),o.axis.matches&&(u.matches=a)))}}}var w=!h&&!f,T=!h&&!u;for(n._axesDim={},o=0;o<c;o++){var A=l[o],k=0===o,M=o===c-1,S=k&&w||M&&T?void 0:g[o],E=k&&T||M&&w?void 0:v[o];_(S,E,A,x),_(E,S,A,b),m[o]=[S,E],n._axesDim[S]=o,n._axesDim[E]=o}for(o=0;o<x.length;o++)for(s=0;s<b.length;s++){var I=x[o]+b[s];o>s&&u||o<s&&f?i._splomSubplots[I]=1:o!==s||!h&&f&&u||(i._splomSubplots[I]=1)}(!f||!h&&u&&f)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}(0,n,p,d),a.coerceSelectionMarkerOpacity(n,d)}else n.visible=!1}},83156:function(r,n,i){var a=i(3400),o=i(90136),s=i(84236).markerStyle;r.exports=function(r,n){var i=n.trace,l=r._fullLayout._splomScenes[i.uid];if(l){o(r,i),a.extendFlat(l.matrixOptions,s(r,i));var c=a.extendFlat({},l.matrixOptions,l.viewOpts);l.matrix.update(c,null)}}},50328:function(r,n){n.getDimIndex=function(r,n){for(var i=n._id,a={x:0,y:1}[i.charAt(0)],o=r._visibleDims,s=0;s<o.length;s++){var l=o[s];if(r._diag[l][a]===i)return s}return!1}},72248:function(r,n,i){var a=i(50328),o=i(41272).calcHover,s=i(54460).getFromId,l=i(92880).extendFlat;function c(r,n,i,s){var l=r.cd[0].trace,c=r.scene.matrixOptions.cdata,u=r.xa,f=r.ya,h=u.c2p(n),p=f.c2p(i),d=r.distance,y=a.getDimIndex(l,u),g=a.getDimIndex(l,f);if(!1===y||!1===g)return[r];for(var v,m,x=c[y],b=c[g],_=d,w=0;w<x.length;w++)if(!s||w===r.index){var T=x[w],A=b[w],k=u.c2p(T)-h,M=f.c2p(A)-p,S=Math.sqrt(k*k+M*M);(s||S<_)&&(_=m=S,v=w)}return r.index=v,r.distance=_,r.dxy=m,void 0===v?[r]:[o(r,x,b,l)]}r.exports={hoverPoints:function(r,n,i,a,o){o||(o={});var u="x"===(a||"").charAt(0),f="y"===(a||"").charAt(0),h=c(r,n,i);if((u||f)&&"axis"===o.hoversubplots&&h[0])for(var p=(u?r.xa:r.ya)._subplotsWith,d=o.gd,y=l({},r),g=0;g<p.length;g++){var v=p[g];if(v!==r.xa._id+r.ya._id){f?y.xa=s(d,v,"x"):y.ya=s(d,v,"y");var m=c(y,n,i,u||f);h=h.concat(m)}}return h}}},97924:function(r,n,i){var a=i(28888);a.basePlotModule=i(99332),r.exports=a},54840:function(r,n,i){var a=i(55795),o=i(3400),s=i(79811),l=i(72760).selectMode;r.exports=function(r,n,i){if(i.length)for(var c=0;c<i.length;c++)!function(r,n){var i,c,u,f,h,p=r._fullLayout,d=p._size,y=n.trace,g=n.t,v=p._splomScenes[y.uid],m=v.matrixOptions,x=m.cdata,b=p._glcanvas.data()[0].regl,_=p.dragmode;if(0!==x.length){m.lower=y.showupperhalf,m.upper=y.showlowerhalf,m.diagonal=y.diagonal.visible;var w=y._visibleDims,T=x.length,A=v.viewOpts={};for(A.ranges=Array(T),A.domains=Array(T),h=0;h<w.length;h++){u=w[h];var k=A.ranges[h]=[,,,,],M=A.domains[h]=[,,,,];(i=s.getFromId(r,y._diag[u][0]))&&(k[0]=i._rl[0],k[2]=i._rl[1],M[0]=i.domain[0],M[2]=i.domain[1]),(c=s.getFromId(r,y._diag[u][1]))&&(k[1]=c._rl[0],k[3]=c._rl[1],M[1]=c.domain[0],M[3]=c.domain[1])}var S=r._context.plotGlPixelRatio,E=d.l*S,I=d.b*S,L=d.w*S,C=d.h*S;A.viewport=[E,I,L+E,C+I],!0===v.matrix&&(v.matrix=a(b));var O=p.clickmode.indexOf("select")>-1,D=!0;if(l(_)||y.selectedpoints||O){var P=y._length;if(y.selectedpoints){v.selectBatch=y.selectedpoints;var B=y.selectedpoints,R={};for(u=0;u<B.length;u++)R[B[u]]=!0;var z=[];for(u=0;u<P;u++)R[u]||z.push(u);v.unselectBatch=z}var F=g.xpx=Array(T),N=g.ypx=Array(T);for(h=0;h<w.length;h++){if(u=w[h],i=s.getFromId(r,y._diag[u][0]))for(F[h]=Array(P),f=0;f<P;f++)F[h][f]=i.c2p(x[h][f]);if(c=s.getFromId(r,y._diag[u][1]))for(N[h]=Array(P),f=0;f<P;f++)N[h][f]=c.c2p(x[h][f])}if(v.selectBatch.length||v.unselectBatch.length){var U=o.extendFlat({},m,v.unselectedOptions,A),j=o.extendFlat({},m,v.selectedOptions,A);v.matrix.update(U,j),D=!1}}else g.xpx=g.ypx=null;if(D){var V=o.extendFlat({},m,A);v.matrix.update(V,null)}}}(r,i[c][0])}},72308:function(r,n,i){var a=i(3400);r.exports=function(r,n){var i=r._fullLayout,o=n.uid,s=i._splomScenes;s||(s=i._splomScenes={});var l={dirty:!0,selectBatch:[],unselectBatch:[]},c=s[n.uid];return c||((c=s[o]=a.extendFlat({},l,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){c.matrix&&c.matrix.draw&&(c.selectBatch.length||c.unselectBatch.length?c.matrix.draw(c.unselectBatch,c.selectBatch):c.matrix.draw()),c.dirty=!1},c.destroy=function(){c.matrix&&c.matrix.destroy&&c.matrix.destroy(),c.matrixOptions=null,c.selectBatch=null,c.unselectBatch=null,c=null}),c.dirty||a.extendFlat(c,l),c}},62500:function(r,n,i){var a=i(3400),o=a.pushUnique,s=i(43028),l=i(50328);r.exports=function(r,n){var i=r.cd,c=i[0].trace,u=i[0].t,f=r.scene,h=f.matrixOptions.cdata,p=r.xaxis,d=r.yaxis,y=[];if(!f)return y;var g=!s.hasMarkers(c)&&!s.hasText(c);if(!0!==c.visible||g)return y;var v=l.getDimIndex(c,p),m=l.getDimIndex(c,d);if(!1===v||!1===m)return y;var x=u.xpx[v],b=u.ypx[m],_=h[v],w=h[m],T=(r.scene.selectBatch||[]).slice(),A=[];if(!1!==n&&!n.degenerate)for(var k=0;k<_.length;k++)n.contains([x[k],b[k]],null,k,r)?(y.push({pointNumber:k,x:_[k],y:w[k]}),o(T,k)):-1!==T.indexOf(k)?o(T,k):A.push(k);var M=f.matrixOptions;return T.length||A.length?f.selectBatch.length||f.unselectBatch.length||f.matrix.update(f.unselectedOptions,a.extendFlat({},M,f.selectedOptions,f.viewOpts)):f.matrix.update(M,null),f.selectBatch=T,f.unselectBatch=A,y}},90167:function(r,n,i){var a=i(49084),o=i(29736).axisHoverFormat,s=i(21776).Ks,l=i(52948),c=i(45464),u=i(92880).extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:u({},c.showlegend,{dflt:!1})};u(f,a("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){f[r]=l[r]}),f.hoverinfo=u({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,r.exports=f},3832:function(r,n,i){var a=i(3400),o=i(47128);function s(r){var n,i,o,s,c,u,f,h,p,d,y,g,v=r._x,m=r._y,x=r._z,b=r._len,_=-1/0,w=1/0,T=-1/0,A=1/0,k=-1/0,M=1/0,S="";for(b&&(f=v[0],p=m[0],y=x[0]),b>1&&(h=v[b-1],d=m[b-1],g=x[b-1]),n=0;n<b;n++)_=Math.max(_,v[n]),w=Math.min(w,v[n]),T=Math.max(T,m[n]),A=Math.min(A,m[n]),k=Math.max(k,x[n]),M=Math.min(M,x[n]),s||v[n]===f||(s=!0,S+="x"),c||m[n]===p||(c=!0,S+="y"),u||x[n]===y||(u=!0,S+="z");s||(S+="x"),c||(S+="y"),u||(S+="z");var E=l(r._x),I=l(r._y),L=l(r._z);S=(S=(S=S.replace("x",(f>h?"-":"+")+"x")).replace("y",(p>d?"-":"+")+"y")).replace("z",(y>g?"-":"+")+"z");var C=function(){b=0,E=[],I=[],L=[]};(!b||b<E.length*I.length*L.length)&&C();var O=function(r){return"x"===r?v:"y"===r?m:x},D=function(r){return"x"===r?E:"y"===r?I:L},P=function(r){return r[b-1]<r[0]?-1:1},B=O(S[1]),R=O(S[3]),z=O(S[5]),F=D(S[1]).length,N=D(S[3]).length,U=D(S[5]).length,j=!1,V=function(r,n,i){return F*(N*r+n)+i},H=P(O(S[1])),q=P(O(S[3])),G=P(O(S[5]));for(n=0;n<U-1;n++){for(i=0;i<N-1;i++){for(o=0;o<F-1;o++){var W=V(n,i,o),Y=V(n,i,o+1),Z=V(n,i+1,o),X=V(n+1,i,o);if(B[W]*H<B[Y]*H&&R[W]*q<R[Z]*q&&z[W]*G<z[X]*G||(j=!0),j)break}if(j)break}if(j)break}return j&&(a.warn("Encountered arbitrary coordinates! Unable to input data grid."),C()),{xMin:w,yMin:A,zMin:M,xMax:_,yMax:T,zMax:k,Xs:E,Ys:I,Zs:L,len:b,fill:S}}function l(r){return a.distinctVals(r).vals}function c(r,n){if(void 0===n&&(n=r.length),a.isTypedArray(r))return r.subarray(0,n);for(var i=[],o=0;o<n;o++)i[o]=+r[o];return i}r.exports={calc:function(r,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=c(n.u,n._len),n._v=c(n.v,n._len),n._w=c(n.w,n._len),n._x=c(n.x,n._len),n._y=c(n.y,n._len),n._z=c(n.z,n._len);var i=s(n);n._gridFill=i.fill,n._Xs=i.Xs,n._Ys=i.Ys,n._Zs=i.Zs,n._len=i.len;var a,l,u,f=0;n.starts&&(a=c(n.starts.x||[]),l=c(n.starts.y||[]),u=c(n.starts.z||[]),f=Math.min(a.length,l.length,u.length)),n._startsX=a||[],n._startsY=l||[],n._startsZ=u||[];var h,p=0,d=1/0;for(h=0;h<n._len;h++){var y=n._u[h],g=n._v[h],v=n._w[h],m=Math.sqrt(y*y+g*g+v*v);p=Math.max(p,m),d=Math.min(d,m)}for(o(r,n,{vals:[d,p],containerStr:"",cLetter:"c"}),h=0;h<f;h++){var x=a[h];i.xMax=Math.max(i.xMax,x),i.xMin=Math.min(i.xMin,x);var b=l[h];i.yMax=Math.max(i.yMax,b),i.yMin=Math.min(i.yMin,b);var _=u[h];i.zMax=Math.max(i.zMax,_),i.zMin=Math.min(i.zMin,_)}n._slen=f,n._normMax=p,n._xbnds=[i.xMin,i.xMax],n._ybnds=[i.yMin,i.yMax],n._zbnds=[i.zMin,i.zMax]},filter:c,processGrid:s}},25668:function(r,n,i){var a=i(67792).gl_streamtube3d,o=a.createTubeMesh,s=i(3400),l=i(33040).parseColorScale,c=i(8932).extractOpts,u=i(52094),f={xaxis:0,yaxis:1,zaxis:2};function h(r,n){this.scene=r,this.uid=n,this.mesh=null,this.data=null}var p=h.prototype;function d(r){var n=r.length;return n>2?r.slice(1,n-1):2===n?[(r[0]+r[1])/2]:r}function y(r){var n=r.length;return 1===n?[.5,.5]:[r[1]-r[0],r[n-1]-r[n-2]]}function g(r,n){var i=r.fullSceneLayout,o=r.dataScale,h=n._len,p={};function g(r,n){var a=i[n],l=o[f[n]];return s.simpleMap(r,function(r){return a.d2l(r)*l})}if(p.vectors=u(g(n._u,"xaxis"),g(n._v,"yaxis"),g(n._w,"zaxis"),h),!h)return{positions:[],cells:[]};var v=g(n._Xs,"xaxis"),m=g(n._Ys,"yaxis"),x=g(n._Zs,"zaxis");if(p.meshgrid=[v,m,x],p.gridFill=n._gridFill,n._slen)p.startingPositions=u(g(n._startsX,"xaxis"),g(n._startsY,"yaxis"),g(n._startsZ,"zaxis"));else{for(var b=m[0],_=d(v),w=d(x),T=Array(_.length*w.length),A=0,k=0;k<_.length;k++)for(var M=0;M<w.length;M++)T[A++]=[_[k],b,w[M]];p.startingPositions=T}p.colormap=l(n),p.tubeSize=n.sizeref,p.maxLength=n.maxdisplayed;var S=g(n._xbnds,"xaxis"),E=g(n._ybnds,"yaxis"),I=g(n._zbnds,"zaxis"),L=y(v),C=y(m),O=y(x),D=a(p,[[S[0]-L[0],E[0]-C[0],I[0]-O[0]],[S[1]+L[1],E[1]+C[1],I[1]+O[1]]]),P=c(n);D.vertexIntensityBounds=[P.min/n._normMax,P.max/n._normMax];var B=n.lightposition;return D.lightPosition=[B.x,B.y,B.z],D.ambient=n.lighting.ambient,D.diffuse=n.lighting.diffuse,D.specular=n.lighting.specular,D.roughness=n.lighting.roughness,D.fresnel=n.lighting.fresnel,D.opacity=n.opacity,n._pad=D.tubeScale*n.sizeref*2,D}p.handlePick=function(r){var n=this.scene.fullSceneLayout,i=this.scene.dataScale;function a(r,a){var o=n[a],s=i[f[a]];return o.l2c(r)/s}if(r.object===this.mesh){var o=r.data.position,s=r.data.velocity;return r.traceCoordinate=[a(o[0],"xaxis"),a(o[1],"yaxis"),a(o[2],"zaxis"),a(s[0],"xaxis"),a(s[1],"yaxis"),a(s[2],"zaxis"),r.data.intensity*this.data._normMax,r.data.divergence],r.textLabel=this.data.hovertext||this.data.text,!0}},p.update=function(r){this.data=r;var n=g(this.scene,r);this.mesh.update(n)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=o(r.glplot.gl,g(r,n)),a=new h(r,n.uid);return a.mesh=i,a.data=n,i._trace=a,r.glplot.add(i),a}},54304:function(r,n,i){var a=i(3400),o=i(27260),s=i(90167);r.exports=function(r,n,i,l){function c(i,o){return a.coerce(r,n,s,i,o)}var u=c("u"),f=c("v"),h=c("w"),p=c("x"),d=c("y"),y=c("z");u&&u.length&&f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length&&y&&y.length?(c("starts.x"),c("starts.y"),c("starts.z"),c("maxdisplayed"),c("sizeref"),c("lighting.ambient"),c("lighting.diffuse"),c("lighting.specular"),c("lighting.roughness"),c("lighting.fresnel"),c("lightposition.x"),c("lightposition.y"),c("lightposition.z"),o(r,n,l,c,{prefix:"",cLetter:"c"}),c("text"),c("hovertext"),c("hovertemplate"),c("uhoverformat"),c("vhoverformat"),c("whoverformat"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),n._length=null):n.visible=!1}},15436:function(r,n,i){r.exports={moduleType:"trace",name:"streamtube",basePlotModule:i(12536),categories:["gl3d","showLegend"],attributes:i(90167),supplyDefaults:i(54304),colorbar:{min:"cmin",max:"cmax"},calc:i(3832).calc,plot:i(25668),eventData:function(r,n){return r.tubex=r.x,r.tubey=r.y,r.tubez=r.z,r.tubeu=n.traceCoordinate[3],r.tubev=n.traceCoordinate[4],r.tubew=n.traceCoordinate[5],r.norm=n.traceCoordinate[6],r.divergence=n.traceCoordinate[7],delete r.x,delete r.y,delete r.z,r},meta:{}}},424:function(r,n,i){var a=i(45464),o=i(21776).Ks,s=i(21776).Gw,l=i(49084),c=i(86968).u,u=i(74996),f=i(27328),h=i(92880).extendFlat,p=i(98192).c;r.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:h({colors:{valType:"data_array",editType:"calc"},line:{color:h({},u.marker.line.color,{dflt:null}),width:h({},u.marker.line.width,{dflt:1}),editType:"calc"},pattern:p,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:u.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:s({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:u.hovertext,hoverinfo:h({},a.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:o({},{keys:f.eventDataKeys}),textfont:u.textfont,insidetextorientation:u.insidetextorientation,insidetextfont:u.insidetextfont,outsidetextfont:h({},u.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:u.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:c({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(r,n,i){var a=i(7316);n.name="sunburst",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},3776:function(r,n,i){var a=i(74148),o=i(38248),s=i(3400),l=i(8932).makeColorScaleFuncFromTrace,c=i(45768).makePullColorFn,u=i(45768).generateExtendedColors,f=i(8932).calc,h=i(39032).ALMOST_EQUAL,p={},d={},y={};n.calc=function(r,n){var i,u,p,d,y=r._fullLayout,g=n.ids,v=s.isArrayOrTypedArray(g),m=n.labels,x=n.parents,b=n.values,_=s.isArrayOrTypedArray(b),w=[],T={},A={},k=function(r){return r||"number"==typeof r},M=function(r){return!_||o(b[r])&&b[r]>=0};v?(i=Math.min(g.length,x.length),u=function(r){return k(g[r])&&M(r)},p=function(r){return String(g[r])}):(i=Math.min(m.length,x.length),u=function(r){return k(m[r])&&M(r)},p=function(r){return String(m[r])}),_&&(i=Math.min(i,b.length));for(var S=0;S<i;S++)if(u(S)){var E=p(S),I=k(x[S])?String(x[S]):"",L={i:S,id:E,pid:I,label:k(m[S])?String(m[S]):""};_&&(L.v=+b[S]),w.push(L),T[I]?T[I].push(E):T[I]=[E],A[E]=1}if(T[""]){if(T[""].length>1){for(var C=s.randstr(),O=0;O<w.length;O++)""===w[O].pid&&(w[O].pid=C);w.unshift({hasMultipleRoots:!0,id:C,pid:"",label:""})}}else{var D,P=[];for(D in T)A[D]||P.push(D);if(1!==P.length)return s.warn(["Multiple implied roots, cannot build",n.type,"hierarchy of",n.name+".","These roots include:",P.join(", ")].join(" "));D=P[0],w.unshift({hasImpliedRoot:!0,id:D,pid:"",label:D})}try{d=a.stratify().id(function(r){return r.id}).parentId(function(r){return r.pid})(w)}catch(r){return s.warn(["Failed to build",n.type,"hierarchy of",n.name+".","Error:",r.message].join(" "))}var B=a.hierarchy(d),R=!1;if(_)switch(n.branchvalues){case"remainder":B.sum(function(r){return r.data.v});break;case"total":B.each(function(r){var i=r.data.data,a=i.v;if(r.children){var o=r.children.reduce(function(r,n){return r+n.data.data.v},0);if((i.hasImpliedRoot||i.hasMultipleRoots)&&(a=o),a<o*h)return R=!0,s.warn(["Total value for node",r.data.data.id,"of",n.name,"is smaller than the sum of its children.","\nparent value =",a,"\nchildren sum =",o].join(" "))}r.value=a})}else(function r(n,i,a){var o=0,s=n.children;if(s){for(var l=s.length,c=0;c<l;c++)o+=r(s[c],i,a);a.branches&&o++}else a.leaves&&o++;return n.value=n.data.data.value=o,i._values||(i._values=[]),i._values[n.data.data.i]=o,o})(B,n,{branches:-1!==n.count.indexOf("branches"),leaves:-1!==n.count.indexOf("leaves")});if(!R){n.sort&&B.sort(function(r,n){return n.value-r.value});var z,F,N=n.marker.colors||[],U=!!N.length;return n._hasColorscale?(U||(N=_?n.values:n._values),f(r,n,{vals:N,containerStr:"marker",cLetter:"c"}),F=l(n.marker)):z=c(y["_"+n.type+"colormap"]),B.each(function(r){var i=r.data.data;i.color=n._hasColorscale?F(N[i.i]):z(N[i.i],i.id)}),w[0].hierarchy=B,w}},n._runCrossTraceCalc=function(r,n){var i=n._fullLayout,a=n.calcdata,o=i[r+"colorway"],s=i["_"+r+"colormap"];i["extend"+r+"colors"]&&(o=u(o,"icicle"===r?y:"treemap"===r?d:p));var l,c=0;function f(r){var n=r.data.data,i=n.id;!1===n.color&&(s[i]?n.color=s[i]:r.parent?r.parent.parent?n.color=r.parent.data.data.color:(s[i]=n.color=o[c%o.length],c++):n.color=l)}for(var h=0;h<a.length;h++){var g=a[h][0];g.trace.type===r&&g.hierarchy&&(l=g.trace.root.color,g.hierarchy.each(f))}},n.crossTraceCalc=function(r){return n._runCrossTraceCalc("sunburst",r)}},27328:function(r){r.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(r,n,i){var a=i(3400),o=i(424),s=i(86968).Q,l=i(31508).handleText,c=i(74174).handleMarkerDefaults,u=i(8932),f=u.hasColorscale,h=u.handleDefaults;r.exports=function(r,n,i,u){function p(i,s){return a.coerce(r,n,o,i,s)}var d=p("labels"),y=p("parents");if(d&&d.length&&y&&y.length){var g=p("values");p(g&&g.length?"branchvalues":"count"),p("level"),p("maxdepth"),c(r,n,u,p);var v=n._hasColorscale=f(r,"marker","colors")||(r.marker||{}).coloraxis;v&&h(r,n,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",v?1:.7);var m=p("text");p("texttemplate"),n.texttemplate||p("textinfo",a.isArrayOrTypedArray(m)?"text+label":"label"),p("hovertext"),p("hovertemplate"),l(r,n,u,p,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),s(n,u,p),n._length=null}else n.visible=!1}},60404:function(r,n,i){var a=i(43616),o=i(76308);r.exports=function(r,n,i,s,l){var c=n.data.data,u=c.i,f=l||c.color;if(u>=0){n.i=c.i;var h=i.marker;h.pattern&&h.colors&&h.pattern.shape||(h.color=f,n.color=f),a.pointStyle(r,i,s,n)}else o.fill(r,f)}},45716:function(r,n,i){var a=i(33428),o=i(24040),s=i(10624).appendArrayPointValue,l=i(93024),c=i(3400),u=i(95924),f=i(78176),h=i(69656).formatPieValue;function p(r,n,i){for(var a=r.data.data,o={curveNumber:n.index,pointNumber:a.i,data:n._input,fullData:n},l=0;l<i.length;l++){var c=i[l];c in r&&(o[c]=r[c])}return"parentString"in r&&!f.isHierarchyRoot(r)&&(o.parent=r.parentString),s(o,n,a.i),o}r.exports=function(r,n,i,s,d){var y=s[0],g=y.trace,v=y.hierarchy,m="sunburst"===g.type,x="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),r.on("mouseover",function(o){var s=i._fullLayout;if(!i._dragging&&!1!==s.hovermode){var u,b=i._fullData[g.index],_=o.data.data,w=_.i,T=f.isHierarchyRoot(o),A=f.getParent(v,o),k=f.getValue(o),M=function(r){return c.castOption(b,w,r)},S=M("hovertemplate"),E=l.castHoverinfo(b,s,w),I=s.separators;if(S||E&&"none"!==E&&"skip"!==E){m&&(L=y.cx+o.pxmid[0]*(1-o.rInscribed),C=y.cy+o.pxmid[1]*(1-o.rInscribed)),x&&(L=o._hoverX,C=o._hoverY);var L,C,O,D={},P=[],B=[],R=function(r){return -1!==P.indexOf(r)};E&&(P="all"===E?b._module.attributes.hoverinfo.flags:E.split("+")),D.label=_.label,R("label")&&D.label&&B.push(D.label),_.hasOwnProperty("v")&&(D.value=_.v,D.valueLabel=h(D.value,I),R("value")&&B.push(D.valueLabel)),D.currentPath=o.currentPath=f.getPath(o.data),R("current path")&&!T&&B.push(D.currentPath);var z=[],F=function(){-1===z.indexOf(O)&&(B.push(O),z.push(O))};D.percentParent=o.percentParent=k/f.getValue(A),D.parent=o.parentString=f.getPtLabel(A),R("percent parent")&&(O=f.formatPercent(D.percentParent,I)+" of "+D.parent,F()),D.percentEntry=o.percentEntry=k/f.getValue(n),D.entry=o.entry=f.getPtLabel(n),!R("percent entry")||T||o.onPathbar||(O=f.formatPercent(D.percentEntry,I)+" of "+D.entry,F()),D.percentRoot=o.percentRoot=k/f.getValue(v),D.root=o.root=f.getPtLabel(v),R("percent root")&&!T&&(O=f.formatPercent(D.percentRoot,I)+" of "+D.root,F()),D.text=M("hovertext")||M("text"),R("text")&&(O=D.text,c.isValidTextValue(O)&&B.push(O)),u=[p(o,b,d.eventDataKeys)];var N={trace:b,y:C,_x0:o._x0,_x1:o._x1,_y0:o._y0,_y1:o._y1,text:B.join("<br>"),name:S||R("name")?b.name:void 0,color:M("hoverlabel.bgcolor")||_.color,borderColor:M("hoverlabel.bordercolor"),fontFamily:M("hoverlabel.font.family"),fontSize:M("hoverlabel.font.size"),fontColor:M("hoverlabel.font.color"),fontWeight:M("hoverlabel.font.weight"),fontStyle:M("hoverlabel.font.style"),fontVariant:M("hoverlabel.font.variant"),nameLength:M("hoverlabel.namelength"),textAlign:M("hoverlabel.align"),hovertemplate:S,hovertemplateLabels:D,eventData:u};m&&(N.x0=L-o.rInscribed*o.rpx1,N.x1=L+o.rInscribed*o.rpx1,N.idealAlign=o.pxmid[0]<0?"left":"right"),x&&(N.x=L,N.idealAlign=L<0?"left":"right");var U=[];l.loneHover(N,{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i,inOut_bbox:U}),u[0].bbox=U[0],g._hasHoverLabel=!0}if(x){var j=r.select("path.surface");d.styleOne(j,o,b,i,{hovered:!0})}g._hasHoverEvent=!0,i.emit("plotly_hover",{points:u||[p(o,b,d.eventDataKeys)],event:a.event})}}),r.on("mouseout",function(n){var o=i._fullLayout,s=i._fullData[g.index],c=a.select(this).datum();if(g._hasHoverEvent&&(n.originalEvent=a.event,i.emit("plotly_unhover",{points:[p(c,s,d.eventDataKeys)],event:a.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(l.loneUnhover(o._hoverlayer.node()),g._hasHoverLabel=!1),x){var u=r.select("path.surface");d.styleOne(u,c,s,i,{hovered:!1})}}),r.on("click",function(r){var n=i._fullLayout,s=i._fullData[g.index],c=m&&(f.isHierarchyRoot(r)||f.isLeaf(r)),h=f.getPtId(r),y=f.isEntry(r)?f.findEntryWithChild(v,h):f.findEntryWithLevel(v,h),x=f.getPtId(y),b={points:[p(r,s,d.eventDataKeys)],event:a.event};c||(b.nextLevel=x);var _=u.triggerHandler(i,"plotly_"+g.type+"click",b);if(!1!==_&&n.hovermode&&(i._hoverdata=[p(r,s,d.eventDataKeys)],l.click(i,a.event)),!c&&!1!==_&&!i._dragging&&!i._transitioning){o.call("_storeDirectGUIEdit",s,n._tracePreGUI[s.uid],{level:s.level});var w={data:[{level:x}],traces:[g.index]},T={frame:{redraw:!1,duration:d.transitionTime},transition:{duration:d.transitionTime,easing:d.transitionEasing},mode:"immediate",fromcurrent:!0};l.loneUnhover(n._hoverlayer.node()),o.call("animate",i,w,T)}})}},78176:function(r,n,i){var a=i(3400),o=i(76308),s=i(93972),l=i(69656);function c(r){return r.data.data.pid}n.findEntryWithLevel=function(r,i){var a;return i&&r.eachAfter(function(r){if(n.getPtId(r)===i)return a=r.copy()}),a||r},n.findEntryWithChild=function(r,i){var a;return r.eachAfter(function(r){for(var o=r.children||[],s=0;s<o.length;s++){var l=o[s];if(n.getPtId(l)===i)return a=r.copy()}}),a||r},n.isEntry=function(r){return!r.parent},n.isLeaf=function(r){return!r.children},n.getPtId=function(r){return r.data.data.id},n.getPtLabel=function(r){return r.data.data.label},n.getValue=function(r){return r.value},n.isHierarchyRoot=function(r){return""===c(r)},n.setSliceCursor=function(r,i,a){var o=a.isTransitioning;if(!o){var l=r.datum();o=a.hideOnRoot&&n.isHierarchyRoot(l)||a.hideOnLeaves&&n.isLeaf(l)}s(r,o?null:"pointer")},n.getInsideTextFontKey=function(r,n,i,o,s){var l=(s||{}).onPathbar?"pathbar.textfont":"insidetextfont",c=i.data.data.i;return a.castOption(n,c,l+"."+r)||a.castOption(n,c,"textfont."+r)||o.size},n.getOutsideTextFontKey=function(r,n,i,o){var s=i.data.data.i;return a.castOption(n,s,"outsidetextfont."+r)||a.castOption(n,s,"textfont."+r)||o.size},n.isOutsideText=function(r,i){return!r._hasColorscale&&n.isHierarchyRoot(i)},n.determineTextFont=function(r,i,s,l){var c,u,f,h;return n.isOutsideText(r,i)?{color:n.getOutsideTextFontKey("color",r,i,s),family:n.getOutsideTextFontKey("family",r,i,s),size:n.getOutsideTextFontKey("size",r,i,s),weight:n.getOutsideTextFontKey("weight",r,i,s),style:n.getOutsideTextFontKey("style",r,i,s),variant:n.getOutsideTextFontKey("variant",r,i,s),textcase:n.getOutsideTextFontKey("textcase",r,i,s),lineposition:n.getOutsideTextFontKey("lineposition",r,i,s),shadow:n.getOutsideTextFontKey("shadow",r,i,s)}:(c=(l||{}).onPathbar,f=(u=i.data.data).i,(h=a.castOption(r,f,(c?"pathbar.textfont":"insidetextfont")+".color"))||!r._input.textfont||(h=a.castOption(r._input,f,"textfont.color")),{color:h||o.contrast(u.color),family:n.getInsideTextFontKey("family",r,i,s,l),size:n.getInsideTextFontKey("size",r,i,s,l),weight:n.getInsideTextFontKey("weight",r,i,s,l),style:n.getInsideTextFontKey("style",r,i,s,l),variant:n.getInsideTextFontKey("variant",r,i,s,l),textcase:n.getInsideTextFontKey("textcase",r,i,s,l),lineposition:n.getInsideTextFontKey("lineposition",r,i,s,l),shadow:n.getInsideTextFontKey("shadow",r,i,s,l)})},n.hasTransition=function(r){return!!(r&&r.duration>0)},n.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},n.isHeader=function(r,i){return!(n.isLeaf(r)||r.depth===i._maxDepth-1)},n.getParent=function(r,i){return n.findEntryWithLevel(r,c(i))},n.listPath=function(r,i){var a=r.parent;if(!a)return[];var o=i?[a.data[i]]:[a];return n.listPath(a,i).concat(o)},n.getPath=function(r){return n.listPath(r,"label").join("/")+"/"},n.formatValue=l.formatPieValue,n.formatPercent=function(r,n){var i=a.formatPercent(r,0);return"0%"===i&&(i=l.formatPiePercent(r,n)),i}},5621:function(r,n,i){r.exports={moduleType:"trace",name:"sunburst",basePlotModule:i(54904),categories:[],animatable:!0,attributes:i(424),layoutAttributes:i(84920),supplyDefaults:i(25244),supplyLayoutDefaults:i(28732),calc:i(3776).calc,crossTraceCalc:i(3776).crossTraceCalc,plot:i(96488).plot,style:i(85676).style,colorbar:i(5528),meta:{}}},84920:function(r){r.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(r,n,i){var a=i(3400),o=i(84920);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("sunburstcolorway",n.colorway),i("extendsunburstcolors")}},96488:function(r,n,i){var a=i(33428),o=i(74148),s=i(67756).qy,l=i(43616),c=i(3400),u=i(72736),f=i(82744),h=f.recordMinTextSize,p=f.clearMinTextSize,d=i(37820),y=i(69656).getRotationAngle,g=d.computeTransform,v=d.transformInsideText,m=i(85676).styleOne,x=i(60100).resizeText,b=i(45716),_=i(27328),w=i(78176);function T(r,i,f,p){var d=r._context.staticPlot,x=r._fullLayout,T=!x.uniformtext.mode&&w.hasTransition(p),k=a.select(f).selectAll("g.slice"),M=i[0],S=M.trace,E=M.hierarchy,I=w.findEntryWithLevel(E,S.level),L=w.getMaxDepth(S),C=x._size,O=S.domain,D=C.w*(O.x[1]-O.x[0]),P=C.h*(O.y[1]-O.y[0]),B=.5*Math.min(D,P),R=M.cx=C.l+C.w*(O.x[1]+O.x[0])/2,z=M.cy=C.t+C.h*(1-O.y[0])-P/2;if(!I)return k.remove();var F=null,N={};T&&k.each(function(r){N[w.getPtId(r)]={rpx0:r.rpx0,rpx1:r.rpx1,x0:r.x0,x1:r.x1,transform:r.transform},!F&&w.isEntry(r)&&(F=r)});var U=o.partition().size([2*Math.PI,I.height+1])(I).descendants(),j=I.height+1,V=0,H=L;M.hasMultipleRoots&&w.isHierarchyRoot(I)&&(U=U.slice(1),j-=1,V=1,H+=1),U=U.filter(function(r){return r.y1<=H});var q=y(S.rotation);q&&U.forEach(function(r){r.x0+=q,r.x1+=q});var G=Math.min(j,L),W=function(r){return(r-V)/G*B},Y=function(r,n){return[r*Math.cos(n),-r*Math.sin(n)]},Z=function(r){return c.pathAnnulus(r.rpx0,r.rpx1,r.x0,r.x1,R,z)},X=function(r){return R+A(r)[0]*(r.transform.rCenter||0)+(r.transform.x||0)},K=function(r){return z+A(r)[1]*(r.transform.rCenter||0)+(r.transform.y||0)};(k=k.data(U,w.getPtId)).enter().append("g").classed("slice",!0),T?k.exit().transition().each(function(){var r=a.select(this);r.select("path.surface").transition().attrTween("d",function(r){var n=function(r){var n,i=w.getPtId(r),a=N[i],o=N[w.getPtId(I)];if(o){var l=(r.x1>o.x1?2*Math.PI:0)+q;n=r.rpx1<o.rpx1?{x0:r.x0,x1:r.x1,rpx0:0,rpx1:0}:{x0:l,x1:l,rpx0:r.rpx0,rpx1:r.rpx1}}else{var c,u=w.getPtId(r.parent);k.each(function(r){if(w.getPtId(r)===u)return c=r});var f,h=c.children;h.forEach(function(r,n){if(w.getPtId(r)===i)return f=n});var p=h.length,d=s(c.x0,c.x1);n={rpx0:B,rpx1:B,x0:d(f/p),x1:d((f+1)/p)}}return s(a,n)}(r);return function(r){return Z(n(r))}}),r.select("g.slicetext").attr("opacity",0)}).remove():k.exit().remove(),k.order();var J=null;if(T&&F){var $=w.getPtId(F);k.each(function(r){null===J&&w.getPtId(r)===$&&(J=r.x1)})}var Q=k;function tt(r){var n=r.parent,i=N[w.getPtId(n)],a={};if(i){var o=n.children,l=o.indexOf(r),c=o.length,u=s(i.x0,i.x1);a.x0=u(l/c),a.x1=u(l/c)}else a.x0=a.x1=0;return a}T&&(Q=Q.transition().each("end",function(){var n=a.select(this);w.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Q.each(function(o){var f=a.select(this),p=c.ensureSingle(f,"path","surface",function(r){r.style("pointer-events",d?"none":"all")});o.rpx0=W(o.y0),o.rpx1=W(o.y1),o.xmid=(o.x0+o.x1)/2,o.pxmid=Y(o.rpx1,o.xmid),o.midangle=-(o.xmid-Math.PI/2),o.startangle=-(o.x0-Math.PI/2),o.stopangle=-(o.x1-Math.PI/2),o.halfangle=.5*Math.min(c.angleDelta(o.x0,o.x1)||Math.PI,Math.PI),o.ring=1-o.rpx0/o.rpx1,o.rInscribed=0===o.rpx0&&c.isFullCircle([o.x0,o.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(o.halfangle)),o.ring/2)),T?p.transition().attrTween("d",function(r){var n=function(r){var n,i=N[w.getPtId(r)],a={x0:r.x0,x1:r.x1,rpx0:r.rpx0,rpx1:r.rpx1};if(i)n=i;else if(F){if(r.parent){if(J){var o=(r.x1>J?2*Math.PI:0)+q;n={x0:o,x1:o}}else n={rpx0:B,rpx1:B},c.extendFlat(n,tt(r))}else n={rpx0:0,rpx1:0}}else n={x0:q,x1:q};return s(n,a)}(r);return function(r){return Z(n(r))}}):p.attr("d",Z),f.call(b,I,r,i,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(w.setSliceCursor,r,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:r._transitioning}),p.call(m,o,S,r);var y=c.ensureSingle(f,"g","slicetext"),A=c.ensureSingle(y,"text","",function(r){r.attr("data-notex",1)}),k=c.ensureUniformFontSize(r,w.determineTextFont(S,o,x.font));A.text(n.formatSliceLabel(o,I,S,i,x)).classed("slicetext",!0).attr("text-anchor","middle").call(l.font,k).call(u.convertToTspans,r);var E=l.bBox(A.node());o.transform=v(E,o,M),o.transform.targetX=X(o),o.transform.targetY=K(o);var L=function(r,n){var i=r.transform;return g(i,n),i.fontSize=k.size,h(S.type,i,x),c.getTextTransform(i)};T?A.transition().attrTween("transform",function(r){var n=function(r){var n,i=N[w.getPtId(r)],a=r.transform;if(i)n=i;else if(n={rpx1:r.rpx1,transform:{textPosAngle:a.textPosAngle,scale:0,rotate:a.rotate,rCenter:a.rCenter,x:a.x,y:a.y}},F){if(r.parent){if(J){var o=r.x1>J?2*Math.PI:0;n.x0=n.x1=o}else c.extendFlat(n,tt(r))}else n.x0=n.x1=q}else n.x0=n.x1=q;var l=s(n.transform.textPosAngle,r.transform.textPosAngle),u=s(n.rpx1,r.rpx1),f=s(n.x0,r.x0),p=s(n.x1,r.x1),d=s(n.transform.scale,a.scale),y=s(n.transform.rotate,a.rotate),g=0===a.rCenter?3:0===n.transform.rCenter?1/3:1,v=s(n.transform.rCenter,a.rCenter);return function(r){var n=u(r),i=f(r),o=p(r),s=v(Math.pow(r,g)),c={pxmid:Y(n,(i+o)/2),rpx1:n,transform:{textPosAngle:l(r),rCenter:s,x:a.x,y:a.y}};return h(S.type,a,x),{transform:{targetX:X(c),targetY:K(c),scale:d(r),rotate:y(r),rCenter:s}}}}(r);return function(r){return L(n(r),E)}}):A.attr("transform",L(o,E))})}function A(r){var n,i;return[(n=r.rpx1)*Math.sin(i=r.transform.textPosAngle),-n*Math.cos(i)]}n.plot=function(r,n,i,o){var s,l,c=r._fullLayout,u=c._sunburstlayer,f=!i,h=!c.uniformtext.mode&&w.hasTransition(i);p("sunburst",c),(s=u.selectAll("g.trace.sunburst").data(n,function(r){return r[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),s.order(),h?(o&&(l=o()),a.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){u.selectAll("g.trace").each(function(n){T(r,n,this,i)})})):(s.each(function(n){T(r,n,this,i)}),c.uniformtext.mode&&x(r,c._sunburstlayer.selectAll(".trace"),"sunburst")),f&&s.exit().remove()},n.formatSliceLabel=function(r,n,i,a,o){var s=i.texttemplate,l=i.textinfo;if(!(s||l&&"none"!==l))return"";var u=o.separators,f=a[0],h=r.data.data,p=f.hierarchy,d=w.isHierarchyRoot(r),y=w.getParent(p,r),g=w.getValue(r);if(!s){var v,m=l.split("+"),x=function(r){return -1!==m.indexOf(r)},b=[];if(x("label")&&h.label&&b.push(h.label),h.hasOwnProperty("v")&&x("value")&&b.push(w.formatValue(h.v,u)),!d){x("current path")&&b.push(w.getPath(r.data));var _=0;x("percent parent")&&_++,x("percent entry")&&_++,x("percent root")&&_++;var T=_>1;if(_){var A,k=function(r){v=w.formatPercent(A,u),T&&(v+=" of "+r),b.push(v)};x("percent parent")&&!d&&(A=g/w.getValue(y),k("parent")),x("percent entry")&&(A=g/w.getValue(n),k("entry")),x("percent root")&&(A=g/w.getValue(p),k("root"))}}return x("text")&&(v=c.castOption(i,h.i,"text"),c.isValidTextValue(v)&&b.push(v)),b.join("<br>")}var M=c.castOption(i,h.i,"texttemplate");if(!M)return"";var S={};h.label&&(S.label=h.label),h.hasOwnProperty("v")&&(S.value=h.v,S.valueLabel=w.formatValue(h.v,u)),S.currentPath=w.getPath(r.data),d||(S.percentParent=g/w.getValue(y),S.percentParentLabel=w.formatPercent(S.percentParent,u),S.parent=w.getPtLabel(y)),S.percentEntry=g/w.getValue(n),S.percentEntryLabel=w.formatPercent(S.percentEntry,u),S.entry=w.getPtLabel(n),S.percentRoot=g/w.getValue(p),S.percentRootLabel=w.formatPercent(S.percentRoot,u),S.root=w.getPtLabel(p),h.hasOwnProperty("color")&&(S.color=h.color);var E=c.castOption(i,h.i,"text");return(c.isValidTextValue(E)||""===E)&&(S.text=E),S.customdata=c.castOption(i,h.i,"customdata"),c.texttemplateString(M,S,o._d3locale,S,i._meta||{})}},85676:function(r,n,i){var a=i(33428),o=i(76308),s=i(3400),l=i(82744).resizeText,c=i(60404);function u(r,n,i,a){var l=n.data.data,u=!n.children,f=l.i,h=s.castOption(i,f,"marker.line.color")||o.defaultLine,p=s.castOption(i,f,"marker.line.width")||0;r.call(c,n,i,a).style("stroke-width",p).call(o.stroke,h).style("opacity",u?i.leaf.opacity:null)}r.exports={style:function(r){var n=r._fullLayout._sunburstlayer.selectAll(".trace");l(r,n,"sunburst"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(u,n,o,r)})})},styleOne:u}},16716:function(r,n,i){var a=i(76308),o=i(49084),s=i(29736).axisHoverFormat,l=i(21776).Ks,c=i(45464),u=i(92880).extendFlat,f=i(67824).overrideAll;function h(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:a.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:a.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var p=r.exports=f(u({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},o("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:h(),y:h(),z:h()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:u({},o.zauto,{}),zmin:u({},o.zmin,{}),zmax:u({},o.zmax,{})},hoverinfo:u({},c.hoverinfo),showlegend:u({},c.showlegend,{dflt:!1})}),"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes",p.transforms=void 0},56576:function(r,n,i){var a=i(47128);r.exports=function(r,n){n.surfacecolor?a(r,n,{vals:n.surfacecolor,containerStr:"",cLetter:"c"}):a(r,n,{vals:n.z,containerStr:"",cLetter:"c"})}},79164:function(r,n,i){var a=i(67792).gl_surface3d,o=i(67792).ndarray,s=i(67792).ndarray_linear_interpolate.d2,l=i(70448),c=i(11240),u=i(3400).isArrayOrTypedArray,f=i(33040).parseColorScale,h=i(43080),p=i(8932).extractOpts;function d(r,n,i){this.scene=r,this.uid=i,this.surface=n,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var y=d.prototype;y.getXat=function(r,n,i,a){var o=u(this.data.x)?u(this.data.x[0])?this.data.x[n][r]:this.data.x[r]:r;return void 0===i?o:a.d2l(o,0,i)},y.getYat=function(r,n,i,a){var o=u(this.data.y)?u(this.data.y[0])?this.data.y[n][r]:this.data.y[n]:n;return void 0===i?o:a.d2l(o,0,i)},y.getZat=function(r,n,i,a){var o=this.data.z[n][r];return null===o&&this.data.connectgaps&&this.data._interpolatedZ&&(o=this.data._interpolatedZ[n][r]),void 0===i?o:a.d2l(o,0,i)},y.handlePick=function(r){if(r.object===this.surface){var n=(r.data.index[0]-1)/this.dataScaleX-1,i=(r.data.index[1]-1)/this.dataScaleY-1,a=Math.max(Math.min(Math.round(n),this.data.z[0].length-1),0),o=Math.max(Math.min(Math.round(i),this.data._ylength-1),0);r.index=[a,o],r.traceCoordinate=[this.getXat(a,o),this.getYat(a,o),this.getZat(a,o)],r.dataCoordinate=[this.getXat(a,o,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(a,o,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(a,o,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var s=0;s<3;s++)null!=r.dataCoordinate[s]&&(r.dataCoordinate[s]*=this.scene.dataScale[s]);var l=this.data.hovertext||this.data.text;return u(l)&&l[o]&&void 0!==l[o][a]?r.textLabel=l[o][a]:r.textLabel=l||"",r.data.dataCoordinate=r.dataCoordinate.slice(),this.surface.highlight(r.data),this.scene.glplot.spikes.position=r.dataCoordinate,!0}};var g=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function v(r){for(var n=[],i=0;i<g.length;i++){var a=g[i];n.push(function(r,n){if(r<n)return 0;for(var i=0;0===Math.floor(r%n);)r/=n,i++;return i}(r,a))}return n}function m(r,n,i){var a=i[8]+i[2]*n[0]+i[5]*n[1];return r[0]=(i[6]+i[0]*n[0]+i[3]*n[1])/a,r[1]=(i[7]+i[1]*n[0]+i[4]*n[1])/a,r}y.calcXnums=function(r){var n,i=[];for(n=1;n<r;n++){var a=this.getXat(n-1,0),o=this.getXat(n,0);i[n-1]=o!==a&&null!=a&&null!=o?Math.abs(o-a):0}var s=0;for(n=1;n<r;n++)s+=i[n-1];for(n=1;n<r;n++)0===i[n-1]?i[n-1]=1:i[n-1]=Math.round(s/i[n-1]);return i},y.calcYnums=function(r){var n,i=[];for(n=1;n<r;n++){var a=this.getYat(0,n-1),o=this.getYat(0,n);i[n-1]=o!==a&&null!=a&&null!=o?Math.abs(o-a):0}var s=0;for(n=1;n<r;n++)s+=i[n-1];for(n=1;n<r;n++)0===i[n-1]?i[n-1]=1:i[n-1]=Math.round(s/i[n-1]);return i},y.estimateScale=function(r,n){for(var i=1+function(r){if(0!==r.length){for(var n=1,i=0;i<r.length;i++)n=function(r,n){if(!(r<1||n<1)){for(var i=v(r),a=v(n),o=1,s=0;s<g.length;s++)o*=Math.pow(g[s],Math.max(i[s],a[s]));return o}}(n,r[i]);return n}}(0===n?this.calcXnums(r):this.calcYnums(r));i<120;)i*=2;for(;i>720;)i--,i/=function(r){for(var n=v(r),i=r,a=0;a<g.length;a++)if(n[a]>0){i=g[a];break}return i}(i),++i<120&&(i=720);var a=Math.round(i/r);return a>1?a:1},y.refineCoords=function(r){for(var n=this.dataScaleX,i=this.dataScaleY,a=r[0].shape[0],l=r[0].shape[1],c=0|Math.floor(r[0].shape[0]*n+1),u=0|Math.floor(r[0].shape[1]*i+1),f=1+a+1,h=1+l+1,p=o(new Float32Array(f*h),[f,h]),d=[1/n,0,0,0,1/i,0,0,0,1],y=0;y<r.length;++y){this.surface.padField(p,r[y]);var g=o(new Float32Array(c*u),[c,u]);(function(r,n,i,a){for(var o=[0,0],l=r.shape[0],c=r.shape[1],u=0;u<l;u++)for(var f=0;f<c;f++)i(o,[u,f],a),r.set(u,f,s(n,o[0],o[1]))})(g,p,m,d),r[y]=g}},y.setContourLevels=function(){var r,n,i,a=[[],[],[]],o=[!1,!1,!1],s=!1;for(r=0;r<3;++r)if(this.showContour[r]&&(s=!0,this.contourSize[r]>0&&null!==this.contourStart[r]&&null!==this.contourEnd[r]&&this.contourEnd[r]>this.contourStart[r]))for(o[r]=!0,n=this.contourStart[r];n<this.contourEnd[r];n+=this.contourSize[r])i=n*this.scene.dataScale[r],function(r,n){for(var i=!1,a=0;a<r.length;a++)if(n===r[a]){i=!0;break}!1===i&&r.push(n)}(a[r],i);if(s){var l=[[],[],[]];for(r=0;r<3;++r)this.showContour[r]&&(l[r]=o[r]?a[r]:this.scene.contourLevels[r]);this.surface.update({levels:l})}},y.update=function(r){var n,i,a,s,u,d,y=this.scene,g=y.fullSceneLayout,v=this.surface,m=f(r),x=y.dataScale,b=r.z[0].length,_=r._ylength,w=y.contourLevels;this.data=r;var T=[];for(a=0;a<3;a++)for(T[a]=[],s=0;s<b;s++)T[a][s]=[];for(s=0;s<b;s++)for(u=0;u<_;u++)T[0][s][u]=this.getXat(s,u,r.xcalendar,g.xaxis),T[1][s][u]=this.getYat(s,u,r.ycalendar,g.yaxis),T[2][s][u]=this.getZat(s,u,r.zcalendar,g.zaxis);if(r.connectgaps)for(r._emptypoints=c(T[2]),l(T[2],r._emptypoints),r._interpolatedZ=[],s=0;s<b;s++)for(r._interpolatedZ[s]=[],u=0;u<_;u++)r._interpolatedZ[s][u]=T[2][s][u];for(a=0;a<3;a++)for(s=0;s<b;s++)for(u=0;u<_;u++)null==(d=T[a][s][u])?T[a][s][u]=NaN:d=T[a][s][u]*=x[a];for(a=0;a<3;a++)for(s=0;s<b;s++)for(u=0;u<_;u++)null!=(d=T[a][s][u])&&(this.minValues[a]>d&&(this.minValues[a]=d),this.maxValues[a]<d&&(this.maxValues[a]=d));for(a=0;a<3;a++)this.objectOffset[a]=.5*(this.minValues[a]+this.maxValues[a]);for(a=0;a<3;a++)for(s=0;s<b;s++)for(u=0;u<_;u++)null!=(d=T[a][s][u])&&(T[a][s][u]-=this.objectOffset[a]);var A=[o(new Float32Array(b*_),[b,_]),o(new Float32Array(b*_),[b,_]),o(new Float32Array(b*_),[b,_])];for(a=0;a<3;a++)for(s=0;s<b;s++)for(u=0;u<_;u++)A[a].set(s,u,T[a][s][u]);T=[];var k={colormap:m,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!r.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:r.opacityscale,opacity:r.opacity},M=p(r);if(k.intensityBounds=[M.min,M.max],r.surfacecolor){var S=o(new Float32Array(b*_),[b,_]);for(s=0;s<b;s++)for(u=0;u<_;u++)S.set(s,u,r.surfacecolor[u][s]);A.push(S)}else k.intensityBounds[0]*=x[2],k.intensityBounds[1]*=x[2];(720<A[0].shape[0]||720<A[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(A[0].shape[0],0),this.dataScaleY=this.estimateScale(A[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(A)),r.surfacecolor&&(k.intensity=A.pop());var E=[!0,!0,!0],I=["x","y","z"];for(a=0;a<3;++a){var L=r.contours[I[a]];E[a]=L.highlight,k.showContour[a]=L.show||L.highlight,k.showContour[a]&&(k.contourProject[a]=[L.project.x,L.project.y,L.project.z],L.show?(this.showContour[a]=!0,k.levels[a]=w[a],v.highlightColor[a]=k.contourColor[a]=h(L.color),L.usecolormap?v.highlightTint[a]=k.contourTint[a]=0:v.highlightTint[a]=k.contourTint[a]=1,k.contourWidth[a]=L.width,this.contourStart[a]=L.start,this.contourEnd[a]=L.end,this.contourSize[a]=L.size):(this.showContour[a]=!1,this.contourStart[a]=null,this.contourEnd[a]=null,this.contourSize[a]=0),L.highlight&&(k.dynamicColor[a]=h(L.highlightcolor),k.dynamicWidth[a]=L.highlightwidth))}n=m[0].rgb,i=m[m.length-1].rgb,n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&(k.vertexColor=!0),k.objectOffset=this.objectOffset,k.coords=A,v.update(k),v.visible=r.visible,v.enableDynamic=E,v.enableHighlight=E,v.snapToData=!0,"lighting"in r&&(v.ambientLight=r.lighting.ambient,v.diffuseLight=r.lighting.diffuse,v.specularLight=r.lighting.specular,v.roughness=r.lighting.roughness,v.fresnel=r.lighting.fresnel),"lightposition"in r&&(v.lightPosition=[r.lightposition.x,r.lightposition.y,r.lightposition.z])},y.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new d(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},60192:function(r,n,i){var a=i(24040),o=i(3400),s=i(27260),l=i(16716);function c(r,n,i,a){var o=a("opacityscale");"max"===o?n.opacityscale=[[0,.1],[1,1]]:"min"===o?n.opacityscale=[[0,1],[1,.1]]:"extremes"===o?n.opacityscale=function(r,n){for(var i=[],a=0;a<32;a++){var o=a/31,s=.1+.9*(1-Math.pow(Math.sin(1*o*Math.PI),2));i.push([o,Math.max(0,Math.min(1,s))])}return i}():function(r){var n=0;if(!Array.isArray(r)||r.length<2||!r[0]||!r[r.length-1]||0!=+r[0][0]||1!=+r[r.length-1][0])return!1;for(var i=0;i<r.length;i++){var a=r[i];if(2!==a.length||+a[0]<n)return!1;n=+a[0]}return!0}(o)||(n.opacityscale=void 0)}function u(r,n,i){n in r&&!(i in r)&&(r[i]=r[n])}r.exports={supplyDefaults:function(r,n,i,f){function h(i,a){return o.coerce(r,n,l,i,a)}var p,d,y=h("x"),g=h("y"),v=h("z");if(!v||!v.length||y&&y.length<1||g&&g.length<1)n.visible=!1;else{n._xlength=Array.isArray(y)&&o.isArrayOrTypedArray(y[0])?v.length:v[0].length,n._ylength=v.length,a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],f),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(r){h(r)});var m=h("surfacecolor"),x=["x","y","z"];for(p=0;p<3;++p){var b="contours."+x[p],_=h(b+".show"),w=h(b+".highlight");if(_||w)for(d=0;d<3;++d)h(b+".project."+x[d]);_&&(h(b+".color"),h(b+".width"),h(b+".usecolormap")),w&&(h(b+".highlightcolor"),h(b+".highlightwidth")),h(b+".start"),h(b+".end"),h(b+".size")}m||(u(r,"zmin","cmin"),u(r,"zmax","cmax"),u(r,"zauto","cauto")),s(r,n,f,h,{prefix:"",cLetter:"c"}),c(0,n,0,h),n._length=null}},opacityscaleDefaults:c}},91304:function(r,n,i){r.exports={attributes:i(16716),supplyDefaults:i(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:i(56576),plot:i(79164),moduleType:"trace",name:"surface",basePlotModule:i(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(r,n,i){var a=i(13916),o=i(92880).extendFlat,s=i(67824).overrideAll,l=i(25376),c=i(86968).u,u=i(29736).descriptionOnlyNumbers;(r.exports=s({domain:c({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:o({},a.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},l({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:o({},a.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},l({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(r,n,i){var a=i(84888)._M,o=i(24752),s="table";n.name=s,n.plot=function(r){var n=a(r.calcdata,s)[0];n.length&&o(r,n)},n.clean=function(r,n,i,a){var o=a._has&&a._has(s),l=n._has&&n._has(s);o&&!l&&a._paperdiv.selectAll(".table").remove()}},39312:function(r,n,i){var a=i(71688).wrap;r.exports=function(){return a({})}},23536:function(r){r.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(r,n,i){var a=i(23536),o=i(92880).extendFlat,s=i(38248),l=i(38116).isTypedArray,c=i(38116).isArrayOrTypedArray;function u(r){if(c(r)){for(var n=0,i=0;i<r.length;i++)n=Math.max(n,u(r[i]));return n}return r}function f(r,n){return r+n}function h(r){var n,i=r.slice(),a=1/0,o=0;for(n=0;n<i.length;n++)l(i[n])?i[n]=Array.from(i[n]):c(i[n])||(i[n]=[i[n]]),a=Math.min(a,i[n].length),o=Math.max(o,i[n].length);if(a!==o)for(n=0;n<i.length;n++){var s=o-i[n].length;s&&(i[n]=i[n].concat(p(s)))}return i}function p(r){for(var n=Array(r),i=0;i<r;i++)n[i]="";return n}function d(r){return r.calcdata.columns.reduce(function(n,i){return i.xIndex<r.xIndex?n+i.columnWidth:n},0)}function y(r,n){return Object.keys(r).map(function(i){return o({},r[i],{auxiliaryBlocks:n})})}function g(r,n){for(var i,a={},o=0,s=0,l={firstRowIndex:null,lastRowIndex:null,rows:[]},c=0,u=0,f=0;f<r.length;f++)i=r[f],l.rows.push({rowIndex:f,rowHeight:i}),((s+=i)>=n||f===r.length-1)&&(a[o]=l,l.key=u++,l.firstRowIndex=c,l.lastRowIndex=f,l={firstRowIndex:null,lastRowIndex:null,rows:[]},o+=s,c=f+1,s=0);return a}r.exports=function(r,n){var i=h(n.cells.values),l=function(r){return r.slice(n.header.values.length,r.length)},v=h(n.header.values);v.length&&!v[0].length&&(v[0]=[""],v=h(v));var m=v.concat(l(i).map(function(){return p((v[0]||[""]).length)})),x=n.domain,b=Math.floor(r._fullLayout._size.w*(x.x[1]-x.x[0])),_=Math.floor(r._fullLayout._size.h*(x.y[1]-x.y[0])),w=n.header.values.length?m[0].map(function(){return n.header.height}):[a.emptyHeaderHeight],T=i.length?i[0].map(function(){return n.cells.height}):[],A=w.reduce(f,0),k=g(T,_-A+a.uplift),M=y(g(w,A),[]),S=y(k,M),E={},I=n._fullInput.columnorder;c(I)&&(I=Array.from(I)),I=I.concat(l(i.map(function(r,n){return n})));var L=m.map(function(r,i){var a=c(n.columnwidth)?n.columnwidth[Math.min(i,n.columnwidth.length-1)]:n.columnwidth;return s(a)?Number(a):1}),C=L.reduce(f,0);L=L.map(function(r){return r/C*b});var O=Math.max(u(n.header.line.width),u(n.cells.line.width)),D={key:n.uid+r._context.staticPlot,translateX:x.x[0]*r._fullLayout._size.w,translateY:r._fullLayout._size.h*(1-x.y[1]),size:r._fullLayout._size,width:b,maxLineWidth:O,height:_,columnOrder:I,groupHeight:_,rowBlocks:S,headerRowBlocks:M,scrollY:0,cells:o({},n.cells,{values:i}),headerCells:o({},n.header,{values:m}),gdColumns:m.map(function(r){return r[0]}),gdColumnsOriginalOrder:m.map(function(r){return r[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(r,n){var i=E[r];return E[r]=(i||0)+1,{key:r+"__"+E[r],label:r,specIndex:n,xIndex:I[n],xScale:d,x:void 0,calcdata:void 0,columnWidth:L[n]}})};return D.columns.forEach(function(r){r.calcdata=D,r.x=d(r)}),D}},53056:function(r,n,i){var a=i(92880).extendFlat;n.splitToPanels=function(r){var n=[0,0],i=a({},r,{key:"header",type:"header",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!0,values:r.calcdata.headerCells.values[r.specIndex],rowBlocks:r.calcdata.headerRowBlocks,calcdata:a({},r.calcdata,{cells:r.calcdata.headerCells})});return[a({},r,{key:"cells1",type:"cells",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:r.calcdata.cells.values[r.specIndex],rowBlocks:r.calcdata.rowBlocks}),a({},r,{key:"cells2",type:"cells",page:1,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:r.calcdata.cells.values[r.specIndex],rowBlocks:r.calcdata.rowBlocks}),i]},n.splitToCells=function(r){var n,i,a=[i=(n=r.rowBlocks[r.page])?n.rows[0].rowIndex:0,n?i+n.rows.length:0];return(r.values||[]).slice(a[0],a[1]).map(function(n,i){return{keyWithinBlock:i+("string"==typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:a[0]+i,column:r,calcdata:r.calcdata,page:r.page,rowBlocks:r.rowBlocks,value:n}})}},53212:function(r,n,i){var a=i(3400),o=i(60520),s=i(86968).Q;r.exports=function(r,n,i,l){function c(i,s){return a.coerce(r,n,o,i,s)}s(n,l,c),c("columnwidth"),c("header.values"),c("header.format"),c("header.align"),c("header.prefix"),c("header.suffix"),c("header.height"),c("header.line.width"),c("header.line.color"),c("header.fill.color"),a.coerceFont(c,"header.font",l.font),function(r,n){for(var i=r.columnorder||[],a=r.header.values.length,o=i.slice(0,a),s=o.slice().sort(function(r,n){return r-n}),l=o.map(function(r){return s.indexOf(r)}),c=l.length;c<a;c++)l.push(c);n("columnorder",l)}(n,c),c("cells.values"),c("cells.format"),c("cells.align"),c("cells.prefix"),c("cells.suffix"),c("cells.height"),c("cells.line.width"),c("cells.line.color"),c("cells.fill.color"),a.coerceFont(c,"cells.font",l.font),n._length=null}},41724:function(r,n,i){r.exports={attributes:i(60520),supplyDefaults:i(53212),calc:i(39312),plot:i(24752),moduleType:"trace",name:"table",basePlotModule:i(85852),categories:["noOpacity"],meta:{}}},24752:function(r,n,i){var a=i(23536),o=i(33428),s=i(3400),l=s.numberFormat,c=i(71688),u=i(43616),f=i(72736),h=i(3400).raiseToTop,p=i(3400).strTranslate,d=i(3400).cancelTransition,y=i(55992),g=i(53056),v=i(76308);function m(r){return Math.ceil(r.calcdata.maxLineWidth/2)}function x(r,n){return"clip"+r._fullLayout._uid+"_scrollAreaBottomClip_"+n.key}function b(r,n){return"clip"+r._fullLayout._uid+"_columnBoundaryClippath_"+n.calcdata.key+"_"+n.specIndex}function _(r){return[].concat.apply([],r.map(function(r){return r})).map(function(r){return r.__data__})}function w(r,n,i){var s=r.selectAll("."+a.cn.scrollbarKit).data(c.repeat,c.keyFun);s.enter().append("g").classed(a.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),s.each(function(r){var n,i=r.scrollbarState;i.totalHeight=F(n=r.rowBlocks,n.length-1)+(n.length?N(n[n.length-1],1/0):1),i.scrollableAreaHeight=r.groupHeight-L(r),i.currentlyVisibleHeight=Math.min(i.totalHeight,i.scrollableAreaHeight),i.ratio=i.currentlyVisibleHeight/i.totalHeight,i.barLength=Math.max(i.ratio*i.currentlyVisibleHeight,a.goldenRatio*a.scrollbarWidth),i.barWiggleRoom=i.currentlyVisibleHeight-i.barLength,i.wiggleRoom=Math.max(0,i.totalHeight-i.scrollableAreaHeight),i.topY=0===i.barWiggleRoom?0:r.scrollY/i.wiggleRoom*i.barWiggleRoom,i.bottomY=i.topY+i.barLength,i.dragMultiplier=i.wiggleRoom/i.barWiggleRoom}).attr("transform",function(r){return p(r.width+a.scrollbarWidth/2+a.scrollbarOffset,L(r))});var l=s.selectAll("."+a.cn.scrollbar).data(c.repeat,c.keyFun);l.enter().append("g").classed(a.cn.scrollbar,!0);var u=l.selectAll("."+a.cn.scrollbarSlider).data(c.repeat,c.keyFun);u.enter().append("g").classed(a.cn.scrollbarSlider,!0),u.attr("transform",function(r){return p(0,r.scrollbarState.topY||0)});var f=u.selectAll("."+a.cn.scrollbarGlyph).data(c.repeat,c.keyFun);f.enter().append("line").classed(a.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",a.scrollbarWidth).attr("stroke-linecap","round").attr("y1",a.scrollbarWidth/2),f.attr("y2",function(r){return r.scrollbarState.barLength-a.scrollbarWidth/2}).attr("stroke-opacity",function(r){return r.columnDragInProgress||!r.scrollbarState.barWiggleRoom||i?0:.4}),f.transition().delay(0).duration(0),f.transition().delay(a.scrollbarHideDelay).duration(a.scrollbarHideDuration).attr("stroke-opacity",0);var h=l.selectAll("."+a.cn.scrollbarCaptureZone).data(c.repeat,c.keyFun);h.enter().append("line").classed(a.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",a.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(i){var a=o.event.y,s=this.getBoundingClientRect(),l=i.scrollbarState,c=a-s.top,u=o.scale.linear().domain([0,l.scrollableAreaHeight]).range([0,l.totalHeight]).clamp(!0);l.topY<=c&&c<=l.bottomY||O(n,r,null,u(c-l.barLength/2))(i)}).call(o.behavior.drag().origin(function(r){return o.event.stopPropagation(),r.scrollbarState.scrollbarScrollInProgress=!0,r}).on("drag",O(n,r)).on("dragend",function(){})),h.attr("y2",function(r){return r.scrollbarState.scrollableAreaHeight}),n._context.staticPlot&&(f.remove(),h.remove())}function T(r,n,i,s){var l,f,h,p,d,y=((f=((l=i.selectAll("."+a.cn.columnCells).data(c.repeat,c.keyFun)).enter().append("g").classed(a.cn.columnCells,!0),l.exit().remove(),l).selectAll("."+a.cn.columnCell).data(g.splitToCells,function(r){return r.keyWithinBlock})).enter().append("g").classed(a.cn.columnCell,!0),f.exit().remove(),f);(function(r){r.each(function(r,n){var i=r.calcdata.cells.font,a=r.column.specIndex,o={size:M(i.size,a,n),color:M(i.color,a,n),family:M(i.family,a,n),weight:M(i.weight,a,n),style:M(i.style,a,n),variant:M(i.variant,a,n),textcase:M(i.textcase,a,n),lineposition:M(i.lineposition,a,n),shadow:M(i.shadow,a,n)};r.rowNumber=r.key,r.align=M(r.calcdata.cells.align,a,n),r.cellBorderWidth=M(r.calcdata.cells.line.width,a,n),r.font=o})})(y),function(r){r.attr("width",function(r){return r.column.columnWidth}).attr("stroke-width",function(r){return r.cellBorderWidth}).each(function(r){var n=o.select(this);v.stroke(n,M(r.calcdata.cells.line.color,r.column.specIndex,r.rowNumber)),v.fill(n,M(r.calcdata.cells.fill.color,r.column.specIndex,r.rowNumber))})}(((h=y.selectAll("."+a.cn.cellRect).data(c.repeat,function(r){return r.keyWithinBlock})).enter().append("rect").classed(a.cn.cellRect,!0),h));var m=((d=((p=y.selectAll("."+a.cn.cellTextHolder).data(c.repeat,function(r){return r.keyWithinBlock})).enter().append("g").classed(a.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),p).selectAll("."+a.cn.cellText).data(c.repeat,function(r){return r.keyWithinBlock})).enter().append("text").classed(a.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){o.event.stopPropagation()}),d);(function(r){r.each(function(r){u.font(o.select(this),r.font)})})(m),A(m,n,s,r),z(y)}function A(r,n,i,s){r.text(function(r){var n=r.column.specIndex,i=r.rowNumber,o=r.value,s="string"==typeof o,c=s&&o.match(/<br>/i),u=!s||c;r.mayHaveMarkup=s&&o.match(/[<&>]/);var f="string"==typeof o&&o.match(a.latexCheck);r.latex=f;var h,p,d=f?"":M(r.calcdata.cells.prefix,n,i)||"",y=f?"":M(r.calcdata.cells.suffix,n,i)||"",g=f?null:M(r.calcdata.cells.format,n,i)||null,v=d+(g?l(g)(r.value):r.value)+y;if(r.wrappingNeeded=!r.wrapped&&!u&&!f&&(h=k(v)),r.cellHeightMayIncrease=c||f||r.mayHaveMarkup||(void 0===h?k(v):h),r.needsConvertToTspans=r.mayHaveMarkup||r.wrappingNeeded||r.latex,r.wrappingNeeded){var m=(" "===a.wrapSplitCharacter?v.replace(/<a href=/gi,"<a_href="):v).split(a.wrapSplitCharacter),x=" "===a.wrapSplitCharacter?m.map(function(r){return r.replace(/<a_href=/gi,"<a href=")}):m;r.fragments=x.map(function(r){return{text:r,width:null}}),r.fragments.push({fragment:a.wrapSpacer,width:null}),p=x.join(a.lineBreaker)+a.lineBreaker+a.wrapSpacer}else delete r.fragments,p=v;return p}).attr("dy",function(r){return r.needsConvertToTspans?0:"0.75em"}).each(function(r){var l=o.select(this),c=r.wrappingNeeded?P:B;r.needsConvertToTspans?f.convertToTspans(l,s,c(i,this,n,s,r)):o.select(this.parentNode).attr("transform",function(r){return p(R(r),a.cellPad)}).attr("text-anchor",function(r){return({left:"start",center:"middle",right:"end"})[r.align]})})}function k(r){return -1!==r.indexOf(a.wrapSplitCharacter)}function M(r,n,i){if(s.isArrayOrTypedArray(r)){var a=r[Math.min(n,r.length-1)];return s.isArrayOrTypedArray(a)?a[Math.min(i,a.length-1)]:a}return r}function S(r,n,i){r.transition().ease(a.releaseTransitionEase).duration(a.releaseTransitionDuration).attr("transform",p(n.x,i))}function E(r){return"cells"===r.type}function I(r){return"header"===r.type}function L(r){return(r.rowBlocks.length?r.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(r,n){return r+N(n,1/0)},0)}function C(r,n,i){var a=_(n)[0];if(void 0!==a){var o=a.rowBlocks,s=a.calcdata,l=F(o,o.length),c=a.calcdata.groupHeight-L(a),u=s.scrollY=Math.max(0,Math.min(l-c,s.scrollY)),f=function(r,n,i){for(var a=[],o=0,s=0;s<r.length;s++){for(var l=r[s],c=l.rows,u=0,f=0;f<c.length;f++)u+=c[f].rowHeight;l.allRowsHeight=u,n<o+u&&n+i>o&&a.push(s),o+=u}return a}(o,u,c);1===f.length&&(f[0]===o.length-1?f.unshift(f[0]-1):f.push(f[0]+1)),f[0]%2&&f.reverse(),n.each(function(r,n){r.page=f[n],r.scrollY=u}),n.attr("transform",function(r){return p(0,F(r.rowBlocks,r.page)-r.scrollY)}),r&&(D(r,i,n,f,a.prevPages,a,0),D(r,i,n,f,a.prevPages,a,1),w(i,r))}}function O(r,n,i,s){return function(l){var c=l.calcdata?l.calcdata:l,u=n.filter(function(r){return c.key===r.key}),f=i||c.scrollbarState.dragMultiplier,h=c.scrollY;return c.scrollY=void 0===s?c.scrollY+f*o.event.dy:s,C(r,u.selectAll("."+a.cn.yColumn).selectAll("."+a.cn.columnBlock).filter(E),u),c.scrollY===h}}function D(r,n,i,a,o,s,l){a[l]!==o[l]&&(clearTimeout(s.currentRepaint[l]),s.currentRepaint[l]=setTimeout(function(){T(r,n,i.filter(function(r,n){return n===l&&a[n]!==o[n]}),i),o[l]=a[l]}))}function P(r,n,i,s){return function(){var l=o.select(n.parentNode);l.each(function(r){var n=r.fragments;l.selectAll("tspan.line").each(function(r,i){n[i].width=this.getComputedTextLength()});var i,o,s=n[n.length-1].width,c=n.slice(0,-1),u=[],f=0,h=r.column.columnWidth-2*a.cellPad;for(r.value="";c.length;)f+(o=(i=c.shift()).width+s)>h&&(r.value+=u.join(a.wrapSpacer)+a.lineBreaker,u=[],f=0),u.push(i.text),f+=o;f&&(r.value+=u.join(a.wrapSpacer)),r.wrapped=!0}),l.selectAll("tspan.line").remove(),A(l.select("."+a.cn.cellText),i,r,s),o.select(n.parentNode.parentNode).call(z)}}function B(r,n,i,s,l){return function(){if(!l.settledY){var c=o.select(n.parentNode),u=U(l),f=l.key-u.firstRowIndex,h=u.rows[f].rowHeight,d=Math.max(l.cellHeightMayIncrease?n.parentNode.getBoundingClientRect().height+2*a.cellPad:h,h);d-u.rows[f].rowHeight&&(u.rows[f].rowHeight=d,r.selectAll("."+a.cn.columnCell).call(z),C(null,r.filter(E),0),w(i,s,!0)),c.attr("transform",function(){var r=this.parentNode.getBoundingClientRect(),n=o.select(this.parentNode).select("."+a.cn.cellRect).node().getBoundingClientRect(),i=this.transform.baseVal.consolidate(),s=n.top-r.top+(i?i.matrix.f:a.cellPad);return p(R(l,o.select(this.parentNode).select("."+a.cn.cellTextHolder).node().getBoundingClientRect().width),s)}),l.settledY=!0}}}function R(r,n){switch(r.align){case"left":default:return a.cellPad;case"right":return r.column.columnWidth-(n||0)-a.cellPad;case"center":return(r.column.columnWidth-(n||0))/2}}function z(r){r.attr("transform",function(r){var n=r.rowBlocks[0].auxiliaryBlocks.reduce(function(r,n){return r+N(n,1/0)},0);return p(0,N(U(r),r.key)+n)}).selectAll("."+a.cn.cellRect).attr("height",function(r){var n,i;return(n=U(r),i=r.key,n.rows[i-n.firstRowIndex]).rowHeight})}function F(r,n){for(var i=0,a=n-1;a>=0;a--)i+=function(r){var n=r.allRowsHeight;if(void 0!==n)return n;for(var i=0,a=0;a<r.rows.length;a++)i+=r.rows[a].rowHeight;return r.allRowsHeight=i,i}(r[a]);return i}function N(r,n){for(var i=0,a=0;a<r.rows.length&&r.rows[a].rowIndex<n;a++)i+=r.rows[a].rowHeight;return i}function U(r){return r.rowBlocks[r.page]}r.exports=function(r,n){var i=!r._context.staticPlot,s=r._fullLayout._paper.selectAll("."+a.cn.table).data(n.map(function(n){return y(r,c.unwrap(n).trace)}),c.keyFun);s.exit().remove(),s.enter().append("g").classed(a.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),s.attr("width",function(r){return r.width+r.size.l+r.size.r}).attr("height",function(r){return r.height+r.size.t+r.size.b}).attr("transform",function(r){return p(r.translateX,r.translateY)});var l=s.selectAll("."+a.cn.tableControlView).data(c.repeat,c.keyFun),f=l.enter().append("g").classed(a.cn.tableControlView,!0).style("box-sizing","content-box");if(i){var v="onwheel"in document?"wheel":"mousewheel";f.on("mousemove",function(n){l.filter(function(r){return n===r}).call(w,r)}).on(v,function(n){n.scrollbarState.wheeling||(n.scrollbarState.wheeling=!0,O(r,l,null,n.scrollY+o.event.deltaY)(n)||(o.event.stopPropagation(),o.event.preventDefault()),n.scrollbarState.wheeling=!1)}).call(w,r,!0)}l.attr("transform",function(r){return p(r.size.l,r.size.t)});var A=l.selectAll("."+a.cn.scrollBackground).data(c.repeat,c.keyFun);A.enter().append("rect").classed(a.cn.scrollBackground,!0).attr("fill","none"),A.attr("width",function(r){return r.width}).attr("height",function(r){return r.height}),l.each(function(n){u.setClipUrl(o.select(this),x(r,n),r)});var k=l.selectAll("."+a.cn.yColumn).data(function(r){return r.columns},c.keyFun);k.enter().append("g").classed(a.cn.yColumn,!0),k.exit().remove(),k.attr("transform",function(r){return p(r.x,0)}),i&&k.call(o.behavior.drag().origin(function(n){return S(o.select(this),n,-a.uplift),h(this),n.calcdata.columnDragInProgress=!0,w(l.filter(function(r){return n.calcdata.key===r.key}),r),n}).on("drag",function(r){var n=o.select(this),i=function(n){return(r===n?o.event.x:n.x)+n.columnWidth/2};r.x=Math.max(-a.overdrag,Math.min(r.calcdata.width+a.overdrag-r.columnWidth,o.event.x)),_(k).filter(function(n){return n.calcdata.key===r.calcdata.key}).sort(function(r,n){return i(r)-i(n)}).forEach(function(n,i){n.xIndex=i,n.x=r===n?n.x:n.xScale(n)}),k.filter(function(n){return r!==n}).transition().ease(a.transitionEase).duration(a.transitionDuration).attr("transform",function(r){return p(r.x,0)}),n.call(d).attr("transform",p(r.x,-a.uplift))}).on("dragend",function(n){var i,a,s=o.select(this),l=n.calcdata;n.x=n.xScale(n),n.calcdata.columnDragInProgress=!1,S(s,n,0),i=l.columns.map(function(r){return r.xIndex}),a=l.gdColumnsOriginalOrder,l.gdColumns.sort(function(r,n){return i[a.indexOf(r)]-i[a.indexOf(n)]}),l.columnorder=i,r.emit("plotly_restyle")})),k.each(function(n){u.setClipUrl(o.select(this),b(r,n),r)});var M=k.selectAll("."+a.cn.columnBlock).data(g.splitToPanels,c.keyFun);M.enter().append("g").classed(a.cn.columnBlock,!0).attr("id",function(r){return r.key}),M.style("cursor",function(r){return r.dragHandle?"ew-resize":r.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var L=M.filter(I),D=M.filter(E);i&&D.call(o.behavior.drag().origin(function(r){return o.event.stopPropagation(),r}).on("drag",O(r,l,-1)).on("dragend",function(){})),T(r,l,L,M),T(r,l,D,M);var P=l.selectAll("."+a.cn.scrollAreaClip).data(c.repeat,c.keyFun);P.enter().append("clipPath").classed(a.cn.scrollAreaClip,!0).attr("id",function(n){return x(r,n)});var B=P.selectAll("."+a.cn.scrollAreaClipRect).data(c.repeat,c.keyFun);B.enter().append("rect").classed(a.cn.scrollAreaClipRect,!0).attr("x",-a.overdrag).attr("y",-a.uplift).attr("fill","none"),B.attr("width",function(r){return r.width+2*a.overdrag}).attr("height",function(r){return r.height+a.uplift}),k.selectAll("."+a.cn.columnBoundary).data(c.repeat,c.keyFun).enter().append("g").classed(a.cn.columnBoundary,!0);var R=k.selectAll("."+a.cn.columnBoundaryClippath).data(c.repeat,c.keyFun);R.enter().append("clipPath").classed(a.cn.columnBoundaryClippath,!0),R.attr("id",function(n){return b(r,n)});var z=R.selectAll("."+a.cn.columnBoundaryRect).data(c.repeat,c.keyFun);z.enter().append("rect").classed(a.cn.columnBoundaryRect,!0).attr("fill","none"),z.attr("width",function(r){return r.columnWidth+2*m(r)}).attr("height",function(r){return r.calcdata.height+2*m(r)+a.uplift}).attr("x",function(r){return-m(r)}).attr("y",function(r){return-m(r)}),C(null,D,l)}},40516:function(r,n,i){var a=i(21776).Ks,o=i(21776).Gw,s=i(49084),l=i(86968).u,c=i(74996),u=i(424),f=i(32984),h=i(92880).extendFlat,p=i(98192).c;r.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:h({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:u.marker.colors,pattern:p,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:u.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:h({},c.textfont,{}),editType:"calc"},text:c.text,textinfo:u.textinfo,texttemplate:o({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:c.hovertext,hoverinfo:u.hoverinfo,hovertemplate:a({},{keys:f.eventDataKeys}),textfont:c.textfont,insidetextfont:c.insidetextfont,outsidetextfont:h({},c.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:c.sort,root:u.root,domain:l({name:"treemap",trace:!0,editType:"calc"})}},79516:function(r,n,i){var a=i(7316);n.name="treemap",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},97840:function(r,n,i){var a=i(3776);n.r=function(r,n){return a.calc(r,n)},n.q=function(r){return a._runCrossTraceCalc("treemap",r)}},32984:function(r){r.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(r,n,i){var a=i(3400),o=i(40516),s=i(76308),l=i(86968).Q,c=i(31508).handleText,u=i(78048).TEXTPAD,f=i(74174).handleMarkerDefaults,h=i(8932),p=h.hasColorscale,d=h.handleDefaults;r.exports=function(r,n,i,h){function y(i,s){return a.coerce(r,n,o,i,s)}var g=y("labels"),v=y("parents");if(g&&g.length&&v&&v.length){var m=y("values");y(m&&m.length?"branchvalues":"count"),y("level"),y("maxdepth"),"squarify"===y("tiling.packing")&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var x=y("text");y("texttemplate"),n.texttemplate||y("textinfo",a.isArrayOrTypedArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var b=y("pathbar.visible");c(r,n,h,y,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var _=-1!==n.textposition.indexOf("bottom");f(r,n,h,y),(n._hasColorscale=p(r,"marker","colors")||(r.marker||{}).coloraxis)?d(r,n,h,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(n.marker.colors||[]).length);var w=2*n.textfont.size;y("marker.pad.t",_?w/4:w),y("marker.pad.l",w/4),y("marker.pad.r",w/4),y("marker.pad.b",_?w:w/4),y("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:s.contrast(h.paper_bgcolor)}}},b&&(y("pathbar.thickness",n.pathbar.textfont.size+2*u),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),l(n,h,y),n._length=null}else n.visible=!1}},95808:function(r,n,i){var a=i(33428),o=i(78176),s=i(82744).clearMinTextSize,l=i(60100).resizeText,c=i(52960);r.exports=function(r,n,i,u,f){var h,p,d=f.type,y=f.drawDescendants,g=r._fullLayout,v=g["_"+d+"layer"],m=!i;s(d,g),(h=v.selectAll("g.trace."+d).data(n,function(r){return r[0].trace.uid})).enter().append("g").classed("trace",!0).classed(d,!0),h.order(),!g.uniformtext.mode&&o.hasTransition(i)?(u&&(p=u()),a.transition().duration(i.duration).ease(i.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){v.selectAll("g.trace").each(function(n){c(r,n,this,i,y)})})):(h.each(function(n){c(r,n,this,i,y)}),g.uniformtext.mode&&l(r,v.selectAll(".trace"),d)),m&&h.exit().remove()}},27336:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(72736),c=i(13832),u=i(66192).styleOne,f=i(32984),h=i(78176),p=i(45716);r.exports=function(r,n,i,d,y){var g=y.barDifY,v=y.width,m=y.height,x=y.viewX,b=y.viewY,_=y.pathSlice,w=y.toMoveInsideSlice,T=y.strTransform,A=y.hasTransition,k=y.handleSlicesExit,M=y.makeUpdateSliceInterpolator,S=y.makeUpdateTextInterpolator,E={},I=r._context.staticPlot,L=r._fullLayout,C=n[0],O=C.trace,D=C.hierarchy,P=v/O._entryDepth,B=h.listPath(i.data,"id"),R=c(D.copy(),[v,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(R=R.filter(function(r){var n=B.indexOf(r.data.id);return -1!==n&&(r.x0=P*n,r.x1=P*(n+1),r.y0=g,r.y1=g+m,r.onPathbar=!0,!0)})).reverse(),(d=d.data(R,h.getPtId)).enter().append("g").classed("pathbar",!0),k(d,!0,E,[v,m],_),d.order();var z=d;A&&(z=z.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),z.each(function(c){c._x0=x(c.x0),c._x1=x(c.x1),c._y0=b(c.y0),c._y1=b(c.y1),c._hoverX=x(c.x1-Math.min(v,m)/2),c._hoverY=b(c.y1-m/2);var d=a.select(this),y=o.ensureSingle(d,"path","surface",function(r){r.style("pointer-events",I?"none":"all")});A?y.transition().attrTween("d",function(r){var n=M(r,!0,E,[v,m]);return function(r){return _(n(r))}}):y.attr("d",_),d.call(p,i,r,n,{styleOne:u,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),y.call(u,c,O,r,{hovered:!1}),c._text=(h.getPtLabel(c)||"").split("<br>").join(" ")||"";var g=o.ensureSingle(d,"g","slicetext"),k=o.ensureSingle(g,"text","",function(r){r.attr("data-notex",1)}),C=o.ensureUniformFontSize(r,h.determineTextFont(O,c,L.font,{onPathbar:!0}));k.text(c._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(s.font,C).call(l.convertToTspans,r),c.textBB=s.bBox(k.node()),c.transform=w(c,{fontSize:C.size,onPathbar:!0}),c.transform.fontSize=C.size,A?k.transition().attrTween("transform",function(r){var n=S(r,!0,E,[v,m]);return function(r){return T(n(r))}}):k.attr("transform",T(c))})}},76477:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(72736),c=i(13832),u=i(66192).styleOne,f=i(32984),h=i(78176),p=i(45716),d=i(96488).formatSliceLabel;r.exports=function(r,n,i,y,g){var v=g.width,m=g.height,x=g.viewX,b=g.viewY,_=g.pathSlice,w=g.toMoveInsideSlice,T=g.strTransform,A=g.hasTransition,k=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,S=g.makeUpdateTextInterpolator,E=g.prevEntry,I=r._context.staticPlot,L=r._fullLayout,C=n[0].trace,O=-1!==C.textposition.indexOf("left"),D=-1!==C.textposition.indexOf("right"),P=-1!==C.textposition.indexOf("bottom"),B=!P&&!C.marker.pad.t||P&&!C.marker.pad.b,R=c(i,[v,m],{packing:C.tiling.packing,squarifyratio:C.tiling.squarifyratio,flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1,pad:{inner:C.tiling.pad,top:C.marker.pad.t,left:C.marker.pad.l,right:C.marker.pad.r,bottom:C.marker.pad.b}}).descendants(),z=1/0,F=-1/0;R.forEach(function(r){var n=r.depth;n>=C._maxDepth?(r.x0=r.x1=(r.x0+r.x1)/2,r.y0=r.y1=(r.y0+r.y1)/2):(z=Math.min(z,n),F=Math.max(F,n))}),y=y.data(R,h.getPtId),C._maxVisibleLayers=isFinite(F)?F-z+1:0,y.enter().append("g").classed("slice",!0),k(y,!1,{},[v,m],_),y.order();var N=null;if(A&&E){var U=h.getPtId(E);y.each(function(r){null===N&&h.getPtId(r)===U&&(N={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})})}var j=function(){return N||{x0:0,x1:v,y0:0,y1:m}},V=y;return A&&(V=V.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(c){var y=h.isHeader(c,C);c._x0=x(c.x0),c._x1=x(c.x1),c._y0=b(c.y0),c._y1=b(c.y1),c._hoverX=x(c.x1-C.marker.pad.r),c._hoverY=b(P?c.y1-C.marker.pad.b/2:c.y0+C.marker.pad.t/2);var g=a.select(this),k=o.ensureSingle(g,"path","surface",function(r){r.style("pointer-events",I?"none":"all")});A?k.transition().attrTween("d",function(r){var n=M(r,!1,j(),[v,m]);return function(r){return _(n(r))}}):k.attr("d",_),g.call(p,i,r,n,{styleOne:u,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{isTransitioning:r._transitioning}),k.call(u,c,C,r,{hovered:!1}),c.x0===c.x1||c.y0===c.y1?c._text="":c._text=y?B?"":h.getPtLabel(c)||"":d(c,i,C,n,L)||"";var E=o.ensureSingle(g,"g","slicetext"),R=o.ensureSingle(E,"text","",function(r){r.attr("data-notex",1)}),z=o.ensureUniformFontSize(r,h.determineTextFont(C,c,L.font)),F=c._text||" ",N=y&&-1===F.indexOf("<br>");R.text(F).classed("slicetext",!0).attr("text-anchor",D?"end":O||N?"start":"middle").call(s.font,z).call(l.convertToTspans,r),c.textBB=s.bBox(R.node()),c.transform=w(c,{fontSize:z.size,isHeader:y}),c.transform.fontSize=z.size,A?R.transition().attrTween("transform",function(r){var n=S(r,!1,j(),[v,m]);return function(r){return T(n(r))}}):R.attr("transform",T(c))}),N}},83024:function(r){r.exports=function r(n,i,a){a.swapXY&&(o=n.x0,n.x0=n.y0,n.y0=o,o=n.x1,n.x1=n.y1,n.y1=o),a.flipX&&(o=n.x0,n.x0=i[0]-n.x1,n.x1=i[0]-o),a.flipY&&(o=n.y0,n.y0=i[1]-n.y1,n.y1=i[1]-o);var o,s=n.children;if(s)for(var l=0;l<s.length;l++)r(s[l],i,a)}},31991:function(r,n,i){r.exports={moduleType:"trace",name:"treemap",basePlotModule:i(79516),categories:[],animatable:!0,attributes:i(40516),layoutAttributes:i(45392),supplyDefaults:i(34092),supplyLayoutDefaults:i(77480),calc:i(97840).r,crossTraceCalc:i(97840).q,plot:i(53264),style:i(66192).style,colorbar:i(5528),meta:{}}},45392:function(r){r.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(r,n,i){var a=i(3400),o=i(45392);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("treemapcolorway",n.colorway),i("extendtreemapcolors")}},13832:function(r,n,i){var a=i(74148),o=i(83024);r.exports=function(r,n,i){var s,l=i.flipX,c=i.flipY,u="dice-slice"===i.packing,f=i.pad[c?"bottom":"top"],h=i.pad[l?"right":"left"],p=i.pad[l?"left":"right"],d=i.pad[c?"top":"bottom"];u&&(s=h,h=f,f=s,s=p,p=d,d=s);var y=a.treemap().tile(function(r,n){switch(r){case"squarify":return a.treemapSquarify.ratio(n);case"binary":return a.treemapBinary;case"dice":return a.treemapDice;case"slice":return a.treemapSlice;default:return a.treemapSliceDice}}(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(h).paddingRight(p).paddingTop(f).paddingBottom(d).size(u?[n[1],n[0]]:n)(r);return(u||l||c)&&o(y,n,{swapXY:u,flipX:l,flipY:c}),y}},53264:function(r,n,i){var a=i(95808),o=i(76477);r.exports=function(r,n,i,s){return a(r,n,i,s,{type:"treemap",drawDescendants:o})}},52960:function(r,n,i){var a=i(33428),o=i(67756).qy,s=i(78176),l=i(3400),c=i(78048).TEXTPAD,u=i(98184).toMoveInsideBar,f=i(82744).recordMinTextSize,h=i(32984),p=i(27336);function d(r){return s.isHierarchyRoot(r)?"":s.getPtId(r)}r.exports=function(r,n,i,y,g){var v=r._fullLayout,m=n[0],x=m.trace,b="icicle"===x.type,_=m.hierarchy,w=s.findEntryWithLevel(_,x.level),T=a.select(i),A=T.selectAll("g.pathbar"),k=T.selectAll("g.slice");if(!w)return A.remove(),void k.remove();var M=s.isHierarchyRoot(w),S=!v.uniformtext.mode&&s.hasTransition(y),E=s.getMaxDepth(x),I=v._size,L=x.domain,C=I.w*(L.x[1]-L.x[0]),O=I.h*(L.y[1]-L.y[0]),D=x.pathbar.thickness,P=x.marker.line.width+h.gapWithPathbar,B=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?O+P:-(D+P):0,R={x0:C,x1:C,y0:B,y1:B+D},z=function(r,n,i){var a=x.tiling.pad,o=function(r){return r-a<=n.x0},s=function(r){return r+a>=n.x1},l=function(r){return r-a<=n.y0},c=function(r){return r+a>=n.y1};return r.x0===n.x0&&r.x1===n.x1&&r.y0===n.y0&&r.y1===n.y1?{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1}:{x0:o(r.x0-a)?0:s(r.x0-a)?i[0]:r.x0,x1:o(r.x1+a)?0:s(r.x1+a)?i[0]:r.x1,y0:l(r.y0-a)?0:c(r.y0-a)?i[1]:r.y0,y1:l(r.y1+a)?0:c(r.y1+a)?i[1]:r.y1}},F=null,N={},U={},j=null,V=function(r,n){return n?N[d(r)]:U[d(r)]};m.hasMultipleRoots&&M&&E++,x._maxDepth=E,x._backgroundColor=v.paper_bgcolor,x._entryDepth=w.data.depth,x._atRootLevel=M;var H=-C/2+I.l+I.w*(L.x[1]+L.x[0])/2,q=-O/2+I.t+I.h*(1-(L.y[1]+L.y[0])/2),G=function(r){return H+r},W=function(r){return q+r},Y=W(0),Z=G(0),X=function(r){return Z+r},K=function(r){return Y+r},J=X(0),$=function(r){r.x=Math.max(J,r.x)},Q=x.pathbar.edgeshape,tt=x[b?"tiling":"marker"].pad,te=function(r){return -1!==x.textposition.indexOf(r)},tr=te("top"),tn=te("left"),ti=te("right"),ta=te("bottom"),to=function(r,n){var i=r.x0,a=r.x1,o=r.y0,s=r.y1,l=r.textBB,h=tr||n.isHeader&&!ta?"start":ta?"end":"middle",p=te("right"),d=te("left")||n.onPathbar?-1:p?1:0;if(n.isHeader){if((i+=(b?tt:tt.l)-c)>=(a-=(b?tt:tt.r)-c)){var y,g=(i+a)/2;i=g,a=g}ta?o<(y=s-(b?tt:tt.b))&&y<s&&(o=y):o<(y=o+(b?tt:tt.t))&&y<s&&(s=y)}var m=u(i,a,o,s,l,{isHorizontal:!1,constrained:!0,angle:0,anchor:h,leftToRight:d});return m.fontSize=n.fontSize,m.targetX=G(m.targetX),m.targetY=W(m.targetY),isNaN(m.targetX)||isNaN(m.targetY)?{}:(i!==a&&o!==s&&f(x.type,m,v),{scale:m.scale,rotate:m.rotate,textX:m.textX,textY:m.textY,anchorX:m.anchorX,anchorY:m.anchorY,targetX:m.targetX,targetY:m.targetY})},ts=function(r,n){for(var i,a=0,o=r;!i&&a<E;)a++,(o=o.parent)?i=V(o,n):a=E;return i||{}},tl=function(r,n,i,a,s){var c,u=V(r,n);if(u)c=u;else if(n)c=R;else if(F){if(r.parent){var f=j||i;f&&!n?c=z(r,f,a):(c={},l.extendFlat(c,ts(r,n)))}else c=l.extendFlat({},r),b&&("h"===s.orientation?s.flipX?c.x0=r.x1:c.x1=0:s.flipY?c.y0=r.y1:c.y1=0)}else c={};return o(c,{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})},tc=function(r,n,i,a){var c=V(r,n),u={},h=function(r,n,i,a){if(n)return N[d(_)]||R;var o=U[x.level]||i;return r.data.depth-w.data.depth<E?z(r,o,a):{}}(r,n,i,a);l.extendFlat(u,{transform:to({x0:h.x0,x1:h.x1,y0:h.y0,y1:h.y1,textBB:r.textBB,_text:r._text},{isHeader:s.isHeader(r,x)})}),c?u=c:r.parent&&l.extendFlat(u,ts(r,n));var p=r.transform;return r.x0!==r.x1&&r.y0!==r.y1&&f(x.type,p,v),o(u,{transform:{scale:p.scale,rotate:p.rotate,textX:p.textX,textY:p.textY,anchorX:p.anchorX,anchorY:p.anchorY,targetX:p.targetX,targetY:p.targetY}})},tu=function(r,n,i,s,l){var c=s[0],u=s[1];S?r.exit().transition().each(function(){var r=a.select(this);r.select("path.surface").transition().attrTween("d",function(r){var i=function(r,n,i,a){var s,l=V(r,n);if(n)s=R;else{var c=V(w,n);s=c?z(r,c,a):{}}return o(l,s)}(r,n,0,[c,u]);return function(r){return l(i(r))}}),r.select("g.slicetext").attr("opacity",0)}).remove():r.exit().remove()},tf=function(r){var n=r.transform;return r.x0!==r.x1&&r.y0!==r.y1&&f(x.type,n,v),l.getTextTransform({textX:n.textX,textY:n.textY,anchorX:n.anchorX,anchorY:n.anchorY,targetX:n.targetX,targetY:n.targetY,scale:n.scale,rotate:n.rotate})};S&&(A.each(function(r){N[d(r)]={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1},r.transform&&(N[d(r)].transform={textX:r.transform.textX,textY:r.transform.textY,anchorX:r.transform.anchorX,anchorY:r.transform.anchorY,targetX:r.transform.targetX,targetY:r.transform.targetY,scale:r.transform.scale,rotate:r.transform.rotate})}),k.each(function(r){U[d(r)]={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1},r.transform&&(U[d(r)].transform={textX:r.transform.textX,textY:r.transform.textY,anchorX:r.transform.anchorX,anchorY:r.transform.anchorY,targetX:r.transform.targetX,targetY:r.transform.targetY,scale:r.transform.scale,rotate:r.transform.rotate}),!F&&s.isEntry(r)&&(F=r)})),j=g(r,n,w,k,{width:C,height:O,viewX:G,viewY:W,pathSlice:function(r){var n=G(r.x0),i=G(r.x1),a=W(r.y0),o=W(r.y1),s=i-n,l=o-a;if(!s||!l)return"";var c=Math.min(x.marker.cornerradius||0,s/2,l/2);c&&r.data&&r.data.data&&r.data.data.label&&(tr&&(c=Math.min(c,tt.t)),tn&&(c=Math.min(c,tt.l)),ti&&(c=Math.min(c,tt.r)),ta&&(c=Math.min(c,tt.b)));var u=function(r,n){return c?"a"+c+","+c+" 0 0 1 "+r+","+n:""};return"M"+n+","+(a+c)+u(c,-c)+"L"+(i-c)+","+a+u(c,c)+"L"+i+","+(o-c)+u(-c,c)+"L"+(n+c)+","+o+u(-c,-c)+"Z"},toMoveInsideSlice:to,prevEntry:F,makeUpdateSliceInterpolator:tl,makeUpdateTextInterpolator:tc,handleSlicesExit:tu,hasTransition:S,strTransform:tf}),x.pathbar.visible?p(r,n,w,A,{barDifY:B,width:C,height:D,viewX:X,viewY:K,pathSlice:function(r){var n=X(Math.max(Math.min(r.x0,r.x0),0)),i=X(Math.min(Math.max(r.x1,r.x1),C)),a=K(r.y0),o=K(r.y1),s=D/2,l={},c={};l.x=n,c.x=i,l.y=c.y=(a+o)/2;var u={x:n,y:a},f={x:i,y:a},h={x:i,y:o},p={x:n,y:o};return">"===Q?(u.x-=s,f.x-=s,h.x-=s,p.x-=s):"/"===Q?(h.x-=s,p.x-=s,l.x-=s/2,c.x-=s/2):"\\"===Q?(u.x-=s,f.x-=s,l.x-=s/2,c.x-=s/2):"<"===Q&&(l.x-=s,c.x-=s),$(u),$(p),$(l),$(f),$(h),$(c),"M"+u.x+","+u.y+"L"+f.x+","+f.y+"L"+c.x+","+c.y+"L"+h.x+","+h.y+"L"+p.x+","+p.y+"L"+l.x+","+l.y+"Z"},toMoveInsideSlice:to,makeUpdateSliceInterpolator:tl,makeUpdateTextInterpolator:tc,handleSlicesExit:tu,hasTransition:S,strTransform:tf}):A.remove()}},66192:function(r,n,i){var a=i(33428),o=i(76308),s=i(3400),l=i(78176),c=i(82744).resizeText,u=i(60404);function f(r,n,i,a,c){var f,h,p=(c||{}).hovered,d=n.data.data,y=d.i,g=d.color,v=l.isHierarchyRoot(n),m=1;if(p)f=i._hovered.marker.line.color,h=i._hovered.marker.line.width;else if(v&&g===i.root.color)m=100,f="rgba(0,0,0,0)",h=0;else if(f=s.castOption(i,y,"marker.line.color")||o.defaultLine,h=s.castOption(i,y,"marker.line.width")||0,!i._hasColorscale&&!n.onPathbar){var x=i.marker.depthfade;if(x){var b,_=o.combine(o.addOpacity(i._backgroundColor,.75),g);if(!0===x?b=isFinite(l.getMaxDepth(i))?l.isLeaf(n)?0:i._maxVisibleLayers-(n.data.depth-i._entryDepth):n.data.height+1:(b=n.data.depth-i._entryDepth,i._atRootLevel||b++),b>0)for(var w=0;w<b;w++){var T=.5*w/b;g=o.combine(o.addOpacity(_,T),g)}}}r.call(u,n,i,a,g).style("stroke-width",h).call(o.stroke,f).style("opacity",m)}r.exports={style:function(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");c(r,n,"treemap"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(f,n,o,r,{hovered:!1})})})},styleOne:f}},13988:function(r,n,i){var a=i(63188),o=i(92880).extendFlat,s=i(29736).axisHoverFormat;r.exports={y:a.y,x:a.x,x0:a.x0,y0:a.y0,xhoverformat:s("x"),yhoverformat:s("y"),name:o({},a.name,{}),orientation:o({},a.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,points:o({},a.boxpoints,{}),jitter:o({},a.jitter,{}),pointpos:o({},a.pointpos,{}),width:o({},a.width,{}),marker:a.marker,text:a.text,hovertext:a.hovertext,hovertemplate:a.hovertemplate,quartilemethod:a.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:a.zorder}},67064:function(r,n,i){var a=i(3400),o=i(54460),s=i(62555),l=i(63800),c=i(39032).BADNUM;r.exports=function(r,n){var i=s(r,n);if(i[0].t.empty)return i;for(var u=r._fullLayout,f=o.getFromId(r,n["h"===n.orientation?"xaxis":"yaxis"]),h=1/0,p=-1/0,d=0,y=0,g=0;g<i.length;g++){var v=i[g],m=v.pts.map(l.extractVal),x=v.bandwidth=function(r,n,i){var o=n.max-n.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var s=i.length;return Math.max(1.059*Math.min(a.stdev(i,s-1,n.mean),(n.q3-n.q1)/1.349)*Math.pow(s,-.2),o/100)}(n,v,m),b=v.span=function(r,n,i,a){var s,l=r.spanmode,u=r.span||[],f=[n.min,n.max],h=[n.min-2*a,n.max+2*a];function p(a){var o=u[a],s="multicategory"===i.type?i.r2c(o):i.d2c(o,0,r[n.valLetter+"calendar"]);return s===c?h[a]:s}var d={type:"linear",range:s="soft"===l?h:"hard"===l?f:[p(0),p(1)]};return o.setConvert(d),d.cleanRange(),s}(n,v,f,x);if(v.min===v.max&&0===x)b=v.span=[v.min,v.max],v.density=[{v:1,t:b[0]}],v.bandwidth=x,d=Math.max(d,1);else{var _=b[1]-b[0],w=Math.ceil(_/(x/3)),T=_/w;if(!isFinite(T)||!isFinite(w))return a.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var A=l.makeKDE(v,n,m);v.density=Array(w);for(var k=0,M=b[0];M<b[1]+T/2;k++,M+=T){var S=A(M);v.density[k]={v:S,t:M},d=Math.max(d,S)}}y=Math.max(y,m.length),h=Math.min(h,b[0]),p=Math.max(p,b[1])}var E=o.findExtremes(f,[h,p],{padded:!0});if(n._extremes[f._id]=E,n.width)i[0].t.maxKDE=d;else{var I=u._violinScaleGroupStats,L=n.scalegroup,C=I[L];C?(C.maxKDE=Math.max(C.maxKDE,d),C.maxCount=Math.max(C.maxCount,y)):I[L]={maxKDE:d,maxCount:y}}return i[0].t.labels.kde=a._(r,"kde:"),i}},14348:function(r,n,i){var a=i(96404).setPositionOffset,o=["v","h"];r.exports=function(r,n){for(var i=r.calcdata,s=n.xaxis,l=n.yaxis,c=0;c<o.length;c++){for(var u=o[c],f="h"===u?l:s,h=[],p=0;p<i.length;p++){var d=i[p],y=d[0].t,g=d[0].trace;!0!==g.visible||"violin"!==g.type||y.empty||g.orientation!==u||g.xaxis!==s._id||g.yaxis!==l._id||h.push(p)}a("violin",r,h,f)}}},36240:function(r,n,i){var a=i(3400),o=i(76308),s=i(90624),l=i(13988);r.exports=function(r,n,i,c){function u(i,o){return a.coerce(r,n,l,i,o)}function f(i,o){return a.coerce2(r,n,l,i,o)}if(s.handleSampleDefaults(r,n,u,c),!1!==n.visible){u("bandwidth"),u("side"),u("width")||(u("scalegroup",n.name),u("scalemode")),Array.isArray(u("span"))&&(h="manual"),u("spanmode",h);var h,p=u("line.color",(r.marker||{}).color||i),d=u("line.width"),y=u("fillcolor",o.addOpacity(n.line.color,.5));s.handlePointsDefaults(r,n,u,{prefix:""});var g=f("box.width"),v=f("box.fillcolor",y),m=f("box.line.color",p),x=f("box.line.width",d);u("box.visible",!!(g||v||m||x))||(n.box={visible:!1});var b=f("meanline.color",p),_=f("meanline.width",d);u("meanline.visible",!!(b||_))||(n.meanline={visible:!1}),u("quartilemethod"),u("zorder")}}},63800:function(r,n,i){var a=i(3400);n.makeKDE=function(r,n,i){var a=i.length,o=r.bandwidth,s=1/(a*o);return function(r){for(var n,l=0,c=0;c<a;c++)l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(n=(r-i[c])/o)*n);return s*l}},n.getPositionOnKdePath=function(r,n,i){"h"===n.orientation?(o="y",s="x"):(o="x",s="y");var o,s,l=a.findPointOnPath(r.path,i,s,{pathLength:r.pathLength}),c=r.posCenterPx,u=l[o];return[u,"both"===n.side?2*c-u:c]},n.getKdeValue=function(r,i,a){var o=r.pts.map(n.extractVal);return n.makeKDE(r,i,o)(a)/r.posDensityScale},n.extractVal=function(r){return r.v}},78e3:function(r,n,i){var a=i(76308),o=i(3400),s=i(54460),l=i(27576),c=i(63800);r.exports=function(r,n,i,u,f){f||(f={});var h,p,d=f.hoverLayer,y=r.cd,g=y[0].trace,v=g.hoveron,m=-1!==v.indexOf("violins"),x=-1!==v.indexOf("kde"),b=[];if(m||x){var _=l.hoverOnBoxes(r,n,i,u);if(x&&_.length>0){var w,T,A,k,M,S=r.xa,E=r.ya;"h"===g.orientation?(M=n,w="y",A=E,T="x",k=S):(M=i,w="x",A=S,T="y",k=E);var I=y[r.index];if(M>=I.span[0]&&M<=I.span[1]){var L=o.extendFlat({},r),C=k.c2p(M,!0),O=c.getKdeValue(I,g,M),D=c.getPositionOnKdePath(I,g,C),P=A._offset,B=A._length;L[w+"0"]=D[0],L[w+"1"]=D[1],L[T+"0"]=L[T+"1"]=C,L[T+"Label"]=T+": "+s.hoverLabelText(k,M,g[T+"hoverformat"])+", "+y[0].t.labels.kde+" "+O.toFixed(3);for(var R=0,z=0;z<_.length;z++)if("med"===_[z].attr){R=z;break}L.spikeDistance=_[R].spikeDistance;var F=w+"Spike";L[F]=_[R][F],_[R].spikeDistance=void 0,_[R][F]=void 0,L.hovertemplate=!1,b.push(L),(p={})[w+"1"]=o.constrain(P+D[0],P,P+B),p[w+"2"]=o.constrain(P+D[1],P,P+B),p[T+"1"]=p[T+"2"]=k._offset+C}}m&&(b=b.concat(_))}-1!==v.indexOf("points")&&(h=l.hoverOnPoints(r,n,i));var N=d.selectAll(".violinline-"+g.uid).data(p?[0]:[]);return N.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),N.exit().remove(),N.attr(p).call(a.stroke,r.color),"closest"===u?h?[h]:b:(h&&b.push(h),b)}},22869:function(r,n,i){r.exports={attributes:i(13988),layoutAttributes:i(98228),supplyDefaults:i(36240),crossTraceDefaults:i(90624).crossTraceDefaults,supplyLayoutDefaults:i(8939),calc:i(67064),crossTraceCalc:i(14348),plot:i(5140),style:i(95908),styleOnSelect:i(49224).styleOnSelect,hoverPoints:i(78e3),selectPoints:i(8264),moduleType:"trace",name:"violin",basePlotModule:i(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(r,n,i){var a=i(16560),o=i(3400).extendFlat;r.exports={violinmode:o({},a.boxmode,{}),violingap:o({},a.boxgap,{}),violingroupgap:o({},a.boxgroupgap,{})}},8939:function(r,n,i){var a=i(3400),o=i(98228),s=i(68832);r.exports=function(r,n,i){s._supply(r,n,i,function(i,s){return a.coerce(r,n,o,i,s)},"violin")}},5140:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(18728),c=i(52340),u=i(63800);r.exports=function(r,n,i,f){var h=r._context.staticPlot,p=r._fullLayout,d=n.xaxis,y=n.yaxis;function g(r,n){var i=c(r,{xaxis:d,yaxis:y,trace:n,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return s.smoothopen(i[0],1)}o.makeTraceGroups(f,i,"trace violins").each(function(r){var i=a.select(this),s=r[0],c=s.t,f=s.trace;if(!0!==f.visible||c.empty)i.remove();else{var v=c.bPos,m=c.bdPos,x=n[c.valLetter+"axis"],b=n[c.posLetter+"axis"],_="both"===f.side,w=_||"positive"===f.side,T=_||"negative"===f.side,A=i.selectAll("path.violin").data(o.identity);A.enter().append("path").style("vector-effect",h?"none":"non-scaling-stroke").attr("class","violin"),A.exit().remove(),A.each(function(r){var n,i,o,s,l,u,h,d,y=a.select(this),A=r.density,k=A.length,M=b.c2l(r.pos+v,!0),S=b.l2p(M);if(f.width)n=c.maxKDE/m;else{var E=p._violinScaleGroupStats[f.scalegroup];n="count"===f.scalemode?E.maxKDE/m*(E.maxCount/r.pts.length):E.maxKDE/m}if(w){for(h=Array(k),l=0;l<k;l++)(d=h[l]={})[c.posLetter]=M+A[l].v/n,d[c.valLetter]=x.c2l(A[l].t,!0);i=g(h,f)}if(T){for(h=Array(k),u=0,l=k-1;u<k;u++,l--)(d=h[u]={})[c.posLetter]=M-A[l].v/n,d[c.valLetter]=x.c2l(A[l].t,!0);o=g(h,f)}if(_)s=i+"L"+o.substr(1)+"Z";else{var I=[S,x.c2p(A[0].t)],L=[S,x.c2p(A[k-1].t)];"h"===f.orientation&&(I.reverse(),L.reverse()),s=w?"M"+I+"L"+i.substr(1)+"L"+L:"M"+L+"L"+o.substr(1)+"L"+I}y.attr("d",s),r.posCenterPx=S,r.posDensityScale=n*m,r.path=y.node(),r.pathLength=r.path.getTotalLength()/(_?2:1)});var k,M,S,E=f.box,I=E.width,L=(E.line||{}).width;_?(k=m*I,M=0):w?(k=[0,m*I/2],M=L*({x:1,y:-1})[c.posLetter]):(k=[m*I/2,0],M=L*({x:-1,y:1})[c.posLetter]),l.plotBoxAndWhiskers(i,{pos:b,val:x},f,{bPos:v,bdPos:k,bPosPxOffset:M}),l.plotBoxMean(i,{pos:b,val:x},f,{bPos:v,bdPos:k,bPosPxOffset:M}),!f.box.visible&&f.meanline.visible&&(S=o.identity);var C=i.selectAll("path.meanline").data(S||[]);C.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",h?"none":"non-scaling-stroke"),C.exit().remove(),C.each(function(r){var n=x.c2p(r.mean,!0),i=u.getPositionOnKdePath(r,f,n);a.select(this).attr("d","h"===f.orientation?"M"+n+","+i[0]+"V"+i[1]:"M"+i[0]+","+n+"H"+i[1])}),l.plotPoints(i,{x:d,y:y},f,c)}})}},95908:function(r,n,i){var a=i(33428),o=i(76308),s=i(49224).stylePoints;r.exports=function(r){var n=a.select(r).selectAll("g.trace.violins");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(n){var i=n[0].trace,l=a.select(this),c=i.box||{},u=c.line||{},f=i.meanline||{},h=f.width;l.selectAll("path.violin").style("stroke-width",i.line.width+"px").call(o.stroke,i.line.color).call(o.fill,i.fillcolor),l.selectAll("path.box").style("stroke-width",u.width+"px").call(o.stroke,u.color).call(o.fill,c.fillcolor);var p={"stroke-width":h+"px","stroke-dasharray":2*h+"px,"+h+"px"};l.selectAll("path.mean").style(p).call(o.stroke,f.color),l.selectAll("path.meanline").style(p).call(o.stroke,f.color),s(l,i,r)})}},58168:function(r,n,i){var a=i(49084),o=i(50048),s=i(16716),l=i(45464),c=i(92880).extendFlat,u=i(67824).overrideAll,f=r.exports=u(c({x:o.x,y:o.y,z:o.z,value:o.value,isomin:o.isomin,isomax:o.isomax,surface:o.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:o.slices,caps:o.caps,text:o.text,hovertext:o.hovertext,xhoverformat:o.xhoverformat,yhoverformat:o.yhoverformat,zhoverformat:o.zhoverformat,valuehoverformat:o.valuehoverformat,hovertemplate:o.hovertemplate},a("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:o.colorbar,opacity:o.opacity,opacityscale:s.opacityscale,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:c({},l.hoverinfo),showlegend:c({},l.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},91976:function(r,n,i){var a=i(67792).gl_mesh3d,o=i(33040).parseColorScale,s=i(3400).isArrayOrTypedArray,l=i(43080),c=i(8932).extractOpts,u=i(52094),f=i(31460).findNearestOnAxis,h=i(31460).generateIsoMeshes;function p(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var d=p.prototype;d.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshX[n],a=this.data._meshY[n],o=this.data._meshZ[n],l=this.data._Ys.length,c=this.data._Zs.length,u=f(i,this.data._Xs).id,h=f(a,this.data._Ys).id,p=f(o,this.data._Zs).id,d=r.index=p+c*h+c*l*u;r.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var y=this.data.hovertext||this.data.text;return s(y)&&void 0!==y[d]?r.textLabel=y[d]:y&&(r.textLabel=y),!0}},d.update=function(r){var n=this.scene,i=n.fullSceneLayout;function a(r,n,i,a){return n.map(function(n){return r.d2l(n,0,a)*i})}this.data=h(r);var s={positions:u(a(i.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(i.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(i.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:u(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},f=c(r);s.vertexIntensity=r._meshIntensity,s.vertexIntensityBounds=[f.min,f.max],s.colormap=o(r),this.mesh.update(s)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new p(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},12448:function(r,n,i){var a=i(3400),o=i(58168),s=i(70548).supplyIsoDefaults,l=i(60192).opacityscaleDefaults;r.exports=function(r,n,i,c){function u(i,s){return a.coerce(r,n,o,i,s)}s(r,n,i,c,u),l(r,n,c,u)}},67776:function(r,n,i){r.exports={attributes:i(58168),supplyDefaults:i(12448),calc:i(62624),colorbar:{min:"cmin",max:"cmax"},plot:i(91976),moduleType:"trace",name:"volume",basePlotModule:i(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(r,n,i){var a=i(20832),o=i(52904).line,s=i(45464),l=i(29736).axisHoverFormat,c=i(21776).Ks,u=i(21776).Gw,f=i(10213),h=i(92880).extendFlat,p=i(76308);function d(r){return{marker:{color:h({},a.marker.color,{arrayOk:!1,editType:"style"}),line:{color:h({},a.marker.line.color,{arrayOk:!1,editType:"style"}),width:h({},a.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}r.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),hovertext:a.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:h({},s.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:a.text,textposition:a.textposition,insidetextanchor:a.insidetextanchor,textangle:a.textangle,textfont:a.textfont,insidetextfont:a.insidetextfont,outsidetextfont:a.outsidetextfont,constraintext:a.constraintext,cliponaxis:a.cliponaxis,orientation:a.orientation,offset:a.offset,width:a.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:h({},o.color,{dflt:p.defaultLine}),width:h({},o.width,{editType:"plot"}),dash:o.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,zorder:a.zorder}},73540:function(r,n,i){var a=i(54460),o=i(1220),s=i(3400).mergeArray,l=i(4500),c=i(39032).BADNUM;function u(r){return"a"===r||"absolute"===r}function f(r){return"t"===r||"total"===r}r.exports=function(r,n){var i,h,p,d,y,g,v=a.getFromId(r,n.xaxis||"x"),m=a.getFromId(r,n.yaxis||"y");"h"===n.orientation?(i=v.makeCalcdata(n,"x"),p=m.makeCalcdata(n,"y"),d=o(n,m,"y",p),y=!!n.yperiodalignment,g="y"):(i=m.makeCalcdata(n,"y"),p=v.makeCalcdata(n,"x"),d=o(n,v,"x",p),y=!!n.xperiodalignment,g="x"),h=d.vals;for(var x,b=Math.min(h.length,i.length),_=Array(b),w=0,T=!1,A=0;A<b;A++){var k=i[A]||0,M=!1;(i[A]!==c||f(n.measure[A])||u(n.measure[A]))&&A+1<b&&(i[A+1]!==c||f(n.measure[A+1])||u(n.measure[A+1]))&&(M=!0);var S=_[A]={i:A,p:h[A],s:k,rawS:k,cNext:M};u(n.measure[A])?(w=S.s,S.isSum=!0,S.dir="totals",S.s=w):f(n.measure[A])?(S.isSum=!0,S.dir="totals",S.s=w):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",x=S.s,S.s=w+x,w+=x),"totals"===S.dir&&(T=!0),y&&(_[A].orig_p=p[A],_[A][g+"End"]=d.ends[A],_[A][g+"Start"]=d.starts[A]),n.ids&&(S.id=String(n.ids[A])),S.v=(n.base||0)+w}return _.length&&(_[0].hasTotals=T),s(n.text,_,"tx"),s(n.hovertext,_,"htx"),l(_,n),_}},10213:function(r){r.exports={eventDataKeys:["initial","delta","final"]}},50152:function(r,n,i){var a=i(96376).setGroupPositions;r.exports=function(r,n){var i,o,s=r._fullLayout,l=r._fullData,c=r.calcdata,u=n.xaxis,f=n.yaxis,h=[],p=[],d=[];for(o=0;o<l.length;o++){var y=l[o];!0===y.visible&&y.xaxis===u._id&&y.yaxis===f._id&&"waterfall"===y.type&&(i=c[o],"h"===y.orientation?d.push(i):p.push(i),h.push(i))}var g={mode:s.waterfallmode,norm:s.waterfallnorm,gap:s.waterfallgap,groupgap:s.waterfallgroupgap};for(a(r,u,f,p,g),a(r,f,u,d,g),o=0;o<h.length;o++){i=h[o];for(var v=0;v<i.length;v++){var m=i[v];!1===m.isSum&&(m.s0+=0===v?0:i[v-1].s),v+1<i.length&&(i[v].nextP0=i[v+1].p0,i[v].nextS0=i[v+1].s0)}}}},24224:function(r,n,i){var a=i(3400),o=i(20011),s=i(31508).handleText,l=i(43980),c=i(31147),u=i(65776),f=i(76308),h=i(48164),p=h.INCREASING.COLOR,d=h.DECREASING.COLOR;function y(r,n,i){r(n+".marker.color",i),r(n+".marker.line.color",f.defaultLine),r(n+".marker.line.width")}r.exports={supplyDefaults:function(r,n,i,o){function f(i,o){return a.coerce(r,n,u,i,o)}if(l(r,n,o,f)){c(r,n,o,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",n.x&&!n.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var h=f("textposition");s(r,n,o,f,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==n.textposition&&(f("texttemplate"),n.texttemplate||f("textinfo")),y(f,"increasing",p),y(f,"decreasing",d),y(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash"))),f("zorder")}else n.visible=!1},crossTraceDefaults:function(r,n){var i;function s(r){return a.coerce(i._input,i,u,r)}if("group"===n.waterfallmode)for(var l=0;l<r.length;l++)o((i=r[l])._input,i,n,s)}}},53256:function(r){r.exports=function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"initial"in n&&(r.initial=n.initial),"delta"in n&&(r.delta=n.delta),"final"in n&&(r.final=n.final),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},94196:function(r,n,i){var a=i(54460).hoverLabelText,o=i(76308).opacity,s=i(63400).hoverOnBars,l=i(48164),c=l.INCREASING.SYMBOL,u=l.DECREASING.SYMBOL;r.exports=function(r,n,i,l,f){var h=s(r,n,i,l,f);if(h){var p,d,y,g,v=h.cd,m=v[0].trace,x="h"===m.orientation,b=x?"x":"y",_=x?r.xa:r.ya,w=v[h.index],T=w.isSum?w.b+w.s:w.rawS;h.initial=w.b+w.s-T,h.delta=T,h.final=h.initial+h.delta;var A=L(Math.abs(h.delta));h.deltaLabel=T<0?"("+A+")":A,h.finalLabel=L(h.final),h.initialLabel=L(h.initial);var k=w.hi||m.hoverinfo,M=[];if(k&&"none"!==k&&"skip"!==k){var S="all"===k,E=k.split("+"),I=function(r){return S||-1!==E.indexOf(r)};w.isSum||(!I("final")||I(x?"x":"y")||M.push(h.finalLabel),I("delta")&&(T<0?M.push(h.deltaLabel+" "+u):M.push(h.deltaLabel+" "+c)),I("initial")&&M.push("Initial: "+h.initialLabel))}return M.length&&(h.extraText=M.join("<br>")),h.color=(d=(p=m[w.dir].marker).color,y=p.line.color,g=p.line.width,o(d)?d:o(y)&&g?y:void 0),[h]}function L(r){return a(_,r,m[b+"hoverformat"])}}},95952:function(r,n,i){r.exports={attributes:i(65776),layoutAttributes:i(91352),supplyDefaults:i(24224).supplyDefaults,crossTraceDefaults:i(24224).crossTraceDefaults,supplyLayoutDefaults:i(59464),calc:i(73540),crossTraceCalc:i(50152),plot:i(64488),style:i(12252).style,hoverPoints:i(94196),eventData:i(53256),selectPoints:i(45784),moduleType:"trace",name:"waterfall",basePlotModule:i(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(r){r.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(r,n,i){var a=i(3400),o=i(91352);r.exports=function(r,n,i){var s=!1;function l(i,s){return a.coerce(r,n,o,i,s)}for(var c=0;c<i.length;c++){var u=i[c];if(u.visible&&"waterfall"===u.type){s=!0;break}}s&&(l("waterfallmode"),l("waterfallgap",.2),l("waterfallgroupgap"))}},64488:function(r,n,i){var a=i(33428),o=i(3400),s=i(43616),l=i(39032).BADNUM,c=i(98184),u=i(82744).clearMinTextSize;r.exports=function(r,n,i,f){var h=r._fullLayout;u("waterfall",h),c.plot(r,n,i,f,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),function(r,n,i,c){var u=n.xaxis,f=n.yaxis;o.makeTraceGroups(c,i,"trace bars").each(function(i){var c=a.select(this),h=i[0].trace,p=o.ensureSingle(c,"g","lines");if(h.connector&&h.connector.visible){var d="h"===h.orientation,y=h.connector.mode,g=p.selectAll("g.line").data(o.identity);g.enter().append("g").classed("line",!0),g.exit().remove();var v=g.size();g.each(function(i,c){if(c===v-1||i.cNext){var h,p,g,m,x=(h=[],p=[],g=d?u:f,m=d?f:u,h[0]=g.c2p(i.s0,!0),p[0]=m.c2p(i.p0,!0),h[1]=g.c2p(i.s1,!0),p[1]=m.c2p(i.p1,!0),h[2]=g.c2p(i.nextS0,!0),p[2]=m.c2p(i.nextP0,!0),d?[h,p]:[p,h]),b=x[0],_=x[1],w="";b[0]!==l&&_[0]!==l&&b[1]!==l&&_[1]!==l&&("spanning"===y&&!i.isSum&&c>0&&(w+=d?"M"+b[0]+","+_[1]+"V"+_[0]:"M"+b[1]+","+_[0]+"H"+b[0]),"between"!==y&&(i.isSum||c<v-1)&&(w+=d?"M"+b[1]+","+_[0]+"V"+_[1]:"M"+b[0]+","+_[1]+"H"+b[1]),b[2]!==l&&_[2]!==l&&(w+=d?"M"+b[1]+","+_[1]+"V"+_[2]:"M"+b[1]+","+_[1]+"H"+b[2])),""===w&&(w="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",w).call(s.setClipUrl,n.layerClipId,r)}})}else p.remove()})}(r,n,i,f)}},12252:function(r,n,i){var a=i(33428),o=i(43616),s=i(76308),l=i(13448).DESELECTDIM,c=i(60100),u=i(82744).resizeText,f=c.styleTextPoints;r.exports={style:function(r,n,i){var c=i||a.select(r).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");u(r,c,"waterfall"),c.style("opacity",function(r){return r[0].trace.opacity}),c.each(function(n){var i=a.select(this),c=n[0].trace;i.selectAll(".point > path").each(function(r){if(!r.isBlank){var n=c[r.dir].marker;a.select(this).call(s.fill,n.color).call(s.stroke,n.line.color).call(o.dashLine,n.line.dash,n.line.width).style("opacity",c.selectedpoints&&!r.selected?l:1)}}),f(i,c,r),i.selectAll(".lines").each(function(){var r=c.connector.line;o.lineGroupStyle(a.select(this).selectAll("path"),r.width,r.color,r.dash)})})}}},84224:function(r,n,i){var a=i(54460),o=i(3400),s=i(73060),l=i(60468).W,c=i(39032).BADNUM;n.moduleType="transform",n.name="aggregate";var u=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},f=u.aggregations;function h(r,n,i,s){if(s.enabled){for(var l=s.target,u=o.nestedProperty(n,l),f=u.get(),h=function(r,n){var i=r.func,a=n.d2c,s=n.c2d;switch(i){case"count":return p;case"first":return d;case"last":return y;case"sum":return function(r,n){for(var i=0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==c&&(i+=l)}return s(i)};case"avg":return function(r,n){for(var i=0,o=0,l=0;l<n.length;l++){var u=a(r[n[l]]);u!==c&&(i+=u,o++)}return o?s(i/o):c};case"min":return function(r,n){for(var i=1/0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==c&&(i=Math.min(i,l))}return i===1/0?c:s(i)};case"max":return function(r,n){for(var i=-1/0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==c&&(i=Math.max(i,l))}return i===-1/0?c:s(i)};case"range":return function(r,n){for(var i=1/0,o=-1/0,l=0;l<n.length;l++){var u=a(r[n[l]]);u!==c&&(i=Math.min(i,u),o=Math.max(o,u))}return o===-1/0||i===1/0?c:s(o-i)};case"change":return function(r,n){var i=a(r[n[0]]),o=a(r[n[n.length-1]]);return i===c||o===c?c:s(o-i)};case"median":return function(r,n){for(var i=[],l=0;l<n.length;l++){var u=a(r[n[l]]);u!==c&&i.push(u)}if(!i.length)return c;i.sort(o.sorterAsc);var f=(i.length-1)/2;return s((i[Math.floor(f)]+i[Math.ceil(f)])/2)};case"mode":return function(r,n){for(var i={},o=0,l=c,u=0;u<n.length;u++){var f=a(r[n[u]]);if(f!==c){var h=i[f]=(i[f]||0)+1;h>o&&(o=h,l=f)}}return o?s(l):c};case"rms":return function(r,n){for(var i=0,o=0,l=0;l<n.length;l++){var u=a(r[n[l]]);u!==c&&(i+=u*u,o++)}return o?s(Math.sqrt(i/o)):c};case"stddev":return function(n,i){var o,s=0,l=0,u=1,f=c;for(o=0;o<i.length&&f===c;o++)f=a(n[i[o]]);if(f===c)return c;for(;o<i.length;o++){var h=a(n[i[o]]);if(h!==c){var p=h-f;s+=p,l+=p*p,u++}}var d="sample"===r.funcmode?u-1:u;return d?Math.sqrt((l-s*s/u)/d):0}}}(s,a.getDataConversions(r,n,l,f)),g=Array(i.length),v=0;v<i.length;v++)g[v]=h(f,i[v]);u.set(g),"count"===s.func&&o.pushUnique(n._arrayAttrs,l)}}function p(r,n){return n.length}function d(r,n){return r[n[0]]}function y(r,n){return r[n[n.length-1]]}n.supplyDefaults=function(r,n){var i,a={};function l(n,i){return o.coerce(r,a,u,n,i)}if(!l("enabled"))return a;var c=s.findArrayAttributes(n),h={};for(i=0;i<c.length;i++)h[c[i]]=1;var p=l("groups");if(!Array.isArray(p)){if(!h[p])return a.enabled=!1,a;h[p]=0}var d,y=r.aggregations||[],g=a.aggregations=Array(y.length);function v(r,n){return o.coerce(y[i],d,f,r,n)}for(i=0;i<y.length;i++){d={_index:i};var m=v("target"),x=v("func");v("enabled")&&m&&(h[m]||"count"===x&&void 0===h[m])?("stddev"===x&&v("funcmode"),h[m]=0,g[i]=d):g[i]={enabled:!1,_index:i}}for(i=0;i<c.length;i++)h[c[i]]&&g.push({target:c[i],func:f.func.dflt,enabled:!0,_index:-1});return a},n.calcTransform=function(r,n,i){if(i.enabled){var a=i.groups,s=o.getTargetArray(n,{target:a});if(s){var c,u,f,p,d={},y={},g=[],v=l(n.transforms,i),m=s.length;for(n._length&&(m=Math.min(m,n._length)),c=0;c<m;c++)void 0===(f=d[u=s[c]])?(d[u]=g.length,p=[c],g.push(p),y[d[u]]=v(c)):(g[f].push(c),y[d[u]]=(y[d[u]]||[]).concat(v(c)));i._indexToPoints=y;var x=i.aggregations;for(c=0;c<x.length;c++)h(r,n,g,x[c]);"string"==typeof a&&h(r,n,g,{target:a,func:"first",enabled:!0}),n._length=g.length}}}},76744:function(r,n,i){var a=i(3400),o=i(24040),s=i(54460),l=i(60468).W,c=i(69104),u=c.COMPARISON_OPS,f=c.INTERVAL_OPS,h=c.SET_OPS;n.moduleType="transform",n.name="filter",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(u).concat(f).concat(h),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},n.supplyDefaults=function(r){var i={};function s(o,s){return a.coerce(r,i,n.attributes,o,s)}if(s("enabled")){var l=s("target");if(a.isArrayOrTypedArray(l)&&0===l.length)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var c=o.getComponentMethod("calendars","handleDefaults");c(r,i,"valuecalendar",null),c(r,i,"targetcalendar",null)}return i},n.calcTransform=function(r,n,i){if(i.enabled){var o=a.getTargetArray(n,i);if(o){var c=i.target,p=o.length;n._length&&(p=Math.min(p,n._length));var d=i.targetcalendar,y=n._arrayAttrs,g=i.preservegaps;if("string"==typeof c){var v=a.nestedProperty(n,c+"calendar").get();v&&(d=v)}var m,x,b=function(r,n,i){var o=r.operation,s=r.value,l=a.isArrayOrTypedArray(s);function c(r){return -1!==r.indexOf(o)}var p,d=function(i){return n(i,0,r.valuecalendar)},y=function(r){return n(r,0,i)};switch(c(u)?p=d(l?s[0]:s):c(f)?p=l?[d(s[0]),d(s[1])]:[d(s),d(s)]:c(h)&&(p=l?s.map(d):[d(s)]),o){case"=":return function(r){return y(r)===p};case"!=":return function(r){return y(r)!==p};case"<":return function(r){return y(r)<p};case"<=":return function(r){return y(r)<=p};case">":return function(r){return y(r)>p};case">=":return function(r){return y(r)>=p};case"[]":return function(r){var n=y(r);return n>=p[0]&&n<=p[1]};case"()":return function(r){var n=y(r);return n>p[0]&&n<p[1]};case"[)":return function(r){var n=y(r);return n>=p[0]&&n<p[1]};case"(]":return function(r){var n=y(r);return n>p[0]&&n<=p[1]};case"][":return function(r){var n=y(r);return n<=p[0]||n>=p[1]};case")(":return function(r){var n=y(r);return n<p[0]||n>p[1]};case"](":return function(r){var n=y(r);return n<=p[0]||n>p[1]};case")[":return function(r){var n=y(r);return n<p[0]||n>=p[1]};case"{}":return function(r){return -1!==p.indexOf(y(r))};case"}{":return function(r){return -1===p.indexOf(y(r))}}}(i,s.getDataToCoordFunc(r,n,c,o),d),_={},w={},T=0;g?(m=function(r){_[r.astr]=a.extendDeep([],r.get()),r.set(Array(p))},x=function(r,n){var i=_[r.astr][n];r.get()[n]=i}):(m=function(r){_[r.astr]=a.extendDeep([],r.get()),r.set([])},x=function(r,n){var i=_[r.astr][n];r.get().push(i)}),M(m);for(var A=l(n.transforms,i),k=0;k<p;k++)b(o[k])?(M(x,k),w[T++]=A(k)):g&&T++;i._indexToPoints=w,n._length=T}}function M(r,i){for(var o=0;o<y.length;o++)r(a.nestedProperty(n,y[o]),i)}}},32028:function(r,n,i){var a=i(3400),o=i(73060),s=i(7316),l=i(60468).W;n.moduleType="transform",n.name="groupby",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},n.supplyDefaults=function(r,i,o){var s,l={};function c(i,o){return a.coerce(r,l,n.attributes,i,o)}if(!c("enabled"))return l;c("groups"),c("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var u=r.styles,f=l.styles=[];if(u)for(s=0;s<u.length;s++){var h=f[s]={};a.coerce(u[s],f[s],n.attributes.styles,"target");var p=a.coerce(u[s],f[s],n.attributes.styles,"value");a.isPlainObject(p)?h.value=a.extendDeep({},p):p&&delete h.value}return l},n.transform=function(r,n){var i,c,u,f=[];for(c=0;c<r.length;c++)for(i=function(r,n){var i,c,u,f,h,p,d,y,g,v,m=n.transform,x=n.transformIndex,b=r.transforms[x].groups,_=l(r.transforms,m);if(!a.isArrayOrTypedArray(b)||0===b.length)return[r];var w=a.filterUnique(b),T=Array(w.length),A=b.length,k=o.findArrayAttributes(r),M=m.styles||[],S={};for(i=0;i<M.length;i++)S[M[i].target]=M[i].value;m.styles&&(v=a.keyedContainer(m,"styles","target","value.name"));var E={},I={};for(i=0;i<w.length;i++){E[p=w[i]]=i,I[p]=0,(d=T[i]=a.extendDeepNoArrays({},r))._group=p,d.transforms[x]._indexToPoints={};var L=null;for(v&&(L=v.get(p)),d.name=L||""===L?L:a.templateString(m.nameformat,{trace:r.name,group:p}),y=d.transforms,d.transforms=[],c=0;c<y.length;c++)d.transforms[c]=a.extendDeepNoArrays({},y[c]);for(c=0;c<k.length;c++)a.nestedProperty(d,k[c]).set([])}for(u=0;u<k.length;u++){for(f=k[u],c=0,g=[];c<w.length;c++)g[c]=a.nestedProperty(T[c],f).get();for(h=a.nestedProperty(r,f).get(),c=0;c<A;c++)g[E[b[c]]].push(h[c])}for(c=0;c<A;c++)(d=T[E[b[c]]]).transforms[x]._indexToPoints[I[b[c]]]=_(c),I[b[c]]++;for(i=0;i<w.length;i++)p=w[i],d=T[i],s.clearExpandedTraceDefaultColors(d),d=a.extendDeepNoArrays(d,S[p]||{});return T}(r[c],n),u=0;u<i.length;u++)f.push(i[u]);return f}},60468:function(r,n){n.W=function(r,n){for(var i,a,o=0;o<r.length&&(i=r[o])!==n;o++)i._indexToPoints&&!1!==i.enabled&&(a=i._indexToPoints);return a?function(r){return a[r]}:function(r){return[r]}}},76272:function(r,n,i){var a=i(3400),o=i(54460),s=i(60468).W,l=i(39032).BADNUM;n.moduleType="transform",n.name="sort",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},n.supplyDefaults=function(r){var i={};function o(o,s){return a.coerce(r,i,n.attributes,o,s)}return o("enabled")&&(o("target"),o("order")),i},n.calcTransform=function(r,n,i){if(i.enabled){var c=a.getTargetArray(n,i);if(c){var u=i.target,f=c.length;n._length&&(f=Math.min(f,n._length));var h,p,d=n._arrayAttrs,y=function(r,n,i,a){var o,s=Array(a),c=Array(a);for(o=0;o<a;o++)s[o]={v:n[o],i:o};for(s.sort(function(r,n){switch(r.order){case"ascending":return function(r,i){var a=n(r.v),o=n(i.v);return a===l?1:o===l?-1:a-o};case"descending":return function(r,i){var a=n(r.v),o=n(i.v);return a===l?1:o===l?-1:o-a}}}(r,i)),o=0;o<a;o++)c[o]=s[o].i;return c}(i,c,o.getDataToCoordFunc(r,n,u,c),f),g=s(n.transforms,i),v={};for(h=0;h<d.length;h++){var m=a.nestedProperty(n,d[h]),x=m.get(),b=Array(f);for(p=0;p<f;p++)b[p]=x[y[p]];m.set(b)}for(p=0;p<f;p++)v[p]=g(y[p]);i._indexToPoints=v,n._length=f}}}},25788:function(r,n){n.version="2.34.0"},67792:function(r,n,i){var a=i(4168);!function(){var n={1964:function(r,n,i){r.exports={alpha_shape:i(3502),convex_hull:i(7352),delaunay_triangulate:i(7642),gl_cone3d:i(6405),gl_error3d:i(9165),gl_heatmap2d:i(2510),gl_line3d:i(5714),gl_mesh3d:i(7201),gl_plot2d:i(1850),gl_plot3d:i(4100),gl_pointcloud2d:i(4696),gl_scatter3d:i(8418),gl_select_box:i(3161),gl_spikes2d:i(4098),gl_streamtube3d:i(7815),gl_surface3d:i(9499),ndarray:i(9618),ndarray_linear_interpolate:i(4317)}},4793:function(r,n,i){function a(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(a=function(){return!!r})()}function o(r){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function s(r,n){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r})(r,n)}function l(r){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var c=i(7507),u=i(3778),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function h(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');var n=new Uint8Array(r);return Object.setPrototypeOf(n,p.prototype),n}function p(r,n,i){if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return d(r,n,i)}function d(r,n,i){if("string"==typeof r)return function(r,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw TypeError("Unknown encoding: "+n);var i=0|b(r,n),a=h(i),o=a.write(r,n);return o!==i&&(a=a.slice(0,o)),a}(r,n);if(ArrayBuffer.isView(r))return function(r){if(q(r,Uint8Array)){var n=new Uint8Array(r);return m(n.buffer,n.byteOffset,n.byteLength)}return v(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r));if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return m(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');var a=r.valueOf&&r.valueOf();if(null!=a&&a!==r)return p.from(a,n,i);var o=function(r){if(p.isBuffer(r)){var n,i=0|x(r.length),a=h(i);return 0===a.length||r.copy(a,0,0,i),a}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n?h(0):v(r):"Buffer"===r.type&&Array.isArray(r.data)?v(r.data):void 0}(r);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return p.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r))}function y(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function g(r){return y(r),h(r<0?0:0|x(r))}function v(r){for(var n=r.length<0?0:0|x(r.length),i=h(n),a=0;a<n;a+=1)i[a]=255&r[a];return i}function m(r,n,i){var a;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),p.prototype),a}function x(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function b(r,n){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(r));var i=r.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===i)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return j(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(r).length;default:if(o)return a?-1:j(r).length;n=(""+n).toLowerCase(),o=!0}}function _(r,n,i){var a,o,s=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(n>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){var a=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>a)&&(i=a);for(var o="",s=n;s<i;++s)o+=G[r[s]];return o}(this,n,i);case"utf8":case"utf-8":return k(this,n,i);case"ascii":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(127&r[o]);return a}(this,n,i);case"latin1":case"binary":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(r[o]);return a}(this,n,i);case"base64":return a=n,o=i,0===a&&o===this.length?c.fromByteArray(this):c.fromByteArray(this.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){for(var a=r.slice(n,i),o="",s=0;s<a.length-1;s+=2)o+=String.fromCharCode(a[s]+256*a[s+1]);return o}(this,n,i);default:if(s)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}function w(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function T(r,n,i,a,o){var s;if(0===r.length)return -1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(o)return -1;i=r.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=p.from(n,a)),p.isBuffer(n))return 0===n.length?-1:A(r,n,i,a,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):A(r,[n],i,a,o);throw TypeError("val must be string, number or Buffer")}function A(r,n,i,a,o){var s,l=1,c=r.length,u=n.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||n.length<2)return -1;l=2,c/=2,u/=2,i/=2}function f(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(o){var h=-1;for(s=i;s<c;s++)if(f(r,s)===f(n,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*l}else -1!==h&&(s-=s-h),h=-1}else for(i+u>c&&(i=c-u),s=i;s>=0;s--){for(var p=!0,d=0;d<u;d++)if(f(r,s+d)!==f(n,d)){p=!1;break}if(p)return s}return -1}function k(r,n,i){i=Math.min(r.length,i);for(var a=[],o=n;o<i;){var s=r[o],l=null,c=s>239?4:s>223?3:s>191?2:1;if(o+c<=i){var u=void 0,f=void 0,h=void 0,p=void 0;switch(c){case 1:s<128&&(l=s);break;case 2:128==(192&(u=r[o+1]))&&(p=(31&s)<<6|63&u)>127&&(l=p);break;case 3:u=r[o+1],f=r[o+2],128==(192&u)&&128==(192&f)&&(p=(15&s)<<12|(63&u)<<6|63&f)>2047&&(p<55296||p>57343)&&(l=p);break;case 4:u=r[o+1],f=r[o+2],h=r[o+3],128==(192&u)&&128==(192&f)&&128==(192&h)&&(p=(15&s)<<18|(63&u)<<12|(63&f)<<6|63&h)>65535&&p<1114112&&(l=p)}}null===l?(l=65533,c=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|1023&l),a.push(l),o+=c}return function(r){var n=r.length;if(n<=M)return String.fromCharCode.apply(String,r);for(var i="",a=0;a<n;)i+=String.fromCharCode.apply(String,r.slice(a,a+=M));return i}(a)}n.hp=p,n.IS=50,p.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(r,n,i){return d(r,n,i)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(r,n,i){return y(r),r<=0?h(r):void 0!==n?"string"==typeof i?h(r).fill(n,i):h(r).fill(n):h(r)},p.allocUnsafe=function(r){return g(r)},p.allocUnsafeSlow=function(r){return g(r)},p.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==p.prototype},p.compare=function(r,n){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),q(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),!p.isBuffer(r)||!p.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0},p.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(r,n){if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return p.alloc(0);if(void 0===n)for(n=0,i=0;i<r.length;++i)n+=r[i].length;var i,a=p.allocUnsafe(n),o=0;for(i=0;i<r.length;++i){var s=r[i];if(q(s,Uint8Array))o+s.length>a.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(a,o)):Uint8Array.prototype.set.call(a,s,o);else{if(!p.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(a,o)}o+=s.length}return a},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)w(this,n,n+1);return this},p.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},p.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)w(this,n,n+7),w(this,n+1,n+6),w(this,n+2,n+5),w(this,n+3,n+4);return this},p.prototype.toString=function(){var r=this.length;return 0===r?"":0==arguments.length?k(this,0,r):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(r){if(!p.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===p.compare(this,r)},p.prototype.inspect=function(){var r="",i=n.IS;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},f&&(p.prototype[f]=p.prototype.inspect),p.prototype.compare=function(r,n,i,a,o){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),!p.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(r));if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),n<0||i>r.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&n>=i)return 0;if(a>=o)return -1;if(n>=i)return 1;if(this===r)return 0;for(var s=(o>>>=0)-(a>>>=0),c=(i>>>=0)-(n>>>=0),u=Math.min(s,c),f=this.slice(a,o),h=r.slice(n,i),d=0;d<u;++d)if(f[d]!==h[d]){s=f[d],c=h[d];break}return s<c?-1:c<s?1:0},p.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},p.prototype.indexOf=function(r,n,i){return T(this,r,n,i,!0)},p.prototype.lastIndexOf=function(r,n,i){return T(this,r,n,i,!1)},p.prototype.write=function(r,n,i,a){if(void 0===n)a="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)a=n,i=this.length,n=0;else{if(!isFinite(n))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var o,s,l,c,u,f,h,p,d=this.length-n;if((void 0===i||i>d)&&(i=d),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var y=!1;;)switch(a){case"hex":return function(r,n,i,a){i=Number(i)||0;var o=r.length-i;a?(a=Number(a))>o&&(a=o):a=o;var s,l=n.length;for(a>l/2&&(a=l/2),s=0;s<a;++s){var c=parseInt(n.substr(2*s,2),16);if(c!=c)break;r[i+s]=c}return s}(this,r,n,i);case"utf8":case"utf-8":return o=n,s=i,H(j(r,this.length-o),this,o,s);case"ascii":case"latin1":case"binary":return l=n,c=i,H(function(r){for(var n=[],i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,c);case"base64":return u=n,f=i,H(V(r),this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=n,p=i,H(function(r,n){for(var i,a,o=[],s=0;s<r.length&&!((n-=2)<0);++s)a=(i=r.charCodeAt(s))>>8,o.push(i%256),o.push(a);return o}(r,this.length-h),this,h,p);default:if(y)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),y=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function E(r,n,i,a,o,s){if(!p.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+a>r.length)throw RangeError("Index out of range")}function I(r,n,i,a,o){z(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function L(r,n,i,a,o){z(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function C(r,n,i,a,o,s){if(i+a>r.length||i<0)throw RangeError("Index out of range")}function O(r,n,i,a,o){return n=+n,i>>>=0,o||C(r,0,i,4),u.write(r,n,i,a,23,4),i+4}function D(r,n,i,a,o){return n=+n,i>>>=0,o||C(r,0,i,8),u.write(r,n,i,a,52,8),i+8}p.prototype.slice=function(r,n){var i=this.length;(r=~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),(n=void 0===n?i:~~n)<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);var a=this.subarray(r,n);return Object.setPrototypeOf(a,p.prototype),a},p.prototype.readUintLE=p.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a},p.prototype.readUintBE=p.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r+--n],o=1;n>0&&(o*=256);)a+=this[r+--n]*o;return a},p.prototype.readUint8=p.prototype.readUInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),this[r]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]|this[r+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]<<8|this[r+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},p.prototype.readBigUInt64LE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=n+256*this[++r]+65536*this[++r]+16777216*this[++r],o=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(a)+(BigInt(o)<<BigInt(32))}),p.prototype.readBigUInt64BE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=16777216*n+65536*this[++r]+256*this[++r]+this[++r],o=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(a)<<BigInt(32))+BigInt(o)}),p.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*n)),a},p.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=n,o=1,s=this[r+--a];a>0&&(o*=256);)s+=this[r+--a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},p.prototype.readInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},p.prototype.readInt16LE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt16BE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},p.prototype.readInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},p.prototype.readBigInt64LE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),p.prototype.readBigInt64BE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),p.prototype.readFloatLE=function(r,n){return r>>>=0,n||S(r,4,this.length),u.read(this,r,!0,23,4)},p.prototype.readFloatBE=function(r,n){return r>>>=0,n||S(r,4,this.length),u.read(this,r,!1,23,4)},p.prototype.readDoubleLE=function(r,n){return r>>>=0,n||S(r,8,this.length),u.read(this,r,!0,52,8)},p.prototype.readDoubleBE=function(r,n){return r>>>=0,n||S(r,8,this.length),u.read(this,r,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=1,s=0;for(this[n]=255&r;++s<i&&(o*=256);)this[n+s]=r/o&255;return n+i},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=i-1,s=1;for(this[n+o]=255&r;--o>=0&&(s*=256);)this[n+o]=r/s&255;return n+i},p.prototype.writeUint8=p.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,255,0),this[n]=255&r,n+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigUInt64LE=W(function(r){return I(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=W(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=0,l=1,c=0;for(this[n]=255&r;++s<i&&(l*=256);)r<0&&0===c&&0!==this[n+s-1]&&(c=1),this[n+s]=(r/l>>0)-c&255;return n+i},p.prototype.writeIntBE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=i-1,l=1,c=0;for(this[n+s]=255&r;--s>=0&&(l*=256);)r<0&&0===c&&0!==this[n+s+1]&&(c=1),this[n+s]=(r/l>>0)-c&255;return n+i},p.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},p.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},p.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigInt64LE=W(function(r){return I(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=W(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(r,n,i){return O(this,r,n,!0,i)},p.prototype.writeFloatBE=function(r,n,i){return O(this,r,n,!1,i)},p.prototype.writeDoubleLE=function(r,n,i){return D(this,r,n,!0,i)},p.prototype.writeDoubleBE=function(r,n,i){return D(this,r,n,!1,i)},p.prototype.copy=function(r,n,i,a){if(!p.isBuffer(r))throw TypeError("argument should be a Buffer");if(i||(i=0),a||0===a||(a=this.length),n>=r.length&&(n=r.length),n||(n=0),a>0&&a<i&&(a=i),a===i||0===r.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-n<a-i&&(a=r.length-n+i);var o=a-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,a):Uint8Array.prototype.set.call(r,this.subarray(i,a),n),o},p.prototype.fill=function(r,n,i,a){if("string"==typeof r){if("string"==typeof n?(a=n,n=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!p.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===r.length){var o,s=r.charCodeAt(0);("utf8"===a&&s<128||"latin1"===a)&&(r=s)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(o=n;o<i;++o)this[o]=r;else{var l=p.isBuffer(r)?r:p.from(r,a),c=l.length;if(0===c)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<i-n;++o)this[o+n]=l[o%c]}return this};var P={};function B(r,n,i){P[r]=function(i){var c;function u(){var i,s,c;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,u),s=o(s=u),Object.defineProperty(i=function(r,n){if(n&&("object"===l(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}(this,a()?Reflect.construct(s,c||[],o(this).constructor):s.apply(this,c)),"message",{value:n.apply(i,arguments),writable:!0,configurable:!0}),i.name="".concat(i.name," [").concat(r,"]"),i.stack,delete i.name,i}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&s(r,n)}(u,i),c=[{key:"code",get:function(){return r},set:function(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(r,"]: ").concat(this.message)}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,function(r){var n=function(r,n){if("object"!=l(r)||!r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var a=i.call(r,"string");if("object"!=l(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==l(n)?n:n+""}(a.key),a)}}(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),u}(i)}function R(r){for(var n="",i=r.length,a="-"===r[0]?1:0;i>=a+4;i-=3)n="_".concat(r.slice(i-3,i)).concat(n);return"".concat(r.slice(0,i)).concat(n)}function z(r,n,i,a,o,s){if(r>i||r<n){var l,c="bigint"==typeof n?"n":"";throw l=s>3?0===n||n===BigInt(0)?">= 0".concat(c," and < 2").concat(c," ** ").concat(8*(s+1)).concat(c):">= -(2".concat(c," ** ").concat(8*(s+1)-1).concat(c,") and < 2 ** ")+"".concat(8*(s+1)-1).concat(c):">= ".concat(n).concat(c," and <= ").concat(i).concat(c),new P.ERR_OUT_OF_RANGE("value",l,r)}F(o,"offset"),void 0!==a[o]&&void 0!==a[o+s]||N(o,a.length-(s+1))}function F(r,n){if("number"!=typeof r)throw new P.ERR_INVALID_ARG_TYPE(n,"number",r)}function N(r,n,i){if(Math.floor(r)!==r)throw F(r,i),new P.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(i||"offset",">= ".concat(i?1:0," and <= ").concat(n),r)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?"".concat(r," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(r,n){return'The "'.concat(r,'" argument must be of type number. Received type ').concat(l(n))},TypeError),B("ERR_OUT_OF_RANGE",function(r,n,i){var a=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?a=R(String(i)):"bigint"==typeof i&&(a=String(i),(i>Math.pow(BigInt(2),BigInt(32))||i<-Math.pow(BigInt(2),BigInt(32)))&&(a=R(a)),a+="n"),'The value of "'.concat(r,'" is out of range.')+" It must be ".concat(n,". Received ").concat(a)},RangeError);var U=/[^+/0-9A-Za-z-_]/g;function j(r,n){var i;n=n||1/0;for(var a=r.length,o=null,s=[],l=0;l<a;++l){if((i=r.charCodeAt(l))>55295&&i<57344){if(!o){if(i>56319||l+1===a){(n-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function V(r){return c.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function H(r,n,i,a){var o;for(o=0;o<a&&!(o+i>=n.length||o>=r.length);++o)n[o+i]=r[o];return o}function q(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}var G=function(){for(var r="0123456789abcdef",n=Array(256),i=0;i<16;++i)for(var a=16*i,o=0;o<16;++o)n[a+o]=r[i]+r[o];return n}();function W(r){return"undefined"==typeof BigInt?Y:r}function Y(){throw Error("BigInt not supported")}},9216:function(r){r.exports=o,r.exports.isMobile=o,r.exports.default=o;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,a=/android|ipad|playbook|silk/i;function o(r){r||(r={});var o=r.ua;if(o||"undefined"==typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!=typeof o)return!1;var s=n.test(o)&&!i.test(o)||!!r.tablet&&a.test(o);return!s&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(s=!0),s}},6296:function(r,n,i){r.exports=function(r){var n=(r=r||{}).eye||[0,0,1],i=r.center||[0,0,0],c=r.up||[0,1,0],u=r.distanceLimits||[0,1/0],f=r.mode||"turntable",h=a(),p=o(),d=s();return h.setDistanceLimits(u[0],u[1]),h.lookAt(0,n,i,c),p.setDistanceLimits(u[0],u[1]),p.lookAt(0,n,i,c),d.setDistanceLimits(u[0],u[1]),d.lookAt(0,n,i,c),new l({turntable:h,orbit:p,matrix:d},f)};var a=i(7261),o=i(9977),s=i(4192);function l(r,n){this._controllerNames=Object.keys(r),this._controllerList=this._controllerNames.map(function(n){return r[n]}),this._mode=n,this._active=r[n],this._active||(this._mode="turntable",this._active=r.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var c=l.prototype;c.flush=function(r){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].flush(r)},c.idle=function(r){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].idle(r)},c.lookAt=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].lookAt(r,n,i,a)},c.rotate=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].rotate(r,n,i,a)},c.pan=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].pan(r,n,i,a)},c.translate=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].translate(r,n,i,a)},c.setMatrix=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setMatrix(r,n)},c.setDistanceLimits=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setDistanceLimits(r,n)},c.setDistance=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setDistance(r,n)},c.recalcMatrix=function(r){this._active.recalcMatrix(r)},c.getDistance=function(r){return this._active.getDistance(r)},c.getDistanceLimits=function(r){return this._active.getDistanceLimits(r)},c.lastT=function(){return this._active.lastT()},c.setMode=function(r){if(r!==this._mode){var n=this._controllerNames.indexOf(r);if(!(n<0)){var i=this._active,a=this._controllerList[n],o=Math.max(i.lastT(),a.lastT());i.recalcMatrix(o),a.setMatrix(o,i.computedMatrix),this._active=a,this._mode=r,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},c.getMode=function(){return this._mode}},7169:function(r,n,i){var a="undefined"==typeof WeakMap?i(1538):WeakMap,o=i(2762),s=i(8116),l=new a;r.exports=function(r){var n=l.get(r),i=n&&(n._triangleBuffer.handle||n._triangleBuffer.buffer);if(!i||!r.isBuffer(i)){var a=o(r,new Float32Array([-1,-1,-1,4,4,-1]));(n=s(r,[{buffer:a,type:r.FLOAT,size:2}]))._triangleBuffer=a,l.set(r,n)}n.bind(),r.drawArrays(r.TRIANGLES,0,3),n.unbind()}},1085:function(r,n,i){var a=i(1371);r.exports=function(r,n,i){n="number"==typeof n?n:1,i=i||": ";var o=r.split(/\r?\n/),s=String(o.length+n-1).length;return o.map(function(r,o){var l=o+n,c=String(l).length;return a(l,s-c)+i+r}).join("\n")}},3952:function(r,n,i){r.exports=function(r){var n=r.length;if(0===n)return[];if(1===n)return[0];for(var i=r[0].length,o=[r[0]],s=[0],l=1;l<n;++l)if(o.push(r[l]),function(r,n){for(var i=Array(n+1),o=0;o<r.length;++o)i[o]=r[o];for(o=0;o<=r.length;++o){for(var s=r.length;s<=n;++s){for(var l=Array(n),c=0;c<n;++c)l[c]=Math.pow(s+1-o,c);i[s]=l}if(a.apply(void 0,i))return!0}return!1}(o,i)){if(s.push(l),s.length===i+1)break}else o.pop();return s};var a=i(3250)},5995:function(r,n,i){r.exports=function(r,n){return a(n).filter(function(i){for(var a=Array(i.length),s=0;s<i.length;++s)a[s]=n[i[s]];return o(a)*r<1})};var a=i(7642),o=i(6037)},3502:function(r,n,i){r.exports=function(r,n){return o(a(r,n))};var a=i(5995),o=i(9127)},6468:function(r){r.exports=function(r){return atob(r)}},2642:function(r,n,i){r.exports=function(r,n){for(var i=n.length,s=Array(i+1),l=0;l<i;++l){for(var c=Array(i+1),u=0;u<=i;++u)c[u]=r[u][l];s[l]=c}for(s[i]=Array(i+1),l=0;l<=i;++l)s[i][l]=1;var f=Array(i+1);for(l=0;l<i;++l)f[l]=n[l];f[i]=1;var h=a(s,f),p=o(h[i+1]);0===p&&(p=1);var d=Array(i+1);for(l=0;l<=i;++l)d[l]=o(h[l])/p;return d};var a=i(727);function o(r){for(var n=0,i=0;i<r.length;++i)n+=r[i];return n}},7507:function(r,n){n.byteLength=function(r){var n=c(r),i=n[0],a=n[1];return 3*(i+a)/4-a},n.toByteArray=function(r){var n,i,s=c(r),l=s[0],u=s[1],f=new o(3*(l+u)/4-u),h=0,p=u>0?l-4:l;for(i=0;i<p;i+=4)n=a[r.charCodeAt(i)]<<18|a[r.charCodeAt(i+1)]<<12|a[r.charCodeAt(i+2)]<<6|a[r.charCodeAt(i+3)],f[h++]=n>>16&255,f[h++]=n>>8&255,f[h++]=255&n;return 2===u&&(n=a[r.charCodeAt(i)]<<2|a[r.charCodeAt(i+1)]>>4,f[h++]=255&n),1===u&&(n=a[r.charCodeAt(i)]<<10|a[r.charCodeAt(i+1)]<<4|a[r.charCodeAt(i+2)]>>2,f[h++]=n>>8&255,f[h++]=255&n),f},n.fromByteArray=function(r){for(var n,a=r.length,o=a%3,s=[],l=0,c=a-o;l<c;l+=16383)s.push(function(r,n,a){for(var o,s=[],l=n;l<a;l+=3)s.push(i[(o=(r[l]<<16&16711680)+(r[l+1]<<8&65280)+(255&r[l+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}(r,l,l+16383>c?c:l+16383));return 1===o?s.push(i[(n=r[a-1])>>2]+i[n<<4&63]+"=="):2===o&&s.push(i[(n=(r[a-2]<<8)+r[a-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),s.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)i[l]=s[l],a[s.charCodeAt(l)]=l;function c(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");return -1===i&&(i=n),[i,i===n?0:4-i%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},3865:function(r,n,i){var a=i(869);r.exports=function(r,n){return a(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},1318:function(r){r.exports=function(r,n){return r[0].mul(n[1]).cmp(n[0].mul(r[1]))}},8697:function(r,n,i){var a=i(869);r.exports=function(r,n){return a(r[0].mul(n[1]),r[1].mul(n[0]))}},7842:function(r,n,i){var a=i(6330),o=i(1533),s=i(2651),l=i(4387),c=i(869),u=i(8697);r.exports=function r(n,i){if(a(n))return i?u(n,r(i)):[n[0].clone(),n[1].clone()];var f,h,p=0;if(o(n))f=n.clone();else if("string"==typeof n)f=l(n);else{if(0===n)return[s(0),s(1)];if(n===Math.floor(n))f=s(n);else{for(;n!==Math.floor(n);)n*=1157920892373162e62,p-=256;f=s(n)}}if(a(i))f.mul(i[1]),h=i[0].clone();else if(o(i))h=i.clone();else if("string"==typeof i)h=l(i);else if(i){if(i===Math.floor(i))h=s(i);else{for(;i!==Math.floor(i);)i*=1157920892373162e62,p+=256;h=s(i)}}else h=s(1);return p>0?f=f.ushln(p):p<0&&(h=h.ushln(-p)),c(f,h)}},6330:function(r,n,i){var a=i(1533);r.exports=function(r){return Array.isArray(r)&&2===r.length&&a(r[0])&&a(r[1])}},5716:function(r,n,i){var a=i(6859);r.exports=function(r){return r.cmp(new a(0))}},1369:function(r,n,i){var a=i(5716);r.exports=function(r){var n=r.length,i=r.words,o=0;if(1===n)o=i[0];else if(2===n)o=i[0]+67108864*i[1];else for(var s=0;s<n;s++)o+=i[s]*Math.pow(67108864,s);return a(r)*o}},4025:function(r,n,i){var a=i(2361),o=i(8828).countTrailingZeros;r.exports=function(r){var n=o(a.lo(r));if(n<32)return n;var i=o(a.hi(r));return i>20?52:i+32}},1533:function(r,n,i){i(6859),r.exports=function(r){return r&&"object"==typeof r&&!!r.words}},2651:function(r,n,i){var a=i(6859),o=i(2361);r.exports=function(r){var n=o.exponent(r);return n<52?new a(r):new a(r*Math.pow(2,52-n)).ushln(n-52)}},869:function(r,n,i){var a=i(2651),o=i(5716);r.exports=function(r,n){var i=o(r),s=o(n);if(0===i)return[a(0),a(1)];if(0===s)return[a(0),a(0)];s<0&&(r=r.neg(),n=n.neg());var l=r.gcd(n);return l.cmpn(1)?[r.div(l),n.div(l)]:[r,n]}},4387:function(r,n,i){var a=i(6859);r.exports=function(r){return new a(r)}},6504:function(r,n,i){var a=i(869);r.exports=function(r,n){return a(r[0].mul(n[0]),r[1].mul(n[1]))}},7721:function(r,n,i){var a=i(5716);r.exports=function(r){return a(r[0])*a(r[1])}},5572:function(r,n,i){var a=i(869);r.exports=function(r,n){return a(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},946:function(r,n,i){var a=i(1369),o=i(4025);r.exports=function(r){var n=r[0],i=r[1];if(0===n.cmpn(0))return 0;var s=n.abs().divmod(i.abs()),l=a(s.div),c=s.mod,u=n.negative!==i.negative?-1:1;if(0===c.cmpn(0))return u*l;if(l){var f=o(l)+4;return u*(l+(p=a(c.ushln(f).divRound(i)))*Math.pow(2,-f))}var h=i.bitLength()-c.bitLength()+53,p=a(c.ushln(h).divRound(i));return h<1023?u*p*Math.pow(2,-h):u*(p*=11125369292536007e-324)*Math.pow(2,1023-h)}},2478:function(r){function n(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)>=0?(s=l,o=l-1):a=l+1}return s}function i(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)>0?(s=l,o=l-1):a=l+1}return s}function a(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)<0?(s=l,a=l+1):o=l-1}return s}function o(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)<=0?(s=l,a=l+1):o=l-1}return s}function s(r,n,i,a,o){for(;a<=o;){var s=a+o>>>1,l=r[s],c=void 0!==i?i(l,n):l-n;if(0===c)return s;c<=0?a=s+1:o=s-1}return -1}function l(r,n,i,a,o,s){return"function"==typeof i?s(r,n,i,void 0===a?0:0|a,void 0===o?r.length-1:0|o):s(r,n,void 0,void 0===i?0:0|i,void 0===a?r.length-1:0|a)}r.exports={ge:function(r,i,a,o,s){return l(r,i,a,o,s,n)},gt:function(r,n,a,o,s){return l(r,n,a,o,s,i)},lt:function(r,n,i,o,s){return l(r,n,i,o,s,a)},le:function(r,n,i,a,s){return l(r,n,i,a,s,o)},eq:function(r,n,i,a,o){return l(r,n,i,a,o,s)}}},8828:function(r,n){function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},6859:function(r,n,i){!function(r,n){function a(r,n){if(!r)throw Error(n||"Assertion failed")}function o(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}function s(r,n,i){if(s.isBN(r))return r;this.negative=0,this.words=null,this.length=0,this.red=null,null!==r&&("le"!==n&&"be"!==n||(i=n,n=10),this._init(r||0,n||10,i||"be"))}"object"==typeof r?r.exports=s:n.BN=s,s.BN=s,s.wordSize=26;try{f="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(7790).Buffer}catch(r){}function l(r,n){var i=r.charCodeAt(n);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function c(r,n,i){var a=l(r,i);return i-1>=n&&(a|=l(r,i-1)<<4),a}function u(r,n,i,a){for(var o=0,s=Math.min(r.length,i),l=n;l<s;l++){var c=r.charCodeAt(l)-48;o*=a,o+=c>=49?c-49+10:c>=17?c-17+10:c}return o}s.isBN=function(r){return r instanceof s||null!==r&&"object"==typeof r&&r.constructor.wordSize===s.wordSize&&Array.isArray(r.words)},s.max=function(r,n){return r.cmp(n)>0?r:n},s.min=function(r,n){return 0>r.cmp(n)?r:n},s.prototype._init=function(r,n,i){if("number"==typeof r)return this._initNumber(r,n,i);if("object"==typeof r)return this._initArray(r,n,i);"hex"===n&&(n=16),a(n===(0|n)&&n>=2&&n<=36);var o=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<r.length&&(16===n?this._parseHex(r,o,i):(this._parseBase(r,n,o),"le"===i&&this._initArray(this.toArray(),n,i)))},s.prototype._initNumber=function(r,n,i){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(a(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),n,i)},s.prototype._initArray=function(r,n,i){if(a("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var s,l,c=0;if("be"===i)for(o=r.length-1,s=0;o>=0;o-=3)l=r[o]|r[o-1]<<8|r[o-2]<<16,this.words[s]|=l<<c&67108863,this.words[s+1]=l>>>26-c&67108863,(c+=24)>=26&&(c-=26,s++);else if("le"===i)for(o=0,s=0;o<r.length;o+=3)l=r[o]|r[o+1]<<8|r[o+2]<<16,this.words[s]|=l<<c&67108863,this.words[s+1]=l>>>26-c&67108863,(c+=24)>=26&&(c-=26,s++);return this.strip()},s.prototype._parseHex=function(r,n,i){this.length=Math.ceil((r.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var o,s=0,l=0;if("be"===i)for(a=r.length-1;a>=n;a-=2)o=c(r,n,a)<<s,this.words[l]|=67108863&o,s>=18?(s-=18,l+=1,this.words[l]|=o>>>26):s+=8;else for(a=(r.length-n)%2==0?n+1:n;a<r.length;a+=2)o=c(r,n,a)<<s,this.words[l]|=67108863&o,s>=18?(s-=18,l+=1,this.words[l]|=o>>>26):s+=8;this.strip()},s.prototype._parseBase=function(r,n,i){this.words=[0],this.length=1;for(var a=0,o=1;o<=67108863;o*=n)a++;a--,o=o/n|0;for(var s=r.length-i,l=s%a,c=Math.min(s,s-l)+i,f=0,h=i;h<c;h+=a)f=u(r,h,h+a,n),this.imuln(o),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(0!==l){var p=1;for(f=u(r,h,r.length,n),h=0;h<l;h++)p*=n;this.imuln(p),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},s.prototype.copy=function(r){r.words=Array(this.length);for(var n=0;n<this.length;n++)r.words[n]=this.words[n];r.length=this.length,r.negative=this.negative,r.red=this.red},s.prototype.clone=function(){var r=new s(null);return this.copy(r),r},s.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(r,n,i){i.negative=n.negative^r.negative;var a=r.length+n.length|0;i.length=a,a=a-1|0;var o=0|r.words[0],s=0|n.words[0],l=o*s,c=67108863&l,u=l/67108864|0;i.words[0]=c;for(var f=1;f<a;f++){for(var h=u>>>26,p=67108863&u,d=Math.min(f,n.length-1),y=Math.max(0,f-r.length+1);y<=d;y++){var g=f-y|0;h+=(l=(o=0|r.words[g])*(s=0|n.words[y])+p)/67108864|0,p=67108863&l}i.words[f]=0|p,u=0|h}return 0!==u?i.words[f]=0|u:i.length--,i.strip()}s.prototype.toString=function(r,n){var i;if(n=0|n||1,16===(r=r||10)||"hex"===r){i="";for(var o=0,s=0,l=0;l<this.length;l++){var c=this.words[l],u=(16777215&(c<<o|s)).toString(16);i=0!=(s=c>>>24-o&16777215)||l!==this.length-1?h[6-u.length]+u+i:u+i,(o+=2)>=26&&(o-=26,l--)}for(0!==s&&(i=s.toString(16)+i);i.length%n!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(r===(0|r)&&r>=2&&r<=36){var f=p[r],y=d[r];i="";var g=this.clone();for(g.negative=0;!g.isZero();){var v=g.modn(y).toString(r);i=(g=g.idivn(y)).isZero()?v+i:h[f-v.length]+v+i}for(this.isZero()&&(i="0"+i);i.length%n!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}a(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(r,n){return a(void 0!==f),this.toArrayLike(f,r,n)},s.prototype.toArray=function(r,n){return this.toArrayLike(Array,r,n)},s.prototype.toArrayLike=function(r,n,i){var o=this.byteLength(),s=i||Math.max(1,o);a(o<=s,"byte array longer than desired length"),a(s>0,"Requested array length <= 0"),this.strip();var l,c,u=new r(s),f=this.clone();if("le"===n){for(c=0;!f.isZero();c++)l=f.andln(255),f.iushrn(8),u[c]=l;for(;c<s;c++)u[c]=0}else{for(c=0;c<s-o;c++)u[c]=0;for(c=0;!f.isZero();c++)l=f.andln(255),f.iushrn(8),u[s-c-1]=l}return u},Math.clz32?s.prototype._countBits=function(r){return 32-Math.clz32(r)}:s.prototype._countBits=function(r){var n=r,i=0;return n>=4096&&(i+=13,n>>>=13),n>=64&&(i+=7,n>>>=7),n>=8&&(i+=4,n>>>=4),n>=2&&(i+=2,n>>>=2),i+n},s.prototype._zeroBits=function(r){if(0===r)return 26;var n=r,i=0;return 0==(8191&n)&&(i+=13,n>>>=13),0==(127&n)&&(i+=7,n>>>=7),0==(15&n)&&(i+=4,n>>>=4),0==(3&n)&&(i+=2,n>>>=2),0==(1&n)&&i++,i},s.prototype.bitLength=function(){var r=this.words[this.length-1],n=this._countBits(r);return 26*(this.length-1)+n},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,n=0;n<this.length;n++){var i=this._zeroBits(this.words[n]);if(r+=i,26!==i)break}return r},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},s.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]|r.words[n];return this.strip()},s.prototype.ior=function(r){return a(0==(this.negative|r.negative)),this.iuor(r)},s.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},s.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},s.prototype.iuand=function(r){var n;n=this.length>r.length?r:this;for(var i=0;i<n.length;i++)this.words[i]=this.words[i]&r.words[i];return this.length=n.length,this.strip()},s.prototype.iand=function(r){return a(0==(this.negative|r.negative)),this.iuand(r)},s.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},s.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},s.prototype.iuxor=function(r){var n,i;this.length>r.length?(n=this,i=r):(n=r,i=this);for(var a=0;a<i.length;a++)this.words[a]=n.words[a]^i.words[a];if(this!==n)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=n.length,this.strip()},s.prototype.ixor=function(r){return a(0==(this.negative|r.negative)),this.iuxor(r)},s.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},s.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},s.prototype.inotn=function(r){a("number"==typeof r&&r>=0);var n=0|Math.ceil(r/26),i=r%26;this._expand(n),i>0&&n--;for(var o=0;o<n;o++)this.words[o]=67108863&~this.words[o];return i>0&&(this.words[o]=~this.words[o]&67108863>>26-i),this.strip()},s.prototype.notn=function(r){return this.clone().inotn(r)},s.prototype.setn=function(r,n){a("number"==typeof r&&r>=0);var i=r/26|0,o=r%26;return this._expand(i+1),this.words[i]=n?this.words[i]|1<<o:this.words[i]&~(1<<o),this.strip()},s.prototype.iadd=function(r){var n,i,a;if(0!==this.negative&&0===r.negative)return this.negative=0,n=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,n=this.isub(r),r.negative=1,n._normSign();this.length>r.length?(i=this,a=r):(i=r,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|i.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!==o&&s<i.length;s++)n=(0|i.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=i.length,0!==o)this.words[this.length]=o,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(r){var n;return 0!==r.negative&&0===this.negative?(r.negative=0,n=this.sub(r),r.negative^=1,n):0===r.negative&&0!==this.negative?(this.negative=0,n=r.sub(this),this.negative=1,n):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},s.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var n=this.iadd(r);return r.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var i,a,o=this.cmp(r);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(i=this,a=r):(i=r,a=this);for(var s=0,l=0;l<a.length;l++)s=(n=(0|i.words[l])-(0|a.words[l])+s)>>26,this.words[l]=67108863&n;for(;0!==s&&l<i.length;l++)s=(n=(0|i.words[l])+s)>>26,this.words[l]=67108863&n;if(0===s&&l<i.length&&i!==this)for(;l<i.length;l++)this.words[l]=i.words[l];return this.length=Math.max(this.length,l),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(r){return this.clone().isub(r)};var g=function(r,n,i){var a,o,s,l=r.words,c=n.words,u=i.words,f=0,h=0|l[0],p=8191&h,d=h>>>13,y=0|l[1],g=8191&y,v=y>>>13,m=0|l[2],x=8191&m,b=m>>>13,_=0|l[3],w=8191&_,T=_>>>13,A=0|l[4],k=8191&A,M=A>>>13,S=0|l[5],E=8191&S,I=S>>>13,L=0|l[6],C=8191&L,O=L>>>13,D=0|l[7],P=8191&D,B=D>>>13,R=0|l[8],z=8191&R,F=R>>>13,N=0|l[9],U=8191&N,j=N>>>13,V=0|c[0],H=8191&V,q=V>>>13,G=0|c[1],W=8191&G,Y=G>>>13,Z=0|c[2],X=8191&Z,K=Z>>>13,J=0|c[3],$=8191&J,Q=J>>>13,tt=0|c[4],te=8191&tt,tr=tt>>>13,tn=0|c[5],ti=8191&tn,ta=tn>>>13,to=0|c[6],ts=8191&to,tl=to>>>13,tc=0|c[7],tu=8191&tc,tf=tc>>>13,th=0|c[8],tp=8191&th,td=th>>>13,ty=0|c[9],tg=8191&ty,tv=ty>>>13;i.negative=r.negative^n.negative,i.length=19;var tm=(f+(a=Math.imul(p,H))|0)+((8191&(o=(o=Math.imul(p,q))+Math.imul(d,H)|0))<<13)|0;f=((s=Math.imul(d,q))+(o>>>13)|0)+(tm>>>26)|0,tm&=67108863,a=Math.imul(g,H),o=(o=Math.imul(g,q))+Math.imul(v,H)|0,s=Math.imul(v,q);var tx=(f+(a=a+Math.imul(p,W)|0)|0)+((8191&(o=(o=o+Math.imul(p,Y)|0)+Math.imul(d,W)|0))<<13)|0;f=((s=s+Math.imul(d,Y)|0)+(o>>>13)|0)+(tx>>>26)|0,tx&=67108863,a=Math.imul(x,H),o=(o=Math.imul(x,q))+Math.imul(b,H)|0,s=Math.imul(b,q),a=a+Math.imul(g,W)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,Y)|0;var tb=(f+(a=a+Math.imul(p,X)|0)|0)+((8191&(o=(o=o+Math.imul(p,K)|0)+Math.imul(d,X)|0))<<13)|0;f=((s=s+Math.imul(d,K)|0)+(o>>>13)|0)+(tb>>>26)|0,tb&=67108863,a=Math.imul(w,H),o=(o=Math.imul(w,q))+Math.imul(T,H)|0,s=Math.imul(T,q),a=a+Math.imul(x,W)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,Y)|0,a=a+Math.imul(g,X)|0,o=(o=o+Math.imul(g,K)|0)+Math.imul(v,X)|0,s=s+Math.imul(v,K)|0;var t_=(f+(a=a+Math.imul(p,$)|0)|0)+((8191&(o=(o=o+Math.imul(p,Q)|0)+Math.imul(d,$)|0))<<13)|0;f=((s=s+Math.imul(d,Q)|0)+(o>>>13)|0)+(t_>>>26)|0,t_&=67108863,a=Math.imul(k,H),o=(o=Math.imul(k,q))+Math.imul(M,H)|0,s=Math.imul(M,q),a=a+Math.imul(w,W)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,Y)|0,a=a+Math.imul(x,X)|0,o=(o=o+Math.imul(x,K)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,K)|0,a=a+Math.imul(g,$)|0,o=(o=o+Math.imul(g,Q)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,Q)|0;var tw=(f+(a=a+Math.imul(p,te)|0)|0)+((8191&(o=(o=o+Math.imul(p,tr)|0)+Math.imul(d,te)|0))<<13)|0;f=((s=s+Math.imul(d,tr)|0)+(o>>>13)|0)+(tw>>>26)|0,tw&=67108863,a=Math.imul(E,H),o=(o=Math.imul(E,q))+Math.imul(I,H)|0,s=Math.imul(I,q),a=a+Math.imul(k,W)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,Y)|0,a=a+Math.imul(w,X)|0,o=(o=o+Math.imul(w,K)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,K)|0,a=a+Math.imul(x,$)|0,o=(o=o+Math.imul(x,Q)|0)+Math.imul(b,$)|0,s=s+Math.imul(b,Q)|0,a=a+Math.imul(g,te)|0,o=(o=o+Math.imul(g,tr)|0)+Math.imul(v,te)|0,s=s+Math.imul(v,tr)|0;var tT=(f+(a=a+Math.imul(p,ti)|0)|0)+((8191&(o=(o=o+Math.imul(p,ta)|0)+Math.imul(d,ti)|0))<<13)|0;f=((s=s+Math.imul(d,ta)|0)+(o>>>13)|0)+(tT>>>26)|0,tT&=67108863,a=Math.imul(C,H),o=(o=Math.imul(C,q))+Math.imul(O,H)|0,s=Math.imul(O,q),a=a+Math.imul(E,W)|0,o=(o=o+Math.imul(E,Y)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,Y)|0,a=a+Math.imul(k,X)|0,o=(o=o+Math.imul(k,K)|0)+Math.imul(M,X)|0,s=s+Math.imul(M,K)|0,a=a+Math.imul(w,$)|0,o=(o=o+Math.imul(w,Q)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,Q)|0,a=a+Math.imul(x,te)|0,o=(o=o+Math.imul(x,tr)|0)+Math.imul(b,te)|0,s=s+Math.imul(b,tr)|0,a=a+Math.imul(g,ti)|0,o=(o=o+Math.imul(g,ta)|0)+Math.imul(v,ti)|0,s=s+Math.imul(v,ta)|0;var tA=(f+(a=a+Math.imul(p,ts)|0)|0)+((8191&(o=(o=o+Math.imul(p,tl)|0)+Math.imul(d,ts)|0))<<13)|0;f=((s=s+Math.imul(d,tl)|0)+(o>>>13)|0)+(tA>>>26)|0,tA&=67108863,a=Math.imul(P,H),o=(o=Math.imul(P,q))+Math.imul(B,H)|0,s=Math.imul(B,q),a=a+Math.imul(C,W)|0,o=(o=o+Math.imul(C,Y)|0)+Math.imul(O,W)|0,s=s+Math.imul(O,Y)|0,a=a+Math.imul(E,X)|0,o=(o=o+Math.imul(E,K)|0)+Math.imul(I,X)|0,s=s+Math.imul(I,K)|0,a=a+Math.imul(k,$)|0,o=(o=o+Math.imul(k,Q)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,Q)|0,a=a+Math.imul(w,te)|0,o=(o=o+Math.imul(w,tr)|0)+Math.imul(T,te)|0,s=s+Math.imul(T,tr)|0,a=a+Math.imul(x,ti)|0,o=(o=o+Math.imul(x,ta)|0)+Math.imul(b,ti)|0,s=s+Math.imul(b,ta)|0,a=a+Math.imul(g,ts)|0,o=(o=o+Math.imul(g,tl)|0)+Math.imul(v,ts)|0,s=s+Math.imul(v,tl)|0;var tk=(f+(a=a+Math.imul(p,tu)|0)|0)+((8191&(o=(o=o+Math.imul(p,tf)|0)+Math.imul(d,tu)|0))<<13)|0;f=((s=s+Math.imul(d,tf)|0)+(o>>>13)|0)+(tk>>>26)|0,tk&=67108863,a=Math.imul(z,H),o=(o=Math.imul(z,q))+Math.imul(F,H)|0,s=Math.imul(F,q),a=a+Math.imul(P,W)|0,o=(o=o+Math.imul(P,Y)|0)+Math.imul(B,W)|0,s=s+Math.imul(B,Y)|0,a=a+Math.imul(C,X)|0,o=(o=o+Math.imul(C,K)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,K)|0,a=a+Math.imul(E,$)|0,o=(o=o+Math.imul(E,Q)|0)+Math.imul(I,$)|0,s=s+Math.imul(I,Q)|0,a=a+Math.imul(k,te)|0,o=(o=o+Math.imul(k,tr)|0)+Math.imul(M,te)|0,s=s+Math.imul(M,tr)|0,a=a+Math.imul(w,ti)|0,o=(o=o+Math.imul(w,ta)|0)+Math.imul(T,ti)|0,s=s+Math.imul(T,ta)|0,a=a+Math.imul(x,ts)|0,o=(o=o+Math.imul(x,tl)|0)+Math.imul(b,ts)|0,s=s+Math.imul(b,tl)|0,a=a+Math.imul(g,tu)|0,o=(o=o+Math.imul(g,tf)|0)+Math.imul(v,tu)|0,s=s+Math.imul(v,tf)|0;var tM=(f+(a=a+Math.imul(p,tp)|0)|0)+((8191&(o=(o=o+Math.imul(p,td)|0)+Math.imul(d,tp)|0))<<13)|0;f=((s=s+Math.imul(d,td)|0)+(o>>>13)|0)+(tM>>>26)|0,tM&=67108863,a=Math.imul(U,H),o=(o=Math.imul(U,q))+Math.imul(j,H)|0,s=Math.imul(j,q),a=a+Math.imul(z,W)|0,o=(o=o+Math.imul(z,Y)|0)+Math.imul(F,W)|0,s=s+Math.imul(F,Y)|0,a=a+Math.imul(P,X)|0,o=(o=o+Math.imul(P,K)|0)+Math.imul(B,X)|0,s=s+Math.imul(B,K)|0,a=a+Math.imul(C,$)|0,o=(o=o+Math.imul(C,Q)|0)+Math.imul(O,$)|0,s=s+Math.imul(O,Q)|0,a=a+Math.imul(E,te)|0,o=(o=o+Math.imul(E,tr)|0)+Math.imul(I,te)|0,s=s+Math.imul(I,tr)|0,a=a+Math.imul(k,ti)|0,o=(o=o+Math.imul(k,ta)|0)+Math.imul(M,ti)|0,s=s+Math.imul(M,ta)|0,a=a+Math.imul(w,ts)|0,o=(o=o+Math.imul(w,tl)|0)+Math.imul(T,ts)|0,s=s+Math.imul(T,tl)|0,a=a+Math.imul(x,tu)|0,o=(o=o+Math.imul(x,tf)|0)+Math.imul(b,tu)|0,s=s+Math.imul(b,tf)|0,a=a+Math.imul(g,tp)|0,o=(o=o+Math.imul(g,td)|0)+Math.imul(v,tp)|0,s=s+Math.imul(v,td)|0;var tS=(f+(a=a+Math.imul(p,tg)|0)|0)+((8191&(o=(o=o+Math.imul(p,tv)|0)+Math.imul(d,tg)|0))<<13)|0;f=((s=s+Math.imul(d,tv)|0)+(o>>>13)|0)+(tS>>>26)|0,tS&=67108863,a=Math.imul(U,W),o=(o=Math.imul(U,Y))+Math.imul(j,W)|0,s=Math.imul(j,Y),a=a+Math.imul(z,X)|0,o=(o=o+Math.imul(z,K)|0)+Math.imul(F,X)|0,s=s+Math.imul(F,K)|0,a=a+Math.imul(P,$)|0,o=(o=o+Math.imul(P,Q)|0)+Math.imul(B,$)|0,s=s+Math.imul(B,Q)|0,a=a+Math.imul(C,te)|0,o=(o=o+Math.imul(C,tr)|0)+Math.imul(O,te)|0,s=s+Math.imul(O,tr)|0,a=a+Math.imul(E,ti)|0,o=(o=o+Math.imul(E,ta)|0)+Math.imul(I,ti)|0,s=s+Math.imul(I,ta)|0,a=a+Math.imul(k,ts)|0,o=(o=o+Math.imul(k,tl)|0)+Math.imul(M,ts)|0,s=s+Math.imul(M,tl)|0,a=a+Math.imul(w,tu)|0,o=(o=o+Math.imul(w,tf)|0)+Math.imul(T,tu)|0,s=s+Math.imul(T,tf)|0,a=a+Math.imul(x,tp)|0,o=(o=o+Math.imul(x,td)|0)+Math.imul(b,tp)|0,s=s+Math.imul(b,td)|0;var tE=(f+(a=a+Math.imul(g,tg)|0)|0)+((8191&(o=(o=o+Math.imul(g,tv)|0)+Math.imul(v,tg)|0))<<13)|0;f=((s=s+Math.imul(v,tv)|0)+(o>>>13)|0)+(tE>>>26)|0,tE&=67108863,a=Math.imul(U,X),o=(o=Math.imul(U,K))+Math.imul(j,X)|0,s=Math.imul(j,K),a=a+Math.imul(z,$)|0,o=(o=o+Math.imul(z,Q)|0)+Math.imul(F,$)|0,s=s+Math.imul(F,Q)|0,a=a+Math.imul(P,te)|0,o=(o=o+Math.imul(P,tr)|0)+Math.imul(B,te)|0,s=s+Math.imul(B,tr)|0,a=a+Math.imul(C,ti)|0,o=(o=o+Math.imul(C,ta)|0)+Math.imul(O,ti)|0,s=s+Math.imul(O,ta)|0,a=a+Math.imul(E,ts)|0,o=(o=o+Math.imul(E,tl)|0)+Math.imul(I,ts)|0,s=s+Math.imul(I,tl)|0,a=a+Math.imul(k,tu)|0,o=(o=o+Math.imul(k,tf)|0)+Math.imul(M,tu)|0,s=s+Math.imul(M,tf)|0,a=a+Math.imul(w,tp)|0,o=(o=o+Math.imul(w,td)|0)+Math.imul(T,tp)|0,s=s+Math.imul(T,td)|0;var tI=(f+(a=a+Math.imul(x,tg)|0)|0)+((8191&(o=(o=o+Math.imul(x,tv)|0)+Math.imul(b,tg)|0))<<13)|0;f=((s=s+Math.imul(b,tv)|0)+(o>>>13)|0)+(tI>>>26)|0,tI&=67108863,a=Math.imul(U,$),o=(o=Math.imul(U,Q))+Math.imul(j,$)|0,s=Math.imul(j,Q),a=a+Math.imul(z,te)|0,o=(o=o+Math.imul(z,tr)|0)+Math.imul(F,te)|0,s=s+Math.imul(F,tr)|0,a=a+Math.imul(P,ti)|0,o=(o=o+Math.imul(P,ta)|0)+Math.imul(B,ti)|0,s=s+Math.imul(B,ta)|0,a=a+Math.imul(C,ts)|0,o=(o=o+Math.imul(C,tl)|0)+Math.imul(O,ts)|0,s=s+Math.imul(O,tl)|0,a=a+Math.imul(E,tu)|0,o=(o=o+Math.imul(E,tf)|0)+Math.imul(I,tu)|0,s=s+Math.imul(I,tf)|0,a=a+Math.imul(k,tp)|0,o=(o=o+Math.imul(k,td)|0)+Math.imul(M,tp)|0,s=s+Math.imul(M,td)|0;var tL=(f+(a=a+Math.imul(w,tg)|0)|0)+((8191&(o=(o=o+Math.imul(w,tv)|0)+Math.imul(T,tg)|0))<<13)|0;f=((s=s+Math.imul(T,tv)|0)+(o>>>13)|0)+(tL>>>26)|0,tL&=67108863,a=Math.imul(U,te),o=(o=Math.imul(U,tr))+Math.imul(j,te)|0,s=Math.imul(j,tr),a=a+Math.imul(z,ti)|0,o=(o=o+Math.imul(z,ta)|0)+Math.imul(F,ti)|0,s=s+Math.imul(F,ta)|0,a=a+Math.imul(P,ts)|0,o=(o=o+Math.imul(P,tl)|0)+Math.imul(B,ts)|0,s=s+Math.imul(B,tl)|0,a=a+Math.imul(C,tu)|0,o=(o=o+Math.imul(C,tf)|0)+Math.imul(O,tu)|0,s=s+Math.imul(O,tf)|0,a=a+Math.imul(E,tp)|0,o=(o=o+Math.imul(E,td)|0)+Math.imul(I,tp)|0,s=s+Math.imul(I,td)|0;var tC=(f+(a=a+Math.imul(k,tg)|0)|0)+((8191&(o=(o=o+Math.imul(k,tv)|0)+Math.imul(M,tg)|0))<<13)|0;f=((s=s+Math.imul(M,tv)|0)+(o>>>13)|0)+(tC>>>26)|0,tC&=67108863,a=Math.imul(U,ti),o=(o=Math.imul(U,ta))+Math.imul(j,ti)|0,s=Math.imul(j,ta),a=a+Math.imul(z,ts)|0,o=(o=o+Math.imul(z,tl)|0)+Math.imul(F,ts)|0,s=s+Math.imul(F,tl)|0,a=a+Math.imul(P,tu)|0,o=(o=o+Math.imul(P,tf)|0)+Math.imul(B,tu)|0,s=s+Math.imul(B,tf)|0,a=a+Math.imul(C,tp)|0,o=(o=o+Math.imul(C,td)|0)+Math.imul(O,tp)|0,s=s+Math.imul(O,td)|0;var tO=(f+(a=a+Math.imul(E,tg)|0)|0)+((8191&(o=(o=o+Math.imul(E,tv)|0)+Math.imul(I,tg)|0))<<13)|0;f=((s=s+Math.imul(I,tv)|0)+(o>>>13)|0)+(tO>>>26)|0,tO&=67108863,a=Math.imul(U,ts),o=(o=Math.imul(U,tl))+Math.imul(j,ts)|0,s=Math.imul(j,tl),a=a+Math.imul(z,tu)|0,o=(o=o+Math.imul(z,tf)|0)+Math.imul(F,tu)|0,s=s+Math.imul(F,tf)|0,a=a+Math.imul(P,tp)|0,o=(o=o+Math.imul(P,td)|0)+Math.imul(B,tp)|0,s=s+Math.imul(B,td)|0;var tD=(f+(a=a+Math.imul(C,tg)|0)|0)+((8191&(o=(o=o+Math.imul(C,tv)|0)+Math.imul(O,tg)|0))<<13)|0;f=((s=s+Math.imul(O,tv)|0)+(o>>>13)|0)+(tD>>>26)|0,tD&=67108863,a=Math.imul(U,tu),o=(o=Math.imul(U,tf))+Math.imul(j,tu)|0,s=Math.imul(j,tf),a=a+Math.imul(z,tp)|0,o=(o=o+Math.imul(z,td)|0)+Math.imul(F,tp)|0,s=s+Math.imul(F,td)|0;var tP=(f+(a=a+Math.imul(P,tg)|0)|0)+((8191&(o=(o=o+Math.imul(P,tv)|0)+Math.imul(B,tg)|0))<<13)|0;f=((s=s+Math.imul(B,tv)|0)+(o>>>13)|0)+(tP>>>26)|0,tP&=67108863,a=Math.imul(U,tp),o=(o=Math.imul(U,td))+Math.imul(j,tp)|0,s=Math.imul(j,td);var tB=(f+(a=a+Math.imul(z,tg)|0)|0)+((8191&(o=(o=o+Math.imul(z,tv)|0)+Math.imul(F,tg)|0))<<13)|0;f=((s=s+Math.imul(F,tv)|0)+(o>>>13)|0)+(tB>>>26)|0,tB&=67108863;var tR=(f+(a=Math.imul(U,tg))|0)+((8191&(o=(o=Math.imul(U,tv))+Math.imul(j,tg)|0))<<13)|0;return f=((s=Math.imul(j,tv))+(o>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tm,u[1]=tx,u[2]=tb,u[3]=t_,u[4]=tw,u[5]=tT,u[6]=tA,u[7]=tk,u[8]=tM,u[9]=tS,u[10]=tE,u[11]=tI,u[12]=tL,u[13]=tC,u[14]=tO,u[15]=tD,u[16]=tP,u[17]=tB,u[18]=tR,0!==f&&(u[19]=f,i.length++),i};function v(r,n,i){return(new m).mulp(r,n,i)}function m(r,n){this.x=r,this.y=n}Math.imul||(g=y),s.prototype.mulTo=function(r,n){var i=this.length+r.length;return 10===this.length&&10===r.length?g(this,r,n):i<63?y(this,r,n):i<1024?function(r,n,i){i.negative=n.negative^r.negative,i.length=r.length+n.length;for(var a=0,o=0,s=0;s<i.length-1;s++){var l=o;o=0;for(var c=67108863&a,u=Math.min(s,n.length-1),f=Math.max(0,s-r.length+1);f<=u;f++){var h=s-f,p=(0|r.words[h])*(0|n.words[f]),d=67108863&p;c=67108863&(d=d+c|0),o+=(l=(l=l+(p/67108864|0)|0)+(d>>>26)|0)>>>26,l&=67108863}i.words[s]=c,a=l,l=o}return 0!==a?i.words[s]=a:i.length--,i.strip()}(this,r,n):v(this,r,n)},m.prototype.makeRBT=function(r){for(var n=Array(r),i=s.prototype._countBits(r)-1,a=0;a<r;a++)n[a]=this.revBin(a,i,r);return n},m.prototype.revBin=function(r,n,i){if(0===r||r===i-1)return r;for(var a=0,o=0;o<n;o++)a|=(1&r)<<n-o-1,r>>=1;return a},m.prototype.permute=function(r,n,i,a,o,s){for(var l=0;l<s;l++)a[l]=n[r[l]],o[l]=i[r[l]]},m.prototype.transform=function(r,n,i,a,o,s){this.permute(s,r,n,i,a,o);for(var l=1;l<o;l<<=1)for(var c=l<<1,u=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),h=0;h<o;h+=c)for(var p=u,d=f,y=0;y<l;y++){var g=i[h+y],v=a[h+y],m=i[h+y+l],x=a[h+y+l],b=p*m-d*x;x=p*x+d*m,m=b,i[h+y]=g+m,a[h+y]=v+x,i[h+y+l]=g-m,a[h+y+l]=v-x,y!==c&&(b=u*p-f*d,d=u*d+f*p,p=b)}},m.prototype.guessLen13b=function(r,n){var i=1|Math.max(n,r),a=1&i,o=0;for(i=i/2|0;i;i>>>=1)o++;return 1<<o+1+a},m.prototype.conjugate=function(r,n,i){if(!(i<=1))for(var a=0;a<i/2;a++){var o=r[a];r[a]=r[i-a-1],r[i-a-1]=o,o=n[a],n[a]=-n[i-a-1],n[i-a-1]=-o}},m.prototype.normalize13b=function(r,n){for(var i=0,a=0;a<n/2;a++){var o=8192*Math.round(r[2*a+1]/n)+Math.round(r[2*a]/n)+i;r[a]=67108863&o,i=o<67108864?0:o/67108864|0}return r},m.prototype.convert13b=function(r,n,i,o){for(var s=0,l=0;l<n;l++)s+=0|r[l],i[2*l]=8191&s,s>>>=13,i[2*l+1]=8191&s,s>>>=13;for(l=2*n;l<o;++l)i[l]=0;a(0===s),a(0==(-8192&s))},m.prototype.stub=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=0;return n},m.prototype.mulp=function(r,n,i){var a=2*this.guessLen13b(r.length,n.length),o=this.makeRBT(a),s=this.stub(a),l=Array(a),c=Array(a),u=Array(a),f=Array(a),h=Array(a),p=Array(a),d=i.words;d.length=a,this.convert13b(r.words,r.length,l,a),this.convert13b(n.words,n.length,f,a),this.transform(l,s,c,u,a,o),this.transform(f,s,h,p,a,o);for(var y=0;y<a;y++){var g=c[y]*h[y]-u[y]*p[y];u[y]=c[y]*p[y]+u[y]*h[y],c[y]=g}return this.conjugate(c,u,a),this.transform(c,u,d,s,a,o),this.conjugate(d,s,a),this.normalize13b(d,a),i.negative=r.negative^n.negative,i.length=r.length+n.length,i.strip()},s.prototype.mul=function(r){var n=new s(null);return n.words=Array(this.length+r.length),this.mulTo(r,n)},s.prototype.mulf=function(r){var n=new s(null);return n.words=Array(this.length+r.length),v(this,r,n)},s.prototype.imul=function(r){return this.clone().mulTo(r,this)},s.prototype.imuln=function(r){a("number"==typeof r),a(r<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*r,s=(67108863&o)+(67108863&n);n>>=26,n+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),this},s.prototype.muln=function(r){return this.clone().imuln(r)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(r){var n=function(r){for(var n=Array(r.bitLength()),i=0;i<n.length;i++){var a=i/26|0,o=i%26;n[i]=(r.words[a]&1<<o)>>>o}return n}(r);if(0===n.length)return new s(1);for(var i=this,a=0;a<n.length&&0===n[a];a++,i=i.sqr());if(++a<n.length)for(var o=i.sqr();a<n.length;a++,o=o.sqr())0!==n[a]&&(i=i.mul(o));return i},s.prototype.iushln=function(r){a("number"==typeof r&&r>=0);var n,i=r%26,o=(r-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var l=0;for(n=0;n<this.length;n++){var c=this.words[n]&s,u=(0|this.words[n])-c<<i;this.words[n]=u|l,l=c>>>26-i}l&&(this.words[n]=l,this.length++)}if(0!==o){for(n=this.length-1;n>=0;n--)this.words[n+o]=this.words[n];for(n=0;n<o;n++)this.words[n]=0;this.length+=o}return this.strip()},s.prototype.ishln=function(r){return a(0===this.negative),this.iushln(r)},s.prototype.iushrn=function(r,n,i){a("number"==typeof r&&r>=0),o=n?(n-n%26)/26:0;var o,s=r%26,l=Math.min((r-s)/26,this.length),c=67108863^67108863>>>s<<s;if(o-=l,o=Math.max(0,o),i){for(var u=0;u<l;u++)i.words[u]=this.words[u];i.length=l}if(0===l);else if(this.length>l)for(this.length-=l,u=0;u<this.length;u++)this.words[u]=this.words[u+l];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=o);u--){var h=0|this.words[u];this.words[u]=f<<26-s|h>>>s,f=h&c}return i&&0!==f&&(i.words[i.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(r,n,i){return a(0===this.negative),this.iushrn(r,n,i)},s.prototype.shln=function(r){return this.clone().ishln(r)},s.prototype.ushln=function(r){return this.clone().iushln(r)},s.prototype.shrn=function(r){return this.clone().ishrn(r)},s.prototype.ushrn=function(r){return this.clone().iushrn(r)},s.prototype.testn=function(r){a("number"==typeof r&&r>=0);var n=r%26,i=(r-n)/26;return!(this.length<=i||!(this.words[i]&1<<n))},s.prototype.imaskn=function(r){a("number"==typeof r&&r>=0);var n=r%26,i=(r-n)/26;return(a(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==n&&i++,this.length=Math.min(i,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},s.prototype.maskn=function(r){return this.clone().imaskn(r)},s.prototype.iaddn=function(r){return a("number"==typeof r),a(r<67108864),r<0?this.isubn(-r):0!==this.negative?(1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(r),this.negative=1),this):this._iaddn(r)},s.prototype._iaddn=function(r){this.words[0]+=r;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},s.prototype.isubn=function(r){if(a("number"==typeof r),a(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},s.prototype.addn=function(r){return this.clone().iaddn(r)},s.prototype.subn=function(r){return this.clone().isubn(r)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(r,n,i){var o,s,l=r.length+i;this._expand(l);var c=0;for(o=0;o<r.length;o++){s=(0|this.words[o+i])+c;var u=(0|r.words[o])*n;c=((s-=67108863&u)>>26)-(u/67108864|0),this.words[o+i]=67108863&s}for(;o<this.length-i;o++)c=(s=(0|this.words[o+i])+c)>>26,this.words[o+i]=67108863&s;if(0===c)return this.strip();for(a(-1===c),c=0,o=0;o<this.length;o++)c=(s=-(0|this.words[o])+c)>>26,this.words[o]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(r,n){var i=(this.length,r.length),a=this.clone(),o=r,l=0|o.words[o.length-1];0!=(i=26-this._countBits(l))&&(o=o.ushln(i),a.iushln(i),l=0|o.words[o.length-1]);var c,u=a.length-o.length;if("mod"!==n){(c=new s(null)).length=u+1,c.words=Array(c.length);for(var f=0;f<c.length;f++)c.words[f]=0}var h=a.clone()._ishlnsubmul(o,1,u);0===h.negative&&(a=h,c&&(c.words[u]=1));for(var p=u-1;p>=0;p--){var d=67108864*(0|a.words[o.length+p])+(0|a.words[o.length+p-1]);for(d=Math.min(d/l|0,67108863),a._ishlnsubmul(o,d,p);0!==a.negative;)d--,a.negative=0,a._ishlnsubmul(o,1,p),a.isZero()||(a.negative^=1);c&&(c.words[p]=d)}return c&&c.strip(),a.strip(),"div"!==n&&0!==i&&a.iushrn(i),{div:c||null,mod:a}},s.prototype.divmod=function(r,n,i){var o,l,c;return a(!r.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===r.negative?(c=this.neg().divmod(r,n),"mod"!==n&&(o=c.div.neg()),"div"!==n&&(l=c.mod.neg(),i&&0!==l.negative&&l.iadd(r)),{div:o,mod:l}):0===this.negative&&0!==r.negative?(c=this.divmod(r.neg(),n),"mod"!==n&&(o=c.div.neg()),{div:o,mod:c.mod}):0!=(this.negative&r.negative)?(c=this.neg().divmod(r.neg(),n),"div"!==n&&(l=c.mod.neg(),i&&0!==l.negative&&l.isub(r)),{div:c.div,mod:l}):r.length>this.length||0>this.cmp(r)?{div:new s(0),mod:this}:1===r.length?"div"===n?{div:this.divn(r.words[0]),mod:null}:"mod"===n?{div:null,mod:new s(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new s(this.modn(r.words[0]))}:this._wordDiv(r,n)},s.prototype.div=function(r){return this.divmod(r,"div",!1).div},s.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},s.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},s.prototype.divRound=function(r){var n=this.divmod(r);if(n.mod.isZero())return n.div;var i=0!==n.div.negative?n.mod.isub(r):n.mod,a=r.ushrn(1),o=r.andln(1),s=i.cmp(a);return s<0||1===o&&0===s?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},s.prototype.modn=function(r){a(r<=67108863);for(var n=67108864%r,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%r;return i},s.prototype.idivn=function(r){a(r<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/r|0,n=o%r}return this.strip()},s.prototype.divn=function(r){return this.clone().idivn(r)},s.prototype.egcd=function(r){a(0===r.negative),a(!r.isZero());var n=this,i=r.clone();n=0!==n.negative?n.umod(r):n.clone();for(var o=new s(1),l=new s(0),c=new s(0),u=new s(1),f=0;n.isEven()&&i.isEven();)n.iushrn(1),i.iushrn(1),++f;for(var h=i.clone(),p=n.clone();!n.isZero();){for(var d=0,y=1;0==(n.words[0]&y)&&d<26;++d,y<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(h),l.isub(p)),o.iushrn(1),l.iushrn(1);for(var g=0,v=1;0==(i.words[0]&v)&&g<26;++g,v<<=1);if(g>0)for(i.iushrn(g);g-- >0;)(c.isOdd()||u.isOdd())&&(c.iadd(h),u.isub(p)),c.iushrn(1),u.iushrn(1);n.cmp(i)>=0?(n.isub(i),o.isub(c),l.isub(u)):(i.isub(n),c.isub(o),u.isub(l))}return{a:c,b:u,gcd:i.iushln(f)}},s.prototype._invmp=function(r){a(0===r.negative),a(!r.isZero());var n=this,i=r.clone();n=0!==n.negative?n.umod(r):n.clone();for(var o,l=new s(1),c=new s(0),u=i.clone();n.cmpn(1)>0&&i.cmpn(1)>0;){for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(u),l.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)c.isOdd()&&c.iadd(u),c.iushrn(1);n.cmp(i)>=0?(n.isub(i),l.isub(c)):(i.isub(n),c.isub(l))}return 0>(o=0===n.cmpn(1)?l:c).cmpn(0)&&o.iadd(r),o},s.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var n=this.clone(),i=r.clone();n.negative=0,i.negative=0;for(var a=0;n.isEven()&&i.isEven();a++)n.iushrn(1),i.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;i.isEven();)i.iushrn(1);var o=n.cmp(i);if(o<0){var s=n;n=i,i=s}else if(0===o||0===i.cmpn(1))break;n.isub(i)}return i.iushln(a)},s.prototype.invm=function(r){return this.egcd(r).a.umod(r)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(r){return this.words[0]&r},s.prototype.bincn=function(r){a("number"==typeof r);var n=r%26,i=(r-n)/26,o=1<<n;if(this.length<=i)return this._expand(i+1),this.words[i]|=o,this;for(var s=o,l=i;0!==s&&l<this.length;l++){var c=0|this.words[l];s=(c+=s)>>>26,c&=67108863,this.words[l]=c}return 0!==s&&(this.words[l]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(r){var n,i=r<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)n=1;else{i&&(r=-r),a(r<=67108863,"Number is too big");var o=0|this.words[0];n=o===r?0:o<r?-1:1}return 0!==this.negative?0|-n:n},s.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return -1;if(0===this.negative&&0!==r.negative)return 1;var n=this.ucmp(r);return 0!==this.negative?0|-n:n},s.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return -1;for(var n=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],o=0|r.words[i];if(a!==o){a<o?n=-1:a>o&&(n=1);break}}return n},s.prototype.gtn=function(r){return 1===this.cmpn(r)},s.prototype.gt=function(r){return 1===this.cmp(r)},s.prototype.gten=function(r){return this.cmpn(r)>=0},s.prototype.gte=function(r){return this.cmp(r)>=0},s.prototype.ltn=function(r){return -1===this.cmpn(r)},s.prototype.lt=function(r){return -1===this.cmp(r)},s.prototype.lten=function(r){return 0>=this.cmpn(r)},s.prototype.lte=function(r){return 0>=this.cmp(r)},s.prototype.eqn=function(r){return 0===this.cmpn(r)},s.prototype.eq=function(r){return 0===this.cmp(r)},s.red=function(r){return new k(r)},s.prototype.toRed=function(r){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},s.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(r){return this.red=r,this},s.prototype.forceRed=function(r){return a(!this.red,"Already a number in reduction context"),this._forceRed(r)},s.prototype.redAdd=function(r){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},s.prototype.redIAdd=function(r){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},s.prototype.redSub=function(r){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},s.prototype.redISub=function(r){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},s.prototype.redShl=function(r){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},s.prototype.redMul=function(r){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},s.prototype.redIMul=function(r){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},s.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(r){return a(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var x={k256:null,p224:null,p192:null,p25519:null};function b(r,n){this.name=r,this.p=new s(n,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(r){if("string"==typeof r){var n=s._prime(r);this.m=n.p,this.prime=n}else a(r.gtn(1),"modulus must be greater than 1"),this.m=r,this.prime=null}function M(r){k.call(this,r),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var r=new s(null);return r.words=Array(Math.ceil(this.n/13)),r},b.prototype.ireduce=function(r){var n,i=r;do this.split(i,this.tmp),n=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(n>this.n)var a=n<this.n?-1:i.ucmp(this.p);return 0===a?(i.words[0]=0,i.length=1):a>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(r,n){r.iushrn(this.n,0,n)},b.prototype.imulK=function(r){return r.imul(this.k)},o(_,b),_.prototype.split=function(r,n){for(var i=Math.min(r.length,9),a=0;a<i;a++)n.words[a]=r.words[a];if(n.length=i,r.length<=9)return r.words[0]=0,void(r.length=1);var o=r.words[9];for(n.words[n.length++]=4194303&o,a=10;a<r.length;a++){var s=0|r.words[a];r.words[a-10]=(4194303&s)<<4|o>>>22,o=s}o>>>=22,r.words[a-10]=o,0===o&&r.length>10?r.length-=10:r.length-=9},_.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var n=0,i=0;i<r.length;i++){var a=0|r.words[i];n+=977*a,r.words[i]=67108863&n,n=64*a+(n/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},o(w,b),o(T,b),o(A,b),A.prototype.imulK=function(r){for(var n=0,i=0;i<r.length;i++){var a=19*(0|r.words[i])+n,o=67108863&a;a>>>=26,r.words[i]=o,n=a}return 0!==n&&(r.words[r.length++]=n),r},s._prime=function(r){var n;if(x[r])return x[r];if("k256"===r)n=new _;else if("p224"===r)n=new w;else if("p192"===r)n=new T;else{if("p25519"!==r)throw Error("Unknown prime "+r);n=new A}return x[r]=n,n},k.prototype._verify1=function(r){a(0===r.negative,"red works only with positives"),a(r.red,"red works only with red numbers")},k.prototype._verify2=function(r,n){a(0==(r.negative|n.negative),"red works only with positives"),a(r.red&&r.red===n.red,"red works only with red numbers")},k.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},k.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},k.prototype.add=function(r,n){this._verify2(r,n);var i=r.add(n);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},k.prototype.iadd=function(r,n){this._verify2(r,n);var i=r.iadd(n);return i.cmp(this.m)>=0&&i.isub(this.m),i},k.prototype.sub=function(r,n){this._verify2(r,n);var i=r.sub(n);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},k.prototype.isub=function(r,n){this._verify2(r,n);var i=r.isub(n);return 0>i.cmpn(0)&&i.iadd(this.m),i},k.prototype.shl=function(r,n){return this._verify1(r),this.imod(r.ushln(n))},k.prototype.imul=function(r,n){return this._verify2(r,n),this.imod(r.imul(n))},k.prototype.mul=function(r,n){return this._verify2(r,n),this.imod(r.mul(n))},k.prototype.isqr=function(r){return this.imul(r,r.clone())},k.prototype.sqr=function(r){return this.mul(r,r)},k.prototype.sqrt=function(r){if(r.isZero())return r.clone();var n=this.m.andln(3);if(a(n%2==1),3===n){var i=this.m.add(new s(1)).iushrn(2);return this.pow(r,i)}for(var o=this.m.subn(1),l=0;!o.isZero()&&0===o.andln(1);)l++,o.iushrn(1);a(!o.isZero());var c=new s(1).toRed(this),u=c.redNeg(),f=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,f).cmp(u);)h.redIAdd(u);for(var p=this.pow(h,o),d=this.pow(r,o.addn(1).iushrn(1)),y=this.pow(r,o),g=l;0!==y.cmp(c);){for(var v=y,m=0;0!==v.cmp(c);m++)v=v.redSqr();a(m<g);var x=this.pow(p,new s(1).iushln(g-m-1));d=d.redMul(x),p=x.redSqr(),y=y.redMul(p),g=m}return d},k.prototype.invm=function(r){var n=r._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},k.prototype.pow=function(r,n){if(n.isZero())return new s(1).toRed(this);if(0===n.cmpn(1))return r.clone();var i=Array(16);i[0]=new s(1).toRed(this),i[1]=r;for(var a=2;a<i.length;a++)i[a]=this.mul(i[a-1],r);var o=i[0],l=0,c=0,u=n.bitLength()%26;for(0===u&&(u=26),a=n.length-1;a>=0;a--){for(var f=n.words[a],h=u-1;h>=0;h--){var p=f>>h&1;o!==i[0]&&(o=this.sqr(o)),0!==p||0!==l?(l<<=1,l|=p,(4==++c||0===a&&0===h)&&(o=this.mul(o,i[l]),c=0,l=0)):c=0}u=26}return o},k.prototype.convertTo=function(r){var n=r.umod(this.m);return n===r?n.clone():n},k.prototype.convertFrom=function(r){var n=r.clone();return n.red=null,n},s.mont=function(r){return new M(r)},o(M,k),M.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},M.prototype.convertFrom=function(r){var n=this.imod(r.mul(this.rinv));return n.red=null,n},M.prototype.imul=function(r,n){if(r.isZero()||n.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(n),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(a).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(r,n){if(r.isZero()||n.isZero())return new s(0)._forceRed(this);var i=r.mul(n),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(a).iushrn(this.shift),l=o;return o.cmp(this.m)>=0?l=o.isub(this.m):0>o.cmpn(0)&&(l=o.iadd(this.m)),l._forceRed(this)},M.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(r=i.nmd(r),this)},6204:function(r){r.exports=function(r){var n,i,a,o=r.length,s=0;for(n=0;n<o;++n)s+=r[n].length;var l=Array(s),c=0;for(n=0;n<o;++n){var u=r[n],f=u.length;for(i=0;i<f;++i){var h=l[c++]=Array(f-1),p=0;for(a=0;a<f;++a)a!==i&&(h[p++]=u[a]);if(1&i){var d=h[1];h[1]=h[0],h[0]=d}}}return l}},6867:function(r,n,i){r.exports=function(r,n,i){switch(arguments.length){case 1:return a=[],u(r,r,f,!0),a;case 2:return"function"==typeof n?u(r,r,n,!0):(a=[],u(r,n,f,!1),a);case 3:return u(r,n,i,!1);default:throw Error("box-intersect: Invalid arguments")}};var a,o=i(1888),s=i(855),l=i(7150);function c(r,n,i,a){for(var o=0,s=0,l=0,c=r.length;l<c;++l){var u=r[l];if(!function(r,n){for(var i=0;i<r;++i)if(!(n[i]<=n[i+r]))return!0;return!1}(n,u)){for(var f=0;f<2*n;++f)i[o++]=u[f];a[s++]=l}}return s}function u(r,n,i,a){var u=r.length,f=n.length;if(!(u<=0||f<=0)){var h=r[0].length>>>1;if(!(h<=0)){var p,d=o.mallocDouble(2*h*u),y=o.mallocInt32(u);if((u=c(r,h,d,y))>0){if(1===h&&a)s.init(u),p=s.sweepComplete(h,i,0,u,d,y,0,u,d,y);else{var g=o.mallocDouble(2*h*f),v=o.mallocInt32(f);(f=c(n,h,g,v))>0&&(s.init(u+f),p=1===h?s.sweepBipartite(h,i,0,u,d,y,0,f,g,v):l(h,i,a,u,d,y,f,g,v),o.free(g),o.free(v))}o.free(d),o.free(y)}return p}}}function f(r,n){a.push([r,n])}},2455:function(r,n){function i(r){return r?function(r,n,i,a,o,s,l,c,u,f,h){return o-a>u-c?function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=a,y=p*a;d<o;++d,y+=p){var g=s[n+y],v=s[n+y+r],m=l[d];e:for(var x=c,b=p*c;x<u;++x,b+=p){var _=f[n+b],w=f[n+b+r],T=h[x];if(!(w<g||v<_)){for(var A=n+1;A<r;++A){var k=s[A+y],M=s[A+r+y],S=f[A+b],E=f[A+r+b];if(M<S||E<k)continue e}var I=i(m,T);if(void 0!==I)return I}}}}(r,n,i,a,o,s,l,c,u,f,h):function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=c,y=p*c;d<u;++d,y+=p){var g=f[n+y],v=f[n+y+r],m=h[d];e:for(var x=a,b=p*a;x<o;++x,b+=p){var _=s[n+b],w=s[n+b+r],T=l[x];if(!(v<_||w<g)){for(var A=n+1;A<r;++A){var k=s[A+b],M=s[A+r+b],S=f[A+y],E=f[A+r+y];if(M<S||E<k)continue e}var I=i(T,m);if(void 0!==I)return I}}}}(r,n,i,a,o,s,l,c,u,f,h)}:function(r,n,i,a,o,s,l,c,u,f,h,p){return s-o>f-u?a?function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=a,y=p*a;d<o;++d,y+=p){var g=s[n+y],v=s[n+y+r],m=l[d];e:for(var x=c,b=p*c;x<u;++x,b+=p){var _=f[n+b],w=h[x];if(!(_<=g||v<_)){for(var T=n+1;T<r;++T){var A=s[T+y],k=s[T+r+y],M=f[T+b],S=f[T+r+b];if(k<M||S<A)continue e}var E=i(w,m);if(void 0!==E)return E}}}}(r,n,i,o,s,l,c,u,f,h,p):function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=a,y=p*a;d<o;++d,y+=p){var g=s[n+y],v=s[n+y+r],m=l[d];e:for(var x=c,b=p*c;x<u;++x,b+=p){var _=f[n+b],w=h[x];if(!(_<g||v<_)){for(var T=n+1;T<r;++T){var A=s[T+y],k=s[T+r+y],M=f[T+b],S=f[T+r+b];if(k<M||S<A)continue e}var E=i(m,w);if(void 0!==E)return E}}}}(r,n,i,o,s,l,c,u,f,h,p):a?function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=c,y=p*c;d<u;++d,y+=p){var g=f[n+y],v=h[d];e:for(var m=a,x=p*a;m<o;++m,x+=p){var b=s[n+x],_=s[n+x+r],w=l[m];if(!(g<=b||_<g)){for(var T=n+1;T<r;++T){var A=s[T+x],k=s[T+r+x],M=f[T+y],S=f[T+r+y];if(k<M||S<A)continue e}var E=i(v,w);if(void 0!==E)return E}}}}(r,n,i,o,s,l,c,u,f,h,p):function(r,n,i,a,o,s,l,c,u,f,h){for(var p=2*r,d=c,y=p*c;d<u;++d,y+=p){var g=f[n+y],v=h[d];e:for(var m=a,x=p*a;m<o;++m,x+=p){var b=s[n+x],_=s[n+x+r],w=l[m];if(!(g<b||_<g)){for(var T=n+1;T<r;++T){var A=s[T+x],k=s[T+r+x],M=f[T+y],S=f[T+r+y];if(k<M||S<A)continue e}var E=i(w,v);if(void 0!==E)return E}}}}(r,n,i,o,s,l,c,u,f,h,p)}}n.partial=i(!1),n.full=i(!0)},7150:function(r,n,i){r.exports=function(r,n,i,s,h,S,E,I,L){C=s+E,O=8*o.log2(C+1)*(r+1)|0,D=o.nextPow2(w*O),A.length<D&&(a.free(A),A=a.mallocInt32(D)),P=o.nextPow2(T*O),k.length<P&&(a.free(k),k=a.mallocDouble(P));var C,O,D,P,B,R=0,z=2*r;for(M(R++,0,0,s,0,E,i?16:0,-1/0,1/0),i||M(R++,0,0,E,0,s,1,-1/0,1/0);R>0;){var F=(R-=1)*w,N=A[F],U=A[F+1],j=A[F+2],V=A[F+3],H=A[F+4],q=A[F+5],G=R*T,W=k[G],Y=k[G+1],Z=1&q,X=!!(16&q),K=h,J=S,$=I,Q=L;if(Z&&(K=I,J=L,$=h,Q=S),!(2&q&&U>=(j=m(r,N,U,j,K,J,Y))||4&q&&(U=x(r,N,U,j,K,J,W))>=j)){var tt=j-U,te=H-V;if(X){if(r*tt*(tt+te)<y){if(void 0!==(B=u.scanComplete(r,N,n,U,j,K,J,V,H,$,Q)))return B;continue}}else{if(r*Math.min(tt,te)<p){if(void 0!==(B=l(r,N,n,Z,U,j,K,J,V,H,$,Q)))return B;continue}if(r*tt*te<d){if(void 0!==(B=u.scanBipartite(r,N,n,Z,U,j,K,J,V,H,$,Q)))return B;continue}}var tr=g(r,N,U,j,K,J,W,Y);if(U<tr){if(r*(tr-U)<p){if(void 0!==(B=c(r,N+1,n,U,tr,K,J,V,H,$,Q)))return B}else if(N===r-2){if(void 0!==(B=Z?u.sweepBipartite(r,n,V,H,$,Q,U,tr,K,J):u.sweepBipartite(r,n,U,tr,K,J,V,H,$,Q)))return B}else M(R++,N+1,U,tr,V,H,Z,-1/0,1/0),M(R++,N+1,V,H,U,tr,1^Z,-1/0,1/0)}if(tr<j){var tn,ti=f(r,N,V,H,$,Q),ta=$[z*ti+N],to=v(r,N,ti,H,$,Q,ta);if(to<H&&M(R++,N,tr,j,to,H,(4|Z)+(X?16:0),ta,Y),V<ti&&M(R++,N,tr,j,V,ti,(2|Z)+(X?16:0),W,ta),ti+1===to){if(void 0!==(B=X?function(r,n,i,a,o,s,l,c,u,f){var h=2*r,p=c*h,d=u[p+n];e:for(var y=a,g=a*h;y<o;++y,g+=h){var v=l[y];if(v!==f){var m=s[g+n],x=s[g+n+r];if(!(d<m||x<d)){for(var b=n+1;b<r;++b){m=s[g+b],x=s[g+b+r];var _=u[p+b],w=u[p+b+r];if(x<_||w<m)continue e}var T=i(v,f);if(void 0!==T)return T}}}}(r,N,n,tr,j,K,J,ti,$,Q[ti]):function(r,n,i,a,o,s,l,c,u,f,h){var p=2*r,d=u*p,y=f[d+n];e:for(var g=o,v=o*p;g<s;++g,v+=p){var m=l[v+n],x=l[v+n+r];if(!(y<m||x<y||a&&y===m)){for(var b,_=c[g],w=n+1;w<r;++w){m=l[v+w],x=l[v+w+r];var T=f[d+w],A=f[d+w+r];if(x<T||A<m)continue e}if(void 0!==(b=a?i(h,_):i(_,h)))return b}}}(r,N,n,Z,tr,j,K,J,ti,$,Q[ti])))return B}else if(ti<to){if(X){if(tr<(tn=b(r,N,tr,j,K,J,ta))){var ts=v(r,N,tr,tn,K,J,ta);if(N===r-2){if(tr<ts&&void 0!==(B=u.sweepComplete(r,n,tr,ts,K,J,ti,to,$,Q))||ts<tn&&void 0!==(B=u.sweepBipartite(r,n,ts,tn,K,J,ti,to,$,Q)))return B}else tr<ts&&M(R++,N+1,tr,ts,ti,to,16,-1/0,1/0),ts<tn&&(M(R++,N+1,ts,tn,ti,to,0,-1/0,1/0),M(R++,N+1,ti,to,ts,tn,1,-1/0,1/0))}}else tr<(tn=Z?_(r,N,tr,j,K,J,ta):b(r,N,tr,j,K,J,ta))&&(N===r-2?B=Z?u.sweepBipartite(r,n,ti,to,$,Q,tr,tn,K,J):u.sweepBipartite(r,n,tr,tn,K,J,ti,to,$,Q):(M(R++,N+1,tr,tn,ti,to,Z,-1/0,1/0),M(R++,N+1,ti,to,tr,tn,1^Z,-1/0,1/0)))}}}}};var a=i(1888),o=i(8828),s=i(2455),l=s.partial,c=s.full,u=i(855),f=i(3545),h=i(8105),p=128,d=4194304,y=4194304,g=h("!(lo>=p0)&&!(p1>=hi)"),v=h("lo===p0"),m=h("lo<p0"),x=h("hi<=p0"),b=h("lo<=p0&&p0<=hi"),_=h("lo<p0&&p0<=hi"),w=6,T=2,A=a.mallocInt32(1024),k=a.mallocDouble(1024);function M(r,n,i,a,o,s,l,c,u){var f=w*r;A[f]=n,A[f+1]=i,A[f+2]=a,A[f+3]=o,A[f+4]=s,A[f+5]=l;var h=T*r;k[h]=c,k[h+1]=u}},3545:function(r,n,i){r.exports=function(r,n,i,s,l,c){if(s<=i+1)return i;for(var u=i,f=s,h=s+i>>>1,p=2*r,d=h,y=l[p*h+n];u<f;){if(f-u<o){(function(r,n,i,a,o,s){for(var l=2*r,c=l*(i+1)+n,u=i+1;u<a;++u,c+=l)for(var f=o[c],h=u,p=l*(u-1);h>i&&o[p+n]>f;--h,p-=l){for(var d=p,y=p+l,g=0;g<l;++g,++d,++y){var v=o[d];o[d]=o[y],o[y]=v}var m=s[h];s[h]=s[h-1],s[h-1]=m}})(r,n,u,f,l,c),y=l[p*h+n];break}var g=f-u,v=Math.random()*g+u|0,m=l[p*v+n],x=Math.random()*g+u|0,b=l[p*x+n],_=Math.random()*g+u|0,w=l[p*_+n];m<=b?w>=b?(d=x,y=b):m>=w?(d=v,y=m):(d=_,y=w):b>=w?(d=x,y=b):w>=m?(d=v,y=m):(d=_,y=w);for(var T=p*(f-1),A=p*d,k=0;k<p;++k,++T,++A){var M=l[T];l[T]=l[A],l[A]=M}var S=c[f-1];for(c[f-1]=c[d],c[d]=S,T=p*(f-1),A=p*(d=a(r,n,u,f-1,l,c,y)),k=0;k<p;++k,++T,++A)M=l[T],l[T]=l[A],l[A]=M;if(S=c[f-1],c[f-1]=c[d],c[d]=S,h<d){for(f=d-1;u<f&&l[p*(f-1)+n]===y;)f-=1;f+=1}else{if(!(d<h))break;for(u=d+1;u<f&&l[p*u+n]===y;)u+=1}}return a(r,n,i,h,l,c,l[p*h+n])};var a=i(8105)("lo<p0"),o=8},8105:function(r){r.exports=function(r){return n[r]};var n={"lo===p0":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=i;a>p;++p,u+=c)if(o[u+n]===l){if(h===p)h+=1,f+=c;else{for(var d=0;c>d;++d){var y=o[u+d];o[u+d]=o[f],o[f++]=y}var g=s[p];s[p]=s[h],s[h++]=g}}return h},"lo<p0":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=i;a>p;++p,u+=c)if(o[u+n]<l){if(h===p)h+=1,f+=c;else{for(var d=0;c>d;++d){var y=o[u+d];o[u+d]=o[f],o[f++]=y}var g=s[p];s[p]=s[h],s[h++]=g}}return h},"lo<=p0":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=r+n,d=i;a>d;++d,u+=c)if(o[u+p]<=l){if(h===d)h+=1,f+=c;else{for(var y=0;c>y;++y){var g=o[u+y];o[u+y]=o[f],o[f++]=g}var v=s[d];s[d]=s[h],s[h++]=v}}return h},"hi<=p0":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=r+n,d=i;a>d;++d,u+=c)if(o[u+p]<=l){if(h===d)h+=1,f+=c;else{for(var y=0;c>y;++y){var g=o[u+y];o[u+y]=o[f],o[f++]=g}var v=s[d];s[d]=s[h],s[h++]=v}}return h},"lo<p0&&p0<=hi":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=r+n,d=i;a>d;++d,u+=c){var y=o[u+n],g=o[u+p];if(y<l&&l<=g){if(h===d)h+=1,f+=c;else{for(var v=0;c>v;++v){var m=o[u+v];o[u+v]=o[f],o[f++]=m}var x=s[d];s[d]=s[h],s[h++]=x}}}return h},"lo<=p0&&p0<=hi":function(r,n,i,a,o,s,l){for(var c=2*r,u=c*i,f=u,h=i,p=r+n,d=i;a>d;++d,u+=c){var y=o[u+n],g=o[u+p];if(y<=l&&l<=g){if(h===d)h+=1,f+=c;else{for(var v=0;c>v;++v){var m=o[u+v];o[u+v]=o[f],o[f++]=m}var x=s[d];s[d]=s[h],s[h++]=x}}}return h},"!(lo>=p0)&&!(p1>=hi)":function(r,n,i,a,o,s,l,c){for(var u=2*r,f=u*i,h=f,p=i,d=r+n,y=i;a>y;++y,f+=u){var g=o[f+n],v=o[f+d];if(!(g>=l||c>=v)){if(p===y)p+=1,h+=u;else{for(var m=0;u>m;++m){var x=o[f+m];o[f+m]=o[h],o[h++]=x}var b=s[y];s[y]=s[p],s[p++]=b}}}return p}}},1811:function(r){r.exports=function(r,u){u<=4*n?i(0,u-1,r):function r(u,f,h){var p=(f-u+1)/6|0,d=u+p,y=f-p,g=u+f>>1,v=g-p,m=g+p,x=d,b=v,_=g,w=m,T=y,A=u+1,k=f-1,M=0;l(x,b,h)&&(M=x,x=b,b=M),l(w,T,h)&&(M=w,w=T,T=M),l(x,_,h)&&(M=x,x=_,_=M),l(b,_,h)&&(M=b,b=_,_=M),l(x,w,h)&&(M=x,x=w,w=M),l(_,w,h)&&(M=_,_=w,w=M),l(b,T,h)&&(M=b,b=T,T=M),l(b,_,h)&&(M=b,b=_,_=M),l(w,T,h)&&(M=w,w=T,T=M);for(var S=h[2*b],E=h[2*b+1],I=h[2*w],L=h[2*w+1],C=2*x,O=2*_,D=2*T,P=2*d,B=2*g,R=2*y,z=0;z<2;++z){var F=h[C+z],N=h[O+z],U=h[D+z];h[P+z]=F,h[B+z]=N,h[R+z]=U}o(v,u,h),o(m,f,h);for(var j=A;j<=k;++j)if(c(j,S,E,h))j!==A&&a(j,A,h),++A;else if(!c(j,I,L,h))for(;;){if(c(k,I,L,h)){c(k,S,E,h)?(function(r,n,i,a){n*=2,i*=2;var o=a[r*=2],s=a[r+1];a[r]=a[n],a[r+1]=a[n+1],a[n]=a[i],a[n+1]=a[i+1],a[i]=o,a[i+1]=s}(j,A,k,h),++A):a(j,k,h),--k;break}if(--k<j)break}s(u,A-1,S,E,h),s(f,k+1,I,L,h),A-2-u<=n?i(u,A-2,h):r(u,A-2,h),f-(k+2)<=n?i(k+2,f,h):r(k+2,f,h),k-A<=n?i(A,k,h):r(A,k,h)}(0,u-1,r)};var n=32;function i(r,n,i){for(var a=2*(r+1),o=r+1;o<=n;++o){for(var s=i[a++],l=i[a++],c=o,u=a-2;c-- >r;){var f=i[u-2],h=i[u-1];if(f<s||f===s&&h<l)break;i[u]=f,i[u+1]=h,u-=2}i[u]=s,i[u+1]=l}}function a(r,n,i){n*=2;var a=i[r*=2],o=i[r+1];i[r]=i[n],i[r+1]=i[n+1],i[n]=a,i[n+1]=o}function o(r,n,i){n*=2,i[r*=2]=i[n],i[r+1]=i[n+1]}function s(r,n,i,a,o){n*=2,o[r*=2]=o[n],o[n]=i,o[r+1]=o[n+1],o[n+1]=a}function l(r,n,i){n*=2;var a=i[r*=2],o=i[n];return!(a<o)&&(a!==o||i[r+1]>i[n+1])}function c(r,n,i,a){var o=a[r*=2];return o<n||o===n&&a[r+1]<i}},855:function(r,n,i){r.exports={init:function(r){var n=o.nextPow2(r);c.length<n&&(a.free(c),c=a.mallocInt32(n)),u.length<n&&(a.free(u),u=a.mallocInt32(n)),f.length<n&&(a.free(f),f=a.mallocInt32(n)),h.length<n&&(a.free(h),h=a.mallocInt32(n)),p.length<n&&(a.free(p),p=a.mallocInt32(n)),d.length<n&&(a.free(d),d=a.mallocInt32(n));var i=8*n;y.length<i&&(a.free(y),y=a.mallocDouble(i))},sweepBipartite:function(r,n,i,a,o,p,d,m,x,b){for(var _=0,w=2*r,T=r-1,A=w-1,k=i;k<a;++k){var M=p[k],S=w*k;y[_++]=o[S+T],y[_++]=-(M+1),y[_++]=o[S+A],y[_++]=M}for(k=d;k<m;++k){M=b[k]+l;var E=w*k;y[_++]=x[E+T],y[_++]=-M,y[_++]=x[E+A],y[_++]=M}var I=_>>>1;s(y,I);var L=0,C=0;for(k=0;k<I;++k){var O,D=0|y[2*k+1];if(D>=l)g(f,h,C--,D=D-l|0);else if(D>=0)g(c,u,L--,D);else if(D<=-l){D=-D-l|0;for(var P=0;P<L;++P)if(void 0!==(O=n(c[P],D)))return O;v(f,h,C++,D)}else{for(D=-D-1|0,P=0;P<C;++P)if(void 0!==(O=n(D,f[P])))return O;v(c,u,L++,D)}}},sweepComplete:function(r,n,i,a,o,l,m,x,b,_){for(var w=0,T=2*r,A=r-1,k=T-1,M=i;M<a;++M){var S=l[M]+1<<1,E=T*M;y[w++]=o[E+A],y[w++]=-S,y[w++]=o[E+k],y[w++]=S}for(M=m;M<x;++M){S=_[M]+1<<1;var I=T*M;y[w++]=b[I+A],y[w++]=1|-S,y[w++]=b[I+k],y[w++]=1|S}var L=w>>>1;s(y,L);var C=0,O=0,D=0;for(M=0;M<L;++M){var P=0|y[2*M+1],B=1&P;if(M<L-1&&P>>1==y[2*M+3]>>1&&(B=2,M+=1),P<0){for(var R,z=-(P>>1)-1,F=0;F<D;++F)if(void 0!==(R=n(p[F],z)))return R;if(0!==B){for(F=0;F<C;++F)if(void 0!==(R=n(c[F],z)))return R}if(1!==B){for(F=0;F<O;++F)if(void 0!==(R=n(f[F],z)))return R}0===B?v(c,u,C++,z):1===B?v(f,h,O++,z):2===B&&v(p,d,D++,z)}else z=(P>>1)-1,0===B?g(c,u,C--,z):1===B?g(f,h,O--,z):2===B&&g(p,d,D--,z)}},scanBipartite:function(r,n,i,a,o,f,h,p,d,m,x,b){var _=0,w=2*r,T=n+r,A=1,k=1;a?k=l:A=l;for(var M=o;M<f;++M){var S=M+A,E=w*M;y[_++]=h[E+n],y[_++]=-S,y[_++]=h[E+T],y[_++]=S}for(M=d;M<m;++M){S=M+k;var I=w*M;y[_++]=x[I+n],y[_++]=-S}var L=_>>>1;s(y,L);var C=0;for(M=0;M<L;++M){var O=0|y[2*M+1];if(O<0){var D=!1;if((S=-O)>=l?(D=!a,S-=l):(D=!!a,S-=1),D)v(c,u,C++,S);else{var P=b[S],B=w*S,R=x[B+n+1],z=x[B+n+1+r];e:for(var F=0;F<C;++F){var N=c[F],U=w*N;if(!(z<h[U+n+1]||h[U+n+1+r]<R)){for(var j=n+2;j<r;++j)if(x[B+j+r]<h[U+j]||h[U+j+r]<x[B+j])continue e;var V,H=p[N];if(void 0!==(V=a?i(P,H):i(H,P)))return V}}}}else g(c,u,C--,O-A)}},scanComplete:function(r,n,i,a,o,u,f,h,p,d,g){for(var v=0,m=2*r,x=n+r,b=a;b<o;++b){var _=b+l,w=m*b;y[v++]=u[w+n],y[v++]=-_,y[v++]=u[w+x],y[v++]=_}for(b=h;b<p;++b){_=b+1;var T=m*b;y[v++]=d[T+n],y[v++]=-_}var A=v>>>1;s(y,A);var k=0;for(b=0;b<A;++b){var M=0|y[2*b+1];if(M<0){if((_=-M)>=l)c[k++]=_-l;else{var S=g[_-=1],E=m*_,I=d[E+n+1],L=d[E+n+1+r];e:for(var C=0;C<k;++C){var O=c[C],D=f[O];if(D===S)break;var P=m*O;if(!(L<u[P+n+1]||u[P+n+1+r]<I)){for(var B=n+2;B<r;++B)if(d[E+B+r]<u[P+B]||u[P+B+r]<d[E+B])continue e;var R=i(D,S);if(void 0!==R)return R}}}}else{for(_=M-l,C=k-1;C>=0;--C)if(c[C]===_){for(B=C+1;B<k;++B)c[B-1]=c[B];break}--k}}}};var a=i(1888),o=i(8828),s=i(1811),l=268435456,c=a.mallocInt32(1024),u=a.mallocInt32(1024),f=a.mallocInt32(1024),h=a.mallocInt32(1024),p=a.mallocInt32(1024),d=a.mallocInt32(1024),y=a.mallocDouble(8192);function g(r,n,i,a){var o=n[a],s=r[i-1];r[o]=s,n[s]=o}function v(r,n,i,a){r[i]=a,n[a]=i}},2538:function(r,n,i){var a=i(8902),o=i(5542),s=i(2272),l=i(5023);function c(r){return[Math.min(r[0],r[1]),Math.max(r[0],r[1])]}function u(r,n){return r[0]-n[0]||r[1]-n[1]}function f(r,n,i){return n in r?r[n]:i}r.exports=function(r,n,i){Array.isArray(n)?(i=i||{},n=n||[]):(i=n||{},n=[]);var h=!!f(i,"delaunay",!0),p=!!f(i,"interior",!0),d=!!f(i,"exterior",!0),y=!!f(i,"infinity",!1);if(!p&&!d||0===r.length)return[];var g=a(r,n);if(h||p!==d||y){for(var v=o(r.length,n.map(c).sort(u)),m=0;m<g.length;++m){var x=g[m];v.addTriangle(x[0],x[1],x[2])}return h&&s(r,v),d?p?y?l(v,0,y):v.cells():l(v,1,y):l(v,-1)}return g}},2272:function(r,n,i){var a=i(2646)[4];function o(r,n,i,o,s,l){var c=n.opposite(o,s);if(!(c<0)){if(s<o){var u=o;o=s,s=u,u=l,l=c,c=u}n.isConstraint(o,s)||0>a(r[o],r[s],r[l],r[c])&&i.push(o,s)}}i(2478),r.exports=function(r,n){for(var i=[],s=r.length,l=n.stars,c=0;c<s;++c)for(var u=l[c],f=1;f<u.length;f+=2)if(!((y=u[f])<c||n.isConstraint(c,y))){for(var h=u[f-1],p=-1,d=1;d<u.length;d+=2)if(u[d-1]===y){p=u[d];break}p<0||0>a(r[c],r[y],r[h],r[p])&&i.push(c,y)}for(;i.length>0;){for(var y=i.pop(),g=(h=-1,p=-1,u=l[c=i.pop()],1);g<u.length;g+=2){var v=u[g-1],m=u[g];v===y?p=m:m===y&&(h=v)}h<0||p<0||a(r[c],r[y],r[h],r[p])>=0||(n.flip(c,y),o(r,n,i,h,c,p),o(r,n,i,c,p,h),o(r,n,i,p,y,h),o(r,n,i,y,h,p))}}},5023:function(r,n,i){var a,o=i(2478);function s(r,n,i,a,o,s,l){this.cells=r,this.neighbor=n,this.flags=a,this.constraint=i,this.active=o,this.next=s,this.boundary=l}function l(r,n){return r[0]-n[0]||r[1]-n[1]||r[2]-n[2]}r.exports=function(r,n,i){var a=function(r,n){for(var i=r.cells(),a=i.length,o=0;o<a;++o){var c=(x=i[o])[0],u=x[1],f=x[2];u<f?u<c&&(x[0]=u,x[1]=f,x[2]=c):f<c&&(x[0]=f,x[1]=c,x[2]=u)}i.sort(l);var h=Array(a);for(o=0;o<h.length;++o)h[o]=0;var p=[],d=[],y=Array(3*a),g=Array(3*a),v=null;n&&(v=[]);var m=new s(i,y,g,h,p,d,v);for(o=0;o<a;++o)for(var x=i[o],b=0;b<3;++b){c=x[b],u=x[(b+1)%3];var _=y[3*o+b]=m.locate(u,c,r.opposite(u,c)),w=g[3*o+b]=r.isConstraint(c,u);_<0&&(w?d.push(o):(p.push(o),h[o]=1),n&&v.push([u,c,-1]))}return m}(r,i);if(0===n)return i?a.cells.concat(a.boundary):a.cells;for(var o=1,c=a.active,u=a.next,f=a.flags,h=a.cells,p=a.constraint,d=a.neighbor;c.length>0||u.length>0;){for(;c.length>0;){var y=c.pop();if(f[y]!==-o){f[y]=o,h[y];for(var g=0;g<3;++g){var v=d[3*y+g];v>=0&&0===f[v]&&(p[3*y+g]?u.push(v):(c.push(v),f[v]=o))}}}var m=u;u=c,c=m,u.length=0,o=-o}var x=function(r,n,i){for(var a=0,o=0;o<r.length;++o)n[o]===i&&(r[a++]=r[o]);return r.length=a,r}(h,f,n);return i?x.concat(a.boundary):x},s.prototype.locate=(a=[0,0,0],function(r,n,i){var s=r,c=n,u=i;return n<i?n<r&&(s=n,c=i,u=r):i<r&&(s=i,c=r,u=n),s<0?-1:(a[0]=s,a[1]=c,a[2]=u,o.eq(this.cells,a,l))})},8902:function(r,n,i){var a=i(2478),o=i(3250)[3];function s(r,n,i,a,o){this.a=r,this.b=n,this.idx=i,this.lowerIds=a,this.upperIds=o}function l(r,n,i,a){this.a=r,this.b=n,this.type=i,this.idx=a}function c(r,n){var i=r.a[0]-n.a[0]||r.a[1]-n.a[1]||r.type-n.type;return i||(0!==r.type&&(i=o(r.a,r.b,n.b))?i:r.idx-n.idx)}function u(r,n){return o(r.a,r.b,n)}function f(r,n){var i;return(i=r.a[0]<n.a[0]?o(r.a,r.b,n.a):o(n.b,n.a,r.a))?i:(i=n.b[0]<r.b[0]?o(r.a,r.b,n.b):o(n.b,n.a,r.b))||r.idx-n.idx}r.exports=function(r,n){for(var i=r.length,h=n.length,p=[],d=0;d<i;++d)p.push(new l(r[d],null,0,d));for(d=0;d<h;++d){var y=n[d],g=r[y[0]],v=r[y[1]];g[0]<v[0]?p.push(new l(g,v,2,d),new l(v,g,1,d)):g[0]>v[0]&&p.push(new l(v,g,2,d),new l(g,v,1,d))}p.sort(c);for(var m=p[0].a[0]-(1+Math.abs(p[0].a[0]))*2220446049250313e-31,x=[new s([m,1],[m,0],-1,[],[],[],[])],b=[],_=(d=0,p.length);d<_;++d){var w=p[d],T=w.type;0===T?function(r,n,i,s,l){for(var c=a.lt(n,s,u),f=a.gt(n,s,u),h=c;h<f;++h){for(var p=n[h],d=p.lowerIds,y=d.length;y>1&&o(i[d[y-2]],i[d[y-1]],s)>0;)r.push([d[y-1],d[y-2],l]),y-=1;d.length=y,d.push(l);var g=p.upperIds;for(y=g.length;y>1&&0>o(i[g[y-2]],i[g[y-1]],s);)r.push([g[y-2],g[y-1],l]),y-=1;g.length=y,g.push(l)}}(b,x,r,w.a,w.idx):2===T?function(r,n,i){var o=a.le(r,i,f),l=r[o],c=l.upperIds,u=c[c.length-1];l.upperIds=[u],r.splice(o+1,0,new s(i.a,i.b,i.idx,[u],c))}(x,0,w):function(r,n,i){var o=i.a;i.a=i.b,i.b=o;var s=a.eq(r,i,f),l=r[s];r[s-1].upperIds=l.upperIds,r.splice(s,1)}(x,0,w)}return b}},5542:function(r,n,i){var a=i(2478);function o(r,n){this.stars=r,this.edges=n}r.exports=function(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=[];return new o(i,n)};var s=o.prototype;function l(r,n,i){for(var a=1,o=r.length;a<o;a+=2)if(r[a-1]===n&&r[a]===i)return r[a-1]=r[o-2],r[a]=r[o-1],void(r.length=o-2)}s.isConstraint=function(){var r=[0,0];function n(r,n){return r[0]-n[0]||r[1]-n[1]}return function(i,o){return r[0]=Math.min(i,o),r[1]=Math.max(i,o),a.eq(this.edges,r,n)>=0}}(),s.removeTriangle=function(r,n,i){var a=this.stars;l(a[r],n,i),l(a[n],i,r),l(a[i],r,n)},s.addTriangle=function(r,n,i){var a=this.stars;a[r].push(n,i),a[n].push(i,r),a[i].push(r,n)},s.opposite=function(r,n){for(var i=this.stars[n],a=1,o=i.length;a<o;a+=2)if(i[a]===r)return i[a-1];return -1},s.flip=function(r,n){var i=this.opposite(r,n),a=this.opposite(n,r);this.removeTriangle(r,n,i),this.removeTriangle(n,r,a),this.addTriangle(r,a,i),this.addTriangle(n,i,a)},s.edges=function(){for(var r=this.stars,n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;s+=2)n.push([o[s],o[s+1]]);return n},s.cells=function(){for(var r=this.stars,n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;s+=2){var c=o[s],u=o[s+1];i<Math.min(c,u)&&n.push([i,c,u])}return n}},2419:function(r){r.exports=function(r){for(var n=1,i=1;i<r.length;++i)for(var a=0;a<i;++a)if(r[i]<r[a])n=-n;else if(r[a]===r[i])return 0;return n}},3628:function(r,n,i){var a=i(1338),o=i(727);function s(r,n){for(var i=0,a=r.length,o=0;o<a;++o)i+=r[o]*n[o];return i}function l(r){var n=r.length;if(0===n)return[];r[0].length;var i=a([r.length+1,r.length+1],1),l=a([r.length+1],1);i[n][n]=0;for(var c=0;c<n;++c){for(var u=0;u<=c;++u)i[u][c]=i[c][u]=2*s(r[c],r[u]);l[c]=s(r[c],r[c])}var f=o(i,l),h=0,p=f[n+1];for(c=0;c<p.length;++c)h+=p[c];var d=Array(n);for(c=0;c<n;++c){p=f[c];var y=0;for(u=0;u<p.length;++u)y+=p[u];d[c]=y/h}return d}function c(r){if(0===r.length)return[];for(var n=r[0].length,i=a([n]),o=l(r),s=0;s<r.length;++s)for(var c=0;c<n;++c)i[c]+=r[s][c]*o[s];return i}c.barycenetric=l,r.exports=c},6037:function(r,n,i){r.exports=function(r){for(var n=a(r),i=0,o=0;o<r.length;++o)for(var s=r[o],l=0;l<n.length;++l)i+=Math.pow(s[l]-n[l],2);return Math.sqrt(i/r.length)};var a=i(3628)},332:function(r,n,i){r.exports=function(r,n,i){if(i){S=n;for(var a,d,v,m,b,_,w,T,A,k,M,S,E,I,L,C=Array(n.length),O=0;O<n.length;++O){var D=n[O];C[O]=[D[0],D[1],i[O]]}n=C}for(var P=(E=n,I=!!i,x(E,L=g(r,[],y(r)),I),!!L);a=r,d=n,v=!!i,T=(m=[],o(w=function(r,n){for(var i=Array(n.length),a=0;a<n.length;++a){var o=n[a],s=r[o[0]],l=r[o[1]];i[a]=[h(Math.min(s[0],l[0]),-1/0),h(Math.min(s[1],l[1]),-1/0),h(Math.max(s[0],l[0]),1/0),h(Math.max(s[1],l[1]),1/0)]}return i}(a,d),function(r,n){var i=d[r],o=d[n];i[0]!==o[0]&&i[0]!==o[1]&&i[1]!==o[0]&&i[1]!==o[1]&&s(a[i[0]],a[i[1]],a[o[0]],a[o[1]])&&m.push([r,n])}),m),A=(b=y(a),_=[],o(w,b,function(r,n){var i=d[r];if(i[0]!==n&&i[1]!==n){var o=a[n];s(a[i[0]],a[i[1]],o,o)&&_.push([r,n])}}),_),k=function(r,n,i,a,o){var s,h,d=r.map(function(r){return[l(r[0]),l(r[1])]});for(s=0;s<i.length;++s){var y=i[s];h=y[0];var g=y[1],v=n[h],m=n[g],x=p(f(r[v[0]]),f(r[v[1]]),f(r[m[0]]),f(r[m[1]]));if(x){var b=r.length;r.push([u(x[0]),u(x[1])]),d.push(x),a.push([h,b],[g,b])}}for(a.sort(function(r,n){if(r[0]!==n[0])return r[0]-n[0];var i=d[r[1]],a=d[n[1]];return c(i[0],a[0])||c(i[1],a[1])}),s=a.length-1;s>=0;--s){var _=n[h=(I=a[s])[0]],w=_[0],T=_[1],A=r[w],k=r[T];if(0>(A[0]-k[0]||A[1]-k[1])){var M=w;w=T,T=M}_[0]=w;var S,E=_[1]=I[1];for(o&&(S=_[2]);s>0&&a[s-1][0]===h;){var I,L=(I=a[--s])[1];o?n.push([E,L,S]):n.push([E,L]),E=L}o?n.push([E,T,S]):n.push([E,T])}return d}(a,d,T,A,v),x(d,M=g(a,k),v),M||T.length>0||A.length>0;)P=!0;if(i&&P)for(S.length=0,i.length=0,O=0;O<n.length;++O)D=n[O],S.push([D[0],D[1]]),i.push(D[2]);return P};var a=i(1755),o=i(6867),s=i(1125),l=i(7842),c=i(1318),u=i(946),f=i(5838),h=i(1278),p=i(3637);function d(r){var n=u(r);return[h(n,-1/0),h(n,1/0)]}function y(r){for(var n=Array(r.length),i=0;i<r.length;++i){var a=r[i];n[i]=[h(a[0],-1/0),h(a[1],-1/0),h(a[0],1/0),h(a[1],1/0)]}return n}function g(r,n,i){for(var s,l=n.length,c=new a(l),u=[],f=0;f<n.length;++f){var p=n[f],y=d(p[0]),g=d(p[1]);u.push([h(y[0],-1/0),h(g[0],-1/0),h(y[1],1/0),h(g[1],1/0)])}o(u,function(r,n){c.link(r,n)});var v=!0,m=Array(l);for(f=0;f<l;++f)(s=c.find(f))!==f&&(v=!1,r[s]=[Math.min(r[f][0],r[s][0]),Math.min(r[f][1],r[s][1])]);if(v)return null;var x=0;for(f=0;f<l;++f)(s=c.find(f))===f?(m[f]=x,r[x++]=r[f]):m[f]=-1;for(r.length=x,f=0;f<l;++f)m[f]<0&&(m[f]=m[c.find(f)]);return m}function v(r,n){return r[0]-n[0]||r[1]-n[1]}function m(r,n){return r[0]-n[0]||r[1]-n[1]||(r[2]<n[2]?-1:r[2]>n[2]?1:0)}function x(r,n,i){if(0!==r.length){if(n)for(var a,o=0;o<r.length;++o){var s=n[(a=r[o])[0]],l=n[a[1]];a[0]=Math.min(s,l),a[1]=Math.max(s,l)}else for(o=0;o<r.length;++o)s=(a=r[o])[0],l=a[1],a[0]=Math.min(s,l),a[1]=Math.max(s,l);i?r.sort(m):r.sort(v);var c=1;for(o=1;o<r.length;++o){var u=r[o-1],f=r[o];(f[0]!==u[0]||f[1]!==u[1]||i&&f[2]!==u[2])&&(r[c++]=f)}r.length=c}}},3637:function(r,n,i){r.exports=function(r,n,i,a){var s=c(n,r),p=c(a,i),d=h(s,p);if(0===l(d))return null;var y=f(s,o(h(p,c(r,i)),d));return u(r,y)};var a=i(6504),o=i(8697),s=i(5572),l=i(7721),c=i(544),u=i(2653),f=i(8987);function h(r,n){return s(a(r[0],n[1]),a(r[1],n[0]))}},3642:function(r){r.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(r,n,i){var a=i(3642),o=i(395);function s(r){return[r[0]/255,r[1]/255,r[2]/255,r[3]]}function l(r){for(var n,i="#",a=0;a<3;++a)i+=("00"+(n=(n=r[a]).toString(16))).substr(n.length);return i}function c(r){return"rgba("+r.join(",")+")"}r.exports=function(r){if(r||(r={}),y=(r.nshades||72)-1,d=r.format||"hex",(p=r.colormap)||(p="jet"),"string"==typeof p){if(!a[p=p.toLowerCase()])throw Error(p+" not a supported colorscale");h=a[p]}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);h=p.slice()}if(h.length>y+1)throw Error(p+" map requires nshades to be at least size "+h.length);g=Array.isArray(r.alpha)?2!==r.alpha.length?[1,1]:r.alpha.slice():"number"==typeof r.alpha?[r.alpha,r.alpha]:[1,1],n=h.map(function(r){return Math.round(r.index*y)}),g[0]=Math.min(Math.max(g[0],0),1),g[1]=Math.min(Math.max(g[1],0),1);var n,i,u,f,h,p,d,y,g,v,m=h.map(function(r,n){var i=h[n].index,a=h[n].rgb.slice();return 4===a.length&&a[3]>=0&&a[3]<=1||(a[3]=g[0]+(g[1]-g[0])*i),a}),x=[];for(v=0;v<n.length-1;++v){f=n[v+1]-n[v],i=m[v],u=m[v+1];for(var b=0;b<f;b++){var _=b/f;x.push([Math.round(o(i[0],u[0],_)),Math.round(o(i[1],u[1],_)),Math.round(o(i[2],u[2],_)),o(i[3],u[3],_)])}}return x.push(h[h.length-1].rgb.concat(g[1])),"hex"===d?x=x.map(l):"rgbaString"===d?x=x.map(c):"float"===d&&(x=x.map(s)),x}},3140:function(r,n,i){r.exports=function(r,n,i,s){var l=a(n,i,s);if(0===l){var c=o(a(r,n,i)),f=o(a(r,n,s));if(c===f){if(0===c){var h=u(r,n,i);return h===u(r,n,s)?0:h?1:-1}return 0}return 0===f?c>0||u(r,n,s)?-1:1:0===c?f>0||u(r,n,i)?1:-1:o(f-c)}var p=a(r,n,i);return p>0?l>0&&a(r,n,s)>0?1:-1:p<0?l>0||a(r,n,s)>0?1:-1:a(r,n,s)>0||u(r,n,i)?1:-1};var a=i(3250),o=i(8572),s=i(9362),l=i(5382),c=i(8210);function u(r,n,i){var a=s(r[0],-n[0]),o=s(r[1],-n[1]),u=s(i[0],-n[0]),f=s(i[1],-n[1]),h=c(l(a,u),l(o,f));return h[h.length-1]>=0}},8572:function(r){r.exports=function(r){return r<0?-1:r>0?1:0}},8507:function(r){r.exports=function(r,a){var o=r.length,s=r.length-a.length;if(s)return s;switch(o){case 0:return 0;case 1:return r[0]-a[0];case 2:return r[0]+r[1]-a[0]-a[1]||n(r[0],r[1])-n(a[0],a[1]);case 3:var l=r[0]+r[1],c=a[0]+a[1];if(s=l+r[2]-(c+a[2]))return s;var u=n(r[0],r[1]),f=n(a[0],a[1]);return n(u,r[2])-n(f,a[2])||n(u+r[2],l)-n(f+a[2],c);case 4:var h=r[0],p=r[1],d=r[2],y=r[3],g=a[0],v=a[1],m=a[2],x=a[3];return h+p+d+y-(g+v+m+x)||n(h,p,d,y)-n(g,v,m,x,g)||n(h+p,h+d,h+y,p+d,p+y,d+y)-n(g+v,g+m,g+x,v+m,v+x,m+x)||n(h+p+d,h+p+y,h+d+y,p+d+y)-n(g+v+m,g+v+x,g+m+x,v+m+x);default:for(var b=r.slice().sort(i),_=a.slice().sort(i),w=0;w<o;++w)if(s=b[w]-_[w])return s;return 0}};var n=Math.min;function i(r,n){return r-n}},3788:function(r,n,i){var a=i(8507),o=i(2419);r.exports=function(r,n){return a(r,n)||o(r)-o(n)}},7352:function(r,n,i){var a=i(5721),o=i(4750),s=i(2690);r.exports=function(r){var n=r.length;if(0===n)return[];if(1===n)return[[0]];var i=r[0].length;return 0===i?[]:1===i?a(r):2===i?o(r):s(r,i)}},5721:function(r){r.exports=function(r){for(var n=0,i=0,a=1;a<r.length;++a)r[a][0]<r[n][0]&&(n=a),r[a][0]>r[i][0]&&(i=a);return n<i?[[n],[i]]:n>i?[[i],[n]]:[[n]]}},4750:function(r,n,i){r.exports=function(r){var n=a(r),i=n.length;if(i<=2)return[];for(var o=Array(i),s=n[i-1],l=0;l<i;++l){var c=n[l];o[l]=[s,c],s=c}return o};var a=i(3090)},2690:function(r,n,i){r.exports=function(r,n){try{return a(r,!0)}catch(s){var i=o(r);if(i.length<=n)return[];return function(r,n){for(var i=r.length,a=n.length,o=0;o<i;++o)for(var s=r[o],l=0;l<s.length;++l){var c=s[l];if(c<a)s[l]=n[c];else{c-=a;for(var u=0;u<a;++u)c>=n[u]&&(c+=1);s[l]=c}}return r}(a(function(r,n){for(var i=r.length,a=Array(i),o=0;o<n.length;++o)a[o]=r[n[o]];var s=n.length;for(o=0;o<i;++o)0>n.indexOf(o)&&(a[s++]=r[o]);return a}(r,i),!0),i)}};var a=i(8954),o=i(3952)},4769:function(r){r.exports=function(r,n,i,a,o,s){var l=o-1,c=o*o,u=l*l,f=(1+2*o)*u,h=o*u,p=c*(3-2*o),d=c*l;if(r.length){s||(s=Array(r.length));for(var y=r.length-1;y>=0;--y)s[y]=f*r[y]+h*n[y]+p*i[y]+d*a[y];return s}return f*r+h*n+p*i+d*a},r.exports.derivative=function(r,n,i,a,o,s){var l=6*o*o-6*o,c=3*o*o-4*o+1,u=-6*o*o+6*o,f=3*o*o-2*o;if(r.length){s||(s=Array(r.length));for(var h=r.length-1;h>=0;--h)s[h]=l*r[h]+c*n[h]+u*i[h]+f*a[h];return s}return l*r+c*n+u*i[h]+f*a}},7642:function(r,n,i){var a=i(8954),o=i(1682);function s(r,n){this.point=r,this.index=n}function l(r,n){for(var i=r.point,a=n.point,o=i.length,s=0;s<o;++s){var l=a[s]-i[s];if(l)return l}return 0}r.exports=function(r,n){var i=r.length;if(0===i)return[];var c=r[0].length;if(c<1)return[];if(1===c)return function(r,n,i){if(1===r)return i?[[-1,0]]:[];var a=n.map(function(r,n){return[r[0],n]});a.sort(function(r,n){return r[0]-n[0]});for(var o=Array(r-1),s=1;s<r;++s){var l=a[s-1],c=a[s];o[s-1]=[l[1],c[1]]}return i&&o.push([-1,o[0][1]],[o[r-1][1],-1]),o}(i,r,n);for(var u=Array(i),f=1,h=0;h<i;++h){for(var p=r[h],d=Array(c+1),y=0,g=0;g<c;++g){var v=p[g];d[g]=v,y+=v*v}d[c]=y,u[h]=new s(d,h),f=Math.max(y,f)}o(u,l);var m=Array((i=u.length)+c+1),x=Array(i+c+1),b=(c+1)*(c+1)*f,_=Array(c+1);for(h=0;h<=c;++h)_[h]=0;for(_[c]=b,m[0]=_.slice(),x[0]=-1,h=0;h<=c;++h)(d=_.slice())[h]=1,m[h+1]=d,x[h+1]=-1;for(h=0;h<i;++h){var w=u[h];m[h+c+1]=w.point,x[h+c+1]=w.index}var T=a(m,!1);if(T=n?T.filter(function(r){for(var n=0,i=0;i<=c;++i){var a=x[r[i]];if(a<0&&++n>=2)return!1;r[i]=a}return!0}):T.filter(function(r){for(var n=0;n<=c;++n){var i=x[r[n]];if(i<0)return!1;r[n]=i}return!0}),1&c)for(h=0;h<T.length;++h)d=(w=T[h])[0],w[0]=w[1],w[1]=d;return T}},2361:function(r){var n=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),a=new Uint32Array(i.buffer);i[0]=1,n=!0,1072693248===a[1]?(r.exports=function(r){return i[0]=r,[a[0],a[1]]},r.exports.pack=function(r,n){return a[0]=r,a[1]=n,i[0]},r.exports.lo=function(r){return i[0]=r,a[0]},r.exports.hi=function(r){return i[0]=r,a[1]}):1072693248===a[0]?(r.exports=function(r){return i[0]=r,[a[1],a[0]]},r.exports.pack=function(r,n){return a[1]=r,a[0]=n,i[0]},r.exports.lo=function(r){return i[0]=r,a[1]},r.exports.hi=function(r){return i[0]=r,a[0]}):n=!1}if(!n){var o=new rO(8);r.exports=function(r){return o.writeDoubleLE(r,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},r.exports.pack=function(r,n){return o.writeUInt32LE(r,0,!0),o.writeUInt32LE(n,4,!0),o.readDoubleLE(0,!0)},r.exports.lo=function(r){return o.writeDoubleLE(r,0,!0),o.readUInt32LE(0,!0)},r.exports.hi=function(r){return o.writeDoubleLE(r,0,!0),o.readUInt32LE(4,!0)}}r.exports.sign=function(n){return r.exports.hi(n)>>>31},r.exports.exponent=function(n){return(r.exports.hi(n)<<1>>>21)-1023},r.exports.fraction=function(n){var i=r.exports.lo(n),a=r.exports.hi(n),o=1048575&a;return 2146435072&a&&(o+=1048576),[i,o]},r.exports.denormalized=function(n){return!(2146435072&r.exports.hi(n))}},1338:function(r){r.exports=function(r,n){switch(void 0===n&&(n=0),typeof r){case"number":if(r>0)return function(r,n){var i,a;for(i=Array(r),a=0;a<r;++a)i[a]=n;return i}(0|r,n);break;case"object":if("number"==typeof r.length)return function r(n,i,a){var o=0|n[a];if(o<=0)return[];var s,l=Array(o);if(a===n.length-1)for(s=0;s<o;++s)l[s]=i;else for(s=0;s<o;++s)l[s]=r(n,i,a+1);return l}(r,n,0)}return[]}},3134:function(r,n,i){r.exports=function(r,n){var i=r.length;if("number"!=typeof n){n=0;for(var o=0;o<i;++o){var s=r[o];n=Math.max(n,s[0],s[1])}n=1+(0|n)}var l=Array(n|=0);for(o=0;o<n;++o)l[o]=[];for(o=0;o<i;++o)l[(s=r[o])[0]].push(s[1]),l[s[1]].push(s[0]);for(var c=0;c<n;++c)a(l[c],function(r,n){return r-n});return l};var a=i(1682)},5033:function(r){r.exports=function(r,n,i){var a=n||0,o=i||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[a*r[12]+r[8],a*r[13]+r[9],a*r[14]+r[10],a*r[15]+r[11]],[o*r[12]-r[8],o*r[13]-r[9],o*r[14]-r[10],o*r[15]-r[11]]]}},9215:function(r,n,i){r.exports=function(r,n,i){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof r?new l(a=u(r),a,0):new l(r,u(r.length),0);case 2:var a;if("number"==typeof n)return new l(r,a=u(r.length),+n);i=0;case 3:if(r.length!==n.length)throw Error("state and velocity lengths must match");return new l(r,n,i)}};var a=i(4769),o=i(2478);function s(r,n,i){return Math.min(n,Math.max(r,i))}function l(r,n,i){this.dimension=r.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var a=0;a<this.dimension;++a)this.bounds[0][a]=-1/0,this.bounds[1][a]=1/0;this._state=r.slice().reverse(),this._velocity=n.slice().reverse(),this._time=[i],this._scratch=[r.slice(),r.slice(),r.slice(),r.slice(),r.slice()]}var c=l.prototype;function u(r){for(var n=Array(r),i=0;i<r;++i)n[i]=0;return n}c.flush=function(r){var n=o.gt(this._time,r)-1;n<=0||(this._time.splice(0,n),this._state.splice(0,n*this.dimension),this._velocity.splice(0,n*this.dimension))},c.curve=function(r){var n=this._time,i=n.length,l=o.le(n,r),c=this._scratch[0],u=this._state,f=this._velocity,h=this.dimension,p=this.bounds;if(l<0)for(var d=h-1,y=0;y<h;++y,--d)c[y]=u[d];else if(l>=i-1){d=u.length-1;var g=r-n[i-1];for(y=0;y<h;++y,--d)c[y]=u[d]+g*f[d]}else{d=h*(l+1)-1;var v=n[l],m=n[l+1]-v||1,x=this._scratch[1],b=this._scratch[2],_=this._scratch[3],w=this._scratch[4],T=!0;for(y=0;y<h;++y,--d)x[y]=u[d],_[y]=f[d]*m,b[y]=u[d+h],w[y]=f[d+h]*m,T=T&&x[y]===b[y]&&_[y]===w[y]&&0===_[y];if(T)for(y=0;y<h;++y)c[y]=x[y];else a(x,_,b,w,(r-v)/m,c)}var A=p[0],k=p[1];for(y=0;y<h;++y)c[y]=s(A[y],k[y],c[y]);return c},c.dcurve=function(r){var n=this._time,i=n.length,s=o.le(n,r),l=this._scratch[0],c=this._state,u=this._velocity,f=this.dimension;if(s>=i-1)for(var h=c.length-1,p=(n[i-1],0);p<f;++p,--h)l[p]=u[h];else{h=f*(s+1)-1;var d=n[s],y=n[s+1]-d||1,g=this._scratch[1],v=this._scratch[2],m=this._scratch[3],x=this._scratch[4],b=!0;for(p=0;p<f;++p,--h)g[p]=c[h],m[p]=u[h]*y,v[p]=c[h+f],x[p]=u[h+f]*y,b=b&&g[p]===v[p]&&m[p]===x[p]&&0===m[p];if(b)for(p=0;p<f;++p)l[p]=0;else for(a.derivative(g,m,v,x,(r-d)/y,l),p=0;p<f;++p)l[p]/=y}return l},c.lastT=function(){var r=this._time;return r[r.length-1]},c.stable=function(){for(var r=this._velocity,n=r.length,i=this.dimension-1;i>=0;--i)if(r[--n])return!1;return!0},c.jump=function(r){var n=this.lastT(),i=this.dimension;if(!(r<n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,c=this.bounds,u=c[0],f=c[1];this._time.push(n,r);for(var h=0;h<2;++h)for(var p=0;p<i;++p)a.push(a[l++]),o.push(0);for(this._time.push(r),p=i;p>0;--p)a.push(s(u[p-1],f[p-1],arguments[p])),o.push(0)}},c.push=function(r){var n=this.lastT(),i=this.dimension;if(!(r<n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,c=r-n,u=this.bounds,f=u[0],h=u[1],p=c>1e-6?1/c:0;this._time.push(r);for(var d=i;d>0;--d){var y=s(f[d-1],h[d-1],arguments[d]);a.push(y),o.push((y-a[l++])*p)}}},c.set=function(r){var n=this.dimension;if(!(r<this.lastT()||arguments.length!==n+1)){var i=this._state,a=this._velocity,o=this.bounds,l=o[0],c=o[1];this._time.push(r);for(var u=n;u>0;--u)i.push(s(l[u-1],c[u-1],arguments[u])),a.push(0)}},c.move=function(r){var n=this.lastT(),i=this.dimension;if(!(r<=n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,c=this.bounds,u=c[0],f=c[1],h=r-n,p=h>1e-6?1/h:0;this._time.push(r);for(var d=i;d>0;--d){var y=arguments[d];a.push(s(u[d-1],f[d-1],a[l++]+y)),o.push(y*p)}}},c.idle=function(r){var n=this.lastT();if(!(r<n)){var i=this.dimension,a=this._state,o=this._velocity,l=a.length-i,c=this.bounds,u=c[0],f=c[1],h=r-n;this._time.push(r);for(var p=i-1;p>=0;--p)a.push(s(u[p],f[p],a[l]+h*o[l])),o.push(0),l+=1}}},3840:function(r){function n(r,n,i,a,o,s){this._color=r,this.key=n,this.value=i,this.left=a,this.right=o,this._count=s}function i(r){return new n(r._color,r.key,r.value,r.left,r.right,r._count)}function a(r,i){return new n(r,i.key,i.value,i.left,i.right,i._count)}function o(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function s(r,n){this._compare=r,this.root=n}r.exports=function(r){return new s(r||h,null)};var l=s.prototype;function c(r,n){this.tree=r,this._stack=n}Object.defineProperty(l,"keys",{get:function(){var r=[];return this.forEach(function(n,i){r.push(n)}),r}}),Object.defineProperty(l,"values",{get:function(){var r=[];return this.forEach(function(n,i){r.push(i)}),r}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(r,i){for(var l=this._compare,c=this.root,u=[],f=[];c;){var h=l(r,c.key);u.push(c),f.push(h),c=h<=0?c.left:c.right}u.push(new n(0,r,i,null,null,1));for(var p=u.length-2;p>=0;--p)c=u[p],f[p]<=0?u[p]=new n(c._color,c.key,c.value,u[p+1],c.right,c._count+1):u[p]=new n(c._color,c.key,c.value,c.left,u[p+1],c._count+1);for(p=u.length-1;p>1;--p){var d,y,g=u[p-1];if(c=u[p],1===g._color||1===c._color)break;var v=u[p-2];if(v.left===g){if(g.left===c){if(!(d=v.right)||0!==d._color){v._color=0,v.left=g.right,g._color=1,g.right=v,u[p-2]=g,u[p-1]=c,o(v),o(g),p>=3&&((y=u[p-3]).left===v?y.left=g:y.right=g);break}g._color=1,v.right=a(1,d),v._color=0,p-=1}else{if(!(d=v.right)||0!==d._color){g.right=c.left,v._color=0,v.left=c.right,c._color=1,c.left=g,c.right=v,u[p-2]=c,u[p-1]=g,o(v),o(g),o(c),p>=3&&((y=u[p-3]).left===v?y.left=c:y.right=c);break}g._color=1,v.right=a(1,d),v._color=0,p-=1}}else if(g.right===c){if(!(d=v.left)||0!==d._color){v._color=0,v.right=g.left,g._color=1,g.left=v,u[p-2]=g,u[p-1]=c,o(v),o(g),p>=3&&((y=u[p-3]).right===v?y.right=g:y.left=g);break}g._color=1,v.left=a(1,d),v._color=0,p-=1}else{if(!(d=v.left)||0!==d._color){g.left=c.right,v._color=0,v.right=c.left,c._color=1,c.right=g,c.left=v,u[p-2]=c,u[p-1]=g,o(v),o(g),o(c),p>=3&&((y=u[p-3]).right===v?y.right=c:y.left=c);break}g._color=1,v.left=a(1,d),v._color=0,p-=1}}return u[0]._color=1,new s(l,u[0])},l.forEach=function(r,n,i){if(this.root)switch(arguments.length){case 1:return function r(n,i){var a;return i.left&&(a=r(n,i.left))?a:(a=n(i.key,i.value))||(i.right?r(n,i.right):void 0)}(r,this.root);case 2:return function r(n,i,a,o){if(0>=i(n,o.key)){var s;if(o.left&&(s=r(n,i,a,o.left))||(s=a(o.key,o.value)))return s}if(o.right)return r(n,i,a,o.right)}(n,this._compare,r,this.root);case 3:if(this._compare(n,i)>=0)return;return function r(n,i,a,o,s){var l,c=a(n,s.key),u=a(i,s.key);return c<=0&&(s.left&&(l=r(n,i,a,o,s.left))||u>0&&(l=o(s.key,s.value)))?l:u>0&&s.right?r(n,i,a,o,s.right):void 0}(n,i,this._compare,r,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var r=[],n=this.root;n;)r.push(n),n=n.left;return new c(this,r)}}),Object.defineProperty(l,"end",{get:function(){for(var r=[],n=this.root;n;)r.push(n),n=n.right;return new c(this,r)}}),l.at=function(r){if(r<0)return new c(this,[]);for(var n=this.root,i=[];;){if(i.push(n),n.left){if(r<n.left._count){n=n.left;continue}r-=n.left._count}if(!r)return new c(this,i);if(r-=1,!n.right||r>=n.right._count)break;n=n.right}return new c(this,[])},l.ge=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s<=0&&(o=a.length),i=s<=0?i.left:i.right}return a.length=o,new c(this,a)},l.gt=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s<0&&(o=a.length),i=s<0?i.left:i.right}return a.length=o,new c(this,a)},l.lt=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s>0&&(o=a.length),i=s<=0?i.left:i.right}return a.length=o,new c(this,a)},l.le=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s>=0&&(o=a.length),i=s<0?i.left:i.right}return a.length=o,new c(this,a)},l.find=function(r){for(var n=this._compare,i=this.root,a=[];i;){var o=n(r,i.key);if(a.push(i),0===o)return new c(this,a);i=o<=0?i.left:i.right}return new c(this,[])},l.remove=function(r){var n=this.find(r);return n?n.remove():this},l.get=function(r){for(var n=this._compare,i=this.root;i;){var a=n(r,i.key);if(0===a)return i.value;i=a<=0?i.left:i.right}};var u=c.prototype;function f(r,n){r.key=n.key,r.value=n.value,r.left=n.left,r.right=n.right,r._color=n._color,r._count=n._count}function h(r,n){return r<n?-1:r>n?1:0}Object.defineProperty(u,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(u,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),u.clone=function(){return new c(this.tree,this._stack.slice())},u.remove=function(){var r=this._stack;if(0===r.length)return this.tree;var l=Array(r.length),c=r[r.length-1];l[l.length-1]=new n(c._color,c.key,c.value,c.left,c.right,c._count);for(var u=r.length-2;u>=0;--u)(c=r[u]).left===r[u+1]?l[u]=new n(c._color,c.key,c.value,l[u+1],c.right,c._count):l[u]=new n(c._color,c.key,c.value,c.left,l[u+1],c._count);if((c=l[l.length-1]).left&&c.right){var h=l.length;for(c=c.left;c.right;)l.push(c),c=c.right;var p=l[h-1];for(l.push(new n(c._color,p.key,p.value,c.left,c.right,c._count)),l[h-1].key=c.key,l[h-1].value=c.value,u=l.length-2;u>=h;--u)c=l[u],l[u]=new n(c._color,c.key,c.value,c.left,l[u+1],c._count);l[h-1].left=l[h]}if(0===(c=l[l.length-1])._color){var d=l[l.length-2];for(d.left===c?d.left=null:d.right===c&&(d.right=null),l.pop(),u=0;u<l.length;++u)l[u]._count--;return new s(this.tree._compare,l[0])}if(c.left||c.right){for(c.left?f(c,c.left):c.right&&f(c,c.right),c._color=1,u=0;u<l.length-1;++u)l[u]._count--;return new s(this.tree._compare,l[0])}if(1===l.length)return new s(this.tree._compare,null);for(u=0;u<l.length;++u)l[u]._count--;var y=l[l.length-2];return function(r){for(var n,s,l,c,u,f=r.length-1;f>=0;--f){if(s=r[f],0===f)return void(s._color=1);if((l=r[f-1]).left===s){if((c=l.right).right&&0===c.right._color)return u=(c=l.right=i(c)).right=i(c.right),l.right=c.left,c.left=l,c.right=u,c._color=l._color,s._color=1,l._color=1,u._color=1,o(l),o(c),f>1&&((n=r[f-2]).left===l?n.left=c:n.right=c),void(r[f-1]=c);if(c.left&&0===c.left._color)return u=(c=l.right=i(c)).left=i(c.left),l.right=u.left,c.left=u.right,u.left=l,u.right=c,u._color=l._color,l._color=1,c._color=1,s._color=1,o(l),o(c),o(u),f>1&&((n=r[f-2]).left===l?n.left=u:n.right=u),void(r[f-1]=u);if(1===c._color){if(0===l._color)return l._color=1,void(l.right=a(0,c));l.right=a(0,c);continue}c=i(c),l.right=c.left,c.left=l,c._color=l._color,l._color=0,o(l),o(c),f>1&&((n=r[f-2]).left===l?n.left=c:n.right=c),r[f-1]=c,r[f]=l,f+1<r.length?r[f+1]=s:r.push(s),f+=2}else{if((c=l.left).left&&0===c.left._color)return u=(c=l.left=i(c)).left=i(c.left),l.left=c.right,c.right=l,c.left=u,c._color=l._color,s._color=1,l._color=1,u._color=1,o(l),o(c),f>1&&((n=r[f-2]).right===l?n.right=c:n.left=c),void(r[f-1]=c);if(c.right&&0===c.right._color)return u=(c=l.left=i(c)).right=i(c.right),l.left=u.right,c.right=u.left,u.right=l,u.left=c,u._color=l._color,l._color=1,c._color=1,s._color=1,o(l),o(c),o(u),f>1&&((n=r[f-2]).right===l?n.right=u:n.left=u),void(r[f-1]=u);if(1===c._color){if(0===l._color)return l._color=1,void(l.left=a(0,c));l.left=a(0,c);continue}c=i(c),l.left=c.right,c.right=l,c._color=l._color,l._color=0,o(l),o(c),f>1&&((n=r[f-2]).right===l?n.right=c:n.left=c),r[f-1]=c,r[f]=l,f+1<r.length?r[f+1]=s:r.push(s),f+=2}}}(l),y.left===c?y.left=null:y.right=null,new s(this.tree._compare,l[0])},Object.defineProperty(u,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(u,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(u,"index",{get:function(){var r=0,n=this._stack;if(0===n.length){var i=this.tree.root;return i?i._count:0}n[n.length-1].left&&(r=n[n.length-1].left._count);for(var a=n.length-2;a>=0;--a)n[a+1]===n[a].right&&(++r,n[a].left&&(r+=n[a].left._count));return r},enumerable:!0}),u.next=function(){var r=this._stack;if(0!==r.length){var n=r[r.length-1];if(n.right)for(n=n.right;n;)r.push(n),n=n.left;else for(r.pop();r.length>0&&r[r.length-1].right===n;)n=r[r.length-1],r.pop()}},Object.defineProperty(u,"hasNext",{get:function(){var r=this._stack;if(0===r.length)return!1;if(r[r.length-1].right)return!0;for(var n=r.length-1;n>0;--n)if(r[n-1].left===r[n])return!0;return!1}}),u.update=function(r){var i=this._stack;if(0===i.length)throw Error("Can't update empty node!");var a=Array(i.length),o=i[i.length-1];a[a.length-1]=new n(o._color,o.key,r,o.left,o.right,o._count);for(var l=i.length-2;l>=0;--l)(o=i[l]).left===i[l+1]?a[l]=new n(o._color,o.key,o.value,a[l+1],o.right,o._count):a[l]=new n(o._color,o.key,o.value,o.left,a[l+1],o._count);return new s(this.tree._compare,a[0])},u.prev=function(){var r=this._stack;if(0!==r.length){var n=r[r.length-1];if(n.left)for(n=n.left;n;)r.push(n),n=n.right;else for(r.pop();r.length>0&&r[r.length-1].left===n;)n=r[r.length-1],r.pop()}},Object.defineProperty(u,"hasPrev",{get:function(){var r=this._stack;if(0===r.length)return!1;if(r[r.length-1].left)return!0;for(var n=r.length-1;n>0;--n)if(r[n-1].right===r[n])return!0;return!1}})},3837:function(r,n,i){r.exports=function(r,n){var i=new y(r);return i.update(n),i};var a=i(4935),o=i(501),s=i(5304),l=i(6429),c=i(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=ArrayBuffer,h=DataView;function p(r){return Array.isArray(r)||f.isView(r)&&!(r instanceof h)}function d(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function y(r){this.gl=r,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=s(r)}var g=y.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(r){function n(n,i,a){if(a in r){var o,s=r[a],l=this[a];(n?p(s)&&p(s[0]):p(s))?this[a]=o=[i(s[0]),i(s[1]),i(s[2])]:this[a]=o=[i(s),i(s),i(s)];for(var c=0;c<3;++c)if(o[c]!==l[c])return!0}return!1}r=r||{};var i,s=n.bind(this,!1,Number),l=n.bind(this,!1,Boolean),u=n.bind(this,!1,String),f=n.bind(this,!0,function(r){if(p(r)){if(3===r.length)return[+r[0],+r[1],+r[2],1];if(4===r.length)return[+r[0],+r[1],+r[2],+r[3]]}return[0,0,0,1]}),h=!1,d=!1;if("bounds"in r)for(var y=r.bounds,g=0;g<2;++g)for(var v=0;v<3;++v)y[g][v]!==this.bounds[g][v]&&(d=!0),this.bounds[g][v]=y[g][v];if("ticks"in r)for(i=r.ticks,h=!0,this.autoTicks=!1,g=0;g<3;++g)this.tickSpacing[g]=0;else s("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in r||"tickSpacing"in r||(this.autoTicks=!0),d=!0,h=!0,this._firstInit=!1),d&&this.autoTicks&&(i=c.create(this.bounds,this.tickSpacing),h=!0),h){for(g=0;g<3;++g)i[g].sort(function(r,n){return r.x-n.x});c.equal(i,this.ticks)?h=!1:this.ticks=i}l("tickEnable"),u("tickFont")&&(h=!0),u("tickFontStyle")&&(h=!0),u("tickFontWeight")&&(h=!0),u("tickFontVariant")&&(h=!0),s("tickSize"),s("tickAngle"),s("tickPad"),f("tickColor");var m=u("labels");u("labelFont")&&(m=!0),u("labelFontStyle")&&(m=!0),u("labelFontWeight")&&(m=!0),u("labelFontVariant")&&(m=!0),l("labelEnable"),s("labelSize"),s("labelPad"),f("labelColor"),l("lineEnable"),l("lineMirror"),s("lineWidth"),f("lineColor"),l("lineTickEnable"),l("lineTickMirror"),s("lineTickLength"),s("lineTickWidth"),f("lineTickColor"),l("gridEnable"),s("gridWidth"),f("gridColor"),l("zeroEnable"),f("zeroLineColor"),s("zeroLineWidth"),l("backgroundEnable"),f("backgroundColor");var x=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],b=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(m||h)&&this._text.update(this.bounds,this.labels,x,this.ticks,b):this._text=a(this.gl,this.bounds,this.labels,x,this.ticks,b),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var m=[new v,new v,new v],x=[0,0,0],b={model:u,view:u,projection:u,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(r){};var _=[0,0,0],w=[0,0,0],T=[0,0,0];g.draw=function(r){r=r||b;for(var n,i,a,o=this.gl,s=r.model||u,c=r.view||u,f=r.projection||u,h=this.bounds,p=r._ortho||!1,y=l(s,c,f,h,p),g=y.cubeEdges,v=y.axis,A=c[12],k=c[13],M=c[14],S=c[15],E=(p?2:1)*this.pixelRatio*(f[3]*A+f[7]*k+f[11]*M+f[15]*S)/o.drawingBufferHeight,I=0;I<3;++I)this.lastCubeProps.cubeEdges[I]=g[I],this.lastCubeProps.axis[I]=v[I];for(I=0;I<3;++I)(function(r,n,i,a,o){for(var s=r.primalOffset,l=r.primalMinor,c=r.mirrorOffset,u=r.mirrorMinor,f=a[n],h=0;h<3;++h)if(n!==h){var p=s,d=c,y=l,g=u;f&1<<h&&(p=c,d=s,y=u,g=l),p[h]=i[0][h],d[h]=i[1][h],o[h]>0?(y[h]=-1,g[h]=0):(y[h]=0,g[h]=1)}})(m[I],I,this.bounds,g,v);for(I=0,o=this.gl;I<3;++I)this.backgroundEnable[I]?x[I]=v[I]:x[I]=0;for(this._background.draw(s,c,f,h,x,this.backgroundColor),this._lines.bind(s,c,f,this),I=0;I<3;++I){var L=[0,0,0];v[I]>0?L[I]=h[1][I]:L[I]=h[0][I];for(var C=0;C<2;++C){var O=(I+1+C)%3,D=(I+1+(1^C))%3;this.gridEnable[O]&&this._lines.drawGrid(O,D,this.bounds,L,this.gridColor[O],this.gridWidth[O]*this.pixelRatio)}for(C=0;C<2;++C)O=(I+1+C)%3,D=(I+1+(1^C))%3,this.zeroEnable[D]&&0>=Math.min(h[0][D],h[1][D])&&Math.max(h[0][D],h[1][D])>=0&&this._lines.drawZero(O,D,this.bounds,L,this.zeroLineColor[D],this.zeroLineWidth[D]*this.pixelRatio)}for(I=0;I<3;++I){this.lineEnable[I]&&this._lines.drawAxisLine(I,this.bounds,m[I].primalOffset,this.lineColor[I],this.lineWidth[I]*this.pixelRatio),this.lineMirror[I]&&this._lines.drawAxisLine(I,this.bounds,m[I].mirrorOffset,this.lineColor[I],this.lineWidth[I]*this.pixelRatio);var P=d(_,m[I].primalMinor),B=d(w,m[I].mirrorMinor),R=this.lineTickLength;for(C=0;C<3;++C){var z=E/s[5*C];P[C]*=R[C]*z,B[C]*=R[C]*z}this.lineTickEnable[I]&&this._lines.drawAxisTicks(I,m[I].primalOffset,P,this.lineTickColor[I],this.lineTickWidth[I]*this.pixelRatio),this.lineTickMirror[I]&&this._lines.drawAxisTicks(I,m[I].mirrorOffset,B,this.lineTickColor[I],this.lineTickWidth[I]*this.pixelRatio)}function F(r){(a=[0,0,0])[r]=1}for(this._lines.unbind(),this._text.bind(s,c,f,this.pixelRatio),I=0;I<3;++I){var N=m[I].primalMinor,U=m[I].mirrorMinor,j=d(T,m[I].primalOffset);for(C=0;C<3;++C)this.lineTickEnable[I]&&(j[C]+=E*N[C]*Math.max(this.lineTickLength[C],0)/s[5*C]);var V=[0,0,0];if(V[I]=1,this.tickEnable[I]){for(-3600===this.tickAngle[I]?(this.tickAngle[I]=0,this.tickAlign[I]="auto"):this.tickAlign[I]=-1,i=1,"auto"===(n=[this.tickAlign[I],.5,i])[0]?n[0]=0:n[0]=parseInt(""+n[0]),a=[0,0,0],function(r,n,i){var a=(r+1)%3,o=(r+2)%3,s=n[a],l=n[o],c=i[a],u=i[o];s>0&&u>0||s>0&&u<0||s<0&&u>0||s<0&&u<0?F(a):(l>0&&c>0||l>0&&c<0||l<0&&c>0||l<0&&c<0)&&F(o)}(I,N,U),C=0;C<3;++C)j[C]+=E*N[C]*this.tickPad[C]/s[5*C];this._text.drawTicks(I,this.tickSize[I],this.tickAngle[I],j,this.tickColor[I],V,a,n)}if(this.labelEnable[I]){for(i=0,a=[0,0,0],this.labels[I].length>4&&(F(I),i=1),"auto"===(n=[this.labelAlign[I],.5,i])[0]?n[0]=0:n[0]=parseInt(""+n[0]),C=0;C<3;++C)j[C]+=E*N[C]*this.labelPad[C]/s[5*C];j[I]+=.5*(h[0][I]+h[1][I]),this._text.drawLabel(I,this.labelSize[I],this.labelAngle[I],j,this.labelColor[I],[0,0,0],a,n)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(r,n,i){r.exports=function(r){for(var n=[],i=[],c=0,u=0;u<3;++u)for(var f=(u+1)%3,h=(u+2)%3,p=[0,0,0],d=[0,0,0],y=-1;y<=1;y+=2){i.push(c,c+2,c+1,c+1,c+2,c+3),p[u]=y,d[u]=y;for(var g=-1;g<=1;g+=2){p[f]=g;for(var v=-1;v<=1;v+=2)p[h]=v,n.push(p[0],p[1],p[2],d[0],d[1],d[2]),c+=1}var m=f;f=h,h=m}var x=a(r,new Float32Array(n)),b=a(r,new Uint16Array(i),r.ELEMENT_ARRAY_BUFFER),_=o(r,[{buffer:x,type:r.FLOAT,size:3,offset:0,stride:24},{buffer:x,type:r.FLOAT,size:3,offset:12,stride:24}],b),w=s(r);return w.attributes.position.location=0,w.attributes.normal.location=1,new l(r,x,_,w)};var a=i(2762),o=i(8116),s=i(1879).bg;function l(r,n,i,a){this.gl=r,this.buffer=n,this.vao=i,this.shader=a}var c=l.prototype;c.draw=function(r,n,i,a,o,s){for(var l=!1,c=0;c<3;++c)l=l||o[c];if(l){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:r,view:n,projection:i,bounds:a,enable:o,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(r,n,i){r.exports=function(r,n,i,m,x){o(c,n,r),o(c,i,c);for(var b,_=0,w=0;w<2;++w){h[2]=m[w][2];for(var T=0;T<2;++T){h[1]=m[T][1];for(var A=0;A<2;++A)h[0]=m[A][0],function(r,n,i){for(var a=0;a<4;++a){r[a]=i[12+a];for(var o=0;o<3;++o)r[a]+=n[o]*i[4*o+a]}}(u[_],h,c),_+=1}}var k=-1;for(w=0;w<8;++w){for(var M=u[w][3],S=0;S<3;++S)f[w][S]=u[w][S]/M;x&&(f[w][2]*=-1),M<0&&(k<0||f[w][2]<f[k][2])&&(k=w)}if(k<0){k=0;for(var E=0;E<3;++E){for(var I=(E+2)%3,L=(E+1)%3,C=-1,O=-1,D=0;D<2;++D){var P=(R=D<<E)+(D<<I)+(1-D<<L),B=R+(1-D<<I)+(D<<L);0>l(f[R],f[P],f[B],p)||(D?C=1:O=1)}if(C<0||O<0)O>C&&(k|=1<<E);else{for(D=0;D<2;++D){P=(R=D<<E)+(D<<I)+(1-D<<L),B=R+(1-D<<I)+(D<<L);var R,z=function(r){for(var n=0;n<d.length;++n)if((r=s.positive(r,d[n])).length<3)return 0;var i=r[0],a=i[0]/i[3],o=i[1]/i[3],l=0;for(n=1;n+1<r.length;++n){var c=r[n],u=r[n+1],f=c[0]/c[3]-a,h=c[1]/c[3]-o,p=u[0]/u[3]-a;l+=Math.abs(f*(u[1]/u[3]-o)-h*p)}return l}([u[R],u[P],u[B],u[R+(1<<I)+(1<<L)]]);D?C=z:O=z}O>C&&(k|=1<<E)}}}var F=7^k,N=-1;for(w=0;w<8;++w)w!==k&&w!==F&&(N<0||f[N][1]>f[w][1])&&(N=w);var U=-1;for(w=0;w<3;++w)(b=N^1<<w)!==k&&b!==F&&(U<0&&(U=b),(L=f[b])[0]<f[U][0]&&(U=b));var j=-1;for(w=0;w<3;++w)(b=N^1<<w)!==k&&b!==F&&b!==U&&(j<0&&(j=b),(L=f[b])[0]>f[j][0]&&(j=b));y[0]=y[1]=y[2]=0,y[a.log2(U^N)]=N&U,y[a.log2(N^j)]=N&j;var V=7^j;V===k||V===F?(V=7^U,y[a.log2(j^V)]=V&j):y[a.log2(U^V)]=V&U;var H=k;for(E=0;E<3;++E)g[E]=H&1<<E?-1:1;return v};var a=i(8828),o=i(6760),s=i(5202),l=i(3250),c=Array(16),u=Array(8),f=Array(8),h=[,,,],p=[0,0,0];!function(){for(var r=0;r<8;++r)u[r]=[1,1,1,1],f[r]=[1,1,1]}();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],y=[1,1,1],g=[0,0,0],v={cubeEdges:y,axis:g}},501:function(r,n,i){r.exports=function(r,n,i){var l=[],c=[0,0,0],u=[0,0,0],f=[0,0,0],h=[0,0,0];l.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var p=0;p<3;++p){for(var d=l.length/3|0,g=0;g<i[p].length;++g){var v=+i[p][g].x;l.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=l.length/3|0;c[p]=d,u[p]=m-d,d=l.length/3|0;for(var x=0;x<i[p].length;++x)v=+i[p][x].x,l.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1);m=l.length/3|0,f[p]=d,h[p]=m-d}var b=a(r,new Float32Array(l)),_=o(r,[{buffer:b,type:r.FLOAT,size:3,stride:0,offset:0}]),w=s(r);return w.attributes.position.location=0,new y(r,b,_,w,u,c,h,f)};var a=i(2762),o=i(8116),s=i(1879).n,l=[0,0,0],c=[0,0,0],u=[0,0,0],f=[0,0,0],h=[1,1];function p(r){return r[0]=r[1]=r[2]=0,r}function d(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function y(r,n,i,a,o,s,l,c){this.gl=r,this.vertBuffer=n,this.vao=i,this.shader=a,this.tickCount=o,this.tickOffset=s,this.gridCount=l,this.gridOffset=c}var g=y.prototype;g.bind=function(r,n,i){this.shader.bind(),this.shader.uniforms.model=r,this.shader.uniforms.view=n,this.shader.uniforms.projection=i,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(r,n,i,a,o){var s=p(c);this.shader.uniforms.majorAxis=c,s[r]=n[1][r]-n[0][r],this.shader.uniforms.minorAxis=s;var l,h=d(f,i);h[r]+=n[0][r],this.shader.uniforms.offset=h,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=a,(l=p(u))[(r+2)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6),(l=p(u))[(r+1)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(r,n,i,a,o){if(this.tickCount[r]){var s=p(l);s[r]=1,this.shader.uniforms.majorAxis=s,this.shader.uniforms.offset=n,this.shader.uniforms.minorAxis=i,this.shader.uniforms.color=a,this.shader.uniforms.lineWidth=o;var c=p(u);c[r]=1,this.shader.uniforms.screenAxis=c,this.vao.draw(this.gl.TRIANGLES,this.tickCount[r],this.tickOffset[r])}},g.drawGrid=function(r,n,i,a,o,s){if(this.gridCount[r]){var h=p(c);h[n]=i[1][n]-i[0][n],this.shader.uniforms.minorAxis=h;var y=d(f,a);y[n]+=i[0][n],this.shader.uniforms.offset=y;var g=p(l);g[r]=1,this.shader.uniforms.majorAxis=g;var v=p(u);v[r]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,this.gridCount[r],this.gridOffset[r])}},g.drawZero=function(r,n,i,a,o,s){var l=p(c);this.shader.uniforms.majorAxis=l,l[r]=i[1][r]-i[0][r],this.shader.uniforms.minorAxis=l;var h=d(f,a);h[r]+=i[0][r],this.shader.uniforms.offset=h;var y=p(u);y[n]=1,this.shader.uniforms.screenAxis=y,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(r,n,i){var a=i(3236),o=i(9405),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.n=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"}])};var c=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.Q=function(r){return o(r,c,u,null,[{name:"position",type:"vec3"}])};var f=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),h=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(r){return o(r,f,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(r,n,i){r.exports=function(r,n,i,a,l,u){var f=o(r),p=s(r,[{buffer:f,size:3}]),d=c(r);d.attributes.position.location=0;var y=new h(r,d,f,p);return y.update(n,i,a,l,u),y};var o=i(2762),s=i(8116),l=i(4359),c=i(1879).Q,u=window||a.global||{},f=u.__TEXT_CACHE||{};function h(r,n,i,a){this.gl=r,this.shader=n,this.buffer=i,this.vao=a,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var p=h.prototype,d=[0,0];p.bind=function(r,n,i,a){this.vao.bind(),this.shader.bind();var o=this.shader.uniforms;o.model=r,o.view=n,o.projection=i,o.pixelScale=a,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},p.unbind=function(){this.vao.unbind()},p.update=function(r,n,i,a,o){var s=[];function c(r,n,i,a,o,c){var u=[i.style,i.weight,i.variant,i.family].join("_"),h=f[u];h||(h=f[u]={});var p=h[n];p||(p=h[n]=function(r,n){try{return l(r,n)}catch(n){return console.warn('error vectorizing text:"'+r+'" error:',n),{cells:[],positions:[]}}}(n,{triangles:!0,font:i.family,fontStyle:i.style,fontWeight:i.weight,fontVariant:i.variant,textAlign:"center",textBaseline:"middle",lineSpacing:o,styletags:c}));for(var d=(a||12)/12,y=p.positions,g=p.cells,v=0,m=g.length;v<m;++v)for(var x=g[v],b=2;b>=0;--b){var _=y[x[b]];s.push(d*_[0],-d*_[1],r)}}for(var u=[0,0,0],h=[0,0,0],p=[0,0,0],d=[0,0,0],y={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},g=0;g<3;++g){p[g]=s.length/3|0,c(.5*(r[0][g]+r[1][g]),n[g],i[g],12,1.25,y),d[g]=(s.length/3|0)-p[g],u[g]=s.length/3|0;for(var v=0;v<a[g].length;++v)if(a[g][v].text){var m={family:a[g][v].font||o[g].family,style:o[g].fontStyle||o[g].style,weight:o[g].fontWeight||o[g].weight,variant:o[g].fontVariant||o[g].variant};c(a[g][v].x,a[g][v].text,m,a[g][v].fontSize||12,1.25,y)}h[g]=(s.length/3|0)-u[g]}this.buffer.update(s),this.tickOffset=u,this.tickCount=h,this.labelOffset=p,this.labelCount=d},p.drawTicks=function(r,n,i,a,o,s,l,c){this.tickCount[r]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=o,this.shader.uniforms.angle=i,this.shader.uniforms.scale=n,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=l,this.shader.uniforms.alignOpt=c,this.vao.draw(this.gl.TRIANGLES,this.tickCount[r],this.tickOffset[r]))},p.drawLabel=function(r,n,i,a,o,s,l,c){this.labelCount[r]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=o,this.shader.uniforms.angle=i,this.shader.uniforms.scale=n,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=l,this.shader.uniforms.alignOpt=c,this.vao.draw(this.gl.TRIANGLES,this.labelCount[r],this.labelOffset[r]))},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(r,n){function i(r,n){var i=r+"",a=i.indexOf("."),o=0;a>=0&&(o=i.length-a-1);var s=Math.pow(10,o),l=Math.round(r*n*s),c=l+"";if(c.indexOf("e")>=0)return c;var u=l/s,f=l%s;l<0?(u=0|-Math.ceil(u),f=0|-f):(u=0|Math.floor(u),f|=0);var h=""+u;if(l<0&&(h="-"+h),o){for(var p=""+f;p.length<o;)p="0"+p;return h+"."+p}return h}n.create=function(r,n){for(var a=[],o=0;o<3;++o){for(var s=[],l=(r[0][o],r[1][o],0);l*n[o]<=r[1][o];++l)s.push({x:l*n[o],text:i(n[o],l)});for(l=-1;l*n[o]>=r[0][o];--l)s.push({x:l*n[o],text:i(n[o],l)});a.push(s)}return a},n.equal=function(r,n){for(var i=0;i<3;++i){if(r[i].length!==n[i].length)return!1;for(var a=0;a<r[i].length;++a){var o=r[i][a],s=n[i][a];if(o.x!==s.x||o.text!==s.text||o.font!==s.font||o.fontColor!==s.fontColor||o.fontSize!==s.fontSize||o.dx!==s.dx||o.dy!==s.dy)return!1}}return!0}},5445:function(r,n,i){r.exports=function(r,n,i,p,m){var x=n.model||f,b=n.view||f,_=n.projection||f,w=n._ortho||!1,T=r.bounds,A=(m=m||s(x,b,_,T,w)).axis;l(h,b,x),l(h,_,h);for(var k=0;k<3;++k)g[k].lo=1/0,g[k].hi=-1/0,g[k].pixelsPerDataUnit=1/0;var M=a(c(h,h));c(h,h);for(var S=0;S<3;++S){var E=(S+1)%3,I=(S+2)%3;e:for(k=0;k<2;++k){var L=[];if(A[S]<0!=!!k){v[S]=T[k][S];for(var C=0;C<2;++C){v[E]=T[C^k][E];for(var O=0;O<2;++O)v[I]=T[O^C^k][I],L.push(v.slice())}var D=w?5:4;for(C=D;C===D;++C){if(0===L.length)continue e;L=o.positive(L,M[C])}for(C=0;C<L.length;++C){var P=function(r,n,i,a,o){for(var s=0;s<3;++s){for(var l=0;l<3;++l)y[l]=d[l]=i[l];y[3]=d[3]=1,y[s]+=1,u(y,y,n),y[3]<0&&(r[s]=1/0),d[s]-=1,u(d,d,n),d[3]<0&&(r[s]=1/0);var c=(d[0]/d[3]-y[0]/y[3])*a,f=(d[1]/d[3]-y[1]/y[3])*o;r[s]=.25*Math.sqrt(c*c+f*f)}return r}(v,h,I=L[C],i,p);for(O=0;O<3;++O)g[O].lo=Math.min(g[O].lo,I[O]),g[O].hi=Math.max(g[O].hi,I[O]),O!==S&&(g[O].pixelsPerDataUnit=Math.min(g[O].pixelsPerDataUnit,Math.abs(P[O])))}}}}return g};var a=i(5033),o=i(5202),s=i(6429),l=i(6760),c=i(5665),u=i(5352),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function p(r,n,i){this.lo=r,this.hi=n,this.pixelsPerDataUnit=i}var d=[0,0,0,1],y=[0,0,0,1],g=[new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(r,n,i){var a=i(1888),o=i(5298),s=i(9618),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function c(r,n,i,a,o){this.gl=r,this.type=n,this.handle=i,this.length=a,this.usage=o}var u=c.prototype;function f(r,n,i,a,o,s){var l=o.length*o.BYTES_PER_ELEMENT;if(s<0)return r.bufferData(n,o,a),l;if(l+s>i)throw Error("gl-buffer: If resizing buffer, must not specify offset");return r.bufferSubData(n,s,o),i}function h(r,n){for(var i=a.malloc(r.length,n),o=r.length,s=0;s<o;++s)i[s]=r[s];return i}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(r,n){if("number"!=typeof n&&(n=-1),this.bind(),"object"==typeof r&&void 0!==r.shape){var i,c=r.dtype;if(0>l.indexOf(c)&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16"),c===r.dtype&&function(r,n){for(var i=1,a=n.length-1;a>=0;--a){if(n[a]!==i)return!1;i*=r[a]}return!0}(r.shape,r.stride))0===r.offset&&r.data.length===r.shape[0]?this.length=f(this.gl,this.type,this.length,this.usage,r.data,n):this.length=f(this.gl,this.type,this.length,this.usage,r.data.subarray(r.offset,r.shape[0]),n);else{var u=a.malloc(r.size,c),p=s(u,r.shape);o.assign(p,r),this.length=f(this.gl,this.type,this.length,this.usage,n<0?u:u.subarray(0,r.size),n),a.free(u)}}else if(Array.isArray(r))i=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(r,"uint16"):h(r,"float32"),this.length=f(this.gl,this.type,this.length,this.usage,n<0?i:i.subarray(0,r.length),n),a.free(i);else if("object"==typeof r&&"number"==typeof r.length)this.length=f(this.gl,this.type,this.length,this.usage,r,n);else{if("number"!=typeof r&&void 0!==r)throw Error("gl-buffer: Invalid data type");if(n>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(r|=0)<=0&&(r=1),this.gl.bufferData(this.type,0|r,this.usage),this.length=r}},r.exports=function(r,n,i,a){if(i=i||r.ARRAY_BUFFER,a=a||r.DYNAMIC_DRAW,i!==r.ARRAY_BUFFER&&i!==r.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(a!==r.DYNAMIC_DRAW&&a!==r.STATIC_DRAW&&a!==r.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var o=r.createBuffer(),s=new c(r,i,o,0,a);return s.update(n),s}},6405:function(r,n,i){var a=i(2931);r.exports=function(r,n){var i=r.positions,o=r.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(0===r.positions.length)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var l=0,c=1/0,u=-1/0,f=1/0,h=-1/0,p=1/0,d=-1/0,y=null,g=null,v=[],m=1/0,x=!1,b="raw"===r.coneSizemode,_=0;_<i.length;_++){var w=i[_];c=Math.min(w[0],c),u=Math.max(w[0],u),f=Math.min(w[1],f),h=Math.max(w[1],h),p=Math.min(w[2],p),d=Math.max(w[2],d);var T=o[_];if(a.length(T)>l&&(l=a.length(T)),_&&!b){var A=2*a.distance(y,w)/(a.length(g)+a.length(T));A?(m=Math.min(m,A),x=!1):x=!0}x||(y=w,g=T),v.push(T)}var k=[c,f,p],M=[u,h,d];n&&(n[0]=k,n[1]=M),0===l&&(l=1);var S=1/l;isFinite(m)||(m=1),s.vectorScale=m;var E=r.coneSize||(b?1:.5);r.absoluteConeSize&&(E=r.absoluteConeSize*S),s.coneScale=E,_=0;for(var I=0;_<i.length;_++)for(var L=(w=i[_])[0],C=w[1],O=w[2],D=v[_],P=a.length(D)*S,B=0;B<8;B++){s.positions.push([L,C,O,I++]),s.positions.push([L,C,O,I++]),s.positions.push([L,C,O,I++]),s.positions.push([L,C,O,I++]),s.positions.push([L,C,O,I++]),s.positions.push([L,C,O,I++]),s.vectors.push(D),s.vectors.push(D),s.vectors.push(D),s.vectors.push(D),s.vectors.push(D),s.vectors.push(D),s.vertexIntensity.push(P,P,P),s.vertexIntensity.push(P,P,P);var R=s.positions.length;s.cells.push([R-6,R-5,R-4],[R-3,R-2,R-1])}return s};var o=i(614);r.exports.createMesh=i(9060),r.exports.createConeMesh=function(n,i){return r.exports.createMesh(n,i,{shaders:o,traceType:"cone"})}},9060:function(r,n,i){var a=i(9405),o=i(2762),s=i(8116),l=i(7766),c=i(6760),u=i(7608),f=i(9618),h=i(6729),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(r,n,i,a,o,s,l,c,u,f,h){this.gl=r,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=n,this.dirty=!0,this.triShader=i,this.pickShader=a,this.trianglePositions=o,this.triangleVectors=s,this.triangleColors=c,this.triangleUVs=u,this.triangleIds=l,this.triangleVAO=f,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=h,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=p,this._view=p,this._projection=p,this._resolution=[1,1]}var y=d.prototype;y.isOpaque=function(){return this.opacity>=1},y.isTransparent=function(){return this.opacity<1},y.pickSlots=1,y.setPickBase=function(r){this.pickId=r},y.update=function(r){r=r||{};var n=this.gl;this.dirty=!0,"lightPosition"in r&&(this.lightPosition=r.lightPosition),"opacity"in r&&(this.opacity=r.opacity),"ambient"in r&&(this.ambientLight=r.ambient),"diffuse"in r&&(this.diffuseLight=r.diffuse),"specular"in r&&(this.specularLight=r.specular),"roughness"in r&&(this.roughness=r.roughness),"fresnel"in r&&(this.fresnel=r.fresnel),void 0!==r.tubeScale&&(this.tubeScale=r.tubeScale),void 0!==r.vectorScale&&(this.vectorScale=r.vectorScale),void 0!==r.coneScale&&(this.coneScale=r.coneScale),void 0!==r.coneOffset&&(this.coneOffset=r.coneOffset),r.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=n.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=n.LINEAR,this.texture.setPixels(function(r){for(var n=h({colormap:r,nshades:256,format:"rgba"}),i=new Uint8Array(1024),a=0;a<256;++a){for(var o=n[a],s=0;s<3;++s)i[4*a+s]=o[s];i[4*a+3]=255*o[3]}return f(i,[256,256,4],[4,0,1])}(r.colormap)),this.texture.generateMipmap());var i=r.cells,a=r.positions,o=r.vectors;if(a&&i&&o){var s=[],l=[],c=[],u=[],p=[];this.cells=i,this.positions=a,this.vectors=o;var d=r.meshColor||[1,1,1,1],y=r.vertexIntensity,g=1/0,v=-1/0;if(y){if(r.vertexIntensityBounds)g=+r.vertexIntensityBounds[0],v=+r.vertexIntensityBounds[1];else for(var m=0;m<y.length;++m){var x=y[m];g=Math.min(g,x),v=Math.max(v,x)}}else for(m=0;m<a.length;++m)g=Math.min(g,x=a[m][2]),v=Math.max(v,x);for(this.intensity=y||function(r){for(var n=r.length,i=Array(n),a=0;a<n;++a)i[a]=r[a][2];return i}(a),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=0;m<a.length;++m)for(var b=a[m],_=0;_<3;++_)!isNaN(b[_])&&isFinite(b[_])&&(this.bounds[0][_]=Math.min(this.bounds[0][_],b[_]),this.bounds[1][_]=Math.max(this.bounds[1][_],b[_]));var w=0;e:for(m=0;m<i.length;++m){var T=i[m];if(3===T.length){for(_=0;_<3;++_){b=a[k=T[_]];for(var A=0;A<3;++A)if(isNaN(b[A])||!isFinite(b[A]))continue e}for(_=0;_<3;++_){b=a[k=T[2-_]],s.push(b[0],b[1],b[2],b[3]);var k,M,S=o[k];l.push(S[0],S[1],S[2],S[3]||0),3===d.length?c.push(d[0],d[1],d[2],1):c.push(d[0],d[1],d[2],d[3]),M=y?[(y[k]-g)/(v-g),0]:[(b[2]-g)/(v-g),0],u.push(M[0],M[1]),p.push(m)}w+=1}}this.triangleCount=w,this.trianglePositions.update(s),this.triangleVectors.update(l),this.triangleColors.update(c),this.triangleUVs.update(u),this.triangleIds.update(new Uint32Array(p))}},y.drawTransparent=y.draw=function(r){r=r||{};for(var n=this.gl,i=r.model||p,a=r.view||p,o=r.projection||p,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);var f={model:i,view:a,projection:o,inverseModel:p.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};f.inverseModel=u(f.inverseModel,f.model),n.disable(n.CULL_FACE),this.texture.bind(0);var h=Array(16);for(c(h,f.view,f.model),c(h,f.projection,h),u(h,h),l=0;l<3;++l)f.eyePosition[l]=h[12+l]/h[15];var d=h[15];for(l=0;l<3;++l)d+=this.lightPosition[l]*h[4*l+3];for(l=0;l<3;++l){for(var y=h[12+l],g=0;g<3;++g)y+=h[4*g+l]*this.lightPosition[g];f.lightPosition[l]=y/d}if(this.triangleCount>0){var v=this.triShader;v.bind(),v.uniforms=f,this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},y.drawPick=function(r){r=r||{};for(var n=this.gl,i=r.model||p,a=r.view||p,o=r.projection||p,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);this._model=[].slice.call(i),this._view=[].slice.call(a),this._projection=[].slice.call(o),this._resolution=[n.drawingBufferWidth,n.drawingBufferHeight];var c={model:i,view:a,projection:o,clipBounds:s,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},u=this.pickShader;u.bind(),u.uniforms=c,this.triangleCount>0&&(this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},y.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=r.value[0]+256*r.value[1]+65536*r.value[2],i=this.cells[n],a=this.positions[i[1]].slice(0,3),o={position:a,dataCoordinate:a,index:Math.floor(i[1]/48)};return"cone"===this.traceType?o.index=Math.floor(i[1]/48):"streamtube"===this.traceType&&(o.intensity=this.intensity[i[1]],o.velocity=this.vectors[i[1]].slice(0,3),o.divergence=this.vectors[i[1]][3],o.index=n),o},y.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},r.exports=function(r,n,i){var c,u,h=i.shaders;1==arguments.length&&(r=(n=r).gl);var p=((c=a(r,h.meshShader.vertex,h.meshShader.fragment,null,h.meshShader.attributes)).attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c),y=((u=a(r,h.pickShader.vertex,h.pickShader.fragment,null,h.pickShader.attributes)).attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u),g=l(r,f(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap(),g.minFilter=r.LINEAR_MIPMAP_LINEAR,g.magFilter=r.LINEAR;var v=o(r),m=o(r),x=o(r),b=o(r),_=o(r),w=new d(r,g,p,y,v,m,_,x,b,s(r,[{buffer:v,type:r.FLOAT,size:4},{buffer:_,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:r.FLOAT,size:4},{buffer:b,type:r.FLOAT,size:2},{buffer:m,type:r.FLOAT,size:4}]),i.traceType||"cone");return w.update(n),w}},614:function(r,n,i){var a=i(3236),o=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(r){r.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(r,n,i){var a=i(737);r.exports=function(r){return a[r]}},9165:function(r,n,i){r.exports=function(r){var n=r.gl,i=a(n),l=o(n,[{buffer:i,type:n.FLOAT,size:3,offset:0,stride:40},{buffer:i,type:n.FLOAT,size:4,offset:12,stride:40},{buffer:i,type:n.FLOAT,size:3,offset:28,stride:40}]),u=s(n);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var f=new c(n,i,l,u);return f.update(r),f};var a=i(2762),o=i(8116),s=i(3436),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(r,n,i,a){this.gl=r,this.shader=a,this.buffer=n,this.vao=i,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=c.prototype;function f(r,n){for(var i=0;i<3;++i)r[0][i]=Math.min(r[0][i],n[i]),r[1][i]=Math.max(r[1][i],n[i])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(r){var n=this.gl,i=this.shader.uniforms;this.shader.bind();var a=i.view=r.view||l,o=i.projection=r.projection||l;i.model=r.model||l,i.clipBounds=this.clipBounds,i.opacity=this.opacity;var s=a[12],c=a[13],u=a[14],f=a[15],h=(r._ortho?2:1)*this.pixelRatio*(o[3]*s+o[7]*c+o[11]*u+o[15]*f)/n.drawingBufferHeight;this.vao.bind();for(var p=0;p<3;++p)n.lineWidth(this.lineWidth[p]*this.pixelRatio),i.capSize=this.capSize[p]*h,this.lineCount[p]&&n.drawArrays(n.LINES,this.lineOffset[p],this.lineCount[p]);this.vao.unbind()};var h=function(){for(var r=[,,,],n=0;n<3;++n){for(var i=[],a=1;a<=2;++a)for(var o=-1;o<=1;o+=2){var s=[0,0,0];s[(a+n)%3]=o,i.push(s)}r[n]=i}return r}();function p(r,n,i,a){for(var o=h[a],s=0;s<o.length;++s){var l=o[s];r.push(n[0],n[1],n[2],i[0],i[1],i[2],i[3],l[0],l[1],l[2])}return o.length}u.update=function(r){"lineWidth"in(r=r||{})&&(this.lineWidth=r.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in r&&(this.capSize=r.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in r&&(this.opacity=+r.opacity,this.opacity<1&&(this.hasAlpha=!0));var n=r.color||[[0,0,0],[0,0,0],[0,0,0]],i=r.position,a=r.error;if(Array.isArray(n[0])||(n=[n,n,n]),i&&a){var o=[],s=i.length,l=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var c=0;c<3;++c){this.lineOffset[c]=l;e:for(var u=0;u<s;++u){for(var h=i[u],d=0;d<3;++d)if(isNaN(h[d])||!isFinite(h[d]))continue e;var y,g=a[u],v=n[c];Array.isArray(v[0])&&(v=n[u]),3===v.length?v=[v[0],v[1],v[2],1]:4===v.length&&(v=[v[0],v[1],v[2],v[3]],!this.hasAlpha&&v[3]<1&&(this.hasAlpha=!0)),isNaN(g[0][c])||isNaN(g[1][c])||(g[0][c]<0&&((y=h.slice())[c]+=g[0][c],o.push(h[0],h[1],h[2],v[0],v[1],v[2],v[3],0,0,0,y[0],y[1],y[2],v[0],v[1],v[2],v[3],0,0,0),f(this.bounds,y),l+=2+p(o,y,v,c)),g[1][c]>0&&((y=h.slice())[c]+=g[1][c],o.push(h[0],h[1],h[2],v[0],v[1],v[2],v[3],0,0,0,y[0],y[1],y[2],v[0],v[1],v[2],v[3],0,0,0),f(this.bounds,y),l+=2+p(o,y,v,c)))}this.lineCount[c]=l-this.lineOffset[c]}this.buffer.update(o)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(r,n,i){var a=i(3236),o=i(9405),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(r,n,i){var a=i(7766);r.exports=function(r,n,i,a){o||(o=r.FRAMEBUFFER_UNSUPPORTED,s=r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,c=r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var f=r.getExtension("WEBGL_draw_buffers");if(!u&&f&&function(r,n){var i=r.getParameter(n.MAX_COLOR_ATTACHMENTS_WEBGL);u=Array(i+1);for(var a=0;a<=i;++a){for(var o=Array(i),s=0;s<a;++s)o[s]=r.COLOR_ATTACHMENT0+s;for(s=a;s<i;++s)o[s]=r.NONE;u[a]=o}}(r,f),Array.isArray(n)&&(a=i,i=0|n[1],n=0|n[0]),"number"!=typeof n)throw Error("gl-fbo: Missing shape parameter");var h=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(n<0||n>h||i<0||i>h)throw Error("gl-fbo: Parameters are too large for FBO");var p=1;if("color"in(a=a||{})){if((p=Math.max(0|a.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(p>1){if(!f)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(p>r.getParameter(f.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+p+" draw buffers")}}var d=r.UNSIGNED_BYTE,y=r.getExtension("OES_texture_float");if(a.float&&p>0){if(!y)throw Error("gl-fbo: Context does not support floating point textures");d=r.FLOAT}else a.preferFloat&&p>0&&y&&(d=r.FLOAT);var v=!0;"depth"in a&&(v=!!a.depth);var m=!1;return"stencil"in a&&(m=!!a.stencil),new g(r,n,i,d,p,v,m,f)};var o,s,l,c,u=null;function f(r){return[r.getParameter(r.FRAMEBUFFER_BINDING),r.getParameter(r.RENDERBUFFER_BINDING),r.getParameter(r.TEXTURE_BINDING_2D)]}function h(r,n){r.bindFramebuffer(r.FRAMEBUFFER,n[0]),r.bindRenderbuffer(r.RENDERBUFFER,n[1]),r.bindTexture(r.TEXTURE_2D,n[2])}function p(r){switch(r){case o:throw Error("gl-fbo: Framebuffer unsupported");case s:throw Error("gl-fbo: Framebuffer incomplete attachment");case l:throw Error("gl-fbo: Framebuffer incomplete dimensions");case c:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(r,n,i,o,s,l){if(!o)return null;var c=a(r,n,i,s,o);return c.magFilter=r.NEAREST,c.minFilter=r.NEAREST,c.mipSamples=1,c.bind(),r.framebufferTexture2D(r.FRAMEBUFFER,l,r.TEXTURE_2D,c.handle,0),c}function y(r,n,i,a,o){var s=r.createRenderbuffer();return r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorage(r.RENDERBUFFER,a,n,i),r.framebufferRenderbuffer(r.FRAMEBUFFER,o,r.RENDERBUFFER,s),s}function g(r,n,i,a,o,s,l,c){this.gl=r,this._shape=[0|n,0|i],this._destroyed=!1,this._ext=c,this.color=Array(o);for(var g=0;g<o;++g)this.color[g]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=a,this._useDepth=s,this._useStencil=l;var v=this,m=[0|n,0|i];Object.defineProperties(m,{0:{get:function(){return v._shape[0]},set:function(r){return v.width=r}},1:{get:function(){return v._shape[1]},set:function(r){return v.height=r}}}),this._shapeVector=m,function(r){var n=f(r.gl),i=r.gl,a=r.handle=i.createFramebuffer(),o=r._shape[0],s=r._shape[1],l=r.color.length,c=r._ext,g=r._useStencil,v=r._useDepth,m=r._colorType;i.bindFramebuffer(i.FRAMEBUFFER,a);for(var x=0;x<l;++x)r.color[x]=d(i,o,s,m,i.RGBA,i.COLOR_ATTACHMENT0+x);0===l?(r._color_rb=y(i,o,s,i.RGBA4,i.COLOR_ATTACHMENT0),c&&c.drawBuffersWEBGL(u[0])):l>1&&c.drawBuffersWEBGL(u[l]);var b=i.getExtension("WEBGL_depth_texture");b?g?r.depth=d(i,o,s,b.UNSIGNED_INT_24_8_WEBGL,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):v&&(r.depth=d(i,o,s,i.UNSIGNED_SHORT,i.DEPTH_COMPONENT,i.DEPTH_ATTACHMENT)):v&&g?r._depth_rb=y(i,o,s,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):v?r._depth_rb=y(i,o,s,i.DEPTH_COMPONENT16,i.DEPTH_ATTACHMENT):g&&(r._depth_rb=y(i,o,s,i.STENCIL_INDEX,i.STENCIL_ATTACHMENT));var _=i.checkFramebufferStatus(i.FRAMEBUFFER);if(_!==i.FRAMEBUFFER_COMPLETE){for(r._destroyed=!0,i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(r.handle),r.handle=null,r.depth&&(r.depth.dispose(),r.depth=null),r._depth_rb&&(i.deleteRenderbuffer(r._depth_rb),r._depth_rb=null),x=0;x<r.color.length;++x)r.color[x].dispose(),r.color[x]=null;r._color_rb&&(i.deleteRenderbuffer(r._color_rb),r._color_rb=null),h(i,n),p(_)}h(i,n)}(this)}var v=g.prototype;function m(r,n,i){if(r._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(r._shape[0]!==n||r._shape[1]!==i){var a=r.gl,o=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(n<0||n>o||i<0||i>o)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");r._shape[0]=n,r._shape[1]=i;for(var s=f(a),l=0;l<r.color.length;++l)r.color[l].shape=r._shape;r._color_rb&&(a.bindRenderbuffer(a.RENDERBUFFER,r._color_rb),a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,r._shape[0],r._shape[1])),r.depth&&(r.depth.shape=r._shape),r._depth_rb&&(a.bindRenderbuffer(a.RENDERBUFFER,r._depth_rb),r._useDepth&&r._useStencil?a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,r._shape[0],r._shape[1]):r._useDepth?a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r._shape[0],r._shape[1]):r._useStencil&&a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX,r._shape[0],r._shape[1])),a.bindFramebuffer(a.FRAMEBUFFER,r.handle);var c=a.checkFramebufferStatus(a.FRAMEBUFFER);c!==a.FRAMEBUFFER_COMPLETE&&(r.dispose(),h(a,s),p(c)),h(a,s)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(r){if(Array.isArray(r)||(r=[0|r,0|r]),2!==r.length)throw Error("gl-fbo: Shape vector must be length 2");var n=0|r[0],i=0|r[1];return m(this,n,i),[n,i]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(r){return m(this,r|=0,this._shape[1]),r},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(r){return r|=0,m(this,this._shape[0],r),r},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,this.handle),r.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var r=this.gl;r.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(r.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var n=0;n<this.color.length;++n)this.color[n].dispose(),this.color[n]=null;this._color_rb&&(r.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(r,n,i){var a=i(3387).sprintf,o=i(5171),s=i(1848),l=i(1085);r.exports=function(r,n,i){var c=s(n)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==i&&(u=i===o.FRAGMENT_SHADER?"fragment":"vertex");for(var f=a("Error compiling %s shader %s:\n",u,c),h=a("%s%s",f,r),p=r.split("\n"),d={},y=0;y<p.length;y++){var g=p[y];if(""!==g&&"\0"!==g){var v=parseInt(g.split(":")[2]);if(isNaN(v))throw Error(a("Could not parse error: %s",g));d[v]=g}}var m=l(n).split("\n");for(y=0;y<m.length;y++)if((d[y+3]||d[y+2]||d[y+1])&&(f+=m[y]+"\n",d[y+1])){var x=d[y+1];f+=a("^^^ %s\n\n",x=x.substr(x.split(":",3).join(":").length+1).trim())}return{long:f.trim(),short:h.trim()}}},2510:function(r,n,i){r.exports=function(r,n){var i=r.gl,a=new p(r,u(i,h.vertex,h.fragment),u(i,h.pickVertex,h.pickFragment),f(i),f(i),f(i),f(i));return a.update(n),r.addObject(a),a};var a,o,s=i(2478),l=i(7762),c=i(1888),u=i(9405),f=i(2762),h=i(6768);function p(r,n,i,a,o,s,l){this.plot=r,this.shader=n,this.pickShader=i,this.positionBuffer=a,this.weightBuffer=o,this.colorBuffer=s,this.idBuffer=l,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d,y=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];y.draw=(d=[1,0,0,0,1,0,0,0,1],function(){var r=this.plot,n=this.shader,i=this.bounds,a=this.numVertices;if(!(a<=0)){var o=r.gl,s=r.dataBox,l=i[2]-i[0],c=i[3]-i[1],u=s[2]-s[0],f=s[3]-s[1];d[0]=2*l/u,d[4]=2*c/f,d[6]=2*(i[0]-s[0])/u-1,d[7]=2*(i[1]-s[1])/f-1,n.bind();var h=n.uniforms;h.viewTransform=d,h.shape=this.shape;var p=n.attributes;this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(o.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),p.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,a)}}),y.drawPick=(a=[1,0,0,0,1,0,0,0,1],o=[0,0,0,0],function(r){var n=this.plot,i=this.pickShader,s=this.bounds,l=this.numVertices;if(!(l<=0)){var c=n.gl,u=n.dataBox,f=s[2]-s[0],h=s[3]-s[1],p=u[2]-u[0],d=u[3]-u[1];a[0]=2*f/p,a[4]=2*h/d,a[6]=2*(s[0]-u[0])/p-1,a[7]=2*(s[1]-u[1])/d-1;for(var y=0;y<4;++y)o[y]=r>>8*y&255;this.pickOffset=r,i.bind();var g=i.uniforms;g.viewTransform=a,g.pickOffset=o,g.shape=this.shape;var v=i.attributes;return this.positionBuffer.bind(),v.position.pointer(),this.weightBuffer.bind(),v.weight.pointer(c.UNSIGNED_BYTE,!1),this.idBuffer.bind(),v.pickId.pointer(c.UNSIGNED_BYTE,!1),c.drawArrays(c.TRIANGLES,0,l),r+this.shape[0]*this.shape[1]}}),y.pick=function(r,n,i){var a=this.pickOffset,o=this.shape[0]*this.shape[1];if(i<a||i>=a+o)return null;var s=i-a,l=this.xData,c=this.yData;return{object:this,pointId:s,dataCoord:[l[s%this.shape[0]],c[s/this.shape[0]|0]]}},y.update=function(r){var n=(r=r||{}).shape||[0,0],i=r.x||l(n[0]),a=r.y||l(n[1]),o=r.z||new Float32Array(n[0]*n[1]),u=!1!==r.zsmooth;this.xData=i,this.yData=a;var f,h,p,d,y=r.colorLevels||[0],v=r.colorValues||[0,0,0,1],m=y.length,x=this.bounds;u?(f=x[0]=i[0],h=x[1]=a[0],p=x[2]=i[i.length-1],d=x[3]=a[a.length-1]):(f=x[0]=i[0]+(i[1]-i[0])/2,h=x[1]=a[0]+(a[1]-a[0])/2,p=x[2]=i[i.length-1]+(i[i.length-1]-i[i.length-2])/2,d=x[3]=a[a.length-1]+(a[a.length-1]-a[a.length-2])/2);var b=1/(p-f),_=1/(d-h),w=n[0],T=n[1];this.shape=[w,T];var A=(u?(w-1)*(T-1):w*T)*(g.length>>>1);this.numVertices=A;for(var k=c.mallocUint8(4*A),M=c.mallocFloat32(2*A),S=c.mallocUint8(2*A),E=c.mallocUint32(A),I=0,L=u?w-1:w,C=u?T-1:T,O=0;O<C;++O){u?(B=_*(a[O]-h),R=_*(a[O+1]-h)):(B=O<T-1?_*(a[O]-(a[O+1]-a[O])/2-h):_*(a[O]-(a[O]-a[O-1])/2-h),R=O<T-1?_*(a[O]+(a[O+1]-a[O])/2-h):_*(a[O]+(a[O]-a[O-1])/2-h));for(var D=0;D<L;++D){u?(z=b*(i[D]-f),F=b*(i[D+1]-f)):(z=D<w-1?b*(i[D]-(i[D+1]-i[D])/2-f):b*(i[D]-(i[D]-i[D-1])/2-f),F=D<w-1?b*(i[D]+(i[D+1]-i[D])/2-f):b*(i[D]+(i[D]-i[D-1])/2-f));for(var P=0;P<g.length;P+=2){var B,R,z,F,N,U,j,V,H=g[P],q=g[P+1],G=o[u?(O+q)*w+(D+H):O*w+D],W=s.le(y,G);if(W<0)N=v[0],U=v[1],j=v[2],V=v[3];else if(W===m-1)N=v[4*m-4],U=v[4*m-3],j=v[4*m-2],V=v[4*m-1];else{var Y=(G-y[W])/(y[W+1]-y[W]),Z=1-Y,X=4*W,K=4*(W+1);N=Z*v[X]+Y*v[K],U=Z*v[X+1]+Y*v[K+1],j=Z*v[X+2]+Y*v[K+2],V=Z*v[X+3]+Y*v[K+3]}k[4*I]=255*N,k[4*I+1]=255*U,k[4*I+2]=255*j,k[4*I+3]=255*V,M[2*I]=.5*z+.5*F,M[2*I+1]=.5*B+.5*R,S[2*I]=H,S[2*I+1]=q,E[I]=O*w+D,I+=1}}}this.positionBuffer.update(M),this.weightBuffer.update(S),this.colorBuffer.update(k),this.idBuffer.update(E),c.free(M),c.free(k),c.free(S),c.free(E)},y.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(r,n,i){var a=i(3236);r.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(r,n,i){var a=i(3236),o=i(9405),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(r){return o(r,s,l,null,u)},n.createPickShader=function(r){return o(r,s,c,null,u)}},5714:function(r,n,i){r.exports=function(r){var n=r.gl||r.scene&&r.scene.gl,i=p(n);i.attributes.position.location=0,i.attributes.nextPosition.location=1,i.attributes.arcLength.location=2,i.attributes.lineWidth.location=3,i.attributes.color.location=4;var l=d(n);l.attributes.position.location=0,l.attributes.nextPosition.location=1,l.attributes.arcLength.location=2,l.attributes.lineWidth.location=3,l.attributes.color.location=4;for(var c=a(n),u=o(n,[{buffer:c,size:3,offset:0,stride:48},{buffer:c,size:3,offset:12,stride:48},{buffer:c,size:1,offset:24,stride:48},{buffer:c,size:1,offset:28,stride:48},{buffer:c,size:4,offset:32,stride:48}]),h=f(Array(1024),[256,1,4]),y=0;y<1024;++y)h.data[y]=255;var g=s(n,h);g.wrap=n.REPEAT;var v=new m(n,i,l,c,u,g);return v.update(r),v};var a=i(2762),o=i(8116),s=i(7766),l=new Uint8Array(4),c=new Float32Array(l.buffer),u=i(2478),f=i(9618),h=i(7319),p=h.createShader,d=h.createPickShader,y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(r){for(var n=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],i=0;i<3;++i)n[0][i]=Math.max(r[0][i],n[0][i]),n[1][i]=Math.min(r[1][i],n[1][i]);return n}function v(r,n,i,a){this.arcLength=r,this.position=n,this.index=i,this.dataCoordinate=a}function m(r,n,i,a,o,s){this.gl=r,this.shader=n,this.pickShader=i,this.buffer=a,this.vao=o,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=s,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var x=m.prototype;x.isTransparent=function(){return this.hasAlpha},x.isOpaque=function(){return!this.hasAlpha},x.pickSlots=1,x.setPickBase=function(r){this.pickId=r},x.drawTransparent=x.draw=function(r){if(this.vertexCount){var n=this.gl,i=this.shader,a=this.vao;i.bind(),i.uniforms={model:r.model||y,view:r.view||y,projection:r.projection||y,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[n.drawingBufferWidth,n.drawingBufferHeight],pixelRatio:this.pixelRatio},a.bind(),a.draw(n.TRIANGLE_STRIP,this.vertexCount),a.unbind()}},x.drawPick=function(r){if(this.vertexCount){var n=this.gl,i=this.pickShader,a=this.vao;i.bind(),i.uniforms={model:r.model||y,view:r.view||y,projection:r.projection||y,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[n.drawingBufferWidth,n.drawingBufferHeight],pixelRatio:this.pixelRatio},a.bind(),a.draw(n.TRIANGLE_STRIP,this.vertexCount),a.unbind()}},x.update=function(r){this.dirty=!0;var n=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale),this.hasAlpha=!1,"opacity"in r&&(this.opacity=+r.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,l=0,c=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=r.position||r.positions;if(h){var p=r.color||r.colors||[0,0,0,1],d=r.lineWidth||1,y=!1;e:for(g=1;g<h.length;++g){var g,v,m,x,b,_=h[g-1],w=h[g];for(a.push(s),o.push(_.slice()),v=0;v<3;++v){if(isNaN(_[v])||isNaN(w[v])||!isFinite(_[v])||!isFinite(w[v])){if(!n&&i.length>0){for(var T=0;T<24;++T)i.push(i[i.length-12]);l+=2,y=!0}continue e}c[0][v]=Math.min(c[0][v],_[v],w[v]),c[1][v]=Math.max(c[1][v],_[v],w[v])}Array.isArray(p[0])?(m=p.length>g-1?p[g-1]:p.length>0?p[p.length-1]:[0,0,0,1],x=p.length>g?p[g]:p.length>0?p[p.length-1]:[0,0,0,1]):m=x=p,3===m.length&&(m=[m[0],m[1],m[2],1]),3===x.length&&(x=[x[0],x[1],x[2],1]),!this.hasAlpha&&m[3]<1&&(this.hasAlpha=!0),b=Array.isArray(d)?d.length>g-1?d[g-1]:d.length>0?d[d.length-1]:[0,0,0,1]:d;var A=s;if(s+=function(r,n){for(var i=0,a=0;a<3;++a){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)}(_,w),y){for(v=0;v<2;++v)i.push(_[0],_[1],_[2],w[0],w[1],w[2],A,b,m[0],m[1],m[2],m[3]);l+=2,y=!1}i.push(_[0],_[1],_[2],w[0],w[1],w[2],A,b,m[0],m[1],m[2],m[3],_[0],_[1],_[2],w[0],w[1],w[2],A,-b,m[0],m[1],m[2],m[3],w[0],w[1],w[2],_[0],_[1],_[2],s,-b,x[0],x[1],x[2],x[3],w[0],w[1],w[2],_[0],_[1],_[2],s,b,x[0],x[1],x[2],x[3]),l+=4}}if(this.buffer.update(i),a.push(s),o.push(h[h.length-1].slice()),this.bounds=c,this.vertexCount=l,this.points=o,this.arcLength=a,"dashes"in r){var k=r.dashes.slice();for(k.unshift(0),g=1;g<k.length;++g)k[g]=k[g-1]+k[g];var M=f(Array(1024),[256,1,4]);for(g=0;g<256;++g){for(v=0;v<4;++v)M.set(g,0,v,0);1&u.le(k,k[k.length-1]*g/255)?M.set(g,0,0,0):M.set(g,0,0,255)}this.texture.setPixels(M)}},x.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},x.pick=function(r){if(!r||r.id!==this.pickId)return null;var n,i,a,o=(n=r.value[0],i=r.value[1],a=r.value[2],l[0]=0,l[1]=a,l[2]=i,l[3]=n,c[0]),s=u.le(this.arcLength,o);if(s<0)return null;if(s===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),s);for(var f=this.points[s],h=this.points[Math.min(s+1,this.points.length-1)],p=(o-this.arcLength[s])/(this.arcLength[s+1]-this.arcLength[s]),d=1-p,y=[0,0,0],g=0;g<3;++g)y[g]=d*f[g]+p*h[g];var m=Math.min(p<.5?s:s+1,this.points.length-1);return new v(o,y,m,this.points[m])}},1903:function(r){r.exports=function(r){var n=new Float32Array(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}},6864:function(r){r.exports=function(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},9921:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],c=r[6],u=r[7],f=r[8],h=r[9],p=r[10],d=r[11],y=r[12],g=r[13],v=r[14],m=r[15];return(n*l-i*s)*(p*m-d*v)-(n*c-a*s)*(h*m-d*g)+(n*u-o*s)*(h*v-p*g)+(i*c-a*l)*(f*m-d*y)-(i*u-o*l)*(f*v-p*y)+(a*u-o*c)*(f*g-h*y)}},7399:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i+i,c=a+a,u=o+o,f=i*l,h=a*l,p=a*c,d=o*l,y=o*c,g=o*u,v=s*l,m=s*c,x=s*u;return r[0]=1-p-g,r[1]=h+x,r[2]=d-m,r[3]=0,r[4]=h-x,r[5]=1-f-g,r[6]=y+v,r[7]=0,r[8]=d+m,r[9]=y-v,r[10]=1-f-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},6743:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=a+a,u=o+o,f=s+s,h=a*c,p=a*u,d=a*f,y=o*u,g=o*f,v=s*f,m=l*c,x=l*u,b=l*f;return r[0]=1-(y+v),r[1]=p+b,r[2]=d-x,r[3]=0,r[4]=p-b,r[5]=1-(h+v),r[6]=g+m,r[7]=0,r[8]=d+x,r[9]=g-m,r[10]=1-(h+y),r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}},7894:function(r){r.exports=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7608:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],h=n[8],p=n[9],d=n[10],y=n[11],g=n[12],v=n[13],m=n[14],x=n[15],b=i*c-a*l,_=i*u-o*l,w=i*f-s*l,T=a*u-o*c,A=a*f-s*c,k=o*f-s*u,M=h*v-p*g,S=h*m-d*g,E=h*x-y*g,I=p*m-d*v,L=p*x-y*v,C=d*x-y*m,O=b*C-_*L+w*I+T*E-A*S+k*M;return O?(O=1/O,r[0]=(c*C-u*L+f*I)*O,r[1]=(o*L-a*C-s*I)*O,r[2]=(v*k-m*A+x*T)*O,r[3]=(d*A-p*k-y*T)*O,r[4]=(u*E-l*C-f*S)*O,r[5]=(i*C-o*E+s*S)*O,r[6]=(m*w-g*k-x*_)*O,r[7]=(h*k-d*w+y*_)*O,r[8]=(l*L-c*E+f*M)*O,r[9]=(a*E-i*L-s*M)*O,r[10]=(g*A-v*w+x*b)*O,r[11]=(p*w-h*A-y*b)*O,r[12]=(c*S-l*I-u*M)*O,r[13]=(i*I-a*S+o*M)*O,r[14]=(v*_-g*T-m*b)*O,r[15]=(h*T-p*_+d*b)*O,r):null}},6582:function(r,n,i){var a=i(7894);r.exports=function(r,n,i,o){var s,l,c,u,f,h,p,d,y,g,v=n[0],m=n[1],x=n[2],b=o[0],_=o[1],w=o[2],T=i[0],A=i[1],k=i[2];return 1e-6>Math.abs(v-T)&&1e-6>Math.abs(m-A)&&1e-6>Math.abs(x-k)?a(r):(p=v-T,d=m-A,y=x-k,(g=Math.sqrt((s=_*(y*=g=1/Math.sqrt(p*p+d*d+y*y))-w*(d*=g))*s+(l=w*(p*=g)-b*y)*l+(c=b*d-_*p)*c))?(s*=g=1/g,l*=g,c*=g):(s=0,l=0,c=0),(g=Math.sqrt((u=d*c-y*l)*u+(f=y*s-p*c)*f+(h=p*l-d*s)*h))?(u*=g=1/g,f*=g,h*=g):(u=0,f=0,h=0),r[0]=s,r[1]=u,r[2]=p,r[3]=0,r[4]=l,r[5]=f,r[6]=d,r[7]=0,r[8]=c,r[9]=h,r[10]=y,r[11]=0,r[12]=-(s*v+l*m+c*x),r[13]=-(u*v+f*m+h*x),r[14]=-(p*v+d*m+y*x),r[15]=1,r)}},6760:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],v=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],A=i[3];return r[0]=_*a+w*c+T*p+A*v,r[1]=_*o+w*u+T*d+A*m,r[2]=_*s+w*f+T*y+A*x,r[3]=_*l+w*h+T*g+A*b,_=i[4],w=i[5],T=i[6],A=i[7],r[4]=_*a+w*c+T*p+A*v,r[5]=_*o+w*u+T*d+A*m,r[6]=_*s+w*f+T*y+A*x,r[7]=_*l+w*h+T*g+A*b,_=i[8],w=i[9],T=i[10],A=i[11],r[8]=_*a+w*c+T*p+A*v,r[9]=_*o+w*u+T*d+A*m,r[10]=_*s+w*f+T*y+A*x,r[11]=_*l+w*h+T*g+A*b,_=i[12],w=i[13],T=i[14],A=i[15],r[12]=_*a+w*c+T*p+A*v,r[13]=_*o+w*u+T*d+A*m,r[14]=_*s+w*f+T*y+A*x,r[15]=_*l+w*h+T*g+A*b,r}},4040:function(r){r.exports=function(r,n,i,a,o,s,l){var c=1/(n-i),u=1/(a-o),f=1/(s-l);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*c,r[13]=(o+a)*u,r[14]=(l+s)*f,r[15]=1,r}},4772:function(r){r.exports=function(r,n,i,a,o){var s=1/Math.tan(n/2),l=1/(a-o);return r[0]=s/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(o+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*o*a*l,r[15]=0,r}},6079:function(r){r.exports=function(r,n,i,a){var o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L=a[0],C=a[1],O=a[2],D=Math.sqrt(L*L+C*C+O*O);return 1e-6>Math.abs(D)?null:(L*=D=1/D,C*=D,O*=D,o=Math.sin(i),l=1-(s=Math.cos(i)),c=n[0],u=n[1],f=n[2],h=n[3],p=n[4],d=n[5],y=n[6],g=n[7],v=n[8],m=n[9],x=n[10],b=n[11],_=L*L*l+s,w=C*L*l+O*o,T=O*L*l-C*o,A=L*C*l-O*o,k=C*C*l+s,M=O*C*l+L*o,S=L*O*l+C*o,E=C*O*l-L*o,I=O*O*l+s,r[0]=c*_+p*w+v*T,r[1]=u*_+d*w+m*T,r[2]=f*_+y*w+x*T,r[3]=h*_+g*w+b*T,r[4]=c*A+p*k+v*M,r[5]=u*A+d*k+m*M,r[6]=f*A+y*k+x*M,r[7]=h*A+g*k+b*M,r[8]=c*S+p*E+v*I,r[9]=u*S+d*E+m*I,r[10]=f*S+y*E+x*I,r[11]=h*S+g*E+b*I,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}},5567:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=c*o+p*a,r[7]=u*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-c*a,r[11]=d*o-u*a,r}},2408:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],c=n[2],u=n[3],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o-f*a,r[1]=l*o-h*a,r[2]=c*o-p*a,r[3]=u*o-d*a,r[8]=s*a+f*o,r[9]=l*a+h*o,r[10]=c*a+p*o,r[11]=u*a+d*o,r}},7089:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],c=n[2],u=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=c*o+p*a,r[3]=u*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-c*a,r[7]=d*o-u*a,r}},2504:function(r){r.exports=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},7656:function(r){r.exports=function(r,n,i){var a,o,s,l,c,u,f,h,p,d,y,g,v=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*v+n[4]*m+n[8]*x+n[12],r[13]=n[1]*v+n[5]*m+n[9]*x+n[13],r[14]=n[2]*v+n[6]*m+n[10]*x+n[14],r[15]=n[3]*v+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=c,r[5]=u,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=y,r[11]=g,r[12]=a*v+c*m+p*x+n[12],r[13]=o*v+u*m+d*x+n[13],r[14]=s*v+f*m+y*x+n[14],r[15]=l*v+h*m+g*x+n[15]),r}},5665:function(r){r.exports=function(r,n){if(r===n){var i=n[1],a=n[2],o=n[3],s=n[6],l=n[7],c=n[11];r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=i,r[6]=n[9],r[7]=n[13],r[8]=a,r[9]=s,r[11]=n[14],r[12]=o,r[13]=l,r[14]=c}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}},7626:function(r,n,i){var a=i(2642),o=i(9346);function s(r,n){for(var i=[0,0,0,0],a=0;a<4;++a)for(var o=0;o<4;++o)i[o]+=r[4*a+o]*n[a];return i}r.exports=function(r,n,i,l,c,u){if(1===r.length)return[0,r[0].slice()];for(var f=Array(r.length),h=0;h<r.length;++h)f[h]=function(r,n,i,a,o){for(var l=s(a,s(i,s(n,[r[0],r[1],r[2],1]))),c=0;c<3;++c)l[c]/=l[3];return[.5*o[0]*(1+l[0]),.5*o[1]*(1-l[1])]}(r[h],i,l,c,u);var p=0,d=1/0;for(h=0;h<f.length;++h){for(var y=0,g=0;g<2;++g)y+=Math.pow(f[h][g]-n[g],2);y<d&&(d=y,p=h)}var v=function(r,n){if(2===r.length){for(var i=0,s=0,l=0;l<2;++l)i+=Math.pow(n[l]-r[0][l],2),s+=Math.pow(n[l]-r[1][l],2);return(i=Math.sqrt(i))+(s=Math.sqrt(s))<1e-6?[1,0]:[s/(i+s),i/(s+i)]}if(3===r.length){var c=[0,0];return o(r[0],r[1],r[2],n,c),a(r,c)}return[]}(f,n),m=0;for(h=0;h<3;++h){if(v[h]<-.001||v[h]>1.0001)return null;m+=v[h]}return Math.abs(m-1)>.001?null:[p,function(r,n){for(var i=[0,0,0],a=0;a<r.length;++a)for(var o=r[a],s=n[a],l=0;l<3;++l)i[l]+=s*o[l];return i}(r,v),v]}},840:function(r,n,i){var a=i(3236),o=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),f=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),p=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),y=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),g=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:y,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(r,n,i){var a=i(9405),o=i(2762),s=i(8116),l=i(7766),c=i(8406),u=i(6760),f=i(7608),h=i(9618),p=i(6729),d=i(7765),y=i(1888),g=i(840),v=i(7626),m=g.meshShader,x=g.wireShader,b=g.pointShader,_=g.pickShader,w=g.pointPickShader,T=g.contourShader,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function k(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,k,M,S,E,I){this.gl=r,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=n,this.dirty=!0,this.triShader=i,this.lineShader=a,this.pointShader=o,this.pickShader=s,this.pointPickShader=l,this.contourShader=c,this.trianglePositions=u,this.triangleColors=h,this.triangleNormals=d,this.triangleUVs=p,this.triangleIds=f,this.triangleVAO=y,this.triangleCount=0,this.lineWidth=1,this.edgePositions=g,this.edgeColors=m,this.edgeUVs=x,this.edgeIds=v,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=_,this.pointColors=T,this.pointUVs=k,this.pointSizes=M,this.pointIds=w,this.pointVAO=S,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=E,this.contourVAO=I,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=A,this._view=A,this._projection=A,this._resolution=[1,1]}var M=k.prototype;function S(r,n){if(!n||!n.length)return 1;for(var i=0;i<n.length&&!(n.length<2);++i){if(n[i][0]===r)return n[i][1];if(n[i][0]>r&&i>0){var a=(n[i][0]-r)/(n[i][0]-n[i-1][0]);return n[i][1]*(1-a)+a*n[i-1][1]}}return 1}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(r){this.pickId=r},M.highlight=function(r){if(r&&this.contourEnable){for(var n=d(this.cells,this.intensity,r.intensity),i=n.cells,a=n.vertexIds,o=n.vertexWeights,s=i.length,l=y.mallocFloat32(6*s),c=0,u=0;u<s;++u)for(var f=i[u],h=0;h<2;++h){var p=f[0];2===f.length&&(p=f[h]);for(var g=a[p][0],v=a[p][1],m=o[p],x=1-m,b=this.positions[g],_=this.positions[v],w=0;w<3;++w)l[c++]=m*b[w]+x*_[w]}this.contourCount=c/3|0,this.contourPositions.update(l.subarray(0,c)),y.free(l)}else this.contourCount=0},M.update=function(r){r=r||{};var n=this.gl;this.dirty=!0,"contourEnable"in r&&(this.contourEnable=r.contourEnable),"contourColor"in r&&(this.contourColor=r.contourColor),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"lightPosition"in r&&(this.lightPosition=r.lightPosition),this.hasAlpha=!1,"opacity"in r&&(this.opacity=r.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in r&&(this.opacityscale=r.opacityscale,this.hasAlpha=!0),"ambient"in r&&(this.ambientLight=r.ambient),"diffuse"in r&&(this.diffuseLight=r.diffuse),"specular"in r&&(this.specularLight=r.specular),"roughness"in r&&(this.roughness=r.roughness),"fresnel"in r&&(this.fresnel=r.fresnel),r.texture?(this.texture.dispose(),this.texture=l(n,r.texture)):r.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=n.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=n.LINEAR,this.texture.setPixels(function(r,n){for(var i=p({colormap:r,nshades:256,format:"rgba"}),a=new Uint8Array(1024),o=0;o<256;++o){for(var s=i[o],l=0;l<3;++l)a[4*o+l]=s[l];a[4*o+3]=n?255*S(o/255,n):255*s[3]}return h(a,[256,256,4],[4,0,1])}(r.colormap,this.opacityscale)),this.texture.generateMipmap());var i=r.cells,a=r.positions;if(a&&i){var o=[],s=[],u=[],f=[],d=[],y=[],g=[],v=[],m=[],x=[],b=[],_=[],w=[],T=[];this.cells=i,this.positions=a;var A=r.vertexNormals,k=r.cellNormals,M=void 0===r.vertexNormalsEpsilon?1e-6:r.vertexNormalsEpsilon,E=void 0===r.faceNormalsEpsilon?1e-6:r.faceNormalsEpsilon;r.useFacetNormals&&!k&&(k=c.faceNormals(i,a,E)),k||A||(A=c.vertexNormals(i,a,M));var I=r.vertexColors,L=r.cellColors,C=r.meshColor||[1,1,1,1],O=r.vertexUVs,D=r.vertexIntensity,P=r.cellUVs,B=r.cellIntensity,R=1/0,z=-1/0;if(!O&&!P){if(D){if(r.vertexIntensityBounds)R=+r.vertexIntensityBounds[0],z=+r.vertexIntensityBounds[1];else for(var F=0;F<D.length;++F){var N=D[F];R=Math.min(R,N),z=Math.max(z,N)}}else if(B){if(r.cellIntensityBounds)R=+r.cellIntensityBounds[0],z=+r.cellIntensityBounds[1];else for(F=0;F<B.length;++F)R=Math.min(R,N=B[F]),z=Math.max(z,N)}else for(F=0;F<a.length;++F)R=Math.min(R,N=a[F][2]),z=Math.max(z,N)}this.intensity=D||B||function(r){for(var n=r.length,i=Array(n),a=0;a<n;++a)i[a]=r[a][2];return i}(a),this.pickVertex=!(B||L);var U=r.pointSizes,j=r.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=0;F<a.length;++F)for(var V=a[F],H=0;H<3;++H)!isNaN(V[H])&&isFinite(V[H])&&(this.bounds[0][H]=Math.min(this.bounds[0][H],V[H]),this.bounds[1][H]=Math.max(this.bounds[1][H],V[H]));var q=0,G=0,W=0;e:for(F=0;F<i.length;++F){var Y,Z,X,K,J=i[F];switch(J.length){case 1:for(V=a[Y=J[0]],H=0;H<3;++H)if(isNaN(V[H])||!isFinite(V[H]))continue e;x.push(V[0],V[1],V[2]),Z=I?I[Y]:L?L[F]:C,this.opacityscale&&D?s.push(Z[0],Z[1],Z[2],this.opacity*S((D[Y]-R)/(z-R),this.opacityscale)):3===Z.length?b.push(Z[0],Z[1],Z[2],this.opacity):(b.push(Z[0],Z[1],Z[2],Z[3]*this.opacity),Z[3]<1&&(this.hasAlpha=!0)),X=O?O[Y]:D?[(D[Y]-R)/(z-R),0]:P?P[F]:B?[(B[F]-R)/(z-R),0]:[(V[2]-R)/(z-R),0],_.push(X[0],X[1]),U?w.push(U[Y]):w.push(j),T.push(F),W+=1;break;case 2:for(H=0;H<2;++H){V=a[Y=J[H]];for(var $=0;$<3;++$)if(isNaN(V[$])||!isFinite(V[$]))continue e}for(H=0;H<2;++H)V=a[Y=J[H]],y.push(V[0],V[1],V[2]),Z=I?I[Y]:L?L[F]:C,this.opacityscale&&D?s.push(Z[0],Z[1],Z[2],this.opacity*S((D[Y]-R)/(z-R),this.opacityscale)):3===Z.length?g.push(Z[0],Z[1],Z[2],this.opacity):(g.push(Z[0],Z[1],Z[2],Z[3]*this.opacity),Z[3]<1&&(this.hasAlpha=!0)),X=O?O[Y]:D?[(D[Y]-R)/(z-R),0]:P?P[F]:B?[(B[F]-R)/(z-R),0]:[(V[2]-R)/(z-R),0],v.push(X[0],X[1]),m.push(F);G+=1;break;case 3:for(H=0;H<3;++H)for(V=a[Y=J[H]],$=0;$<3;++$)if(isNaN(V[$])||!isFinite(V[$]))continue e;for(H=0;H<3;++H)V=a[Y=J[2-H]],o.push(V[0],V[1],V[2]),(Z=I?I[Y]:L?L[F]:C)?this.opacityscale&&D?s.push(Z[0],Z[1],Z[2],this.opacity*S((D[Y]-R)/(z-R),this.opacityscale)):3===Z.length?s.push(Z[0],Z[1],Z[2],this.opacity):(s.push(Z[0],Z[1],Z[2],Z[3]*this.opacity),Z[3]<1&&(this.hasAlpha=!0)):s.push(.5,.5,.5,1),X=O?O[Y]:D?[(D[Y]-R)/(z-R),0]:P?P[F]:B?[(B[F]-R)/(z-R),0]:[(V[2]-R)/(z-R),0],f.push(X[0],X[1]),K=A?A[Y]:k[F],u.push(K[0],K[1],K[2]),d.push(F);q+=1}}this.pointCount=W,this.edgeCount=G,this.triangleCount=q,this.pointPositions.update(x),this.pointColors.update(b),this.pointUVs.update(_),this.pointSizes.update(w),this.pointIds.update(new Uint32Array(T)),this.edgePositions.update(y),this.edgeColors.update(g),this.edgeUVs.update(v),this.edgeIds.update(new Uint32Array(m)),this.trianglePositions.update(o),this.triangleColors.update(s),this.triangleUVs.update(f),this.triangleNormals.update(u),this.triangleIds.update(new Uint32Array(d))}},M.drawTransparent=M.draw=function(r){r=r||{};for(var n=this.gl,i=r.model||A,a=r.view||A,o=r.projection||A,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);var c={model:i,view:a,projection:o,inverseModel:A.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};c.inverseModel=f(c.inverseModel,c.model),n.disable(n.CULL_FACE),this.texture.bind(0);var h=Array(16);for(u(h,c.view,c.model),u(h,c.projection,h),f(h,h),l=0;l<3;++l)c.eyePosition[l]=h[12+l]/h[15];var p,d=h[15];for(l=0;l<3;++l)d+=this.lightPosition[l]*h[4*l+3];for(l=0;l<3;++l){for(var y=h[12+l],g=0;g<3;++g)y+=h[4*g+l]*this.lightPosition[g];c.lightPosition[l]=y/d}this.triangleCount>0&&((p=this.triShader).bind(),p.uniforms=c,this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((p=this.lineShader).bind(),p.uniforms=c,this.edgeVAO.bind(),n.lineWidth(this.lineWidth*this.pixelRatio),n.drawArrays(n.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((p=this.pointShader).bind(),p.uniforms=c,this.pointVAO.bind(),n.drawArrays(n.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((p=this.contourShader).bind(),p.uniforms=c,this.contourVAO.bind(),n.drawArrays(n.LINES,0,this.contourCount),this.contourVAO.unbind())},M.drawPick=function(r){r=r||{};for(var n=this.gl,i=r.model||A,a=r.view||A,o=r.projection||A,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);this._model=[].slice.call(i),this._view=[].slice.call(a),this._projection=[].slice.call(o),this._resolution=[n.drawingBufferWidth,n.drawingBufferHeight];var c,u={model:i,view:a,projection:o,clipBounds:s,pickId:this.pickId/255};(c=this.pickShader).bind(),c.uniforms=u,this.triangleCount>0&&(this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),n.lineWidth(this.lineWidth*this.pixelRatio),n.drawArrays(n.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((c=this.pointPickShader).bind(),c.uniforms=u,this.pointVAO.bind(),n.drawArrays(n.POINTS,0,this.pointCount),this.pointVAO.unbind())},M.pick=function(r){if(!r||r.id!==this.pickId)return null;for(var n=r.value[0]+256*r.value[1]+65536*r.value[2],i=this.cells[n],a=this.positions,o=Array(i.length),s=0;s<i.length;++s)o[s]=a[i[s]];var l=r.coord[0],c=r.coord[1];if(!this.pickVertex){var u=this.positions[i[0]],f=this.positions[i[1]],h=this.positions[i[2]],p=[(u[0]+f[0]+h[0])/3,(u[1]+f[1]+h[1])/3,(u[2]+f[2]+h[2])/3];return{_cellCenter:!0,position:[l,c],index:n,cell:i,cellId:n,intensity:this.intensity[n],dataCoordinate:p}}var d=v(o,[l*this.pixelRatio,this._resolution[1]-c*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!d)return null;var y=d[2],g=0;for(s=0;s<i.length;++s)g+=y[s]*this.intensity[i[s]];return{position:d[1],index:i[d[0]],cell:i,cellId:n,intensity:g,dataCoordinate:this.positions[i[d[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},r.exports=function(r,n){if(1==arguments.length&&(r=(n=r).gl),!(r.getExtension("OES_standard_derivatives")||r.getExtension("MOZ_OES_standard_derivatives")||r.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var i,c,u,f,p,d,y=((i=a(r,m.vertex,m.fragment)).attributes.position.location=0,i.attributes.color.location=2,i.attributes.uv.location=3,i.attributes.normal.location=4,i),g=((c=a(r,x.vertex,x.fragment)).attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c),v=((u=a(r,b.vertex,b.fragment)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.pointSize.location=4,u),A=((f=a(r,_.vertex,_.fragment)).attributes.position.location=0,f.attributes.id.location=1,f),M=((p=a(r,w.vertex,w.fragment)).attributes.position.location=0,p.attributes.id.location=1,p.attributes.pointSize.location=4,p),S=((d=a(r,T.vertex,T.fragment)).attributes.position.location=0,d),E=l(r,h(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=r.LINEAR_MIPMAP_LINEAR,E.magFilter=r.LINEAR;var I=o(r),L=o(r),C=o(r),O=o(r),D=o(r),P=s(r,[{buffer:I,type:r.FLOAT,size:3},{buffer:D,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:r.FLOAT,size:4},{buffer:C,type:r.FLOAT,size:2},{buffer:O,type:r.FLOAT,size:3}]),B=o(r),R=o(r),z=o(r),F=o(r),N=s(r,[{buffer:B,type:r.FLOAT,size:3},{buffer:F,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:r.FLOAT,size:4},{buffer:z,type:r.FLOAT,size:2}]),U=o(r),j=o(r),V=o(r),H=o(r),q=o(r),G=s(r,[{buffer:U,type:r.FLOAT,size:3},{buffer:q,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:j,type:r.FLOAT,size:4},{buffer:V,type:r.FLOAT,size:2},{buffer:H,type:r.FLOAT,size:1}]),W=o(r),Y=new k(r,E,y,g,v,A,M,S,I,D,L,C,O,P,B,F,R,z,N,U,q,j,V,H,G,W,s(r,[{buffer:W,type:r.FLOAT,size:3}]));return Y.update(n),Y}},8120:function(r,n,i){r.exports=function(r){var n=r.gl;return new l(r,a(n,[0,0,0,1,1,0,1,1]),o(n,s.boxVert,s.lineFrag))};var a=i(2762),o=i(9405),s=i(3603);function l(r,n,i){this.plot=r,this.vbo=n,this.shader=i}var c,u,f=l.prototype;f.bind=function(){var r=this.shader;this.vbo.bind(),this.shader.bind(),r.attributes.coord.pointer(),r.uniforms.screenBox=this.plot.screenBox},f.drawBox=(c=[0,0],u=[0,0],function(r,n,i,a,o){var s=this.plot,l=this.shader,f=s.gl;c[0]=r,c[1]=n,u[0]=i,u[1]=a,l.uniforms.lo=c,l.uniforms.hi=u,l.uniforms.color=o,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(r,n,i){r.exports=function(r){var n=r.gl;return new y(r,f(n),h(n,d.gridVert,d.gridFrag),h(n,d.tickVert,d.gridFrag))};var a,o,s,l,c,u,f=i(2762),h=i(9405),p=i(2478),d=i(3603);function y(r,n,i,a){this.plot=r,this.vbo=n,this.shader=i,this.tickShader=a,this.ticks=[[],[]]}function g(r,n){return r-n}var v,m,x,b,_,w=y.prototype;w.draw=(v=[0,0],m=[0,0],x=[0,0],function(){for(var r=this.plot,n=this.vbo,i=this.shader,a=this.ticks,o=r.gl,s=r._tickBounds,l=r.dataBox,c=r.viewBox,u=r.gridLineWidth,f=r.gridLineColor,h=r.gridLineEnable,p=r.pixelRatio,d=0;d<2;++d){var y=s[d],g=s[d+2]-y,b=.5*(l[d+2]+l[d]),_=l[d+2]-l[d];m[d]=2*g/_,v[d]=2*(y-b)/_}i.bind(),n.bind(),i.attributes.dataCoord.pointer(),i.uniforms.dataShift=v,i.uniforms.dataScale=m;var w=0;for(d=0;d<2;++d){x[0]=x[1]=0,x[d]=1,i.uniforms.dataAxis=x,i.uniforms.lineWidth=u[d]/(c[d+2]-c[d])*p,i.uniforms.color=f[d];var T=6*a[d].length;h[d]&&T&&o.drawArrays(o.TRIANGLES,w,T),w+=T}}),w.drawTickMarks=(a=[0,0],o=[0,0],s=[1,0],l=[0,1],c=[0,0],u=[0,0],function(){for(var r=this.plot,n=this.vbo,i=this.tickShader,f=this.ticks,h=r.gl,d=r._tickBounds,y=r.dataBox,v=r.viewBox,m=r.pixelRatio,x=r.screenBox,b=x[2]-x[0],_=x[3]-x[1],w=v[2]-v[0],T=v[3]-v[1],A=0;A<2;++A){var k=d[A],M=d[A+2]-k,S=.5*(y[A+2]+y[A]),E=y[A+2]-y[A];o[A]=2*M/E,a[A]=2*(k-S)/E}o[0]*=w/b,a[0]*=w/b,o[1]*=T/_,a[1]*=T/_,i.bind(),n.bind(),i.attributes.dataCoord.pointer();var I=i.uniforms;I.dataShift=a,I.dataScale=o;var L=r.tickMarkLength,C=r.tickMarkWidth,O=r.tickMarkColor,D=6*f[0].length,P=Math.min(p.ge(f[0],(y[0]-d[0])/(d[2]-d[0]),g),f[0].length),B=Math.min(p.gt(f[0],(y[2]-d[0])/(d[2]-d[0]),g),f[0].length),R=0+6*P,z=6*Math.max(0,B-P),F=Math.min(p.ge(f[1],(y[1]-d[1])/(d[3]-d[1]),g),f[1].length),N=Math.min(p.gt(f[1],(y[3]-d[1])/(d[3]-d[1]),g),f[1].length),U=D+6*F,j=6*Math.max(0,N-F);c[0]=2*(v[0]-L[1])/b-1,c[1]=(v[3]+v[1])/_-1,u[0]=L[1]*m/b,u[1]=C[1]*m/_,j&&(I.color=O[1],I.tickScale=u,I.dataAxis=l,I.screenOffset=c,h.drawArrays(h.TRIANGLES,U,j)),c[0]=(v[2]+v[0])/b-1,c[1]=2*(v[1]-L[0])/_-1,u[0]=C[0]*m/b,u[1]=L[0]*m/_,z&&(I.color=O[0],I.tickScale=u,I.dataAxis=s,I.screenOffset=c,h.drawArrays(h.TRIANGLES,R,z)),c[0]=2*(v[2]+L[3])/b-1,c[1]=(v[3]+v[1])/_-1,u[0]=L[3]*m/b,u[1]=C[3]*m/_,j&&(I.color=O[3],I.tickScale=u,I.dataAxis=l,I.screenOffset=c,h.drawArrays(h.TRIANGLES,U,j)),c[0]=(v[2]+v[0])/b-1,c[1]=2*(v[3]+L[2])/_-1,u[0]=C[2]*m/b,u[1]=L[2]*m/_,z&&(I.color=O[2],I.tickScale=u,I.dataAxis=s,I.screenOffset=c,h.drawArrays(h.TRIANGLES,R,z))}),w.update=(b=[1,1,-1,-1,1,-1],_=[1,-1,1,1,-1,-1],function(r){for(var n=r.ticks,i=r.bounds,a=new Float32Array(18*(n[0].length+n[1].length)),o=(this.plot.zeroLineEnable,0),s=[[],[]],l=0;l<2;++l)for(var c=s[l],u=n[l],f=i[l],h=i[l+2],p=0;p<u.length;++p){var d=(u[p].x-f)/(h-f);c.push(d);for(var y=0;y<6;++y)a[o++]=d,a[o++]=b[y],a[o++]=_[y]}this.ticks=s,this.vbo.update(a)}),w.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(r,n,i){r.exports=function(r){var n=r.gl;return new l(r,a(n,[-1,-1,-1,1,1,-1,1,1]),o(n,s.lineVert,s.lineFrag))};var a=i(2762),o=i(9405),s=i(3603);function l(r,n,i){this.plot=r,this.vbo=n,this.shader=i}var c,u,f=l.prototype;f.bind=function(){var r=this.shader;this.vbo.bind(),this.shader.bind(),r.attributes.coord.pointer(),r.uniforms.screenBox=this.plot.screenBox},f.drawLine=(c=[0,0],u=[0,0],function(r,n,i,a,o,s){var l=this.plot,f=this.shader,h=l.gl;c[0]=r,c[1]=n,u[0]=i,u[1]=a,f.uniforms.start=c,f.uniforms.end=u,f.uniforms.width=o*l.pixelRatio,f.uniforms.color=s,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(r,n,i){var a=i(3236),o=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);r.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(r,n,i){r.exports=function(r){var n=r.gl;return new h(r,s(n),l(n,f.textVert,f.textFrag))};var a,o,s=i(2762),l=i(9405),c=i(529),u=i(2478),f=i(3603);function h(r,n,i){this.plot=r,this.vbo=n,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,d,y,g,v,m,x=h.prototype;x.drawTicks=(p=[0,0],d=[0,0],y=[0,0],function(r){var n=this.plot,i=this.shader,a=this.tickX[r],o=this.tickOffset[r],s=n.gl,l=n.viewBox,c=n.dataBox,f=n.screenBox,h=n.pixelRatio,g=n.tickEnable,v=n.tickPad,m=n.tickColor,x=n.tickAngle,b=n.labelEnable,_=n.labelPad,w=n.labelColor,T=n.labelAngle,A=this.labelOffset[r],k=this.labelCount[r],M=u.lt(a,c[r]),S=u.le(a,c[r+2]);p[0]=p[1]=0,p[r]=1,d[r]=(l[2+r]+l[r])/(f[2+r]-f[r])-1;var E=2/f[2+(1^r)]-f[1^r];d[1^r]=E*l[1^r]-1,g[r]&&(d[1^r]-=E*h*v[r],M<S&&o[S]>o[M]&&(i.uniforms.dataAxis=p,i.uniforms.screenOffset=d,i.uniforms.color=m[r],i.uniforms.angle=x[r],s.drawArrays(s.TRIANGLES,o[M],o[S]-o[M]))),b[r]&&k&&(d[1^r]-=E*h*_[r],i.uniforms.dataAxis=y,i.uniforms.screenOffset=d,i.uniforms.color=w[r],i.uniforms.angle=T[r],s.drawArrays(s.TRIANGLES,A,k)),d[1^r]=E*l[2+(1^r)]-1,g[r+2]&&(d[1^r]+=E*h*v[r+2],M<S&&o[S]>o[M]&&(i.uniforms.dataAxis=p,i.uniforms.screenOffset=d,i.uniforms.color=m[r+2],i.uniforms.angle=x[r+2],s.drawArrays(s.TRIANGLES,o[M],o[S]-o[M]))),b[r+2]&&k&&(d[1^r]+=E*h*_[r+2],i.uniforms.dataAxis=y,i.uniforms.screenOffset=d,i.uniforms.color=w[r+2],i.uniforms.angle=T[r+2],s.drawArrays(s.TRIANGLES,A,k))}),x.drawTitle=(a=[0,0],o=[0,0],function(){var r=this.plot,n=this.shader,i=r.gl,s=r.screenBox,l=r.titleCenter,c=r.titleAngle,u=r.titleColor,f=r.pixelRatio;if(this.titleCount){for(var h=0;h<2;++h)o[h]=2*(l[h]*f-s[h])/(s[2+h]-s[h])-1;n.bind(),n.uniforms.dataAxis=a,n.uniforms.screenOffset=o,n.uniforms.angle=c,n.uniforms.color=u,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}),x.bind=(g=[0,0],v=[0,0],m=[0,0],function(){var r=this.plot,n=this.shader,i=r._tickBounds,a=r.dataBox,o=r.screenBox,s=r.viewBox;n.bind();for(var l=0;l<2;++l){var c=i[l],u=i[l+2]-c,f=.5*(a[l+2]+a[l]),h=a[l+2]-a[l],p=s[l],d=s[l+2]-p,y=o[l],x=o[l+2]-y;v[l]=2*u/h*d/x,g[l]=2*(c-f)/h*d/x}m[1]=2*r.pixelRatio/(o[3]-o[1]),m[0]=m[1]*(o[3]-o[1])/(o[2]-o[0]),n.uniforms.dataScale=v,n.uniforms.dataShift=g,n.uniforms.textScale=m,this.vbo.bind(),n.attributes.textCoordinate.pointer()}),x.update=function(r){var n,i,a,o,s,l=[],u=r.ticks,f=r.bounds;for(s=0;s<2;++s){var h=[Math.floor(l.length/3)],p=[-1/0],d=u[s];for(n=0;n<d.length;++n){var y=d[n],g=y.x,v=y.text,m=y.font||"sans-serif",x=y.fontStyle||"normal",b=y.fontWeight||"normal",_=y.fontVariant||"normal";o=y.fontSize||12;for(var w=1/(f[s+2]-f[s]),T=f[s],A=v.split("\n"),k=0;k<A.length;k++)for(a=c(m,A[k],{fontStyle:x,fontWeight:b,fontVariant:_}).data,i=0;i<a.length;i+=2)l.push(a[i]*o,-a[i+1]*o-k*o*1.2,(g-T)*w);h.push(Math.floor(l.length/3)),p.push(g)}this.tickOffset[s]=h,this.tickX[s]=p}for(s=0;s<2;++s){for(this.labelOffset[s]=Math.floor(l.length/3),a=c(r.labelFont[s],r.labels[s],{fontStyle:r.labelFontStyle[s],fontWeight:r.labelFontWeight[s],fontVariant:r.labelFontVariant[s],textAlign:"center"}).data,o=r.labelSize[s],n=0;n<a.length;n+=2)l.push(a[n]*o,-a[n+1]*o,0);this.labelCount[s]=Math.floor(l.length/3)-this.labelOffset[s]}for(this.titleOffset=Math.floor(l.length/3),a=c(r.titleFont,r.title,{fontStyle:r.titleFontStyle,fontWeight:r.titleFontWeight,fontVariant:r.titleFontVariant}).data,o=r.titleSize,n=0;n<a.length;n+=2)l.push(a[n]*o,-a[n+1]*o,0);this.titleCount=Math.floor(l.length/3)-this.titleOffset,this.vbo.update(l)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(r,n,i){r.exports=function(r){var n=r.gl,i=new u(n,a(n,[n.drawingBufferWidth,n.drawingBufferHeight]));return i.grid=o(i),i.text=s(i),i.line=l(i),i.box=c(i),i.update(r),i};var a=i(3589),o=i(1913),s=i(2142),l=i(4747),c=i(8120);function u(r,n){this.gl=r,this.pickBuffer=n,this.screenBox=[0,0,r.drawingBufferWidth,r.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var f=u.prototype;function h(r){for(var n=r.slice(),i=0;i<n.length;++i)n[i]=n[i].slice();return n}function p(r,n){return r.x-n.x}f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var r=this.gl,n=this.screenBox,i=this.viewBox,a=this.dataBox,o=this.pixelRatio,s=this.grid,l=this.line,c=this.text,u=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),r.disable(r.DEPTH_TEST),r.depthFunc(r.LESS),r.depthMask(!1),r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD,r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this.borderColor){r.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]);var f=this.borderColor;r.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}r.scissor(i[0],i[1],i[2]-i[0],i[3]-i[1]),r.viewport(i[0],i[1],i[2]-i[0],i[3]-i[1]);var h=this.backgroundColor;r.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),r.clear(r.COLOR_BUFFER_BIT),s.draw();var p=this.zeroLineEnable,d=this.zeroLineColor,y=this.zeroLineWidth;if(p[0]||p[1]){l.bind();for(var g=0;g<2;++g)if(p[g]&&a[g]<=0&&a[g+2]>=0){var v=n[g]-a[g]*(n[g+2]-n[g])/(a[g+2]-a[g]);0===g?l.drawLine(v,n[1],v,n[3],y[g],d[g]):l.drawLine(n[0],v,n[2],v,y[g],d[g])}}for(g=0;g<u.length;++g)u[g].draw();r.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]),r.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),this.grid.drawTickMarks(),l.bind();var m=this.borderLineEnable,x=this.borderLineWidth,b=this.borderLineColor;for(m[1]&&l.drawLine(i[0],i[1]-.5*x[1]*o,i[0],i[3]+.5*x[3]*o,x[1],b[1]),m[0]&&l.drawLine(i[0]-.5*x[0]*o,i[1],i[2]+.5*x[2]*o,i[1],x[0],b[0]),m[3]&&l.drawLine(i[2],i[1]-.5*x[1]*o,i[2],i[3]+.5*x[3]*o,x[3],b[3]),m[2]&&l.drawLine(i[0]-.5*x[0]*o,i[3],i[2]+.5*x[2]*o,i[3],x[2],b[2]),c.bind(),g=0;g<2;++g)c.drawTicks(g);this.titleEnable&&c.drawTitle();var _=this.overlays;for(g=0;g<_.length;++g)_[g].draw();r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.depthMask(!0)}},f.drawPick=function(){if(!this.static){var r=this.pickBuffer;this.gl,this._pickTimeout=null,r.begin();for(var n=1,i=this.objects,a=0;a<i.length;++a)n=i[a].drawPick(n);r.end()}},f.pick=function(r,n){if(!this.static){var i=this.pixelRatio,a=this.pickPixelRatio,o=this.viewBox,s=0|Math.round((r-o[0]/i)*a),l=0|Math.round((n-o[1]/i)*a),c=this.pickBuffer.query(s,l,this.pickRadius);if(!c)return null;for(var u=c.id+(c.value[0]<<8)+(c.value[1]<<16)+(c.value[2]<<24),f=this.objects,h=0;h<f.length;++h){var p=f[h].pick(s,l,u);if(p)return p}return null}},f.setScreenBox=function(r){var n=this.screenBox,i=this.pixelRatio;n[0]=0|Math.round(r[0]*i),n[1]=0|Math.round(r[1]*i),n[2]=0|Math.round(r[2]*i),n[3]=0|Math.round(r[3]*i),this.setDirty()},f.setDataBox=function(r){var n=this.dataBox;(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3])&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this.setDirty())},f.setViewBox=function(r){var n=this.pixelRatio,i=this.viewBox;i[0]=0|Math.round(r[0]*n),i[1]=0|Math.round(r[1]*n),i[2]=0|Math.round(r[2]*n),i[3]=0|Math.round(r[3]*n);var a=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((r[2]-r[0])*a),0|Math.round((r[3]-r[1])*a)],this.setDirty()},f.update=function(r){r=r||{};var n=this.gl;this.pixelRatio=r.pixelRatio||1;var i=this.pixelRatio;this.pickPixelRatio=Math.max(i,1),this.setScreenBox(r.screenBox||[0,0,n.drawingBufferWidth/i,n.drawingBufferHeight/i]),this.screenBox,this.setViewBox(r.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/i,.125*(this.screenBox[3]-this.screenBox[1])/i,.875*(this.screenBox[2]-this.screenBox[0])/i,.875*(this.screenBox[3]-this.screenBox[1])/i]);var a=this.viewBox,o=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(r.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==r.borderColor&&(r.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(r.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(r.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(r.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(r.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(r.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(r.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(r.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(r.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(r.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(r.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(r.titleCenter||[.5*(a[0]+a[2])/i,(a[3]+120)/i]).slice(),this.titleEnable=!("titleEnable"in r)||!!r.titleEnable,this.titleAngle=r.titleAngle||0,this.titleColor=(r.titleColor||[0,0,0,1]).slice(),this.labelPad=(r.labelPad||[15,15,15,15]).slice(),this.labelAngle=(r.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(r.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(r.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(r.tickPad||[15,15,15,15]).slice(),this.tickAngle=(r.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(r.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(r.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(r.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(r.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(r.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var s=r.ticks||[[],[]],l=this._tickBounds;l[0]=l[1]=1/0,l[2]=l[3]=-1/0;for(var c=0;c<2;++c){var u=s[c].slice(0);0!==u.length&&(u.sort(p),l[c]=Math.min(l[c],u[0].x),l[c+2]=Math.max(l[c+2],u[u.length-1].x))}this.grid.update({bounds:l,ticks:s}),this.text.update({bounds:l,ticks:s,labels:r.labels||["x","y"],labelSize:r.labelSize||[12,12],labelFont:r.labelFont||["sans-serif","sans-serif"],labelFontStyle:r.labelFontStyle||["normal","normal"],labelFontWeight:r.labelFontWeight||["normal","normal"],labelFontVariant:r.labelFontVariant||["normal","normal"],title:r.title||"",titleSize:r.titleSize||18,titleFont:r.titleFont||"sans-serif",titleFontStyle:r.titleFontStyle||"normal",titleFontWeight:r.titleFontWeight||"normal",titleFontVariant:r.titleFontVariant||"normal"}),this.static=!!r.static,this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var r=this.objects.length-1;r>=0;--r)this.objects[r].dispose();for(this.objects.length=0,r=this.overlays.length-1;r>=0;--r)this.overlays[r].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(r){0>this.objects.indexOf(r)&&(this.objects.push(r),this.setDirty())},f.removeObject=function(r){for(var n=this.objects,i=0;i<n.length;++i)if(n[i]===r){n.splice(i,1),this.setDirty();break}},f.addOverlay=function(r){0>this.overlays.indexOf(r)&&(this.overlays.push(r),this.setOverlayDirty())},f.removeOverlay=function(r){for(var n=this.overlays,i=0;i<n.length;++i)if(n[i]===r){n.splice(i,1),this.setOverlayDirty();break}}},4437:function(r,n,i){r.exports=function(r,n){r=r||document.body;var i=[.01,1/0];"distanceLimits"in(n=n||{})&&(i[0]=n.distanceLimits[0],i[1]=n.distanceLimits[1]),"zoomMin"in n&&(i[0]=n.zoomMin),"zoomMax"in n&&(i[1]=n.zoomMax);var f=o({center:n.center||[0,0,0],up:n.up||[0,1,0],eye:n.eye||[0,0,10],mode:n.mode||"orbit",distanceLimits:i}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,d=r.clientWidth,y=r.clientHeight,g={keyBindingMode:"rotate",enableWheel:!0,view:f,element:r,delay:n.delay||16,rotateSpeed:n.rotateSpeed||1,zoomSpeed:n.zoomSpeed||1,translateSpeed:n.translateSpeed||1,flipX:!!n.flipX,flipY:!!n.flipY,modes:f.modes,_ortho:n._ortho||n.projection&&"orthographic"===n.projection.type||!1,tick:function(){var n=a(),i=this.delay;f.idle(n-i),f.recalcMatrix(n-2*i),f.flush(n-(100+2*i));for(var o=!0,s=f.computedMatrix,l=0;l<16;++l)o=o&&h[l]===s[l],h[l]=s[l];var c=r.clientWidth===d&&r.clientHeight===y;return d=r.clientWidth,y=r.clientHeight,o?!c:(p=Math.exp(f.computedRadius[0]),!0)},lookAt:function(r,n,i){f.lookAt(f.lastT(),r,n,i)},rotate:function(r,n,i){f.rotate(f.lastT(),r,n,i)},pan:function(r,n,i){f.pan(f.lastT(),r,n,i)},translate:function(r,n,i){f.translate(f.lastT(),r,n,i)}};return Object.defineProperties(g,{matrix:{get:function(){return f.computedMatrix},set:function(r){return f.setMatrix(f.lastT(),r),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(r){var n=f.computedUp.slice(),i=f.computedEye.slice(),o=f.computedCenter.slice();if(f.setMode(r),"turntable"===r){var s=a();f._active.lookAt(s,i,o,n),f._active.lookAt(s+500,i,o,[0,0,1]),f._active.flush(s)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(r){return f.lookAt(f.lastT(),null,r),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(r){return f.lookAt(f.lastT(),r),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(r){return f.lookAt(f.lastT(),null,null,r),f.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(r){return f.setDistance(f.lastT(),r),r},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(i)},set:function(r){return f.setDistanceLimits(r),r},enumerable:!0}}),r.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),g._lastX=-1,g._lastY=-1,g._lastMods={shift:!1,control:!1,alt:!1,meta:!1},g.enableMouseListeners=function(){function n(n,i,o,s){var l=g.keyBindingMode;if(!1!==l){var c=!!s.control,u=!!s.alt,h=!!s.shift,d=!!(1&n),y=1/r.clientHeight,v=y*(i-g._lastX),m=y*(o-g._lastY),x=g.flipX?1:-1,b=g.flipY?1:-1,_=Math.PI*g.rotateSpeed,w=a();if(-1!==g._lastX&&-1!==g._lastY&&(("rotate"!==l||!d||c||u||h)&&(!d||c||u||!h)||f.rotate(w,x*_*v,-b*_*m,0),("pan"!==l||!d||c||u||h)&&!(2&n)&&(!d||!c||u||h)||f.pan(w,-g.translateSpeed*v*p,g.translateSpeed*m*p,0),"zoom"===l&&d&&!c&&!u&&!h||4&n||d&&!c&&u&&!h)){var T=-g.zoomSpeed*m/window.innerHeight*(w-f.lastT())*100;f.pan(w,0,0,p*(Math.exp(T)-1))}return g._lastX=i,g._lastY=o,g._lastMods=s,!0}}g.mouseListener=s(r,n),r.addEventListener("touchstart",function(i){var a=c(i.changedTouches[0],r);n(0,a[0],a[1],g._lastMods),n(1,a[0],a[1],g._lastMods)},!!u&&{passive:!0}),r.addEventListener("touchmove",function(i){var a=c(i.changedTouches[0],r);n(1,a[0],a[1],g._lastMods),i.preventDefault()},!!u&&{passive:!1}),r.addEventListener("touchend",function(r){n(0,g._lastX,g._lastY,g._lastMods)},!!u&&{passive:!0}),g.wheelListener=l(r,function(r,n){if(!1!==g.keyBindingMode&&g.enableWheel){var i=g.flipX?1:-1,o=g.flipY?1:-1,s=a();if(Math.abs(r)>Math.abs(n))f.rotate(s,0,0,-r*i*Math.PI*g.rotateSpeed/window.innerWidth);else if(!g._ortho){var l=-g.zoomSpeed*o*n/window.innerHeight*(s-f.lastT())/20;f.pan(s,0,0,p*(Math.exp(l)-1))}}},!0)},g.enableMouseListeners(),g};var a=i(3025),o=i(6296),s=i(351),l=i(8512),c=i(24),u=i(7520)},799:function(r,n,i){var a=i(3236),o=i(9405),s=a(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec2"}])}},4100:function(r,n,i){var a=i(4437),o=i(3837),s=i(5445),l=i(4449),c=i(3589),u=i(2260),f=i(7169),h=i(351),p=i(4772),d=i(4040),y=i(799),g=i(9216)({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(r){return"boolean"!=typeof r||r}r.exports={createScene:function(r){(r=r||{}).camera=r.camera||{};var n=r.canvas;n||(n=document.createElement("canvas"),r.container?r.container.appendChild(n):document.body.appendChild(n));var i=r.gl;if(i||(r.glOptions&&(g=!!r.glOptions.preserveDrawingBuffer),i=function(r,n){var i=null;try{(i=r.getContext("webgl",n))||(i=r.getContext("experimental-webgl",n))}catch(r){return null}return i}(n,r.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!i)throw Error("webgl not supported");var x=r.bounds||[[-10,-10,-10],[10,10,10]],b=new v,_=u(i,i.drawingBufferWidth,i.drawingBufferHeight,{preferFloat:!g}),w=y(i),T=r.cameraObject&&!0===r.cameraObject._ortho||r.camera.projection&&"orthographic"===r.camera.projection.type||!1,A={eye:r.camera.eye||[2,0,0],center:r.camera.center||[0,0,0],up:r.camera.up||[0,1,0],zoomMin:r.camera.zoomMax||.1,zoomMax:r.camera.zoomMin||100,mode:r.camera.mode||"turntable",_ortho:T},k=r.axes||{},M=o(i,k);M.enable=!k.disable;var S=r.spikes||{},E=l(i,S),I=[],L=[],C=[],O=[],D=!0,P=!0,B={view:null,projection:Array(16),model:Array(16),_ortho:!1},R=(P=!0,[i.drawingBufferWidth,i.drawingBufferHeight]),z=r.cameraObject||a(n,A),F={gl:i,contextLost:!1,pixelRatio:r.pixelRatio||1,canvas:n,selection:b,camera:z,axes:M,axesPixels:null,spikes:E,bounds:x,objects:I,shape:R,aspect:r.aspectRatio||[1,1,1],pickRadius:r.pickRadius||10,zNear:r.zNear||.01,zFar:r.zFar||1e3,fovy:r.fovy||Math.PI/4,clearColor:r.clearColor||[0,0,0,0],autoResize:m(r.autoResize),autoBounds:m(r.autoBounds),autoScale:!!r.autoScale,autoCenter:m(r.autoCenter),clipToBounds:m(r.clipToBounds),snapToData:!!r.snapToData,onselect:r.onselect||null,onrender:r.onrender||null,onclick:r.onclick||null,cameraParams:B,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(r){this.aspect[0]=r.x,this.aspect[1]=r.y,this.aspect[2]=r.z,P=!0},setBounds:function(r,n){this.bounds[0][r]=n.min,this.bounds[1][r]=n.max},setClearColor:function(r){this.clearColor=r},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},N=[i.drawingBufferWidth/F.pixelRatio|0,i.drawingBufferHeight/F.pixelRatio|0];function U(){if(!F._stopped&&F.autoResize){var r=n.parentNode,i=1,a=1;r&&r!==document.body?(i=r.clientWidth,a=r.clientHeight):(i=window.innerWidth,a=window.innerHeight);var o=0|Math.ceil(i*F.pixelRatio),s=0|Math.ceil(a*F.pixelRatio);if(o!==n.width||s!==n.height){n.width=o,n.height=s;var l=n.style;l.position=l.position||"absolute",l.left="0px",l.top="0px",l.width=i+"px",l.height=a+"px",D=!0}}}function j(){for(var r=I.length,n=O.length,a=0;a<n;++a)C[a]=0;e:for(a=0;a<r;++a){var o=I[a],s=o.pickSlots;if(s){for(var l=0;l<n;++l)if(C[l]+s<255){L[a]=l,o.setPickBase(C[l]+1),C[l]+=s;continue e}var u=c(i,R);L[a]=n,O.push(u),C.push(s),o.setPickBase(1),n+=1}else L[a]=-1}for(;n>0&&0===C[n-1];)C.pop(),O.pop().dispose()}function V(){if(F.contextLost)return!0;i.isContextLost()&&(F.contextLost=!0,F.mouseListener.enabled=!1,F.selection.object=null,F.oncontextloss&&F.oncontextloss())}F.autoResize&&U(),window.addEventListener("resize",U),F.update=function(r){F._stopped||(r=r||{},D=!0,P=!0)},F.add=function(r){F._stopped||(r.axes=M,I.push(r),L.push(-1),D=!0,P=!0,j())},F.remove=function(r){if(!F._stopped){var n=I.indexOf(r);n<0||(I.splice(n,1),L.pop(),D=!0,P=!0,j())}},F.dispose=function(){if(!F._stopped&&(F._stopped=!0,window.removeEventListener("resize",U),n.removeEventListener("webglcontextlost",V),F.mouseListener.enabled=!1,!F.contextLost)){M.dispose(),E.dispose();for(var r=0;r<I.length;++r)I[r].dispose();for(_.dispose(),r=0;r<O.length;++r)O[r].dispose();w.dispose(),i=null,M=null,E=null,I=[]}},F._mouseRotating=!1,F._prevButtons=0,F.enableMouseListeners=function(){F.mouseListener=h(n,function(r,n,i){if(!F._stopped){var a=O.length,o=I.length,s=b.object;b.distance=1/0,b.mouse[0]=n,b.mouse[1]=i,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var l=!1;if(r&&F._prevButtons)F._mouseRotating=!0;else{F._mouseRotating&&(P=!0),F._mouseRotating=!1;for(var c=0;c<a;++c){var u=O[c].query(n,N[1]-i-1,F.pickRadius);if(u){if(u.distance>b.distance)continue;for(var f=0;f<o;++f){var h=I[f];if(L[f]===c){var p=h.pick(u);p&&(b.buttons=r,b.screen=u.coord,b.distance=u.distance,b.object=h,b.index=p.distance,b.dataPosition=p.position,b.dataCoordinate=p.dataCoordinate,b.data=p,l=!0)}}}}}s&&s!==b.object&&(s.highlight&&s.highlight(null),D=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),D=!0),(l=l||b.object!==s)&&F.onselect&&F.onselect(b),1&r&&!(1&F._prevButtons)&&F.onclick&&F.onclick(b),F._prevButtons=r}})},n.addEventListener("webglcontextlost",V);var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],q=[H[0].slice(),H[1].slice()];function G(){if(!V()){U();var r=F.camera.tick();B.view=F.camera.matrix,D=D||r,P=P||r,M.pixelRatio=F.pixelRatio,E.pixelRatio=F.pixelRatio;var n=I.length,a=H[0],o=H[1];a[0]=a[1]=a[2]=1/0,o[0]=o[1]=o[2]=-1/0;for(var l=0;l<n;++l){(x=I[l]).pixelRatio=F.pixelRatio,x.axes=F.axes,D=D||!!x.dirty,P=P||!!x.dirty;var c=x.bounds;if(c)for(var u=c[0],h=c[1],y=0;y<3;++y)a[y]=Math.min(a[y],u[y]),o[y]=Math.max(o[y],h[y])}var g=F.bounds;if(F.autoBounds)for(y=0;y<3;++y){if(o[y]<a[y])a[y]=-1,o[y]=1;else{a[y]===o[y]&&(a[y]-=1,o[y]+=1);var v=.05*(o[y]-a[y]);a[y]=a[y]-v,o[y]=o[y]+v}g[0][y]=a[y],g[1][y]=o[y]}var m=!1;for(y=0;y<3;++y)m=m||q[0][y]!==g[0][y]||q[1][y]!==g[1][y],q[0][y]=g[0][y],q[1][y]=g[1][y];if(P=P||m,D=D||m){if(m){var x,A=[0,0,0];for(l=0;l<3;++l)A[l]=function(r){var n=Math.round(Math.log(Math.abs(r))/Math.log(10));if(n<0){var i=Math.round(Math.pow(10,-n));return Math.ceil(r*i)/i}return n>0?Math.ceil(r/(i=Math.round(Math.pow(10,n))))*i:Math.ceil(r)}((g[1][l]-g[0][l])/10);M.autoTicks?M.update({bounds:g,tickSpacing:A}):M.update({bounds:g})}var k=i.drawingBufferWidth,S=i.drawingBufferHeight;for(R[0]=k,R[1]=S,N[0]=0|Math.max(k/F.pixelRatio,1),N[1]=0|Math.max(S/F.pixelRatio,1),function(r,n){var i=r.bounds,a=r.cameraParams,o=a.projection,s=a.model,l=r.gl.drawingBufferWidth,c=r.gl.drawingBufferHeight,u=r.zNear,f=r.zFar,h=r.fovy,y=l/c;n?(d(o,-y,y,-1,1,u,f),a._ortho=!0):(p(o,h,y,u,f),a._ortho=!1);for(var g=0;g<16;++g)s[g]=0;s[15]=1;var v=0;for(g=0;g<3;++g)v=Math.max(v,i[1][g]-i[0][g]);for(g=0;g<3;++g)r.autoScale?s[5*g]=r.aspect[g]/(i[1][g]-i[0][g]):s[5*g]=1/v,r.autoCenter&&(s[12+g]=-(.5*s[5*g])*(i[0][g]+i[1][g]))}(F,T),l=0;l<n;++l)(x=I[l]).axesBounds=g,F.clipToBounds&&(x.clipBounds=g);b.object&&(F.snapToData?E.position=b.dataCoordinate:E.position=b.dataPosition,E.bounds=g),P&&(P=!1,function(){if(!V()){i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.disable(i.BLEND),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL);for(var r=I.length,n=O.length,a=0;a<n;++a){var o=O[a];o.shape=N,o.begin();for(var s=0;s<r;++s)if(L[s]===a){var l=I[s];l.drawPick&&(l.pixelRatio=1,l.drawPick(B))}o.end()}}}()),F.axesPixels=s(F.axes,B,k,S),F.onrender&&F.onrender(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,k,S),F.clearRGBA(),i.depthMask(!0),i.colorMask(!0,!0,!0,!0),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.disable(i.BLEND),i.disable(i.CULL_FACE);var C=!1;for(M.enable&&(C=C||M.isTransparent(),M.draw(B)),E.axes=M,b.object&&E.draw(B),i.disable(i.CULL_FACE),l=0;l<n;++l)(x=I[l]).axes=M,x.pixelRatio=F.pixelRatio,x.isOpaque&&x.isOpaque()&&x.draw(B),x.isTransparent&&x.isTransparent()&&(C=!0);if(C){for(_.shape=R,_.bind(),i.clear(i.DEPTH_BUFFER_BIT),i.colorMask(!1,!1,!1,!1),i.depthMask(!0),i.depthFunc(i.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(B),l=0;l<n;++l)(x=I[l]).isOpaque&&x.isOpaque()&&x.draw(B);for(i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.colorMask(!0,!0,!0,!0),i.depthMask(!1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(B),l=0;l<n;++l)(x=I[l]).isTransparent&&x.isTransparent()&&x.drawTransparent(B);i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.disable(i.DEPTH_TEST),w.bind(),_.color[0].bind(0),w.uniforms.accumBuffer=0,f(i),i.disable(i.BLEND)}for(D=!1,l=0;l<n;++l)I[l].dirty=!1}}}return F.enableMouseListeners(),function r(){F._stopped||F.contextLost||(G(),requestAnimationFrame(r))}(),F.redraw=function(){F._stopped||(D=!0,G())},F},createCamera:a}},6640:function(r,n,i){var a=i(3236);n.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),n.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),n.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),n.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(r,n,i){var a=i(9405),o=i(2762),s=i(1888),l=i(6640);function c(r,n,i,a,o){this.plot=r,this.offsetBuffer=n,this.pickBuffer=i,this.shader=a,this.pickShader=o,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}r.exports=function(r,n){var i=r.gl,s=new c(r,o(i),o(i),a(i,l.pointVertex,l.pointFragment),a(i,l.pickVertex,l.pickFragment));return s.update(n),r.addObject(s),s};var u,f,h=c.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(r){function n(n,i){return n in r?r[n]:i}r=r||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var i,a=r.positions.length>>>1,o=r.positions instanceof Float32Array,l=r.idToIndex instanceof Int32Array&&r.idToIndex.length>=a,c=r.positions,u=o?c:s.mallocFloat32(c.length),f=l?r.idToIndex:s.mallocInt32(a);if(o||u.set(c),!l)for(u.set(c),i=0;i<a;i++)f[i]=i;this.points=c,this.offsetBuffer.update(u),this.pickBuffer.update(f),o||s.free(u),l||s.free(f),this.pointCount=a,this.pickOffset=0},h.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0],function(r){var n=void 0!==r,i=n?this.pickShader:this.shader,a=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return r;var s=o[2]-o[0],l=o[3]-o[1],c=function(r,n){var i,a=0,o=r.length>>>1;for(i=0;i<o;i++){var s=r[2*i],l=r[2*i+1];s>=n[0]&&s<=n[2]&&l>=n[1]&&l<=n[3]&&a++}return a}(this.points,o),h=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(c,.33333)));u[0]=2/s,u[4]=2/l,u[6]=-2*o[0]/s-1,u[7]=-2*o[1]/l-1,this.offsetBuffer.bind(),i.bind(),i.attributes.position.pointer(),i.uniforms.matrix=u,i.uniforms.color=this.color,i.uniforms.borderColor=this.borderColor,i.uniforms.pointCloud=h<5,i.uniforms.pointSize=h,i.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),n&&(f[0]=255&r,f[1]=r>>8&255,f[2]=r>>16&255,f[3]=r>>24&255,this.pickBuffer.bind(),i.attributes.pickId.pointer(a.UNSIGNED_BYTE),i.uniforms.pickOffset=f,this.pickOffset=r);var p=a.getParameter(a.BLEND),d=a.getParameter(a.DITHER);return p&&!this.blend&&a.disable(a.BLEND),d&&a.disable(a.DITHER),a.drawArrays(a.POINTS,0,this.pointCount),p&&!this.blend&&a.enable(a.BLEND),d&&a.enable(a.DITHER),r+this.pointCount}),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(r,n,i){var a=this.pickOffset,o=this.pointCount;if(i<a||i>=a+o)return null;var s=i-a,l=this.points;return{object:this,pointId:s,dataCoord:[l[2*s],l[2*s+1]]}}},783:function(r){r.exports=function(r,n,i,a){var o,s,l,c,u,f=n[0],h=n[1],p=n[2],d=n[3],y=i[0],g=i[1],v=i[2],m=i[3];return(s=f*y+h*g+p*v+d*m)<0&&(s=-s,y=-y,g=-g,v=-v,m=-m),1-s>1e-6?(l=Math.sin(o=Math.acos(s)),c=Math.sin((1-a)*o)/l,u=Math.sin(a*o)/l):(c=1-a,u=a),r[0]=c*f+u*y,r[1]=c*h+u*g,r[2]=c*p+u*v,r[3]=c*d+u*m,r}},5964:function(r){r.exports=function(r){return r||0===r?r.toString():""}},9366:function(r,n,i){var a=i(4359);r.exports=function(r,n,i){var s=[n.style,n.weight,n.variant,n.family].join("_"),l=o[s];if(l||(l=o[s]={}),r in l)return l[r];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n.family,fontStyle:n.style,fontWeight:n.weight,fontVariant:n.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},u=a(r,c);c.triangles=!1;var f,h,p=a(r,c);if(i&&1!==i){for(f=0;f<u.positions.length;++f)for(h=0;h<u.positions[f].length;++h)u.positions[f][h]/=i;for(f=0;f<p.positions.length;++f)for(h=0;h<p.positions[f].length;++h)p.positions[f][h]/=i}var d=[[1/0,1/0],[-1/0,-1/0]],y=p.positions.length;for(f=0;f<y;++f){var g=p.positions[f];for(h=0;h<2;++h)d[0][h]=Math.min(d[0][h],g[h]),d[1][h]=Math.max(d[1][h],g[h])}return l[r]=[u,p,d]};var o={}},1283:function(r,n,i){var a=i(9405),o=i(3236),s=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],p={vertex:s,fragment:u,attributes:h},d={vertex:l,fragment:u,attributes:h},y={vertex:c,fragment:u,attributes:h},g={vertex:s,fragment:f,attributes:h},v={vertex:l,fragment:f,attributes:h},m={vertex:c,fragment:f,attributes:h};function x(r,n){var i=a(r,n),o=i.attributes;return o.position.location=0,o.color.location=1,o.glyph.location=2,o.id.location=3,i}n.createPerspective=function(r){return x(r,p)},n.createOrtho=function(r){return x(r,d)},n.createProject=function(r){return x(r,y)},n.createPickPerspective=function(r){return x(r,g)},n.createPickOrtho=function(r){return x(r,v)},n.createPickProject=function(r){return x(r,m)}},8418:function(r,n,i){var a=i(5219),o=i(2762),s=i(8116),l=i(1888),c=i(6760),u=i(1283),f=i(9366),h=i(5964),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,y=DataView;function g(r){return Array.isArray(r)||d.isView(r)&&!(r instanceof y)}function v(r,n){var i=r[0],a=r[1],o=r[2],s=r[3];return r[0]=n[0]*i+n[4]*a+n[8]*o+n[12]*s,r[1]=n[1]*i+n[5]*a+n[9]*o+n[13]*s,r[2]=n[2]*i+n[6]*a+n[10]*o+n[14]*s,r[3]=n[3]*i+n[7]*a+n[11]*o+n[15]*s,r}function m(r,n,i,a){return v(a,a),v(a,a),v(a,a)}function x(r,n){this.index=r,this.dataCoordinate=this.position=n}function b(r){return!0===r||r>1?1:r}function _(r,n,i,a,o,s,l,c,u,f,h,p){this.gl=r,this.pixelRatio=1,this.shader=n,this.orthoShader=i,this.projectShader=a,this.pointBuffer=o,this.colorBuffer=s,this.glyphBuffer=l,this.idBuffer=c,this.vao=u,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=f,this.pickOrthoShader=h,this.pickProjectShader=p,this.points=[],this._selectResult=new x(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}r.exports=function(r){var n=r.gl,i=u.createPerspective(n),a=u.createOrtho(n),l=u.createProject(n),c=u.createPickPerspective(n),f=u.createPickOrtho(n),h=u.createPickProject(n),p=o(n),d=o(n),y=o(n),g=o(n),v=new _(n,i,a,l,p,d,y,g,s(n,[{buffer:p,size:3,type:n.FLOAT},{buffer:d,size:4,type:n.FLOAT},{buffer:y,size:2,type:n.FLOAT},{buffer:g,size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),c,f,h);return v.update(r),v};var w=_.prototype;w.pickSlots=1,w.setPickBase=function(r){this.pickId=r},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var r=0;r<3;++r)if(this.axesProject[r]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var r=0;r<3;++r)if(this.axesProject[r]&&!this.projectHasAlpha)return!0;return!1};var T=[0,0],A=[0,0,0],k=[0,0,0],M=[0,0,0,1],S=[0,0,0,1],E=p.slice(),I=[0,0,0],L=[[0,0,0],[0,0,0]];function C(r){return r[0]=r[1]=r[2]=0,r}function O(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1,r}function D(r,n,i,a){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[i]=a,r}var P=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function B(r,n,i,a,o,s,l){var u=i.gl;if((s===i.projectHasAlpha||l)&&function(r,n,i,a){var o,s=n.axesProject,l=n.gl,u=r.uniforms,f=i.model||p,h=i.view||p,d=i.projection||p,y=n.axesBounds,g=function(r){for(var n=0;n<2;++n)for(var i=0;i<3;++i)L[n][i]=Math.max(Math.min(r[n][i],1e8),-1e8);return L}(n.clipBounds);o=n.axes&&n.axes.lastCubeProps?n.axes.lastCubeProps.axis:[1,1,1],T[0]=2/l.drawingBufferWidth,T[1]=2/l.drawingBufferHeight,r.bind(),u.view=h,u.projection=d,u.screenSize=T,u.highlightId=n.highlightId,u.highlightScale=n.highlightScale,u.clipBounds=g,u.pickGroup=n.pickId/255,u.pixelRatio=a;for(var v=0;v<3;++v)if(s[v]){u.scale=n.projectScale[v],u.opacity=n.projectOpacity[v];for(var x=0;x<16;++x)E[x]=0;for(x=0;x<4;++x)E[5*x]=1;E[5*v]=0,o[v]<0?E[12+v]=y[0][v]:E[12+v]=y[1][v],c(E,f,E),u.model=E;var b=(v+1)%3,_=(v+2)%3,w=C(A),P=C(k);w[b]=1,P[_]=1;var B=m(0,0,0,O(M,w)),R=m(0,0,0,O(S,P));if(Math.abs(B[1])>Math.abs(R[1])){var z=B;B=R,R=z,z=w,w=P,P=z;var F=b;b=_,_=F}B[0]<0&&(w[b]=-1),R[1]>0&&(P[_]=-1);var N=0,U=0;for(x=0;x<4;++x)N+=Math.pow(f[4*b+x],2),U+=Math.pow(f[4*_+x],2);w[b]/=Math.sqrt(N),P[_]/=Math.sqrt(U),u.axes[0]=w,u.axes[1]=P,u.fragClipBounds[0]=D(I,g[0],v,-1e8),u.fragClipBounds[1]=D(I,g[1],v,1e8),n.vao.bind(),n.vao.draw(l.TRIANGLES,n.vertexCount),n.lineWidth>0&&(l.lineWidth(n.lineWidth*a),n.vao.draw(l.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind()}}(n,i,a,o),s===i.hasAlpha||l){r.bind();var f=r.uniforms;f.model=a.model||p,f.view=a.view||p,f.projection=a.projection||p,T[0]=2/u.drawingBufferWidth,T[1]=2/u.drawingBufferHeight,f.screenSize=T,f.highlightId=i.highlightId,f.highlightScale=i.highlightScale,f.fragClipBounds=P,f.clipBounds=i.axes.bounds,f.opacity=i.opacity,f.pickGroup=i.pickId/255,f.pixelRatio=o,i.vao.bind(),i.vao.draw(u.TRIANGLES,i.vertexCount),i.lineWidth>0&&(u.lineWidth(i.lineWidth*o),i.vao.draw(u.LINES,i.lineVertexCount,i.vertexCount)),i.vao.unbind()}}function R(r,n,i,o){s=h(s=g(r)?n<r.length?r[n]:void 0:r);var s,l=!0;a(s)&&(s="▼",l=!1),i||(i={});var c=i.family;g(c)&&(c=c[n]),c||(c="normal");var u=i.weight;g(u)&&(u=u[n]),u||(u="normal");var p=i.style;g(p)&&(p=p[n]),p||(p="normal");var d=i.variant;g(d)&&(d=d[n]),d||(d="normal");var y=f(s,{family:c,weight:u,style:p,variant:d},o);return{mesh:(y=f(s,i,o))[0],lines:y[1],bounds:y[2],visible:l}}w.draw=function(r){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,r,this.pixelRatio,!1,!1)},w.drawTransparent=function(r){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,r,this.pixelRatio,!0,!1)},w.drawPick=function(r){B(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,r,1,!0,!0)},w.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=r.value[2]+(r.value[1]<<8)+(r.value[0]<<16);if(n>=this.pointCount||n<0)return null;var i=this.points[n],a=this._selectResult;a.index=n;for(var o=0;o<3;++o)a.position[o]=a.dataCoordinate[o]=i[o];return a},w.highlight=function(r){if(r){var n=r.index;this.highlightId=[(255&n)/255,(n>>8&255)/255,(n>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(r){if("perspective"in(r=r||{})&&(this.useOrtho=!r.perspective),"orthographic"in r&&(this.useOrtho=!!r.orthographic),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"project"in r){if(g(r.project))this.axesProject=r.project;else{var n=!!r.project;this.axesProject=[n,n,n]}}if("projectScale"in r){if(g(r.projectScale))this.projectScale=r.projectScale.slice();else{var i=+r.projectScale;this.projectScale=[i,i,i]}}if(this.projectHasAlpha=!1,"projectOpacity"in r){g(r.projectOpacity)?this.projectOpacity=r.projectOpacity.slice():(i=+r.projectOpacity,this.projectOpacity=[i,i,i]);for(var a=0;a<3;++a)this.projectOpacity[a]=b(this.projectOpacity[a]),this.projectOpacity[a]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in r&&(this.opacity=b(r.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var o,s,c=r.position,u={family:r.font||"normal",style:r.fontStyle||"normal",weight:r.fontWeight||"normal",variant:r.fontVariant||"normal"},f=r.alignment||[0,0];if(2===f.length)o=f[0],s=f[1];else for(o=[],s=[],a=0;a<f.length;++a)o[a]=f[a][0],s[a]=f[a][1];var h=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0],d=r.glyph,y=r.color,v=r.size,m=r.angle,x=r.lineColor,_=-1,w=0,T=0,A=0;if(c.length){A=c.length;e:for(a=0;a<A;++a){for(var k=c[a],M=0;M<3;++M)if(isNaN(k[M])||!isFinite(k[M]))continue e;var S=(H=R(d,a,u,this.pixelRatio)).mesh,E=H.lines,I=H.bounds;w+=3*S.cells.length,T+=2*E.edges.length}}var L=w+T,C=l.mallocFloat(3*L),O=l.mallocFloat(4*L),D=l.mallocFloat(2*L),P=l.mallocUint32(L);if(L>0){var B=0,z=w,F=[0,0,0,1],N=[0,0,0,1],U=g(y)&&g(y[0]),j=g(x)&&g(x[0]);e:for(a=0;a<A;++a){for(_+=1,k=c[a],M=0;M<3;++M){if(isNaN(k[M])||!isFinite(k[M]))continue e;p[M]=Math.max(p[M],k[M]),h[M]=Math.min(h[M],k[M])}S=(H=R(d,a,u,this.pixelRatio)).mesh,E=H.lines,I=H.bounds;var V,H,q=H.visible;if(q){if(g(y)){if(3===(V=U?a<y.length?y[a]:[0,0,0,0]:y).length){for(M=0;M<3;++M)F[M]=V[M];F[3]=1}else if(4===V.length){for(M=0;M<4;++M)F[M]=V[M];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1}else F=[1,1,1,0];if(q){if(g(x)){if(3===(V=j?a<x.length?x[a]:[0,0,0,0]:x).length){for(M=0;M<3;++M)N[M]=V[M];N[M]=1}else if(4===V.length){for(M=0;M<4;++M)N[M]=V[M];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else N[0]=N[1]=N[2]=0,N[3]=1}else N=[1,1,1,0];var G=.5;q?g(v)?G=a<v.length?+v[a]:12:v?G=+v:this.useOrtho&&(G=12):G=0;var W=0;g(m)?W=a<m.length?+m[a]:0:m&&(W=+m);var Y=Math.cos(W),Z=Math.sin(W);for(k=c[a],M=0;M<3;++M)p[M]=Math.max(p[M],k[M]),h[M]=Math.min(h[M],k[M]);var X=o,K=s;X=0,g(o)?X=a<o.length?o[a]:0:o&&(X=o),K=0,g(s)?K=a<s.length?s[a]:0:s&&(K=s);var J=[X*=X>0?1-I[0][0]:X<0?1+I[1][0]:1,K*=K>0?1-I[0][1]:K<0?1+I[1][1]:1],$=S.cells||[],Q=S.positions||[];for(M=0;M<$.length;++M)for(var tt=$[M],te=0;te<3;++te){for(var tr=0;tr<3;++tr)C[3*B+tr]=k[tr];for(tr=0;tr<4;++tr)O[4*B+tr]=F[tr];P[B]=_;var tn=Q[tt[te]];D[2*B]=G*(Y*tn[0]-Z*tn[1]+J[0]),D[2*B+1]=G*(Z*tn[0]+Y*tn[1]+J[1]),B+=1}for($=E.edges,Q=E.positions,M=0;M<$.length;++M)for(tt=$[M],te=0;te<2;++te){for(tr=0;tr<3;++tr)C[3*z+tr]=k[tr];for(tr=0;tr<4;++tr)O[4*z+tr]=N[tr];P[z]=_,tn=Q[tt[te]],D[2*z]=G*(Y*tn[0]-Z*tn[1]+J[0]),D[2*z+1]=G*(Z*tn[0]+Y*tn[1]+J[1]),z+=1}}}this.bounds=[h,p],this.points=c,this.pointCount=c.length,this.vertexCount=w,this.lineVertexCount=T,this.pointBuffer.update(C),this.colorBuffer.update(O),this.glyphBuffer.update(D),this.idBuffer.update(P),l.free(C),l.free(O),l.free(D),l.free(P)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(r,n,i){var a=i(3236);n.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),n.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(r,n,i){var a=i(9405),o=i(2762),s=i(4298);function l(r,n,i){this.plot=r,this.boxBuffer=n,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}r.exports=function(r,n){var i=r.gl,c=new l(r,o(i,[0,0,0,1,1,0,1,1]),a(i,s.boxVertex,s.boxFragment));return c.update(n),r.addOverlay(c),c};var c=l.prototype;c.draw=function(){if(this.enabled){var r=this.plot,n=this.selectBox,i=this.borderWidth,a=(this.innerFill,this.innerColor),o=(this.outerFill,this.outerColor),s=this.borderColor,l=r.box,c=r.screenBox,u=r.dataBox,f=r.viewBox,h=r.pixelRatio,p=(n[0]-u[0])*(f[2]-f[0])/(u[2]-u[0])+f[0],d=(n[1]-u[1])*(f[3]-f[1])/(u[3]-u[1])+f[1],y=(n[2]-u[0])*(f[2]-f[0])/(u[2]-u[0])+f[0],g=(n[3]-u[1])*(f[3]-f[1])/(u[3]-u[1])+f[1];if(p=Math.max(p,f[0]),d=Math.max(d,f[1]),y=Math.min(y,f[2]),g=Math.min(g,f[3]),!(y<p||g<d)){l.bind();var v=c[2]-c[0],m=c[3]-c[1];if(this.outerFill&&(l.drawBox(0,0,v,d,o),l.drawBox(0,d,p,g,o),l.drawBox(0,g,v,m,o),l.drawBox(y,d,v,g,o)),this.innerFill&&l.drawBox(p,d,y,g,a),i>0){var x=i*h;l.drawBox(p-x,d-x,y+x,d+x,s),l.drawBox(p-x,g-x,y+x,g+x,s),l.drawBox(p-x,d-x,p+x,g+x,s),l.drawBox(y-x,d-x,y+x,g+x,s)}}}},c.update=function(r){r=r||{},this.innerFill=!!r.innerFill,this.outerFill=!!r.outerFill,this.innerColor=(r.innerColor||[0,0,0,.5]).slice(),this.outerColor=(r.outerColor||[0,0,0,.5]).slice(),this.borderColor=(r.borderColor||[0,0,0,1]).slice(),this.borderWidth=r.borderWidth||0,this.selectBox=(r.selectBox||this.selectBox).slice()},c.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(r,n,i){r.exports=function(r,n){var i=n[0],s=n[1];return new u(r,a(r,i,s,{}),o.mallocUint8(i*s*4))};var a=i(2260),o=i(1888),s=i(9618),l=i(8828).nextPow2;function c(r,n,i,a,o){this.coord=[r,n],this.id=i,this.value=a,this.distance=o}function u(r,n,i){this.gl=r,this.fbo=n,this.buffer=i,this._readTimeout=null;var a=this;this._readCallback=function(){a.gl&&(n.bind(),r.readPixels(0,0,n.shape[0],n.shape[1],r.RGBA,r.UNSIGNED_BYTE,a.buffer),a._readTimeout=null)}}var f=u.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(r){if(this.gl){this.fbo.shape=r;var n=this.fbo.shape[0],i=this.fbo.shape[1];if(i*n*4>this.buffer.length){o.free(this.buffer);for(var a=this.buffer=o.mallocUint8(l(i*n*4)),s=0;s<i*n*4;++s)a[s]=255}return r}}}),f.begin=function(){var r=this.gl;this.shape,r&&(this.fbo.bind(),r.clearColor(1,1,1,1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT))},f.end=function(){var r=this.gl;r&&(r.bindFramebuffer(r.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(r,n,i){if(!this.gl)return null;var a=this.fbo.shape.slice();r|=0,n|=0,"number"!=typeof i&&(i=1);var o=0|Math.min(Math.max(r-i,0),a[0]),l=0|Math.min(Math.max(r+i,0),a[0]),u=0|Math.min(Math.max(n-i,0),a[1]),f=0|Math.min(Math.max(n+i,0),a[1]);if(l<=o||f<=u)return null;var h=[l-o,f-u],p=s(this.buffer,[h[0],h[1],4],[4,4*a[0],1],4*(o+a[0]*u)),d=function(r,n,i){for(var a=1e8,o=-1,s=-1,l=r.shape[0],c=r.shape[1],u=0;u<l;u++)for(var f=0;f<c;f++){var h=r.get(u,f,0),p=r.get(u,f,1),d=r.get(u,f,2),y=r.get(u,f,3);if(h<255||p<255||d<255||y<255){var g=n-u,v=i-f,m=g*g+v*v;m<a&&(a=m,o=u,s=f)}}return[o,s,a]}(p.hi(h[0],h[1],1),i,i),y=d[0],g=d[1];return y<0||Math.pow(this.radius,2)<d[2]?null:new c(y+o|0,g+u|0,p.get(y,g,0),[p.get(y,g,1),p.get(y,g,2),p.get(y,g,3)],Math.sqrt(d[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(r,n,i){var a=i(3327),o=i(8731),s=i(216),l=i(5091),c=i(2145),u=i(8866);function f(r){this.gl=r,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=f.prototype;function p(r,n){return r.name<n.name?-1:1}h.bind=function(){this.program||this._relink();var r,n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),i=this.gl.lastAttribCount;if(n>i)for(r=i;r<n;r++)this.gl.enableVertexAttribArray(r);else if(i>n)for(r=n;r<i;r++)this.gl.disableVertexAttribArray(r);this.gl.lastAttribCount=n,this.gl.useProgram(this.program)},h.dispose=function(){for(var r=this.gl.lastAttribCount,n=0;n<r;n++)this.gl.disableVertexAttribArray(n);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(r,n,i,f){if(!n||1==arguments.length){var h=r;r=h.vertex,n=h.fragment,i=h.uniforms,f=h.attributes}var d=this,y=d.gl,g=d._vref;d._vref=l.shader(y,y.VERTEX_SHADER,r),g&&g.dispose(),d.vertShader=d._vref.shader;var v=this._fref;if(d._fref=l.shader(y,y.FRAGMENT_SHADER,n),v&&v.dispose(),d.fragShader=d._fref.shader,!i||!f){var m=y.createProgram();if(y.attachShader(m,d.fragShader),y.attachShader(m,d.vertShader),y.linkProgram(m),!y.getProgramParameter(m,y.LINK_STATUS)){var x=y.getProgramInfoLog(m);throw new u(x,"Error linking program:"+x)}i=i||c.uniforms(y,m),f=f||c.attributes(y,m),y.deleteProgram(m)}(f=f.slice()).sort(p);var b,_=[],w=[],T=[];for(b=0;b<f.length;++b){var A=f[b];if(A.type.indexOf("mat")>=0){for(var k=0|A.type.charAt(A.type.length-1),M=Array(k),S=0;S<k;++S)M[S]=T.length,w.push(A.name+"["+S+"]"),"number"==typeof A.location?T.push(A.location+S):Array.isArray(A.location)&&A.location.length===k&&"number"==typeof A.location[S]?T.push(0|A.location[S]):T.push(-1);_.push({name:A.name,type:A.type,locations:M})}else _.push({name:A.name,type:A.type,locations:[T.length]}),w.push(A.name),"number"==typeof A.location?T.push(0|A.location):T.push(-1)}var E=0;for(b=0;b<T.length;++b)if(T[b]<0){for(;T.indexOf(E)>=0;)E+=1;T[b]=E}var I=Array(i.length);function L(){d.program=l.program(y,d._vref,d._fref,w,T);for(var r=0;r<i.length;++r)I[r]=y.getUniformLocation(d.program,i[r].name)}L(),d._relink=L,d.types={uniforms:s(i),attributes:s(f)},d.attributes=o(y,d,_,T),Object.defineProperty(d,"uniforms",a(y,d,i,I))},r.exports=function(r,n,i,a,o){var s=new f(r);return s.update(n,i,a,o),s}},8866:function(r){function n(r,n,i){this.shortMessage=n||"",this.longMessage=i||"",this.rawError=r||"",this.message="gl-shader: "+(n||r||"")+(i?"\n"+i:""),this.stack=Error().stack}n.prototype=Error(),n.prototype.name="GLError",n.prototype.constructor=n,r.exports=n},8731:function(r,n,i){r.exports=function(r,n,i,o){for(var s={},l=0,u=i.length;l<u;++l){var f,h=i[l],p=h.name,d=h.type,y=h.locations;switch(d){case"bool":case"int":case"float":c(r,n,y[0],o,1,s,p);break;default:if(d.indexOf("vec")>=0){if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new a("","Invalid data type for attribute "+p+": "+d);c(r,n,y[0],o,f,s,p)}else{if(!(d.indexOf("mat")>=0))throw new a("","Unknown data type for attribute "+p+": "+d);if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new a("","Invalid data type for attribute "+p+": "+d);(function(r,n,i,a,o,s,l){for(var u=Array(o),f=Array(o),h=0;h<o;++h)c(r,n,i[h],a,o,u,h),f[h]=u[h];Object.defineProperty(u,"location",{set:function(r){if(Array.isArray(r))for(var n=0;n<o;++n)f[n].location=r[n];else for(n=0;n<o;++n)f[n].location=r+n;return r},get:function(){for(var r=Array(o),n=0;n<o;++n)r[n]=a[i[n]];return r},enumerable:!0}),u.pointer=function(n,s,l,c){n=n||r.FLOAT,s=!!s,l=l||o*o,c=c||0;for(var u=0;u<o;++u){var f=a[i[u]];r.vertexAttribPointer(f,o,n,s,l,c+u*o),r.enableVertexAttribArray(f)}};var p=Array(o),d=r["vertexAttrib"+o+"fv"];Object.defineProperty(s,l,{set:function(n){for(var s=0;s<o;++s){var l=a[i[s]];if(r.disableVertexAttribArray(l),Array.isArray(n[0]))d.call(r,l,n[s]);else{for(var c=0;c<o;++c)p[c]=n[o*s+c];d.call(r,l,p)}}return n},get:function(){return u},enumerable:!0})})(r,n,y,o,f,s,p)}}}return s};var a=i(8866);function o(r,n,i,a,o,s){this._gl=r,this._wrapper=n,this._index=i,this._locations=a,this._dimension=o,this._constFunc=s}var s=o.prototype;s.pointer=function(r,n,i,a){var o=this._gl,s=this._locations[this._index];o.vertexAttribPointer(s,this._dimension,r||o.FLOAT,!!n,i||0,a||0),o.enableVertexAttribArray(s)},s.set=function(r,n,i,a){return this._constFunc(this._locations[this._index],r,n,i,a)},Object.defineProperty(s,"location",{get:function(){return this._locations[this._index]},set:function(r){return r!==this._locations[this._index]&&(this._locations[this._index]=0|r,this._wrapper.program=null),0|r}});var l=[function(r,n,i){return void 0===i.length?r.vertexAttrib1f(n,i):r.vertexAttrib1fv(n,i)},function(r,n,i,a){return void 0===i.length?r.vertexAttrib2f(n,i,a):r.vertexAttrib2fv(n,i)},function(r,n,i,a,o){return void 0===i.length?r.vertexAttrib3f(n,i,a,o):r.vertexAttrib3fv(n,i)},function(r,n,i,a,o,s){return void 0===i.length?r.vertexAttrib4f(n,i,a,o,s):r.vertexAttrib4fv(n,i)}];function c(r,n,i,a,s,c,u){var f=l[s],h=new o(r,n,i,a,s,f);Object.defineProperty(c,u,{set:function(n){return r.disableVertexAttribArray(a[i]),f(r,a[i],n),n},get:function(){return h},enumerable:!0})}},3327:function(r,n,i){var a=i(216),o=i(8866);function s(r){return function(){return r}}function l(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n;return i}r.exports=function(r,n,i,c){function u(n){return function(a){for(var s=function r(n,i){if("object"!=typeof i)return[[n,i]];var a=[];for(var o in i){var s=i[o],l=n;parseInt(o)+""===o?l+="["+o+"]":l+="."+o,"object"==typeof s?a.push.apply(a,r(l,s)):a.push([l,s])}return a}("",n),l=0;l<s.length;++l){var u=s[l],f=u[0],h=u[1];if(c[h]){var p=a;if("string"==typeof f&&(0===f.indexOf(".")||0===f.indexOf("["))){var d=f;if(0===f.indexOf(".")&&(d=f.slice(1)),d.indexOf("]")===d.length-1){var y=d.indexOf("["),g=d.slice(0,y),v=d.slice(y+1,d.length-1);p=g?a[g][v]:a[v]}else p=a[d]}var m,x=i[h].type;switch(x){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(c[h],p);break;case"float":r.uniform1f(c[h],p);break;default:var b=x.indexOf("vec");if(!(0<=b&&b<=1&&x.length===4+b)){if(0===x.indexOf("mat")&&4===x.length){if((m=x.charCodeAt(x.length-1)-48)<2||m>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+x);r["uniformMatrix"+m+"fv"](c[h],!1,p);break}throw new o("","Unknown uniform data type for "+name+": "+x)}if((m=x.charCodeAt(x.length-1)-48)<2||m>4)throw new o("","Invalid data type");switch(x.charAt(0)){case"b":case"i":r["uniform"+m+"iv"](c[h],p);break;case"v":r["uniform"+m+"fv"](c[h],p);break;default:throw new o("","Unrecognized data type for vector "+name+": "+x)}}}}}}function f(r,n,a){"object"==typeof a?Object.defineProperty(r,n,{get:s(h(a)),set:u(a),enumerable:!0,configurable:!1}):c[a]?Object.defineProperty(r,n,{get:function(r,n,i){return r.getUniform(n.program,i[a])},set:u(a),enumerable:!0,configurable:!1}):r[n]=function(r){switch(r){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var n,i=r.indexOf("vec");if(0<=i&&i<=1&&r.length===4+i){if((n=r.charCodeAt(r.length-1)-48)<2||n>4)throw new o("","Invalid data type");return"b"===r.charAt(0)?l(n,!1):l(n,0)}if(0===r.indexOf("mat")&&4===r.length){if((n=r.charCodeAt(r.length-1)-48)<2||n>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+r);return l(n*n,0)}throw new o("","Unknown uniform data type for "+name+": "+r)}}(i[a].type)}function h(r){var n;if(Array.isArray(r)){n=Array(r.length);for(var i=0;i<r.length;++i)f(n,i,r[i])}else for(var a in n={},r)f(n,a,r[a]);return n}var p=a(i,!0);return{get:s(h(p)),set:u(p),enumerable:!0,configurable:!0}}},216:function(r){r.exports=function(r,n){for(var i={},a=0;a<r.length;++a)for(var o=r[a].name.split("."),s=i,l=0;l<o.length;++l){var c=o[l].split("[");if(c.length>1){c[0]in s||(s[c[0]]=[]),s=s[c[0]];for(var u=1;u<c.length;++u){var f=parseInt(c[u]);u<c.length-1||l<o.length-1?(f in s||(u<c.length-1?s[f]=[]:s[f]={}),s=s[f]):s[f]=n?a:r[a].type}}else l<o.length-1?(c[0]in s||(s[c[0]]={}),s=s[c[0]]):s[c[0]]=n?a:r[a].type}return i}},2145:function(r,n){n.uniforms=function(r,n){for(var i=r.getProgramParameter(n,r.ACTIVE_UNIFORMS),a=[],s=0;s<i;++s){var l=r.getActiveUniform(n,s);if(l){var c=o(r,l.type);if(l.size>1)for(var u=0;u<l.size;++u)a.push({name:l.name.replace("[0]","["+u+"]"),type:c});else a.push({name:l.name,type:c})}}return a},n.attributes=function(r,n){for(var i=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES),a=[],s=0;s<i;++s){var l=r.getActiveAttrib(n,s);l&&a.push({name:l.name,type:o(r,l.type)})}return a};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function o(r,n){if(!a){var o=Object.keys(i);a={};for(var s=0;s<o.length;++s){var l=o[s];a[r[l]]=i[l]}}return a[n]}},5091:function(r,n,i){n.shader=function(r,n,i){return h(r).getShaderReference(n,i)},n.program=function(r,n,i,a,o){return h(r).getProgram(n,i,a,o)};var a=i(8866),o=i(2992),s=new("undefined"==typeof WeakMap?i(606):WeakMap),l=0;function c(r,n,i,a,o,s,l){this.id=r,this.src=n,this.type=i,this.shader=a,this.count=s,this.programs=[],this.cache=l}function u(r){this.gl=r,this.shaders=[{},{}],this.programs={}}c.prototype.dispose=function(){if(0==--this.count){for(var r=this.cache,n=r.gl,i=this.programs,a=0,o=i.length;a<o;++a){var s=r.programs[i[a]];s&&(delete r.programs[a],n.deleteProgram(s))}n.deleteShader(this.shader),delete r.shaders[this.type===n.FRAGMENT_SHADER|0][this.src]}};var f=u.prototype;function h(r){var n=s.get(r);return n||(n=new u(r),s.set(r,n)),n}f.getShaderReference=function(r,n){var i=this.gl,s=this.shaders[r===i.FRAGMENT_SHADER|0],u=s[n];if(u&&i.isShader(u.shader))u.count+=1;else{var f=function(r,n,i){var s=r.createShader(n);if(r.shaderSource(s,i),r.compileShader(s),!r.getShaderParameter(s,r.COMPILE_STATUS)){var l=r.getShaderInfoLog(s);try{var c=o(l,i,n)}catch(r){throw console.warn("Failed to format compiler error: "+r),new a(l,"Error compiling shader:\n"+l)}throw new a(l,c.short,c.long)}return s}(i,r,n);u=s[n]=new c(l++,n,r,f,[],1,this)}return u},f.getProgram=function(r,n,i,o){var s=[r.id,n.id,i.join(":"),o.join(":")].join("@"),l=this.programs[s];return l&&this.gl.isProgram(l)||(this.programs[s]=l=function(r,n,i,o,s){var l=r.createProgram();r.attachShader(l,n),r.attachShader(l,i);for(var c=0;c<o.length;++c)r.bindAttribLocation(l,s[c],o[c]);if(r.linkProgram(l),!r.getProgramParameter(l,r.LINK_STATUS)){var u=r.getProgramInfoLog(l);throw new a(u,"Error linking program: "+u)}return l}(this.gl,r.shader,n.shader,i,o),r.programs.push(s),n.programs.push(s)),l}},4098:function(r){function n(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}r.exports=function(r,i){var a=new n(r);return a.update(i),r.addOverlay(a),a};var i=n.prototype;i.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var r=this.enable,n=this.width,i=this.color,a=this.center,o=this.plot,s=o.line,l=o.dataBox,c=o.viewBox;if(s.bind(),l[0]<=a[0]&&a[0]<=l[2]&&l[1]<=a[1]&&a[1]<=l[3]){var u=c[0]+(a[0]-l[0])/(l[2]-l[0])*(c[2]-c[0]),f=c[1]+(a[1]-l[1])/(l[3]-l[1])*(c[3]-c[1]);r[0]&&s.drawLine(u,f,c[0],f,n[0],i[0]),r[1]&&s.drawLine(u,f,u,c[1],n[1],i[1]),r[2]&&s.drawLine(u,f,c[2],f,n[2],i[2]),r[3]&&s.drawLine(u,f,u,c[3],n[3],i[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},1493:function(r,n,i){var a=i(3236),o=i(9405),s=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(r,n,i){var a=i(2762),o=i(8116),s=i(1493);r.exports=function(r,n){var i=[];function l(r,n,a,o,s,l){var c=[r,n,a,0,0,0,1];c[o+3]=1,c[o]=s,i.push.apply(i,c),c[6]=-1,i.push.apply(i,c),c[o]=l,i.push.apply(i,c),i.push.apply(i,c),c[6]=1,i.push.apply(i,c),c[o]=s,i.push.apply(i,c)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var u=a(r,i),f=o(r,[{type:r.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:r.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:r.FLOAT,buffer:u,size:1,offset:24,stride:28}]),h=s(r);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var p=new c(r,u,f,h);return p.update(n),p};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(r,n,i,a){this.gl=r,this.buffer=n,this.vao=i,this.shader=a,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=c.prototype,f=[0,0,0],h=[0,0,0],p=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(r){},u.draw=function(r){var n=this.gl,i=this.vao,a=this.shader;i.bind(),a.bind();var o,s=r.model||l,c=r.view||l,u=r.projection||l;this.axes&&(o=this.axes.lastCubeProps.axis);for(var d=0;d<3;++d)o&&o[d]<0?(f[d]=this.bounds[0][d],h[d]=this.bounds[1][d]):(f[d]=this.bounds[1][d],h[d]=this.bounds[0][d]);for(p[0]=n.drawingBufferWidth,p[1]=n.drawingBufferHeight,a.uniforms.model=s,a.uniforms.view=c,a.uniforms.projection=u,a.uniforms.coordinates=[this.position,f,h],a.uniforms.colors=this.colors,a.uniforms.screenShape=p,d=0;d<3;++d)a.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(i.draw(n.TRIANGLES,6,6*d),this.drawSides[d]&&i.draw(n.TRIANGLES,12,18+12*d));i.unbind()},u.update=function(r){r&&("bounds"in r&&(this.bounds=r.bounds),"position"in r&&(this.position=r.position),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"colors"in r&&(this.colors=r.colors),"enabled"in r&&(this.enabled=r.enabled),"drawSides"in r&&(this.drawSides=r.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(r,n,i){var a=i(3236),o=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(r,n,i){var a=i(2931),o=i(9970),s=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(r,n){var i,a=r.length;for(i=0;i<a;i++){var o=r[i];if(o===n)break;if(o>n)return i-1}return i},c=function(r,n,i){return r<n?n:r>i?i:r},u=function(r){var n=1/0;r.sort(function(r,n){return r-n});for(var i=r.length,a=1;a<i;a++){var o=Math.abs(r[a]-r[a-1]);o<n&&(n=o)}return n};r.exports=function(r,n){var i=r.startingPositions,f=r.maxLength||1e3,h=r.tubeSize||1,p=r.absoluteTubeSize,d=r.gridFill||"+x+y+z",y={};-1!==d.indexOf("-x")&&(y.reversedX=!0),-1!==d.indexOf("-y")&&(y.reversedY=!0),-1!==d.indexOf("-z")&&(y.reversedZ=!0),y.filled=s.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var g=r.getVelocity||function(n){return function(r,n,i){var o=n.vectors,s=n.meshgrid,u=r[0],f=r[1],h=r[2],p=s[0].length,d=s[1].length,y=s[2].length,g=l(s[0],u),v=l(s[1],f),m=l(s[2],h),x=g+1,b=v+1,_=m+1;if(g=c(g,0,p-1),x=c(x,0,p-1),v=c(v,0,d-1),b=c(b,0,d-1),m=c(m,0,y-1),_=c(_,0,y-1),g<0||v<0||m<0||x>p-1||b>d-1||_>y-1)return a.create();var w,T,A,k,M,S,E=s[0][g],I=s[0][x],L=s[1][v],C=s[1][b],O=s[2][m],D=(u-E)/(I-E),P=(f-L)/(C-L),B=(h-O)/(s[2][_]-O);switch(isFinite(D)||(D=.5),isFinite(P)||(P=.5),isFinite(B)||(B=.5),i.reversedX&&(g=p-1-g,x=p-1-x),i.reversedY&&(v=d-1-v,b=d-1-b),i.reversedZ&&(m=y-1-m,_=y-1-_),i.filled){case 5:M=m,S=_,A=v*y,k=b*y,w=g*y*d,T=x*y*d;break;case 4:M=m,S=_,w=g*y,T=x*y,A=v*y*p,k=b*y*p;break;case 3:A=v,k=b,M=m*d,S=_*d,w=g*d*y,T=x*d*y;break;case 2:A=v,k=b,w=g*d,T=x*d,M=m*d*p,S=_*d*p;break;case 1:w=g,T=x,M=m*p,S=_*p,A=v*p*y,k=b*p*y;break;default:w=g,T=x,A=v*p,k=b*p,M=m*p*d,S=_*p*d}var R=o[w+A+M],z=o[w+A+S],F=o[w+k+M],N=o[w+k+S],U=o[T+A+M],j=o[T+A+S],V=o[T+k+M],H=o[T+k+S],q=a.create(),G=a.create(),W=a.create(),Y=a.create();a.lerp(q,R,U,D),a.lerp(G,z,j,D),a.lerp(W,F,V,D),a.lerp(Y,N,H,D);var Z=a.create(),X=a.create();a.lerp(Z,q,W,P),a.lerp(X,G,Y,P);var K=a.create();return a.lerp(K,Z,X,B),K}(n,r,y)},v=r.getDivergence||function(r,n){var i=a.create();a.add(i,r,[1e-4,0,0]);var o=g(i);a.subtract(o,o,n),a.scale(o,o,1e4),a.add(i,r,[0,1e-4,0]);var s=g(i);a.subtract(s,s,n),a.scale(s,s,1e4),a.add(i,r,[0,0,1e-4]);var l=g(i);return a.subtract(l,l,n),a.scale(l,l,1e4),a.add(i,o,s),a.add(i,i,l),i},m=[],x=n[0][0],b=n[0][1],_=n[0][2],w=n[1][0],T=n[1][1],A=n[1][2],k=10*a.distance(n[0],n[1])/f,M=k*k,S=1,E=0,I=i.length;I>1&&(S=function(r){for(var n=[],i=[],a=[],o={},s={},l={},c=r.length,f=0;f<c;f++){var h=r[f],p=h[0],d=h[1],y=h[2];o[p]||(n.push(p),o[p]=!0),s[d]||(i.push(d),s[d]=!0),l[y]||(a.push(y),l[y]=!0)}var g=Math.min(u(n),u(i),u(a));return isFinite(g)?g:1}(i));for(var L=0;L<I;L++){var C=a.create();a.copy(C,i[L]);var O=[C],D=[],P=g(C),B=C;D.push(P);var R=[],z=v(C,P),F=a.length(z);isFinite(F)&&F>E&&(E=F),R.push(F),m.push({points:O,velocities:D,divergences:R});for(var N=0;N<100*f&&O.length<f&&function(r){var n=r[0],i=r[1],a=r[2];return!(n<x||n>w||i<b||i>T||a<_||a>A)}(C);){N++;var U=a.clone(P),j=a.squaredLength(U);if(0===j)break;j>M&&a.scale(U,U,k/Math.sqrt(j)),a.add(U,U,C),P=g(U),a.squaredDistance(B,U)-M>-.0001*M&&(O.push(U),B=U,D.push(P),z=v(U,P),isFinite(F=a.length(z))&&F>E&&(E=F),R.push(F)),C=U}}var V=function(r,n,i,s){for(var l=0,c=0;c<r.length;c++)for(var u=r[c].velocities,f=0;f<u.length;f++)l=Math.max(l,a.length(u[f]));var h=r.map(function(r){return function(r,n,i,s){for(var l=r.points,c=r.velocities,u=r.divergences,f=[],h=[],p=[],d=[],y=[],g=[],v=0,m=0,x=o.create(),b=o.create(),_=0;_<l.length;_++){var w=l[_],T=c[_],A=u[_];0===n&&(A=.05*i),m=a.length(T)/s,x=o.create(),a.copy(x,T),x[3]=A;for(var k=0;k<8;k++)y[k]=[w[0],w[1],w[2],k];if(d.length>0)for(k=0;k<8;k++){var M=(k+1)%8;f.push(d[k],y[k],y[M],y[M],d[M],d[k]),p.push(b,x,x,x,b,b),g.push(v,m,m,m,v,v);var S=f.length;h.push([S-6,S-5,S-4],[S-3,S-2,S-1])}var E=d;d=y,y=E;var I=b;b=x,x=I;var L=v;v=m,m=L}return{positions:f,cells:h,vectors:p,vertexIntensity:g}}(r,i,s,l)}),p=[],d=[],y=[],g=[];for(c=0;c<h.length;c++){var v=h[c],m=p.length;for(p=p.concat(v.positions),y=y.concat(v.vectors),g=g.concat(v.vertexIntensity),f=0;f<v.cells.length;f++){var x=v.cells[f],b=[];d.push(b);for(var _=0;_<x.length;_++)b.push(x[_]+m)}}return{positions:p,cells:d,vectors:y,vertexIntensity:g,colormap:n}}(m,r.colormap,E,S);return p?V.tubeScale=p:(0===E&&(E=1),V.tubeScale=.5*h*S/E),V};var f=i(6740),h=i(6405).createMesh;r.exports.createTubeMesh=function(r,n){return h(r,n,{shaders:f,traceType:"streamtube"})}},990:function(r,n,i){var a=i(9405),o=i(3236),s=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);n.createShader=function(r){var n=a(r,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n.attributes.normal.location=2,n},n.createPickShader=function(r){var n=a(r,s,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n.attributes.normal.location=2,n},n.createContourShader=function(r){var n=a(r,c,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n},n.createPickContourShader=function(r){var n=a(r,c,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n}},9499:function(r,n,i){r.exports=function(r){var n=r.gl,i=b(n),a=w(n),c=_(n),u=T(n),f=o(n),h=s(n,[{buffer:f,size:4,stride:A,offset:0},{buffer:f,size:3,stride:A,offset:16},{buffer:f,size:3,stride:A,offset:28}]),p=o(n),d=s(n,[{buffer:p,size:4,stride:20,offset:0},{buffer:p,size:1,stride:20,offset:16}]),y=o(n),g=s(n,[{buffer:y,size:2,type:n.FLOAT}]),v=l(n,1,I,n.RGBA,n.UNSIGNED_BYTE);v.minFilter=n.LINEAR,v.magFilter=n.LINEAR;var m=new L(n,[0,0],[[0,0,0],[0,0,0]],i,a,f,h,v,c,u,p,d,y,g,[0,0,0]),x={levels:[[],[],[]]};for(var k in r)x[k]=r[k];return x.colormap=x.colormap||"jet",m.update(x),m};var a=i(8828),o=i(2762),s=i(8116),l=i(7766),c=i(1888),u=i(6729),f=i(5298),h=i(9994),p=i(9618),d=i(3711),y=i(6760),g=i(7608),v=i(2478),m=i(6199),x=i(990),b=x.createShader,_=x.createContourShader,w=x.createPickShader,T=x.createPickContourShader,A=40,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function E(r,n,i,a,o){this.position=r,this.index=n,this.uv=i,this.level=a,this.dataCoordinate=o}!function(){for(var r=0;r<3;++r){var n=S[r],i=(r+2)%3;n[(r+1)%3+0]=1,n[i+3]=1,n[r+6]=1}}();var I=256;function L(r,n,i,a,o,s,l,u,f,h,d,y,g,v,m){this.gl=r,this.shape=n,this.bounds=i,this.objectOffset=m,this.intensityBounds=[],this._shader=a,this._pickShader=o,this._coordinateBuffer=s,this._vao=l,this._colorMap=u,this._contourShader=f,this._contourPickShader=h,this._contourBuffer=d,this._contourVAO=y,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=g,this._dynamicVAO=v,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[p(c.mallocFloat(1024),[0,0]),p(c.mallocFloat(1024),[0,0]),p(c.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var C=L.prototype;C.genColormap=function(r,n){var i=!1,a=h([u({colormap:r,nshades:I,format:"rgba"}).map(function(r,a){var o=n?function(r,n){if(!n||!n.length)return 1;for(var i=0;i<n.length&&!(n.length<2);++i){if(n[i][0]===r)return n[i][1];if(n[i][0]>r&&i>0){var a=(n[i][0]-r)/(n[i][0]-n[i-1][0]);return n[i][1]*(1-a)+a*n[i-1][1]}}return 1}(a/255,n):r[3];return o<1&&(i=!0),[r[0],r[1],r[2],255*o]})]);return f.divseq(a,255),this.hasAlphaScale=i,a},C.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},C.isOpaque=function(){return!this.isTransparent()},C.pickSlots=1,C.setPickBase=function(r){this.pickId=r};var O=[0,0,0],D={showSurface:!1,showContour:!1,projections:[k.slice(),k.slice(),k.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function P(r,n){var i,a,o,s=n.axes&&n.axes.lastCubeProps.axis||O,l=n.showSurface,c=n.showContour;for(i=0;i<3;++i)for(l=l||n.surfaceProject[i],a=0;a<3;++a)c=c||n.contourProject[i][a];for(i=0;i<3;++i){var u=D.projections[i];for(a=0;a<16;++a)u[a]=0;for(a=0;a<4;++a)u[5*a]=1;u[5*i]=0,u[12+i]=n.axesBounds[+(s[i]>0)][i],y(u,r.model,u);var f=D.clipBounds[i];for(o=0;o<2;++o)for(a=0;a<3;++a)f[o][a]=r.clipBounds[o][a];f[0][i]=-1e8,f[1][i]=1e8}return D.showSurface=l,D.showContour=c,D}var B={model:k,view:k,projection:k,inverseModel:k.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},R=k.slice(),z=[1,0,0,0,1,0,0,0,1];function F(r,n){r=r||{};var i=this.gl;i.disable(i.CULL_FACE),this._colorMap.bind(0),B.model=r.model||k,B.view=r.view||k,B.projection=r.projection||k,B.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],B.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],B.objectOffset=this.objectOffset,B.contourColor=this.contourColor[0],B.inverseModel=g(B.inverseModel,B.model);for(var a=0;a<2;++a)for(var o=B.clipBounds[a],s=0;s<3;++s)o[s]=Math.min(Math.max(this.clipBounds[a][s],-1e8),1e8);for(B.kambient=this.ambientLight,B.kdiffuse=this.diffuseLight,B.kspecular=this.specularLight,B.roughness=this.roughness,B.fresnel=this.fresnel,B.opacity=this.opacity,B.height=0,B.permutation=z,B.vertexColor=this.vertexColor,y(R,B.view,B.model),y(R,B.projection,R),g(R,R),a=0;a<3;++a)B.eyePosition[a]=R[12+a]/R[15];var l=R[15];for(a=0;a<3;++a)l+=this.lightPosition[a]*R[4*a+3];for(a=0;a<3;++a){var c=R[12+a];for(s=0;s<3;++s)c+=R[4*s+a]*this.lightPosition[s];B.lightPosition[a]=c/l}var u=P(B,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=B,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(i.TRIANGLES,this._vertexCount),a=0;a<3;++a)this.surfaceProject[a]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[a],this._shader.uniforms.clipBounds=u.clipBounds[a],this._vao.draw(i.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var f=this._contourShader;B.kambient=1,B.kdiffuse=0,B.kspecular=0,B.opacity=1,f.bind(),f.uniforms=B;var h=this._contourVAO;for(h.bind(),a=0;a<3;++a)for(f.uniforms.permutation=S[a],i.lineWidth(this.contourWidth[a]*this.pixelRatio),s=0;s<this.contourLevels[a].length;++s)s===this.highlightLevel[a]?(f.uniforms.contourColor=this.highlightColor[a],f.uniforms.contourTint=this.highlightTint[a]):0!==s&&s-1!==this.highlightLevel[a]||(f.uniforms.contourColor=this.contourColor[a],f.uniforms.contourTint=this.contourTint[a]),this._contourCounts[a][s]&&(f.uniforms.height=this.contourLevels[a][s],h.draw(i.LINES,this._contourCounts[a][s],this._contourOffsets[a][s]));for(a=0;a<3;++a)for(f.uniforms.model=u.projections[a],f.uniforms.clipBounds=u.clipBounds[a],s=0;s<3;++s)if(this.contourProject[a][s]){f.uniforms.permutation=S[s],i.lineWidth(this.contourWidth[s]*this.pixelRatio);for(var p=0;p<this.contourLevels[s].length;++p)p===this.highlightLevel[s]?(f.uniforms.contourColor=this.highlightColor[s],f.uniforms.contourTint=this.highlightTint[s]):0!==p&&p-1!==this.highlightLevel[s]||(f.uniforms.contourColor=this.contourColor[s],f.uniforms.contourTint=this.contourTint[s]),this._contourCounts[s][p]&&(f.uniforms.height=this.contourLevels[s][p],h.draw(i.LINES,this._contourCounts[s][p],this._contourOffsets[s][p]))}for(h.unbind(),(h=this._dynamicVAO).bind(),a=0;a<3;++a)if(0!==this._dynamicCounts[a])for(f.uniforms.model=B.model,f.uniforms.clipBounds=B.clipBounds,f.uniforms.permutation=S[a],i.lineWidth(this.dynamicWidth[a]*this.pixelRatio),f.uniforms.contourColor=this.dynamicColor[a],f.uniforms.contourTint=this.dynamicTint[a],f.uniforms.height=this.dynamicLevel[a],h.draw(i.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]),s=0;s<3;++s)this.contourProject[s][a]&&(f.uniforms.model=u.projections[s],f.uniforms.clipBounds=u.clipBounds[s],h.draw(i.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]));h.unbind()}}C.draw=function(r){return F.call(this,r,!1)},C.drawTransparent=function(r){return F.call(this,r,!0)};var N={model:k,view:k,projection:k,inverseModel:k,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function U(r,n){return Array.isArray(r)?[n(r[0]),n(r[1]),n(r[2])]:[n(r),n(r),n(r)]}function j(r){return Array.isArray(r)?3===r.length?[r[0],r[1],r[2],1]:[r[0],r[1],r[2],r[3]]:[0,0,0,1]}function V(r){if(Array.isArray(r)){if(Array.isArray(r))return[j(r[0]),j(r[1]),j(r[2])];var n=j(r);return[n.slice(),n.slice(),n.slice()]}}C.drawPick=function(r){r=r||{};var n=this.gl;n.disable(n.CULL_FACE),N.model=r.model||k,N.view=r.view||k,N.projection=r.projection||k,N.shape=this._field[2].shape,N.pickId=this.pickId/255,N.lowerBound=this.bounds[0],N.upperBound=this.bounds[1],N.objectOffset=this.objectOffset,N.permutation=z;for(var i=0;i<2;++i)for(var a=N.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);var s=P(N,this);if(s.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=N,this._vao.bind(),this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=s.projections[i],this._pickShader.uniforms.clipBounds=s.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(s.showContour){var l=this._contourPickShader;l.bind(),l.uniforms=N;var c=this._contourVAO;for(c.bind(),o=0;o<3;++o)for(n.lineWidth(this.contourWidth[o]*this.pixelRatio),l.uniforms.permutation=S[o],i=0;i<this.contourLevels[o].length;++i)this._contourCounts[o][i]&&(l.uniforms.height=this.contourLevels[o][i],c.draw(n.LINES,this._contourCounts[o][i],this._contourOffsets[o][i]));for(i=0;i<3;++i)for(l.uniforms.model=s.projections[i],l.uniforms.clipBounds=s.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){l.uniforms.permutation=S[o],n.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var u=0;u<this.contourLevels[o].length;++u)this._contourCounts[o][u]&&(l.uniforms.height=this.contourLevels[o][u],c.draw(n.LINES,this._contourCounts[o][u],this._contourOffsets[o][u]))}c.unbind()}},C.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=this._field[2].shape,i=this._pickResult,a=n[0]*(r.value[0]+(r.value[2]>>4)/16)/255,o=Math.floor(a),s=a-o,l=n[1]*(r.value[1]+(15&r.value[2])/16)/255,c=Math.floor(l),u=l-c;o+=1,c+=1;var f=i.position;f[0]=f[1]=f[2]=0;for(var h=0;h<2;++h)for(var p=h?s:1-s,d=0;d<2;++d)for(var y=o+h,g=c+d,m=p*(d?u:1-u),x=0;x<3;++x)f[x]+=this._field[x].get(y,g)*m;for(var b=this._pickResult.level,_=0;_<3;++_)if(b[_]=v.le(this.contourLevels[_],f[_]),b[_]<0)this.contourLevels[_].length>0&&(b[_]=0);else if(b[_]<this.contourLevels[_].length-1){var w=this.contourLevels[_][b[_]],T=this.contourLevels[_][b[_]+1];Math.abs(w-f[_])>Math.abs(T-f[_])&&(b[_]+=1)}for(i.index[0]=s<.5?o:o+1,i.index[1]=u<.5?c:c+1,i.uv[0]=a/n[0],i.uv[1]=l/n[1],x=0;x<3;++x)i.dataCoordinate[x]=this._field[x].get(i.index[0],i.index[1]);return i},C.padField=function(r,n){var i=n.shape.slice(),a=r.shape.slice();f.assign(r.lo(1,1).hi(i[0],i[1]),n),f.assign(r.lo(1).hi(i[0],1),n.hi(i[0],1)),f.assign(r.lo(1,a[1]-1).hi(i[0],1),n.lo(0,i[1]-1).hi(i[0],1)),f.assign(r.lo(0,1).hi(1,i[1]),n.hi(1)),f.assign(r.lo(a[0]-1,1).hi(1,i[1]),n.lo(i[0]-1)),r.set(0,0,n.get(0,0)),r.set(0,a[1]-1,n.get(0,i[1]-1)),r.set(a[0]-1,0,n.get(i[0]-1,0)),r.set(a[0]-1,a[1]-1,n.get(i[0]-1,i[1]-1))},C.update=function(r){r=r||{},this.objectOffset=r.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in r&&(this.contourWidth=U(r.contourWidth,Number)),"showContour"in r&&(this.showContour=U(r.showContour,Boolean)),"showSurface"in r&&(this.showSurface=!!r.showSurface),"contourTint"in r&&(this.contourTint=U(r.contourTint,Boolean)),"contourColor"in r&&(this.contourColor=V(r.contourColor)),"contourProject"in r&&(this.contourProject=U(r.contourProject,function(r){return U(r,Boolean)})),"surfaceProject"in r&&(this.surfaceProject=r.surfaceProject),"dynamicColor"in r&&(this.dynamicColor=V(r.dynamicColor)),"dynamicTint"in r&&(this.dynamicTint=U(r.dynamicTint,Number)),"dynamicWidth"in r&&(this.dynamicWidth=U(r.dynamicWidth,Number)),"opacity"in r&&(this.opacity=r.opacity),"opacityscale"in r&&(this.opacityscale=r.opacityscale),"colorBounds"in r&&(this.colorBounds=r.colorBounds),"vertexColor"in r&&(this.vertexColor=r.vertexColor?1:0),"colormap"in r&&this._colorMap.setPixels(this.genColormap(r.colormap,this.opacityscale));var n=r.field||r.coords&&r.coords[2]||null,i=!1;if(n||(n=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in r||"coords"in r){var o=(n.shape[0]+2)*(n.shape[1]+2);o>this._field[2].data.length&&(c.freeFloat(this._field[2].data),this._field[2].data=c.mallocFloat(a.nextPow2(o))),this._field[2]=p(this._field[2].data,[n.shape[0]+2,n.shape[1]+2]),this.padField(this._field[2],n),this.shape=n.shape.slice();for(var s=this.shape,l=0;l<2;++l)this._field[2].size>this._field[l].data.length&&(c.freeFloat(this._field[l].data),this._field[l].data=c.mallocFloat(this._field[2].size)),this._field[l]=p(this._field[l].data,[s[0]+2,s[1]+2]);if(r.coords){var u=r.coords;if(!Array.isArray(u)||3!==u.length)throw Error("gl-surface: invalid coordinates for x/y");for(l=0;l<2;++l){var f=u[l];for(x=0;x<2;++x)if(f.shape[x]!==s[x])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[l],f)}}else if(r.ticks){var h=r.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(l=0;l<2;++l){var y=h[l];if((Array.isArray(y)||y.length)&&(y=p(y)),y.shape[0]!==s[l])throw Error("gl-surface: invalid tick length");var g=p(y.data,s);g.stride[l]=y.stride[0],g.stride[1^l]=0,this.padField(this._field[l],g)}}else{for(l=0;l<2;++l){var v=[0,0];v[l]=1,this._field[l]=p(this._field[l].data,[s[0]+2,s[1]+2],v,0)}this._field[0].set(0,0,0);for(var x=0;x<s[0];++x)this._field[0].set(x+1,0,x);for(this._field[0].set(s[0]+1,0,s[0]-1),this._field[1].set(0,0,0),x=0;x<s[1];++x)this._field[1].set(0,x+1,x);this._field[1].set(0,s[1]+1,s[1]-1)}var b=this._field,_=p(c.mallocFloat(3*b[2].size*2),[3,s[0]+2,s[1]+2,2]);for(l=0;l<3;++l)m(_.pick(l),b[l],"mirror");var w=p(c.mallocFloat(3*b[2].size),[s[0]+2,s[1]+2,3]);for(l=0;l<s[0]+2;++l)for(x=0;x<s[1]+2;++x){var T=_.get(0,l,x,0),A=_.get(0,l,x,1),k=_.get(1,l,x,0),S=_.get(1,l,x,1),E=_.get(2,l,x,0),I=_.get(2,l,x,1),L=k*I-S*E,C=E*A-I*T,O=T*S-A*k,D=Math.sqrt(L*L+C*C+O*O);D<1e-8?(D=Math.max(Math.abs(L),Math.abs(C),Math.abs(O)))<1e-8?(O=1,C=L=0,D=1):D=1/D:D=1/Math.sqrt(D),w.set(l,x,0,L*D),w.set(l,x,1,C*D),w.set(l,x,2,O*D)}c.free(_.data);var P=[1/0,1/0,1/0],B=[-1/0,-1/0,-1/0],R=1/0,z=-1/0,F=(s[0]-1)*(s[1]-1)*6,N=c.mallocFloat(a.nextPow2(10*F)),j=0,H=0;for(l=0;l<s[0]-1;++l)e:for(x=0;x<s[1]-1;++x){for(var q=0;q<2;++q)for(var G=0;G<2;++G)for(var W=0;W<3;++W){var Y=this._field[W].get(1+l+q,1+x+G);if(isNaN(Y)||!isFinite(Y))continue e}for(W=0;W<6;++W){var Z=l+M[W][0],X=x+M[W][1],K=this._field[0].get(Z+1,X+1),J=this._field[1].get(Z+1,X+1);Y=this._field[2].get(Z+1,X+1),L=w.get(Z+1,X+1,0),C=w.get(Z+1,X+1,1),O=w.get(Z+1,X+1,2),r.intensity&&($=r.intensity.get(Z,X));var $=r.intensity?r.intensity.get(Z,X):Y+this.objectOffset[2];N[j++]=Z,N[j++]=X,N[j++]=K,N[j++]=J,N[j++]=Y,N[j++]=0,N[j++]=$,N[j++]=L,N[j++]=C,N[j++]=O,P[0]=Math.min(P[0],K+this.objectOffset[0]),P[1]=Math.min(P[1],J+this.objectOffset[1]),P[2]=Math.min(P[2],Y+this.objectOffset[2]),R=Math.min(R,$),B[0]=Math.max(B[0],K+this.objectOffset[0]),B[1]=Math.max(B[1],J+this.objectOffset[1]),B[2]=Math.max(B[2],Y+this.objectOffset[2]),z=Math.max(z,$),H+=1}}for(r.intensityBounds&&(R=+r.intensityBounds[0],z=+r.intensityBounds[1]),l=6;l<j;l+=10)N[l]=(N[l]-R)/(z-R);this._vertexCount=H,this._coordinateBuffer.update(N.subarray(0,j)),c.freeFloat(N),c.free(w.data),this.bounds=[P,B],this.intensity=r.intensity||this._field[2],this.intensityBounds[0]===R&&this.intensityBounds[1]===z||(i=!0),this.intensityBounds=[R,z]}if("levels"in r){var Q=r.levels;for(Q=Array.isArray(Q[0])?Q.slice():[[],[],Q],l=0;l<3;++l)Q[l]=Q[l].slice(),Q[l].sort(function(r,n){return r-n});for(l=0;l<3;++l)for(x=0;x<Q[l].length;++x)Q[l][x]-=this.objectOffset[l];e:for(l=0;l<3;++l){if(Q[l].length!==this.contourLevels[l].length){i=!0;break}for(x=0;x<Q[l].length;++x)if(Q[l][x]!==this.contourLevels[l][x]){i=!0;break e}}this.contourLevels=Q}if(i){b=this._field,s=this.shape;for(var tt=[],te=0;te<3;++te){var tr=this.contourLevels[te],tn=[],ti=[],ta=[0,0,0];for(l=0;l<tr.length;++l){var to=d(this._field[te],tr[l]);tn.push(tt.length/5|0),H=0;e:for(x=0;x<to.cells.length;++x){var ts=to.cells[x];for(W=0;W<2;++W){var tl=to.positions[ts[W]],tc=tl[0],tu=0|Math.floor(tc),tf=tc-tu,th=tl[1],tp=0|Math.floor(th),td=th-tp,ty=!1;r:for(var tg=0;tg<3;++tg){ta[tg]=0;var tv=(te+tg+1)%3;for(q=0;q<2;++q){var tm=q?tf:1-tf;for(Z=0|Math.min(Math.max(tu+q,0),s[0]),G=0;G<2;++G){var tx=G?td:1-td;if(X=0|Math.min(Math.max(tp+G,0),s[1]),!isFinite(Y=tg<2?this._field[tv].get(Z,X):(this.intensity.get(Z,X)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(Y)){ty=!0;break r}var tb=tm*tx;ta[tg]+=tb*Y}}}if(ty){if(W>0){for(var t_=0;t_<5;++t_)tt.pop();H-=1}continue e}tt.push(ta[0],ta[1],tl[0],tl[1],ta[2]),H+=1}}ti.push(H)}this._contourOffsets[te]=tn,this._contourCounts[te]=ti}var tw=c.mallocFloat(tt.length);for(l=0;l<tt.length;++l)tw[l]=tt[l];this._contourBuffer.update(tw),c.freeFloat(tw)}},C.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var r=0;r<3;++r)c.freeFloat(this._field[r].data)},C.highlight=function(r){var n,i;if(!r)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(n=0;n<3;++n)this.enableHighlight[n]?this.highlightLevel[n]=r.level[n]:this.highlightLevel[n]=-1;for(i=this.snapToData?r.dataCoordinate:r.position,n=0;n<3;++n)i[n]-=this.objectOffset[n];if(this.enableDynamic[0]&&i[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&i[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&i[2]!==this.dynamicLevel[2]){for(var a=0,o=this.shape,s=c.mallocFloat(12*o[0]*o[1]),l=0;l<3;++l)if(this.enableDynamic[l]){this.dynamicLevel[l]=i[l];var u=(l+1)%3,f=(l+2)%3,h=this._field[l],p=this._field[u],y=this._field[f],g=d(h,i[l]),v=g.cells,m=g.positions;for(this._dynamicOffsets[l]=a,n=0;n<v.length;++n)for(var x=v[n],b=0;b<2;++b){var _=m[x[b]],w=+_[0],T=0|w,A=0|Math.min(T+1,o[0]),k=w-T,M=1-k,S=+_[1],E=0|S,I=0|Math.min(E+1,o[1]),L=S-E,C=1-L,O=M*C,D=M*L,P=k*C,B=k*L,R=O*p.get(T,E)+D*p.get(T,I)+P*p.get(A,E)+B*p.get(A,I),z=O*y.get(T,E)+D*y.get(T,I)+P*y.get(A,E)+B*y.get(A,I);if(isNaN(R)||isNaN(z)){b&&(a-=1);break}s[2*a+0]=R,s[2*a+1]=z,a+=1}this._dynamicCounts[l]=a-this._dynamicOffsets[l]}else this.dynamicLevel[l]=NaN,this._dynamicCounts[l]=0;this._dynamicBuffer.update(s.subarray(0,2*a)),c.freeFloat(s)}}},7766:function(r,n,i){var a=i(9618),o=i(5298),s=i(1888);r.exports=function(r){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||(l=[r.LINEAR,r.NEAREST_MIPMAP_LINEAR,r.LINEAR_MIPMAP_NEAREST,r.LINEAR_MIPMAP_NEAREST],c=[r.NEAREST,r.LINEAR,r.NEAREST_MIPMAP_NEAREST,r.NEAREST_MIPMAP_LINEAR,r.LINEAR_MIPMAP_NEAREST,r.LINEAR_MIPMAP_LINEAR],u=[r.REPEAT,r.CLAMP_TO_EDGE,r.MIRRORED_REPEAT]),"number"==typeof arguments[1])return m(r,arguments[1],arguments[2],arguments[3]||r.RGBA,arguments[4]||r.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(r,0|arguments[1][0],0|arguments[1][1],arguments[2]||r.RGBA,arguments[3]||r.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var n,i,p,y,x,b=arguments[1],_=f(b)?b:b.raw;if(_)return n=0|b.width,i=0|b.height,p=arguments[2]||r.RGBA,y=arguments[3]||r.UNSIGNED_BYTE,x=v(r),r.texImage2D(r.TEXTURE_2D,0,p,p,y,_),new d(r,x,n,i,p,y);if(b.shape&&b.data&&b.stride)return function(r,n){var i=n.dtype,l=n.shape.slice(),c=r.getParameter(r.MAX_TEXTURE_SIZE);if(l[0]<0||l[0]>c||l[1]<0||l[1]>c)throw Error("gl-texture2d: Invalid texture size");var u=g(l,n.stride.slice()),f=0;"float32"===i?f=r.FLOAT:"float64"===i?(f=r.FLOAT,u=!1,i="float32"):"uint8"===i?f=r.UNSIGNED_BYTE:(f=r.UNSIGNED_BYTE,u=!1,i="uint8");var p,y,m=0;if(2===l.length)m=r.LUMINANCE,l=[l[0],l[1],1],n=a(n.data,l,[n.stride[0],n.stride[1],1],n.offset);else{if(3!==l.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===l[2])m=r.ALPHA;else if(2===l[2])m=r.LUMINANCE_ALPHA;else if(3===l[2])m=r.RGB;else{if(4!==l[2])throw Error("gl-texture2d: Invalid shape for pixel coords");m=r.RGBA}}f!==r.FLOAT||r.getExtension("OES_texture_float")||(f=r.UNSIGNED_BYTE,u=!1);var x=n.size;if(u)p=0===n.offset&&n.data.length===x?n.data:n.data.subarray(n.offset,n.offset+x);else{var b=[l[2],l[2]*l[0],1],_=a(y=s.malloc(x,i),l,b,0);"float32"!==i&&"float64"!==i||f!==r.UNSIGNED_BYTE?o.assign(_,n):h(_,n),p=y.subarray(0,x)}var w=v(r);return r.texImage2D(r.TEXTURE_2D,0,m,l[0],l[1],0,m,f,p),u||s.free(y),new d(r,w,l[0],l[1],m,f)}(r,b)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,c=null,u=null;function f(r){return"undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&r instanceof ImageData}var h=function(r,n){o.muls(r,n,255)};function p(r,n,i){var a=r.gl,o=a.getParameter(a.MAX_TEXTURE_SIZE);if(n<0||n>o||i<0||i>o)throw Error("gl-texture2d: Invalid texture size");return r._shape=[n,i],r.bind(),a.texImage2D(a.TEXTURE_2D,0,r.format,n,i,0,r.format,r.type,null),r._mipLevels=[0],r}function d(r,n,i,a,o,s){this.gl=r,this.handle=n,this.format=o,this.type=s,this._shape=[i,a],this._mipLevels=[0],this._magFilter=r.NEAREST,this._minFilter=r.NEAREST,this._wrapS=r.CLAMP_TO_EDGE,this._wrapT=r.CLAMP_TO_EDGE,this._anisoSamples=1;var l=this,c=[this._wrapS,this._wrapT];Object.defineProperties(c,[{get:function(){return l._wrapS},set:function(r){return l.wrapS=r}},{get:function(){return l._wrapT},set:function(r){return l.wrapT=r}}]),this._wrapVector=c;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return l._shape[0]},set:function(r){return l.width=r}},{get:function(){return l._shape[1]},set:function(r){return l.height=r}}]),this._shapeVector=u}var y=d.prototype;function g(r,n){return 3===r.length?1===n[2]&&n[1]===r[0]*r[2]&&n[0]===r[2]:1===n[0]&&n[1]===r[0]}function v(r){var n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}function m(r,n,i,a,o){var s=r.getParameter(r.MAX_TEXTURE_SIZE);if(n<0||n>s||i<0||i>s)throw Error("gl-texture2d: Invalid texture shape");if(o===r.FLOAT&&!r.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var l=v(r);return r.texImage2D(r.TEXTURE_2D,0,a,n,i,0,a,o,null),new d(r,l,n,i,a,o)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(r){this.bind();var n=this.gl;if(this.type===n.FLOAT&&l.indexOf(r)>=0&&(n.getExtension("OES_texture_float_linear")||(r=n.NEAREST)),0>c.indexOf(r))throw Error("gl-texture2d: Unknown filter mode "+r);return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),this._minFilter=r}},magFilter:{get:function(){return this._magFilter},set:function(r){this.bind();var n=this.gl;if(this.type===n.FLOAT&&l.indexOf(r)>=0&&(n.getExtension("OES_texture_float_linear")||(r=n.NEAREST)),0>c.indexOf(r))throw Error("gl-texture2d: Unknown filter mode "+r);return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r),this._magFilter=r}},mipSamples:{get:function(){return this._anisoSamples},set:function(r){var n=this._anisoSamples;if(this._anisoSamples=0|Math.max(r,1),n!==this._anisoSamples){var i=this.gl.getExtension("EXT_texture_filter_anisotropic");i&&this.gl.texParameterf(this.gl.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(r){if(this.bind(),0>u.indexOf(r))throw Error("gl-texture2d: Unknown wrap mode "+r);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,r),this._wrapS=r}},wrapT:{get:function(){return this._wrapT},set:function(r){if(this.bind(),0>u.indexOf(r))throw Error("gl-texture2d: Unknown wrap mode "+r);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,r),this._wrapT=r}},wrap:{get:function(){return this._wrapVector},set:function(r){if(Array.isArray(r)||(r=[r,r]),2!==r.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var n=0;n<2;++n)if(0>u.indexOf(r[n]))throw Error("gl-texture2d: Unknown wrap mode "+r);this._wrapS=r[0],this._wrapT=r[1];var i=this.gl;return this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,this._wrapS),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,this._wrapT),r}},shape:{get:function(){return this._shapeVector},set:function(r){if(Array.isArray(r)){if(2!==r.length)throw Error("gl-texture2d: Invalid texture shape")}else r=[0|r,0|r];return p(this,0|r[0],0|r[1]),[0|r[0],0|r[1]]}},width:{get:function(){return this._shape[0]},set:function(r){return p(this,r|=0,this._shape[1]),r}},height:{get:function(){return this._shape[1]},set:function(r){return r|=0,p(this,this._shape[0],r),r}}}),y.bind=function(r){var n=this.gl;return void 0!==r&&n.activeTexture(n.TEXTURE0+(0|r)),n.bindTexture(n.TEXTURE_2D,this.handle),void 0!==r?0|r:n.getParameter(n.ACTIVE_TEXTURE)-n.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var r=Math.min(this._shape[0],this._shape[1]),n=0;r>0;++n,r>>>=1)0>this._mipLevels.indexOf(n)&&this._mipLevels.push(n)},y.setPixels=function(r,n,i,l){var c=this.gl;this.bind(),Array.isArray(n)?(l=i,i=0|n[1],n=0|n[0]):(n=n||0,i=i||0),l=l||0;var u=f(r)?r:r.raw;if(u)0>this._mipLevels.indexOf(l)?(c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,this.type,u),this._mipLevels.push(l)):c.texSubImage2D(c.TEXTURE_2D,l,n,i,this.format,this.type,u);else{if(!(r.shape&&r.stride&&r.data))throw Error("gl-texture2d: Unsupported data type");if(r.shape.length<2||n+r.shape[1]>this._shape[1]>>>l||i+r.shape[0]>this._shape[0]>>>l||n<0||i<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");!function(r,n,i,l,c,u,f,p){var d=p.dtype,y=p.shape.slice();if(y.length<2||y.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=0,m=0,x=g(y,p.stride.slice());if("float32"===d?v=r.FLOAT:"float64"===d?(v=r.FLOAT,x=!1,d="float32"):"uint8"===d?v=r.UNSIGNED_BYTE:(v=r.UNSIGNED_BYTE,x=!1,d="uint8"),2===y.length)m=r.LUMINANCE,y=[y[0],y[1],1],p=a(p.data,y,[p.stride[0],p.stride[1],1],p.offset);else{if(3!==y.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===y[2])m=r.ALPHA;else if(2===y[2])m=r.LUMINANCE_ALPHA;else if(3===y[2])m=r.RGB;else{if(4!==y[2])throw Error("gl-texture2d: Invalid shape for pixel coords");m=r.RGBA}y[2]}if(m!==r.LUMINANCE&&m!==r.ALPHA||c!==r.LUMINANCE&&c!==r.ALPHA||(m=c),m!==c)throw Error("gl-texture2d: Incompatible texture format for setPixels");var b=p.size,_=0>f.indexOf(l);if(_&&f.push(l),v===u&&x)0===p.offset&&p.data.length===b?_?r.texImage2D(r.TEXTURE_2D,l,c,y[0],y[1],0,c,u,p.data):r.texSubImage2D(r.TEXTURE_2D,l,n,i,y[0],y[1],c,u,p.data):_?r.texImage2D(r.TEXTURE_2D,l,c,y[0],y[1],0,c,u,p.data.subarray(p.offset,p.offset+b)):r.texSubImage2D(r.TEXTURE_2D,l,n,i,y[0],y[1],c,u,p.data.subarray(p.offset,p.offset+b));else{var w,T=a(w=u===r.FLOAT?s.mallocFloat32(b):s.mallocUint8(b),y,[y[2],y[2]*y[0],1]);v===r.FLOAT&&u===r.UNSIGNED_BYTE?h(T,p):o.assign(T,p),_?r.texImage2D(r.TEXTURE_2D,l,c,y[0],y[1],0,c,u,w.subarray(0,b)):r.texSubImage2D(r.TEXTURE_2D,l,n,i,y[0],y[1],c,u,w.subarray(0,b)),u===r.FLOAT?s.freeFloat32(w):s.freeUint8(w)}}(c,n,i,l,this.format,this.type,this._mipLevels,r)}}},1433:function(r){r.exports=function(r,n,i){n?n.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);var a=0|r.getParameter(r.MAX_VERTEX_ATTRIBS);if(i){if(i.length>a)throw Error("gl-vao: Too many vertex attributes");for(var o=0;o<i.length;++o){var s=i[o];if(s.buffer){var l=s.buffer,c=s.size||4,u=s.type||r.FLOAT,f=!!s.normalized,h=s.stride||0,p=s.offset||0;l.bind(),r.enableVertexAttribArray(o),r.vertexAttribPointer(o,c,u,f,h,p)}else{if("number"==typeof s)r.vertexAttrib1f(o,s);else if(1===s.length)r.vertexAttrib1f(o,s[0]);else if(2===s.length)r.vertexAttrib2f(o,s[0],s[1]);else if(3===s.length)r.vertexAttrib3f(o,s[0],s[1],s[2]);else{if(4!==s.length)throw Error("gl-vao: Invalid vertex attribute");r.vertexAttrib4f(o,s[0],s[1],s[2],s[3])}r.disableVertexAttribArray(o)}}for(;o<a;++o)r.disableVertexAttribArray(o)}else for(r.bindBuffer(r.ARRAY_BUFFER,null),o=0;o<a;++o)r.disableVertexAttribArray(o)}},870:function(r,n,i){var a=i(1433);function o(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}o.prototype.bind=function(){a(this.gl,this._elements,this._attributes)},o.prototype.update=function(r,n,i){this._elements=n,this._attributes=r,this._elementsType=i||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(r,n,i){i=i||0;var a=this.gl;this._elements?a.drawElements(r,n,this._elementsType,i):a.drawArrays(r,i,n)},r.exports=function(r){return new o(r)}},7518:function(r,n,i){var a=i(1433);function o(r,n,i,a,o,s){this.location=r,this.dimension=n,this.a=i,this.b=a,this.c=o,this.d=s}function s(r,n,i){this.gl=r,this._ext=n,this.handle=i,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}o.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},s.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},s.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},s.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},s.prototype.update=function(r,n,i){if(this.bind(),a(this.gl,n,r),this.unbind(),this._attribs.length=0,r)for(var s=0;s<r.length;++s){var l=r[s];"number"==typeof l?this._attribs.push(new o(s,1,l)):Array.isArray(l)&&this._attribs.push(new o(s,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!n,this._elementsType=i||this.gl.UNSIGNED_SHORT},s.prototype.draw=function(r,n,i){i=i||0;var a=this.gl;this._useElements?a.drawElements(r,n,this._elementsType,i):a.drawArrays(r,i,n)},r.exports=function(r,n){return new s(r,n,n.createVertexArrayOES())}},8116:function(r,n,i){var a=i(7518),o=i(870);function s(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}r.exports=function(r,n,i,l){var c,u=r.createVertexArray?new s(r):r.getExtension("OES_vertex_array_object");return(c=u?a(r,u):o(r)).update(n,i,l),c}},5632:function(r){r.exports=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}},8192:function(r,n,i){r.exports=function(r,n){var i=a(r[0],r[1],r[2]),l=a(n[0],n[1],n[2]);o(i,i),o(l,l);var c=s(i,l);return c>1?0:Math.acos(c)};var a=i(2825),o=i(3536),s=i(244)},9226:function(r){r.exports=function(r,n){return r[0]=Math.ceil(n[0]),r[1]=Math.ceil(n[1]),r[2]=Math.ceil(n[2]),r}},3126:function(r){r.exports=function(r){var n=new Float32Array(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}},3990:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}},1091:function(r){r.exports=function(){var r=new Float32Array(3);return r[0]=0,r[1]=0,r[2]=0,r}},5911:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],c=i[1],u=i[2];return r[0]=o*u-s*c,r[1]=s*l-a*u,r[2]=a*c-o*l,r}},5455:function(r,n,i){r.exports=i(7056)},7056:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return Math.sqrt(i*i+a*a+o*o)}},4008:function(r,n,i){r.exports=i(6690)},6690:function(r){r.exports=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r}},244:function(r){r.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}},2613:function(r){r.exports=1e-6},9922:function(r,n,i){r.exports=function(r,n){var i=r[0],o=r[1],s=r[2],l=n[0],c=n[1],u=n[2];return Math.abs(i-l)<=a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=a*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-u)<=a*Math.max(1,Math.abs(s),Math.abs(u))};var a=i(2613)},9265:function(r){r.exports=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]}},2681:function(r){r.exports=function(r,n){return r[0]=Math.floor(n[0]),r[1]=Math.floor(n[1]),r[2]=Math.floor(n[2]),r}},5137:function(r,n,i){r.exports=function(r,n,i,o,s,l){var c,u;for(n||(n=3),i||(i=0),u=o?Math.min(o*n+i,r.length):r.length,c=i;c<u;c+=n)a[0]=r[c],a[1]=r[c+1],a[2]=r[c+2],s(a,a,l),r[c]=a[0],r[c+1]=a[1],r[c+2]=a[2];return r};var a=i(1091)()},2825:function(r){r.exports=function(r,n,i){var a=new Float32Array(3);return a[0]=r,a[1]=n,a[2]=i,a}},2931:function(r,n,i){r.exports={EPSILON:i(2613),create:i(1091),clone:i(3126),angle:i(8192),fromValues:i(2825),copy:i(3990),set:i(1463),equals:i(9922),exactEquals:i(9265),add:i(5632),subtract:i(6843),sub:i(2229),multiply:i(5847),mul:i(4505),divide:i(6690),div:i(4008),min:i(8107),max:i(7417),floor:i(2681),ceil:i(9226),round:i(2447),scale:i(6621),scaleAndAdd:i(8489),distance:i(7056),dist:i(5455),squaredDistance:i(2953),sqrDist:i(6141),length:i(1387),len:i(868),squaredLength:i(3066),sqrLen:i(5486),negate:i(5093),inverse:i(811),normalize:i(3536),dot:i(244),cross:i(5911),lerp:i(6658),random:i(7636),transformMat4:i(5673),transformMat3:i(492),transformQuat:i(264),rotateX:i(6894),rotateY:i(109),rotateZ:i(8692),forEach:i(5137)}},811:function(r){r.exports=function(r,n){return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r}},868:function(r,n,i){r.exports=i(1387)},1387:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2];return Math.sqrt(n*n+i*i+a*a)}},6658:function(r){r.exports=function(r,n,i,a){var o=n[0],s=n[1],l=n[2];return r[0]=o+a*(i[0]-o),r[1]=s+a*(i[1]-s),r[2]=l+a*(i[2]-l),r}},7417:function(r){r.exports=function(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r}},8107:function(r){r.exports=function(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r}},4505:function(r,n,i){r.exports=i(5847)},5847:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r}},5093:function(r){r.exports=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r}},3536:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s),r}},7636:function(r){r.exports=function(r,n){var i=2*Math.random()*Math.PI,a=2*Math.random()-1,o=Math.sqrt(1-a*a)*(n=n||1);return r[0]=Math.cos(i)*o,r[1]=Math.sin(i)*o,r[2]=a*n,r}},6894:function(r){r.exports=function(r,n,i,a){var o=i[1],s=i[2],l=n[1]-o,c=n[2]-s,u=Math.sin(a),f=Math.cos(a);return r[0]=n[0],r[1]=o+l*f-c*u,r[2]=s+l*u+c*f,r}},109:function(r){r.exports=function(r,n,i,a){var o=i[0],s=i[2],l=n[0]-o,c=n[2]-s,u=Math.sin(a),f=Math.cos(a);return r[0]=o+c*u+l*f,r[1]=n[1],r[2]=s+c*f-l*u,r}},8692:function(r){r.exports=function(r,n,i,a){var o=i[0],s=i[1],l=n[0]-o,c=n[1]-s,u=Math.sin(a),f=Math.cos(a);return r[0]=o+l*f-c*u,r[1]=s+l*u+c*f,r[2]=n[2],r}},2447:function(r){r.exports=function(r,n){return r[0]=Math.round(n[0]),r[1]=Math.round(n[1]),r[2]=Math.round(n[2]),r}},6621:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}},8489:function(r){r.exports=function(r,n,i,a){return r[0]=n[0]+i[0]*a,r[1]=n[1]+i[1]*a,r[2]=n[2]+i[2]*a,r}},1463:function(r){r.exports=function(r,n,i,a){return r[0]=n,r[1]=i,r[2]=a,r}},6141:function(r,n,i){r.exports=i(2953)},5486:function(r,n,i){r.exports=i(3066)},2953:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return i*i+a*a+o*o}},3066:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2];return n*n+i*i+a*a}},2229:function(r,n,i){r.exports=i(6843)},6843:function(r){r.exports=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}},492:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2];return r[0]=a*i[0]+o*i[3]+s*i[6],r[1]=a*i[1]+o*i[4]+s*i[7],r[2]=a*i[2]+o*i[5]+s*i[8],r}},5673:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[3]*a+i[7]*o+i[11]*s+i[15];return l=l||1,r[0]=(i[0]*a+i[4]*o+i[8]*s+i[12])/l,r[1]=(i[1]*a+i[5]*o+i[9]*s+i[13])/l,r[2]=(i[2]*a+i[6]*o+i[10]*s+i[14])/l,r}},264:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],c=i[1],u=i[2],f=i[3],h=f*a+c*s-u*o,p=f*o+u*a-l*s,d=f*s+l*o-c*a,y=-l*a-c*o-u*s;return r[0]=h*f+-(y*l)+-(p*u)- -(d*c),r[1]=p*f+-(y*c)+-(d*l)- -(h*u),r[2]=d*f+-(y*u)+-(h*c)- -(p*l),r}},4361:function(r){r.exports=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r[3]=n[3]+i[3],r}},2335:function(r){r.exports=function(r){var n=new Float32Array(4);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}},2933:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}},7536:function(r){r.exports=function(){var r=new Float32Array(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}},4691:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(i*i+a*a+o*o+s*s)}},1373:function(r){r.exports=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r[3]=n[3]/i[3],r}},3750:function(r){r.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]}},3390:function(r){r.exports=function(r,n,i,a){var o=new Float32Array(4);return o[0]=r,o[1]=n,o[2]=i,o[3]=a,o}},9970:function(r,n,i){r.exports={create:i(7536),clone:i(2335),fromValues:i(3390),copy:i(2933),set:i(4578),add:i(4361),subtract:i(6860),multiply:i(3576),divide:i(1373),min:i(2334),max:i(160),scale:i(9288),scaleAndAdd:i(4844),distance:i(4691),squaredDistance:i(7960),length:i(6808),squaredLength:i(483),negate:i(1498),inverse:i(4494),normalize:i(5177),dot:i(3750),lerp:i(2573),random:i(9131),transformMat4:i(5352),transformQuat:i(4041)}},4494:function(r){r.exports=function(r,n){return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r[3]=1/n[3],r}},6808:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3];return Math.sqrt(n*n+i*i+a*a+o*o)}},2573:function(r){r.exports=function(r,n,i,a){var o=n[0],s=n[1],l=n[2],c=n[3];return r[0]=o+a*(i[0]-o),r[1]=s+a*(i[1]-s),r[2]=l+a*(i[2]-l),r[3]=c+a*(i[3]-c),r}},160:function(r){r.exports=function(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r[3]=Math.max(n[3],i[3]),r}},2334:function(r){r.exports=function(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r[3]=Math.min(n[3],i[3]),r}},3576:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r[3]=n[3]*i[3],r}},1498:function(r){r.exports=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=-n[3],r}},5177:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i*i+a*a+o*o+s*s;return l>0&&(l=1/Math.sqrt(l),r[0]=i*l,r[1]=a*l,r[2]=o*l,r[3]=s*l),r}},9131:function(r,n,i){var a=i(5177),o=i(9288);r.exports=function(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),a(r,r),o(r,r,n),r}},9288:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r}},4844:function(r){r.exports=function(r,n,i,a){return r[0]=n[0]+i[0]*a,r[1]=n[1]+i[1]*a,r[2]=n[2]+i[2]*a,r[3]=n[3]+i[3]*a,r}},4578:function(r){r.exports=function(r,n,i,a,o){return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r}},7960:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2],s=n[3]-r[3];return i*i+a*a+o*o+s*s}},483:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3];return n*n+i*i+a*a+o*o}},6860:function(r){r.exports=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r[3]=n[3]-i[3],r}},5352:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3];return r[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,r[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,r[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,r[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,r}},4041:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],c=i[1],u=i[2],f=i[3],h=f*a+c*s-u*o,p=f*o+u*a-l*s,d=f*s+l*o-c*a,y=-l*a-c*o-u*s;return r[0]=h*f+-(y*l)+-(p*u)- -(d*c),r[1]=p*f+-(y*c)+-(d*l)- -(h*u),r[2]=d*f+-(y*u)+-(h*c)- -(p*l),r[3]=n[3],r}},1848:function(r,n,i){var a=i(4905),o=i(6468);r.exports=function(r){for(var n=Array.isArray(r)?r:a(r),i=0;i<n.length;i++){var s=n[i];if("preprocessor"===s.type){var l=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(l&&l[2]){var c=l[1],u=l[2];return(c?o(u):u).trim()}}}}},5874:function(r,n,i){r.exports=function(r){var n,i,k,M=0,S=0,E=u,I=[],L=[],C=1,O=0,D=0,P=!1,B=!1,R="",z=s,F=a;"300 es"===(r=r||{}).version&&(z=c,F=l);var N={},U={};for(M=0;M<z.length;M++)N[z[M]]=!0;for(M=0;M<F.length;M++)U[F[M]]=!0;return function(r){return L=[],null!==r?function(r){var a;for(M=0,r.toString&&(r=r.toString()),R+=r.replace(/\r\n/g,"\n"),k=R.length;n=R[M],M<k;){switch(a=M,E){case h:"/"===n&&"*"===i?(I.push(n),j(I.join("")),E=u):(I.push(n),i=n),M+=1;break;case p:case d:M="\r"!==n&&"\n"!==n||"\\"===i?(I.push(n),i=n,M+1):(j(I.join("")),E=u,M);break;case y:M=function(){if("."===i&&/\d/.test(n))return E=v,M;if("/"===i&&"*"===n)return E=h,M;if("/"===i&&"/"===n)return E=p,M;if("."===n&&I.length){for(;V(I););return E=v,M}if(";"===n||")"===n||"("===n){if(I.length)for(;V(I););return j(n),E=u,M+1}var r=2===I.length&&"="!==n;if(/[\w_\d\s]/.test(n)||r){for(;V(I););return E=u,M}return I.push(n),i=n,M+1}();break;case g:M="."===n||/[eE]/.test(n)?(I.push(n),E=v,i=n,M+1):"x"===n&&1===I.length&&"0"===I[0]?(E=T,I.push(n),i=n,M+1):/[^\d]/.test(n)?(j(I.join("")),E=u,M):(I.push(n),i=n,M+1);break;case T:M=/[^a-fA-F0-9]/.test(n)?(j(I.join("")),E=u,M):(I.push(n),i=n,M+1);break;case v:"f"===n&&(I.push(n),i=n,M+=1),M=/[eE]/.test(n)?(I.push(n),i=n,M+1):("-"!==n&&"+"!==n||!/[eE]/.test(i))&&/[^\d]/.test(n)?(j(I.join("")),E=u,M):(I.push(n),i=n,M+1);break;case f:M=function(){if(/[^\d\w_]/.test(n)){var r=I.join("");return E=U[r]?b:N[r]?x:m,j(I.join("")),E=u,M}return I.push(n),i=n,M+1}();break;case _:M=/[^\s]/g.test(n)?(j(I.join("")),E=u,M):(I.push(n),i=n,M+1);break;case u:I=I.length?[]:I,M="/"===i&&"*"===n?(D=S+M-1,E=h,i=n,M+1):"/"===i&&"/"===n?(D=S+M-1,E=p,i=n,M+1):("#"===n?(E=d,D=S+M):/\s/.test(n)?(E=_,D=S+M):(P=/\d/.test(n),B=/[^\w_]/.test(n),D=S+M,E=P?g:B?y:f),M)}a!==M&&("\n"===R[a]?(O=0,++C):++O)}return S+=M,R=R.slice(M),L}(r):(I.length&&j(I.join("")),E=w,j("(eof)"),L)};function j(r){r.length&&L.push({type:A[E],data:r,position:D,line:C,column:O})}function V(r){for(var n,i,a=0;;){if(n=o.indexOf(r.slice(0,r.length+a).join("")),i=o[n],-1===n){if(a--+r.length>0)continue;i=r.slice(0,1).join("")}return j(i),D+=i.length,(I=I.slice(i.length)).length}}};var a=i(620),o=i(7827),s=i(6852),l=i(7932),c=i(3508),u=999,f=9999,h=0,p=1,d=2,y=3,g=4,v=5,m=6,x=7,b=8,_=9,w=10,T=11,A=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(r,n,i){var a=i(6852);a=a.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),r.exports=a.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(r){r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(r,n,i){var a=i(620);r.exports=a.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(r){r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(r){r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(r,n,i){var a=i(5874);r.exports=function(r,n){var i=a(n),o=[];return(o=o.concat(i(r))).concat(i(null))}},3236:function(r){r.exports=function(r){"string"==typeof r&&(r=[r]);for(var n=[].slice.call(arguments,1),i=[],a=0;a<r.length-1;a++)i.push(r[a],n[a]||"");return i.push(r[a]),i.join("")}},7520:function(r,n,i){var a=i(9507);r.exports=a&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(n){r=!1}return r}()},3778:function(r,n){n.read=function(r,n,i,a,o){var s,l,c=8*o-a-1,u=(1<<c)-1,f=u>>1,h=-7,p=i?o-1:0,d=i?-1:1,y=r[n+p];for(p+=d,s=y&(1<<-h)-1,y>>=-h,h+=c;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===u)return l?NaN:1/0*(y?-1:1);l+=Math.pow(2,a),s-=f}return(y?-1:1)*l*Math.pow(2,s-a)},n.write=function(r,n,i,a,o,s){var l,c,u,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,y=a?0:s-1,g=a?1:-1,v=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(c=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-l))<1&&(l--,u*=2),(n+=l+p>=1?d/u:d*Math.pow(2,1-p))*u>=2&&(l++,u/=2),l+p>=h?(c=0,l=h):l+p>=1?(c=(n*u-1)*Math.pow(2,o),l+=p):(c=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+y]=255&c,y+=g,c/=256,o-=8);for(l=l<<o|c,f+=o;f>0;r[i+y]=255&l,y+=g,l/=256,f-=8);r[i+y-g]|=128*v}},8954:function(r,n,i){r.exports=function(r,n){var i=r.length;if(0===i)throw Error("Must have at least d+1 points");var o=r[0].length;if(i<=o)throw Error("Must input at least d+1 points");var l=r.slice(0,o+1),c=a.apply(void 0,l);if(0===c)throw Error("Input not in general position");for(var u=Array(o+1),h=0;h<=o;++h)u[h]=h;c<0&&(u[0]=1,u[1]=0);var p=new s(u,Array(o+1),!1),d=p.adjacent,y=Array(o+2);for(h=0;h<=o;++h){for(var g=u.slice(),v=0;v<=o;++v)v===h&&(g[v]=-1);var m=g[0];g[0]=g[1],g[1]=m;var x=new s(g,Array(o+1),!0);d[h]=x,y[h]=x}for(y[o+1]=p,h=0;h<=o;++h){g=d[h].vertices;var b=d[h].adjacent;for(v=0;v<=o;++v){var _=g[v];if(_<0)b[v]=p;else for(var w=0;w<=o;++w)0>d[w].vertices.indexOf(_)&&(b[v]=d[w])}}var T=new f(o,l,y),A=!!n;for(h=o+1;h<i;++h)T.insert(r[h],A);return T.boundary()};var a=i(3250),o=i(6803).Fw;function s(r,n,i){this.vertices=r,this.adjacent=n,this.boundary=i,this.lastVisited=-1}function l(r,n,i){this.vertices=r,this.cell=n,this.index=i}function c(r,n){return o(r.vertices,n.vertices)}s.prototype.flip=function(){var r=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=r;var n=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=n};var u=[];function f(r,n,i){this.dimension=r,this.vertices=n,this.simplices=i,this.interior=i.filter(function(r){return!r.boundary}),this.tuple=Array(r+1);for(var o,s=0;s<=r;++s)this.tuple[s]=this.vertices[s];var l,c=u[r];c||(c=u[r]=((l=a[r+1])||(l=a),o=l,function(){var r=this.tuple;return o.apply(this,r)})),this.orient=c}var h=f.prototype;h.handleBoundaryDegeneracy=function(r,n){var i=this.dimension,a=this.vertices.length-1,o=this.tuple,s=this.vertices,l=[r];for(r.lastVisited=-a;l.length>0;)for(var c=(r=l.pop()).adjacent,u=0;u<=i;++u){var f=c[u];if(f.boundary&&!(f.lastVisited<=-a)){for(var h=f.vertices,p=0;p<=i;++p){var d=h[p];o[p]=d<0?n:s[d]}var y=this.orient();if(y>0)return f;f.lastVisited=-a,0===y&&l.push(f)}}return null},h.walk=function(r,n){var i=this.vertices.length-1,a=this.dimension,o=this.vertices,s=this.tuple,l=n?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[l];e:for(;!c.boundary;){for(var u=c.vertices,f=c.adjacent,h=0;h<=a;++h)s[h]=o[u[h]];for(c.lastVisited=i,h=0;h<=a;++h){var p=f[h];if(!(p.lastVisited>=i)){var d=s[h];s[h]=r;var y=this.orient();if(s[h]=d,y<0){c=p;continue e}p.boundary?p.lastVisited=-i:p.lastVisited=i}}return}return c},h.addPeaks=function(r,n){var i=this.vertices.length-1,a=this.dimension,o=this.vertices,u=this.tuple,f=this.interior,h=this.simplices,p=[n];n.lastVisited=i,n.vertices[n.vertices.indexOf(-1)]=i,n.boundary=!1,f.push(n);for(var d=[];p.length>0;){var y=(n=p.pop()).vertices,g=n.adjacent,v=y.indexOf(i);if(!(v<0)){for(var m=0;m<=a;++m)if(m!==v){var x=g[m];if(x.boundary&&!(x.lastVisited>=i)){var b=x.vertices;if(x.lastVisited!==-i){for(var _=0,w=0;w<=a;++w)b[w]<0?(_=w,u[w]=r):u[w]=o[b[w]];if(this.orient()>0){b[_]=i,x.boundary=!1,f.push(x),p.push(x),x.lastVisited=i;continue}x.lastVisited=-i}var T=x.adjacent,A=y.slice(),k=g.slice(),M=new s(A,k,!0);h.push(M);var S=T.indexOf(n);if(!(S<0))for(T[S]=M,k[v]=x,A[m]=-1,k[m]=n,g[m]=M,M.flip(),w=0;w<=a;++w){var E=A[w];if(!(E<0||E===i)){for(var I=Array(a-1),L=0,C=0;C<=a;++C){var O=A[C];O<0||C===w||(I[L++]=O)}d.push(new l(I,M,w))}}}}}}for(d.sort(c),m=0;m+1<d.length;m+=2){var D=d[m],P=d[m+1],B=D.index,R=P.index;B<0||R<0||(D.cell.adjacent[D.index]=P.cell,P.cell.adjacent[P.index]=D.cell)}},h.insert=function(r,n){var i=this.vertices;i.push(r);var a=this.walk(r,n);if(a){for(var o=this.dimension,s=this.tuple,l=0;l<=o;++l){var c=a.vertices[l];s[l]=c<0?r:i[c]}var u=this.orient(s);u<0||(0!==u||(a=this.handleBoundaryDegeneracy(a,r)))&&this.addPeaks(r,a)}},h.boundary=function(){for(var r=this.dimension,n=[],i=this.simplices,a=i.length,o=0;o<a;++o){var s=i[o];if(s.boundary){for(var l=Array(r),c=s.vertices,u=0,f=0,h=0;h<=r;++h)c[h]>=0?l[u++]=c[h]:f=1&h;if(f===(1&r)){var p=l[0];l[0]=l[1],l[1]=p}n.push(l)}}return n}},3352:function(r,n,i){var a=i(2478);function o(r,n,i,a,o){this.mid=r,this.left=n,this.right=i,this.leftPoints=a,this.rightPoints=o,this.count=(n?n.count:0)+(i?i.count:0)+a.length}r.exports=function(r){return new x(r&&0!==r.length?m(r):null)};var s=o.prototype;function l(r,n){r.mid=n.mid,r.left=n.left,r.right=n.right,r.leftPoints=n.leftPoints,r.rightPoints=n.rightPoints,r.count=n.count}function c(r,n){var i=m(n);r.mid=i.mid,r.left=i.left,r.right=i.right,r.leftPoints=i.leftPoints,r.rightPoints=i.rightPoints,r.count=i.count}function u(r,n){var i=r.intervals([]);i.push(n),c(r,i)}function f(r,n){var i=r.intervals([]),a=i.indexOf(n);return a<0?0:(i.splice(a,1),c(r,i),1)}function h(r,n,i){for(var a=0;a<r.length&&r[a][0]<=n;++a){var o=i(r[a]);if(o)return o}}function p(r,n,i){for(var a=r.length-1;a>=0&&r[a][1]>=n;--a){var o=i(r[a]);if(o)return o}}function d(r,n){for(var i=0;i<r.length;++i){var a=n(r[i]);if(a)return a}}function y(r,n){return r-n}function g(r,n){return r[0]-n[0]||r[1]-n[1]}function v(r,n){return r[1]-n[1]||r[0]-n[0]}function m(r){if(0===r.length)return null;for(var n=[],i=0;i<r.length;++i)n.push(r[i][0],r[i][1]);n.sort(y);var a=n[n.length>>1],s=[],l=[],c=[];for(i=0;i<r.length;++i){var u=r[i];u[1]<a?s.push(u):a<u[0]?l.push(u):c.push(u)}var f=c.slice();return c.sort(g),f.sort(v),new o(a,m(s),m(l),c,f)}function x(r){this.root=r}s.intervals=function(r){return r.push.apply(r,this.leftPoints),this.left&&this.left.intervals(r),this.right&&this.right.intervals(r),r},s.insert=function(r){var n=this.count-this.leftPoints.length;if(this.count+=1,r[1]<this.mid)this.left?4*(this.left.count+1)>3*(n+1)?u(this,r):this.left.insert(r):this.left=m([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(n+1)?u(this,r):this.right.insert(r):this.right=m([r]);else{var i=a.ge(this.leftPoints,r,g),o=a.ge(this.rightPoints,r,v);this.leftPoints.splice(i,0,r),this.rightPoints.splice(o,0,r)}},s.remove=function(r){var n=this.count-this.leftPoints;if(r[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(n-1)?f(this,r):2===(c=this.left.remove(r))?(this.left=null,this.count-=1,1):(1===c&&(this.count-=1),c):0;if(r[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(n-1)?f(this,r):2===(c=this.right.remove(r))?(this.right=null,this.count-=1,1):(1===c&&(this.count-=1),c):0;if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){for(var i=this,o=this.left;o.right;)i=o,o=o.right;if(i===this)o.right=this.right;else{var s=this.left,c=this.right;i.count-=o.count,i.right=o.left,o.left=s,o.right=c}l(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return 1}for(s=a.ge(this.leftPoints,r,g);s<this.leftPoints.length&&this.leftPoints[s][0]===r[0];++s)if(this.leftPoints[s]===r){for(this.count-=1,this.leftPoints.splice(s,1),c=a.ge(this.rightPoints,r,v);c<this.rightPoints.length&&this.rightPoints[c][1]===r[1];++c)if(this.rightPoints[c]===r)return this.rightPoints.splice(c,1),1}return 0},s.queryPoint=function(r,n){var i;return r<this.mid?this.left&&(i=this.left.queryPoint(r,n))?i:h(this.leftPoints,r,n):r>this.mid?this.right&&(i=this.right.queryPoint(r,n))?i:p(this.rightPoints,r,n):d(this.leftPoints,n)},s.queryInterval=function(r,n,i){var a;return r<this.mid&&this.left&&(a=this.left.queryInterval(r,n,i))||n>this.mid&&this.right&&(a=this.right.queryInterval(r,n,i))?a:n<this.mid?h(this.leftPoints,n,i):r>this.mid?p(this.rightPoints,r,i):d(this.leftPoints,i)};var b=x.prototype;b.insert=function(r){this.root?this.root.insert(r):this.root=new o(r[0],null,null,[r],[r])},b.remove=function(r){if(this.root){var n=this.root.remove(r);return 2===n&&(this.root=null),0!==n}return!1},b.queryPoint=function(r,n){if(this.root)return this.root.queryPoint(r,n)},b.queryInterval=function(r,n,i){if(r<=n&&this.root)return this.root.queryInterval(r,n,i)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(r){r.exports=function(r){for(var n=Array(r),i=0;i<r;++i)n[i]=i;return n}},9507:function(r){r.exports=!0},7163:function(r){function n(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}r.exports=function(r){return null!=r&&(n(r)||"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&n(r.slice(0,0))||!!r._isBuffer)}},5219:function(r){r.exports=function(r){for(var n,i=r.length,a=0;a<i;a++)if(((n=r.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},395:function(r){r.exports=function(r,n,i){return r*(1-i)+n*i}},2652:function(r,n,i){var a=i(4335),o=i(6864),s=i(1903),l=i(9921),c=i(7608),u=i(5665),f={length:i(1387),normalize:i(3536),dot:i(244),cross:i(5911)},h=o(),p=o(),d=[0,0,0,0],y=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function v(r,n,i,a,o){r[0]=n[0]*a+i[0]*o,r[1]=n[1]*a+i[1]*o,r[2]=n[2]*a+i[2]*o}r.exports=function(r,n,i,o,m,x){if(n||(n=[0,0,0]),i||(i=[0,0,0]),o||(o=[0,0,0]),m||(m=[0,0,0,1]),x||(x=[0,0,0,1]),!a(h,r)||(s(p,h),p[3]=0,p[7]=0,p[11]=0,p[15]=1,Math.abs(1e-8>l(p))))return!1;var b,_,w,T,A,k=h[3],M=h[7],S=h[11],E=h[12],I=h[13],L=h[14],C=h[15];if(0!==k||0!==M||0!==S){if(d[0]=k,d[1]=M,d[2]=S,d[3]=C,!c(p,p))return!1;u(p,p),b=m,_=d[0],w=d[1],T=d[2],A=d[3],b[0]=p[0]*_+p[4]*w+p[8]*T+p[12]*A,b[1]=p[1]*_+p[5]*w+p[9]*T+p[13]*A,b[2]=p[2]*_+p[6]*w+p[10]*T+p[14]*A,b[3]=p[3]*_+p[7]*w+p[11]*T+p[15]*A}else m[0]=m[1]=m[2]=0,m[3]=1;if(n[0]=E,n[1]=I,n[2]=L,y[0][0]=h[0],y[0][1]=h[1],y[0][2]=h[2],y[1][0]=h[4],y[1][1]=h[5],y[1][2]=h[6],y[2][0]=h[8],y[2][1]=h[9],y[2][2]=h[10],i[0]=f.length(y[0]),f.normalize(y[0],y[0]),o[0]=f.dot(y[0],y[1]),v(y[1],y[1],y[0],1,-o[0]),i[1]=f.length(y[1]),f.normalize(y[1],y[1]),o[0]/=i[1],o[1]=f.dot(y[0],y[2]),v(y[2],y[2],y[0],1,-o[1]),o[2]=f.dot(y[1],y[2]),v(y[2],y[2],y[1],1,-o[2]),i[2]=f.length(y[2]),f.normalize(y[2],y[2]),o[1]/=i[2],o[2]/=i[2],f.cross(g,y[1],y[2]),0>f.dot(y[0],g))for(var O=0;O<3;O++)i[O]*=-1,y[O][0]*=-1,y[O][1]*=-1,y[O][2]*=-1;return x[0]=.5*Math.sqrt(Math.max(1+y[0][0]-y[1][1]-y[2][2],0)),x[1]=.5*Math.sqrt(Math.max(1-y[0][0]+y[1][1]-y[2][2],0)),x[2]=.5*Math.sqrt(Math.max(1-y[0][0]-y[1][1]+y[2][2],0)),x[3]=.5*Math.sqrt(Math.max(1+y[0][0]+y[1][1]+y[2][2],0)),y[2][1]>y[1][2]&&(x[0]=-x[0]),y[0][2]>y[2][0]&&(x[1]=-x[1]),y[1][0]>y[0][1]&&(x[2]=-x[2]),!0}},4335:function(r){r.exports=function(r,n){var i=n[15];if(0===i)return!1;for(var a=1/i,o=0;o<16;o++)r[o]=n[o]*a;return!0}},7442:function(r,n,i){var a=i(6658),o=i(7182),s=i(2652),l=i(9921),c=i(8648),u=p(),f=p(),h=p();function p(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(r){return[r||0,r||0,r||0]}r.exports=function(r,n,i,p){if(0===l(n)||0===l(i))return!1;var d=s(n,u.translate,u.scale,u.skew,u.perspective,u.quaternion),y=s(i,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!d||!y||(a(h.translate,u.translate,f.translate,p),a(h.skew,u.skew,f.skew,p),a(h.scale,u.scale,f.scale,p),a(h.perspective,u.perspective,f.perspective,p),c(h.quaternion,u.quaternion,f.quaternion,p),o(r,h.translate,h.scale,h.skew,h.perspective,h.quaternion),0))}},7182:function(r,n,i){var a={identity:i(7894),translate:i(7656),multiply:i(6760),create:i(6864),scale:i(2504),fromRotationTranslation:i(6743)},o=(a.create(),a.create());r.exports=function(r,n,i,s,l,c){return a.identity(r),a.fromRotationTranslation(r,c,n),r[3]=l[0],r[7]=l[1],r[11]=l[2],r[15]=l[3],a.identity(o),0!==s[2]&&(o[9]=s[2],a.multiply(r,r,o)),0!==s[1]&&(o[9]=0,o[8]=s[1],a.multiply(r,r,o)),0!==s[0]&&(o[8]=0,o[4]=s[0],a.multiply(r,r,o)),a.scale(r,r,i),r}},4192:function(r,n,i){var a=i(2478),o=i(7442),s=i(7608),l=i(5567),c=i(2408),u=i(7089),f=i(6582),h=i(7656),p=(i(2504),i(3536)),d=[0,0,0];function y(r){this._components=r.slice(),this._time=[0],this.prevMatrix=r.slice(),this.nextMatrix=r.slice(),this.computedMatrix=r.slice(),this.computedInverse=r.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}r.exports=function(r){return new y((r=r||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=y.prototype;g.recalcMatrix=function(r){var n=this._time,i=a.le(n,r),l=this.computedMatrix;if(!(i<0)){var c=this._components;if(i===n.length-1)for(var u=16*i,f=0;f<16;++f)l[f]=c[u++];else{var h=n[i+1]-n[i],d=(u=16*i,this.prevMatrix),y=!0;for(f=0;f<16;++f)d[f]=c[u++];var g=this.nextMatrix;for(f=0;f<16;++f)g[f]=c[u++],y=y&&d[f]===g[f];if(h<1e-6||y)for(f=0;f<16;++f)l[f]=d[f];else o(l,d,g,(r-n[i])/h)}var v=this.computedUp;v[0]=l[1],v[1]=l[5],v[2]=l[9],p(v,v);var m=this.computedInverse;s(m,l);var x=this.computedEye,b=m[15];x[0]=m[12]/b,x[1]=m[13]/b,x[2]=m[14]/b;var _=this.computedCenter,w=Math.exp(this.computedRadius[0]);for(f=0;f<3;++f)_[f]=x[f]-l[2+4*f]*w}},g.idle=function(r){if(!(r<this.lastT())){for(var n=this._components,i=n.length-16,a=0;a<16;++a)n.push(n[i++]);this._time.push(r)}},g.flush=function(r){var n=a.gt(this._time,r)-2;n<0||(this._time.splice(0,n),this._components.splice(0,16*n))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(r,n,i,a){this.recalcMatrix(r),n=n||this.computedEye,i=i||d,a=a||this.computedUp,this.setMatrix(r,f(this.computedMatrix,n,i,a));for(var o=0,s=0;s<3;++s)o+=Math.pow(i[s]-n[s],2);o=Math.log(Math.sqrt(o)),this.computedRadius[0]=o},g.rotate=function(r,n,i,a){this.recalcMatrix(r);var o=this.computedInverse;n&&c(o,o,n),i&&l(o,o,i),a&&u(o,o,a),this.setMatrix(r,s(this.computedMatrix,o))};var v=[0,0,0];g.pan=function(r,n,i,a){v[0]=-(n||0),v[1]=-(i||0),v[2]=-(a||0),this.recalcMatrix(r);var o=this.computedInverse;h(o,o,v),this.setMatrix(r,s(o,o))},g.translate=function(r,n,i,a){v[0]=n||0,v[1]=i||0,v[2]=a||0,this.recalcMatrix(r);var o=this.computedMatrix;h(o,o,v),this.setMatrix(r,o)},g.setMatrix=function(r,n){if(!(r<this.lastT())){this._time.push(r);for(var i=0;i<16;++i)this._components.push(n[i])}},g.setDistance=function(r,n){this.computedRadius[0]=n},g.setDistanceLimits=function(r,n){var i=this._limits;i[0]=r,i[1]=n},g.getDistanceLimits=function(r){var n=this._limits;return r?(r[0]=n[0],r[1]=n[1],r):n}},3090:function(r,n,i){r.exports=function(r){var n=r.length;if(n<3){for(var i=Array(n),o=0;o<n;++o)i[o]=o;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:i}var s=Array(n);for(o=0;o<n;++o)s[o]=o;s.sort(function(n,i){return r[n][0]-r[i][0]||r[n][1]-r[i][1]});var l=[s[0],s[1]],c=[s[0],s[1]];for(o=2;o<n;++o){for(var u=s[o],f=r[u],h=l.length;h>1&&0>=a(r[l[h-2]],r[l[h-1]],f);)h-=1,l.pop();for(l.push(u),h=c.length;h>1&&a(r[c[h-2]],r[c[h-1]],f)>=0;)h-=1,c.pop();c.push(u)}i=Array(c.length+l.length-2);for(var p=0,d=(o=0,l.length);o<d;++o)i[p++]=l[o];for(var y=c.length-2;y>0;--y)i[p++]=c[y];return i};var a=i(3250)[3]},351:function(r,n,i){r.exports=function(r,n){n||(n=r,r=window);var i=0,o=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function u(r){var n=!1;return"altKey"in r&&(n=n||r.altKey!==l.alt,l.alt=!!r.altKey),"shiftKey"in r&&(n=n||r.shiftKey!==l.shift,l.shift=!!r.shiftKey),"ctrlKey"in r&&(n=n||r.ctrlKey!==l.control,l.control=!!r.ctrlKey),"metaKey"in r&&(n=n||r.metaKey!==l.meta,l.meta=!!r.metaKey),n}function f(r,c){var f=a.x(c),h=a.y(c);"buttons"in c&&(r=0|c.buttons),(r!==i||f!==o||h!==s||u(c))&&(i=0|r,o=f||0,s=h||0,n&&n(i,o,s,l))}function h(r){f(0,r)}function p(){(i||o||s||l.shift||l.alt||l.meta||l.control)&&(o=s=0,i=0,l.shift=l.alt=l.control=l.meta=!1,n&&n(0,0,0,l))}function d(r){u(r)&&n&&n(i,o,s,l)}function y(r){0===a.buttons(r)?f(0,r):f(i,r)}function g(r){f(i|a.buttons(r),r)}function v(r){f(i&~a.buttons(r),r)}function m(){c||(c=!0,r.addEventListener("mousemove",y),r.addEventListener("mousedown",g),r.addEventListener("mouseup",v),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",p),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var x={element:r};return Object.defineProperties(x,{enabled:{get:function(){return c},set:function(n){n?m():c&&(c=!1,r.removeEventListener("mousemove",y),r.removeEventListener("mousedown",g),r.removeEventListener("mouseup",v),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",p),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),x};var a=i(4687)},24:function(r){var n={left:0,top:0};r.exports=function(r,i,a){i=i||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var o,s=r.clientX||0,l=r.clientY||0,c=(o=i)===window||o===document||o===document.body?n:o.getBoundingClientRect();return a[0]=s-c.left,a[1]=l-c.top,a}},4687:function(r,n){function i(r){return r.target||r.srcElement||window}n.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},n.element=i,n.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=i(r).getBoundingClientRect();return r.clientX-n.left}return 0},n.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=i(r).getBoundingClientRect();return r.clientY-n.top}return 0}},8512:function(r,n,i){var a=i(665);r.exports=function(r,n,i){"function"==typeof r&&(i=!!n,n=r,r=window);var o=a("ex",r),s=function(r){i&&r.preventDefault();var a=r.deltaX||0,s=r.deltaY||0,l=r.deltaZ||0,c=1;switch(r.deltaMode){case 1:c=o;break;case 2:c=window.innerHeight}if(s*=c,l*=c,(a*=c)||s||l)return n(a,s,l,r)};return r.addEventListener("wheel",s),s}},2640:function(r,n,i){var a=i(1888);r.exports=function(r){function n(r){throw Error("ndarray-extract-contour: "+r)}"object"!=typeof r&&n("Must specify arguments");var i,s,l,c=r.order;Array.isArray(c)||n("Must specify order");var u=r.arrayArguments||1;u<1&&n("Must have at least one array argument"),0>(r.scalarArguments||0)&&n("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&n("Must specify vertex creation function"),"function"!=typeof r.cell&&n("Must specify cell creation function"),"function"!=typeof r.phase&&n("Must specify phase function");for(var f=r.getters||[],h=Array(u),p=0;p<u;++p)f.indexOf(p)>=0?h[p]=!0:h[p]=!1;return i=r.vertex,s=r.cell,l=r.phase,(0,o[[h,c].join(",")])(i,s,l,a.mallocUint32,a.freeUint32)};var o={"false,0,1":function(r,n,i,a,o){return function(s,l,c,u){var f,h=0|s.shape[0],p=0|s.shape[1],d=s.data,y=0|s.offset,g=0|s.stride[0],v=0|s.stride[1],m=y,x=0|-g,b=0,_=0|-v,w=0,T=-g-v|0,A=0,k=0|g,M=v-g*h|0,S=0,E=0,I=0,L=2*h|0,C=a(L),O=a(L),D=0,P=0,B=-1,R=-1,z=0,F=0|-h,N=0|h,U=0,j=-h-1|0,V=h-1|0,H=0,q=0,G=0;for(S=0;S<h;++S)C[D++]=i(d[m],l,c,u),m+=k;if(m+=M,p>0){if(E=1,C[D++]=i(d[m],l,c,u),m+=k,h>0)for(S=1,f=d[m],P=C[D]=i(f,l,c,u),z=C[D+B],U=C[D+F],H=C[D+j],P===z&&P===U&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,z,U,H,l,c,u),q=O[D]=I++),D+=1,m+=k,S=2;S<h;++S)f=d[m],P=C[D]=i(f,l,c,u),z=C[D+B],U=C[D+F],H=C[D+j],P===z&&P===U&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,z,U,H,l,c,u),q=O[D]=I++,H!==z&&n(O[D+B],q,A,b,H,z,l,c,u)),D+=1,m+=k;for(m+=M,D=0,G=B,B=R,R=G,G=F,F=N,N=G,G=j,j=V,V=G,E=2;E<p;++E){if(C[D++]=i(d[m],l,c,u),m+=k,h>0)for(S=1,f=d[m],P=C[D]=i(f,l,c,u),z=C[D+B],U=C[D+F],H=C[D+j],P===z&&P===U&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,z,U,H,l,c,u),q=O[D]=I++,H!==U&&n(O[D+F],q,w,A,U,H,l,c,u)),D+=1,m+=k,S=2;S<h;++S)f=d[m],P=C[D]=i(f,l,c,u),z=C[D+B],U=C[D+F],H=C[D+j],P===z&&P===U&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,z,U,H,l,c,u),q=O[D]=I++,H!==U&&n(O[D+F],q,w,A,U,H,l,c,u),H!==z&&n(O[D+B],q,A,b,H,z,l,c,u)),D+=1,m+=k;1&E&&(D=0),G=B,B=R,R=G,G=F,F=N,N=G,G=j,j=V,V=G,m+=M}}o(O),o(C)}},"false,1,0":function(r,n,i,a,o){return function(s,l,c,u){var f,h=0|s.shape[0],p=0|s.shape[1],d=s.data,y=0|s.offset,g=0|s.stride[0],v=0|s.stride[1],m=y,x=0|-g,b=0,_=0|-v,w=0,T=-g-v|0,A=0,k=0|v,M=g-v*p|0,S=0,E=0,I=0,L=2*p|0,C=a(L),O=a(L),D=0,P=0,B=-1,R=-1,z=0,F=0|-p,N=0|p,U=0,j=-p-1|0,V=p-1|0,H=0,q=0,G=0;for(E=0;E<p;++E)C[D++]=i(d[m],l,c,u),m+=k;if(m+=M,h>0){if(S=1,C[D++]=i(d[m],l,c,u),m+=k,p>0)for(E=1,f=d[m],P=C[D]=i(f,l,c,u),U=C[D+F],z=C[D+B],H=C[D+j],P===U&&P===z&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,U,z,H,l,c,u),q=O[D]=I++),D+=1,m+=k,E=2;E<p;++E)f=d[m],P=C[D]=i(f,l,c,u),U=C[D+F],z=C[D+B],H=C[D+j],P===U&&P===z&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,U,z,H,l,c,u),q=O[D]=I++,H!==z&&n(O[D+B],q,w,A,z,H,l,c,u)),D+=1,m+=k;for(m+=M,D=0,G=F,F=N,N=G,G=B,B=R,R=G,G=j,j=V,V=G,S=2;S<h;++S){if(C[D++]=i(d[m],l,c,u),m+=k,p>0)for(E=1,f=d[m],P=C[D]=i(f,l,c,u),U=C[D+F],z=C[D+B],H=C[D+j],P===U&&P===z&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,U,z,H,l,c,u),q=O[D]=I++,H!==U&&n(O[D+F],q,A,b,H,U,l,c,u)),D+=1,m+=k,E=2;E<p;++E)f=d[m],P=C[D]=i(f,l,c,u),U=C[D+F],z=C[D+B],H=C[D+j],P===U&&P===z&&P===H||(r(S,E,f,b=d[m+x],w=d[m+_],A=d[m+T],P,U,z,H,l,c,u),q=O[D]=I++,H!==z&&n(O[D+B],q,w,A,z,H,l,c,u),H!==U&&n(O[D+F],q,A,b,H,U,l,c,u)),D+=1,m+=k;1&S&&(D=0),G=F,F=N,N=G,G=B,B=R,R=G,G=j,j=V,V=G,m+=M}}o(O),o(C)}}}},6199:function(r,n,i){var a=i(1338),o={zero:function(r,n,i,a){var o=r[0];a|=0;var s=0,l=i[0];for(s=0;s<o;++s)n[a]=0,a+=l},fdTemplate1:function(r,n,i,a,o,s,l){var c=r[0],u=i[0],f=-1*u;a|=0,l|=0;var h=0,p=s[0];for(h=0;h<c;++h)o[l]=.5*(n[a+f]-n[a+u]),a+=u,l+=p},fdTemplate2:function(r,n,i,a,o,s,l,c,u,f){var h=r[0],p=r[1],d=i[0],y=i[1],g=s[0],v=s[1],m=u[0],x=u[1],b=-1*d,_=-1*y;a|=0,l|=0,f|=0;var w=0,T=0,A=d-p*y,k=g-p*v,M=m-p*x;for(T=0;T<h;++T){for(w=0;w<p;++w)o[l]=.5*(n[a+b]-n[a+d]),c[f]=.5*(n[a+_]-n[a+y]),a+=y,l+=v,f+=x;a+=A,l+=k,f+=M}}},s={cdiff:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=o.dtype,h=o.order,p=[s,l.join(),c,u.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,c,u,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},zero:function(r){var n={};return function(i){var a=i.dtype,o=i.order,s=[a,o.join()].join(),l=n[s];return l||(n[s]=l=r([a,o])),l(i.shape.slice(0),i.data,i.stride,0|i.offset)}},fdTemplate1:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=a.dtype,c=a.order,u=[o,s.join(),l,c.join()].join(),f=n[u];return f||(n[u]=f=r([o,s,l,c])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset)}},fdTemplate2:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=o.dtype,h=o.order,p=[s,l.join(),c,u.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,c,u,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}}};function l(r){return o[r.funcName]}function c(r){var n;return(0,s[(n={funcName:r.funcName}).funcName])(l.bind(void 0,n))}var u={},f={},h=c({funcName:"cdiff"}),p=c({funcName:"zero"});function d(r,n,i,a){return function(r,o){var s=o.shape.slice();return s[0]>2&&s[1]>2&&a(o.pick(-1,-1).lo(1,1).hi(s[0]-2,s[1]-2),r.pick(-1,-1,0).lo(1,1).hi(s[0]-2,s[1]-2),r.pick(-1,-1,1).lo(1,1).hi(s[0]-2,s[1]-2)),s[1]>2&&(i(o.pick(0,-1).lo(1).hi(s[1]-2),r.pick(0,-1,1).lo(1).hi(s[1]-2)),n(r.pick(0,-1,0).lo(1).hi(s[1]-2))),s[1]>2&&(i(o.pick(s[0]-1,-1).lo(1).hi(s[1]-2),r.pick(s[0]-1,-1,1).lo(1).hi(s[1]-2)),n(r.pick(s[0]-1,-1,0).lo(1).hi(s[1]-2))),s[0]>2&&(i(o.pick(-1,0).lo(1).hi(s[0]-2),r.pick(-1,0,0).lo(1).hi(s[0]-2)),n(r.pick(-1,0,1).lo(1).hi(s[0]-2))),s[0]>2&&(i(o.pick(-1,s[1]-1).lo(1).hi(s[0]-2),r.pick(-1,s[1]-1,0).lo(1).hi(s[0]-2)),n(r.pick(-1,s[1]-1,1).lo(1).hi(s[0]-2))),r.set(0,0,0,0),r.set(0,0,1,0),r.set(s[0]-1,0,0,0),r.set(s[0]-1,0,1,0),r.set(0,s[1]-1,0,0),r.set(0,s[1]-1,1,0),r.set(s[0]-1,s[1]-1,0,0),r.set(s[0]-1,s[1]-1,1,0),r}}r.exports=function(r,n,i){return Array.isArray(i)||(i=a(n.dimension,"string"==typeof i?i:"clamp")),0===n.size?r:0===n.dimension?(r.set(0),r):(function(r){var n,i=r.join();if(l=f[i])return l;for(var a=r.length,o=[h,p],s=1;s<=a;++s)o.push((n=s)in u?u[n]:u[n]=c({funcName:"fdTemplate"+n}));var l=d.apply(void 0,o);return f[i]=l,l})(i)(r,n)}},4317:function(r){function n(r,n){var i=Math.floor(n),a=n-i,o=0<=i&&i<r.shape[0],s=0<=i+1&&i+1<r.shape[0];return(1-a)*(o?+r.get(i):0)+a*(s?+r.get(i+1):0)}function i(r,n,i){var a=Math.floor(n),o=n-a,s=0<=a&&a<r.shape[0],l=0<=a+1&&a+1<r.shape[0],c=Math.floor(i),u=i-c,f=0<=c&&c<r.shape[1],h=0<=c+1&&c+1<r.shape[1],p=s&&f?r.get(a,c):0,d=s&&h?r.get(a,c+1):0;return(1-u)*((1-o)*p+o*(l&&f?r.get(a+1,c):0))+u*((1-o)*d+o*(l&&h?r.get(a+1,c+1):0))}function a(r,n,i,a){var o=Math.floor(n),s=n-o,l=0<=o&&o<r.shape[0],c=0<=o+1&&o+1<r.shape[0],u=Math.floor(i),f=i-u,h=0<=u&&u<r.shape[1],p=0<=u+1&&u+1<r.shape[1],d=Math.floor(a),y=a-d,g=0<=d&&d<r.shape[2],v=0<=d+1&&d+1<r.shape[2],m=l&&h&&g?r.get(o,u,d):0,x=l&&p&&g?r.get(o,u+1,d):0,b=c&&h&&g?r.get(o+1,u,d):0,_=c&&p&&g?r.get(o+1,u+1,d):0,w=l&&h&&v?r.get(o,u,d+1):0,T=l&&p&&v?r.get(o,u+1,d+1):0;return(1-y)*((1-f)*((1-s)*m+s*b)+f*((1-s)*x+s*_))+y*((1-f)*((1-s)*w+s*(c&&h&&v?r.get(o+1,u,d+1):0))+f*((1-s)*T+s*(c&&p&&v?r.get(o+1,u+1,d+1):0)))}function o(r){var n,i,a=0|r.shape.length,o=Array(a),s=Array(a),l=Array(a),c=Array(a);for(n=0;n<a;++n)i=+arguments[n+1],o[n]=Math.floor(i),s[n]=i-o[n],l[n]=0<=o[n]&&o[n]<r.shape[n],c[n]=0<=o[n]+1&&o[n]+1<r.shape[n];var u,f,h,p=0;e:for(n=0;n<1<<a;++n){for(f=1,h=r.offset,u=0;u<a;++u)if(n&1<<u){if(!c[u])continue e;f*=s[u],h+=r.stride[u]*(o[u]+1)}else{if(!l[u])continue e;f*=1-s[u],h+=r.stride[u]*o[u]}p+=f*r.data[h]}return p}r.exports=function(r,s,l,c){switch(r.shape.length){case 0:return 0;case 1:return n(r,s);case 2:return i(r,s,l);case 3:return a(r,s,l,c);default:return o.apply(void 0,arguments)}},r.exports.d1=n,r.exports.d2=i,r.exports.d3=a},5298:function(r,n){var i={"float64,2,1,0":function(){return function(r,n,i,a,o){var s=r[0],l=r[1],c=r[2],u=i[0],f=i[1],h=i[2];a|=0;var p=0,d=0,y=0,g=f-c*h,v=u-l*f;for(y=0;y<s;++y){for(d=0;d<l;++d){for(p=0;p<c;++p)n[a]/=o,a+=h;a+=g}a+=v}}},"uint8,2,0,1,float64,2,1,0":function(){return function(r,n,i,a,o,s,l,c){for(var u=r[0],f=r[1],h=r[2],p=i[0],d=i[1],y=i[2],g=s[0],v=s[1],m=s[2],x=a|=0,b=l|=0,_=0|r[0];_>0;){_<64?(u=_,_=0):(u=64,_-=64);for(var w=0|r[1];w>0;){w<64?(f=w,w=0):(f=64,w-=64),a=x+_*p+w*d,l=b+_*g+w*v;var T=0,A=0,k=0,M=p-h*y,S=d-u*p,E=g-h*m,I=v-u*g;for(k=0;k<f;++k){for(A=0;A<u;++A){for(T=0;T<h;++T)n[a]=o[l]*c,a+=y,l+=m;a+=M,l+=E}a+=S,l+=I}}}}},"float32,1,0,float32,1,0":function(){return function(r,n,i,a,o,s,l){var c=r[0],u=r[1],f=i[0],h=i[1],p=s[0],d=s[1];a|=0,l|=0;var y=0,g=0,v=f-u*h,m=p-u*d;for(g=0;g<c;++g){for(y=0;y<u;++y)n[a]=o[l],a+=h,l+=d;a+=v,l+=m}}},"float32,1,0,float32,0,1":function(){return function(r,n,i,a,o,s,l){for(var c=r[0],u=r[1],f=i[0],h=i[1],p=s[0],d=s[1],y=a|=0,g=l|=0,v=0|r[1];v>0;){v<64?(u=v,v=0):(u=64,v-=64);for(var m=0|r[0];m>0;){m<64?(c=m,m=0):(c=64,m-=64),a=y+v*h+m*f,l=g+v*d+m*p;var x=0,b=0,_=f-u*h,w=p-u*d;for(b=0;b<c;++b){for(x=0;x<u;++x)n[a]=o[l],a+=h,l+=d;a+=_,l+=w}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(r,n,i,a,o,s,l){for(var c=r[0],u=r[1],f=r[2],h=i[0],p=i[1],d=i[2],y=s[0],g=s[1],v=s[2],m=a|=0,x=l|=0,b=0|r[2];b>0;){b<64?(f=b,b=0):(f=64,b-=64);for(var _=0|r[0];_>0;){_<64?(c=_,_=0):(c=64,_-=64);for(var w=0|r[1];w>0;){w<64?(u=w,w=0):(u=64,w-=64),a=m+b*d+_*h+w*p,l=x+b*v+_*y+w*g;var T=0,A=0,k=0,M=h-f*d,S=p-c*h,E=y-f*v,I=g-c*y;for(k=0;k<u;++k){for(A=0;A<c;++A){for(T=0;T<f;++T)n[a]=o[l],a+=d,l+=v;a+=M,l+=E}a+=S,l+=I}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(r,n,i,a,o,s,l){var c=r[0],u=r[1],f=r[2],h=i[0],p=i[1],d=i[2],y=s[0],g=s[1],v=s[2];a|=0,l|=0;var m=0,x=0,b=0,_=h-f*d,w=p-c*h,T=y-f*v,A=g-c*y;for(b=0;b<u;++b){for(x=0;x<c;++x){for(m=0;m<f;++m)n[a]=o[l],a+=d,l+=v;a+=_,l+=T}a+=w,l+=A}}}},a=function(r,n){return(0,i[n.join(",")])()},o={mul:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=o.dtype,h=o.order,p=[s,l.join(),c,u.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,c,u,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},muls:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=[s,l.join(),c,u.join()].join(),h=n[f];return h||(n[f]=h=r([s,l,c,u])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o)}},mulseq:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=[o,s.join()].join(),c=n[l];return c||(n[l]=c=r([o,s])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,a)}},div:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=o.dtype,h=o.order,p=[s,l.join(),c,u.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,c,u,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},divs:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,c=a.dtype,u=a.order,f=[s,l.join(),c,u.join()].join(),h=n[f];return h||(n[f]=h=r([s,l,c,u])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o)}},divseq:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=[o,s.join()].join(),c=n[l];return c||(n[l]=c=r([o,s])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,a)}},assign:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=a.dtype,c=a.order,u=[o,s.join(),l,c.join()].join(),f=n[u];return f||(n[u]=f=r([o,s,l,c])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset)}}};function s(r){var n;return(0,o[(n={funcName:r.funcName}).funcName])(a.bind(void 0,n))}var l={mul:"*",div:"/"};(function(){for(var r in l)n[r]=s({funcName:r}),n[r+"s"]=s({funcName:r+"s"}),n[r+"seq"]=s({funcName:r+"seq"})})(),n.assign=s({funcName:"assign"})},9994:function(r,n,i){var a=i(9618),o=i(8277);r.exports=function(r,n){for(var i=[],s=r,l=1;Array.isArray(s);)i.push(s.length),l*=s.length,s=s[0];return 0===i.length?a():(n||(n=a(new Float64Array(l),i)),o(n,r),n)}},8277:function(r){var n,i;r.exports=(n=(function(){return function(r,n,i,a,o){var s=r[0],l=r[1],c=r[2],u=i[0],f=i[1],h=i[2],p=[0,0,0];a|=0;var d=0,y=0,g=0,v=f-c*h,m=u-l*f;for(g=0;g<s;++g){for(y=0;y<l;++y){for(d=0;d<c;++d){var x,b=o;for(x=0;x<p.length-1;++x)b=b[p[x]];n[a]=b[p[p.length-1]],a+=h,++p[2]}a+=v,p[2]-=c,++p[1]}a+=m,p[1]-=l,++p[0]}}}).bind(void 0,{funcName:"convert"}),i={},function(r,a){var o=r.dtype,s=r.order,l=[o,s.join()].join(),c=i[l];return c||(i[l]=c=n([o,s])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,a)})},7640:function(r,n,i){var a=i(1888);function o(r){return"uint32"===r?[a.mallocUint32,a.freeUint32]:null}var s={"uint32,1,0":function(r,n){return function(i,a,o,s,l,c,u,f,h,p,d){var y,g,v,m,x,b,_,w,T=i*l+s,A=r(f);for(y=i+1;y<=a;++y){for(g=y,v=T+=l,x=0,b=T,m=0;m<f;++m)A[x++]=o[b],b+=h;e:for(;g-- >i;){for(x=0,b=v-l,m=0;m<f;++m){if((_=o[b])<(w=A[x]))break e;if(_>w)break;b+=p,x+=d}for(x=v,b=v-l,m=0;m<f;++m)o[x]=o[b],x+=h,b+=h;v-=l}for(x=v,b=0,m=0;m<f;++m)o[x]=A[b++],x+=h}n(A)}}},l={"uint32,1,0":function(r,n,i){return function a(o,s,l,c,u,f,h,p,d,y,g){var v,m,x,b,_,w,T,A,k,M,S,E,I,L,C,O,D,P,B,R,z,F,N,U,j,V=(s-o+1)/6|0,H=o+V,q=s-V,G=o+s>>1,W=G-V,Y=G+V,Z=H,X=W,K=G,J=Y,$=q,Q=o+1,tt=s-1,te=!0,tr=0,tn=0,ti=0,ta=n(p),to=n(p);for(S=u*Z,E=u*X,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=Z,Z=X,X=m;break}if(ti<0)break;j+=y}for(S=u*J,E=u*$,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=J,J=$,$=m;break}if(ti<0)break;j+=y}for(S=u*Z,E=u*K,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=Z,Z=K,K=m;break}if(ti<0)break;j+=y}for(S=u*X,E=u*K,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=X,X=K,K=m;break}if(ti<0)break;j+=y}for(S=u*Z,E=u*J,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=Z,Z=J,J=m;break}if(ti<0)break;j+=y}for(S=u*K,E=u*J,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=K,K=J,J=m;break}if(ti<0)break;j+=y}for(S=u*X,E=u*$,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=X,X=$,$=m;break}if(ti<0)break;j+=y}for(S=u*X,E=u*K,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=X,X=K,K=m;break}if(ti<0)break;j+=y}for(S=u*J,E=u*$,j=c,M=0;M<p;++M){if(A=E+j,(ti=l[T=S+j]-l[A])>0){m=J,J=$,$=m;break}if(ti<0)break;j+=y}for(S=u*Z,E=u*X,I=u*K,L=u*J,C=u*$,O=u*H,D=u*G,P=u*q,U=0,j=c,M=0;M<p;++M)T=S+j,A=E+j,k=I+j,B=L+j,R=C+j,z=O+j,F=D+j,N=P+j,ta[U]=l[A],to[U]=l[B],te=te&&ta[U]===to[U],x=l[T],b=l[k],_=l[R],l[z]=x,l[F]=b,l[N]=_,++U,j+=d;for(S=u*W,E=u*o,j=c,M=0;M<p;++M)A=E+j,l[T=S+j]=l[A],j+=d;for(S=u*Y,E=u*s,j=c,M=0;M<p;++M)A=E+j,l[T=S+j]=l[A],j+=d;if(te)for(w=Q;w<=tt;++w){for(T=c+w*u,U=0,M=0;M<p&&0==(ti=l[T]-ta[U]);++M)U+=g,T+=y;if(0!==ti){if(ti<0){if(w!==Q)for(S=u*w,E=u*Q,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;++Q}else for(;;){for(T=c+tt*u,U=0,M=0;M<p&&0==(ti=l[T]-ta[U]);++M)U+=g,T+=y;if(!(ti>0)){if(ti<0){for(S=u*w,E=u*Q,I=u*tt,j=c,M=0;M<p;++M)A=E+j,k=I+j,v=l[T=S+j],l[T]=l[A],l[A]=l[k],l[k]=v,j+=d;++Q,--tt;break}for(S=u*w,E=u*tt,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;--tt;break}tt--}}}else for(w=Q;w<=tt;++w){for(T=c+w*u,U=0,M=0;M<p&&0==(tr=l[T]-ta[U]);++M)U+=g,T+=y;if(tr<0){if(w!==Q)for(S=u*w,E=u*Q,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;++Q}else{for(T=c+w*u,U=0,M=0;M<p&&0==(tn=l[T]-to[U]);++M)U+=g,T+=y;if(tn>0)for(;;){for(T=c+tt*u,U=0,M=0;M<p&&0==(ti=l[T]-to[U]);++M)U+=g,T+=y;if(!(ti>0)){for(T=c+tt*u,U=0,M=0;M<p&&0==(ti=l[T]-ta[U]);++M)U+=g,T+=y;if(ti<0){for(S=u*w,E=u*Q,I=u*tt,j=c,M=0;M<p;++M)A=E+j,k=I+j,v=l[T=S+j],l[T]=l[A],l[A]=l[k],l[k]=v,j+=d;++Q,--tt}else{for(S=u*w,E=u*tt,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;--tt}break}if(--tt<w)break}}}for(S=u*o,E=u*(Q-1),U=0,j=c,M=0;M<p;++M)A=E+j,l[T=S+j]=l[A],l[A]=ta[U],++U,j+=d;for(S=u*s,E=u*(tt+1),U=0,j=c,M=0;M<p;++M)A=E+j,l[T=S+j]=l[A],l[A]=to[U],++U,j+=d;if(Q-2-o<=32?r(o,Q-2,l,c,u,f,h,p,d,y,g):a(o,Q-2,l,c,u,f,h,p,d,y,g),s-(tt+2)<=32?r(tt+2,s,l,c,u,f,h,p,d,y,g):a(tt+2,s,l,c,u,f,h,p,d,y,g),te)return i(ta),void i(to);if(Q<H&&tt>q){e:for(;;){for(T=c+Q*u,U=0,j=c,M=0;M<p;++M){if(l[T]!==ta[U])break e;++U,T+=d}++Q}e:for(;;){for(T=c+tt*u,U=0,j=c,M=0;M<p;++M){if(l[T]!==to[U])break e;++U,T+=d}--tt}for(w=Q;w<=tt;++w){for(T=c+w*u,U=0,M=0;M<p&&0==(tr=l[T]-ta[U]);++M)U+=g,T+=y;if(0===tr){if(w!==Q)for(S=u*w,E=u*Q,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;++Q}else{for(T=c+w*u,U=0,M=0;M<p&&0==(tn=l[T]-to[U]);++M)U+=g,T+=y;if(0===tn)for(;;){for(T=c+tt*u,U=0,M=0;M<p&&0==(ti=l[T]-to[U]);++M)U+=g,T+=y;if(0!==ti){for(T=c+tt*u,U=0,M=0;M<p&&0==(ti=l[T]-ta[U]);++M)U+=g,T+=y;if(ti<0){for(S=u*w,E=u*Q,I=u*tt,j=c,M=0;M<p;++M)A=E+j,k=I+j,v=l[T=S+j],l[T]=l[A],l[A]=l[k],l[k]=v,j+=d;++Q,--tt}else{for(S=u*w,E=u*tt,j=c,M=0;M<p;++M)A=E+j,v=l[T=S+j],l[T]=l[A],l[A]=v,j+=d;--tt}break}if(--tt<w)break}}}}i(ta),i(to),tt-Q<=32?r(Q,tt,l,c,u,f,h,p,d,y,g):a(Q,tt,l,c,u,f,h,p,d,y,g)}}},c={"uint32,1,0":function(r,n){return function(i){var a=i.data,o=0|i.offset,s=i.shape,l=i.stride,c=0|l[0],u=0|s[0],f=0|l[1],h=0|s[1];u<=32?r(0,u-1,a,o,c,f,u,h,f,f,1):n(0,u-1,a,o,c,f,u,h,f,f,1)}}};r.exports=function(r,n){var i,a,u,f,h=c[[n,r].join(",")],p=(i=o(n),a=s[[n,r].join(",")],i?a(i[0],i[1]):a()),d=(u=o(n),f=l[[n,r].join(",")],r.length>1&&u?f(p,u[0],u[1]):f(p));return h(p,d)}},446:function(r,n,i){var a=i(7640),o={};r.exports=function(r){var n=r.order,i=r.dtype,s=[n,i].join(":"),l=o[s];return l||(o[s]=l=a(n,i)),l(r),r}},9618:function(r,n,i){var a=i(7163),o="undefined"!=typeof Float64Array;function s(r,n){return r[0]-n[0]}function l(){var r,n=this.stride,i=Array(n.length);for(r=0;r<i.length;++r)i[r]=[Math.abs(n[r]),r];i.sort(s);var a=Array(i.length);for(r=0;r<a.length;++r)a[r]=i[r][1];return a}var c={T:function(r){function n(r){this.data=r}var i=n.prototype;return i.dtype=r,i.index=function(){return -1},i.size=0,i.dimension=-1,i.shape=i.stride=i.order=[],i.lo=i.hi=i.transpose=i.step=function(){return new n(this.data)},i.get=i.set=function(){},i.pick=function(){return null},function(r){return new n(r)}},0:function(r,n){function i(r,n){this.data=r,this.offset=n}var a=i.prototype;return a.dtype=r,a.index=function(){return this.offset},a.dimension=0,a.size=1,a.shape=a.stride=a.order=[],a.lo=a.hi=a.transpose=a.step=function(){return new i(this.data,this.offset)},a.pick=function(){return n(this.data)},a.valueOf=a.get=function(){return"generic"===r?this.data.get(this.offset):this.data[this.offset]},a.set=function(n){return"generic"===r?this.data.set(this.offset,n):this.data[this.offset]=n},function(r,n,a,o){return new i(r,o)}},1:function(r,n,i){function a(r,n,i,a){this.data=r,this.shape=[n],this.stride=[i],this.offset=0|a}var o=a.prototype;return o.dtype=r,o.dimension=1,Object.defineProperty(o,"size",{get:function(){return this.shape[0]}}),o.order=[0],o.set=function(n,i){return"generic"===r?this.data.set(this.offset+this.stride[0]*n,i):this.data[this.offset+this.stride[0]*n]=i},o.get=function(n){return"generic"===r?this.data.get(this.offset+this.stride[0]*n):this.data[this.offset+this.stride[0]*n]},o.index=function(r){return this.offset+this.stride[0]*r},o.hi=function(r){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,this.stride[0],this.offset)},o.lo=function(r){var n=this.offset,i=0,o=this.shape[0],s=this.stride[0];return"number"==typeof r&&r>=0&&(n+=s*(i=0|r),o-=i),new a(this.data,o,s,n)},o.step=function(r){var n=this.shape[0],i=this.stride[0],o=this.offset,s=0,l=Math.ceil;return"number"==typeof r&&((s=0|r)<0?(o+=i*(n-1),n=l(-n/s)):n=l(n/s),i*=s),new a(this.data,n,i,o)},o.transpose=function(r){r=void 0===r?0:0|r;var n=this.shape,i=this.stride;return new a(this.data,n[r],i[r],this.offset)},o.pick=function(r){var i=[],a=[],o=this.offset;return"number"==typeof r&&r>=0?o=o+this.stride[0]*r|0:(i.push(this.shape[0]),a.push(this.stride[0])),(0,n[i.length+1])(this.data,i,a,o)},function(r,n,i,o){return new a(r,n[0],i[0],o)}},2:function(r,n,i){function a(r,n,i,a,o,s){this.data=r,this.shape=[n,i],this.stride=[a,o],this.offset=0|s}var o=a.prototype;return o.dtype=r,o.dimension=2,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(o,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),o.set=function(n,i,a){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i,a):this.data[this.offset+this.stride[0]*n+this.stride[1]*i]=a},o.get=function(n,i){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i):this.data[this.offset+this.stride[0]*n+this.stride[1]*i]},o.index=function(r,n){return this.offset+this.stride[0]*r+this.stride[1]*n},o.hi=function(r,n){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,this.stride[0],this.stride[1],this.offset)},o.lo=function(r,n){var i=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.stride[0],u=this.stride[1];return"number"==typeof r&&r>=0&&(i+=c*(o=0|r),s-=o),"number"==typeof n&&n>=0&&(i+=u*(o=0|n),l-=o),new a(this.data,s,l,c,u,i)},o.step=function(r,n){var i=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1],c=this.offset,u=0,f=Math.ceil;return"number"==typeof r&&((u=0|r)<0?(c+=s*(i-1),i=f(-i/u)):i=f(i/u),s*=u),"number"==typeof n&&((u=0|n)<0?(c+=l*(o-1),o=f(-o/u)):o=f(o/u),l*=u),new a(this.data,i,o,s,l,c)},o.transpose=function(r,n){r=void 0===r?0:0|r,n=void 0===n?1:0|n;var i=this.shape,o=this.stride;return new a(this.data,i[r],i[n],o[r],o[n],this.offset)},o.pick=function(r,i){var a=[],o=[],s=this.offset;return"number"==typeof r&&r>=0?s=s+this.stride[0]*r|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof i&&i>=0?s=s+this.stride[1]*i|0:(a.push(this.shape[1]),o.push(this.stride[1])),(0,n[a.length+1])(this.data,a,o,s)},function(r,n,i,o){return new a(r,n[0],n[1],i[0],i[1],o)}},3:function(r,n,i){function a(r,n,i,a,o,s,l,c){this.data=r,this.shape=[n,i,a],this.stride=[o,s,l],this.offset=0|c}var o=a.prototype;return o.dtype=r,o.dimension=3,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(o,"order",{get:function(){var r=Math.abs(this.stride[0]),n=Math.abs(this.stride[1]),i=Math.abs(this.stride[2]);return r>n?n>i?[2,1,0]:r>i?[1,2,0]:[1,0,2]:r>i?[2,0,1]:i>n?[0,1,2]:[0,2,1]}}),o.set=function(n,i,a,o){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a,o):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a]=o},o.get=function(n,i,a){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a]},o.index=function(r,n,i){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i},o.hi=function(r,n,i){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,this.stride[0],this.stride[1],this.stride[2],this.offset)},o.lo=function(r,n,i){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],f=this.stride[0],h=this.stride[1],p=this.stride[2];return"number"==typeof r&&r>=0&&(o+=f*(s=0|r),l-=s),"number"==typeof n&&n>=0&&(o+=h*(s=0|n),c-=s),"number"==typeof i&&i>=0&&(o+=p*(s=0|i),u-=s),new a(this.data,l,c,u,f,h,p,o)},o.step=function(r,n,i){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],f=this.stride[2],h=this.offset,p=0,d=Math.ceil;return"number"==typeof r&&((p=0|r)<0?(h+=c*(o-1),o=d(-o/p)):o=d(o/p),c*=p),"number"==typeof n&&((p=0|n)<0?(h+=u*(s-1),s=d(-s/p)):s=d(s/p),u*=p),"number"==typeof i&&((p=0|i)<0?(h+=f*(l-1),l=d(-l/p)):l=d(l/p),f*=p),new a(this.data,o,s,l,c,u,f,h)},o.transpose=function(r,n,i){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i;var o=this.shape,s=this.stride;return new a(this.data,o[r],o[n],o[i],s[r],s[n],s[i],this.offset)},o.pick=function(r,i,a){var o=[],s=[],l=this.offset;return"number"==typeof r&&r>=0?l=l+this.stride[0]*r|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof i&&i>=0?l=l+this.stride[1]*i|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof a&&a>=0?l=l+this.stride[2]*a|0:(o.push(this.shape[2]),s.push(this.stride[2])),(0,n[o.length+1])(this.data,o,s,l)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],i[0],i[1],i[2],o)}},4:function(r,n,i){function a(r,n,i,a,o,s,l,c,u,f){this.data=r,this.shape=[n,i,a,o],this.stride=[s,l,c,u],this.offset=0|f}var o=a.prototype;return o.dtype=r,o.dimension=4,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(o,"order",{get:i}),o.set=function(n,i,a,o,s){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o,s):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o]=s},o.get=function(n,i,a,o){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o]},o.index=function(r,n,i,a){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i+this.stride[3]*a},o.hi=function(r,n,i,o){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof o||o<0?this.shape[3]:0|o,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},o.lo=function(r,n,i,o){var s=this.offset,l=0,c=this.shape[0],u=this.shape[1],f=this.shape[2],h=this.shape[3],p=this.stride[0],d=this.stride[1],y=this.stride[2],g=this.stride[3];return"number"==typeof r&&r>=0&&(s+=p*(l=0|r),c-=l),"number"==typeof n&&n>=0&&(s+=d*(l=0|n),u-=l),"number"==typeof i&&i>=0&&(s+=y*(l=0|i),f-=l),"number"==typeof o&&o>=0&&(s+=g*(l=0|o),h-=l),new a(this.data,c,u,f,h,p,d,y,g,s)},o.step=function(r,n,i,o){var s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],f=this.stride[0],h=this.stride[1],p=this.stride[2],d=this.stride[3],y=this.offset,g=0,v=Math.ceil;return"number"==typeof r&&((g=0|r)<0?(y+=f*(s-1),s=v(-s/g)):s=v(s/g),f*=g),"number"==typeof n&&((g=0|n)<0?(y+=h*(l-1),l=v(-l/g)):l=v(l/g),h*=g),"number"==typeof i&&((g=0|i)<0?(y+=p*(c-1),c=v(-c/g)):c=v(c/g),p*=g),"number"==typeof o&&((g=0|o)<0?(y+=d*(u-1),u=v(-u/g)):u=v(u/g),d*=g),new a(this.data,s,l,c,u,f,h,p,d,y)},o.transpose=function(r,n,i,o){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i,o=void 0===o?3:0|o;var s=this.shape,l=this.stride;return new a(this.data,s[r],s[n],s[i],s[o],l[r],l[n],l[i],l[o],this.offset)},o.pick=function(r,i,a,o){var s=[],l=[],c=this.offset;return"number"==typeof r&&r>=0?c=c+this.stride[0]*r|0:(s.push(this.shape[0]),l.push(this.stride[0])),"number"==typeof i&&i>=0?c=c+this.stride[1]*i|0:(s.push(this.shape[1]),l.push(this.stride[1])),"number"==typeof a&&a>=0?c=c+this.stride[2]*a|0:(s.push(this.shape[2]),l.push(this.stride[2])),"number"==typeof o&&o>=0?c=c+this.stride[3]*o|0:(s.push(this.shape[3]),l.push(this.stride[3])),(0,n[s.length+1])(this.data,s,l,c)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],n[3],i[0],i[1],i[2],i[3],o)}},5:function(r,n,i){function a(r,n,i,a,o,s,l,c,u,f,h,p){this.data=r,this.shape=[n,i,a,o,s],this.stride=[l,c,u,f,h],this.offset=0|p}var o=a.prototype;return o.dtype=r,o.dimension=5,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(o,"order",{get:i}),o.set=function(n,i,a,o,s,l){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s,l):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s]=l},o.get=function(n,i,a,o,s){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s]},o.index=function(r,n,i,a,o){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i+this.stride[3]*a+this.stride[4]*o},o.hi=function(r,n,i,o,s){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof o||o<0?this.shape[3]:0|o,"number"!=typeof s||s<0?this.shape[4]:0|s,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},o.lo=function(r,n,i,o,s){var l=this.offset,c=0,u=this.shape[0],f=this.shape[1],h=this.shape[2],p=this.shape[3],d=this.shape[4],y=this.stride[0],g=this.stride[1],v=this.stride[2],m=this.stride[3],x=this.stride[4];return"number"==typeof r&&r>=0&&(l+=y*(c=0|r),u-=c),"number"==typeof n&&n>=0&&(l+=g*(c=0|n),f-=c),"number"==typeof i&&i>=0&&(l+=v*(c=0|i),h-=c),"number"==typeof o&&o>=0&&(l+=m*(c=0|o),p-=c),"number"==typeof s&&s>=0&&(l+=x*(c=0|s),d-=c),new a(this.data,u,f,h,p,d,y,g,v,m,x,l)},o.step=function(r,n,i,o,s){var l=this.shape[0],c=this.shape[1],u=this.shape[2],f=this.shape[3],h=this.shape[4],p=this.stride[0],d=this.stride[1],y=this.stride[2],g=this.stride[3],v=this.stride[4],m=this.offset,x=0,b=Math.ceil;return"number"==typeof r&&((x=0|r)<0?(m+=p*(l-1),l=b(-l/x)):l=b(l/x),p*=x),"number"==typeof n&&((x=0|n)<0?(m+=d*(c-1),c=b(-c/x)):c=b(c/x),d*=x),"number"==typeof i&&((x=0|i)<0?(m+=y*(u-1),u=b(-u/x)):u=b(u/x),y*=x),"number"==typeof o&&((x=0|o)<0?(m+=g*(f-1),f=b(-f/x)):f=b(f/x),g*=x),"number"==typeof s&&((x=0|s)<0?(m+=v*(h-1),h=b(-h/x)):h=b(h/x),v*=x),new a(this.data,l,c,u,f,h,p,d,y,g,v,m)},o.transpose=function(r,n,i,o,s){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i,o=void 0===o?3:0|o,s=void 0===s?4:0|s;var l=this.shape,c=this.stride;return new a(this.data,l[r],l[n],l[i],l[o],l[s],c[r],c[n],c[i],c[o],c[s],this.offset)},o.pick=function(r,i,a,o,s){var l=[],c=[],u=this.offset;return"number"==typeof r&&r>=0?u=u+this.stride[0]*r|0:(l.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof i&&i>=0?u=u+this.stride[1]*i|0:(l.push(this.shape[1]),c.push(this.stride[1])),"number"==typeof a&&a>=0?u=u+this.stride[2]*a|0:(l.push(this.shape[2]),c.push(this.stride[2])),"number"==typeof o&&o>=0?u=u+this.stride[3]*o|0:(l.push(this.shape[3]),c.push(this.stride[3])),"number"==typeof s&&s>=0?u=u+this.stride[4]*s|0:(l.push(this.shape[4]),c.push(this.stride[4])),(0,n[l.length+1])(this.data,l,c,u)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],n[3],n[4],i[0],i[1],i[2],i[3],i[4],o)}}},u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};r.exports=function(r,n,i,s){if(void 0===r)return(0,u.array[0])([]);"number"==typeof r&&(r=[r]),void 0===n&&(n=[r.length]);var f=n.length;if(void 0===i){i=Array(f);for(var h=f-1,p=1;h>=0;--h)i[h]=p,p*=n[h]}if(void 0===s)for(s=0,h=0;h<f;++h)i[h]<0&&(s-=(n[h]-1)*i[h]);for(var d=function(r){if(a(r))return"buffer";if(o)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(r)?"array":"generic"}(r),y=u[d];y.length<=f+1;)y.push(function(r,n){var i=c[-1===n?"T":String(n)];return -1===n?i(r):0===n?i(r,u[r][0]):i(r,u[r],l)}(d,y.length-1));return(0,y[f+1])(r,n,i,s)}},1278:function(r,n,i){var a=i(2361);r.exports=function(r,n){if(isNaN(r)||isNaN(n))return NaN;if(r===n)return r;if(0===r)return n<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var i=a.hi(r),o=a.lo(r);return n>r==r>0?4294967295===o?(i+=1,o=0):o+=1:0===o?(o=4294967295,i-=1):o-=1,a.pack(o,i)}},8406:function(r,n){n.vertexNormals=function(r,n,i){for(var a=n.length,o=Array(a),s=void 0===i?1e-6:i,l=0;l<a;++l)o[l]=[0,0,0];for(l=0;l<r.length;++l)for(var c=r[l],u=0,f=c[c.length-1],h=c[0],p=0;p<c.length;++p){u=f,f=h,h=c[(p+1)%c.length];for(var d=n[u],y=n[f],g=n[h],v=[,,,],m=0,x=[,,,],b=0,_=0;_<3;++_)v[_]=d[_]-y[_],m+=v[_]*v[_],x[_]=g[_]-y[_],b+=x[_]*x[_];if(m*b>s){var w=o[f],T=1/Math.sqrt(m*b);for(_=0;_<3;++_){var A=(_+1)%3,k=(_+2)%3;w[_]+=T*(x[A]*v[k]-x[k]*v[A])}}}for(l=0;l<a;++l){w=o[l];var M=0;for(_=0;_<3;++_)M+=w[_]*w[_];if(M>s)for(T=1/Math.sqrt(M),_=0;_<3;++_)w[_]*=T;else for(_=0;_<3;++_)w[_]=0}return o},n.faceNormals=function(r,n,i){for(var a=r.length,o=Array(a),s=void 0===i?1e-6:i,l=0;l<a;++l){for(var c=r[l],u=[,,,],f=0;f<3;++f)u[f]=n[c[f]];var h=[,,,],p=[,,,];for(f=0;f<3;++f)h[f]=u[1][f]-u[0][f],p[f]=u[2][f]-u[0][f];var d=[,,,],y=0;for(f=0;f<3;++f){var g=(f+1)%3,v=(f+2)%3;d[f]=h[g]*p[v]-h[v]*p[g],y+=d[f]*d[f]}for(y=y>s?1/Math.sqrt(y):0,f=0;f<3;++f)d[f]*=y;o[l]=d}return o}},4081:function(r){r.exports=function(r,n,i,a,o,s,l,c,u,f){var h=n+s+f;if(p>0){var p=Math.sqrt(h+1);r[0]=.5*(l-u)/p,r[1]=.5*(c-a)/p,r[2]=.5*(i-s)/p,r[3]=.5*p}else{var d=Math.max(n,s,f);p=Math.sqrt(2*d-h+1),n>=d?(r[0]=.5*p,r[1]=.5*(o+i)/p,r[2]=.5*(c+a)/p,r[3]=.5*(l-u)/p):s>=d?(r[0]=.5*(i+o)/p,r[1]=.5*p,r[2]=.5*(u+l)/p,r[3]=.5*(c-a)/p):(r[0]=.5*(a+c)/p,r[1]=.5*(l+u)/p,r[2]=.5*p,r[3]=.5*(i-o)/p)}return r}},9977:function(r,n,i){r.exports=function(r){var n=(r=r||{}).center||[0,0,0],i=r.rotation||[0,0,0,1],a=r.radius||1;n=[].slice.call(n,0,3),h(i=[].slice.call(i,0,4),i);var o=new p(i,n,Math.log(a));return o.setDistanceLimits(r.zoomMin,r.zoomMax),("eye"in r||"up"in r)&&o.lookAt(0,r.eye,r.center,r.up),o};var a=i(9215),o=i(6582),s=i(7399),l=i(7608),c=i(4081);function u(r,n,i){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}function f(r,n,i,a){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2)+Math.pow(a,2))}function h(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=f(i,a,o,s);l>1e-6?(r[0]=i/l,r[1]=a/l,r[2]=o/l,r[3]=s/l):(r[0]=r[1]=r[2]=0,r[3]=1)}function p(r,n,i){this.radius=a([i]),this.center=a(n),this.rotation=a(r),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=p.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(r){this.radius.curve(r),this.center.curve(r),this.rotation.curve(r);var n=this.computedRotation;h(n,n);var i=this.computedMatrix;s(i,n);var a=this.computedCenter,o=this.computedEye,l=this.computedUp,c=Math.exp(this.computedRadius[0]);o[0]=a[0]+c*i[2],o[1]=a[1]+c*i[6],o[2]=a[2]+c*i[10],l[0]=i[1],l[1]=i[5],l[2]=i[9];for(var u=0;u<3;++u){for(var f=0,p=0;p<3;++p)f+=i[u+4*p]*o[p];i[12+u]=-f}},d.getMatrix=function(r,n){this.recalcMatrix(r);var i=this.computedMatrix;if(n){for(var a=0;a<16;++a)n[a]=i[a];return n}return i},d.idle=function(r){this.center.idle(r),this.radius.idle(r),this.rotation.idle(r)},d.flush=function(r){this.center.flush(r),this.radius.flush(r),this.rotation.flush(r)},d.pan=function(r,n,i,a){n=n||0,i=i||0,a=a||0,this.recalcMatrix(r);var o=this.computedMatrix,s=o[1],l=o[5],c=o[9],f=u(s,l,c);s/=f,l/=f,c/=f;var h=o[0],p=o[4],d=o[8],y=h*s+p*l+d*c,g=u(h-=s*y,p-=l*y,d-=c*y);h/=g,p/=g,d/=g;var v=o[2],m=o[6],x=o[10],b=v*s+m*l+x*c,_=v*h+m*p+x*d,w=u(v-=b*s+_*h,m-=b*l+_*p,x-=b*c+_*d);v/=w,m/=w,x/=w;var T=h*n+s*i,A=p*n+l*i,k=d*n+c*i;this.center.move(r,T,A,k);var M=Math.exp(this.computedRadius[0]);M=Math.max(1e-4,M+a),this.radius.set(r,Math.log(M))},d.rotate=function(r,n,i,a){this.recalcMatrix(r),n=n||0,i=i||0;var o=this.computedMatrix,s=o[0],l=o[4],c=o[8],h=o[1],p=o[5],d=o[9],y=o[2],g=o[6],v=o[10],m=n*s+i*h,x=n*l+i*p,b=n*c+i*d,_=-(g*b-v*x),w=-(v*m-y*b),T=-(y*x-g*m),A=Math.sqrt(Math.max(0,1-Math.pow(_,2)-Math.pow(w,2)-Math.pow(T,2))),k=f(_,w,T,A);k>1e-6?(_/=k,w/=k,T/=k,A/=k):(_=w=T=0,A=1);var M=this.computedRotation,S=M[0],E=M[1],I=M[2],L=M[3],C=S*A+L*_+E*T-I*w,O=E*A+L*w+I*_-S*T,D=I*A+L*T+S*w-E*_,P=L*A-S*_-E*w-I*T;if(a){var B=Math.sin(a)/u(_=y,w=g,T=v);_*=B,w*=B,T*=B,P=P*(A=Math.cos(n))-(C=C*A+P*_+O*T-D*w)*_-(O=O*A+P*w+D*_-C*T)*w-(D=D*A+P*T+C*w-O*_)*T}var R=f(C,O,D,P);R>1e-6?(C/=R,O/=R,D/=R,P/=R):(C=O=D=0,P=1),this.rotation.set(r,C,O,D,P)},d.lookAt=function(r,n,i,a){this.recalcMatrix(r),i=i||this.computedCenter,n=n||this.computedEye,a=a||this.computedUp;var s=this.computedMatrix;o(s,n,i,a);var l=this.computedRotation;c(l,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),h(l,l),this.rotation.set(r,l[0],l[1],l[2],l[3]);for(var u=0,f=0;f<3;++f)u+=Math.pow(i[f]-n[f],2);this.radius.set(r,.5*Math.log(Math.max(u,1e-6))),this.center.set(r,i[0],i[1],i[2])},d.translate=function(r,n,i,a){this.center.move(r,n||0,i||0,a||0)},d.setMatrix=function(r,n){var i=this.computedRotation;c(i,n[0],n[1],n[2],n[4],n[5],n[6],n[8],n[9],n[10]),h(i,i),this.rotation.set(r,i[0],i[1],i[2],i[3]);var a=this.computedMatrix;l(a,n);var o=a[15];if(Math.abs(o)>1e-6){var s=a[12]/o,u=a[13]/o,f=a[14]/o;this.recalcMatrix(r);var p=Math.exp(this.computedRadius[0]);this.center.set(r,s-a[2]*p,u-a[6]*p,f-a[10]*p),this.radius.idle(r)}else this.center.idle(r),this.radius.idle(r)},d.setDistance=function(r,n){n>0&&this.radius.set(r,Math.log(n))},d.setDistanceLimits=function(r,n){r=r>0?Math.log(r):-1/0,n=Math.max(n=n>0?Math.log(n):1/0,r),this.radius.bounds[0][0]=r,this.radius.bounds[1][0]=n},d.getDistanceLimits=function(r){var n=this.radius.bounds;return r?(r[0]=Math.exp(n[0][0]),r[1]=Math.exp(n[1][0]),r):[Math.exp(n[0][0]),Math.exp(n[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(r){var n=this.lastT(),i=r.center;i&&this.center.set(n,i[0],i[1],i[2]);var a=r.rotation;a&&this.rotation.set(n,a[0],a[1],a[2],a[3]);var o=r.distance;o&&o>0&&this.radius.set(n,Math.log(o)),this.setDistanceLimits(r.zoomMin,r.zoomMax)}},1371:function(r,n,i){var a=i(3233);r.exports=function(r,n,i){return a(i=void 0!==i?i+"":" ",n)+r}},3202:function(r){r.exports=function(r,n){n||(n=[0,""]);var i=parseFloat(r=String(r),10);return n[0]=i,n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},3088:function(r,n,i){r.exports=function(r,n){for(var i=0|n.length,o=r.length,s=[Array(i),Array(i)],l=0;l<i;++l)s[0][l]=[],s[1][l]=[];for(l=0;l<o;++l){var c=r[l];s[0][c[0]].push(c),s[1][c[1]].push(c)}var u=[];for(l=0;l<i;++l)s[0][l].length+s[1][l].length===0&&u.push([l]);function f(r,n){var i=s[n][r[n]];i.splice(i.indexOf(r),1)}function h(r,i,o){for(var l,c,u,h=0;h<2;++h)if(s[h][i].length>0){l=s[h][i][0],u=h;break}c=l[1^u];for(var p=0;p<2;++p)for(var d=s[p][i],y=0;y<d.length;++y){var g=d[y],v=g[1^p];a(n[r],n[i],n[c],n[v])>0&&(l=g,c=v,u=p)}return o||l&&f(l,u),c}for(l=0;l<i;++l)for(var p=0;p<2;++p){for(var d=[];s[p][l].length>0;){s[0][l].length;var y=function(r,i){var o=s[i][r][0],l=[r];f(o,i);for(var c=o[1^i];;){for(;c!==r;)l.push(c),c=h(l[l.length-2],c,!1);if(s[0][r].length+s[1][r].length===0)break;var u=l[l.length-1],p=l[1],d=h(u,r,!0);if(0>a(n[u],n[r],n[p],n[d]))break;l.push(r),c=h(u,r)}return l}(l,p);y[1]===y[y.length-1]?d.push.apply(d,y):(d.length>0&&u.push(d),d=y)}d.length>0&&u.push(d)}return u};var a=i(3140)},5609:function(r,n,i){r.exports=function(r,n){for(var i=a(r,n.length),o=Array(n.length),s=Array(n.length),l=[],c=0;c<n.length;++c){var u=i[c].length;s[c]=u,o[c]=!0,u<=1&&l.push(c)}for(;l.length>0;){o[y=l.pop()]=!1;var f=i[y];for(c=0;c<f.length;++c){var h=f[c];0==--s[h]&&l.push(h)}}var p=Array(n.length),d=[];for(c=0;c<n.length;++c)if(o[c]){var y=d.length;p[c]=y,d.push(n[c])}else p[c]=-1;var g=[];for(c=0;c<r.length;++c){var v=r[c];o[v[0]]&&o[v[1]]&&g.push([p[v[0]],p[v[1]]])}return[g,d]};var a=i(3134)},2095:function(r,n,i){r.exports=function(r,n){var i=f(r,n);r=i[0];for(var p=(n=i[1]).length,d=(r.length,a(r,n.length)),y=0;y<p;++y)if(d[y].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");var g=o(r,n),v=(g=g.filter(function(r){for(var i=r.length,a=[0],o=0;o<i;++o){var s=n[r[o]],u=n[r[(o+1)%i]],f=l(-s[0],s[1]),h=l(-s[0],u[1]),p=l(u[0],s[1]),d=l(u[0],u[1]);a=c(a,c(c(f,h),c(p,d)))}return a[a.length-1]>0})).length,m=Array(v),x=Array(v);for(y=0;y<v;++y){m[y]=y;var b=Array(v),_=s([g[y].map(function(r){return n[r]})]),w=0;e:for(var T=0;T<v;++T)if(b[T]=0,y!==T){for(var A=(q=g[T]).length,k=0;k<A;++k){var M=_(n[q[k]]);if(0!==M){M<0&&(b[T]=1,w+=1);continue e}}b[T]=1,w+=1}x[y]=[w,y,b]}for(x.sort(function(r,n){return n[0]-r[0]}),y=0;y<v;++y){var S=(b=x[y])[1],E=b[2];for(T=0;T<v;++T)E[T]&&(m[T]=S)}var I=function(r){for(var n=Array(r),i=0;i<r;++i)n[i]=[];return n}(v);for(y=0;y<v;++y)I[y].push(m[y]),I[m[y]].push(y);var L={},C=h(p,!1);for(y=0;y<v;++y)for(A=(q=g[y]).length,T=0;T<A;++T){var O=q[T],D=q[(T+1)%A],P=Math.min(O,D)+":"+Math.max(O,D);if(P in L){var B=L[P];I[B].push(y),I[y].push(B),C[O]=C[D]=!0}else L[P]=y}function R(r){for(var n=r.length,i=0;i<n;++i)if(!C[r[i]])return!1;return!0}var z=[],F=h(v,-1);for(y=0;y<v;++y)m[y]!==y||R(g[y])?F[y]=-1:(z.push(y),F[y]=0);for(i=[];z.length>0;){var N=z.pop(),U=I[N];u(U,function(r,n){return r-n});var j,V=U.length,H=F[N];for(0===H&&(j=[q=g[N]]),y=0;y<V;++y){var q,G=U[y];F[G]>=0||(F[G]=1^H,z.push(G),0===H&&(R(q=g[G])||(q.reverse(),j.push(q))))}0===H&&i.push(j)}return i};var a=i(3134),o=i(3088),s=i(5085),l=i(5250),c=i(8210),u=i(1682),f=i(5609);function h(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n;return i}},5085:function(r,n,i){r.exports=function(r){for(var n,i=r.length,s=[],c=[],h=0;h<i;++h)for(var p=r[h],d=p.length,y=d-1,g=0;g<d;y=g++){var v=p[y],m=p[g];v[0]===m[0]?c.push([v,m]):s.push([v,m])}if(0===s.length)return 0===c.length?f:(_=u(c),function(r){return _(r[0],r[1])?0:1});var x,b,_,w=o(s),T=(x=w.slabs,b=w.coordinates,function(r){var n=l.le(b,r[0]);if(n<0)return 1;var i=x[n];if(!i){if(!(n>0&&b[n]===r[0]))return 1;i=x[n-1]}for(var o=1;i;){var s=i.key,c=a(r,s[0],s[1]);if(s[0][0]<s[1][0]){if(c<0)i=i.left;else{if(!(c>0))return 0;o=-1,i=i.right}}else if(c>0)i=i.left;else{if(!(c<0))return 0;o=1,i=i.right}}return o});return 0===c.length?T:(n=u(c),function(r){return n(r[0],r[1])?0:T(r)})};var a=i(3250)[3],o=i(4209),s=i(3352),l=i(2478);function c(){return!0}function u(r){for(var n={},i=0;i<r.length;++i){var a=r[i],o=a[0][0],l=a[0][1],u=a[1][1],f=[Math.min(l,u),Math.max(l,u)];o in n?n[o].push(f):n[o]=[f]}var h={},p=Object.keys(n);for(i=0;i<p.length;++i){var d=n[p[i]];h[p[i]]=s(d)}return function(r,n){var i=h[r];return!!i&&!!i.queryPoint(n,c)}}function f(r){return 1}},9346:function(r){var n=new Float64Array(4),i=new Float64Array(4),a=new Float64Array(4);r.exports=function(r,o,s,l,c){n.length<l.length&&(n=new Float64Array(l.length),i=new Float64Array(l.length),a=new Float64Array(l.length));for(var u=0;u<l.length;++u)n[u]=r[u]-l[u],i[u]=o[u]-r[u],a[u]=s[u]-r[u];var f=0,h=0,p=0,d=0,y=0,g=0;for(u=0;u<l.length;++u){var v=i[u],m=a[u],x=n[u];f+=v*v,h+=v*m,p+=m*m,d+=x*v,y+=x*m,g+=x*x}var b,_,w,T,A,k=Math.abs(f*p-h*h),M=h*y-p*d,S=h*d-f*y;if(M+S<=k){if(M<0)S<0&&d<0?(S=0,-d>=f?(M=1,b=f+2*d+g):b=d*(M=-d/f)+g):(M=0,y>=0?(S=0,b=g):-y>=p?(S=1,b=p+2*y+g):b=y*(S=-y/p)+g);else if(S<0)S=0,d>=0?(M=0,b=g):-d>=f?(M=1,b=f+2*d+g):b=d*(M=-d/f)+g;else{var E=1/k;b=(M*=E)*(f*M+h*(S*=E)+2*d)+S*(h*M+p*S+2*y)+g}}else M<0?(w=p+y)>(_=h+d)?(T=w-_)>=(A=f-2*h+p)?(M=1,S=0,b=f+2*d+g):b=(M=T/A)*(f*M+h*(S=1-M)+2*d)+S*(h*M+p*S+2*y)+g:(M=0,w<=0?(S=1,b=p+2*y+g):y>=0?(S=0,b=g):b=y*(S=-y/p)+g):S<0?(w=f+d)>(_=h+y)?(T=w-_)>=(A=f-2*h+p)?(S=1,M=0,b=p+2*y+g):b=(M=1-(S=T/A))*(f*M+h*S+2*d)+S*(h*M+p*S+2*y)+g:(S=0,w<=0?(M=1,b=f+2*d+g):d>=0?(M=0,b=g):b=d*(M=-d/f)+g):(T=p+y-h-d)<=0?(M=0,S=1,b=p+2*y+g):T>=(A=f-2*h+p)?(M=1,S=0,b=f+2*d+g):b=(M=T/A)*(f*M+h*(S=1-M)+2*d)+S*(h*M+p*S+2*y)+g;var I=1-M-S;for(u=0;u<l.length;++u)c[u]=I*r[u]+M*o[u]+S*s[u];return b<0?0:b}},8648:function(r,n,i){r.exports=i(783)},2653:function(r,n,i){var a=i(3865);r.exports=function(r,n){for(var i=r.length,o=Array(i),s=0;s<i;++s)o[s]=a(r[s],n[s]);return o}},5838:function(r,n,i){r.exports=function(r){for(var n=Array(r.length),i=0;i<r.length;++i)n[i]=a(r[i]);return n};var a=i(7842)},8987:function(r,n,i){var a=i(7842),o=i(6504);r.exports=function(r,n){for(var i=a(n),s=r.length,l=Array(s),c=0;c<s;++c)l[c]=o(r[c],i);return l}},544:function(r,n,i){var a=i(5572);r.exports=function(r,n){for(var i=r.length,o=Array(i),s=0;s<i;++s)o[s]=a(r[s],n[s]);return o}},5771:function(r,n,i){var a=i(8507),o=i(3788),s=i(2419);r.exports=function(r){r.sort(o);for(var n=r.length,i=0,l=0;l<n;++l){var c=r[l],u=s(c);if(0!==u){if(i>0){var f=r[i-1];if(0===a(c,f)&&s(f)!==u){i-=1;continue}}r[i++]=c}}return r.length=i,r}},3233:function(r){var n,i="";r.exports=function(r,a){if("string"!=typeof r)throw TypeError("expected a string");if(1===a)return r;if(2===a)return r+r;var o=r.length*a;if(n!==r||void 0===n)n=r,i="";else if(i.length>=o)return i.substr(0,o);for(;o>i.length&&a>1;)1&a&&(i+=r),a>>=1,r+=r;return i=(i+=r).substr(0,o)}},3025:function(r,n,i){r.exports=i.g.performance&&i.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(r){r.exports=function(r){for(var n,i,a=r.length,o=r[r.length-1],s=a,l=a-2;l>=0;--l){var c=o;(i=(n=r[l])-((o=c+n)-c))&&(r[--s]=o,o=i)}var u=0;for(l=s;l<a;++l)(i=(n=o)-((o=(c=r[l])+n)-c))&&(r[u++]=i);return r[u++]=o,r.length=u,r}},2962:function(r,n,i){var a=i(5250),o=i(8210),s=i(3012),l=i(7004);function c(r){return(2===r?function(r,n,i,a){return function(n){return a(r(i(n[0][0],n[1][1]),i(-n[0][1],n[1][0])))}}:3===r?function(r,n,i,a){return function(o){return a(r(n(r(i(o[1][1],o[2][2]),i(-o[1][2],o[2][1])),o[0][0]),r(n(r(i(o[1][0],o[2][2]),i(-o[1][2],o[2][0])),-o[0][1]),n(r(i(o[1][0],o[2][1]),i(-o[1][1],o[2][0])),o[0][2]))))}}:4===r?function(r,n,i,a){return function(o){return a(r(r(n(r(n(r(i(o[2][2],o[3][3]),i(-o[2][3],o[3][2])),o[1][1]),r(n(r(i(o[2][1],o[3][3]),i(-o[2][3],o[3][1])),-o[1][2]),n(r(i(o[2][1],o[3][2]),i(-o[2][2],o[3][1])),o[1][3]))),o[0][0]),n(r(n(r(i(o[2][2],o[3][3]),i(-o[2][3],o[3][2])),o[1][0]),r(n(r(i(o[2][0],o[3][3]),i(-o[2][3],o[3][0])),-o[1][2]),n(r(i(o[2][0],o[3][2]),i(-o[2][2],o[3][0])),o[1][3]))),-o[0][1])),r(n(r(n(r(i(o[2][1],o[3][3]),i(-o[2][3],o[3][1])),o[1][0]),r(n(r(i(o[2][0],o[3][3]),i(-o[2][3],o[3][0])),-o[1][1]),n(r(i(o[2][0],o[3][1]),i(-o[2][1],o[3][0])),o[1][3]))),o[0][2]),n(r(n(r(i(o[2][1],o[3][2]),i(-o[2][2],o[3][1])),o[1][0]),r(n(r(i(o[2][0],o[3][2]),i(-o[2][2],o[3][0])),-o[1][1]),n(r(i(o[2][0],o[3][1]),i(-o[2][1],o[3][0])),o[1][2]))),-o[0][3]))))}}:5===r?function(r,n,i,a){return function(o){return a(r(r(n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][2]),r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),-o[2][3]),n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][4]))),o[1][1]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][3]),n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][4]))),-o[1][2])),r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][3]))),-o[1][4]))),o[0][0]),n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][2]),r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),-o[2][3]),n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][3]),n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),o[2][4]))),-o[1][2])),r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][3]))),-o[1][4]))),-o[0][1])),r(n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][3]),n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][3]),n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),o[2][4]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][3]))),-o[1][4]))),o[0][2]),r(n(r(r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][4]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][4]))),o[1][2]),n(r(n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][2]))),-o[1][4]))),-o[0][3]),n(r(r(n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][3]))),o[1][0]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][3]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][3]))),o[1][2]),n(r(n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][2]))),-o[1][3]))),o[0][4])))))}}:void 0)(o,s,a,l)}var u=[function(){return[0]},function(r){return[r[0][0]]}];function f(r,n,i,a,o,s,l,c){return function(u){switch(u.length){case 0:return r(u);case 1:return n(u);case 2:return i(u);case 3:return a(u);case 4:return o(u);case 5:return s(u)}var f=l[u.length];return f||(f=l[u.length]=c(u.length)),f(u)}}!function(){for(;u.length<6;)u.push(c(u.length));r.exports=f.apply(void 0,u.concat([u,c]));for(var n=0;n<u.length;++n)r.exports[n]=u[n]}()},1944:function(r,n,i){var a=i(5250),o=i(8210);r.exports=function(r,n){for(var i=a(r[0],n[0]),s=1;s<r.length;++s)i=o(i,a(r[s],n[s]));return i}},2646:function(r,n,i){var a=i(5250),o=i(8210),s=i(8545),l=i(3012);function c(r){return(3===r?function(r,n,i,a){return function(o,s,l){var c=i(o[0],o[0]),u=a(c,s[0]),f=a(c,l[0]),h=i(s[0],s[0]),p=a(h,o[0]),d=a(h,l[0]),y=i(l[0],l[0]),g=a(y,o[0]),v=r(n(a(y,s[0]),d),n(p,u)),m=n(g,f),x=n(v,m);return x[x.length-1]}}:4===r?function(r,n,i,a){return function(o,s,l,c){var u=r(i(o[0],o[0]),i(o[1],o[1])),f=a(u,s[0]),h=a(u,l[0]),p=a(u,c[0]),d=r(i(s[0],s[0]),i(s[1],s[1])),y=a(d,o[0]),g=a(d,l[0]),v=a(d,c[0]),m=r(i(l[0],l[0]),i(l[1],l[1])),x=a(m,o[0]),b=a(m,s[0]),_=a(m,c[0]),w=r(i(c[0],c[0]),i(c[1],c[1])),T=a(w,o[0]),A=a(w,s[0]),k=a(w,l[0]),M=r(r(a(n(k,_),s[1]),r(a(n(A,v),-l[1]),a(n(b,g),c[1]))),r(a(n(A,v),o[1]),r(a(n(T,p),-s[1]),a(n(y,f),c[1])))),S=r(r(a(n(k,_),o[1]),r(a(n(T,p),-l[1]),a(n(x,h),c[1]))),r(a(n(b,g),o[1]),r(a(n(x,h),-s[1]),a(n(y,f),l[1])))),E=n(M,S);return E[E.length-1]}}:5===r?function(r,n,i,a){return function(o,s,l,c,u){var f=r(i(o[0],o[0]),r(i(o[1],o[1]),i(o[2],o[2]))),h=a(f,s[0]),p=a(f,l[0]),d=a(f,c[0]),y=a(f,u[0]),g=r(i(s[0],s[0]),r(i(s[1],s[1]),i(s[2],s[2]))),v=a(g,o[0]),m=a(g,l[0]),x=a(g,c[0]),b=a(g,u[0]),_=r(i(l[0],l[0]),r(i(l[1],l[1]),i(l[2],l[2]))),w=a(_,o[0]),T=a(_,s[0]),A=a(_,c[0]),k=a(_,u[0]),M=r(i(c[0],c[0]),r(i(c[1],c[1]),i(c[2],c[2]))),S=a(M,o[0]),E=a(M,s[0]),I=a(M,l[0]),L=a(M,u[0]),C=r(i(u[0],u[0]),r(i(u[1],u[1]),i(u[2],u[2]))),O=a(C,o[0]),D=a(C,s[0]),P=a(C,l[0]),B=a(C,c[0]),R=r(r(r(a(r(a(n(B,L),l[1]),r(a(n(P,k),-c[1]),a(n(I,A),u[1]))),s[2]),r(a(r(a(n(B,L),s[1]),r(a(n(D,b),-c[1]),a(n(E,x),u[1]))),-l[2]),a(r(a(n(P,k),s[1]),r(a(n(D,b),-l[1]),a(n(T,m),u[1]))),c[2]))),r(a(r(a(n(I,A),s[1]),r(a(n(E,x),-l[1]),a(n(T,m),c[1]))),-u[2]),r(a(r(a(n(B,L),s[1]),r(a(n(D,b),-c[1]),a(n(E,x),u[1]))),o[2]),a(r(a(n(B,L),o[1]),r(a(n(O,y),-c[1]),a(n(S,d),u[1]))),-s[2])))),r(r(a(r(a(n(D,b),o[1]),r(a(n(O,y),-s[1]),a(n(v,h),u[1]))),c[2]),r(a(r(a(n(E,x),o[1]),r(a(n(S,d),-s[1]),a(n(v,h),c[1]))),-u[2]),a(r(a(n(I,A),s[1]),r(a(n(E,x),-l[1]),a(n(T,m),c[1]))),o[2]))),r(a(r(a(n(I,A),o[1]),r(a(n(S,d),-l[1]),a(n(w,p),c[1]))),-s[2]),r(a(r(a(n(E,x),o[1]),r(a(n(S,d),-s[1]),a(n(v,h),c[1]))),l[2]),a(r(a(n(T,m),o[1]),r(a(n(w,p),-s[1]),a(n(v,h),l[1]))),-c[2]))))),z=r(r(r(a(r(a(n(B,L),l[1]),r(a(n(P,k),-c[1]),a(n(I,A),u[1]))),o[2]),a(r(a(n(B,L),o[1]),r(a(n(O,y),-c[1]),a(n(S,d),u[1]))),-l[2])),r(a(r(a(n(P,k),o[1]),r(a(n(O,y),-l[1]),a(n(w,p),u[1]))),c[2]),a(r(a(n(I,A),o[1]),r(a(n(S,d),-l[1]),a(n(w,p),c[1]))),-u[2]))),r(r(a(r(a(n(P,k),s[1]),r(a(n(D,b),-l[1]),a(n(T,m),u[1]))),o[2]),a(r(a(n(P,k),o[1]),r(a(n(O,y),-l[1]),a(n(w,p),u[1]))),-s[2])),r(a(r(a(n(D,b),o[1]),r(a(n(O,y),-s[1]),a(n(v,h),u[1]))),l[2]),a(r(a(n(T,m),o[1]),r(a(n(w,p),-s[1]),a(n(v,h),l[1]))),-u[2])))),F=n(R,z);return F[F.length-1]}}:function(r,n,i,a){return function(o,s,l,c,u,f){var h=r(r(i(o[0],o[0]),i(o[1],o[1])),r(i(o[2],o[2]),i(o[3],o[3]))),p=a(h,s[0]),d=a(h,l[0]),y=a(h,c[0]),g=a(h,u[0]),v=a(h,f[0]),m=r(r(i(s[0],s[0]),i(s[1],s[1])),r(i(s[2],s[2]),i(s[3],s[3]))),x=a(m,o[0]),b=a(m,l[0]),_=a(m,c[0]),w=a(m,u[0]),T=a(m,f[0]),A=r(r(i(l[0],l[0]),i(l[1],l[1])),r(i(l[2],l[2]),i(l[3],l[3]))),k=a(A,o[0]),M=a(A,s[0]),S=a(A,c[0]),E=a(A,u[0]),I=a(A,f[0]),L=r(r(i(c[0],c[0]),i(c[1],c[1])),r(i(c[2],c[2]),i(c[3],c[3]))),C=a(L,o[0]),O=a(L,s[0]),D=a(L,l[0]),P=a(L,u[0]),B=a(L,f[0]),R=r(r(i(u[0],u[0]),i(u[1],u[1])),r(i(u[2],u[2]),i(u[3],u[3]))),z=a(R,o[0]),F=a(R,s[0]),N=a(R,l[0]),U=a(R,c[0]),j=a(R,f[0]),V=r(r(i(f[0],f[0]),i(f[1],f[1])),r(i(f[2],f[2]),i(f[3],f[3]))),H=a(V,o[0]),q=a(V,s[0]),G=a(V,l[0]),W=a(V,c[0]),Y=a(V,u[0]),Z=r(r(r(a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),l[2]),a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),-c[2])),r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),u[2]),a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),-f[2]))),s[3]),r(a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),s[2]),a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),-c[2])),r(a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),u[2]),a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),-f[2]))),-l[3]),a(r(r(a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),s[2]),a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),-l[2])),r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),u[2]),a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),-f[2]))),c[3]))),r(r(a(r(r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),s[2]),a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),-l[2])),r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),c[2]),a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),-f[2]))),-u[3]),a(r(r(a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),s[2]),a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),-l[2])),r(a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),c[2]),a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),-u[2]))),f[3])),r(a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),s[2]),a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),-c[2])),r(a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),u[2]),a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),-f[2]))),o[3]),a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-c[2])),r(a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),u[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-f[2]))),-s[3])))),r(r(r(a(r(r(a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),u[2]),a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),-f[2]))),c[3]),a(r(r(a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),o[2]),a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),c[2]),a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),-f[2]))),-u[3])),r(a(r(r(a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),o[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-s[2])),r(a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),c[2]),a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),-u[2]))),f[3]),a(r(r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),s[2]),a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),-l[2])),r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),c[2]),a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),-f[2]))),o[3]))),r(r(a(r(r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),o[2]),a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),-l[2])),r(a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),c[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-f[2]))),-s[3]),a(r(r(a(r(a(n(W,B),s[1]),r(a(n(q,T),-c[1]),a(n(O,_),f[1]))),o[2]),a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),c[2]),a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),-f[2]))),l[3])),r(a(r(r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),o[2]),a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-f[2]))),-c[3]),a(r(r(a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),o[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-s[2])),r(a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-c[2]))),f[3]))))),X=r(r(r(a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),l[2]),a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),-c[2])),r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),u[2]),a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),-f[2]))),o[3]),r(a(r(r(a(r(a(n(Y,j),c[1]),r(a(n(W,B),-u[1]),a(n(U,P),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-c[2])),r(a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),u[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-f[2]))),-l[3]),a(r(r(a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-l[2])),r(a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),u[2]),a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),-f[2]))),c[3]))),r(r(a(r(r(a(r(a(n(W,B),l[1]),r(a(n(G,I),-c[1]),a(n(D,S),f[1]))),o[2]),a(r(a(n(W,B),o[1]),r(a(n(H,v),-c[1]),a(n(C,y),f[1]))),-l[2])),r(a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),c[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-f[2]))),-u[3]),a(r(r(a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),o[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-l[2])),r(a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),c[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-u[2]))),f[3])),r(a(r(r(a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),s[2]),a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),-l[2])),r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),u[2]),a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),-f[2]))),o[3]),a(r(r(a(r(a(n(Y,j),l[1]),r(a(n(G,I),-u[1]),a(n(N,E),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-l[2])),r(a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),u[2]),a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),-f[2]))),-s[3])))),r(r(r(a(r(r(a(r(a(n(Y,j),s[1]),r(a(n(q,T),-u[1]),a(n(F,w),f[1]))),o[2]),a(r(a(n(Y,j),o[1]),r(a(n(H,v),-u[1]),a(n(z,g),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),u[2]),a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),-f[2]))),l[3]),a(r(r(a(r(a(n(G,I),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),o[2]),a(r(a(n(G,I),o[1]),r(a(n(H,v),-l[1]),a(n(k,d),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,v),-s[1]),a(n(x,p),f[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-f[2]))),-u[3])),r(a(r(r(a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),o[2]),a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),-s[2])),r(a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-u[2]))),f[3]),a(r(r(a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),s[2]),a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),-l[2])),r(a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),c[2]),a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),-u[2]))),o[3]))),r(r(a(r(r(a(r(a(n(U,P),l[1]),r(a(n(N,E),-c[1]),a(n(D,S),u[1]))),o[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-l[2])),r(a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),c[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-u[2]))),-s[3]),a(r(r(a(r(a(n(U,P),s[1]),r(a(n(F,w),-c[1]),a(n(O,_),u[1]))),o[2]),a(r(a(n(U,P),o[1]),r(a(n(z,g),-c[1]),a(n(C,y),u[1]))),-s[2])),r(a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),c[2]),a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),-u[2]))),l[3])),r(a(r(r(a(r(a(n(N,E),s[1]),r(a(n(F,w),-l[1]),a(n(M,b),u[1]))),o[2]),a(r(a(n(N,E),o[1]),r(a(n(z,g),-l[1]),a(n(k,d),u[1]))),-s[2])),r(a(r(a(n(F,w),o[1]),r(a(n(z,g),-s[1]),a(n(x,p),u[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-u[2]))),-c[3]),a(r(r(a(r(a(n(D,S),s[1]),r(a(n(O,_),-l[1]),a(n(M,b),c[1]))),o[2]),a(r(a(n(D,S),o[1]),r(a(n(C,y),-l[1]),a(n(k,d),c[1]))),-s[2])),r(a(r(a(n(O,_),o[1]),r(a(n(C,y),-s[1]),a(n(x,p),c[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(k,d),-s[1]),a(n(x,p),l[1]))),-c[2]))),u[3]))))),K=n(Z,X);return K[K.length-1]}})(o,s,a,l)}var u=[function(){return 0},function(){return 0},function(){return 0}];function f(r){var n=u[r.length];return n||(n=u[r.length]=c(r.length)),n.apply(void 0,r)}function h(r,n,i,a,o,s,l,c){return function(n,i,u,f,h,p){switch(arguments.length){case 0:case 1:return 0;case 2:return a(n,i);case 3:return o(n,i,u);case 4:return s(n,i,u,f);case 5:return l(n,i,u,f,h);case 6:return c(n,i,u,f,h,p)}for(var d=Array(arguments.length),y=0;y<arguments.length;++y)d[y]=arguments[y];return r(d)}}!function(){for(;u.length<=6;)u.push(c(u.length));r.exports=h.apply(void 0,[f].concat(u));for(var n=0;n<=6;++n)r.exports[n]=u[n]}()},727:function(r,n,i){var a=i(2962);function o(r){return(2===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1]],[+i[1],+n[1][1]]]),r([[+n[0][0],+i[0]],[+n[1][0],+i[1]]]),r(n)]}}:3===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2]],[+i[1],+n[1][1],+n[1][2]],[+i[2],+n[2][1],+n[2][2]]]),r([[+n[0][0],+i[0],+n[0][2]],[+n[1][0],+i[1],+n[1][2]],[+n[2][0],+i[2],+n[2][2]]]),r([[+n[0][0],+n[0][1],+i[0]],[+n[1][0],+n[1][1],+i[1]],[+n[2][0],+n[2][1],+i[2]]]),r(n)]}}:4===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3]],[+i[1],+n[1][1],+n[1][2],+n[1][3]],[+i[2],+n[2][1],+n[2][2],+n[2][3]],[+i[3],+n[3][1],+n[3][2],+n[3][3]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3]],[+n[1][0],+i[1],+n[1][2],+n[1][3]],[+n[2][0],+i[2],+n[2][2],+n[2][3]],[+n[3][0],+i[3],+n[3][2],+n[3][3]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3]],[+n[1][0],+n[1][1],+i[1],+n[1][3]],[+n[2][0],+n[2][1],+i[2],+n[2][3]],[+n[3][0],+n[3][1],+i[3],+n[3][3]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+i[3]]]),r(n)]}}:5===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3],+n[0][4]],[+i[1],+n[1][1],+n[1][2],+n[1][3],+n[1][4]],[+i[2],+n[2][1],+n[2][2],+n[2][3],+n[2][4]],[+i[3],+n[3][1],+n[3][2],+n[3][3],+n[3][4]],[+i[4],+n[4][1],+n[4][2],+n[4][3],+n[4][4]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3],+n[0][4]],[+n[1][0],+i[1],+n[1][2],+n[1][3],+n[1][4]],[+n[2][0],+i[2],+n[2][2],+n[2][3],+n[2][4]],[+n[3][0],+i[3],+n[3][2],+n[3][3],+n[3][4]],[+n[4][0],+i[4],+n[4][2],+n[4][3],+n[4][4]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3],+n[0][4]],[+n[1][0],+n[1][1],+i[1],+n[1][3],+n[1][4]],[+n[2][0],+n[2][1],+i[2],+n[2][3],+n[2][4]],[+n[3][0],+n[3][1],+i[3],+n[3][3],+n[3][4]],[+n[4][0],+n[4][1],+i[4],+n[4][3],+n[4][4]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0],+n[0][4]],[+n[1][0],+n[1][1],+n[1][2],+i[1],+n[1][4]],[+n[2][0],+n[2][1],+n[2][2],+i[2],+n[2][4]],[+n[3][0],+n[3][1],+n[3][2],+i[3],+n[3][4]],[+n[4][0],+n[4][1],+n[4][2],+i[4],+n[4][4]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+i[3]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+i[4]]]),r(n)]}}:function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3],+n[0][4],+n[0][5]],[+i[1],+n[1][1],+n[1][2],+n[1][3],+n[1][4],+n[1][5]],[+i[2],+n[2][1],+n[2][2],+n[2][3],+n[2][4],+n[2][5]],[+i[3],+n[3][1],+n[3][2],+n[3][3],+n[3][4],+n[3][5]],[+i[4],+n[4][1],+n[4][2],+n[4][3],+n[4][4],+n[4][5]],[+i[5],+n[5][1],+n[5][2],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3],+n[0][4],+n[0][5]],[+n[1][0],+i[1],+n[1][2],+n[1][3],+n[1][4],+n[1][5]],[+n[2][0],+i[2],+n[2][2],+n[2][3],+n[2][4],+n[2][5]],[+n[3][0],+i[3],+n[3][2],+n[3][3],+n[3][4],+n[3][5]],[+n[4][0],+i[4],+n[4][2],+n[4][3],+n[4][4],+n[4][5]],[+n[5][0],+i[5],+n[5][2],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3],+n[0][4],+n[0][5]],[+n[1][0],+n[1][1],+i[1],+n[1][3],+n[1][4],+n[1][5]],[+n[2][0],+n[2][1],+i[2],+n[2][3],+n[2][4],+n[2][5]],[+n[3][0],+n[3][1],+i[3],+n[3][3],+n[3][4],+n[3][5]],[+n[4][0],+n[4][1],+i[4],+n[4][3],+n[4][4],+n[4][5]],[+n[5][0],+n[5][1],+i[5],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0],+n[0][4],+n[0][5]],[+n[1][0],+n[1][1],+n[1][2],+i[1],+n[1][4],+n[1][5]],[+n[2][0],+n[2][1],+n[2][2],+i[2],+n[2][4],+n[2][5]],[+n[3][0],+n[3][1],+n[3][2],+i[3],+n[3][4],+n[3][5]],[+n[4][0],+n[4][1],+n[4][2],+i[4],+n[4][4],+n[4][5]],[+n[5][0],+n[5][1],+n[5][2],+i[5],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+i[0],+n[0][5]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+i[1],+n[1][5]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+i[2],+n[2][5]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+i[3],+n[3][5]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+i[4],+n[4][5]],[+n[5][0],+n[5][1],+n[5][2],+n[5][3],+i[5],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+n[0][4],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+n[1][4],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+n[2][4],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+n[3][4],+i[3]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+n[4][4],+i[4]],[+n[5][0],+n[5][1],+n[5][2],+n[5][3],+n[5][4],+i[5]]]),r(n)]}})(r<6?a[r]:a)}var s=[function(){return[[0]]},function(r,n){return[[n[0]],[r[0][0]]]}];function l(r,n,i,a,o,s,l,c){return function(u,f){switch(u.length){case 0:return r(u,f);case 1:return n(u,f);case 2:return i(u,f);case 3:return a(u,f);case 4:return o(u,f);case 5:return s(u,f)}var h=l[u.length];return h||(h=l[u.length]=c(u.length)),h(u,f)}}!function(){for(;s.length<6;)s.push(o(s.length));r.exports=l.apply(void 0,s.concat([s,o]));for(var n=0;n<6;++n)r.exports[n]=s[n]}()},3250:function(r,n,i){var a=i(5250),o=i(8210),s=i(3012),l=i(8545);function c(r){return(3===r?function(r,n,i,a){return function(i,o,s){var l=a(r(r(n(o[1],s[0]),n(-s[1],o[0])),r(n(i[1],o[0]),n(-o[1],i[0]))),r(n(i[1],s[0]),n(-s[1],i[0])));return l[l.length-1]}}:4===r?function(r,n,i,a){return function(o,s,l,c){var u=a(r(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),c[2]))),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),c[2])))),r(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),c[2]))),r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2])))));return u[u.length-1]}}:function(r,n,i,a){return function(o,s,l,c,u){var f=a(r(r(r(i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),l[2]),r(i(r(n(l[1],u[0]),n(-u[1],l[0])),-c[2]),i(r(n(l[1],c[0]),n(-c[1],l[0])),u[2]))),s[3]),r(i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-c[2]),i(r(n(s[1],c[0]),n(-c[1],s[0])),u[2]))),-l[3]),i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),u[2]))),c[3]))),r(i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),c[2]))),-u[3]),r(i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-c[2]),i(r(n(s[1],c[0]),n(-c[1],s[0])),u[2]))),o[3]),i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-c[2]),i(r(n(o[1],c[0]),n(-c[1],o[0])),u[2]))),-s[3])))),r(r(i(r(i(r(n(s[1],u[0]),n(-u[1],s[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),c[3]),r(i(r(i(r(n(s[1],c[0]),n(-c[1],s[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),c[2]))),-u[3]),i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),c[2]))),o[3]))),r(i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),c[2]))),-s[3]),r(i(r(i(r(n(s[1],c[0]),n(-c[1],s[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),c[2]))),l[3]),i(r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2]))),-c[3]))))),r(r(r(i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),l[2]),r(i(r(n(l[1],u[0]),n(-u[1],l[0])),-c[2]),i(r(n(l[1],c[0]),n(-c[1],l[0])),u[2]))),o[3]),i(r(i(r(n(c[1],u[0]),n(-u[1],c[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-c[2]),i(r(n(o[1],c[0]),n(-c[1],o[0])),u[2]))),-l[3])),r(i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),u[2]))),c[3]),i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),c[2]))),-u[3]))),r(r(i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),u[2]))),o[3]),i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),u[2]))),-s[3])),r(i(r(i(r(n(s[1],u[0]),n(-u[1],s[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),l[3]),i(r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2]))),-u[3])))));return f[f.length-1]}})(o,a,s,l)}var u=c(3),f=c(4),h=[function(){return 0},function(){return 0},function(r,n){return n[0]-r[0]},function(r,n,i){var a,o=(r[1]-i[1])*(n[0]-i[0]),s=(r[0]-i[0])*(n[1]-i[1]),l=o-s;if(o>0){if(s<=0)return l;a=o+s}else{if(!(o<0)||s>=0)return l;a=-(o+s)}var c=33306690738754716e-32*a;return l>=c||l<=-c?l:u(r,n,i)},function(r,n,i,a){var o=r[0]-a[0],s=n[0]-a[0],l=i[0]-a[0],c=r[1]-a[1],u=n[1]-a[1],h=i[1]-a[1],p=r[2]-a[2],d=n[2]-a[2],y=i[2]-a[2],g=s*h,v=l*u,m=l*c,x=o*h,b=o*u,_=s*c,w=p*(g-v)+d*(m-x)+y*(b-_),T=7771561172376103e-31*((Math.abs(g)+Math.abs(v))*Math.abs(p)+(Math.abs(m)+Math.abs(x))*Math.abs(d)+(Math.abs(b)+Math.abs(_))*Math.abs(y));return w>T||-w>T?w:f(r,n,i,a)}];function p(r){var n=h[r.length];return n||(n=h[r.length]=c(r.length)),n.apply(void 0,r)}function d(r,n,i,a,o,s,l){return function(n,i,c,u,f){switch(arguments.length){case 0:case 1:return 0;case 2:return a(n,i);case 3:return o(n,i,c);case 4:return s(n,i,c,u);case 5:return l(n,i,c,u,f)}for(var h=Array(arguments.length),p=0;p<arguments.length;++p)h[p]=arguments[p];return r(h)}}!function(){for(;h.length<=5;)h.push(c(h.length));r.exports=d.apply(void 0,[p].concat(h));for(var n=0;n<=5;++n)r.exports[n]=h[n]}()},5382:function(r,n,i){var a=i(8210),o=i(3012);r.exports=function(r,n){if(1===r.length)return o(n,r[0]);if(1===n.length)return o(r,n[0]);if(0===r.length||0===n.length)return[0];var i=[0];if(r.length<n.length)for(var s=0;s<r.length;++s)i=a(i,o(n,r[s]));else for(s=0;s<n.length;++s)i=a(i,o(r,n[s]));return i}},3012:function(r,n,i){var a=i(5250),o=i(9362);r.exports=function(r,n){var i=r.length;if(1===i){var s=a(r[0],n);return s[0]?s:[s[1]]}var l=Array(2*i),c=[.1,.1],u=[.1,.1],f=0;a(r[0],n,c),c[0]&&(l[f++]=c[0]);for(var h=1;h<i;++h){a(r[h],n,u),o(c[1],u[0],c),c[0]&&(l[f++]=c[0]);var p=u[1],d=c[1],y=p+d,g=d-(y-p);c[1]=y,g&&(l[f++]=g)}return c[1]&&(l[f++]=c[1]),0===f&&(l[f++]=0),l.length=f,l}},1125:function(r,n,i){r.exports=function(r,n,i,o){var s=a(r,i,o),l=a(n,i,o);if(s>0&&l>0||s<0&&l<0)return!1;var c=a(i,r,n),u=a(o,r,n);return!(c>0&&u>0||c<0&&u<0)&&(0!==s||0!==l||0!==c||0!==u||function(r,n,i,a){for(var o=0;o<2;++o){var s=r[o],l=n[o],c=Math.min(s,l),u=Math.max(s,l),f=i[o],h=a[o],p=Math.min(f,h);if(Math.max(f,h)<c||u<p)return!1}return!0}(r,n,i,o))};var a=i(3250)[3]},8545:function(r){r.exports=function(r,n){var i=0|r.length,a=0|n.length;if(1===i&&1===a)return c=(l=(o=r[0])+(s=-n[0]))-o,(u=o-(l-c)+(s-c))?[u,l]:[l];var o,s,l,c,u,f,h,p=Array(i+a),d=0,y=0,g=0,v=Math.abs,m=r[0],x=v(m),b=-n[g],_=v(b);x<_?(h=m,(y+=1)<i&&(x=v(m=r[y]))):(h=b,(g+=1)<a&&(_=v(b=-n[g]))),y<i&&x<_||g>=a?(f=m,(y+=1)<i&&(x=v(m=r[y]))):(f=b,(g+=1)<a&&(_=v(b=-n[g])));for(var w,T,A=f+h,k=A-f,M=h-k,S=M,E=A;y<i&&g<a;)x<_?(f=m,(y+=1)<i&&(x=v(m=r[y]))):(f=b,(g+=1)<a&&(_=v(b=-n[g]))),(M=(h=S)-(k=(A=f+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w;for(;y<i;)(M=(h=S)-(k=(A=(f=m)+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w,(y+=1)<i&&(m=r[y]);for(;g<a;)(M=(h=S)-(k=(A=(f=b)+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w,(g+=1)<a&&(b=-n[g]);return S&&(p[d++]=S),E&&(p[d++]=E),d||(p[d++]=0),p.length=d,p}},8210:function(r){r.exports=function(r,n){var i=0|r.length,a=0|n.length;if(1===i&&1===a)return c=(l=(o=r[0])+(s=n[0]))-o,(u=o-(l-c)+(s-c))?[u,l]:[l];var o,s,l,c,u,f,h,p=Array(i+a),d=0,y=0,g=0,v=Math.abs,m=r[0],x=v(m),b=n[g],_=v(b);x<_?(h=m,(y+=1)<i&&(x=v(m=r[y]))):(h=b,(g+=1)<a&&(_=v(b=n[g]))),y<i&&x<_||g>=a?(f=m,(y+=1)<i&&(x=v(m=r[y]))):(f=b,(g+=1)<a&&(_=v(b=n[g])));for(var w,T,A=f+h,k=A-f,M=h-k,S=M,E=A;y<i&&g<a;)x<_?(f=m,(y+=1)<i&&(x=v(m=r[y]))):(f=b,(g+=1)<a&&(_=v(b=n[g]))),(M=(h=S)-(k=(A=f+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w;for(;y<i;)(M=(h=S)-(k=(A=(f=m)+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w,(y+=1)<i&&(m=r[y]);for(;g<a;)(M=(h=S)-(k=(A=(f=b)+h)-f))&&(p[d++]=M),S=E-((w=E+A)-(T=w-E))+(A-T),E=w,(g+=1)<a&&(b=n[g]);return S&&(p[d++]=S),E&&(p[d++]=E),d||(p[d++]=0),p.length=d,p}},9127:function(r,n,i){r.exports=function(r){return o(a(r))};var a=i(6204),o=i(5771)},7765:function(r,n,i){r.exports=function(r,n,i,c){if(i=i||0,void 0===c&&(c=function(r){for(var n=r.length,i=0,a=0;a<n;++a)i=0|Math.max(i,r[a].length);return i-1}(r)),0===r.length||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var u=function(r,n){for(var i=r.length,a=o.mallocUint8(i),s=0;s<i;++s)a[s]=r[s]<n|0;return a}(n,+i),f=function(r,n){for(var i=r.length,l=n*(n+1)/2*i|0,c=o.mallocUint32(2*l),u=0,f=0;f<i;++f)for(var h=r[f],p=(n=h.length,0);p<n;++p)for(var d=0;d<p;++d){var y=h[d],g=h[p];c[u++]=0|Math.min(y,g),c[u++]=0|Math.max(y,g)}s(a(c,[u/2|0,2]));var v=2;for(f=2;f<u;f+=2)c[f-2]===c[f]&&c[f-1]===c[f+1]||(c[v++]=c[f],c[v++]=c[f+1]);return a(c,[v/2|0,2])}(r,c),h=function(r,n,i,s){for(var l=r.data,c=r.shape[0],u=o.mallocDouble(c),f=0,h=0;h<c;++h){var p=l[2*h],d=l[2*h+1];if(i[p]!==i[d]){var y=n[p],g=n[d];l[2*f]=p,l[2*f+1]=d,u[f++]=(g-s)/(g-y)}}return r.shape[0]=f,a(u,[f])}(f,n,u,+i),p=function(r,n){var i=o.mallocInt32(2*n),a=r.shape[0],s=r.data;i[0]=0;for(var l=0,c=0;c<a;++c){var u=s[2*c];if(u!==l){for(i[2*l+1]=c;++l<u;)i[2*l]=c,i[2*l+1]=c;i[2*l]=c}}for(i[2*l+1]=a;++l<n;)i[2*l]=i[2*l+1]=a;return i}(f,0|n.length),d=l(c)(r,f.data,p,u),y=function(r){for(var n=0|r.shape[0],i=r.data,a=Array(n),o=0;o<n;++o)a[o]=[i[2*o],i[2*o+1]];return a}(f),g=[].slice.call(h.data,0,h.shape[0]);return o.free(u),o.free(f.data),o.free(h.data),o.free(p),{cells:d,vertexIds:y,vertexWeights:g}};var a=i(9618),o=i(1888),s=i(446),l=i(1570)},1570:function(r){r.exports=function(r){return n[r]()};var n=[function(){return function(r,n,i,a){for(var o=r.length,s=0;s<o;++s)r[s].length;return[]}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],c=r[2*o+1];l<c;){var u=l+c>>1,f=n[2*u+1];if(f===s)return u;s<f?c=u:l=u+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],c=0;c<s;++c){var u=n[c];if(2===u.length){var f=(o[u[0]]<<0)+(o[u[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:case 3:break;case 1:l.push([r(a,i,u[0],u[1])]);break;case 2:l.push([r(a,i,u[1],u[0])])}}}return l}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],c=r[2*o+1];l<c;){var u=l+c>>1,f=n[2*u+1];if(f===s)return u;s<f?c=u:l=u+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],c=0;c<s;++c){var u,f=n[c],h=f.length;if(3===h){if(0==(u=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2))||7===u)continue;switch(u){case 0:case 7:break;case 1:l.push([r(a,i,f[0],f[2]),r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0]),r(a,i,f[1],f[2])]);break;case 3:l.push([r(a,i,f[0],f[2]),r(a,i,f[1],f[2])]);break;case 4:l.push([r(a,i,f[2],f[1]),r(a,i,f[2],f[0])]);break;case 5:l.push([r(a,i,f[2],f[1]),r(a,i,f[0],f[1])]);break;case 6:l.push([r(a,i,f[1],f[0]),r(a,i,f[2],f[0])])}}else if(2===h){if(0==(u=(o[f[0]]<<0)+(o[f[1]]<<1))||3===u)continue;switch(u){case 0:case 3:break;case 1:l.push([r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0])])}}}return l}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],c=r[2*o+1];l<c;){var u=l+c>>1,f=n[2*u+1];if(f===s)return u;s<f?c=u:l=u+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],c=0;c<s;++c){var u,f=n[c],h=f.length;if(4===h){if(0==(u=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2)+(o[f[3]]<<3))||15===u)continue;switch(u){case 0:case 15:break;case 1:l.push([r(a,i,f[0],f[1]),r(a,i,f[0],f[2]),r(a,i,f[0],f[3])]);break;case 2:l.push([r(a,i,f[1],f[2]),r(a,i,f[1],f[0]),r(a,i,f[1],f[3])]);break;case 3:l.push([r(a,i,f[1],f[2]),r(a,i,f[0],f[2]),r(a,i,f[0],f[3])],[r(a,i,f[1],f[3]),r(a,i,f[1],f[2]),r(a,i,f[0],f[3])]);break;case 4:l.push([r(a,i,f[2],f[0]),r(a,i,f[2],f[1]),r(a,i,f[2],f[3])]);break;case 5:l.push([r(a,i,f[0],f[1]),r(a,i,f[2],f[1]),r(a,i,f[0],f[3])],[r(a,i,f[2],f[1]),r(a,i,f[2],f[3]),r(a,i,f[0],f[3])]);break;case 6:l.push([r(a,i,f[2],f[0]),r(a,i,f[1],f[0]),r(a,i,f[1],f[3])],[r(a,i,f[2],f[3]),r(a,i,f[2],f[0]),r(a,i,f[1],f[3])]);break;case 7:l.push([r(a,i,f[0],f[3]),r(a,i,f[1],f[3]),r(a,i,f[2],f[3])]);break;case 8:l.push([r(a,i,f[3],f[1]),r(a,i,f[3],f[0]),r(a,i,f[3],f[2])]);break;case 9:l.push([r(a,i,f[3],f[1]),r(a,i,f[0],f[1]),r(a,i,f[0],f[2])],[r(a,i,f[3],f[2]),r(a,i,f[3],f[1]),r(a,i,f[0],f[2])]);break;case 10:l.push([r(a,i,f[1],f[0]),r(a,i,f[3],f[0]),r(a,i,f[1],f[2])],[r(a,i,f[3],f[0]),r(a,i,f[3],f[2]),r(a,i,f[1],f[2])]);break;case 11:l.push([r(a,i,f[1],f[2]),r(a,i,f[0],f[2]),r(a,i,f[3],f[2])]);break;case 12:l.push([r(a,i,f[3],f[0]),r(a,i,f[2],f[0]),r(a,i,f[2],f[1])],[r(a,i,f[3],f[1]),r(a,i,f[3],f[0]),r(a,i,f[2],f[1])]);break;case 13:l.push([r(a,i,f[0],f[1]),r(a,i,f[2],f[1]),r(a,i,f[3],f[1])]);break;case 14:l.push([r(a,i,f[2],f[0]),r(a,i,f[1],f[0]),r(a,i,f[3],f[0])])}}else if(3===h){if(0==(u=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2))||7===u)continue;switch(u){case 0:case 7:break;case 1:l.push([r(a,i,f[0],f[2]),r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0]),r(a,i,f[1],f[2])]);break;case 3:l.push([r(a,i,f[0],f[2]),r(a,i,f[1],f[2])]);break;case 4:l.push([r(a,i,f[2],f[1]),r(a,i,f[2],f[0])]);break;case 5:l.push([r(a,i,f[2],f[1]),r(a,i,f[0],f[1])]);break;case 6:l.push([r(a,i,f[1],f[0]),r(a,i,f[2],f[0])])}}else if(2===h){if(0==(u=(o[f[0]]<<0)+(o[f[1]]<<1))||3===u)continue;switch(u){case 0:case 3:break;case 1:l.push([r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0])])}}}return l}}]},6803:function(r,n,i){i(8828),i(1755),n.Fw=function(r,n){var i=r.length,a=r.length-n.length,o=Math.min;if(a)return a;switch(i){case 0:return 0;case 1:return r[0]-n[0];case 2:return(c=r[0]+r[1]-n[0]-n[1])||o(r[0],r[1])-o(n[0],n[1]);case 3:var s=r[0]+r[1],l=n[0]+n[1];if(c=s+r[2]-(l+n[2]))return c;var c,u=o(r[0],r[1]),f=o(n[0],n[1]);return(c=o(u,r[2])-o(f,n[2]))||o(u+r[2],s)-o(f+n[2],l);default:var h=r.slice(0);h.sort();var p=n.slice(0);p.sort();for(var d=0;d<i;++d)if(a=h[d]-p[d])return a;return 0}}},3105:function(r,n){function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},2014:function(r,n,i){var a=i(3105),o=i(4623);function s(r,n){var i=r.length,a=r.length-n.length,o=Math.min;if(a)return a;switch(i){case 0:return 0;case 1:return r[0]-n[0];case 2:return(c=r[0]+r[1]-n[0]-n[1])||o(r[0],r[1])-o(n[0],n[1]);case 3:var s=r[0]+r[1],l=n[0]+n[1];if(c=s+r[2]-(l+n[2]))return c;var c,u=o(r[0],r[1]),f=o(n[0],n[1]);return(c=o(u,r[2])-o(f,n[2]))||o(u+r[2],s)-o(f+n[2],l);default:var h=r.slice(0);h.sort();var p=n.slice(0);p.sort();for(var d=0;d<i;++d)if(a=h[d]-p[d])return a;return 0}}function l(r,n){return s(r[0],n[0])}function c(r,n){if(n){for(var i=r.length,a=Array(i),o=0;o<i;++o)a[o]=[r[o],n[o]];for(a.sort(l),o=0;o<i;++o)r[o]=a[o][0],n[o]=a[o][1];return r}return r.sort(s),r}function u(r){if(0===r.length)return[];for(var n=1,i=r.length,a=1;a<i;++a){var o=r[a];if(s(o,r[a-1])){if(a===n){n++;continue}r[n++]=o}}return r.length=n,r}function f(r,n){for(var i=0,a=r.length-1,o=-1;i<=a;){var l=i+a>>1,c=s(r[l],n);c<=0?(0===c&&(o=l),i=l+1):c>0&&(a=l-1)}return o}function h(r,n){for(var i=Array(r.length),o=0,l=i.length;o<l;++o)i[o]=[];for(var c=[],u=(o=0,n.length);o<u;++o)for(var h=n[o],p=h.length,d=1,y=1<<p;d<y;++d){c.length=a.popCount(d);for(var g=0,v=0;v<p;++v)d&1<<v&&(c[g++]=h[v]);var m=f(r,c);if(!(m<0))for(;i[m++].push(o),!(m>=r.length||0!==s(r[m],c)););}return i}function p(r,n){if(n<0)return[];for(var i=[],o=(1<<n+1)-1,s=0;s<r.length;++s)for(var l=r[s],u=o;u<1<<l.length;u=a.nextCombination(u)){for(var f=Array(n+1),h=0,p=0;p<l.length;++p)u&1<<p&&(f[h++]=l[p]);i.push(f)}return c(i)}n.dimension=function(r){for(var n=0,i=Math.max,a=0,o=r.length;a<o;++a)n=i(n,r[a].length);return n-1},n.countVertices=function(r){for(var n=-1,i=Math.max,a=0,o=r.length;a<o;++a)for(var s=r[a],l=0,c=s.length;l<c;++l)n=i(n,s[l]);return n+1},n.cloneCells=function(r){for(var n=Array(r.length),i=0,a=r.length;i<a;++i)n[i]=r[i].slice(0);return n},n.compareCells=s,n.normalize=c,n.unique=u,n.findCell=f,n.incidence=h,n.dual=function(r,n){if(!n)return h(u(p(r,0)),r);for(var i=Array(n),a=0;a<n;++a)i[a]=[];a=0;for(var o=r.length;a<o;++a)for(var s=r[a],l=0,c=s.length;l<c;++l)i[s[l]].push(a);return i},n.explode=function(r){for(var n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0|o.length,l=1,u=1<<s;l<u;++l){for(var f=[],h=0;h<s;++h)l>>>h&1&&f.push(o[h]);n.push(f)}return c(n)},n.skeleton=p,n.boundary=function(r){for(var n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;++s){for(var u=Array(o.length-1),f=0,h=0;f<l;++f)f!==s&&(u[h++]=o[f]);n.push(u)}return c(n)},n.connectedComponents=function(r,n){return n?function(r,n){for(var i=new o(n),a=0;a<r.length;++a)for(var s=r[a],l=0;l<s.length;++l)for(var c=l+1;c<s.length;++c)i.link(s[l],s[c]);var u=[],f=i.ranks;for(a=0;a<f.length;++a)f[a]=-1;for(a=0;a<r.length;++a){var h=i.find(r[a][0]);f[h]<0?(f[h]=u.length,u.push([r[a].slice(0)])):u[f[h]].push(r[a].slice(0))}return u}(r,n):function(r){for(var n=u(c(p(r,0))),i=new o(n.length),a=0;a<r.length;++a)for(var s=r[a],l=0;l<s.length;++l)for(var h=f(n,[s[l]]),d=l+1;d<s.length;++d)i.link(h,f(n,[s[d]]));var y=[],g=i.ranks;for(a=0;a<g.length;++a)g[a]=-1;for(a=0;a<r.length;++a){var v=i.find(f(n,[r[a][0]]));g[v]<0?(g[v]=y.length,y.push([r[a].slice(0)])):y[g[v]].push(r[a].slice(0))}return y}(r)}},4623:function(r){function n(r){this.roots=Array(r),this.ranks=Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}r.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},n.prototype.find=function(r){for(var n=this.roots;n[r]!==r;){var i=n[r];n[r]=n[i],r=i}return r},n.prototype.link=function(r,n){var i=this.find(r),a=this.find(n);if(i!==a){var o=this.ranks,s=this.roots,l=o[i],c=o[a];l<c?s[i]=a:c<l?s[a]=i:(s[a]=i,++o[i])}}},5878:function(r,n,i){r.exports=function(r,n,i){for(var s=n.length,l=r.length,c=Array(s),u=Array(s),f=Array(s),h=Array(s),p=0;p<s;++p)c[p]=u[p]=-1,f[p]=1/0,h[p]=!1;for(p=0;p<l;++p){var d=r[p];if(2!==d.length)throw Error("Input must be a graph");var y=d[1],g=d[0];-1!==u[g]?u[g]=-2:u[g]=y,-1!==c[y]?c[y]=-2:c[y]=g}function v(r){if(h[r])return 1/0;var i,o,s=c[r],l=u[r];return s<0||l<0?1/0:Math.abs(a(n[r],i=n[s],o=n[l]))/Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2))}function m(r,n){var i=A[r],a=A[n];A[r]=a,A[n]=i,k[i]=n,k[a]=r}function x(r){return f[A[r]]}function b(r){for(var n=x(r);;){var i=n,a=2*r+1,o=2*(r+1),s=r;if(a<M){var l=x(a);l<i&&(s=a,i=l)}if(o<M&&x(o)<i&&(s=o),s===r)return r;m(r,s),r=s}}function _(r){for(var n=x(r);r>0;){var i,a=1&(i=r)?i-1>>1:(i>>1)-1;if(!(a>=0&&n<x(a)))return r;m(r,a),r=a}}function w(){if(M>0){var r=A[0];return m(0,M-1),M-=1,b(0),r}return -1}function T(r,n){var i=A[r];return f[i]===n?r:(f[i]=-1/0,_(r),w(),f[i]=n,_((M+=1)-1))}var A=[],k=Array(s);for(p=0;p<s;++p)(f[p]=v(p))<1/0?(k[p]=A.length,A.push(p)):k[p]=-1;var M=A.length;for(p=M>>1;p>=0;--p)b(p);for(;;){var S=w();if(S<0||f[S]>i)break;!function(r){if(!h[r]){h[r]=!0;var n=c[r],i=u[r];c[i]>=0&&(c[i]=n),u[n]>=0&&(u[n]=i),k[n]>=0&&T(k[n],v(n)),k[i]>=0&&T(k[i],v(i))}}(S)}var E=[];for(p=0;p<s;++p)h[p]||(k[p]=E.length,E.push(n[p].slice()));function I(r,n){if(r[n]<0)return n;var i=n,a=n;do{var o=r[a];if(!h[a]||o<0||o===a||(o=r[a=o],!h[a]||o<0||o===a))break;a=o,i=r[i]}while(i!==a)for(var s=n;s!==a;s=r[s])r[s]=a;return a}var L=[];return r.forEach(function(r){var n=I(c,r[0]),i=I(u,r[1]);if(n>=0&&i>=0&&n!==i){var a=k[n],o=k[i];a!==o&&L.push([a,o])}}),o.unique(o.normalize(L)),{positions:E,edges:L}};var a=i(3250),o=i(2014)},1303:function(r,n,i){r.exports=function(r,n){if(n[0][0]<n[1][0])i=n[0],s=n[1];else{if(!(n[0][0]>n[1][0]))return o(n,r);i=n[1],s=n[0]}if(r[0][0]<r[1][0])l=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-o(r,n);l=r[1],c=r[0]}var i,s,l,c,u=a(i,s,c),f=a(i,s,l);if(u<0){if(f<=0)return u}else if(u>0){if(f>=0)return u}else if(f)return f;if(u=a(c,l,s),f=a(c,l,i),u<0){if(f<=0)return u}else if(u>0){if(f>=0)return u}else if(f)return f;return s[0]-c[0]};var a=i(3250);function o(r,n){if(n[0][0]<n[1][0])i=n[0],o=n[1];else{if(!(n[0][0]>n[1][0])){var i,o,s,l,c=Math.min(r[0][1],r[1][1]),u=Math.max(r[0][1],r[1][1]),f=Math.min(n[0][1],n[1][1]),h=Math.max(n[0][1],n[1][1]);return u<f?u-f:c>h?c-h:u-h}i=n[1],o=n[0]}r[0][1]<r[1][1]?(s=r[0],l=r[1]):(s=r[1],l=r[0]);var p=a(o,i,s);return p||(p=a(o,i,l))||l-o}},4209:function(r,n,i){r.exports=function(r){for(var n=r.length,i=2*n,a=Array(i),s=0;s<n;++s){var u=r[s],f=u[0][0]<u[1][0];a[2*s]=new p(u[0][0],u,f,s),a[2*s+1]=new p(u[1][0],u,!f,s)}a.sort(function(r,n){var i=r.x-n.x;return i||(i=r.create-n.create)||Math.min(r.segment[0][1],r.segment[1][1])-Math.min(n.segment[0][1],n.segment[1][1])});var d=o(l),y=[],g=[],v=[];for(s=0;s<i;){for(var m=a[s].x,x=[];s<i;){var b=a[s];if(b.x!==m)break;s+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(x.push(new h(b.segment[0][1],b.index,!0,!0)),x.push(new h(b.segment[1][1],b.index,!1,!1))):(x.push(new h(b.segment[1][1],b.index,!0,!1)),x.push(new h(b.segment[0][1],b.index,!1,!0)))):d=b.create?d.insert(b.segment,b.index):d.remove(b.segment)}y.push(d.root),g.push(m),v.push(x)}return new c(y,g,v)};var a=i(2478),o=i(3840),s=i(3250),l=i(1303);function c(r,n,i){this.slabs=r,this.coordinates=n,this.horizontal=i}function u(r,n){return r.y-n}function f(r,n){for(var i=null;r;){var a,o,l,c=r.key;c[0][0]<c[1][0]?(o=c[0],l=c[1]):(o=c[1],l=c[0]);var u=s(o,l,n);if(u<0)r=r.left;else if(u>0){if(n[0]!==c[1][0])i=r,r=r.right;else{if(a=f(r.right,n))return a;r=r.left}}else{if(n[0]!==c[1][0])return r;if(a=f(r.right,n))return a;r=r.left}}return i}function h(r,n,i,a){this.y=r,this.index=n,this.start=i,this.closed=a}function p(r,n,i,a){this.x=r,this.segment=n,this.create=i,this.index=a}c.prototype.castUp=function(r){var n=a.le(this.coordinates,r[0]);if(n<0)return -1;this.slabs[n];var i=f(this.slabs[n],r),o=-1;if(i&&(o=i.value),this.coordinates[n]===r[0]){var c=null;if(i&&(c=i.key),n>0){var h=f(this.slabs[n-1],r);h&&(c?l(h.key,c)>0&&(c=h.key,o=h.value):(o=h.value,c=h.key))}var p=this.horizontal[n];if(p.length>0){var d=a.ge(p,r[1],u);if(d<p.length){var y=p[d];if(r[1]===y.y){if(y.closed)return y.index;for(;d<p.length-1&&p[d+1].y===r[1];)if((y=p[d+=1]).closed)return y.index;if(y.y===r[1]&&!y.start){if((d+=1)>=p.length)return o;y=p[d]}}if(y.start){if(c){var g=s(c[0],c[1],[r[0],y.y]);c[0][0]>c[1][0]&&(g=-g),g>0&&(o=y.index)}else o=y.index}else y.y!==r[1]&&(o=y.index)}}}return o}},5202:function(r,n,i){var a=i(1944),o=i(8210);function s(r,n){var i=o(a(r,n),[n[n.length-1]]);return i[i.length-1]}function l(r,n,i,a){var o=-n/(a-n);o<0?o=0:o>1&&(o=1);for(var s=1-o,l=r.length,c=Array(l),u=0;u<l;++u)c[u]=o*r[u]+s*i[u];return c}r.exports=function(r,n){for(var i=[],a=[],o=s(r[r.length-1],n),c=r[r.length-1],u=r[0],f=0;f<r.length;++f,c=u){var h=s(u=r[f],n);if(o<0&&h>0||o>0&&h<0){var p=l(c,h,u,o);i.push(p),a.push(p.slice())}h<0?a.push(u.slice()):h>0?i.push(u.slice()):(i.push(u.slice()),a.push(u.slice())),o=h}return{positive:i,negative:a}},r.exports.positive=function(r,n){for(var i=[],a=s(r[r.length-1],n),o=r[r.length-1],c=r[0],u=0;u<r.length;++u,o=c){var f=s(c=r[u],n);(a<0&&f>0||a>0&&f<0)&&i.push(l(o,f,c,a)),f>=0&&i.push(c.slice()),a=f}return i},r.exports.negative=function(r,n){for(var i=[],a=s(r[r.length-1],n),o=r[r.length-1],c=r[0],u=0;u<r.length;++u,o=c){var f=s(c=r[u],n);(a<0&&f>0||a>0&&f<0)&&i.push(l(o,f,c,a)),f<=0&&i.push(c.slice()),a=f}return i}},3387:function(r,n,i){var a;!function(){var o={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(r){return function(r,n){var i,a,l,c,u,f,h,p,d,y=1,g=r.length,v="";for(a=0;a<g;a++)if("string"==typeof r[a])v+=r[a];else if("object"==typeof r[a]){if((c=r[a]).keys)for(i=n[y],l=0;l<c.keys.length;l++){if(null==i)throw Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[l],c.keys[l-1]));i=i[c.keys[l]]}else i=c.param_no?n[c.param_no]:n[y++];if(o.not_type.test(c.type)&&o.not_primitive.test(c.type)&&i instanceof Function&&(i=i()),o.numeric_arg.test(c.type)&&"number"!=typeof i&&isNaN(i))throw TypeError(s("[sprintf] expecting number but found %T",i));switch(o.number.test(c.type)&&(p=i>=0),c.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,c.width?parseInt(c.width):0);break;case"e":i=c.precision?parseFloat(i).toExponential(c.precision):parseFloat(i).toExponential();break;case"f":i=c.precision?parseFloat(i).toFixed(c.precision):parseFloat(i);break;case"g":i=c.precision?String(Number(i.toPrecision(c.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=c.precision?i.substring(0,c.precision):i;break;case"t":i=String(!!i),i=c.precision?i.substring(0,c.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=c.precision?i.substring(0,c.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=c.precision?i.substring(0,c.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}o.json.test(c.type)?v+=i:(o.number.test(c.type)&&(!p||c.sign)?(d=p?"+":"-",i=i.toString().replace(o.sign,"")):d="",f=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",h=c.width-(d+i).length,u=c.width&&h>0?f.repeat(h):"",v+=c.align?d+i+u:"0"===f?d+u+i:u+d+i)}return v}(function(r){if(c[r])return c[r];for(var n,i=r,a=[],s=0;i;){if(null!==(n=o.text.exec(i)))a.push(n[0]);else if(null!==(n=o.modulo.exec(i)))a.push("%");else{if(null===(n=o.placeholder.exec(i)))throw SyntaxError("[sprintf] unexpected placeholder");if(n[2]){s|=1;var l=[],u=n[2],f=[];if(null===(f=o.key.exec(u)))throw SyntaxError("[sprintf] failed to parse named argument key");for(l.push(f[1]);""!==(u=u.substring(f[0].length));)if(null!==(f=o.key_access.exec(u)))l.push(f[1]);else{if(null===(f=o.index_access.exec(u)))throw SyntaxError("[sprintf] failed to parse named argument key");l.push(f[1])}n[2]=l}else s|=2;if(3===s)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return c[r]=a}(r),arguments)}function l(r,n){return s.apply(null,[r].concat(n||[]))}var c=Object.create(null);n.sprintf=s,n.vsprintf=l,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=l,void 0===(a=(function(){return{sprintf:s,vsprintf:l}}).call(n,i,n,r))||(r.exports=a))}()},3711:function(r,n,i){r.exports=function(r,n){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(r,n){for(var i=o(r,n),a=i.length,s=Array(a),l=Array(a),c=0;c<a;++c)s[c]=[i[c]],l[c]=[c];return{positions:s,cells:l}}(r,n);var i=r.order.join()+"-"+r.dtype,c=l[i];return n=+n||0,c||(c=l[i]=function(r,n){var i=s[r.length+"d"];if(i)return i(a,r,n)}(r.order,r.dtype)),c(r,n)};var a=i(2640),o=i(781),s={"2d":function(r,n,i){var a=r({order:n,scalarArguments:3,getters:"generic"===i?[0]:void 0,phase:function(r,n,i,a){return r>a|0},vertex:function(r,n,i,a,o,s,l,c,u,f,h,p,d){var y=(l<<0)+(c<<1)+(u<<2)+(f<<3)|0;if(0!==y&&15!==y)switch(y){case 0:case 15:h.push([r-.5,n-.5]);break;case 1:h.push([r-.25-.25*(a+i-2*d)/(i-a),n-.25-.25*(o+i-2*d)/(i-o)]);break;case 2:h.push([r-.75-.25*(-a-i+2*d)/(a-i),n-.25-.25*(s+a-2*d)/(a-s)]);break;case 3:h.push([r-.5,n-.5-.5*(o+i+s+a-4*d)/(i-o+a-s)]);break;case 4:h.push([r-.25-.25*(s+o-2*d)/(o-s),n-.75-.25*(-o-i+2*d)/(o-i)]);break;case 5:h.push([r-.5-.5*(a+i+s+o-4*d)/(i-a+o-s),n-.5]);break;case 6:h.push([r-.5-.25*(-a-i+s+o)/(a-i+o-s),n-.5-.25*(-o-i+s+a)/(o-i+a-s)]);break;case 7:h.push([r-.75-.25*(s+o-2*d)/(o-s),n-.75-.25*(s+a-2*d)/(a-s)]);break;case 8:h.push([r-.75-.25*(-s-o+2*d)/(s-o),n-.75-.25*(-s-a+2*d)/(s-a)]);break;case 9:h.push([r-.5-.25*(a+i+-s-o)/(i-a+s-o),n-.5-.25*(o+i+-s-a)/(i-o+s-a)]);break;case 10:h.push([r-.5-.5*(-a-i-s-o+4*d)/(a-i+s-o),n-.5]);break;case 11:h.push([r-.25-.25*(-s-o+2*d)/(s-o),n-.75-.25*(o+i-2*d)/(i-o)]);break;case 12:h.push([r-.5,n-.5-.5*(-o-i-s-a+4*d)/(o-i+s-a)]);break;case 13:h.push([r-.75-.25*(a+i-2*d)/(i-a),n-.25-.25*(-s-a+2*d)/(s-a)]);break;case 14:h.push([r-.25-.25*(-a-i+2*d)/(a-i),n-.25-.25*(-o-i+2*d)/(o-i)])}},cell:function(r,n,i,a,o,s,l,c,u){o?c.push([r,n]):c.push([n,r])}});return function(r,n){var i=[],o=[];return a(r,i,o,n),{positions:i,cells:o}}}},l={}},529:function(r,n,i){r.exports=function r(n,i,a){var s=(a=a||{}).fontStyle||"normal",c=a.fontWeight||"normal",u=a.fontVariant||"normal",f=[s,c,u,n].join("_"),h=l[f];h||(h=l[f]={" ":{data:new Float32Array(0),shape:.2}});var p=h[i];if(!p){if(i.length<=1||!/\d/.test(i))p=h[i]=function(r){for(var n=r.cells,i=r.positions,a=new Float32Array(6*n.length),o=0,s=0,l=0;l<n.length;++l)for(var c=n[l],u=0;u<3;++u){var f=i[c[u]];a[o++]=f[0],a[o++]=f[1]+1.4,s=Math.max(f[0],s)}return{data:a,shape:s}}(o(i,{triangles:!0,font:n,fontStyle:s,fontWeight:c,fontVariant:u,textAlign:a.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var d=i.split(/(\d|\s)/),y=Array(d.length),g=0,v=0,m=0;m<d.length;++m)y[m]=r(n,d[m]),g+=y[m].data.length,v+=y[m].shape,m>0&&(v+=.02);var x=new Float32Array(g),b=0,_=-.5*v;for(m=0;m<y.length;++m){for(var w=y[m].data,T=0;T<w.length;T+=2)x[b++]=w[T]+_,x[b++]=w[T+1];_+=y[m].shape+.02}p=h[i]={data:x,shape:v}}}return p};var o=i(4359),s=window||a.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={}},665:function(r,n,i){var a=i(3202);function o(r,n){var i=a(getComputedStyle(r).getPropertyValue(n));return i[0]*s(i[1],r)}function s(r,n){switch(n=n||document.body,r=(r||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),r){case"%":return n.clientHeight/100;case"ch":case"ex":var i,a,s,l;return i=r,a=n,(s=document.createElement("div")).style["font-size"]="128"+i,a.appendChild(s),l=o(s,"font-size")/128,a.removeChild(s),l;case"em":return o(n,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}r.exports=s},7261:function(r,n,i){r.exports=function(r){var n=(r=r||{}).center||[0,0,0],i=r.up||[0,1,0],a=r.right||p(i),o=r.radius||1,s=r.theta||0,h=r.phi||0;if(n=[].slice.call(n,0,3),c(i=[].slice.call(i,0,3),i),c(a=[].slice.call(a,0,3),a),"eye"in r){var y=r.eye,g=[y[0]-n[0],y[1]-n[1],y[2]-n[2]];l(a,g,i),1e-6>f(a[0],a[1],a[2])?a=p(i):c(a,a),o=f(g[0],g[1],g[2]);var v=u(i,g)/o,m=u(a,g)/o;h=Math.acos(v),s=Math.acos(m)}return o=Math.log(o),new d(r.zoomMin,r.zoomMax,n,i,a,o,s,h)};var a=i(9215),o=i(7608),s=i(6079),l=i(5911),c=i(3536),u=i(244);function f(r,n,i){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}function h(r){return Math.min(1,Math.max(-1,r))}function p(r){var n=Math.abs(r[0]),i=Math.abs(r[1]),a=Math.abs(r[2]),o=[0,0,0];n>Math.max(i,a)?o[2]=1:i>Math.max(n,a)?o[0]=1:o[1]=1;for(var s=0,l=0,u=0;u<3;++u)s+=r[u]*r[u],l+=o[u]*r[u];for(u=0;u<3;++u)o[u]-=l/s*r[u];return c(o,o),o}function d(r,n,i,o,s,l,c,u){this.center=a(i),this.up=a(o),this.right=a(s),this.radius=a([l]),this.angle=a([c,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(r,n),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var f=0;f<16;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}var y=d.prototype;y.setDistanceLimits=function(r,n){r=r>0?Math.log(r):-1/0,n=Math.max(n=n>0?Math.log(n):1/0,r),this.radius.bounds[0][0]=r,this.radius.bounds[1][0]=n},y.getDistanceLimits=function(r){var n=this.radius.bounds[0];return r?(r[0]=Math.exp(n[0][0]),r[1]=Math.exp(n[1][0]),r):[Math.exp(n[0][0]),Math.exp(n[1][0])]},y.recalcMatrix=function(r){this.center.curve(r),this.up.curve(r),this.right.curve(r),this.radius.curve(r),this.angle.curve(r);for(var n=this.computedUp,i=this.computedRight,a=0,o=0,s=0;s<3;++s)o+=n[s]*i[s],a+=n[s]*n[s];var u=Math.sqrt(a),h=0;for(s=0;s<3;++s)i[s]-=n[s]*o/a,h+=i[s]*i[s],n[s]/=u;var p=Math.sqrt(h);for(s=0;s<3;++s)i[s]/=p;var d=this.computedToward;l(d,n,i),c(d,d);var y=Math.exp(this.computedRadius[0]),g=this.computedAngle[0],v=this.computedAngle[1],m=Math.cos(g),x=Math.sin(g),b=Math.cos(v),_=Math.sin(v),w=this.computedCenter,T=m*b,A=x*b,k=-m*_,M=-x*_,S=this.computedEye,E=this.computedMatrix;for(s=0;s<3;++s){var I=T*i[s]+A*d[s]+_*n[s];E[4*s+1]=k*i[s]+M*d[s]+b*n[s],E[4*s+2]=I,E[4*s+3]=0}var L=E[1],C=E[5],O=E[9],D=E[2],P=E[6],B=E[10],R=C*B-O*P,z=O*D-L*B,F=L*P-C*D,N=f(R,z,F);for(R/=N,z/=N,F/=N,E[0]=R,E[4]=z,E[8]=F,s=0;s<3;++s)S[s]=w[s]+E[2+4*s]*y;for(s=0;s<3;++s){h=0;for(var U=0;U<3;++U)h+=E[s+4*U]*S[U];E[12+s]=-h}E[15]=1},y.getMatrix=function(r,n){this.recalcMatrix(r);var i=this.computedMatrix;if(n){for(var a=0;a<16;++a)n[a]=i[a];return n}return i};var g=[0,0,0];y.rotate=function(r,n,i,a){if(this.angle.move(r,n,i),a){this.recalcMatrix(r);var o=this.computedMatrix;g[0]=o[2],g[1]=o[6],g[2]=o[10];for(var l=this.computedUp,c=this.computedRight,u=this.computedToward,f=0;f<3;++f)o[4*f]=l[f],o[4*f+1]=c[f],o[4*f+2]=u[f];for(s(o,o,a,g),f=0;f<3;++f)l[f]=o[4*f],c[f]=o[4*f+1];this.up.set(r,l[0],l[1],l[2]),this.right.set(r,c[0],c[1],c[2])}},y.pan=function(r,n,i,a){n=n||0,i=i||0,a=a||0,this.recalcMatrix(r);var o=this.computedMatrix,s=(this.computedRadius[0],o[1]),l=o[5],c=o[9],u=f(s,l,c);s/=u,l/=u,c/=u;var h=o[0],p=o[4],d=o[8],y=h*s+p*l+d*c,g=f(h-=s*y,p-=l*y,d-=c*y),v=(h/=g)*n+s*i,m=(p/=g)*n+l*i,x=(d/=g)*n+c*i;this.center.move(r,v,m,x);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+a),this.radius.set(r,Math.log(b))},y.translate=function(r,n,i,a){this.center.move(r,n||0,i||0,a||0)},y.setMatrix=function(r,n,i,a){var s=1;"number"==typeof i&&(s=0|i),(s<0||s>3)&&(s=1);var l=(s+2)%3;n||(this.recalcMatrix(r),n=this.computedMatrix);var c=n[s],u=n[s+4],p=n[s+8];if(a){var d=Math.abs(c),y=Math.abs(p),g=Math.max(d,Math.abs(u),y);d===g?(c=c<0?-1:1,u=p=0):y===g?(p=p<0?-1:1,c=u=0):(u=u<0?-1:1,c=p=0)}else{var v=f(c,u,p);c/=v,u/=v,p/=v}var m,x,b=n[l],_=n[l+4],w=n[l+8],T=b*c+_*u+w*p,A=f(b-=c*T,_-=u*T,w-=p*T),k=u*(w/=A)-p*(_/=A),M=p*(b/=A)-c*w,S=c*_-u*b,E=f(k,M,S);if(k/=E,M/=E,S/=E,this.center.jump(r,G,W,Y),this.radius.idle(r),this.up.jump(r,c,u,p),this.right.jump(r,b,_,w),2===s){var I=n[1],L=n[5],C=n[9],O=I*b+L*_+C*w,D=I*k+L*M+C*S;m=z<0?-Math.PI/2:Math.PI/2,x=Math.atan2(D,O)}else{var P=n[2],B=n[6],R=n[10],z=P*c+B*u+R*p,F=P*b+B*_+R*w,N=P*k+B*M+R*S;m=Math.asin(h(z)),x=Math.atan2(N,F)}this.angle.jump(r,x,m),this.recalcMatrix(r);var U=n[2],j=n[6],V=n[10],H=this.computedMatrix;o(H,n);var q=H[15],G=H[12]/q,W=H[13]/q,Y=H[14]/q,Z=Math.exp(this.computedRadius[0]);this.center.jump(r,G-U*Z,W-j*Z,Y-V*Z)},y.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},y.idle=function(r){this.center.idle(r),this.up.idle(r),this.right.idle(r),this.radius.idle(r),this.angle.idle(r)},y.flush=function(r){this.center.flush(r),this.up.flush(r),this.right.flush(r),this.radius.flush(r),this.angle.flush(r)},y.setDistance=function(r,n){n>0&&this.radius.set(r,Math.log(n))},y.lookAt=function(r,n,i,a){this.recalcMatrix(r),n=n||this.computedEye,i=i||this.computedCenter;var o=(a=a||this.computedUp)[0],s=a[1],l=a[2],c=f(o,s,l);if(!(c<1e-6)){o/=c,s/=c,l/=c;var u=n[0]-i[0],p=n[1]-i[1],d=n[2]-i[2],y=f(u,p,d);if(!(y<1e-6)){u/=y,p/=y,d/=y;var g=this.computedRight,v=g[0],m=g[1],x=g[2],b=o*v+s*m+l*x,_=f(v-=b*o,m-=b*s,x-=b*l);if(!(_<.01&&(_=f(v=s*d-l*p,m=l*u-o*d,x=o*p-s*u))<1e-6)){v/=_,m/=_,x/=_,this.up.set(r,o,s,l),this.right.set(r,v,m,x),this.center.set(r,i[0],i[1],i[2]),this.radius.set(r,Math.log(y));var w=s*x-l*m,T=l*v-o*x,A=o*m-s*v,k=f(w,T,A),M=o*u+s*p+l*d,S=v*u+m*p+x*d,E=(w/=k)*u+(T/=k)*p+(A/=k)*d,I=Math.asin(h(M)),L=Math.atan2(E,S),C=this.angle._state,O=C[C.length-1],D=C[C.length-2],P=Math.abs((O%=2*Math.PI)+2*Math.PI-L),B=Math.abs(O-L),R=Math.abs(O-2*Math.PI-L);P<B&&(O+=2*Math.PI),R<B&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,D),this.angle.set(r,L,I)}}}}},5250:function(r){r.exports=function(r,i,a){var o=r*i,s=n*r,l=s-(s-r),c=r-l,u=n*i,f=u-(u-i),h=i-f,p=c*h-(o-l*f-c*f-l*h);return a?(a[0]=p,a[1]=o,a):[p,o]};var n=134217729},9362:function(r){r.exports=function(r,n,i){var a=r+n,o=a-r,s=n-o,l=r-(a-o);return i?(i[0]=l+s,i[1]=a,i):[l+s,a]}},1888:function(r,n,i){var a=i(8828),o=i(1338),s=i(4793).hp;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var l="undefined"!=typeof Uint8ClampedArray,c="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,f=i.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=o([32,0])),f.BIGUINT64||(f.BIGUINT64=o([32,0])),f.BIGINT64||(f.BIGINT64=o([32,0])),f.BUFFER||(f.BUFFER=o([32,0]));var h=f.DATA,p=f.BUFFER;function d(r){if(r){var n=r.length||r.byteLength;h[a.log2(n)].push(r)}}function y(r){r=a.nextPow2(r);var n=h[a.log2(r)];return n.length>0?n.pop():new ArrayBuffer(r)}function g(r){return new Uint8Array(y(r),0,r)}function v(r){return new Uint16Array(y(2*r),0,r)}function m(r){return new Uint32Array(y(4*r),0,r)}function x(r){return new Int8Array(y(r),0,r)}function b(r){return new Int16Array(y(2*r),0,r)}function _(r){return new Int32Array(y(4*r),0,r)}function w(r){return new Float32Array(y(4*r),0,r)}function T(r){return new Float64Array(y(8*r),0,r)}function A(r){return l?new Uint8ClampedArray(y(r),0,r):g(r)}function k(r){return c?new BigUint64Array(y(8*r),0,r):null}function M(r){return u?new BigInt64Array(y(8*r),0,r):null}function S(r){return new DataView(y(r),0,r)}function E(r){r=a.nextPow2(r);var n=p[a.log2(r)];return n.length>0?n.pop():new s(r)}n.free=function(r){if(s.isBuffer(r))p[a.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var n=r.length||r.byteLength;h[0|a.log2(n)].push(r)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(r){d(r.buffer)},n.freeArrayBuffer=d,n.freeBuffer=function(r){p[a.log2(r.length)].push(r)},n.malloc=function(r,n){if(void 0===n||"arraybuffer"===n)return y(r);switch(n){case"uint8":return g(r);case"uint16":return v(r);case"uint32":return m(r);case"int8":return x(r);case"int16":return b(r);case"int32":return _(r);case"float":case"float32":return w(r);case"double":case"float64":return T(r);case"uint8_clamped":return A(r);case"bigint64":return M(r);case"biguint64":return k(r);case"buffer":return E(r);case"data":case"dataview":return S(r)}return null},n.mallocArrayBuffer=y,n.mallocUint8=g,n.mallocUint16=v,n.mallocUint32=m,n.mallocInt8=x,n.mallocInt16=b,n.mallocInt32=_,n.mallocFloat32=n.mallocFloat=w,n.mallocFloat64=n.mallocDouble=T,n.mallocUint8Clamped=A,n.mallocBigUint64=k,n.mallocBigInt64=M,n.mallocDataView=S,n.mallocBuffer=E,n.clearCache=function(){for(var r=0;r<32;++r)f.UINT8[r].length=0,f.UINT16[r].length=0,f.UINT32[r].length=0,f.INT8[r].length=0,f.INT16[r].length=0,f.INT32[r].length=0,f.FLOAT[r].length=0,f.DOUBLE[r].length=0,f.BIGUINT64[r].length=0,f.BIGINT64[r].length=0,f.UINT8C[r].length=0,h[r].length=0,p[r].length=0}},1755:function(r){function n(r){this.roots=Array(r),this.ranks=Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}r.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},i.find=function(r){for(var n=r,i=this.roots;i[r]!==r;)r=i[r];for(;i[n]!==r;){var a=i[n];i[n]=r,n=a}return r},i.link=function(r,n){var i=this.find(r),a=this.find(n);if(i!==a){var o=this.ranks,s=this.roots,l=o[i],c=o[a];l<c?s[i]=a:c<l?s[a]=i:(s[a]=i,++o[i])}}},1682:function(r){r.exports=function(r,n,i){return 0===r.length?r:n?(i||r.sort(n),function(r,n){for(var i=1,a=r.length,o=r[0],s=r[0],l=1;l<a;++l)if(s=o,n(o=r[l],s)){if(l===i){i++;continue}r[i++]=o}return r.length=i,r}(r,n)):(i||r.sort(),function(r){for(var n=1,i=r.length,a=r[0],o=r[0],s=1;s<i;++s,o=a)if(o=a,(a=r[s])!==o){if(s===n){n++;continue}r[n++]=a}return r.length=n,r}(r))}},4359:function(r,n,i){r.exports=function(r,n){return"object"==typeof n&&null!==n||(n={}),a(r,n.canvas||o,n.context||s,n)};var a=i(7718),o=null,s=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,s=o.getContext("2d"))},7718:function(r,n,i){r.exports=function(r,n,i,a){var s=64,l=1.25,c={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return a&&(a.size&&a.size>0&&(s=a.size),a.lineSpacing&&a.lineSpacing>0&&(l=a.lineSpacing),a.styletags&&a.styletags.breaklines&&(c.breaklines=!!a.styletags.breaklines),a.styletags&&a.styletags.bolds&&(c.bolds=!!a.styletags.bolds),a.styletags&&a.styletags.italics&&(c.italics=!!a.styletags.italics),a.styletags&&a.styletags.subscripts&&(c.subscripts=!!a.styletags.subscripts),a.styletags&&a.styletags.superscripts&&(c.superscripts=!!a.styletags.superscripts)),i.font=[a.fontStyle,a.fontVariant,a.fontWeight,s+"px",a.font].filter(function(r){return r}).join(" "),i.textAlign="start",i.textBaseline="alphabetic",i.direction="ltr",T(function(r,n,i,a,s,l){i=i.replace(/\n/g,""),i=!0===l.breaklines?i.replace(/\<br\>/g,"\n"):i.replace(/\<br\>/g," ");var c="",u=[];for(k=0;k<i.length;++k)u[k]=c;!0===l.bolds&&(u=_(f,h,i,u)),!0===l.italics&&(u=_(p,d,i,u)),!0===l.superscripts&&(u=_(y,v,i,u)),!0===l.subscripts&&(u=_(m,b,i,u));var w=[],T="";for(k=0;k<i.length;++k)null!==u[k]&&(T+=i[k],w.push(u[k]));var A,k,M,S,E,I=T.split("\n"),L=I.length,C=Math.round(s*a),O=2*a,D=0,P=L*C+O;r.height<P&&(r.height=P),n.fillStyle="#000",n.fillRect(0,0,r.width,r.height),n.fillStyle="#fff";var B=0,R="";function z(){if(""!==R){var r=n.measureText(R).width;n.fillText(R,a+M,O+S),M+=r}}function F(){return Math.round(E)+"px "}for(A=0;A<L;++A){var N=I[A]+"\n";for(M=0,S=A*C,E=a,R="",k=0;k<N.length;++k){var U=k+B<w.length?w[k+B]:w[w.length-1];c===U?R+=N[k]:(z(),R=N[k],void 0!==U&&(function(r,i){var a=""+n.font;if(!0===l.subscripts){var o=r.indexOf(x),s=i.indexOf(x),c=o>-1?parseInt(r[1+o]):0,u=s>-1?parseInt(i[1+s]):0;c!==u&&(a=a.replace(F(),"?px "),E*=Math.pow(.75,u-c),a=a.replace("?px ",F())),S+=.25*C*(u-c)}if(!0===l.superscripts){var f=r.indexOf(g),p=i.indexOf(g),y=f>-1?parseInt(r[1+f]):0,v=p>-1?parseInt(i[1+p]):0;y!==v&&(a=a.replace(F(),"?px "),E*=Math.pow(.75,v-y),a=a.replace("?px ",F())),S-=.25*C*(v-y)}if(!0===l.bolds){var m=r.indexOf(h)>-1,b=i.indexOf(h)>-1;!m&&b&&(a=_?a.replace("italic ","italic bold "):"bold "+a),m&&!b&&(a=a.replace("bold ",""))}if(!0===l.italics){var _=r.indexOf(d)>-1,w=i.indexOf(d)>-1;!_&&w&&(a="italic "+a),_&&!w&&(a=a.replace("italic ",""))}n.font=a}(c,U),c=U))}z(),B+=N.length;var j=0|Math.round(M+2*a);D<j&&(D=j)}var V=D,H=O+C*L;return o(n.getImageData(0,0,V,H).data,[H,V,4]).pick(-1,-1,0).transpose(1,0)}(n,i,r,s,l,c),a,s)},r.exports.processPixels=T;var a=i(3711),o=i(9618),s=i(5878),l=i(332),c=i(2538),u=i(2095),f="b",h="b|",p="i",d="i|",y="sup",g="+",v="+1",m="sub",x="-",b="-1";function _(r,n,i,a){for(var o="<"+r+">",s="</"+r+">",l=o.length,c=s.length,u=n[0]===g||n[0]===x,f=0,h=-c;f>-1&&-1!==(f=i.indexOf(o,f))&&-1!==(h=i.indexOf(s,f+l))&&!(h<=f);){for(var p=f;p<h+c;++p)if(p<f+l||p>=h)a[p]=null,i=i.substr(0,p)+" "+i.substr(p+1);else if(null!==a[p]){var d=a[p].indexOf(n[0]);-1===d?a[p]+=n:u&&(a[p]=a[p].substr(0,d+1)+(1+parseInt(a[p][d+1]))+a[p].substr(d+2))}var y=f+l,v=i.substr(y,h-y).indexOf(o);f=-1!==v?v:h+c}return a}function w(r,n,i,o){var f,h=(f=a(r,128),o?s(f.cells,f.positions,.25):{edges:f.cells,positions:f.positions}),p=function(r,n,i){for(var a=n.textAlign||"start",o=n.textBaseline||"alphabetic",s=[1073741824,1073741824],l=[0,0],c=r.length,u=0;u<c;++u)for(var f=r[u],h=0;h<2;++h)s[h]=0|Math.min(s[h],f[h]),l[h]=0|Math.max(l[h],f[h]);var p=0;switch(a){case"center":p=-.5*(s[0]+l[0]);break;case"right":case"end":p=-l[0];break;case"left":case"start":p=-s[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+a+"'")}var d=0;switch(o){case"hanging":case"top":d=-s[1];break;case"middle":d=-.5*(s[1]+l[1]);break;case"alphabetic":case"ideographic":d=-3*i;break;case"bottom":d=-l[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+o+"'")}var y=1/i;return"lineHeight"in n?y*=+n.lineHeight:"width"in n?y=n.width/(l[0]-s[0]):"height"in n&&(y=n.height/(l[1]-s[1])),r.map(function(r){return[y*(r[0]+p),y*(r[1]+d)]})}(h.positions,n,i),d=h.edges,y="ccw"===n.orientation;if(l(p,d),n.polygons||n.polygon||n.polyline){for(var g=u(d,p),v=Array(g.length),m=0;m<g.length;++m){for(var x=g[m],b=Array(x.length),_=0;_<x.length;++_){for(var w=x[_],T=Array(w.length),A=0;A<w.length;++A)T[A]=p[w[A]].slice();y&&T.reverse(),b[_]=T}v[m]=b}return v}return n.triangles||n.triangulate||n.triangle?{cells:c(p,d,{delaunay:!1,exterior:!1,interior:!0}),positions:p}:{edges:d,positions:p}}function T(r,n,i){try{return w(r,n,i,!0)}catch(r){}try{return w(r,n,i,!1)}catch(r){}return n.polygons||n.polyline||n.polygon?[]:n.triangles||n.triangulate||n.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(r){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=b);var n,i,a,o=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var l=new s,c=Object.freeze({});if(l.set(c,1),1===l.get(c))return void(r.exports=WeakMap);o=!0}}Object.prototype.hasOwnProperty;var u=Object.getOwnPropertyNames,f=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var y=new Uint8Array(new ArrayBuffer(25));crypto.getRandomValues(y),d=p+"rand:"+Array.prototype.map.call(y,function(r){return(r%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(r){return u(r).filter(_)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(r){return g(r).filter(_)}})}n=Object.freeze,f(Object,"freeze",{value:function(r){return w(r),n(r)}}),i=Object.seal,f(Object,"seal",{value:function(r){return w(r),i(r)}}),a=Object.preventExtensions,f(Object,"preventExtensions",{value:function(r){return w(r),a(r)}});var v=!1,m=0,x=function(){this instanceof x||A();var r=[],n=[],i=m++;return Object.create(x.prototype,{get___:{value:T(function(a,o){var s,l=w(a);return l?i in l?l[i]:o:(s=r.indexOf(a))>=0?n[s]:o})},has___:{value:T(function(n){var a=w(n);return a?i in a:r.indexOf(n)>=0})},set___:{value:T(function(a,o){var s,l=w(a);return l?l[i]=o:(s=r.indexOf(a))>=0?n[s]=o:(n[s=r.length]=o,r[s]=a),this})},delete___:{value:T(function(a){var o,s,l=w(a);return l?i in l&&delete l[i]:!((o=r.indexOf(a))<0||(s=r.length-1,r[o]=void 0,n[o]=n[s],r[o]=r[s],r.length=s,n.length=s,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(r,n){return this.get___(r,n)},writable:!0,configurable:!0},has:{value:function(r){return this.has___(r)},writable:!0,configurable:!0},set:{value:function(r,n){return this.set___(r,n)},writable:!0,configurable:!0},delete:{value:function(r){return this.delete___(r)},writable:!0,configurable:!0}}),"function"==typeof s?function(){function n(){this instanceof x||A();var r,n=new s,i=void 0,a=!1;return r=o?function(r,a){return n.set(r,a),n.has(r)||(i||(i=new x),i.set(r,a)),this}:function(r,o){if(a)try{n.set(r,o)}catch(n){i||(i=new x),i.set___(r,o)}else n.set(r,o);return this},Object.create(x.prototype,{get___:{value:T(function(r,a){return i?n.has(r)?n.get(r):i.get___(r,a):n.get(r,a)})},has___:{value:T(function(r){return n.has(r)||!!i&&i.has___(r)})},set___:{value:T(r)},delete___:{value:T(function(r){var a=!!n.delete(r);return i&&i.delete___(r)||a})},permitHostObjects___:{value:T(function(r){if(r!==b)throw Error("bogus call to permitHostObjects___");a=!0})}})}o&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=x.prototype,r.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),r.exports=x)}function b(r){r.permitHostObjects___&&r.permitHostObjects___(b)}function _(r){return!(r.substr(0,8)==p&&"___"===r.substr(r.length-3))}function w(r){if(r!==Object(r))throw TypeError("Not an object: "+r);var n=r[d];if(n&&n.key===r)return n;if(h(r)){n={key:r};try{return f(r,d,{value:n,writable:!1,enumerable:!1,configurable:!1}),n}catch(r){return}}}function T(r){return r.prototype=null,Object.freeze(r)}function A(){v||"undefined"==typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(r,n,i){var a=i(8284);r.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw Error("Weakmap-shim: Key must be object");var i=n.valueOf(r);return i&&i.identity===r?i:a(n,r)}}},8284:function(r){r.exports=function(r,n){var i={identity:n},a=r.valueOf;return Object.defineProperty(r,"valueOf",{value:function(r){return r!==n?a.apply(this,arguments):i},writable:!0}),i}},606:function(r,n,i){var a=i(236);r.exports=function(){var r=a();return{get:function(n,i){var a=r(n);return a.hasOwnProperty("value")?a.value:i},set:function(n,i){return r(n).value=i,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},3349:function(r){var n,i;r.exports=(n=(function(){return function(r,n,i,a,o,s){var l=r[0],c=i[0],u=[0];a|=0;var f=0;for(f=0;f<l;++f){var h=n[a]-s,p=n[a+c]-s;h>=0!=p>=0&&o.push(u[0]+.5+.5*(h+p)/(h-p)),a+=c,++u[0]}}}).bind(void 0,{funcName:"zeroCrossings"}),i={},function(r,a,o){var s=r.dtype,l=r.order,c=[s,l.join()].join(),u=i[c];return u||(i[c]=u=n([s,l])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,a,o)})},781:function(r,n,i){r.exports=function(r,n){var i=[];return n=+n||0,a(r.hi(r.shape[0]-1),i,n),i};var a=i(3349)},7790:function(){}},i={};function o(r){var a=i[r];if(void 0!==a)return a.exports;var s=i[r]={id:r,loaded:!1,exports:{}};return n[r].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(r){if("object"==typeof window)return window}}(),o.nmd=function(r){return r.paths=[],r.children||(r.children=[]),r};var s=o(1964);r.exports=s}()},33576:function(r,n,i){function a(r){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function o(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function s(r,n){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r})(r,n)}function l(r){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var c=i(59968),u=i(35984),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function h(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');var n=new Uint8Array(r);return Object.setPrototypeOf(n,p.prototype),n}function p(r,n,i){if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return d(r,n,i)}function d(r,n,i){if("string"==typeof r)return function(r,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw TypeError("Unknown encoding: "+n);var i=0|b(r,n),a=h(i),o=a.write(r,n);return o!==i&&(a=a.slice(0,o)),a}(r,n);if(ArrayBuffer.isView(r))return function(r){if(q(r,Uint8Array)){var n=new Uint8Array(r);return m(n.buffer,n.byteOffset,n.byteLength)}return v(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r));if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return m(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');var a=r.valueOf&&r.valueOf();if(null!=a&&a!==r)return p.from(a,n,i);var o=function(r){if(p.isBuffer(r)){var n,i=0|x(r.length),a=h(i);return 0===a.length||r.copy(a,0,0,i),a}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n?h(0):v(r):"Buffer"===r.type&&Array.isArray(r.data)?v(r.data):void 0}(r);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return p.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r))}function y(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function g(r){return y(r),h(r<0?0:0|x(r))}function v(r){for(var n=r.length<0?0:0|x(r.length),i=h(n),a=0;a<n;a+=1)i[a]=255&r[a];return i}function m(r,n,i){var a;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),p.prototype),a}function x(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function b(r,n){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(r));var i=r.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===i)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return j(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(r).length;default:if(o)return a?-1:j(r).length;n=(""+n).toLowerCase(),o=!0}}function _(r,n,i){var a,o,s=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(n>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){var a=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>a)&&(i=a);for(var o="",s=n;s<i;++s)o+=G[r[s]];return o}(this,n,i);case"utf8":case"utf-8":return k(this,n,i);case"ascii":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(127&r[o]);return a}(this,n,i);case"latin1":case"binary":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(r[o]);return a}(this,n,i);case"base64":return a=n,o=i,0===a&&o===this.length?c.fromByteArray(this):c.fromByteArray(this.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){for(var a=r.slice(n,i),o="",s=0;s<a.length-1;s+=2)o+=String.fromCharCode(a[s]+256*a[s+1]);return o}(this,n,i);default:if(s)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}function w(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function T(r,n,i,a,o){var s;if(0===r.length)return -1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(o)return -1;i=r.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=p.from(n,a)),p.isBuffer(n))return 0===n.length?-1:A(r,n,i,a,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):A(r,[n],i,a,o);throw TypeError("val must be string, number or Buffer")}function A(r,n,i,a,o){var s,l=1,c=r.length,u=n.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||n.length<2)return -1;l=2,c/=2,u/=2,i/=2}function f(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(o){var h=-1;for(s=i;s<c;s++)if(f(r,s)===f(n,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*l}else -1!==h&&(s-=s-h),h=-1}else for(i+u>c&&(i=c-u),s=i;s>=0;s--){for(var p=!0,d=0;d<u;d++)if(f(r,s+d)!==f(n,d)){p=!1;break}if(p)return s}return -1}function k(r,n,i){i=Math.min(r.length,i);for(var a=[],o=n;o<i;){var s=r[o],l=null,c=s>239?4:s>223?3:s>191?2:1;if(o+c<=i){var u=void 0,f=void 0,h=void 0,p=void 0;switch(c){case 1:s<128&&(l=s);break;case 2:128==(192&(u=r[o+1]))&&(p=(31&s)<<6|63&u)>127&&(l=p);break;case 3:u=r[o+1],f=r[o+2],128==(192&u)&&128==(192&f)&&(p=(15&s)<<12|(63&u)<<6|63&f)>2047&&(p<55296||p>57343)&&(l=p);break;case 4:u=r[o+1],f=r[o+2],h=r[o+3],128==(192&u)&&128==(192&f)&&128==(192&h)&&(p=(15&s)<<18|(63&u)<<12|(63&f)<<6|63&h)>65535&&p<1114112&&(l=p)}}null===l?(l=65533,c=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|1023&l),a.push(l),o+=c}return function(r){var n=r.length;if(n<=M)return String.fromCharCode.apply(String,r);for(var i="",a=0;a<n;)i+=String.fromCharCode.apply(String,r.slice(a,a+=M));return i}(a)}n.Buffer=p,n.SlowBuffer=function(r){return+r!=r&&(r=0),p.alloc(+r)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,p.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(r,n,i){return d(r,n,i)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(r,n,i){return y(r),r<=0?h(r):void 0!==n?"string"==typeof i?h(r).fill(n,i):h(r).fill(n):h(r)},p.allocUnsafe=function(r){return g(r)},p.allocUnsafeSlow=function(r){return g(r)},p.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==p.prototype},p.compare=function(r,n){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),q(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),!p.isBuffer(r)||!p.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0},p.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(r,n){if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return p.alloc(0);if(void 0===n)for(n=0,i=0;i<r.length;++i)n+=r[i].length;var i,a=p.allocUnsafe(n),o=0;for(i=0;i<r.length;++i){var s=r[i];if(q(s,Uint8Array))o+s.length>a.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(a,o)):Uint8Array.prototype.set.call(a,s,o);else{if(!p.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(a,o)}o+=s.length}return a},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)w(this,n,n+1);return this},p.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},p.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)w(this,n,n+7),w(this,n+1,n+6),w(this,n+2,n+5),w(this,n+3,n+4);return this},p.prototype.toString=function(){var r=this.length;return 0===r?"":0==arguments.length?k(this,0,r):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(r){if(!p.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===p.compare(this,r)},p.prototype.inspect=function(){var r="",i=n.INSPECT_MAX_BYTES;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},f&&(p.prototype[f]=p.prototype.inspect),p.prototype.compare=function(r,n,i,a,o){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),!p.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(r));if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),n<0||i>r.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&n>=i)return 0;if(a>=o)return -1;if(n>=i)return 1;if(this===r)return 0;for(var s=(o>>>=0)-(a>>>=0),c=(i>>>=0)-(n>>>=0),u=Math.min(s,c),f=this.slice(a,o),h=r.slice(n,i),d=0;d<u;++d)if(f[d]!==h[d]){s=f[d],c=h[d];break}return s<c?-1:c<s?1:0},p.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},p.prototype.indexOf=function(r,n,i){return T(this,r,n,i,!0)},p.prototype.lastIndexOf=function(r,n,i){return T(this,r,n,i,!1)},p.prototype.write=function(r,n,i,a){if(void 0===n)a="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)a=n,i=this.length,n=0;else{if(!isFinite(n))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var o,s,l,c,u,f,h,p,d=this.length-n;if((void 0===i||i>d)&&(i=d),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var y=!1;;)switch(a){case"hex":return function(r,n,i,a){i=Number(i)||0;var o=r.length-i;a?(a=Number(a))>o&&(a=o):a=o;var s,l=n.length;for(a>l/2&&(a=l/2),s=0;s<a;++s){var c=parseInt(n.substr(2*s,2),16);if(c!=c)break;r[i+s]=c}return s}(this,r,n,i);case"utf8":case"utf-8":return o=n,s=i,H(j(r,this.length-o),this,o,s);case"ascii":case"latin1":case"binary":return l=n,c=i,H(function(r){for(var n=[],i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,c);case"base64":return u=n,f=i,H(V(r),this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=n,p=i,H(function(r,n){for(var i,a,o=[],s=0;s<r.length&&!((n-=2)<0);++s)a=(i=r.charCodeAt(s))>>8,o.push(i%256),o.push(a);return o}(r,this.length-h),this,h,p);default:if(y)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),y=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function E(r,n,i,a,o,s){if(!p.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+a>r.length)throw RangeError("Index out of range")}function I(r,n,i,a,o){z(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function L(r,n,i,a,o){z(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function C(r,n,i,a,o,s){if(i+a>r.length||i<0)throw RangeError("Index out of range")}function O(r,n,i,a,o){return n=+n,i>>>=0,o||C(r,0,i,4),u.write(r,n,i,a,23,4),i+4}function D(r,n,i,a,o){return n=+n,i>>>=0,o||C(r,0,i,8),u.write(r,n,i,a,52,8),i+8}p.prototype.slice=function(r,n){var i=this.length;(r=~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),(n=void 0===n?i:~~n)<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);var a=this.subarray(r,n);return Object.setPrototypeOf(a,p.prototype),a},p.prototype.readUintLE=p.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a},p.prototype.readUintBE=p.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r+--n],o=1;n>0&&(o*=256);)a+=this[r+--n]*o;return a},p.prototype.readUint8=p.prototype.readUInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),this[r]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]|this[r+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]<<8|this[r+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},p.prototype.readBigUInt64LE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=n+256*this[++r]+65536*this[++r]+16777216*this[++r],o=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(a)+(BigInt(o)<<BigInt(32))}),p.prototype.readBigUInt64BE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=16777216*n+65536*this[++r]+256*this[++r]+this[++r],o=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(a)<<BigInt(32))+BigInt(o)}),p.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*n)),a},p.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=n,o=1,s=this[r+--a];a>0&&(o*=256);)s+=this[r+--a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},p.prototype.readInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},p.prototype.readInt16LE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt16BE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},p.prototype.readInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},p.prototype.readBigInt64LE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),p.prototype.readBigInt64BE=W(function(r){F(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),p.prototype.readFloatLE=function(r,n){return r>>>=0,n||S(r,4,this.length),u.read(this,r,!0,23,4)},p.prototype.readFloatBE=function(r,n){return r>>>=0,n||S(r,4,this.length),u.read(this,r,!1,23,4)},p.prototype.readDoubleLE=function(r,n){return r>>>=0,n||S(r,8,this.length),u.read(this,r,!0,52,8)},p.prototype.readDoubleBE=function(r,n){return r>>>=0,n||S(r,8,this.length),u.read(this,r,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=1,s=0;for(this[n]=255&r;++s<i&&(o*=256);)this[n+s]=r/o&255;return n+i},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=i-1,s=1;for(this[n+o]=255&r;--o>=0&&(s*=256);)this[n+o]=r/s&255;return n+i},p.prototype.writeUint8=p.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,255,0),this[n]=255&r,n+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigUInt64LE=W(function(r){return I(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=W(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=0,l=1,c=0;for(this[n]=255&r;++s<i&&(l*=256);)r<0&&0===c&&0!==this[n+s-1]&&(c=1),this[n+s]=(r/l>>0)-c&255;return n+i},p.prototype.writeIntBE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=i-1,l=1,c=0;for(this[n+s]=255&r;--s>=0&&(l*=256);)r<0&&0===c&&0!==this[n+s+1]&&(c=1),this[n+s]=(r/l>>0)-c&255;return n+i},p.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},p.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},p.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigInt64LE=W(function(r){return I(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=W(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(r,n,i){return O(this,r,n,!0,i)},p.prototype.writeFloatBE=function(r,n,i){return O(this,r,n,!1,i)},p.prototype.writeDoubleLE=function(r,n,i){return D(this,r,n,!0,i)},p.prototype.writeDoubleBE=function(r,n,i){return D(this,r,n,!1,i)},p.prototype.copy=function(r,n,i,a){if(!p.isBuffer(r))throw TypeError("argument should be a Buffer");if(i||(i=0),a||0===a||(a=this.length),n>=r.length&&(n=r.length),n||(n=0),a>0&&a<i&&(a=i),a===i||0===r.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-n<a-i&&(a=r.length-n+i);var o=a-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,a):Uint8Array.prototype.set.call(r,this.subarray(i,a),n),o},p.prototype.fill=function(r,n,i,a){if("string"==typeof r){if("string"==typeof n?(a=n,n=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!p.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===r.length){var o,s=r.charCodeAt(0);("utf8"===a&&s<128||"latin1"===a)&&(r=s)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(o=n;o<i;++o)this[o]=r;else{var l=p.isBuffer(r)?r:p.from(r,a),c=l.length;if(0===c)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<i-n;++o)this[o+n]=l[o%c]}return this};var P={};function B(r,n,i){P[r]=function(i){var c;function u(){var i,s,c;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,u),s=a(s=u),i=function(r,n){if(n&&("object"===l(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return o(r)}(this,!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){return!1}}()?s.apply(this,void 0):Reflect.construct(s,c||[],a(this).constructor)),Object.defineProperty(o(i),"message",{value:n.apply(o(i),arguments),writable:!0,configurable:!0}),i.name="".concat(i.name," [").concat(r,"]"),i.stack,delete i.name,i}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&s(r,n)}(u,i),c=[{key:"code",get:function(){return r},set:function(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(r,"]: ").concat(this.message)}}],function(r,n){for(var i,a=0;a<n.length;a++){var o=n[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,(i=function(r,n){if("object"!==l(r)||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var a=i.call(r,"string");if("object"!==l(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(o.key),"symbol"===l(i)?i:String(i)),o)}}(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),u}(i)}function R(r){for(var n="",i=r.length,a="-"===r[0]?1:0;i>=a+4;i-=3)n="_".concat(r.slice(i-3,i)).concat(n);return"".concat(r.slice(0,i)).concat(n)}function z(r,n,i,a,o,s){if(r>i||r<n){var l,c="bigint"==typeof n?"n":"";throw l=s>3?0===n||n===BigInt(0)?">= 0".concat(c," and < 2").concat(c," ** ").concat(8*(s+1)).concat(c):">= -(2".concat(c," ** ").concat(8*(s+1)-1).concat(c,") and < 2 ** ")+"".concat(8*(s+1)-1).concat(c):">= ".concat(n).concat(c," and <= ").concat(i).concat(c),new P.ERR_OUT_OF_RANGE("value",l,r)}F(o,"offset"),void 0!==a[o]&&void 0!==a[o+s]||N(o,a.length-(s+1))}function F(r,n){if("number"!=typeof r)throw new P.ERR_INVALID_ARG_TYPE(n,"number",r)}function N(r,n,i){if(Math.floor(r)!==r)throw F(r,i),new P.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(i||"offset",">= ".concat(i?1:0," and <= ").concat(n),r)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?"".concat(r," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(r,n){return'The "'.concat(r,'" argument must be of type number. Received type ').concat(l(n))},TypeError),B("ERR_OUT_OF_RANGE",function(r,n,i){var a=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?a=R(String(i)):"bigint"==typeof i&&(a=String(i),(i>Math.pow(BigInt(2),BigInt(32))||i<-Math.pow(BigInt(2),BigInt(32)))&&(a=R(a)),a+="n"),'The value of "'.concat(r,'" is out of range.')+" It must be ".concat(n,". Received ").concat(a)},RangeError);var U=/[^+/0-9A-Za-z-_]/g;function j(r,n){var i;n=n||1/0;for(var a=r.length,o=null,s=[],l=0;l<a;++l){if((i=r.charCodeAt(l))>55295&&i<57344){if(!o){if(i>56319||l+1===a){(n-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function V(r){return c.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function H(r,n,i,a){var o;for(o=0;o<a&&!(o+i>=n.length||o>=r.length);++o)n[o+i]=r[o];return o}function q(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}var G=function(){for(var r="0123456789abcdef",n=Array(256),i=0;i<16;++i)for(var a=16*i,o=0;o<16;++o)n[a+o]=r[i]+r[o];return n}();function W(r){return"undefined"==typeof BigInt?Y:r}function Y(){throw Error("BigInt not supported")}},25928:function(r){r.exports=o,r.exports.isMobile=o,r.exports.default=o;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,a=/android|ipad|playbook|silk/i;function o(r){r||(r={});var o=r.ua;if(o||"undefined"==typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!=typeof o)return!1;var s=n.test(o)&&!i.test(o)||!!r.tablet&&a.test(o);return!s&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(s=!0),s}},48932:function(r,n,i){i.r(n),i.d(n,{sankeyCenter:function(){return d},sankeyCircular:function(){return E},sankeyJustify:function(){return p},sankeyLeft:function(){return f},sankeyRight:function(){return h}});var a=i(84706),o=i(34712),s=i(10132),l=i(6688),c=i.n(l);function u(r){return r.target.depth}function f(r){return r.depth}function h(r,n){return n-1-r.height}function p(r,n){return r.sourceLinks.length?r.depth:n-1}function d(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?(0,a.SY)(r.sourceLinks,u)-1:0}function y(r){return function(){return r}}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function v(r,n){return x(r.source,n.source)||r.index-n.index}function m(r,n){return x(r.target,n.target)||r.index-n.index}function x(r,n){return r.partOfCycle===n.partOfCycle?r.y0-n.y0:"top"===r.circularLinkType||"bottom"===n.circularLinkType?-1:1}function b(r){return r.value}function _(r){return(r.y0+r.y1)/2}function w(r){return _(r.source)}function T(r){return _(r.target)}function A(r){return r.index}function k(r){return r.nodes}function M(r){return r.links}function S(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function E(){var r,n,i=0,s=0,l=1,u=1,f=24,h=A,d=p,E=k,L=M,O=32,D=2,B=null;function R(){var p={nodes:E.apply(null,arguments),links:L.apply(null,arguments)};(function(r){r.nodes.forEach(function(r,n){r.index=n,r.sourceLinks=[],r.targetLinks=[]});var n=(0,o.kH)(r.nodes,h);r.links.forEach(function(r,i){r.index=i;var a=r.source,o=r.target;"object"!==(void 0===a?"undefined":g(a))&&(a=r.source=S(n,a)),"object"!==(void 0===o?"undefined":g(o))&&(o=r.target=S(n,o)),a.sourceLinks.push(r),o.targetLinks.push(r)})})(p),function(r,n,i){var a=0;if(null===i){for(var o=[],s=0;s<r.links.length;s++){var l=r.links[s],u=l.source.index,f=l.target.index;o[u]||(o[u]=[]),o[f]||(o[f]=[]),-1===o[u].indexOf(f)&&o[u].push(f)}var h=c()(o);h.sort(function(r,n){return r.length-n.length});var p={};for(s=0;s<h.length;s++){var d=h[s].slice(-2);p[d[0]]||(p[d[0]]={}),p[d[0]][d[1]]=!0}r.links.forEach(function(r){var n=r.target.index,i=r.source.index;n===i||p[i]&&p[i][n]?(r.circular=!0,r.circularLinkID=a,a+=1):r.circular=!1})}else r.links.forEach(function(r){r.source[i]<r.target[i]?r.circular=!1:(r.circular=!0,r.circularLinkID=a,a+=1)})}(p,0,B),function(r){r.nodes.forEach(function(r){r.partOfCycle=!1,r.value=Math.max((0,a.oh)(r.sourceLinks,b),(0,a.oh)(r.targetLinks,b)),r.sourceLinks.forEach(function(n){n.circular&&(r.partOfCycle=!0,r.circularLinkType=n.circularLinkType)}),r.targetLinks.forEach(function(n){n.circular&&(r.partOfCycle=!0,r.circularLinkType=n.circularLinkType)})})}(p),function(r){var n,i,a;for(n=r.nodes,i=[],a=0;n.length;++a,n=i,i=[])n.forEach(function(r){r.depth=a,r.sourceLinks.forEach(function(r){0>i.indexOf(r.target)&&!r.circular&&i.push(r.target)})});for(n=r.nodes,i=[],a=0;n.length;++a,n=i,i=[])n.forEach(function(r){r.height=a,r.targetLinks.forEach(function(r){0>i.indexOf(r.source)&&!r.circular&&i.push(r.source)})});r.nodes.forEach(function(r){r.column=Math.floor(d.call(null,r,a))})}(p),I(p,h),function(c,h,p){var d=(0,o.UJ)().key(function(r){return r.column}).sortKeys(a.XE).entries(c.nodes).map(function(r){return r.values});(function(o){if(n){var h,p,y,g,v,m,x,_,w,T,A=1/0;d.forEach(function(r){var i=u*n/(r.length+1);A=i<A?i:A}),r=A}var k=(0,a.SY)(d,function(n){return(u-s-(n.length-1)*r)/(0,a.oh)(n,b)});k*=.3,c.links.forEach(function(r){r.width=r.value*k});var M=(h=0,p=0,y=0,g=0,v=(0,a.kv)(c.nodes,function(r){return r.column}),c.links.forEach(function(r){r.circular&&("top"==r.circularLinkType?h+=r.width:p+=r.width,0==r.target.column&&(g+=r.width),r.source.column==v&&(y+=r.width))}),{top:h=h>0?h+25+10:h,bottom:p=p>0?p+25+10:p,left:g=g>0?g+25+10:g,right:y=y>0?y+25+10:y}),S=(m=(0,a.kv)(c.nodes,function(r){return r.column}),x=l-i,_=u-s,w=x/(x+M.right+M.left),T=_/(_+M.top+M.bottom),i=i*w+M.left,l=0==M.right?l:l*w,s=s*T+M.top,u*=T,c.nodes.forEach(function(r){r.x0=i+r.column*((l-i-f)/m),r.x1=r.x0+f}),T);k*=S,c.links.forEach(function(r){r.width=r.value*k}),d.forEach(function(r){var n=r.length;r.forEach(function(r,i){r.depth==d.length-1&&1==n||0==r.depth&&1==n?r.y0=u/2-r.value*k:r.partOfCycle?0==C(r,o)?r.y0=u/2+i:"top"==r.circularLinkType?r.y0=s+i:r.y0=u-r.value*k-i:0==M.top||0==M.bottom?r.y0=(u-s)/n*i:r.y0=(u-s)/2-n/2+i,r.y1=r.y0+r.value*k})})})(p),v();for(var y=1,g=h;g>0;--g)(function(r,n){var i=d.length;d.forEach(function(o){var s=o.length,l=o[0].depth;o.forEach(function(o){var c;if(o.sourceLinks.length||o.targetLinks.length){if(o.partOfCycle&&C(o,n)>0);else if(0==l&&1==s)c=o.y1-o.y0,o.y0=u/2-c/2,o.y1=u/2+c/2;else if(l==i-1&&1==s)c=o.y1-o.y0,o.y0=u/2-c/2,o.y1=u/2+c/2;else{var f=(0,a.mo)(o.sourceLinks,T),h=(0,a.mo)(o.targetLinks,w),p=((f&&h?(f+h)/2:f||h)-_(o))*r;o.y0+=p,o.y1+=p}}})})})(y*=.99,p),v();function v(){d.forEach(function(n){var i,a,o,l=s,c=n.length;for(n.sort(x),o=0;o<c;++o)(a=l-(i=n[o]).y0)>0&&(i.y0+=a,i.y1+=a),l=i.y1+r;if((a=l-r-u)>0)for(l=i.y0-=a,i.y1-=a,o=c-2;o>=0;--o)(a=(i=n[o]).y1+r-l)>0&&(i.y0-=a,i.y1-=a),l=i.y0})}}(p,O,h),z(p);for(var y=0;y<4;y++)G(p,u,h),W(p,0,h),function(r,n,i,a){r.links.forEach(function(o){if(!o.circular&&o.target.column-o.source.column>1){var s=o.source.column+1,l=o.target.column-1,c=1,u=l-s+1;for(c=1;s<=l;s++,c++)r.nodes.forEach(function(l){if(l.column==s){var f,h=c/(u+1),p=Math.pow(1-h,3),d=3*h*Math.pow(1-h,2),y=3*Math.pow(h,2)*(1-h),g=Math.pow(h,3),v=p*o.y0+d*o.y0+y*o.y1+g*o.y1,m=v-o.width/2,x=v+o.width/2;m>l.y0&&m<l.y1?(f=l.y1-m+10,f="bottom"==l.circularLinkType?f:-f,l=q(l,f,n,i),r.nodes.forEach(function(r){var o;a(r)!=a(l)&&r.column==l.column&&((o=l).y0>r.y0&&o.y0<r.y1||o.y1>r.y0&&o.y1<r.y1||o.y0<r.y0&&o.y1>r.y1)&&q(r,f,n,i)})):(x>l.y0&&x<l.y1||m<l.y0&&x>l.y1)&&(f=x-l.y0+10,l=q(l,f,n,i),r.nodes.forEach(function(r){a(r)!=a(l)&&r.column==l.column&&r.y0<l.y1&&r.y1>l.y1&&q(r,f,n,i)}))}})}})}(p,s,u,h),G(p,u,h),W(p,0,h);return function(r,n,i){var o=r.nodes,s=r.links,l=!1,c=!1;if(s.forEach(function(r){"top"==r.circularLinkType?l=!0:"bottom"==r.circularLinkType&&(c=!0)}),0==l||0==c){var u=(0,a.SY)(o,function(r){return r.y0}),f=(i-n)/((0,a.kv)(o,function(r){return r.y1})-u);o.forEach(function(r){var n=(r.y1-r.y0)*f;r.y0=(r.y0-u)*f,r.y1=r.y0+n}),s.forEach(function(r){r.y0=(r.y0-u)*f,r.y1=(r.y1-u)*f,r.width=r.width*f})}}(p,s,u),P(p,D,u,h),p}function z(r){r.nodes.forEach(function(r){r.sourceLinks.sort(m),r.targetLinks.sort(v)}),r.nodes.forEach(function(r){var n=r.y0,i=n,a=r.y1,o=a;r.sourceLinks.forEach(function(r){r.circular?(r.y0=a-r.width/2,a-=r.width):(r.y0=n+r.width/2,n+=r.width)}),r.targetLinks.forEach(function(r){r.circular?(r.y1=o-r.width/2,o-=r.width):(r.y1=i+r.width/2,i+=r.width)})})}return R.nodeId=function(r){return arguments.length?(h="function"==typeof r?r:y(r),R):h},R.nodeAlign=function(r){return arguments.length?(d="function"==typeof r?r:y(r),R):d},R.nodeWidth=function(r){return arguments.length?(f=+r,R):f},R.nodePadding=function(n){return arguments.length?(r=+n,R):r},R.nodes=function(r){return arguments.length?(E="function"==typeof r?r:y(r),R):E},R.links=function(r){return arguments.length?(L="function"==typeof r?r:y(r),R):L},R.size=function(r){return arguments.length?(i=s=0,l=+r[0],u=+r[1],R):[l-i,u-s]},R.extent=function(r){return arguments.length?(i=+r[0][0],l=+r[1][0],s=+r[0][1],u=+r[1][1],R):[[i,s],[l,u]]},R.iterations=function(r){return arguments.length?(O=+r,R):O},R.circularLinkGap=function(r){return arguments.length?(D=+r,R):D},R.nodePaddingRatio=function(r){return arguments.length?(n=+r,R):n},R.sortNodes=function(r){return arguments.length?(B=r,R):B},R.update=function(r){return I(r,h),z(r),r.links.forEach(function(r){r.circular&&(r.circularLinkType=r.y0+r.y1<u?"top":"bottom",r.source.circularLinkType=r.circularLinkType,r.target.circularLinkType=r.circularLinkType)}),G(r,u,h,!1),W(r,0,h),P(r,D,u,h),r},R}function I(r,n){var i=0,a=0;r.links.forEach(function(o){o.circular&&(o.source.circularLinkType||o.target.circularLinkType?o.circularLinkType=o.source.circularLinkType?o.source.circularLinkType:o.target.circularLinkType:o.circularLinkType=i<a?"top":"bottom","top"==o.circularLinkType?i+=1:a+=1,r.nodes.forEach(function(r){n(r)!=n(o.source)&&n(r)!=n(o.target)||(r.circularLinkType=o.circularLinkType)}))}),r.links.forEach(function(r){r.circular&&(r.source.circularLinkType==r.target.circularLinkType&&(r.circularLinkType=r.source.circularLinkType),Z(r,n)&&(r.circularLinkType=r.source.circularLinkType))})}function L(r){var n=Math.abs(r.y1-r.y0);return Math.atan(Math.abs(r.target.x0-r.source.x1)/n)}function C(r,n){var i=0;r.sourceLinks.forEach(function(r){i=r.circular&&!Z(r,n)?i+1:i});var a=0;return r.targetLinks.forEach(function(r){a=r.circular&&!Z(r,n)?a+1:a}),i+a}function O(r){var n=r.source.sourceLinks,i=0;n.forEach(function(r){i=r.circular?i+1:i});var a=r.target.targetLinks,o=0;return a.forEach(function(r){o=r.circular?o+1:o}),!(i>1||o>1)}function D(r,n,i){return r.sort(B),r.forEach(function(a,o){var s,l,c=0;if(Z(a,i)&&O(a))a.circularPathData.verticalBuffer=c+a.width/2;else{for(var u=0;u<o;u++)if(s=r[o],l=r[u],!(s.source.column<l.target.column||s.target.column>l.source.column)){var f=r[u].circularPathData.verticalBuffer+r[u].width/2+n;c=f>c?f:c}a.circularPathData.verticalBuffer=c+a.width/2}}),r}function P(r,n,i,o){var l=(0,a.SY)(r.links,function(r){return r.source.y0});r.links.forEach(function(r){r.circular&&(r.circularPathData={})}),D(r.links.filter(function(r){return"top"==r.circularLinkType}),n,o),D(r.links.filter(function(r){return"bottom"==r.circularLinkType}),n,o),r.links.forEach(function(a){if(a.circular){if(a.circularPathData.arcRadius=a.width+10,a.circularPathData.leftNodeBuffer=5,a.circularPathData.rightNodeBuffer=5,a.circularPathData.sourceWidth=a.source.x1-a.source.x0,a.circularPathData.sourceX=a.source.x0+a.circularPathData.sourceWidth,a.circularPathData.targetX=a.target.x0,a.circularPathData.sourceY=a.y0,a.circularPathData.targetY=a.y1,Z(a,o)&&O(a))a.circularPathData.leftSmallArcRadius=10+a.width/2,a.circularPathData.leftLargeArcRadius=10+a.width/2,a.circularPathData.rightSmallArcRadius=10+a.width/2,a.circularPathData.rightLargeArcRadius=10+a.width/2,"bottom"==a.circularLinkType?(a.circularPathData.verticalFullExtent=a.source.y1+25+a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.rightLargeArcRadius):(a.circularPathData.verticalFullExtent=a.source.y0-25-a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.rightLargeArcRadius);else{var c=a.source.column,u=a.circularLinkType,f=r.links.filter(function(r){return r.source.column==c&&r.circularLinkType==u});"bottom"==a.circularLinkType?f.sort(z):f.sort(R);var h=0;f.forEach(function(r,i){r.circularLinkID==a.circularLinkID&&(a.circularPathData.leftSmallArcRadius=10+a.width/2+h,a.circularPathData.leftLargeArcRadius=10+a.width/2+i*n+h),h+=r.width}),c=a.target.column,f=r.links.filter(function(r){return r.target.column==c&&r.circularLinkType==u}),"bottom"==a.circularLinkType?f.sort(N):f.sort(F),h=0,f.forEach(function(r,i){r.circularLinkID==a.circularLinkID&&(a.circularPathData.rightSmallArcRadius=10+a.width/2+h,a.circularPathData.rightLargeArcRadius=10+a.width/2+i*n+h),h+=r.width}),"bottom"==a.circularLinkType?(a.circularPathData.verticalFullExtent=Math.max(i,a.source.y1,a.target.y1)+25+a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.rightLargeArcRadius):(a.circularPathData.verticalFullExtent=l-25-a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.rightLargeArcRadius)}a.circularPathData.leftInnerExtent=a.circularPathData.sourceX+a.circularPathData.leftNodeBuffer,a.circularPathData.rightInnerExtent=a.circularPathData.targetX-a.circularPathData.rightNodeBuffer,a.circularPathData.leftFullExtent=a.circularPathData.sourceX+a.circularPathData.leftLargeArcRadius+a.circularPathData.leftNodeBuffer,a.circularPathData.rightFullExtent=a.circularPathData.targetX-a.circularPathData.rightLargeArcRadius-a.circularPathData.rightNodeBuffer}if(a.circular)a.path="top"==a.circularLinkType?"M"+a.circularPathData.sourceX+" "+a.circularPathData.sourceY+" L"+a.circularPathData.leftInnerExtent+" "+a.circularPathData.sourceY+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftSmallArcRadius+" 0 0 0 "+a.circularPathData.leftFullExtent+" "+(a.circularPathData.sourceY-a.circularPathData.leftSmallArcRadius)+" L"+a.circularPathData.leftFullExtent+" "+a.circularPathData.verticalLeftInnerExtent+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftLargeArcRadius+" 0 0 0 "+a.circularPathData.leftInnerExtent+" "+a.circularPathData.verticalFullExtent+" L"+a.circularPathData.rightInnerExtent+" "+a.circularPathData.verticalFullExtent+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightLargeArcRadius+" 0 0 0 "+a.circularPathData.rightFullExtent+" "+a.circularPathData.verticalRightInnerExtent+" L"+a.circularPathData.rightFullExtent+" "+(a.circularPathData.targetY-a.circularPathData.rightSmallArcRadius)+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightSmallArcRadius+" 0 0 0 "+a.circularPathData.rightInnerExtent+" "+a.circularPathData.targetY+" L"+a.circularPathData.targetX+" "+a.circularPathData.targetY:"M"+a.circularPathData.sourceX+" "+a.circularPathData.sourceY+" L"+a.circularPathData.leftInnerExtent+" "+a.circularPathData.sourceY+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftSmallArcRadius+" 0 0 1 "+a.circularPathData.leftFullExtent+" "+(a.circularPathData.sourceY+a.circularPathData.leftSmallArcRadius)+" L"+a.circularPathData.leftFullExtent+" "+a.circularPathData.verticalLeftInnerExtent+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftLargeArcRadius+" 0 0 1 "+a.circularPathData.leftInnerExtent+" "+a.circularPathData.verticalFullExtent+" L"+a.circularPathData.rightInnerExtent+" "+a.circularPathData.verticalFullExtent+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightLargeArcRadius+" 0 0 1 "+a.circularPathData.rightFullExtent+" "+a.circularPathData.verticalRightInnerExtent+" L"+a.circularPathData.rightFullExtent+" "+(a.circularPathData.targetY+a.circularPathData.rightSmallArcRadius)+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightSmallArcRadius+" 0 0 1 "+a.circularPathData.rightInnerExtent+" "+a.circularPathData.targetY+" L"+a.circularPathData.targetX+" "+a.circularPathData.targetY;else{var p=(0,s.ak)().source(function(r){return[r.source.x0+(r.source.x1-r.source.x0),r.y0]}).target(function(r){return[r.target.x0,r.y1]});a.path=p(a)}})}function B(r,n){return U(r)==U(n)?"bottom"==r.circularLinkType?z(r,n):R(r,n):U(n)-U(r)}function R(r,n){return r.y0-n.y0}function z(r,n){return n.y0-r.y0}function F(r,n){return r.y1-n.y1}function N(r,n){return n.y1-r.y1}function U(r){return r.target.column-r.source.column}function j(r){return r.target.x0-r.source.x1}function V(r,n){var i=L(r),a=j(n)/Math.tan(i);return"up"==Y(r)?r.y1+a:r.y1-a}function H(r,n){var i=L(r),a=j(n)/Math.tan(i);return"up"==Y(r)?r.y1-a:r.y1+a}function q(r,n,i,a){return r.y0+n>=i&&r.y1+n<=a&&(r.y0=r.y0+n,r.y1=r.y1+n,r.targetLinks.forEach(function(r){r.y1=r.y1+n}),r.sourceLinks.forEach(function(r){r.y0=r.y0+n})),r}function G(r,n,i,a){r.nodes.forEach(function(o){a&&o.y+(o.y1-o.y0)>n&&(o.y=o.y-(o.y+(o.y1-o.y0)-n));var s=r.links.filter(function(r){return i(r.source)==i(o)}),l=s.length;l>1&&s.sort(function(r,n){if(!r.circular&&!n.circular){if(r.target.column==n.target.column||Y(r)!=Y(n))return r.y1-n.y1;if(r.target.column>n.target.column){var i=H(n,r);return r.y1-i}if(n.target.column>r.target.column)return H(r,n)-n.y1}return r.circular&&!n.circular?"top"==r.circularLinkType?-1:1:n.circular&&!r.circular?"top"==n.circularLinkType?1:-1:r.circular&&n.circular?r.circularLinkType===n.circularLinkType&&"top"==r.circularLinkType?r.target.column===n.target.column?r.target.y1-n.target.y1:n.target.column-r.target.column:r.circularLinkType===n.circularLinkType&&"bottom"==r.circularLinkType?r.target.column===n.target.column?n.target.y1-r.target.y1:r.target.column-n.target.column:"top"==r.circularLinkType?-1:1:void 0});var c=o.y0;s.forEach(function(r){r.y0=c+r.width/2,c+=r.width}),s.forEach(function(r,n){if("bottom"==r.circularLinkType){for(var i=n+1,a=0;i<l;i++)a+=s[i].width;r.y0=o.y1-a-r.width/2}})})}function W(r,n,i){r.nodes.forEach(function(n){var a=r.links.filter(function(r){return i(r.target)==i(n)}),o=a.length;o>1&&a.sort(function(r,n){if(!r.circular&&!n.circular){if(r.source.column==n.source.column||Y(r)!=Y(n))return r.y0-n.y0;if(n.source.column<r.source.column){var i=V(n,r);return r.y0-i}if(r.source.column<n.source.column)return V(r,n)-n.y0}return r.circular&&!n.circular?"top"==r.circularLinkType?-1:1:n.circular&&!r.circular?"top"==n.circularLinkType?1:-1:r.circular&&n.circular?r.circularLinkType===n.circularLinkType&&"top"==r.circularLinkType?r.source.column===n.source.column?r.source.y1-n.source.y1:r.source.column-n.source.column:r.circularLinkType===n.circularLinkType&&"bottom"==r.circularLinkType?r.source.column===n.source.column?r.source.y1-n.source.y1:n.source.column-r.source.column:"top"==r.circularLinkType?-1:1:void 0});var s=n.y0;a.forEach(function(r){r.y1=s+r.width/2,s+=r.width}),a.forEach(function(r,i){if("bottom"==r.circularLinkType){for(var s=i+1,l=0;s<o;s++)l+=a[s].width;r.y1=n.y1-l-r.width/2}})})}function Y(r){return r.y0-r.y1>0?"up":"down"}function Z(r,n){return n(r.source)==n(r.target)}},26800:function(r,n,i){i.r(n),i.d(n,{sankey:function(){return A},sankeyCenter:function(){return f},sankeyJustify:function(){return u},sankeyLeft:function(){return l},sankeyLinkHorizontal:function(){return E},sankeyRight:function(){return c}});var a=i(84706),o=i(34712);function s(r){return r.target.depth}function l(r){return r.depth}function c(r,n){return n-1-r.height}function u(r,n){return r.sourceLinks.length?r.depth:n-1}function f(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?(0,a.SY)(r.sourceLinks,s)-1:0}function h(r){return function(){return r}}function p(r,n){return y(r.source,n.source)||r.index-n.index}function d(r,n){return y(r.target,n.target)||r.index-n.index}function y(r,n){return r.y0-n.y0}function g(r){return r.value}function v(r){return(r.y0+r.y1)/2}function m(r){return v(r.source)*r.value}function x(r){return v(r.target)*r.value}function b(r){return r.index}function _(r){return r.nodes}function w(r){return r.links}function T(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function A(){var r=0,n=0,i=1,s=1,l=24,c=8,f=b,A=u,k=_,M=w,S=32;function E(){var u={nodes:k.apply(null,arguments),links:M.apply(null,arguments)};return function(r){r.nodes.forEach(function(r,n){r.index=n,r.sourceLinks=[],r.targetLinks=[]});var n=(0,o.kH)(r.nodes,f);r.links.forEach(function(r,i){r.index=i;var a=r.source,o=r.target;"object"!=typeof a&&(a=r.source=T(n,a)),"object"!=typeof o&&(o=r.target=T(n,o)),a.sourceLinks.push(r),o.targetLinks.push(r)})}(u),function(r){r.nodes.forEach(function(r){r.value=Math.max((0,a.oh)(r.sourceLinks,g),(0,a.oh)(r.targetLinks,g))})}(u),function(n){for(a=n.nodes,o=[],s=0;a.length;++s,a=o,o=[])a.forEach(function(r){r.depth=s,r.sourceLinks.forEach(function(r){0>o.indexOf(r.target)&&o.push(r.target)})});for(a=n.nodes,o=[],s=0;a.length;++s,a=o,o=[])a.forEach(function(r){r.height=s,r.targetLinks.forEach(function(r){0>o.indexOf(r.source)&&o.push(r.source)})});var a,o,s,c=(i-r-l)/(s-1);n.nodes.forEach(function(n){n.x1=(n.x0=r+Math.max(0,Math.min(s-1,Math.floor(A.call(null,n,s))))*c)+l})}(u),function(r){var i,l,u,f=(0,o.UJ)().key(function(r){return r.x0}).sortKeys(a.XE).entries(r.nodes).map(function(r){return r.values});i=(0,a.kv)(f,function(r){return r.length}),c>(l=.6666666666666666*(s-n)/(i-1))&&(c=l),u=(0,a.SY)(f,function(r){return(s-n-(r.length-1)*c)/(0,a.oh)(r,g)}),f.forEach(function(r){r.forEach(function(r,n){r.y1=(r.y0=n)+r.value*u})}),r.links.forEach(function(r){r.width=r.value*u}),d();for(var h=1,p=S;p>0;--p)(function(r){f.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var i=((0,a.oh)(n.sourceLinks,x)/(0,a.oh)(n.sourceLinks,g)-v(n))*r;n.y0+=i,n.y1+=i}})})})(h*=.99),d(),function(r){f.forEach(function(n){n.forEach(function(n){if(n.targetLinks.length){var i=((0,a.oh)(n.targetLinks,m)/(0,a.oh)(n.targetLinks,g)-v(n))*r;n.y0+=i,n.y1+=i}})})}(h),d();function d(){f.forEach(function(r){var i,a,o,l=n,u=r.length;for(r.sort(y),o=0;o<u;++o)(a=l-(i=r[o]).y0)>0&&(i.y0+=a,i.y1+=a),l=i.y1+c;if((a=l-c-s)>0)for(l=i.y0-=a,i.y1-=a,o=u-2;o>=0;--o)(a=(i=r[o]).y1+c-l)>0&&(i.y0-=a,i.y1-=a),l=i.y0})}}(u),I(u),u}function I(r){r.nodes.forEach(function(r){r.sourceLinks.sort(d),r.targetLinks.sort(p)}),r.nodes.forEach(function(r){var n=r.y0,i=n;r.sourceLinks.forEach(function(r){r.y0=n+r.width/2,n+=r.width}),r.targetLinks.forEach(function(r){r.y1=i+r.width/2,i+=r.width})})}return E.update=function(r){return I(r),r},E.nodeId=function(r){return arguments.length?(f="function"==typeof r?r:h(r),E):f},E.nodeAlign=function(r){return arguments.length?(A="function"==typeof r?r:h(r),E):A},E.nodeWidth=function(r){return arguments.length?(l=+r,E):l},E.nodePadding=function(r){return arguments.length?(c=+r,E):c},E.nodes=function(r){return arguments.length?(k="function"==typeof r?r:h(r),E):k},E.links=function(r){return arguments.length?(M="function"==typeof r?r:h(r),E):M},E.size=function(a){return arguments.length?(r=n=0,i=+a[0],s=+a[1],E):[i-r,s-n]},E.extent=function(a){return arguments.length?(r=+a[0][0],i=+a[1][0],n=+a[0][1],s=+a[1][1],E):[[r,n],[i,s]]},E.iterations=function(r){return arguments.length?(S=+r,E):S},E}var k=i(10132);function M(r){return[r.source.x1,r.y0]}function S(r){return[r.target.x0,r.y1]}function E(){return(0,k.ak)().source(M).target(S)}},33428:function(r,n,i){var a,o;(function(){var s={version:"3.8.2"},l=[].slice,c=function(r){return l.call(r)},u=self.document;function f(r){return r&&(r.ownerDocument||r.document||r).documentElement}function h(r){return r&&(r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView)}if(u)try{c(u.documentElement.childNodes)[0].nodeType}catch(r){c=function(r){for(var n=r.length,i=Array(n);n--;)i[n]=r[n];return i}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(r){var p=this.Element.prototype,d=p.setAttribute,y=p.setAttributeNS,g=this.CSSStyleDeclaration.prototype,v=g.setProperty;p.setAttribute=function(r,n){d.call(this,r,n+"")},p.setAttributeNS=function(r,n,i){y.call(this,r,n,i+"")},g.setProperty=function(r,n,i){v.call(this,r,n+"",i)}}function m(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}function x(r){return null===r?NaN:+r}function b(r){return!isNaN(r)}function _(r){return{left:function(n,i,a,o){for(arguments.length<3&&(a=0),arguments.length<4&&(o=n.length);a<o;){var s=a+o>>>1;0>r(n[s],i)?a=s+1:o=s}return a},right:function(n,i,a,o){for(arguments.length<3&&(a=0),arguments.length<4&&(o=n.length);a<o;){var s=a+o>>>1;r(n[s],i)>0?o=s:a=s+1}return a}}}s.ascending=m,s.descending=function(r,n){return n<r?-1:n>r?1:n>=r?0:NaN},s.min=function(r,n){var i,a,o=-1,s=r.length;if(1==arguments.length){for(;++o<s;)if(null!=(a=r[o])&&a>=a){i=a;break}for(;++o<s;)null!=(a=r[o])&&i>a&&(i=a)}else{for(;++o<s;)if(null!=(a=n.call(r,r[o],o))&&a>=a){i=a;break}for(;++o<s;)null!=(a=n.call(r,r[o],o))&&i>a&&(i=a)}return i},s.max=function(r,n){var i,a,o=-1,s=r.length;if(1==arguments.length){for(;++o<s;)if(null!=(a=r[o])&&a>=a){i=a;break}for(;++o<s;)null!=(a=r[o])&&a>i&&(i=a)}else{for(;++o<s;)if(null!=(a=n.call(r,r[o],o))&&a>=a){i=a;break}for(;++o<s;)null!=(a=n.call(r,r[o],o))&&a>i&&(i=a)}return i},s.extent=function(r,n){var i,a,o,s=-1,l=r.length;if(1==arguments.length){for(;++s<l;)if(null!=(a=r[s])&&a>=a){i=o=a;break}for(;++s<l;)null!=(a=r[s])&&(i>a&&(i=a),o<a&&(o=a))}else{for(;++s<l;)if(null!=(a=n.call(r,r[s],s))&&a>=a){i=o=a;break}for(;++s<l;)null!=(a=n.call(r,r[s],s))&&(i>a&&(i=a),o<a&&(o=a))}return[i,o]},s.sum=function(r,n){var i,a=0,o=r.length,s=-1;if(1==arguments.length)for(;++s<o;)b(i=+r[s])&&(a+=i);else for(;++s<o;)b(i=+n.call(r,r[s],s))&&(a+=i);return a},s.mean=function(r,n){var i,a=0,o=r.length,s=-1,l=o;if(1==arguments.length)for(;++s<o;)b(i=x(r[s]))?a+=i:--l;else for(;++s<o;)b(i=x(n.call(r,r[s],s)))?a+=i:--l;if(l)return a/l},s.quantile=function(r,n){var i=(r.length-1)*n+1,a=Math.floor(i),o=+r[a-1],s=i-a;return s?o+s*(r[a]-o):o},s.median=function(r,n){var i,a=[],o=r.length,l=-1;if(1==arguments.length)for(;++l<o;)b(i=x(r[l]))&&a.push(i);else for(;++l<o;)b(i=x(n.call(r,r[l],l)))&&a.push(i);if(a.length)return s.quantile(a.sort(m),.5)},s.variance=function(r,n){var i,a,o=r.length,s=0,l=0,c=-1,u=0;if(1==arguments.length)for(;++c<o;)b(i=x(r[c]))&&(l+=(a=i-s)*(i-(s+=a/++u)));else for(;++c<o;)b(i=x(n.call(r,r[c],c)))&&(l+=(a=i-s)*(i-(s+=a/++u)));if(u>1)return l/(u-1)},s.deviation=function(){var r=s.variance.apply(this,arguments);return r?Math.sqrt(r):r};var w=_(m);function T(r){return r.length}s.bisectLeft=w.left,s.bisect=s.bisectRight=w.right,s.bisector=function(r){return _(1===r.length?function(n,i){return m(r(n),i)}:r)},s.shuffle=function(r,n,i){(s=arguments.length)<3&&(i=r.length,s<2&&(n=0));for(var a,o,s=i-n;s;)o=Math.random()*s--|0,a=r[s+n],r[s+n]=r[o+n],r[o+n]=a;return r},s.permute=function(r,n){for(var i=n.length,a=Array(i);i--;)a[i]=r[n[i]];return a},s.pairs=function(r){for(var n=0,i=r.length-1,a=r[0],o=Array(i<0?0:i);n<i;)o[n]=[a,a=r[++n]];return o},s.transpose=function(r){if(!(o=r.length))return[];for(var n=-1,i=s.min(r,T),a=Array(i);++n<i;)for(var o,l=-1,c=a[n]=Array(o);++l<o;)c[l]=r[l][n];return a},s.zip=function(){return s.transpose(arguments)},s.keys=function(r){var n=[];for(var i in r)n.push(i);return n},s.values=function(r){var n=[];for(var i in r)n.push(r[i]);return n},s.entries=function(r){var n=[];for(var i in r)n.push({key:i,value:r[i]});return n},s.merge=function(r){for(var n,i,a,o=r.length,s=-1,l=0;++s<o;)l+=r[s].length;for(i=Array(l);--o>=0;)for(n=(a=r[o]).length;--n>=0;)i[--l]=a[n];return i};var A=Math.abs;function k(r,n){for(var i in n)Object.defineProperty(r.prototype,i,{value:n[i],enumerable:!1})}function M(){this._=Object.create(null)}function S(r){return"__proto__"==(r+="")||"\0"===r[0]?"\0"+r:r}function E(r){return"\0"===(r+="")[0]?r.slice(1):r}function I(r){return S(r) in this._}function L(r){return(r=S(r))in this._&&delete this._[r]}function C(){var r=[];for(var n in this._)r.push(E(n));return r}function O(){var r=0;for(var n in this._)++r;return r}function D(){for(var r in this._)return!1;return!0}function P(){this._=Object.create(null)}function B(r){return r}function R(r,n){if(n in r)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var i=0,a=z.length;i<a;++i){var o=z[i]+n;if(o in r)return o}}s.range=function(r,n,i){if(arguments.length<3&&(i=1,arguments.length<2&&(n=r,r=0)),(n-r)/i==1/0)throw Error("infinite range");var a,o=[],s=function(r){for(var n=1;r*n%1;)n*=10;return n}(A(i)),l=-1;if(r*=s,n*=s,(i*=s)<0)for(;(a=r+i*++l)>n;)o.push(a/s);else for(;(a=r+i*++l)<n;)o.push(a/s);return o},s.map=function(r,n){var i=new M;if(r instanceof M)r.forEach(function(r,n){i.set(r,n)});else if(Array.isArray(r)){var a,o=-1,s=r.length;if(1==arguments.length)for(;++o<s;)i.set(o,r[o]);else for(;++o<s;)i.set(n.call(r,a=r[o],o),a)}else for(var l in r)i.set(l,r[l]);return i},k(M,{has:I,get:function(r){return this._[S(r)]},set:function(r,n){return this._[S(r)]=n},remove:L,keys:C,values:function(){var r=[];for(var n in this._)r.push(this._[n]);return r},entries:function(){var r=[];for(var n in this._)r.push({key:E(n),value:this._[n]});return r},size:O,empty:D,forEach:function(r){for(var n in this._)r.call(this,E(n),this._[n])}}),s.nest=function(){var r,n,i={},a=[],o=[];function l(o,s,c){if(c>=a.length)return n?n.call(i,s):r?s.sort(r):s;for(var u,f,h,p,d=-1,y=s.length,g=a[c++],v=new M;++d<y;)(p=v.get(u=g(f=s[d])))?p.push(f):v.set(u,[f]);return o?(f=o(),h=function(r,n){f.set(r,l(o,n,c))}):(f={},h=function(r,n){f[r]=l(o,n,c)}),v.forEach(h),f}return i.map=function(r,n){return l(n,r,0)},i.entries=function(r){return function r(n,i){if(i>=a.length)return n;var s=[],l=o[i++];return n.forEach(function(n,a){s.push({key:n,values:r(a,i)})}),l?s.sort(function(r,n){return l(r.key,n.key)}):s}(l(s.map,r,0),0)},i.key=function(r){return a.push(r),i},i.sortKeys=function(r){return o[a.length-1]=r,i},i.sortValues=function(n){return r=n,i},i.rollup=function(r){return n=r,i},i},s.set=function(r){var n=new P;if(r)for(var i=0,a=r.length;i<a;++i)n.add(r[i]);return n},k(P,{has:I,add:function(r){return this._[S(r+="")]=!0,r},remove:L,values:C,size:O,empty:D,forEach:function(r){for(var n in this._)r.call(this,E(n))}}),s.behavior={},s.rebind=function(r,n){for(var i,a=1,o=arguments.length;++a<o;)r[i=arguments[a]]=function(r,n,i){return function(){var a=i.apply(n,arguments);return a===n?r:a}}(r,n,n[i]);return r};var z=["webkit","ms","moz","Moz","o","O"];function F(){}function N(){}function U(r){var n=[],i=new M;function a(){for(var i,a=n,o=-1,s=a.length;++o<s;)(i=a[o].on)&&i.apply(this,arguments);return r}return a.on=function(a,o){var s,l=i.get(a);return arguments.length<2?l&&l.on:(l&&(l.on=null,n=n.slice(0,s=n.indexOf(l)).concat(n.slice(s+1)),i.remove(a)),o&&n.push(i.set(a,{on:o})),r)},a}function j(){s.event.preventDefault()}function V(){for(var r,n=s.event;r=n.sourceEvent;)n=r;return n}function H(r){for(var n=new N,i=0,a=arguments.length;++i<a;)n[arguments[i]]=U(n);return n.of=function(i,a){return function(o){try{var l=o.sourceEvent=s.event;o.target=r,s.event=o,n[o.type].apply(i,a)}finally{s.event=l}}},n}s.dispatch=function(){for(var r=new N,n=-1,i=arguments.length;++n<i;)r[arguments[n]]=U(r);return r},N.prototype.on=function(r,n){var i=r.indexOf("."),a="";if(i>=0&&(a=r.slice(i+1),r=r.slice(0,i)),r)return arguments.length<2?this[r].on(a):this[r].on(a,n);if(2==arguments.length){if(null==n)for(r in this)this.hasOwnProperty(r)&&this[r].on(a,null);return this}},s.event=null,s.requote=function(r){return r.replace(q,"\\$&")};var q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(r,n){r.__proto__=n}:function(r,n){for(var i in n)r[i]=n[i]};function W(r){return G(r,K),r}var Y=function(r,n){return n.querySelector(r)},Z=function(r,n){return n.querySelectorAll(r)},X=function(r,n){var i=r.matches||r[R(r,"matchesSelector")];return(X=function(r,n){return i.call(r,n)})(r,n)};"function"==typeof Sizzle&&(Y=function(r,n){return Sizzle(r,n)[0]||null},Z=Sizzle,X=Sizzle.matchesSelector),s.selection=function(){return s.select(u.documentElement)};var K=s.selection.prototype=[];function J(r){return"function"==typeof r?r:function(){return Y(r,this)}}function $(r){return"function"==typeof r?r:function(){return Z(r,this)}}K.select=function(r){var n,i,a,o,s=[];r=J(r);for(var l=-1,c=this.length;++l<c;){s.push(n=[]),n.parentNode=(a=this[l]).parentNode;for(var u=-1,f=a.length;++u<f;)(o=a[u])?(n.push(i=r.call(o,o.__data__,u,l)),i&&"__data__"in o&&(i.__data__=o.__data__)):n.push(null)}return W(s)},K.selectAll=function(r){var n,i,a=[];r=$(r);for(var o=-1,s=this.length;++o<s;)for(var l=this[o],u=-1,f=l.length;++u<f;)(i=l[u])&&(a.push(n=c(r.call(i,i.__data__,u,o))),n.parentNode=i);return W(a)};var Q="http://www.w3.org/1999/xhtml",tt={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(r,n){return r=s.ns.qualify(r),null==n?r.local?function(){this.removeAttributeNS(r.space,r.local)}:function(){this.removeAttribute(r)}:"function"==typeof n?r.local?function(){var i=n.apply(this,arguments);null==i?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,i)}:function(){var i=n.apply(this,arguments);null==i?this.removeAttribute(r):this.setAttribute(r,i)}:r.local?function(){this.setAttributeNS(r.space,r.local,n)}:function(){this.setAttribute(r,n)}}function tr(r){return r.trim().replace(/\s+/g," ")}function tn(r){return RegExp("(?:^|\\s+)"+s.requote(r)+"(?:\\s+|$)","g")}function ti(r){return(r+"").trim().split(/^|\s+/)}function ta(r,n){var i=(r=ti(r).map(to)).length;return"function"==typeof n?function(){for(var a=-1,o=n.apply(this,arguments);++a<i;)r[a](this,o)}:function(){for(var a=-1;++a<i;)r[a](this,n)}}function to(r){var n=tn(r);return function(i,a){if(o=i.classList)return a?o.add(r):o.remove(r);var o=i.getAttribute("class")||"";a?(n.lastIndex=0,n.test(o)||i.setAttribute("class",tr(o+" "+r))):i.setAttribute("class",tr(o.replace(n," ")))}}function ts(r,n,i){return null==n?function(){this.style.removeProperty(r)}:"function"==typeof n?function(){var a=n.apply(this,arguments);null==a?this.style.removeProperty(r):this.style.setProperty(r,a,i)}:function(){this.style.setProperty(r,n,i)}}function tl(r,n){return null==n?function(){delete this[r]}:"function"==typeof n?function(){var i=n.apply(this,arguments);null==i?delete this[r]:this[r]=i}:function(){this[r]=n}}function tc(r){return"function"==typeof r?r:(r=s.ns.qualify(r)).local?function(){return this.ownerDocument.createElementNS(r.space,r.local)}:function(){var n=this.ownerDocument,i=this.namespaceURI;return i===Q&&n.documentElement.namespaceURI===Q?n.createElement(r):n.createElementNS(i,r)}}function tu(){var r=this.parentNode;r&&r.removeChild(this)}function tf(r){return{__data__:r}}function th(r){return function(){return X(this,r)}}function tp(r){return arguments.length||(r=m),function(n,i){return n&&i?r(n.__data__,i.__data__):!n-!i}}function td(r,n){for(var i=0,a=r.length;i<a;i++)for(var o,s=r[i],l=0,c=s.length;l<c;l++)(o=s[l])&&n(o,l,i);return r}function ty(r){return G(r,tg),r}s.ns={prefix:tt,qualify:function(r){var n=r.indexOf(":"),i=r;return n>=0&&"xmlns"!==(i=r.slice(0,n))&&(r=r.slice(n+1)),tt.hasOwnProperty(i)?{space:tt[i],local:r}:r}},K.attr=function(r,n){if(arguments.length<2){if("string"==typeof r){var i=this.node();return(r=s.ns.qualify(r)).local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}for(n in r)this.each(te(n,r[n]));return this}return this.each(te(r,n))},K.classed=function(r,n){if(arguments.length<2){if("string"==typeof r){var i=this.node(),a=(r=ti(r)).length,o=-1;if(n=i.classList){for(;++o<a;)if(!n.contains(r[o]))return!1}else for(n=i.getAttribute("class");++o<a;)if(!tn(r[o]).test(n))return!1;return!0}for(n in r)this.each(ta(n,r[n]));return this}return this.each(ta(r,n))},K.style=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=""),r)this.each(ts(i,r[i],n));return this}if(a<2){var o=this.node();return h(o).getComputedStyle(o,null).getPropertyValue(r)}i=""}return this.each(ts(r,n,i))},K.property=function(r,n){if(arguments.length<2){if("string"==typeof r)return this.node()[r];for(n in r)this.each(tl(n,r[n]));return this}return this.each(tl(r,n))},K.text=function(r){return arguments.length?this.each("function"==typeof r?function(){var n=r.apply(this,arguments);this.textContent=null==n?"":n}:null==r?function(){this.textContent=""}:function(){this.textContent=r}):this.node().textContent},K.html=function(r){return arguments.length?this.each("function"==typeof r?function(){var n=r.apply(this,arguments);this.innerHTML=null==n?"":n}:null==r?function(){this.innerHTML=""}:function(){this.innerHTML=r}):this.node().innerHTML},K.append=function(r){return r=tc(r),this.select(function(){return this.appendChild(r.apply(this,arguments))})},K.insert=function(r,n){return r=tc(r),n=J(n),this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},K.remove=function(){return this.each(tu)},K.data=function(r,n){var i,a,o=-1,s=this.length;if(!arguments.length){for(r=Array(s=(i=this[0]).length);++o<s;)(a=i[o])&&(r[o]=a.__data__);return r}function l(r,i){var a,o,s,l=r.length,h=i.length,p=Math.min(l,h),d=Array(h),y=Array(h),g=Array(l);if(n){var v,m=new M,x=Array(l);for(a=-1;++a<l;)(o=r[a])&&(m.has(v=n.call(o,o.__data__,a))?g[a]=o:m.set(v,o),x[a]=v);for(a=-1;++a<h;)(o=m.get(v=n.call(i,s=i[a],a)))?!0!==o&&(d[a]=o,o.__data__=s):y[a]=tf(s),m.set(v,!0);for(a=-1;++a<l;)a in x&&!0!==m.get(x[a])&&(g[a]=r[a])}else{for(a=-1;++a<p;)o=r[a],s=i[a],o?(o.__data__=s,d[a]=o):y[a]=tf(s);for(;a<h;++a)y[a]=tf(i[a]);for(;a<l;++a)g[a]=r[a]}y.update=d,y.parentNode=d.parentNode=g.parentNode=r.parentNode,c.push(y),u.push(d),f.push(g)}var c=ty([]),u=W([]),f=W([]);if("function"==typeof r)for(;++o<s;)l(i=this[o],r.call(i,i.parentNode.__data__,o));else for(;++o<s;)l(i=this[o],r);return u.enter=function(){return c},u.exit=function(){return f},u},K.datum=function(r){return arguments.length?this.property("__data__",r):this.property("__data__")},K.filter=function(r){var n,i,a,o=[];"function"!=typeof r&&(r=th(r));for(var s=0,l=this.length;s<l;s++){o.push(n=[]),n.parentNode=(i=this[s]).parentNode;for(var c=0,u=i.length;c<u;c++)(a=i[c])&&r.call(a,a.__data__,c,s)&&n.push(a)}return W(o)},K.order=function(){for(var r=-1,n=this.length;++r<n;)for(var i,a=this[r],o=a.length-1,s=a[o];--o>=0;)(i=a[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},K.sort=function(r){r=tp.apply(this,arguments);for(var n=-1,i=this.length;++n<i;)this[n].sort(r);return this.order()},K.each=function(r){return td(this,function(n,i,a){r.call(n,n.__data__,i,a)})},K.call=function(r){var n=c(arguments);return r.apply(n[0]=this,n),this},K.empty=function(){return!this.node()},K.node=function(){for(var r=0,n=this.length;r<n;r++)for(var i=this[r],a=0,o=i.length;a<o;a++){var s=i[a];if(s)return s}return null},K.size=function(){var r=0;return td(this,function(){++r}),r};var tg=[];function tv(r,n,i){var a="__on"+r,o=r.indexOf("."),l=tx;o>0&&(r=r.slice(0,o));var u=tm.get(r);function f(){var n=this[a];n&&(this.removeEventListener(r,n,n.$),delete this[a])}return u&&(r=u,l=tb),o?n?function(){var o=l(n,c(arguments));f.call(this),this.addEventListener(r,this[a]=o,o.$=i),o._=n}:f:n?F:function(){var n,i=RegExp("^__on([^.]+)"+s.requote(r)+"$");for(var a in this)if(n=a.match(i)){var o=this[a];this.removeEventListener(n[1],o,o.$),delete this[a]}}}s.selection.enter=ty,s.selection.enter.prototype=tg,tg.append=K.append,tg.empty=K.empty,tg.node=K.node,tg.call=K.call,tg.size=K.size,tg.select=function(r){for(var n,i,a,o,s,l=[],c=-1,u=this.length;++c<u;){a=(o=this[c]).update,l.push(n=[]),n.parentNode=o.parentNode;for(var f=-1,h=o.length;++f<h;)(s=o[f])?(n.push(a[f]=i=r.call(o.parentNode,s.__data__,f,c)),i.__data__=s.__data__):n.push(null)}return W(l)},tg.insert=function(r,n){var i,a,o;return arguments.length<2&&(i=this,n=function(r,n,s){var l,c=i[s].update,u=c.length;for(s!=o&&(o=s,a=0),n>=a&&(a=n+1);!(l=c[a])&&++a<u;);return l}),K.insert.call(this,r,n)},s.select=function(r){var n;return"string"==typeof r?(n=[Y(r,u)]).parentNode=u.documentElement:(n=[r]).parentNode=f(r),W([n])},s.selectAll=function(r){var n;return"string"==typeof r?(n=c(Z(r,u))).parentNode=u.documentElement:(n=c(r)).parentNode=null,W([n])},K.on=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=!1),r)this.each(tv(i,r[i],n));return this}if(a<2)return(a=this.node()["__on"+r])&&a._;i=!1}return this.each(tv(r,n,i))};var tm=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tx(r,n){return function(i){var a=s.event;s.event=i,n[0]=this.__data__;try{r.apply(this,n)}finally{s.event=a}}}function tb(r,n){var i=tx(r,n);return function(r){var n=r.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||i.call(this,r)}}u&&tm.forEach(function(r){"on"+r in u&&tm.remove(r)});var t_,tw=0;function tT(r){var n=".dragsuppress-"+ ++tw,i="click"+n,a=s.select(h(r)).on("touchmove"+n,j).on("dragstart"+n,j).on("selectstart"+n,j);if(null==t_&&(t_=!("onselectstart"in r)&&R(r.style,"userSelect")),t_){var o=f(r).style,l=o[t_];o[t_]="none"}return function(r){if(a.on(n,null),t_&&(o[t_]=l),r){var s=function(){a.on(i,null)};a.on(i,function(){j(),s()},!0),setTimeout(s,0)}}}s.mouse=function(r){return tk(r,V())};var tA=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function tk(r,n){n.changedTouches&&(n=n.changedTouches[0]);var i=r.ownerSVGElement||r;if(i.createSVGPoint){var a=i.createSVGPoint();if(tA<0){var o=h(r);if(o.scrollX||o.scrollY){var l=(i=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();tA=!(l.f||l.e),i.remove()}}return tA?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),[(a=a.matrixTransform(r.getScreenCTM().inverse())).x,a.y]}var c=r.getBoundingClientRect();return[n.clientX-c.left-r.clientLeft,n.clientY-c.top-r.clientTop]}function tM(){return s.event.changedTouches[0].identifier}s.touch=function(r,n,i){if(arguments.length<3&&(i=n,n=V().changedTouches),n){for(var a,o=0,s=n.length;o<s;++o)if((a=n[o]).identifier===i)return tk(r,a)}},s.behavior.drag=function(){var r=H(o,"drag","dragstart","dragend"),n=null,i=l(F,s.mouse,h,"mousemove","mouseup"),a=l(tM,s.touch,B,"touchmove","touchend");function o(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function l(i,a,o,l,c){return function(){var u,f=s.event.target.correspondingElement||s.event.target,h=this.parentNode,p=r.of(this,arguments),d=0,y=i(),g=".drag"+(null==y?"":"-"+y),v=s.select(o(f)).on(l+g,function(){var r,n,i=a(h,y);i&&(r=i[0]-x[0],n=i[1]-x[1],d|=r|n,x=i,p({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:r,dy:n}))}).on(c+g,function(){a(h,y)&&(v.on(l+g,null).on(c+g,null),m(d),p({type:"dragend"}))}),m=tT(f),x=a(h,y);u=n?[(u=n.apply(this,arguments)).x-x[0],u.y-x[1]]:[0,0],p({type:"dragstart"})}}return o.origin=function(r){return arguments.length?(n=r,o):n},s.rebind(o,r,"on")},s.touches=function(r,n){return arguments.length<2&&(n=V().touches),n?c(n).map(function(n){var i=tk(r,n);return i.identifier=n.identifier,i}):[]};var tS=1e-6*1e-6,tE=Math.PI,tI=2*tE,tL=tI-1e-6,tC=tE/2,tO=tE/180,tD=180/tE;function tP(r){return r>1?tC:r<-1?-tC:Math.asin(r)}function tB(r){return((r=Math.exp(r))+1/r)/2}var tR=Math.SQRT2;s.interpolateZoom=function(r,n){var i,a,o=r[0],s=r[1],l=r[2],c=n[0],u=n[1],f=n[2],h=c-o,p=u-s,d=h*h+p*p;if(d<tS)a=Math.log(f/l)/tR,i=function(r){return[o+r*h,s+r*p,l*Math.exp(tR*r*a)]};else{var y=Math.sqrt(d),g=(f*f-l*l+4*d)/(2*l*2*y),v=(f*f-l*l-4*d)/(2*f*2*y),m=Math.log(Math.sqrt(g*g+1)-g);a=(Math.log(Math.sqrt(v*v+1)-v)-m)/tR,i=function(r){var n,i,c=r*a,u=tB(m),f=l/(2*y)*(u*(((i=Math.exp(2*(i=tR*c+m)))-1)/(i+1))-((n=Math.exp(n=m))-1/n)/2);return[o+f*h,s+f*p,l*u/tB(tR*c+m)]}}return i.duration=1e3*a,i},s.behavior.zoom=function(){var r,n,i,a,o,l,c,f,p,d={x:0,y:0,k:1},y=[960,500],g=tN,v=250,m=0,x="mousedown.zoom",b="mousemove.zoom",_="mouseup.zoom",w="touchstart.zoom",T=H(A,"zoomstart","zoom","zoomend");function A(r){r.on(x,D).on(tF+".zoom",B).on("dblclick.zoom",R).on(w,P)}function k(r){return[(r[0]-d.x)/d.k,(r[1]-d.y)/d.k]}function M(r){d.k=Math.max(g[0],Math.min(g[1],r))}function S(r,n){var i;n=[(i=n)[0]*d.k+d.x,i[1]*d.k+d.y],d.x+=r[0]-n[0],d.y+=r[1]-n[1]}function E(r,i,a,o){r.__chart__={x:d.x,y:d.y,k:d.k},M(Math.pow(2,o)),S(n=i,a),r=s.select(r),v>0&&(r=r.transition().duration(v)),r.call(A.event)}function I(){c&&c.domain(l.range().map(function(r){return(r-d.x)/d.k}).map(l.invert)),p&&p.domain(f.range().map(function(r){return(r-d.y)/d.k}).map(f.invert))}function L(r){m++||r({type:"zoomstart"})}function C(r){I(),r({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function O(r){--m||(r({type:"zoomend"}),n=null)}function D(){var r=this,n=T.of(r,arguments),i=0,a=s.select(h(r)).on(b,function(){i=1,S(s.mouse(r),o),C(n)}).on(_,function(){a.on(b,null).on(_,null),l(i),O(n)}),o=k(s.mouse(r)),l=tT(r);nZ.call(r),L(n)}function P(){var r,n=this,i=T.of(n,arguments),a={},l=0,c=".zoom-"+s.event.changedTouches[0].identifier,u="touchmove"+c,f="touchend"+c,h=[],p=s.select(n),y=tT(n);function g(){var i=s.touches(n);return r=d.k,i.forEach(function(r){r.identifier in a&&(a[r.identifier]=k(r))}),i}function v(){var r=s.event.target;s.select(r).on(u,m).on(f,b),h.push(r);for(var i=s.event.changedTouches,c=0,p=i.length;c<p;++c)a[i[c].identifier]=null;var y=g(),v=Date.now();if(1===y.length){if(v-o<500){var x=y[0];E(n,x,a[x.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),j()}o=v}else if(y.length>1){x=y[0];var _=y[1],w=x[0]-_[0],T=x[1]-_[1];l=w*w+T*T}}function m(){var c,u,f,h,p=s.touches(n);nZ.call(n);for(var d=0,y=p.length;d<y;++d,h=null)if(h=a[(f=p[d]).identifier]){if(u)break;c=f,u=h}if(h){var g=(g=f[0]-c[0])*g+(g=f[1]-c[1])*g,v=l&&Math.sqrt(g/l);c=[(c[0]+f[0])/2,(c[1]+f[1])/2],u=[(u[0]+h[0])/2,(u[1]+h[1])/2],M(v*r)}o=null,S(c,u),C(i)}function b(){if(s.event.touches.length){for(var r=s.event.changedTouches,n=0,o=r.length;n<o;++n)delete a[r[n].identifier];for(var l in a)return void g()}s.selectAll(h).on(c,null),p.on(x,D).on(w,P),y(),O(i)}v(),L(i),p.on(x,null).on(w,v)}function B(){var o=T.of(this,arguments);a?clearTimeout(a):(nZ.call(this),r=k(n=i||s.mouse(this)),L(o)),a=setTimeout(function(){a=null,O(o)},50),j(),M(Math.pow(2,.002*tz())*d.k),S(n,r),C(o)}function R(){var r=s.mouse(this),n=Math.log(d.k)/Math.LN2;E(this,r,k(r),s.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return tF||(tF="onwheel"in u?(tz=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(tz=function(){return s.event.wheelDelta},"mousewheel"):(tz=function(){return-s.event.detail},"MozMousePixelScroll")),A.event=function(r){r.each(function(){var r=T.of(this,arguments),i=d;nJ?s.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},L(r)}).tween("zoom:zoom",function(){var a=y[0],o=y[1],l=n?n[0]:a/2,c=n?n[1]:o/2,u=s.interpolateZoom([(l-d.x)/d.k,(c-d.y)/d.k,a/d.k],[(l-i.x)/i.k,(c-i.y)/i.k,a/i.k]);return function(n){var i=u(n),o=a/i[2];this.__chart__=d={x:l-i[0]*o,y:c-i[1]*o,k:o},C(r)}}).each("interrupt.zoom",function(){O(r)}).each("end.zoom",function(){O(r)}):(this.__chart__=d,L(r),C(r),O(r))})},A.translate=function(r){return arguments.length?(d={x:+r[0],y:+r[1],k:d.k},I(),A):[d.x,d.y]},A.scale=function(r){return arguments.length?(d={x:d.x,y:d.y,k:null},M(+r),I(),A):d.k},A.scaleExtent=function(r){return arguments.length?(g=null==r?tN:[+r[0],+r[1]],A):g},A.center=function(r){return arguments.length?(i=r&&[+r[0],+r[1]],A):i},A.size=function(r){return arguments.length?(y=r&&[+r[0],+r[1]],A):y},A.duration=function(r){return arguments.length?(v=+r,A):v},A.x=function(r){return arguments.length?(c=r,l=r.copy(),d={x:0,y:0,k:1},A):c},A.y=function(r){return arguments.length?(p=r,f=r.copy(),d={x:0,y:0,k:1},A):p},s.rebind(A,T,"on")};var tz,tF,tN=[0,1/0];function tU(){}function tj(r,n,i){return this instanceof tj?(this.h=+r,this.s=+n,void(this.l=+i)):arguments.length<2?r instanceof tj?new tj(r.h,r.s,r.l):t6(""+r,t5,tj):new tj(r,n,i)}s.color=tU,tU.prototype.toString=function(){return this.rgb()+""},s.hsl=tj;var tV=tj.prototype=new tU;function tH(r,n,i){var a,o;function s(r){var n;return Math.round(255*((n=r)>360?n-=360:n<0&&(n+=360),n<60?a+(o-a)*n/60:n<180?o:n<240?a+(o-a)*(240-n)/60:a))}return r=isNaN(r)?0:(r%=360)<0?r+360:r,n=isNaN(n)||n<0?0:n>1?1:n,a=2*(i=i<0?0:i>1?1:i)-(o=i<=.5?i*(1+n):i+n-i*n),new t0(s(r+120),s(r),s(r-120))}function tq(r,n,i){var a,o,l;return this instanceof tq?(this.h=+r,this.c=+n,void(this.l=+i)):arguments.length<2?r instanceof tq?new tq(r.h,r.c,r.l):(a=r instanceof tY?r.l:(r=t8((r=s.rgb(r)).r,r.g,r.b)).l,o=r.a,l=r.b,a>0?new tq(Math.atan2(l,o)*tD,Math.sqrt(o*o+l*l),a):new tq(NaN,NaN,a)):new tq(r,n,i)}tV.brighter=function(r){return r=Math.pow(.7,arguments.length?r:1),new tj(this.h,this.s,this.l/r)},tV.darker=function(r){return r=Math.pow(.7,arguments.length?r:1),new tj(this.h,this.s,r*this.l)},tV.rgb=function(){return tH(this.h,this.s,this.l)},s.hcl=tq;var tG=tq.prototype=new tU;function tW(r,n,i){return isNaN(r)&&(r=0),isNaN(n)&&(n=0),new tY(i,Math.cos(r*=tO)*n,Math.sin(r)*n)}function tY(r,n,i){return this instanceof tY?(this.l=+r,this.a=+n,void(this.b=+i)):arguments.length<2?r instanceof tY?new tY(r.l,r.a,r.b):r instanceof tq?tW(r.h,r.c,r.l):t8((r=t0(r)).r,r.g,r.b):new tY(r,n,i)}tG.brighter=function(r){return new tq(this.h,this.c,Math.min(100,this.l+tZ*(arguments.length?r:1)))},tG.darker=function(r){return new tq(this.h,this.c,Math.max(0,this.l-tZ*(arguments.length?r:1)))},tG.rgb=function(){return tW(this.h,this.c,this.l).rgb()},s.lab=tY;var tZ=18,tX=tY.prototype=new tU;function tK(r,n,i){var a=(r+16)/116,o=a+n/500,s=a-i/200;return new t0(tQ(3.2404542*(o=.95047*tJ(o))-1.5371385*(a=1*tJ(a))-.4985314*(s=1.08883*tJ(s))),tQ(-.969266*o+1.8760108*a+.041556*s),tQ(.0556434*o-.2040259*a+1.0572252*s))}function tJ(r){return r>.206893034?r*r*r:(r-4/29)/7.787037}function t$(r){return r>.008856?Math.pow(r,1/3):7.787037*r+4/29}function tQ(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function t0(r,n,i){return this instanceof t0?(this.r=~~r,this.g=~~n,void(this.b=~~i)):arguments.length<2?r instanceof t0?new t0(r.r,r.g,r.b):t6(""+r,t0,tH):new t0(r,n,i)}function t1(r){return new t0(r>>16,r>>8&255,255&r)}function t2(r){return t1(r)+""}tX.brighter=function(r){return new tY(Math.min(100,this.l+tZ*(arguments.length?r:1)),this.a,this.b)},tX.darker=function(r){return new tY(Math.max(0,this.l-tZ*(arguments.length?r:1)),this.a,this.b)},tX.rgb=function(){return tK(this.l,this.a,this.b)},s.rgb=t0;var t3=t0.prototype=new tU;function t4(r){return r<16?"0"+Math.max(0,r).toString(16):Math.min(255,r).toString(16)}function t6(r,n,i){var a,o,s,l=0,c=0,u=0;if(a=/([a-z]+)\((.*)\)/.exec(r=r.toLowerCase()))switch(o=a[2].split(","),a[1]){case"hsl":return i(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return n(t9(o[0]),t9(o[1]),t9(o[2]))}return(s=et.get(r))?n(s.r,s.g,s.b):(null==r||"#"!==r.charAt(0)||isNaN(s=parseInt(r.slice(1),16))||(4===r.length?(l=(3840&s)>>4,l|=l>>4,c=240&s,c|=c>>4,u=15&s,u|=u<<4):7===r.length&&(l=(16711680&s)>>16,c=(65280&s)>>8,u=255&s)),n(l,c,u))}function t5(r,n,i){var a,o,s=Math.min(r/=255,n/=255,i/=255),l=Math.max(r,n,i),c=l-s,u=(l+s)/2;return c?(o=u<.5?c/(l+s):c/(2-l-s),a=(r==l?(n-i)/c+(n<i?6:0):n==l?(i-r)/c+2:(r-n)/c+4)*60):(a=NaN,o=u>0&&u<1?0:a),new tj(a,o,u)}function t8(r,n,i){var a=t$((.4124564*(r=t7(r))+.3575761*(n=t7(n))+.1804375*(i=t7(i)))/.95047),o=t$((.2126729*r+.7151522*n+.072175*i)/1);return tY(116*o-16,500*(a-o),200*(o-t$((.0193339*r+.119192*n+.9503041*i)/1.08883)))}function t7(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function t9(r){var n=parseFloat(r);return"%"===r.charAt(r.length-1)?Math.round(2.55*n):n}t3.brighter=function(r){r=Math.pow(.7,arguments.length?r:1);var n=this.r,i=this.g,a=this.b;return n||i||a?(n&&n<30&&(n=30),i&&i<30&&(i=30),a&&a<30&&(a=30),new t0(Math.min(255,n/r),Math.min(255,i/r),Math.min(255,a/r))):new t0(30,30,30)},t3.darker=function(r){return new t0((r=Math.pow(.7,arguments.length?r:1))*this.r,r*this.g,r*this.b)},t3.hsl=function(){return t5(this.r,this.g,this.b)},t3.toString=function(){return"#"+t4(this.r)+t4(this.g)+t4(this.b)};var et=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ee(r){return"function"==typeof r?r:function(){return r}}function er(r){return function(n,i,a){return 2==arguments.length&&"function"==typeof i&&(a=i,i=null),en(n,i,r,a)}}function en(r,n,i,a){var o={},l=s.dispatch("beforesend","progress","load","error"),u={},f=new XMLHttpRequest,h=null;function p(){var r,n,a,s=f.status;if(!s&&((n=(r=f).responseType)&&"text"!==n?r.response:r.responseText)||s>=200&&s<300||304===s){try{a=i.call(o,f)}catch(r){return void l.error.call(o,r)}l.load.call(o,a)}else l.error.call(o,f)}return self.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(r)&&(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=p:f.onreadystatechange=function(){f.readyState>3&&p()},f.onprogress=function(r){var n=s.event;s.event=r;try{l.progress.call(o,f)}finally{s.event=n}},o.header=function(r,n){return r=(r+"").toLowerCase(),arguments.length<2?u[r]:(null==n?delete u[r]:u[r]=n+"",o)},o.mimeType=function(r){return arguments.length?(n=null==r?null:r+"",o):n},o.responseType=function(r){return arguments.length?(h=r,o):h},o.response=function(r){return i=r,o},["get","post"].forEach(function(r){o[r]=function(){return o.send.apply(o,[r].concat(c(arguments)))}}),o.send=function(i,a,s){if(2==arguments.length&&"function"==typeof a&&(s=a,a=null),f.open(i,r,!0),null==n||"accept"in u||(u.accept=n+",*/*"),f.setRequestHeader)for(var c in u)f.setRequestHeader(c,u[c]);return null!=n&&f.overrideMimeType&&f.overrideMimeType(n),null!=h&&(f.responseType=h),null!=s&&o.on("error",s).on("load",function(r){s(null,r)}),l.beforesend.call(o,f),f.send(null==a?null:a),o},o.abort=function(){return f.abort(),o},s.rebind(o,l,"on"),null==a?o:o.get(1===a.length?function(r,n){a(null==r?n:null)}:a)}et.forEach(function(r,n){et.set(r,t1(n))}),s.functor=ee,s.xhr=er(B),s.dsv=function(r,n){var i=RegExp('["'+r+"\n]"),a=r.charCodeAt(0);function o(r,i,a){arguments.length<3&&(a=i,i=null);var o=en(r,n,null==i?s:l(i),a);return o.row=function(r){return arguments.length?o.response(null==(i=r)?s:l(r)):i},o}function s(r){return o.parse(r.responseText)}function l(r){return function(n){return o.parse(n.responseText,r)}}function c(n){return n.map(u).join(r)}function u(r){return i.test(r)?'"'+r.replace(/\"/g,'""')+'"':r}return o.parse=function(r,n){var i;return o.parseRows(r,function(r,a){if(i)return i(r,a-1);var o=function(n){for(var i={},a=r.length,o=0;o<a;++o)i[r[o]]=n[o];return i};i=n?function(r,i){return n(o(r),i)}:o})},o.parseRows=function(r,n){var i,o,s={},l={},c=[],u=r.length,f=0,h=0;function p(){if(f>=u)return l;if(o)return o=!1,s;var n=f;if(34===r.charCodeAt(n)){for(var i=n;i++<u;)if(34===r.charCodeAt(i)){if(34!==r.charCodeAt(i+1))break;++i}return f=i+2,13===(c=r.charCodeAt(i+1))?(o=!0,10===r.charCodeAt(i+2)&&++f):10===c&&(o=!0),r.slice(n+1,i).replace(/""/g,'"')}for(;f<u;){var c,h=1;if(10===(c=r.charCodeAt(f++)))o=!0;else if(13===c)o=!0,10===r.charCodeAt(f)&&(++f,++h);else if(c!==a)continue;return r.slice(n,f-h)}return r.slice(n)}for(;(i=p())!==l;){for(var d=[];i!==s&&i!==l;)d.push(i),i=p();n&&null==(d=n(d,h++))||c.push(d)}return c},o.format=function(n){if(Array.isArray(n[0]))return o.formatRows(n);var i=new P,a=[];return n.forEach(function(r){for(var n in r)i.has(n)||a.push(i.add(n))}),[a.map(u).join(r)].concat(n.map(function(n){return a.map(function(r){return u(n[r])}).join(r)})).join("\n")},o.formatRows=function(r){return r.map(c).join("\n")},o},s.csv=s.dsv(",","text/csv"),s.tsv=s.dsv("	","text/tab-separated-values");var ei,ea,eo,es,el=this[R(this,"requestAnimationFrame")]||function(r){setTimeout(r,17)};function ec(r,n,i){var a=arguments.length;a<2&&(n=0),a<3&&(i=Date.now());var o={c:r,t:i+n,n:null};return ea?ea.n=o:ei=o,ea=o,eo||(es=clearTimeout(es),eo=1,el(eu)),o}function eu(){var r=ef(),n=eh()-r;n>24?(isFinite(n)&&(clearTimeout(es),es=setTimeout(eu,n)),eo=0):(eo=1,el(eu))}function ef(){for(var r=Date.now(),n=ei;n;)r>=n.t&&n.c(r-n.t)&&(n.c=null),n=n.n;return r}function eh(){for(var r,n=ei,i=1/0;n;)n.c?(n.t<i&&(i=n.t),n=(r=n).n):n=r?r.n=n.n:ei=n.n;return ea=r,i}function ep(r){return r[0]}function ed(r){return r[1]}function ey(r){for(var n,i,a,o=r.length,s=[0,1],l=2,c=2;c<o;c++){for(;l>1&&(n=r[s[l-2]],i=r[s[l-1]],a=r[c],(i[0]-n[0])*(a[1]-n[1])-(i[1]-n[1])*(a[0]-n[0])<=0);)--l;s[l++]=c}return s.slice(0,l)}function eg(r,n){return r[0]-n[0]||r[1]-n[1]}s.timer=function(){ec.apply(this,arguments)},s.timer.flush=function(){ef(),eh()},s.round=function(r,n){return n?Math.round(r*(n=Math.pow(10,n)))/n:Math.round(r)},s.geom={},s.geom.hull=function(r){var n=ep,i=ed;if(arguments.length)return a(r);function a(r){if(r.length<3)return[];var a,o=ee(n),s=ee(i),l=r.length,c=[],u=[];for(a=0;a<l;a++)c.push([+o.call(this,r[a],a),+s.call(this,r[a],a),a]);for(c.sort(eg),a=0;a<l;a++)u.push([c[a][0],-c[a][1]]);var f=ey(c),h=ey(u),p=h[0]===f[0],d=h[h.length-1]===f[f.length-1],y=[];for(a=f.length-1;a>=0;--a)y.push(r[c[f[a]][2]]);for(a=+p;a<h.length-d;++a)y.push(r[c[h[a]][2]]);return y}return a.x=function(r){return arguments.length?(n=r,a):n},a.y=function(r){return arguments.length?(i=r,a):i},a},s.geom.polygon=function(r){return G(r,ev),r};var ev=s.geom.polygon.prototype=[];function em(r,n,i){return(i[0]-n[0])*(r[1]-n[1])<(i[1]-n[1])*(r[0]-n[0])}function ex(r,n,i,a){var o=r[0],s=i[0],l=n[0]-o,c=a[0]-s,u=r[1],f=i[1],h=n[1]-u,p=a[1]-f,d=(c*(u-f)-p*(o-s))/(p*l-c*h);return[o+d*l,u+d*h]}function eb(r){var n=r[0],i=r[r.length-1];return!(n[0]-i[0]||n[1]-i[1])}ev.area=function(){for(var r,n=-1,i=this.length,a=this[i-1],o=0;++n<i;)r=a,a=this[n],o+=r[1]*a[0]-r[0]*a[1];return .5*o},ev.centroid=function(r){var n,i,a=-1,o=this.length,s=0,l=0,c=this[o-1];for(arguments.length||(r=-1/(6*this.area()));++a<o;)n=c,c=this[a],i=n[0]*c[1]-c[0]*n[1],s+=(n[0]+c[0])*i,l+=(n[1]+c[1])*i;return[s*r,l*r]},ev.clip=function(r){for(var n,i,a,o,s,l,c=eb(r),u=-1,f=this.length-eb(this),h=this[f-1];++u<f;){for(n=r.slice(),r.length=0,o=this[u],s=n[(a=n.length-c)-1],i=-1;++i<a;)em(l=n[i],h,o)?(em(s,h,o)||r.push(ex(s,l,h,o)),r.push(l)):em(s,h,o)&&r.push(ex(s,l,h,o)),s=l;c&&r.push(r[0]),h=o}return r};var e_,ew,eT,eA,ek,eM=[],eS=[];function eE(){eV(this),this.edge=this.site=this.circle=null}function eI(r){var n=eM.pop()||new eE;return n.site=r,n}function eL(r){eR(r),eT.remove(r),eM.push(r),eV(r)}function eC(r,n){var i=r.site,a=i.x,o=i.y,s=o-n;if(!s)return a;var l=r.P;if(!l)return-1/0;var c=(i=l.site).x,u=i.y,f=u-n;if(!f)return c;var h=c-a,p=1/s-1/f,d=h/f;return p?(-d+Math.sqrt(d*d-2*p*(h*h/(-2*f)-u+f/2+o-s/2)))/p+a:(a+c)/2}function eO(r){this.site=r,this.edges=[]}function eD(r,n){return n.angle-r.angle}function eP(){eV(this),this.x=this.y=this.arc=this.site=this.cy=null}function eB(r){var n=r.P,i=r.N;if(n&&i){var a=n.site,o=r.site,s=i.site;if(a!==s){var l=o.x,c=o.y,u=a.x-l,f=a.y-c,h=s.x-l,p=2*(u*(m=s.y-c)-f*h);if(!(p>=-tS)){var d=u*u+f*f,y=h*h+m*m,g=(m*d-f*y)/p,v=(u*y-h*d)/p,m=v+c,x=eS.pop()||new eP;x.arc=r,x.site=o,x.x=g+l,x.y=m+Math.sqrt(g*g+v*v),x.cy=m,r.circle=x;for(var b=null,_=ek._;_;)if(x.y<_.y||x.y===_.y&&x.x<=_.x){if(!_.L){b=_.P;break}_=_.L}else{if(!_.R){b=_;break}_=_.R}ek.insert(b,x),b||(eA=x)}}}}function eR(r){var n=r.circle;n&&(n.P||(eA=n.N),ek.remove(n),eS.push(n),eV(n),r.circle=null)}function ez(r,n){this.l=r,this.r=n,this.a=this.b=null}function eF(r,n,i,a){var o=new ez(r,n);return e_.push(o),i&&eN(o,r,n,i),a&&eN(o,n,r,a),ew[r.i].edges.push(new eU(o,r,n)),ew[n.i].edges.push(new eU(o,n,r)),o}function eN(r,n,i,a){r.a||r.b?r.l===i?r.b=a:r.a=a:(r.a=a,r.l=n,r.r=i)}function eU(r,n,i){var a=r.a,o=r.b;this.edge=r,this.site=n,this.angle=i?Math.atan2(i.y-n.y,i.x-n.x):r.l===n?Math.atan2(o.x-a.x,a.y-o.y):Math.atan2(a.x-o.x,o.y-a.y)}function ej(){this._=null}function eV(r){r.U=r.C=r.L=r.R=r.P=r.N=null}function eH(r,n){var i=n.R,a=n.U;a?a.L===n?a.L=i:a.R=i:r._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function eq(r,n){var i=n.L,a=n.U;a?a.L===n?a.L=i:a.R=i:r._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function eG(r){for(;r.L;)r=r.L;return r}function eW(r,n){var i,a,o,s=r.sort(eY).pop();for(e_=[],ew=Array(r.length),eT=new ej,ek=new ej;;)if(o=eA,s&&(!o||s.y<o.y||s.y===o.y&&s.x<o.x))s.x===i&&s.y===a||(ew[s.i]=new eO(s),function(r){for(var n,i,a,o,s=r.x,l=r.y,c=eT._;c;)if((a=eC(c,l)-s)>1e-6)c=c.L;else{if(!((o=s-function(r,n){var i=r.N;if(i)return eC(i,n);var a=r.site;return a.y===n?a.x:1/0}(c,l))>1e-6)){a>-.000001?(n=c.P,i=c):o>-.000001?(n=c,i=c.N):n=i=c;break}if(!c.R){n=c;break}c=c.R}var u=eI(r);if(eT.insert(n,u),n||i){if(n===i)return eR(n),i=eI(n.site),eT.insert(u,i),u.edge=i.edge=eF(n.site,u.site),eB(n),void eB(i);if(i){eR(n),eR(i);var f=n.site,h=f.x,p=f.y,d=r.x-h,y=r.y-p,g=i.site,v=g.x-h,m=g.y-p,x=2*(d*m-y*v),b=d*d+y*y,_=v*v+m*m,w={x:(m*b-y*_)/x+h,y:(d*_-v*b)/x+p};eN(i.edge,f,g,w),u.edge=eF(f,r,null,w),i.edge=eF(r,g,null,w),eB(n),eB(i)}else u.edge=eF(n.site,u.site)}}(s),i=s.x,a=s.y),s=r.pop();else{if(!o)break;!function(r){var n=r.circle,i=n.x,a=n.cy,o={x:i,y:a},s=r.P,l=r.N,c=[r];eL(r);for(var u=s;u.circle&&1e-6>A(i-u.circle.x)&&1e-6>A(a-u.circle.cy);)s=u.P,c.unshift(u),eL(u),u=s;c.unshift(u),eR(u);for(var f=l;f.circle&&1e-6>A(i-f.circle.x)&&1e-6>A(a-f.circle.cy);)l=f.N,c.push(f),eL(f),f=l;c.push(f),eR(f);var h,p=c.length;for(h=1;h<p;++h)f=c[h],u=c[h-1],eN(f.edge,u.site,f.site,o);u=c[0],(f=c[p-1]).edge=eF(u.site,f.site,null,o),eB(u),eB(f)}(o.arc)}n&&(function(r){for(var n,i,a,o,s,l=e_,c=(i=r[0][0],a=r[0][1],o=r[1][0],s=r[1][1],function(r){var n,l=r.a,c=r.b,u=l.x,f=l.y,h=0,p=1,d=c.x-u,y=c.y-f;if(n=i-u,d||!(n>0)){if(n/=d,d<0){if(n<h)return;n<p&&(p=n)}else if(d>0){if(n>p)return;n>h&&(h=n)}if(n=o-u,d||!(n<0)){if(n/=d,d<0){if(n>p)return;n>h&&(h=n)}else if(d>0){if(n<h)return;n<p&&(p=n)}if(n=a-f,y||!(n>0)){if(n/=y,y<0){if(n<h)return;n<p&&(p=n)}else if(y>0){if(n>p)return;n>h&&(h=n)}if(n=s-f,y||!(n<0)){if(n/=y,y<0){if(n>p)return;n>h&&(h=n)}else if(y>0){if(n<h)return;n<p&&(p=n)}return h>0&&(r.a={x:u+h*d,y:f+h*y}),p<1&&(r.b={x:u+p*d,y:f+p*y}),r}}}}}),u=l.length;u--;)(!function(r,n){var i=r.b;if(i)return!0;var a,o,s=r.a,l=n[0][0],c=n[1][0],u=n[0][1],f=n[1][1],h=r.l,p=r.r,d=h.x,y=h.y,g=p.x,v=p.y,m=(d+g)/2;if(v===y){if(m<l||m>=c)return;if(d>g){if(s){if(s.y>=f)return}else s={x:m,y:u};i={x:m,y:f}}else{if(s){if(s.y<u)return}else s={x:m,y:f};i={x:m,y:u}}}else if(o=(y+v)/2-(a=(d-g)/(v-y))*m,a<-1||a>1){if(d>g){if(s){if(s.y>=f)return}else s={x:(u-o)/a,y:u};i={x:(f-o)/a,y:f}}else{if(s){if(s.y<u)return}else s={x:(f-o)/a,y:f};i={x:(u-o)/a,y:u}}}else if(y<v){if(s){if(s.x>=c)return}else s={x:l,y:a*l+o};i={x:c,y:a*c+o}}else{if(s){if(s.x<l)return}else s={x:c,y:a*c+o};i={x:l,y:a*l+o}}return r.a=s,r.b=i,!0}(n=l[u],r)||!c(n)||1e-6>A(n.a.x-n.b.x)&&1e-6>A(n.a.y-n.b.y))&&(n.a=n.b=null,l.splice(u,1))}(n),function(r){for(var n,i,a,o,s,l,c,u,f,h,p,d,y,g=r[0][0],v=r[1][0],m=r[0][1],x=r[1][1],b=ew,_=b.length;_--;)if((u=b[_])&&u.prepare())for(p=(h=u.edges).length,f=0;f<p;)l=(y=h[f].end()).x,c=y.y,o=(d=h[++f%p].start()).x,s=d.y,(A(l-o)>1e-6||A(c-s)>1e-6)&&(h.splice(f,0,new eU((n=u.site,i=1e-6>A(l-g)&&x-c>1e-6?{x:g,y:1e-6>A(o-g)?s:x}:1e-6>A(c-x)&&v-l>1e-6?{x:1e-6>A(s-x)?o:v,y:x}:1e-6>A(l-v)&&c-m>1e-6?{x:v,y:1e-6>A(o-v)?s:m}:1e-6>A(c-m)&&l-g>1e-6?{x:1e-6>A(s-m)?o:g,y:m}:null,a=void 0,(a=new ez(n,null)).a=y,a.b=i,e_.push(a),a),u.site,null)),++p)}(n));var l={cells:ew,edges:e_};return eT=ek=e_=ew=null,l}function eY(r,n){return n.y-r.y||n.x-r.x}eO.prototype.prepare=function(){for(var r,n=this.edges,i=n.length;i--;)(r=n[i].edge).b&&r.a||n.splice(i,1);return n.sort(eD),n.length},eU.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ej.prototype={insert:function(r,n){var i,a,o;if(r){if(n.P=r,n.N=r.N,r.N&&(r.N.P=n),r.N=n,r.R){for(r=r.R;r.L;)r=r.L;r.L=n}else r.R=n;i=r}else this._?(r=eG(this._),n.P=null,n.N=r,r.P=r.L=n,i=r):(n.P=n.N=null,this._=n,i=null);for(n.L=n.R=null,n.U=i,n.C=!0,r=n;i&&i.C;)i===(a=i.U).L?(o=a.R)&&o.C?(i.C=o.C=!1,a.C=!0,r=a):(r===i.R&&(eH(this,i),i=(r=i).U),i.C=!1,a.C=!0,eq(this,a)):(o=a.L)&&o.C?(i.C=o.C=!1,a.C=!0,r=a):(r===i.L&&(eq(this,i),i=(r=i).U),i.C=!1,a.C=!0,eH(this,a)),i=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var n,i,a,o=r.U,s=r.L,l=r.R;if(i=s?l?eG(l):s:l,o?o.L===r?o.L=i:o.R=i:this._=i,s&&l?(a=i.C,i.C=r.C,i.L=s,s.U=i,i!==l?(o=i.U,i.U=r.U,r=i.R,o.L=r,i.R=l,l.U=i):(i.U=o,o=i,r=i.R)):(a=r.C,r=i),r&&(r.U=o),!a){if(r&&r.C)r.C=!1;else{do{if(r===this._)break;if(r===o.L){if((n=o.R).C&&(n.C=!1,o.C=!0,eH(this,o),n=o.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,eq(this,n),n=o.R),n.C=o.C,o.C=n.R.C=!1,eH(this,o),r=this._;break}}else if((n=o.L).C&&(n.C=!1,o.C=!0,eq(this,o),n=o.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,eH(this,n),n=o.L),n.C=o.C,o.C=n.L.C=!1,eq(this,o),r=this._;break}n.C=!0,r=o,o=o.U}while(!r.C)r&&(r.C=!1)}}}},s.geom.voronoi=function(r){var n=ep,i=ed,a=n,o=i,s=eZ;if(r)return l(r);function l(r){var n=Array(r.length),i=s[0][0],a=s[0][1],o=s[1][0],l=s[1][1];return eW(c(r),s).cells.forEach(function(s,c){var u=s.edges,f=s.site;(n[c]=u.length?u.map(function(r){var n=r.start();return[n.x,n.y]}):f.x>=i&&f.x<=o&&f.y>=a&&f.y<=l?[[i,l],[o,l],[o,a],[i,a]]:[]).point=r[c]}),n}function c(r){return r.map(function(r,n){return{x:1e-6*Math.round(a(r,n)/1e-6),y:1e-6*Math.round(o(r,n)/1e-6),i:n}})}return l.links=function(r){return eW(c(r)).edges.filter(function(r){return r.l&&r.r}).map(function(n){return{source:r[n.l.i],target:r[n.r.i]}})},l.triangles=function(r){var n=[];return eW(c(r)).cells.forEach(function(i,a){for(var o,s,l=i.site,c=i.edges.sort(eD),u=-1,f=c.length,h=c[f-1].edge,p=h.l===l?h.r:h.l;++u<f;)o=p,p=(h=c[u].edge).l===l?h.r:h.l,a<o.i&&a<p.i&&(s=p,(l.x-s.x)*(o.y-l.y)-(l.x-o.x)*(s.y-l.y)<0)&&n.push([r[a],r[o.i],r[p.i]])}),n},l.x=function(r){return arguments.length?(a=ee(n=r),l):n},l.y=function(r){return arguments.length?(o=ee(i=r),l):i},l.clipExtent=function(r){return arguments.length?(s=null==r?eZ:r,l):s===eZ?null:s},l.size=function(r){return arguments.length?l.clipExtent(r&&[[0,0],r]):s===eZ?null:s&&s[1]},l};var eZ=[[-1e6,-1e6],[1e6,1e6]];function eX(r){return r.x}function eK(r){return r.y}function eJ(r,n){r=s.rgb(r),n=s.rgb(n);var i=r.r,a=r.g,o=r.b,l=n.r-i,c=n.g-a,u=n.b-o;return function(r){return"#"+t4(Math.round(i+l*r))+t4(Math.round(a+c*r))+t4(Math.round(o+u*r))}}function e$(r,n){var i,a={},o={};for(i in r)i in n?a[i]=e3(r[i],n[i]):o[i]=r[i];for(i in n)i in r||(o[i]=n[i]);return function(r){for(i in a)o[i]=a[i](r);return o}}function eQ(r,n){return r=+r,n=+n,function(i){return r*(1-i)+n*i}}function e0(r,n){var i,a,o,s=e1.lastIndex=e2.lastIndex=0,l=-1,c=[],u=[];for(r+="",n+="";(i=e1.exec(r))&&(a=e2.exec(n));)(o=a.index)>s&&(o=n.slice(s,o),c[l]?c[l]+=o:c[++l]=o),(i=i[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,u.push({i:l,x:eQ(i,a)})),s=e2.lastIndex;return s<n.length&&(o=n.slice(s),c[l]?c[l]+=o:c[++l]=o),c.length<2?u[0]?(n=u[0].x,function(r){return n(r)+""}):function(){return n}:(n=u.length,function(r){for(var i,a=0;a<n;++a)c[(i=u[a]).i]=i.x(r);return c.join("")})}s.geom.delaunay=function(r){return s.geom.voronoi().triangles(r)},s.geom.quadtree=function(r,n,i,a,o){var s,l=ep,c=ed;if(s=arguments.length)return l=eX,c=eK,3===s&&(o=i,a=n,i=n=0),u(r);function u(r){var u,f,h,p,d,y,g,v,m,x=ee(l),b=ee(c);if(null!=n)y=n,g=i,v=a,m=o;else if(v=m=-(y=g=1/0),f=[],h=[],d=r.length,s)for(p=0;p<d;++p)(u=r[p]).x<y&&(y=u.x),u.y<g&&(g=u.y),u.x>v&&(v=u.x),u.y>m&&(m=u.y),f.push(u.x),h.push(u.y);else for(p=0;p<d;++p){var _=+x(u=r[p],p),w=+b(u,p);_<y&&(y=_),w<g&&(g=w),_>v&&(v=_),w>m&&(m=w),f.push(_),h.push(w)}var T=v-y,k=m-g;function M(r,n,i,a,o,s,l,c){if(!isNaN(i)&&!isNaN(a)){if(r.leaf){var u=r.x,f=r.y;if(null!=u){if(A(u-i)+A(f-a)<.01)S(r,n,i,a,o,s,l,c);else{var h=r.point;r.x=r.y=r.point=null,S(r,h,u,f,o,s,l,c),S(r,n,i,a,o,s,l,c)}}else r.x=i,r.y=a,r.point=n}else S(r,n,i,a,o,s,l,c)}}function S(r,n,i,a,o,s,l,c){var u=.5*(o+l),f=.5*(s+c),h=i>=u,p=a>=f,d=p<<1|h;r.leaf=!1,h?o=u:l=u,p?s=f:c=f,M(r=r.nodes[d]||(r.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,i,a,o,s,l,c)}T>k?m=g+T:v=y+k;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(r){M(E,r,+x(r,++p),+b(r,p),y,g,v,m)}};if(E.visit=function(r){(function r(n,i,a,o,s,l){if(!n(i,a,o,s,l)){var c=.5*(a+s),u=.5*(o+l),f=i.nodes;f[0]&&r(n,f[0],a,o,c,u),f[1]&&r(n,f[1],c,o,s,u),f[2]&&r(n,f[2],a,u,c,l),f[3]&&r(n,f[3],c,u,s,l)}})(r,E,y,g,v,m)},E.find=function(r){var n,i,a,o,s,l,c,u;return n=r[0],i=r[1],u=1/0,function r(f,h,p,d,y){if(!(h>s||p>l||d<a||y<o)){if(g=f.point){var g,v=n-f.x,m=i-f.y,x=v*v+m*m;if(x<u){var b=Math.sqrt(u=x);a=n-b,o=i-b,s=n+b,l=i+b,c=g}}for(var _=f.nodes,w=.5*(h+d),T=.5*(p+y),A=(i>=T)<<1|n>=w,k=A+4;A<k;++A)if(f=_[3&A])switch(3&A){case 0:r(f,h,p,w,T);break;case 1:r(f,w,p,d,T);break;case 2:r(f,h,T,w,y);break;case 3:r(f,w,T,d,y)}}}(E,a=y,o=g,s=v,l=m),c},p=-1,null==n){for(;++p<d;)M(E,r[p],f[p],h[p],y,g,v,m);--p}else r.forEach(E.add);return f=h=r=u=null,E}return u.x=function(r){return arguments.length?(l=r,u):l},u.y=function(r){return arguments.length?(c=r,u):c},u.extent=function(r){return arguments.length?(null==r?n=i=a=o=null:(n=+r[0][0],i=+r[0][1],a=+r[1][0],o=+r[1][1]),u):null==n?null:[[n,i],[a,o]]},u.size=function(r){return arguments.length?(null==r?n=i=a=o=null:(n=i=0,a=+r[0],o=+r[1]),u):null==n?null:[a-n,o-i]},u},s.interpolateRgb=eJ,s.interpolateObject=e$,s.interpolateNumber=eQ,s.interpolateString=e0;var e1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,e2=RegExp(e1.source,"g");function e3(r,n){for(var i,a=s.interpolators.length;--a>=0&&!(i=s.interpolators[a](r,n)););return i}function e4(r,n){var i,a=[],o=[],s=r.length,l=n.length,c=Math.min(r.length,n.length);for(i=0;i<c;++i)a.push(e3(r[i],n[i]));for(;i<s;++i)o[i]=r[i];for(;i<l;++i)o[i]=n[i];return function(r){for(i=0;i<c;++i)o[i]=a[i](r);return o}}s.interpolate=e3,s.interpolators=[function(r,n){var i=typeof n;return("string"===i?et.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?eJ:e0:n instanceof tU?eJ:Array.isArray(n)?e4:"object"===i&&isNaN(n)?e$:eQ)(r,n)}],s.interpolateArray=e4;var e6=function(){return B},e5=s.map({linear:e6,poly:function(r){return function(n){return Math.pow(n,r)}},quad:function(){return rt},cubic:function(){return re},sin:function(){return rn},exp:function(){return ri},circle:function(){return ra},elastic:function(r,n){var i;return arguments.length<2&&(n=.45),arguments.length?i=n/tI*Math.asin(1/r):(r=1,i=n/4),function(a){return 1+r*Math.pow(2,-10*a)*Math.sin((a-i)*tI/n)}},back:function(r){return r||(r=1.70158),function(n){return n*n*((r+1)*n-r)}},bounce:function(){return ro}}),e8=s.map({in:B,out:e7,"in-out":e9,"out-in":function(r){return e9(e7(r))}});function e7(r){return function(n){return 1-r(1-n)}}function e9(r){return function(n){return .5*(n<.5?r(2*n):2-r(2-2*n))}}function rt(r){return r*r}function re(r){return r*r*r}function rr(r){if(r<=0)return 0;if(r>=1)return 1;var n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}function rn(r){return 1-Math.cos(r*tC)}function ri(r){return Math.pow(2,10*(r-1))}function ra(r){return 1-Math.sqrt(1-r*r)}function ro(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375}function rs(r,n){return n-=r,function(i){return Math.round(r+n*i)}}function rl(r){var n,i=[r.a,r.b],a=[r.c,r.d],o=ru(i),s=rc(i,a),l=ru((a[0]+=(n=-s)*i[0],a[1]+=n*i[1],a))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*tD,this.translate=[r.e,r.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*tD:0}function rc(r,n){return r[0]*n[0]+r[1]*n[1]}function ru(r){var n=Math.sqrt(rc(r,r));return n&&(r[0]/=n,r[1]/=n),n}s.ease=function(r){var n,i=r.indexOf("-"),a=i>=0?r.slice(0,i):r,o=i>=0?r.slice(i+1):"in";return a=e5.get(a)||e6,n=(o=e8.get(o)||B)(a.apply(null,l.call(arguments,1))),function(r){return r<=0?0:r>=1?1:n(r)}},s.interpolateHcl=function(r,n){r=s.hcl(r),n=s.hcl(n);var i=r.h,a=r.c,o=r.l,l=n.h-i,c=n.c-a,u=n.l-o;return isNaN(c)&&(c=0,a=isNaN(a)?n.c:a),isNaN(l)?(l=0,i=isNaN(i)?n.h:i):l>180?l-=360:l<-180&&(l+=360),function(r){return tW(i+l*r,a+c*r,o+u*r)+""}},s.interpolateHsl=function(r,n){r=s.hsl(r),n=s.hsl(n);var i=r.h,a=r.s,o=r.l,l=n.h-i,c=n.s-a,u=n.l-o;return isNaN(c)&&(c=0,a=isNaN(a)?n.s:a),isNaN(l)?(l=0,i=isNaN(i)?n.h:i):l>180?l-=360:l<-180&&(l+=360),function(r){return tH(i+l*r,a+c*r,o+u*r)+""}},s.interpolateLab=function(r,n){r=s.lab(r),n=s.lab(n);var i=r.l,a=r.a,o=r.b,l=n.l-i,c=n.a-a,u=n.b-o;return function(r){return tK(i+l*r,a+c*r,o+u*r)+""}},s.interpolateRound=rs,s.transform=function(r){var n=u.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(r){if(null!=r){n.setAttribute("transform",r);var i=n.transform.baseVal.consolidate()}return new rl(i?i.matrix:rf)})(r)},rl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rf={a:1,b:0,c:0,d:1,e:0,f:0};function rh(r){return r.length?r.pop()+",":""}function rp(r,n){var i,a,o,l,c=[],u=[];return r=s.transform(r),n=s.transform(n),function(r,n,i,a){if(r[0]!==n[0]||r[1]!==n[1]){var o=i.push("translate(",null,",",null,")");a.push({i:o-4,x:eQ(r[0],n[0])},{i:o-2,x:eQ(r[1],n[1])})}else(n[0]||n[1])&&i.push("translate("+n+")")}(r.translate,n.translate,c,u),(i=r.rotate)!==(a=n.rotate)?(i-a>180?a+=360:a-i>180&&(i+=360),u.push({i:c.push(rh(c)+"rotate(",null,")")-2,x:eQ(i,a)})):a&&c.push(rh(c)+"rotate("+a+")"),(o=r.skew)!==(l=n.skew)?u.push({i:c.push(rh(c)+"skewX(",null,")")-2,x:eQ(o,l)}):l&&c.push(rh(c)+"skewX("+l+")"),function(r,n,i,a){if(r[0]!==n[0]||r[1]!==n[1]){var o=i.push(rh(i)+"scale(",null,",",null,")");a.push({i:o-4,x:eQ(r[0],n[0])},{i:o-2,x:eQ(r[1],n[1])})}else 1===n[0]&&1===n[1]||i.push(rh(i)+"scale("+n+")")}(r.scale,n.scale,c,u),r=n=null,function(r){for(var n,i=-1,a=u.length;++i<a;)c[(n=u[i]).i]=n.x(r);return c.join("")}}function rd(r,n){return n=(n-=r=+r)||1/n,function(i){return(i-r)/n}}function ry(r,n){return n=(n-=r=+r)||1/n,function(i){return Math.max(0,Math.min(1,(i-r)/n))}}function rg(r){for(var n=[],i=r.parent;null!=i;)n.push(r),r=i,i=i.parent;return n.push(r),n}function rv(r){r.fixed|=2}function rm(r){r.fixed&=-7}function rx(r){r.fixed|=4,r.px=r.x,r.py=r.y}function rb(r){r.fixed&=-5}s.interpolateTransform=rp,s.layout={},s.layout.bundle=function(){return function(r){for(var n=[],i=-1,a=r.length;++i<a;)n.push(function(r){for(var n=r.source,i=r.target,a=function(r,n){if(r===n)return r;for(var i=rg(r),a=rg(n),o=i.pop(),s=a.pop(),l=null;o===s;)l=o,o=i.pop(),s=a.pop();return l}(n,i),o=[n];n!==a;)o.push(n=n.parent);for(var s=o.length;i!==a;)o.splice(s,0,i),i=i.parent;return o}(r[i]));return n}},s.layout.chord=function(){var r,n,i,a,o,l,c,u={},f=0;function h(){var u,h,d,y,g,v={},m=[],x=s.range(a),b=[];for(r=[],n=[],u=0,y=-1;++y<a;){for(h=0,g=-1;++g<a;)h+=i[y][g];m.push(h),b.push(s.range(a)),u+=h}for(o&&x.sort(function(r,n){return o(m[r],m[n])}),l&&b.forEach(function(r,n){r.sort(function(r,a){return l(i[n][r],i[n][a])})}),u=(tI-f*a)/u,h=0,y=-1;++y<a;){for(d=h,g=-1;++g<a;){var _=x[y],w=b[_][g],T=i[_][w],A=h,k=h+=T*u;v[_+"-"+w]={index:_,subindex:w,startAngle:A,endAngle:k,value:T}}n[_]={index:_,startAngle:d,endAngle:h,value:m[_]},h+=f}for(y=-1;++y<a;)for(g=y-1;++g<a;){var M=v[y+"-"+g],S=v[g+"-"+y];(M.value||S.value)&&r.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}c&&p()}function p(){r.sort(function(r,n){return c((r.source.value+r.target.value)/2,(n.source.value+n.target.value)/2)})}return u.matrix=function(o){return arguments.length?(a=(i=o)&&i.length,r=n=null,u):i},u.padding=function(i){return arguments.length?(f=i,r=n=null,u):f},u.sortGroups=function(i){return arguments.length?(o=i,r=n=null,u):o},u.sortSubgroups=function(n){return arguments.length?(l=n,r=null,u):l},u.sortChords=function(n){return arguments.length?(c=n,r&&p(),u):c},u.chords=function(){return r||h(),r},u.groups=function(){return n||h(),n},u},s.layout.force=function(){var r,n,i,a,o,l,c={},u=s.dispatch("start","tick","end"),f=[1,1],h=.9,p=r_,d=rw,y=-30,g=rT,v=.1,m=.64,x=[],b=[];function _(r){r.px=s.event.x,r.py=s.event.y,c.resume()}return c.tick=function(){if((i*=.99)<.005)return r=null,u.end({type:"end",alpha:i=0}),!0;var n,c,p,d,_,w,T,A,k,M=x.length,S=b.length;for(c=0;c<S;++c)d=(p=b[c]).source,(w=(A=(_=p.target).x-d.x)*A+(k=_.y-d.y)*k)&&(A*=w=i*o[c]*((w=Math.sqrt(w))-a[c])/w,k*=w,_.x-=A*(T=d.weight+_.weight?d.weight/(d.weight+_.weight):.5),_.y-=k*T,d.x+=A*(T=1-T),d.y+=k*T);if((T=i*v)&&(A=f[0]/2,k=f[1]/2,c=-1,T))for(;++c<M;)(p=x[c]).x+=(A-p.x)*T,p.y+=(k-p.y)*T;if(y)for(function r(n,i,a){var o=0,s=0;if(n.charge=0,!n.leaf)for(var l,c=n.nodes,u=c.length,f=-1;++f<u;)null!=(l=c[f])&&(r(l,i,a),n.charge+=l.charge,o+=l.charge*l.cx,s+=l.charge*l.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var h=i*a[n.point.index];n.charge+=n.pointCharge=h,o+=h*n.point.x,s+=h*n.point.y}n.cx=o/n.charge,n.cy=s/n.charge}(n=s.geom.quadtree(x),i,l),c=-1;++c<M;)(p=x[c]).fixed||n.visit(function(r){return function(n,i,a,o){if(n.point!==r){var s=n.cx-r.x,l=n.cy-r.y,c=o-i,u=s*s+l*l;if(c*c/m<u){if(u<g){var f=n.charge/u;r.px-=s*f,r.py-=l*f}return!0}n.point&&u&&u<g&&(f=n.pointCharge/u,r.px-=s*f,r.py-=l*f)}return!n.charge}}(p));for(c=-1;++c<M;)(p=x[c]).fixed?(p.x=p.px,p.y=p.py):(p.x-=(p.px-(p.px=p.x))*h,p.y-=(p.py-(p.py=p.y))*h);u.tick({type:"tick",alpha:i})},c.nodes=function(r){return arguments.length?(x=r,c):x},c.links=function(r){return arguments.length?(b=r,c):b},c.size=function(r){return arguments.length?(f=r,c):f},c.linkDistance=function(r){return arguments.length?(p="function"==typeof r?r:+r,c):p},c.distance=c.linkDistance,c.linkStrength=function(r){return arguments.length?(d="function"==typeof r?r:+r,c):d},c.friction=function(r){return arguments.length?(h=+r,c):h},c.charge=function(r){return arguments.length?(y="function"==typeof r?r:+r,c):y},c.chargeDistance=function(r){return arguments.length?(g=r*r,c):Math.sqrt(g)},c.gravity=function(r){return arguments.length?(v=+r,c):v},c.theta=function(r){return arguments.length?(m=r*r,c):Math.sqrt(m)},c.alpha=function(n){return arguments.length?(n=+n,i?n>0?i=n:(r.c=null,r.t=NaN,r=null,u.end({type:"end",alpha:i=0})):n>0&&(u.start({type:"start",alpha:i=n}),r=ec(c.tick)),c):i},c.start=function(){var r,n,i,s=x.length,u=b.length,h=f[0],g=f[1];for(r=0;r<s;++r)(i=x[r]).index=r,i.weight=0;for(r=0;r<u;++r)"number"==typeof(i=b[r]).source&&(i.source=x[i.source]),"number"==typeof i.target&&(i.target=x[i.target]),++i.source.weight,++i.target.weight;for(r=0;r<s;++r)isNaN((i=x[r]).x)&&(i.x=v("x",h)),isNaN(i.y)&&(i.y=v("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(a=[],"function"==typeof p)for(r=0;r<u;++r)a[r]=+p.call(this,b[r],r);else for(r=0;r<u;++r)a[r]=p;if(o=[],"function"==typeof d)for(r=0;r<u;++r)o[r]=+d.call(this,b[r],r);else for(r=0;r<u;++r)o[r]=d;if(l=[],"function"==typeof y)for(r=0;r<s;++r)l[r]=+y.call(this,x[r],r);else for(r=0;r<s;++r)l[r]=y;function v(i,a){if(!n){for(n=Array(s),f=0;f<s;++f)n[f]=[];for(f=0;f<u;++f){var o=b[f];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var l,c=n[r],f=-1,h=c.length;++f<h;)if(!isNaN(l=c[f][i]))return l;return Math.random()*a}return c.resume()},c.resume=function(){return c.alpha(.1)},c.stop=function(){return c.alpha(0)},c.drag=function(){if(n||(n=s.behavior.drag().origin(B).on("dragstart.force",rv).on("drag.force",_).on("dragend.force",rm)),!arguments.length)return n;this.on("mouseover.force",rx).on("mouseout.force",rb).call(n)},s.rebind(c,u,"on")};var r_=20,rw=1,rT=1/0;function rA(r,n){return s.rebind(r,n,"sort","children","value"),r.nodes=r,r.links=rL,r}function rk(r,n){for(var i,a,o=[r];null!=(r=o.pop());)if(n(r),(a=r.children)&&(i=a.length))for(;--i>=0;)o.push(a[i])}function rM(r,n){for(var i=[r],a=[];null!=(r=i.pop());)if(a.push(r),(s=r.children)&&(o=s.length))for(var o,s,l=-1;++l<o;)i.push(s[l]);for(;null!=(r=a.pop());)n(r)}function rS(r){return r.children}function rE(r){return r.value}function rI(r,n){return n.value-r.value}function rL(r){return s.merge(r.map(function(r){return(r.children||[]).map(function(n){return{source:r,target:n}})}))}s.layout.hierarchy=function(){var r=rI,n=rS,i=rE;function a(o){var s,l,c,u,f=[o],h=[];for(o.depth=0;null!=(u=f.pop());)if(h.push(u),(l=n.call(a,u,u.depth))&&(s=l.length)){for(;--s>=0;)f.push(c=l[s]),c.parent=u,c.depth=u.depth+1;i&&(u.value=0),u.children=l}else i&&(u.value=+i.call(a,u,u.depth)||0),delete u.children;return rM(o,function(n){var a,o;r&&(a=n.children)&&a.sort(r),i&&(o=n.parent)&&(o.value+=n.value)}),h}return a.sort=function(n){return arguments.length?(r=n,a):r},a.children=function(r){return arguments.length?(n=r,a):n},a.value=function(r){return arguments.length?(i=r,a):i},a.revalue=function(r){return i&&(rk(r,function(r){r.children&&(r.value=0)}),rM(r,function(r){var n;r.children||(r.value=+i.call(a,r,r.depth)||0),(n=r.parent)&&(n.value+=r.value)})),r},a},s.layout.partition=function(){var r=s.layout.hierarchy(),n=[1,1];function i(i,a){var o=r.call(this,i,a);return function r(n,i,a,o){var s=n.children;if(n.x=i,n.y=n.depth*o,n.dx=a,n.dy=o,s&&(l=s.length)){var l,c,u,f=-1;for(a=n.value?a/n.value:0;++f<l;)r(c=s[f],i,u=c.value*a,o),i+=u}}(o[0],0,n[0],n[1]/function r(n){var i=n.children,a=0;if(i&&(o=i.length))for(var o,s=-1;++s<o;)a=Math.max(a,r(i[s]));return 1+a}(o[0])),o}return i.size=function(r){return arguments.length?(n=r,i):n},rA(i,r)},s.layout.pie=function(){var r=Number,n=rC,i=0,a=tI,o=0;function l(c){var u,f=c.length,h=c.map(function(n,i){return+r.call(l,n,i)}),p=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof a?a.apply(this,arguments):a)-p,y=Math.min(Math.abs(d)/f,+("function"==typeof o?o.apply(this,arguments):o)),g=y*(d<0?-1:1),v=s.sum(h),m=v?(d-f*g)/v:0,x=s.range(f),b=[];return null!=n&&x.sort(n===rC?function(r,n){return h[n]-h[r]}:function(r,i){return n(c[r],c[i])}),x.forEach(function(r){b[r]={data:c[r],value:u=h[r],startAngle:p,endAngle:p+=u*m+g,padAngle:y}}),b}return l.value=function(n){return arguments.length?(r=n,l):r},l.sort=function(r){return arguments.length?(n=r,l):n},l.startAngle=function(r){return arguments.length?(i=r,l):i},l.endAngle=function(r){return arguments.length?(a=r,l):a},l.padAngle=function(r){return arguments.length?(o=r,l):o},l};var rC={};function rO(r){return r.x}function rD(r){return r.y}function rP(r,n,i){r.y0=n,r.y=i}s.layout.stack=function(){var r=B,n=rz,i=rF,a=rP,o=rO,l=rD;function c(u,f){if(!(y=u.length))return u;var h=u.map(function(n,i){return r.call(c,n,i)}),p=h.map(function(r){return r.map(function(r,n){return[o.call(c,r,n),l.call(c,r,n)]})}),d=n.call(c,p,f);h=s.permute(h,d),p=s.permute(p,d);var y,g,v,m,x=i.call(c,p,f),b=h[0].length;for(v=0;v<b;++v)for(a.call(c,h[0][v],m=x[v],p[0][v][1]),g=1;g<y;++g)a.call(c,h[g][v],m+=p[g-1][v][1],p[g][v][1]);return u}return c.values=function(n){return arguments.length?(r=n,c):r},c.order=function(r){return arguments.length?(n="function"==typeof r?r:rB.get(r)||rz,c):n},c.offset=function(r){return arguments.length?(i="function"==typeof r?r:rR.get(r)||rF,c):i},c.x=function(r){return arguments.length?(o=r,c):o},c.y=function(r){return arguments.length?(l=r,c):l},c.out=function(r){return arguments.length?(a=r,c):a},c};var rB=s.map({"inside-out":function(r){var n,i,a=r.length,o=r.map(rN),l=r.map(rU),c=s.range(a).sort(function(r,n){return o[r]-o[n]}),u=0,f=0,h=[],p=[];for(n=0;n<a;++n)i=c[n],u<f?(u+=l[i],h.push(i)):(f+=l[i],p.push(i));return p.reverse().concat(h)},reverse:function(r){return s.range(r.length).reverse()},default:rz}),rR=s.map({silhouette:function(r){var n,i,a,o=r.length,s=r[0].length,l=[],c=0,u=[];for(i=0;i<s;++i){for(n=0,a=0;n<o;n++)a+=r[n][i][1];a>c&&(c=a),l.push(a)}for(i=0;i<s;++i)u[i]=(c-l[i])/2;return u},wiggle:function(r){var n,i,a,o,s,l,c,u,f,h=r.length,p=r[0],d=p.length,y=[];for(y[0]=u=f=0,i=1;i<d;++i){for(n=0,o=0;n<h;++n)o+=r[n][i][1];for(n=0,s=0,c=p[i][0]-p[i-1][0];n<h;++n){for(a=0,l=(r[n][i][1]-r[n][i-1][1])/(2*c);a<n;++a)l+=(r[a][i][1]-r[a][i-1][1])/c;s+=l*r[n][i][1]}y[i]=u-=o?s/o*c:0,u<f&&(f=u)}for(i=0;i<d;++i)y[i]-=f;return y},expand:function(r){var n,i,a,o=r.length,s=r[0].length,l=1/o,c=[];for(i=0;i<s;++i){for(n=0,a=0;n<o;n++)a+=r[n][i][1];if(a)for(n=0;n<o;n++)r[n][i][1]/=a;else for(n=0;n<o;n++)r[n][i][1]=l}for(i=0;i<s;++i)c[i]=0;return c},zero:rF});function rz(r){return s.range(r.length)}function rF(r){for(var n=-1,i=r[0].length,a=[];++n<i;)a[n]=0;return a}function rN(r){for(var n,i=1,a=0,o=r[0][1],s=r.length;i<s;++i)(n=r[i][1])>o&&(a=i,o=n);return a}function rU(r){return r.reduce(rj,0)}function rj(r,n){return r+n[1]}function rV(r,n){return rH(r,Math.ceil(Math.log(n.length)/Math.LN2+1))}function rH(r,n){for(var i=-1,a=+r[0],o=(r[1]-a)/n,s=[];++i<=n;)s[i]=o*i+a;return s}function rq(r){return[s.min(r),s.max(r)]}function rG(r,n){return r.value-n.value}function rW(r,n){var i=r._pack_next;r._pack_next=n,n._pack_prev=r,n._pack_next=i,i._pack_prev=n}function rY(r,n){r._pack_next=n,n._pack_prev=r}function rZ(r,n){var i=n.x-r.x,a=n.y-r.y,o=r.r+n.r;return .999*o*o>i*i+a*a}function rX(r){if((n=r.children)&&(u=n.length)){var n,i,a,o,s,l,c,u,f=1/0,h=-1/0,p=1/0,d=-1/0;if(n.forEach(rK),(i=n[0]).x=-i.r,i.y=0,_(i),u>1&&((a=n[1]).x=a.r,a.y=0,_(a),u>2))for(r$(i,a,o=n[2]),_(o),rW(i,o),i._pack_prev=o,rW(o,a),a=i._pack_next,s=3;s<u;s++){r$(i,a,o=n[s]);var y=0,g=1,v=1;for(l=a._pack_next;l!==a;l=l._pack_next,g++)if(rZ(l,o)){y=1;break}if(1==y)for(c=i._pack_prev;c!==l._pack_prev&&!rZ(c,o);c=c._pack_prev,v++);y?(g<v||g==v&&a.r<i.r?rY(i,a=l):rY(i=c,a),s--):(rW(i,o),a=o,_(o))}var m=(f+h)/2,x=(p+d)/2,b=0;for(s=0;s<u;s++)(o=n[s]).x-=m,o.y-=x,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));r.r=b,n.forEach(rJ)}function _(r){f=Math.min(r.x-r.r,f),h=Math.max(r.x+r.r,h),p=Math.min(r.y-r.r,p),d=Math.max(r.y+r.r,d)}}function rK(r){r._pack_next=r._pack_prev=r}function rJ(r){delete r._pack_next,delete r._pack_prev}function r$(r,n,i){var a=r.r+i.r,o=n.x-r.x,s=n.y-r.y;if(a&&(o||s)){var l=n.r+i.r,c=o*o+s*s,u=.5+((a*=a)-(l*=l))/(2*c),f=Math.sqrt(Math.max(0,2*l*(a+c)-(a-=c)*a-l*l))/(2*c);i.x=r.x+u*o+f*s,i.y=r.y+u*s-f*o}else i.x=r.x+a,i.y=r.y}function rQ(r,n){return r.parent==n.parent?1:2}function r0(r){var n=r.children;return n.length?n[0]:r.t}function r1(r){var n,i=r.children;return(n=i.length)?i[n-1]:r.t}function r2(r){return{x:r.x,y:r.y,dx:r.dx,dy:r.dy}}function r3(r,n){var i=r.x+n[3],a=r.y+n[0],o=r.dx-n[1]-n[3],s=r.dy-n[0]-n[2];return o<0&&(i+=o/2,o=0),s<0&&(a+=s/2,s=0),{x:i,y:a,dx:o,dy:s}}function r4(r){var n=r[0],i=r[r.length-1];return n<i?[n,i]:[i,n]}function r6(r){return r.rangeExtent?r.rangeExtent():r4(r.range())}function r5(r,n,i,a){var o=i(r[0],r[1]),s=a(n[0],n[1]);return function(r){return s(o(r))}}function r8(r,n){var i,a=0,o=r.length-1,s=r[a],l=r[o];return l<s&&(i=a,a=o,o=i,i=s,s=l,l=i),r[a]=n.floor(s),r[o]=n.ceil(l),r}function r7(r){return r?{floor:function(n){return Math.floor(n/r)*r},ceil:function(n){return Math.ceil(n/r)*r}}:r9}s.layout.histogram=function(){var r=!0,n=Number,i=rq,a=rV;function o(o,l){for(var c,u,f=[],h=o.map(n,this),p=i.call(this,h,l),d=a.call(this,p,h,l),y=(l=-1,h.length),g=d.length-1,v=r?1:1/y;++l<g;)(c=f[l]=[]).dx=d[l+1]-(c.x=d[l]),c.y=0;if(g>0)for(l=-1;++l<y;)(u=h[l])>=p[0]&&u<=p[1]&&((c=f[s.bisect(d,u,1,g)-1]).y+=v,c.push(o[l]));return f}return o.value=function(r){return arguments.length?(n=r,o):n},o.range=function(r){return arguments.length?(i=ee(r),o):i},o.bins=function(r){return arguments.length?(a="number"==typeof r?function(n){return rH(n,r)}:ee(r),o):a},o.frequency=function(n){return arguments.length?(r=!!n,o):r},o},s.layout.pack=function(){var r,n=s.layout.hierarchy().sort(rG),i=0,a=[1,1];function o(o,s){var l=n.call(this,o,s),c=l[0],u=a[0],f=a[1],h=null==r?Math.sqrt:"function"==typeof r?r:function(){return r};if(c.x=c.y=0,rM(c,function(r){r.r=+h(r.value)}),rM(c,rX),i){var p=i*(r?1:Math.max(2*c.r/u,2*c.r/f))/2;rM(c,function(r){r.r+=p}),rM(c,rX),rM(c,function(r){r.r-=p})}return function r(n,i,a,o){var s=n.children;if(n.x=i+=o*n.x,n.y=a+=o*n.y,n.r*=o,s)for(var l=-1,c=s.length;++l<c;)r(s[l],i,a,o)}(c,u/2,f/2,r?1:1/Math.max(2*c.r/u,2*c.r/f)),l}return o.size=function(r){return arguments.length?(a=r,o):a},o.radius=function(n){return arguments.length?(r=null==n||"function"==typeof n?n:+n,o):r},o.padding=function(r){return arguments.length?(i=+r,o):i},rA(o,n)},s.layout.tree=function(){var r=s.layout.hierarchy().sort(null).value(null),n=rQ,i=[1,1],a=null;function o(o,s){var f=r.call(this,o,s),h=f[0],p=function(r){for(var n,i={A:null,children:[r]},a=[i];null!=(n=a.pop());)for(var o,s=n.children,l=0,c=s.length;l<c;++l)a.push((s[l]=o={_:s[l],parent:n,children:(o=s[l].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:l}).a=o);return i.children[0]}(h);if(rM(p,l),p.parent.m=-p.z,rk(p,c),a)rk(h,u);else{var d=h,y=h,g=h;rk(h,function(r){r.x<d.x&&(d=r),r.x>y.x&&(y=r),r.depth>g.depth&&(g=r)});var v=n(d,y)/2-d.x,m=i[0]/(y.x+n(y,d)/2+v),x=i[1]/(g.depth||1);rk(h,function(r){r.x=(r.x+v)*m,r.y=r.depth*x})}return f}function l(r){var i=r.children,a=r.parent.children,o=r.i?a[r.i-1]:null;if(i.length){!function(r){for(var n,i=0,a=0,o=r.children,s=o.length;--s>=0;)(n=o[s]).z+=i,n.m+=i,i+=n.s+(a+=n.c)}(r);var s=(i[0].z+i[i.length-1].z)/2;o?(r.z=o.z+n(r._,o._),r.m=r.z-s):r.z=s}else o&&(r.z=o.z+n(r._,o._));r.parent.A=function(r,i,a){if(i){for(var o,s,l,c=r,u=r,f=i,h=c.parent.children[0],p=c.m,d=u.m,y=f.m,g=h.m;f=r1(f),c=r0(c),f&&c;)h=r0(h),(u=r1(u)).a=r,(l=f.z+y-c.z-p+n(f._,c._))>0&&(function(r,n,i){var a=i/(n.i-r.i);n.c-=a,n.s+=i,r.c+=a,n.z+=i,n.m+=i}((o=f,s=a,o.a.parent===r.parent?o.a:s),r,l),p+=l,d+=l),y+=f.m,p+=c.m,g+=h.m,d+=u.m;f&&!r1(u)&&(u.t=f,u.m+=y-d),c&&!r0(h)&&(h.t=c,h.m+=p-g,a=r)}return a}(r,o,r.parent.A||a[0])}function c(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function u(r){r.x*=i[0],r.y=r.depth*i[1]}return o.separation=function(r){return arguments.length?(n=r,o):n},o.size=function(r){return arguments.length?(a=null==(i=r)?u:null,o):a?null:i},o.nodeSize=function(r){return arguments.length?(a=null==(i=r)?null:u,o):a?i:null},rA(o,r)},s.layout.cluster=function(){var r=s.layout.hierarchy().sort(null).value(null),n=rQ,i=[1,1],a=!1;function o(o,l){var c,u=r.call(this,o,l),f=u[0],h=0;rM(f,function(r){var i=r.children;i&&i.length?(r.x=i.reduce(function(r,n){return r+n.x},0)/i.length,r.y=1+s.max(i,function(r){return r.y})):(r.x=c?h+=n(r,c):0,r.y=0,c=r)});var p=function r(n){var i=n.children;return i&&i.length?r(i[0]):n}(f),d=function r(n){var i,a=n.children;return a&&(i=a.length)?r(a[i-1]):n}(f),y=p.x-n(p,d)/2,g=d.x+n(d,p)/2;return rM(f,a?function(r){r.x=(r.x-f.x)*i[0],r.y=(f.y-r.y)*i[1]}:function(r){r.x=(r.x-y)/(g-y)*i[0],r.y=(1-(f.y?r.y/f.y:1))*i[1]}),u}return o.separation=function(r){return arguments.length?(n=r,o):n},o.size=function(r){return arguments.length?(a=null==(i=r),o):a?null:i},o.nodeSize=function(r){return arguments.length?(a=null!=(i=r),o):a?i:null},rA(o,r)},s.layout.treemap=function(){var r,n=s.layout.hierarchy(),i=Math.round,a=[1,1],o=null,l=r2,c=!1,u="squarify",f=.5*(1+Math.sqrt(5));function h(r,n){for(var i,a,o=-1,s=r.length;++o<s;)a=(i=r[o]).value*(n<0?0:n),i.area=isNaN(a)||a<=0?0:a}function p(r,n,a,o){var s,l=-1,c=r.length,u=a.x,f=a.y,h=n?i(r.area/n):0;if(n==a.dx){for((o||h>a.dy)&&(h=a.dy);++l<c;)(s=r[l]).x=u,s.y=f,s.dy=h,u+=s.dx=Math.min(a.x+a.dx-u,h?i(s.area/h):0);s.z=!0,s.dx+=a.x+a.dx-u,a.y+=h,a.dy-=h}else{for((o||h>a.dx)&&(h=a.dx);++l<c;)(s=r[l]).x=u,s.y=f,s.dx=h,f+=s.dy=Math.min(a.y+a.dy-f,h?i(s.area/h):0);s.z=!1,s.dy+=a.y+a.dy-f,a.x+=h,a.dx-=h}}function d(i){var o=r||n(i),s=o[0];return s.x=s.y=0,s.value?(s.dx=a[0],s.dy=a[1]):s.dx=s.dy=0,r&&n.revalue(s),h([s],s.dx*s.dy/s.value),(r?function r(n){var i=n.children;if(i&&i.length){var a,o=l(n),s=i.slice(),c=[];for(h(s,o.dx*o.dy/n.value),c.area=0;a=s.pop();)c.push(a),c.area+=a.area,null!=a.z&&(p(c,a.z?o.dx:o.dy,o,!s.length),c.length=c.area=0);i.forEach(r)}}:function r(n){var i=n.children;if(i&&i.length){var a,o,s,c=l(n),d=[],y=i.slice(),g=1/0,v="slice"===u?c.dx:"dice"===u?c.dy:"slice-dice"===u?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(h(y,c.dx*c.dy/n.value),d.area=0;(s=y.length)>0;)d.push(a=y[s-1]),d.area+=a.area,"squarify"!==u||(o=function(r,n){for(var i,a=r.area,o=0,s=1/0,l=-1,c=r.length;++l<c;)(i=r[l].area)&&(i<s&&(s=i),i>o&&(o=i));return n*=n,(a*=a)?Math.max(n*o*f/a,a/(n*s*f)):1/0}(d,v))<=g?(y.pop(),g=o):(d.area-=d.pop().area,p(d,v,c,!1),v=Math.min(c.dx,c.dy),d.length=d.area=0,g=1/0);d.length&&(p(d,v,c,!0),d.length=d.area=0),i.forEach(r)}})(s),c&&(r=o),o}return d.size=function(r){return arguments.length?(a=r,d):a},d.padding=function(r){var n;return arguments.length?(l=null==(o=r)?r2:"function"==(n=typeof r)?function(n){var i=r.call(d,n,n.depth);return null==i?r2(n):r3(n,"number"==typeof i?[i,i,i,i]:i)}:("number"===n&&(r=[r,r,r,r]),function(n){return r3(n,r)}),d):o},d.round=function(r){return arguments.length?(i=r?Math.round:Number,d):i!=Number},d.sticky=function(n){return arguments.length?(c=n,r=null,d):c},d.ratio=function(r){return arguments.length?(f=r,d):f},d.mode=function(r){return arguments.length?(u=r+"",d):u},rA(d,n)},s.random={normal:function(r,n){var i=arguments.length;return i<2&&(n=1),i<1&&(r=0),function(){var i,a,o;do o=(i=2*Math.random()-1)*i+(a=2*Math.random()-1)*a;while(!o||o>1)return r+n*i*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var r=s.random.normal.apply(s,arguments);return function(){return Math.exp(r())}},bates:function(r){var n=s.random.irwinHall(r);return function(){return n()/r}},irwinHall:function(r){return function(){for(var n=0,i=0;i<r;i++)n+=Math.random();return n}}},s.scale={};var r9={floor:B,ceil:B};function nt(r,n,i,a){var o=[],l=[],c=0,u=Math.min(r.length,n.length)-1;for(r[u]<r[0]&&(r=r.slice().reverse(),n=n.slice().reverse());++c<=u;)o.push(i(r[c-1],r[c])),l.push(a(n[c-1],n[c]));return function(n){var i=s.bisect(r,n,1,u)-1;return l[i](o[i](n))}}function ne(r,n){return s.rebind(r,n,"range","rangeRound","interpolate","clamp")}function nr(r,n){return r8(r,r7(nn(r,n)[2])),r8(r,r7(nn(r,n)[2])),r}function nn(r,n){null==n&&(n=10);var i=r4(r),a=i[1]-i[0],o=Math.pow(10,Math.floor(Math.log(a/n)/Math.LN10)),s=n/a*o;return s<=.15?o*=10:s<=.35?o*=5:s<=.75&&(o*=2),i[0]=Math.ceil(i[0]/o)*o,i[1]=Math.floor(i[1]/o)*o+.5*o,i[2]=o,i}function ni(r,n){return s.range.apply(s,nn(r,n))}s.scale.linear=function(){return function r(n,i,a,o){var s,l;function c(){var r=Math.min(n.length,i.length)>2?nt:r5,c=o?ry:rd;return s=r(n,i,c,a),l=r(i,n,c,e3),u}function u(r){return s(r)}return u.invert=function(r){return l(r)},u.domain=function(r){return arguments.length?(n=r.map(Number),c()):n},u.range=function(r){return arguments.length?(i=r,c()):i},u.rangeRound=function(r){return u.range(r).interpolate(rs)},u.clamp=function(r){return arguments.length?(o=r,c()):o},u.interpolate=function(r){return arguments.length?(a=r,c()):a},u.ticks=function(r){return ni(n,r)},u.tickFormat=function(r,i){return d3_scale_linearTickFormat(n,r,i)},u.nice=function(r){return nr(n,r),c()},u.copy=function(){return r(n,i,a,o)},c()}([0,1],[0,1],e3,!1)},s.scale.log=function(){return function r(n,i,a,o){function s(r){return(a?Math.log(r<0?0:r):-Math.log(r>0?0:-r))/Math.log(i)}function l(r){return a?Math.pow(i,r):-Math.pow(i,-r)}function c(r){return n(s(r))}return c.invert=function(r){return l(n.invert(r))},c.domain=function(r){return arguments.length?(a=r[0]>=0,n.domain((o=r.map(Number)).map(s)),c):o},c.base=function(r){return arguments.length?(i=+r,n.domain(o.map(s)),c):i},c.nice=function(){var r=r8(o.map(s),a?Math:na);return n.domain(r),o=r.map(l),c},c.ticks=function(){var r=r4(o),n=[],c=r[0],u=r[1],f=Math.floor(s(c)),h=Math.ceil(s(u)),p=i%1?2:i;if(isFinite(h-f)){if(a){for(;f<h;f++)for(var d=1;d<p;d++)n.push(l(f)*d);n.push(l(f))}else for(n.push(l(f));f++<h;)for(d=p-1;d>0;d--)n.push(l(f)*d);for(f=0;n[f]<c;f++);for(h=n.length;n[h-1]>u;h--);n=n.slice(f,h)}return n},c.copy=function(){return r(n.copy(),i,a,o)},ne(c,n)}(s.scale.linear().domain([0,1]),10,!0,[1,10])};var na={floor:function(r){return-Math.ceil(-r)},ceil:function(r){return-Math.floor(-r)}};function no(r){return function(n){return n<0?-Math.pow(-n,r):Math.pow(n,r)}}s.scale.pow=function(){return function r(n,i,a){var o=no(i),s=no(1/i);function l(r){return n(o(r))}return l.invert=function(r){return s(n.invert(r))},l.domain=function(r){return arguments.length?(n.domain((a=r.map(Number)).map(o)),l):a},l.ticks=function(r){return ni(a,r)},l.tickFormat=function(r,n){return d3_scale_linearTickFormat(a,r,n)},l.nice=function(r){return l.domain(nr(a,r))},l.exponent=function(r){return arguments.length?(o=no(i=r),s=no(1/i),n.domain(a.map(o)),l):i},l.copy=function(){return r(n.copy(),i,a)},ne(l,n)}(s.scale.linear(),1,[0,1])},s.scale.sqrt=function(){return s.scale.pow().exponent(.5)},s.scale.ordinal=function(){return function r(n,i){var a,o,l;function c(r){return o[((a.get(r)||("range"===i.t?a.set(r,n.push(r)):NaN))-1)%o.length]}function u(r,i){return s.range(n.length).map(function(n){return r+i*n})}return c.domain=function(r){if(!arguments.length)return n;n=[],a=new M;for(var o,s=-1,l=r.length;++s<l;)a.has(o=r[s])||a.set(o,n.push(o));return c[i.t].apply(c,i.a)},c.range=function(r){return arguments.length?(o=r,l=0,i={t:"range",a:arguments},c):o},c.rangePoints=function(r,a){arguments.length<2&&(a=0);var s=r[0],f=r[1],h=n.length<2?(s=(s+f)/2,0):(f-s)/(n.length-1+a);return o=u(s+h*a/2,h),l=0,i={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(r,a){arguments.length<2&&(a=0);var s=r[0],f=r[1],h=n.length<2?(s=f=Math.round((s+f)/2),0):(f-s)/(n.length-1+a)|0;return o=u(s+Math.round(h*a/2+(f-s-(n.length-1+a)*h)/2),h),l=0,i={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(r,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var f=r[1]<r[0],h=r[f-0],p=(r[1-f]-h)/(n.length-a+2*s);return o=u(h+p*s,p),f&&o.reverse(),l=p*(1-a),i={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(r,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var f=r[1]<r[0],h=r[f-0],p=r[1-f],d=Math.floor((p-h)/(n.length-a+2*s));return o=u(h+Math.round((p-h-(n.length-a)*d)/2),d),f&&o.reverse(),l=Math.round(d*(1-a)),i={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return l},c.rangeExtent=function(){return r4(i.a[0])},c.copy=function(){return r(n,i)},c.domain(n)}([],{t:"range",a:[[]]})},s.scale.category10=function(){return s.scale.ordinal().range(ns)},s.scale.category20=function(){return s.scale.ordinal().range(nl)},s.scale.category20b=function(){return s.scale.ordinal().range(nc)},s.scale.category20c=function(){return s.scale.ordinal().range(nu)};var ns=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(t2),nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(t2),nc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(t2),nu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(t2);function nf(){return 0}s.scale.quantile=function(){return function r(n,i){var a;function o(){var r=0,o=i.length;for(a=[];++r<o;)a[r-1]=s.quantile(n,r/o);return l}function l(r){if(!isNaN(r=+r))return i[s.bisect(a,r)]}return l.domain=function(r){return arguments.length?(n=r.map(x).filter(b).sort(m),o()):n},l.range=function(r){return arguments.length?(i=r,o()):i},l.quantiles=function(){return a},l.invertExtent=function(r){return(r=i.indexOf(r))<0?[NaN,NaN]:[r>0?a[r-1]:n[0],r<a.length?a[r]:n[n.length-1]]},l.copy=function(){return r(n,i)},o()}([],[])},s.scale.quantize=function(){return function r(n,i,a){var o,s;function l(r){return a[Math.max(0,Math.min(s,Math.floor(o*(r-n))))]}function c(){return o=a.length/(i-n),s=a.length-1,l}return l.domain=function(r){return arguments.length?(n=+r[0],i=+r[r.length-1],c()):[n,i]},l.range=function(r){return arguments.length?(a=r,c()):a},l.invertExtent=function(r){return[r=(r=a.indexOf(r))<0?NaN:r/o+n,r+1/o]},l.copy=function(){return r(n,i,a)},c()}(0,1,[0,1])},s.scale.threshold=function(){return function r(n,i){function a(r){if(r<=r)return i[s.bisect(n,r)]}return a.domain=function(r){return arguments.length?(n=r,a):n},a.range=function(r){return arguments.length?(i=r,a):i},a.invertExtent=function(r){return[n[(r=i.indexOf(r))-1],n[r]]},a.copy=function(){return r(n,i)},a}([.5],[0,1])},s.scale.identity=function(){return function r(n){function i(r){return+r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(n=r.map(i),i):n},i.ticks=function(r){return ni(n,r)},i.tickFormat=function(r,i){return d3_scale_linearTickFormat(n,r,i)},i.copy=function(){return r(n)},i}([0,1])},s.svg={},s.svg.arc=function(){var r=np,n=nd,i=nf,a=nh,o=ny,s=ng,l=nv;function c(){var c=Math.max(0,+r.apply(this,arguments)),f=Math.max(0,+n.apply(this,arguments)),h=o.apply(this,arguments)-tC,p=s.apply(this,arguments)-tC,d=Math.abs(p-h),y=h>p?0:1;if(f<c&&(g=f,f=c,c=g),d>=tL)return u(f,y)+(c?u(c,1-y):"")+"Z";var g,v,m,x,b,_,w,T,A,k,M,S,E=0,I=0,L=[];if((x=(+l.apply(this,arguments)||0)/2)&&(m=a===nh?Math.sqrt(c*c+f*f):+a.apply(this,arguments),y||(I*=-1),f&&(I=tP(m/f*Math.sin(x))),c&&(E=tP(m/c*Math.sin(x)))),f){b=f*Math.cos(h+I),_=f*Math.sin(h+I),w=f*Math.cos(p-I),T=f*Math.sin(p-I);var C=Math.abs(p-h-2*I)<=tE?0:1;if(I&&nm(b,_,w,T)===y^C){var O=(h+p)/2;b=f*Math.cos(O),_=f*Math.sin(O),w=T=null}}else b=_=0;if(c){A=c*Math.cos(p-E),k=c*Math.sin(p-E),M=c*Math.cos(h+E),S=c*Math.sin(h+E);var D=Math.abs(h-p+2*E)<=tE?0:1;if(E&&nm(A,k,M,S)===1-y^D){var P=(h+p)/2;A=c*Math.cos(P),k=c*Math.sin(P),M=S=null}}else A=k=0;if(d>1e-6&&(g=Math.min(Math.abs(f-c)/2,+i.apply(this,arguments)))>.001){v=c<f^y?0:1;var B=g,R=g;if(d<tE){var z=null==M?[A,k]:null==w?[b,_]:ex([b,_],[M,S],[w,T],[A,k]),F=b-z[0],N=_-z[1],U=w-z[0],j=T-z[1],V=1/Math.sin(Math.acos((F*U+N*j)/(Math.sqrt(F*F+N*N)*Math.sqrt(U*U+j*j)))/2),H=Math.sqrt(z[0]*z[0]+z[1]*z[1]);R=Math.min(g,(c-H)/(V-1)),B=Math.min(g,(f-H)/(V+1))}if(null!=w){var q=nx(null==M?[A,k]:[M,S],[b,_],f,B,y),G=nx([w,T],[A,k],f,B,y);g===B?L.push("M",q[0],"A",B,",",B," 0 0,",v," ",q[1],"A",f,",",f," 0 ",1-y^nm(q[1][0],q[1][1],G[1][0],G[1][1]),",",y," ",G[1],"A",B,",",B," 0 0,",v," ",G[0]):L.push("M",q[0],"A",B,",",B," 0 1,",v," ",G[0])}else L.push("M",b,",",_);if(null!=M){var W=nx([b,_],[M,S],c,-R,y),Y=nx([A,k],null==w?[b,_]:[w,T],c,-R,y);g===R?L.push("L",Y[0],"A",R,",",R," 0 0,",v," ",Y[1],"A",c,",",c," 0 ",y^nm(Y[1][0],Y[1][1],W[1][0],W[1][1]),",",1-y," ",W[1],"A",R,",",R," 0 0,",v," ",W[0]):L.push("L",Y[0],"A",R,",",R," 0 0,",v," ",W[0])}else L.push("L",A,",",k)}else L.push("M",b,",",_),null!=w&&L.push("A",f,",",f," 0 ",C,",",y," ",w,",",T),L.push("L",A,",",k),null!=M&&L.push("A",c,",",c," 0 ",D,",",1-y," ",M,",",S);return L.push("Z"),L.join("")}function u(r,n){return"M0,"+r+"A"+r+","+r+" 0 1,"+n+" 0,"+-r+"A"+r+","+r+" 0 1,"+n+" 0,"+r}return c.innerRadius=function(n){return arguments.length?(r=ee(n),c):r},c.outerRadius=function(r){return arguments.length?(n=ee(r),c):n},c.cornerRadius=function(r){return arguments.length?(i=ee(r),c):i},c.padRadius=function(r){return arguments.length?(a=r==nh?nh:ee(r),c):a},c.startAngle=function(r){return arguments.length?(o=ee(r),c):o},c.endAngle=function(r){return arguments.length?(s=ee(r),c):s},c.padAngle=function(r){return arguments.length?(l=ee(r),c):l},c.centroid=function(){var i=(+r.apply(this,arguments)+ +n.apply(this,arguments))/2,a=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-tC;return[Math.cos(a)*i,Math.sin(a)*i]},c};var nh="auto";function np(r){return r.innerRadius}function nd(r){return r.outerRadius}function ny(r){return r.startAngle}function ng(r){return r.endAngle}function nv(r){return r&&r.padAngle}function nm(r,n,i,a){return(r-i)*n-(n-a)*r>0?0:1}function nx(r,n,i,a,o){var s=r[0]-n[0],l=r[1]-n[1],c=(o?a:-a)/Math.sqrt(s*s+l*l),u=c*l,f=-c*s,h=r[0]+u,p=r[1]+f,d=n[0]+u,y=n[1]+f,g=(h+d)/2,v=(p+y)/2,m=d-h,x=y-p,b=m*m+x*x,_=i-a,w=h*y-d*p,T=(x<0?-1:1)*Math.sqrt(Math.max(0,_*_*b-w*w)),A=(w*x-m*T)/b,k=(-w*m-x*T)/b,M=(w*x+m*T)/b,S=(-w*m+x*T)/b,E=A-g,I=k-v,L=M-g,C=S-v;return E*E+I*I>L*L+C*C&&(A=M,k=S),[[A-u,k-f],[A*i/_,k*i/_]]}function nb(){return!0}function n_(r){var n=ep,i=ed,a=nb,o=nT,s=o.key,l=.7;function c(s){var c,u=[],f=[],h=-1,p=s.length,d=ee(n),y=ee(i);function g(){u.push("M",o(r(f),l))}for(;++h<p;)a.call(this,c=s[h],h)?f.push([+d.call(this,c,h),+y.call(this,c,h)]):f.length&&(g(),f=[]);return f.length&&g(),u.length?u.join(""):null}return c.x=function(r){return arguments.length?(n=r,c):n},c.y=function(r){return arguments.length?(i=r,c):i},c.defined=function(r){return arguments.length?(a=r,c):a},c.interpolate=function(r){return arguments.length?(s="function"==typeof r?o=r:(o=nw.get(r)||nT).key,c):s},c.tension=function(r){return arguments.length?(l=r,c):l},c}s.svg.line=function(){return n_(B)};var nw=s.map({linear:nT,"linear-closed":nA,step:function(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("H",(a[0]+(a=r[n])[0])/2,"V",a[1]);return i>1&&o.push("H",a[0]),o.join("")},"step-before":nk,"step-after":nM,basis:nI,"basis-open":function(r){if(r.length<4)return nT(r);for(var n,i=[],a=-1,o=r.length,s=[0],l=[0];++a<3;)n=r[a],s.push(n[0]),l.push(n[1]);for(i.push(nL(nD,s)+","+nL(nD,l)),--a;++a<o;)n=r[a],s.shift(),s.push(n[0]),l.shift(),l.push(n[1]),nP(i,s,l);return i.join("")},"basis-closed":function(r){for(var n,i,a=-1,o=r.length,s=o+4,l=[],c=[];++a<4;)i=r[a%o],l.push(i[0]),c.push(i[1]);for(n=[nL(nD,l),",",nL(nD,c)],--a;++a<s;)i=r[a%o],l.shift(),l.push(i[0]),c.shift(),c.push(i[1]),nP(n,l,c);return n.join("")},bundle:function(r,n){var i=r.length-1;if(i)for(var a,o,s=r[0][0],l=r[0][1],c=r[i][0]-s,u=r[i][1]-l,f=-1;++f<=i;)o=f/i,(a=r[f])[0]=n*a[0]+(1-n)*(s+o*c),a[1]=n*a[1]+(1-n)*(l+o*u);return nI(r)},cardinal:function(r,n){return r.length<3?nT(r):r[0]+nS(r,nE(r,n))},"cardinal-open":function(r,n){return r.length<4?nT(r):r[1]+nS(r.slice(1,-1),nE(r,n))},"cardinal-closed":function(r,n){return r.length<3?nA(r):r[0]+nS((r.push(r[0]),r),nE([r[r.length-2]].concat(r,[r[1]]),n))},monotone:function(r){return r.length<3?nT(r):r[0]+nS(r,function(r){for(var n,i,a,o,s=[],l=function(r){for(var n=0,i=r.length-1,a=[],o=r[0],s=r[1],l=a[0]=nB(o,s);++n<i;)a[n]=(l+(l=nB(o=s,s=r[n+1])))/2;return a[n]=l,a}(r),c=-1,u=r.length-1;++c<u;)1e-6>A(n=nB(r[c],r[c+1]))?l[c]=l[c+1]=0:(o=(i=l[c]/n)*i+(a=l[c+1]/n)*a)>9&&(o=3*n/Math.sqrt(o),l[c]=o*i,l[c+1]=o*a);for(c=-1;++c<=u;)s.push([(o=(r[Math.min(u,c+1)][0]-r[Math.max(0,c-1)][0])/(6*(1+l[c]*l[c])))||0,l[c]*o||0]);return s}(r))}});function nT(r){return r.length>1?r.join("L"):r+"Z"}function nA(r){return r.join("L")+"Z"}function nk(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("V",(a=r[n])[1],"H",a[0]);return o.join("")}function nM(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("H",(a=r[n])[0],"V",a[1]);return o.join("")}function nS(r,n){if(n.length<1||r.length!=n.length&&r.length!=n.length+2)return nT(r);var i=r.length!=n.length,a="",o=r[0],s=r[1],l=n[0],c=l,u=1;if(i&&(a+="Q"+(s[0]-2*l[0]/3)+","+(s[1]-2*l[1]/3)+","+s[0]+","+s[1],o=r[1],u=2),n.length>1){c=n[1],s=r[u],u++,a+="C"+(o[0]+l[0])+","+(o[1]+l[1])+","+(s[0]-c[0])+","+(s[1]-c[1])+","+s[0]+","+s[1];for(var f=2;f<n.length;f++,u++)s=r[u],c=n[f],a+="S"+(s[0]-c[0])+","+(s[1]-c[1])+","+s[0]+","+s[1]}if(i){var h=r[u];a+="Q"+(s[0]+2*c[0]/3)+","+(s[1]+2*c[1]/3)+","+h[0]+","+h[1]}return a}function nE(r,n){for(var i,a=[],o=(1-n)/2,s=r[0],l=r[1],c=1,u=r.length;++c<u;)i=s,s=l,a.push([o*((l=r[c])[0]-i[0]),o*(l[1]-i[1])]);return a}function nI(r){if(r.length<3)return nT(r);var n=1,i=r.length,a=r[0],o=a[0],s=a[1],l=[o,o,o,(a=r[1])[0]],c=[s,s,s,a[1]],u=[o,",",s,"L",nL(nD,l),",",nL(nD,c)];for(r.push(r[i-1]);++n<=i;)a=r[n],l.shift(),l.push(a[0]),c.shift(),c.push(a[1]),nP(u,l,c);return r.pop(),u.push("L",a),u.join("")}function nL(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]}nw.forEach(function(r,n){n.key=r,n.closed=/-closed$/.test(r)});var nC=[0,2/3,1/3,0],nO=[0,1/3,2/3,0],nD=[0,1/6,2/3,1/6];function nP(r,n,i){r.push("C",nL(nC,n),",",nL(nC,i),",",nL(nO,n),",",nL(nO,i),",",nL(nD,n),",",nL(nD,i))}function nB(r,n){return(n[1]-r[1])/(n[0]-r[0])}function nR(r){for(var n,i,a,o=-1,s=r.length;++o<s;)i=(n=r[o])[0],a=n[1]-tC,n[0]=i*Math.cos(a),n[1]=i*Math.sin(a);return r}function nz(r){var n=ep,i=ep,a=0,o=ed,s=nb,l=nT,c=l.key,u=l,f="L",h=.7;function p(c){var p,d,y,g=[],v=[],m=[],x=-1,b=c.length,_=ee(n),w=ee(a),T=n===i?function(){return d}:ee(i),A=a===o?function(){return y}:ee(o);function k(){g.push("M",l(r(m),h),f,u(r(v.reverse()),h),"Z")}for(;++x<b;)s.call(this,p=c[x],x)?(v.push([d=+_.call(this,p,x),y=+w.call(this,p,x)]),m.push([+T.call(this,p,x),+A.call(this,p,x)])):v.length&&(k(),v=[],m=[]);return v.length&&k(),g.length?g.join(""):null}return p.x=function(r){return arguments.length?(n=i=r,p):i},p.x0=function(r){return arguments.length?(n=r,p):n},p.x1=function(r){return arguments.length?(i=r,p):i},p.y=function(r){return arguments.length?(a=o=r,p):o},p.y0=function(r){return arguments.length?(a=r,p):a},p.y1=function(r){return arguments.length?(o=r,p):o},p.defined=function(r){return arguments.length?(s=r,p):s},p.interpolate=function(r){return arguments.length?(c="function"==typeof r?l=r:(l=nw.get(r)||nT).key,u=l.reverse||l,f=l.closed?"M":"L",p):c},p.tension=function(r){return arguments.length?(h=r,p):h},p}function nF(r){return r.source}function nN(r){return r.target}function nU(r){return r.radius}function nj(r){return[r.x,r.y]}function nV(){return 64}function nH(){return"circle"}function nq(r){var n=Math.sqrt(r/tE);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}s.svg.line.radial=function(){var r=n_(nR);return r.radius=r.x,delete r.x,r.angle=r.y,delete r.y,r},nk.reverse=nM,nM.reverse=nk,s.svg.area=function(){return nz(B)},s.svg.area.radial=function(){var r=nz(nR);return r.radius=r.x,delete r.x,r.innerRadius=r.x0,delete r.x0,r.outerRadius=r.x1,delete r.x1,r.angle=r.y,delete r.y,r.startAngle=r.y0,delete r.y0,r.endAngle=r.y1,delete r.y1,r},s.svg.chord=function(){var r=nF,n=nN,i=nU,a=ny,o=ng;function s(i,a){var o,s,u,f,h,p,d,y,g,v=l(this,r,i,a),m=l(this,n,i,a);return"M"+v.p0+c(v.r,v.p1,v.a1-v.a0)+(v.a0==m.a0&&v.a1==m.a1?(v.r,v.p1,v.r,"Q 0,0 "+v.p0):(v.r,v.p1,m.r,"Q 0,0 "+m.p0+c(m.r,m.p1,m.a1-m.a0)+(m.r,m.p1,v.r,"Q 0,0 "+v.p0)))+"Z"}function l(r,n,s,l){var c=n.call(r,s,l),u=i.call(r,c,l),f=a.call(r,c,l)-tC,h=o.call(r,c,l)-tC;return{r:u,a0:f,a1:h,p0:[u*Math.cos(f),u*Math.sin(f)],p1:[u*Math.cos(h),u*Math.sin(h)]}}function c(r,n,i){return"A"+r+","+r+" 0 "+ +(i>tE)+",1 "+n}return s.radius=function(r){return arguments.length?(i=ee(r),s):i},s.source=function(n){return arguments.length?(r=ee(n),s):r},s.target=function(r){return arguments.length?(n=ee(r),s):n},s.startAngle=function(r){return arguments.length?(a=ee(r),s):a},s.endAngle=function(r){return arguments.length?(o=ee(r),s):o},s},s.svg.diagonal=function(){var r=nF,n=nN,i=nj;function a(a,o){var s=r.call(this,a,o),l=n.call(this,a,o),c=(s.y+l.y)/2,u=[s,{x:s.x,y:c},{x:l.x,y:c},l];return"M"+(u=u.map(i))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return a.source=function(n){return arguments.length?(r=ee(n),a):r},a.target=function(r){return arguments.length?(n=ee(r),a):n},a.projection=function(r){return arguments.length?(i=r,a):i},a},s.svg.diagonal.radial=function(){var r=s.svg.diagonal(),n=nj,i=r.projection;return r.projection=function(r){var a;return arguments.length?i((a=n=r,function(){var r=a.apply(this,arguments),n=r[0],i=r[1]-tC;return[n*Math.cos(i),n*Math.sin(i)]})):n},r},s.svg.symbol=function(){var r=nH,n=nV;function i(i,a){return(nG.get(r.call(this,i,a))||nq)(n.call(this,i,a))}return i.type=function(n){return arguments.length?(r=ee(n),i):r},i.size=function(r){return arguments.length?(n=ee(r),i):n},i};var nG=s.map({circle:nq,cross:function(r){var n=Math.sqrt(r/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(r){var n=Math.sqrt(r/(2*nY)),i=n*nY;return"M0,"+-n+"L"+i+",0 0,"+n+" "+-i+",0Z"},square:function(r){var n=Math.sqrt(r)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(r){var n=Math.sqrt(r/nW),i=n*nW/2;return"M0,"+i+"L"+n+","+-i+" "+-n+","+-i+"Z"},"triangle-up":function(r){var n=Math.sqrt(r/nW),i=n*nW/2;return"M0,"+-i+"L"+n+","+i+" "+-n+","+i+"Z"}});s.svg.symbolTypes=nG.keys();var nW=Math.sqrt(3),nY=Math.tan(30*tO);K.transition=function(r){for(var n,i,a=nJ||++n0,o=n3(r),s=[],l=n$||{time:Date.now(),ease:rr,delay:0,duration:250},c=-1,u=this.length;++c<u;){s.push(n=[]);for(var f=this[c],h=-1,p=f.length;++h<p;)(i=f[h])&&n4(i,h,o,a,l),n.push(i)}return nK(s,o,a)},K.interrupt=function(r){return this.each(null==r?nZ:nX(n3(r)))};var nZ=nX(n3());function nX(r){return function(){var n,i,a;(n=this[r])&&(a=n[i=n.active])&&(a.timer.c=null,a.timer.t=NaN,--n.count?delete n[i]:delete this[r],n.active+=.5,a.event&&a.event.interrupt.call(this,this.__data__,a.index))}}function nK(r,n,i){return G(r,nQ),r.namespace=n,r.id=i,r}var nJ,n$,nQ=[],n0=0;function n1(r,n,i,a){var o=r.id,s=r.namespace;return td(r,"function"==typeof i?function(r,l,c){r[s][o].tween.set(n,a(i.call(r,r.__data__,l,c)))}:(i=a(i),function(r){r[s][o].tween.set(n,i)}))}function n2(r){return null==r&&(r=""),function(){this.textContent=r}}function n3(r){return null==r?"__transition__":"__transition_"+r+"__"}function n4(r,n,i,a,o){var s,l,c,u,f,h=r[i]||(r[i]={active:0,count:0}),p=h[a];function d(i){var o=h.active,d=h[o];for(var g in d&&(d.timer.c=null,d.timer.t=NaN,--h.count,delete h[o],d.event&&d.event.interrupt.call(r,r.__data__,d.index)),h)if(+g<a){var v=h[g];v.timer.c=null,v.timer.t=NaN,--h.count,delete h[g]}l.c=y,ec(function(){return l.c&&y(i||1)&&(l.c=null,l.t=NaN),1},0,s),h.active=a,p.event&&p.event.start.call(r,r.__data__,n),f=[],p.tween.forEach(function(i,a){(a=a.call(r,r.__data__,n))&&f.push(a)}),u=p.ease,c=p.duration}function y(o){for(var s=o/c,l=u(s),d=f.length;d>0;)f[--d].call(r,l);if(s>=1)return p.event&&p.event.end.call(r,r.__data__,n),--h.count?delete h[a]:delete r[i],1}p||(l=ec(function(r){var n=p.delay;if(l.t=n+s,n<=r)return d(r-n);l.c=d},0,s=o.time),p=h[a]={tween:new M,time:s,timer:l,delay:o.delay,duration:o.duration,ease:o.ease,index:n},o=null,++h.count)}nQ.call=K.call,nQ.empty=K.empty,nQ.node=K.node,nQ.size=K.size,s.transition=function(r,n){return r&&r.transition?nJ?r.transition(n):r:s.selection().transition(r)},s.transition.prototype=nQ,nQ.select=function(r){var n,i,a,o=this.id,s=this.namespace,l=[];r=J(r);for(var c=-1,u=this.length;++c<u;){l.push(n=[]);for(var f=this[c],h=-1,p=f.length;++h<p;)(a=f[h])&&(i=r.call(a,a.__data__,h,c))?("__data__"in a&&(i.__data__=a.__data__),n4(i,h,s,o,a[s][o]),n.push(i)):n.push(null)}return nK(l,s,o)},nQ.selectAll=function(r){var n,i,a,o,s,l=this.id,c=this.namespace,u=[];r=$(r);for(var f=-1,h=this.length;++f<h;)for(var p=this[f],d=-1,y=p.length;++d<y;)if(a=p[d]){s=a[c][l],i=r.call(a,a.__data__,d,f),u.push(n=[]);for(var g=-1,v=i.length;++g<v;)(o=i[g])&&n4(o,g,c,l,s),n.push(o)}return nK(u,c,l)},nQ.filter=function(r){var n,i,a=[];"function"!=typeof r&&(r=th(r));for(var o=0,s=this.length;o<s;o++){a.push(n=[]);for(var l,c=0,u=(l=this[o]).length;c<u;c++)(i=l[c])&&r.call(i,i.__data__,c,o)&&n.push(i)}return nK(a,this.namespace,this.id)},nQ.tween=function(r,n){var i=this.id,a=this.namespace;return arguments.length<2?this.node()[a][i].tween.get(r):td(this,null==n?function(n){n[a][i].tween.remove(r)}:function(o){o[a][i].tween.set(r,n)})},nQ.attr=function(r,n){if(arguments.length<2){for(n in r)this.attr(n,r[n]);return this}var i="transform"==r?rp:e3,a=s.ns.qualify(r);function o(){this.removeAttribute(a)}function l(){this.removeAttributeNS(a.space,a.local)}return n1(this,"attr."+r,n,a.local?function(r){return null==r?l:(r+="",function(){var n,o=this.getAttributeNS(a.space,a.local);return o!==r&&(n=i(o,r),function(r){this.setAttributeNS(a.space,a.local,n(r))})})}:function(r){return null==r?o:(r+="",function(){var n,o=this.getAttribute(a);return o!==r&&(n=i(o,r),function(r){this.setAttribute(a,n(r))})})})},nQ.attrTween=function(r,n){var i=s.ns.qualify(r);return this.tween("attr."+r,i.local?function(r,a){var o=n.call(this,r,a,this.getAttributeNS(i.space,i.local));return o&&function(r){this.setAttributeNS(i.space,i.local,o(r))}}:function(r,a){var o=n.call(this,r,a,this.getAttribute(i));return o&&function(r){this.setAttribute(i,o(r))}})},nQ.style=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=""),r)this.style(i,r[i],n);return this}i=""}function o(){this.style.removeProperty(r)}return n1(this,"style."+r,n,function(n){return null==n?o:(n+="",function(){var a,o=h(this).getComputedStyle(this,null).getPropertyValue(r);return o!==n&&(a=e3(o,n),function(n){this.style.setProperty(r,a(n),i)})})})},nQ.styleTween=function(r,n,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(a,o){var s=n.call(this,a,o,h(this).getComputedStyle(this,null).getPropertyValue(r));return s&&function(n){this.style.setProperty(r,s(n),i)}})},nQ.text=function(r){return n1(this,"text",r,n2)},nQ.remove=function(){var r=this.namespace;return this.each("end.transition",function(){var n;this[r].count<2&&(n=this.parentNode)&&n.removeChild(this)})},nQ.ease=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof r&&(r=s.ease.apply(s,arguments)),td(this,function(a){a[i][n].ease=r}))},nQ.delay=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].delay:td(this,"function"==typeof r?function(a,o,s){a[i][n].delay=+r.call(a,a.__data__,o,s)}:(r=+r,function(a){a[i][n].delay=r}))},nQ.duration=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].duration:td(this,"function"==typeof r?function(a,o,s){a[i][n].duration=Math.max(1,r.call(a,a.__data__,o,s))}:(r=Math.max(1,r),function(a){a[i][n].duration=r}))},nQ.each=function(r,n){var i=this.id,a=this.namespace;if(arguments.length<2){var o=n$,l=nJ;try{nJ=i,td(this,function(n,o,s){n$=n[a][i],r.call(n,n.__data__,o,s)})}finally{n$=o,nJ=l}}else td(this,function(o){var l=o[a][i];(l.event||(l.event=s.dispatch("start","end","interrupt"))).on(r,n)});return this},nQ.transition=function(){for(var r,n,i,a=this.id,o=++n0,s=this.namespace,l=[],c=0,u=this.length;c<u;c++){l.push(r=[]);for(var f,h=0,p=(f=this[c]).length;h<p;h++)(n=f[h])&&n4(n,h,s,o,{time:(i=n[s][a]).time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration}),r.push(n)}return nK(l,s,o)},s.svg.axis=function(){var r,n=s.scale.linear(),i=n6,a=6,o=6,l=3,u=[10],f=null;function h(c){c.each(function(){var c,h=s.select(this),p=this.__chart__||n,d=this.__chart__=n.copy(),y=null==f?d.ticks?d.ticks.apply(d,u):d.domain():f,g=null==r?d.tickFormat?d.tickFormat.apply(d,u):B:r,v=h.selectAll(".tick").data(y,d),m=v.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),x=s.transition(v.exit()).style("opacity",1e-6).remove(),b=s.transition(v.order()).style("opacity",1),_=Math.max(a,0)+l,w=r6(d),T=h.selectAll(".domain").data([0]),A=(T.enter().append("path").attr("class","domain"),s.transition(T));m.append("line"),m.append("text");var k,M,S,E,I=m.select("line"),L=b.select("line"),C=v.select("text").text(g),O=m.select("text"),D=b.select("text"),P="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(c=n8,k="x",S="y",M="x2",E="y2",C.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),A.attr("d","M"+w[0]+","+P*o+"V0H"+w[1]+"V"+P*o)):(c=n7,k="y",S="x",M="y2",E="x2",C.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),A.attr("d","M"+P*o+","+w[0]+"H0V"+w[1]+"H"+P*o)),I.attr(E,P*a),O.attr(S,P*_),L.attr(M,0).attr(E,P*a),D.attr(k,0).attr(S,P*_),d.rangeBand){var R=d,z=R.rangeBand()/2;p=d=function(r){return R(r)+z}}else p.rangeBand?p=d:x.call(c,d,p);m.call(c,p,d),b.call(c,d,d)})}return h.scale=function(r){return arguments.length?(n=r,h):n},h.orient=function(r){return arguments.length?(i=r in n5?r+"":n6,h):i},h.ticks=function(){return arguments.length?(u=c(arguments),h):u},h.tickValues=function(r){return arguments.length?(f=r,h):f},h.tickFormat=function(n){return arguments.length?(r=n,h):r},h.tickSize=function(r){var n=arguments.length;return n?(a=+r,o=+arguments[n-1],h):a},h.innerTickSize=function(r){return arguments.length?(a=+r,h):a},h.outerTickSize=function(r){return arguments.length?(o=+r,h):o},h.tickPadding=function(r){return arguments.length?(l=+r,h):l},h.tickSubdivide=function(){return arguments.length&&h},h};var n6="bottom",n5={top:1,right:1,bottom:1,left:1};function n8(r,n,i){r.attr("transform",function(r){var a=n(r);return"translate("+(isFinite(a)?a:i(r))+",0)"})}function n7(r,n,i){r.attr("transform",function(r){var a=n(r);return"translate(0,"+(isFinite(a)?a:i(r))+")"})}s.svg.brush=function(){var r,n,i=H(d,"brushstart","brush","brushend"),a=null,o=null,l=[0,0],c=[0,0],u=!0,f=!0,p=it[0];function d(r){r.each(function(){var r=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),n=r.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),r.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=r.selectAll(".resize").data(p,B);i.exit().remove(),i.enter().append("g").attr("class",function(r){return"resize "+r}).style("cursor",function(r){return n9[r]}).append("rect").attr("x",function(r){return/[ew]$/.test(r)?-3:null}).attr("y",function(r){return/^[ns]/.test(r)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),i.style("display",d.empty()?"none":null);var l,c=s.transition(r),u=s.transition(n);a&&(l=r6(a),u.attr("x",l[0]).attr("width",l[1]-l[0]),g(c)),o&&(l=r6(o),u.attr("y",l[0]).attr("height",l[1]-l[0]),v(c)),y(c)})}function y(r){r.selectAll(".resize").attr("transform",function(r){return"translate("+l[+/e$/.test(r)]+","+c[+/^s/.test(r)]+")"})}function g(r){r.select(".extent").attr("x",l[0]),r.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function v(r){r.select(".extent").attr("y",c[0]),r.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function m(){var p,m,x=this,b=s.select(s.event.target),_=i.of(x,arguments),w=s.select(x),T=b.datum(),A=!/^(n|s)$/.test(T)&&a,k=!/^(e|w)$/.test(T)&&o,M=b.classed("extent"),S=tT(x),E=s.mouse(x),I=s.select(h(x)).on("keydown.brush",function(){32==s.event.keyCode&&(M||(p=null,E[0]-=l[1],E[1]-=c[1],M=2),j())}).on("keyup.brush",function(){32==s.event.keyCode&&2==M&&(E[0]+=l[1],E[1]+=c[1],M=0,j())});if(s.event.changedTouches?I.on("touchmove.brush",O).on("touchend.brush",P):I.on("mousemove.brush",O).on("mouseup.brush",P),w.interrupt().selectAll("*").interrupt(),M)E[0]=l[0]-E[0],E[1]=c[0]-E[1];else if(T){var L=+/w$/.test(T),C=+/^n/.test(T);m=[l[1-L]-E[0],c[1-C]-E[1]],E[0]=l[L],E[1]=c[C]}else s.event.altKey&&(p=E.slice());function O(){var r=s.mouse(x),n=!1;m&&(r[0]+=m[0],r[1]+=m[1]),M||(s.event.altKey?(p||(p=[(l[0]+l[1])/2,(c[0]+c[1])/2]),E[0]=l[+(r[0]<p[0])],E[1]=c[+(r[1]<p[1])]):p=null),A&&D(r,a,0)&&(g(w),n=!0),k&&D(r,o,1)&&(v(w),n=!0),n&&(y(w),_({type:"brush",mode:M?"move":"resize"}))}function D(i,a,o){var s,h,d=r6(a),y=d[0],g=d[1],v=E[o],m=o?c:l,x=m[1]-m[0];if(M&&(y-=v,g-=x+v),s=(o?f:u)?Math.max(y,Math.min(g,i[o])):i[o],M?h=(s+=v)+x:(p&&(v=Math.max(y,Math.min(g,2*p[o]-s))),v<s?(h=s,s=v):h=v),m[0]!=s||m[1]!=h)return o?n=null:r=null,m[0]=s,m[1]=h,!0}function P(){O(),w.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),s.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),_({type:"brushend"})}w.style("pointer-events","none").selectAll(".resize").style("display",null),s.select("body").style("cursor",b.style("cursor")),_({type:"brushstart"}),O()}return d.event=function(a){a.each(function(){var a=i.of(this,arguments),o={x:l,y:c,i:r,j:n},u=this.__chart__||o;this.__chart__=o,nJ?s.select(this).transition().each("start.brush",function(){r=u.i,n=u.j,l=u.x,c=u.y,a({type:"brushstart"})}).tween("brush:brush",function(){var i=e4(l,o.x),s=e4(c,o.y);return r=n=null,function(r){l=o.x=i(r),c=o.y=s(r),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=o.i,n=o.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},d.x=function(r){return arguments.length?(p=it[!(a=r)<<1|!o],d):a},d.y=function(r){return arguments.length?(p=it[!a<<1|!(o=r)],d):o},d.clamp=function(r){return arguments.length?(a&&o?(u=!!r[0],f=!!r[1]):a?u=!!r:o&&(f=!!r),d):a&&o?[u,f]:a?u:o?f:null},d.extent=function(i){var s,u,f,h,p;return arguments.length?(a&&(s=i[0],u=i[1],o&&(s=s[0],u=u[0]),r=[s,u],a.invert&&(s=a(s),u=a(u)),u<s&&(p=s,s=u,u=p),s==l[0]&&u==l[1]||(l=[s,u])),o&&(f=i[0],h=i[1],a&&(f=f[1],h=h[1]),n=[f,h],o.invert&&(f=o(f),h=o(h)),h<f&&(p=f,f=h,h=p),f==c[0]&&h==c[1]||(c=[f,h])),d):(a&&(r?(s=r[0],u=r[1]):(s=l[0],u=l[1],a.invert&&(s=a.invert(s),u=a.invert(u)),u<s&&(p=s,s=u,u=p))),o&&(n?(f=n[0],h=n[1]):(f=c[0],h=c[1],o.invert&&(f=o.invert(f),h=o.invert(h)),h<f&&(p=f,f=h,h=p))),a&&o?[[s,f],[u,h]]:a?[s,u]:o&&[f,h])},d.clear=function(){return d.empty()||(l=[0,0],c=[0,0],r=n=null),d},d.empty=function(){return!!a&&l[0]==l[1]||!!o&&c[0]==c[1]},s.rebind(d,i,"on")};var n9={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},it=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ie(r){return JSON.parse(r.responseText)}function ir(r){var n=u.createRange();return n.selectNode(u.body),n.createContextualFragment(r.responseText)}s.text=er(function(r){return r.responseText}),s.json=function(r,n){return en(r,"application/json",ie,n)},s.html=function(r,n){return en(r,"text/html",ir,n)},s.xml=er(function(r){return r.responseXML}),void 0===(o="function"==typeof(a=s)?a.call(n,i,n,r):a)||(r.exports=o)}).apply(self)},3480:function(r){r.exports=function(){var r,n,i;function a(a,o){if(r){if(n){var s="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",l={};r(l),i=o(l),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else n=o}else r=o}return a(0,function(r){function n(r,n){return r(n={exports:{}},n.exports),n.exports}var i,a,o,s="1.13.4";function l(r,n,i,a){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(a-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=i,this.p2y=a}function c(r,n){this.x=r,this.y=n}l.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},l.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},l.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},l.prototype.solveCurveX=function(r,n){var i,a,o,s,l;for(void 0===n&&(n=1e-6),o=r,l=0;l<8;l++){if(Math.abs(s=this.sampleCurveX(o)-r)<n)return o;var c=this.sampleCurveDerivativeX(o);if(1e-6>Math.abs(c))break;o-=s/c}if((o=r)<(i=0))return i;if(o>(a=1))return a;for(;i<a&&!(Math.abs((s=this.sampleCurveX(o))-r)<n);)r>s?i=o:a=o,o=.5*(a-i)+i;return o},l.prototype.solve=function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))},c.prototype={clone:function(){return new c(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,i=r.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[0]*this.x+r[1]*this.y,i=r[2]*this.x+r[3]*this.y;return this.x=n,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),i=Math.sin(r),a=n*this.x-i*this.y,o=i*this.x+n*this.y;return this.x=a,this.y=o,this},_rotateAround:function(r,n){var i=Math.cos(r),a=Math.sin(r),o=n.x+i*(this.x-n.x)-a*(this.y-n.y),s=n.y+a*(this.x-n.x)+i*(this.y-n.y);return this.x=o,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(r){return r instanceof c?r:Array.isArray(r)?new c(r[0],r[1]):r};var u="undefined"!=typeof self?self:{};function f(r,n,i,a){var o=new l(r,n,i,a);return function(r){return o.solve(r)}}var h=f(.25,.1,.25,1);function p(r,n,i){return Math.min(i,Math.max(n,r))}function d(r,n,i){var a=i-n,o=((r-n)%a+a)%a+n;return o===n?i:o}function y(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var a=0;a<n.length;a+=1){var o=n[a];for(var s in o)r[s]=o[s]}return r}var g=1;function v(){return g++}function m(){return function r(n){return n?(n^16*Math.random()>>n/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function x(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function b(r,n){r.forEach(function(r){n[r]&&(n[r]=n[r].bind(n))})}function _(r,n){return -1!==r.indexOf(n,r.length-n.length)}function w(r,n,i){var a={};for(var o in r)a[o]=n.call(i||this,r[o],o,r);return a}function T(r,n,i){var a={};for(var o in r)n.call(i||this,r[o],o,r)&&(a[o]=r[o]);return a}function A(r){return Array.isArray(r)?r.map(A):"object"==typeof r&&r?w(r,A):r}var k={};function M(r){k[r]||("undefined"!=typeof console&&console.warn(r),k[r]=!0)}function S(r,n,i){return(i.y-r.y)*(n.x-r.x)>(n.y-r.y)*(i.x-r.x)}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(r){var n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(r,i,a,o){var s=a||o;return n[i]=!s||s.toLowerCase(),""}),n["max-age"]){var i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}var L=null;function C(r){if(null==L){var n=r.navigator?r.navigator.userAgent:null;L=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return L}function O(r){try{var n=u[r];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(r){return!1}}var D,P,B,R,z=u.performance&&u.performance.now?u.performance.now.bind(u.performance):Date.now.bind(Date),F=u.requestAnimationFrame||u.mozRequestAnimationFrame||u.webkitRequestAnimationFrame||u.msRequestAnimationFrame,N=u.cancelAnimationFrame||u.mozCancelAnimationFrame||u.webkitCancelAnimationFrame||u.msCancelAnimationFrame,U={now:z,frame:function(r){var n=F(r);return{cancel:function(){return N(n)}}},getImageData:function(r,n){void 0===n&&(n=0);var i=u.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw Error("failed to create canvas 2d context");return i.width=r.width,i.height=r.height,a.drawImage(r,0,0,r.width,r.height),a.getImageData(-n,-n,r.width+2*n,r.height+2*n)},resolveURL:function(r){return D||(D=u.document.createElement("a")),D.href=r,D.href},hardwareConcurrency:u.navigator&&u.navigator.hardwareConcurrency||4,get devicePixelRatio(){return u.devicePixelRatio},get prefersReducedMotion(){return!!u.matchMedia&&(null==P&&(P=u.matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}},j={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},V={supported:!1,testSupport:function(r){!H&&R&&(q?G(r):B=r)}},H=!1,q=!1;function G(r){var n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,R),r.isContextLost())return;V.supported=!0}catch(r){}r.deleteTexture(n),H=!0}u.document&&((R=u.document.createElement("img")).onload=function(){B&&G(B),B=null,q=!0},R.onerror=function(){H=!0,B=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var W=function(r,n){this._transformRequestFn=r,this._customAccessToken=n,this._createSkuToken()};function Y(r){return 0===r.indexOf("mapbox:")}W.prototype._createSkuToken=function(){var r=function(){for(var r="",n=0;n<10;n++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},W.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},W.prototype.transformRequest=function(r,n){return this._transformRequestFn&&this._transformRequestFn(r,n)||{url:r}},W.prototype.normalizeStyleURL=function(r,n){if(!Y(r))return r;var i=J(r);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||n)},W.prototype.normalizeGlyphsURL=function(r,n){if(!Y(r))return r;var i=J(r);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||n)},W.prototype.normalizeSourceURL=function(r,n){if(!Y(r))return r;var i=J(r);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||n)},W.prototype.normalizeSpriteURL=function(r,n,i,a){var o=J(r);return Y(r)?(o.path="/styles/v1"+o.path+"/sprite"+n+i,this._makeAPIURL(o,this._customAccessToken||a)):(o.path+=""+n+i,$(o))},W.prototype.normalizeTileURL=function(r,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Y(r))return r;var i=J(r),a=U.devicePixelRatio>=2||512===n?"@2x":"",o=V.supported?".webp":"$1";i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+a+o),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var s=this._customAccessToken||function(r){for(var n=0;n<r.length;n+=1){var i=r[n].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(i.params)||j.ACCESS_TOKEN;return j.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,s)},W.prototype.canonicalizeTileURL=function(r,n){var i=J(r);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return r;var a="mapbox://tiles/";a+=i.path.replace("/v4/","");var o=i.params;return n&&(o=o.filter(function(r){return!r.match(/^access_token=/)})),o.length&&(a+="?"+o.join("&")),a},W.prototype.canonicalizeTileset=function(r,n){for(var i=!!n&&Y(n),a=[],o=0,s=r.tiles||[];o<s.length;o+=1){var l=s[o];X(l)?a.push(this.canonicalizeTileURL(l,i)):a.push(l)}return a},W.prototype._makeAPIURL=function(r,n){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=J(j.API_URL);if(r.protocol=a.protocol,r.authority=a.authority,"http"===r.protocol){var o=r.params.indexOf("secure");o>=0&&r.params.splice(o,1)}if("/"!==a.path&&(r.path=""+a.path+r.path),!j.REQUIRE_ACCESS_TOKEN)return $(r);if(!(n=n||j.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. "+i);if("s"===n[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return r.params=r.params.filter(function(r){return -1===r.indexOf("access_token")}),r.params.push("access_token="+n),$(r)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function X(r){return Z.test(r)}var K=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function J(r){var n=r.match(K);if(!n)throw Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function $(r){var n=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+n}var Q="mapbox.eventData";function tt(r){if(!r)return null;var n,i=r.split(".");if(!i||3!==i.length)return null;try{return JSON.parse((n=i[1],decodeURIComponent(u.atob(n).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(r){return null}}var te=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};te.prototype.getStorageKey=function(r){var n,i,a=tt(j.ACCESS_TOKEN);return n=a&&a.u?(i=a.u,u.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(Number("0x"+n))}))):j.ACCESS_TOKEN||"",r?Q+"."+r+":"+n:Q+":"+n},te.prototype.fetchEventData=function(){var r=O("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{var a=u.localStorage.getItem(n);a&&(this.eventData=JSON.parse(a));var o=u.localStorage.getItem(i);o&&(this.anonId=o)}catch(r){M("Unable to read from LocalStorage")}},te.prototype.saveEventData=function(){var r=O("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{u.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&u.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(r){M("Unable to write to LocalStorage")}},te.prototype.processRequests=function(r){},te.prototype.postEvent=function(r,n,i,a){var o=this;if(j.EVENTS_URL){var l=J(j.EVENTS_URL);l.params.push("access_token="+(a||j.ACCESS_TOKEN||""));var c={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:s,skuId:"01",userId:this.anonId},u=n?y(c,n):c,f={url:$(l),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=tA(f,function(r){o.pendingRequest=null,i(r),o.saveEventData(),o.processRequests(a)})}},te.prototype.queueRequest=function(r,n){this.queue.push(r),this.processRequests(n)};var tr,tn,ti=function(r){function n(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.postMapLoadEvent=function(r,n,i,a){this.skuToken=i,(j.EVENTS_URL&&a||j.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(r){return Y(r)||X(r)}))&&this.queueRequest({id:n,timestamp:Date.now()},a)},n.prototype.processRequests=function(r){var n=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),a=i.id,o=i.timestamp;a&&this.success[a]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=m()),this.postEvent(o,{skuToken:this.skuToken},function(r){r||a&&(n.success[a]=!0)},r))}},n}(te),ta=new(function(r){function n(n){r.call(this,"appUserTurnstile"),this._customAccessToken=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.postTurnstileEvent=function(r,n){j.EVENTS_URL&&j.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(r){return Y(r)||X(r)})&&this.queueRequest(Date.now(),n)},n.prototype.processRequests=function(r){var n=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=tt(j.ACCESS_TOKEN),a=i?i.u:j.ACCESS_TOKEN,o=a!==this.eventData.tokenU;x(this.anonId)||(this.anonId=m(),o=!0);var s=this.queue.shift();if(this.eventData.lastSuccess){var l=new Date(this.eventData.lastSuccess),c=new Date(s),u=(s-this.eventData.lastSuccess)/864e5;o=o||u>=1||u<-1||l.getDate()!==c.getDate()}else o=!0;if(!o)return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},function(r){r||(n.eventData.lastSuccess=s,n.eventData.tokenU=a)},r)}},n}(te)),to=ta.postTurnstileEvent.bind(ta),ts=new ti,tl=ts.postMapLoadEvent.bind(ts),tc="mapbox-tiles",tu=500,tf=50;function th(){u.caches&&!tr&&(tr=u.caches.open(tc))}function tp(r){var n=r.indexOf("?");return n<0?r:r.slice(0,n)}var td,ty=1/0;function tg(){return null==td&&(td=u.OffscreenCanvas&&new u.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof u.createImageBitmap),td}var tv={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(tv);var tm,tx,tb=function(r){function n(n,i,a){401===i&&X(a)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,n),this.status=i,this.url=a,this.name=this.constructor.name,this.message=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},n}(Error),t_=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===u.location.protocol?u.parent:u).location.href},tw=function(r,n){var i,a,o,s,l,c,f,h,p;if(i=r.url,!(/^file:/.test(i)||/^file:/.test(t_())&&!/^\w+:/.test(i))){if(u.fetch&&u.Request&&u.AbortController&&u.Request.prototype.hasOwnProperty("signal"))return o=new u.AbortController,s=new u.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:t_(),signal:o.signal}),l=!1,c=!1,f=(a=s.url).indexOf("sku=")>0&&X(a),"json"===r.type&&s.headers.set("Accept","application/json"),h=function(i,a,o){if(!c){if(i&&"SecurityError"!==i.message&&M(i),a&&o)return p(a);var l=Date.now();u.fetch(s).then(function(i){if(i.ok){var a=f?i.clone():null;return p(i,a,l)}return n(new tb(i.statusText,i.status,r.url))}).catch(function(r){20!==r.code&&n(Error(r.message))})}},p=function(i,a,o){("arrayBuffer"===r.type?i.arrayBuffer():"json"===r.type?i.json():i.text()).then(function(r){c||(a&&o&&function(r,n,i){if(th(),tr){var a={status:n.status,statusText:n.statusText,headers:new u.Headers};n.headers.forEach(function(r,n){return a.headers.set(n,r)});var o=I(n.headers.get("Cache-Control")||"");o["no-store"]||(o["max-age"]&&a.headers.set("Expires",new Date(i+1e3*o["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(r,n){if(void 0===tn)try{new Response(new ReadableStream),tn=!0}catch(r){tn=!1}tn?n(r.body):r.blob().then(n)}(n,function(n){var i=new u.Response(n,a);th(),tr&&tr.then(function(n){return n.put(tp(r.url),i)}).catch(function(r){return M(r.message)})}))}}(s,a,o),l=!0,n(null,r,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(function(r){c||n(Error(r.message))})},f?function(r,n){if(th(),!tr)return n(null);var i=tp(r.url);tr.then(function(r){r.match(i).then(function(a){var o=function(r){if(!r)return!1;var n=new Date(r.headers.get("Expires")||0),i=I(r.headers.get("Cache-Control")||"");return n>Date.now()&&!i["no-cache"]}(a);r.delete(i),o&&r.put(i,a.clone()),n(null,a,o)}).catch(n)}).catch(n)}(s,h):h(null,null),{cancel:function(){c=!0,l||o.abort()}};if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,n,void 0,!0)}return function(r,n){var i=new u.XMLHttpRequest;for(var a in i.open(r.method||"GET",r.url,!0),"arrayBuffer"===r.type&&(i.responseType="arraybuffer"),r.headers)i.setRequestHeader(a,r.headers[a]);return"json"===r.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===r.credentials,i.onerror=function(){n(Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var a=i.response;if("json"===r.type)try{a=JSON.parse(i.response)}catch(r){return n(r)}n(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else n(new tb(i.statusText,i.status,r.url))},i.send(r.body),{cancel:function(){return i.abort()}}}(r,n)},tT=function(r,n){return tw(y(r,{type:"arrayBuffer"}),n)},tA=function(r,n){return tw(y(r,{method:"POST"}),n)},tk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";tm=[],tx=0;var tM=function(r,n){if(V.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),tx>=j.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:r,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return tm.push(i),i}tx++;var a=!1,o=function(){if(!a)for(a=!0,tx--;tm.length&&tx<j.MAX_PARALLEL_IMAGE_REQUESTS;){var r=tm.shift(),n=r.requestParameters,i=r.callback;r.cancelled||(r.cancel=tM(n,i).cancel)}},s=tT(r,function(r,i,a,s){var l,c,f;o(),r?n(r):i&&(tg()?function(r,n){var i=new u.Blob([new Uint8Array(r)],{type:"image/png"});u.createImageBitmap(i).then(function(r){n(null,r)}).catch(function(r){n(Error("Could not load image because of "+r.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(i,n):(l=new u.Image,c=u.URL,l.onload=function(){n(null,l),c.revokeObjectURL(l.src),l.onload=null,u.requestAnimationFrame(function(){l.src=tk})},l.onerror=function(){return n(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},f=new u.Blob([new Uint8Array(i)],{type:"image/png"}),l.cacheControl=a,l.expires=s,l.src=i.byteLength?c.createObjectURL(f):tk))});return{cancel:function(){s.cancel(),o()}}};function tS(r,n,i){i[r]&&-1!==i[r].indexOf(n)||(i[r]=i[r]||[],i[r].push(n))}function tE(r,n,i){if(i&&i[r]){var a=i[r].indexOf(n);-1!==a&&i[r].splice(a,1)}}var tI=function(r,n){void 0===n&&(n={}),y(this,n),this.type=r},tL=function(r){function n(n,i){void 0===i&&(i={}),r.call(this,"error",y({error:n},i))}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(tI),tC=function(){};tC.prototype.on=function(r,n){return this._listeners=this._listeners||{},tS(r,n,this._listeners),this},tC.prototype.off=function(r,n){return tE(r,n,this._listeners),tE(r,n,this._oneTimeListeners),this},tC.prototype.once=function(r,n){return this._oneTimeListeners=this._oneTimeListeners||{},tS(r,n,this._oneTimeListeners),this},tC.prototype.fire=function(r,n){"string"==typeof r&&(r=new tI(r,n||{}));var i=r.type;if(this.listens(i)){r.target=this;for(var a=0,o=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];a<o.length;a+=1)o[a].call(this,r);for(var s=0,l=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];s<l.length;s+=1){var c=l[s];tE(i,c,this._oneTimeListeners),c.call(this,r)}var u=this._eventedParent;u&&(y(r,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(r))}else r instanceof tL&&console.error(r.error);return this},tC.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},tC.prototype.setEventedParent=function(r,n){return this._eventedParent=r,this._eventedParentData=n,this};var tO={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},tD=function(r,n,i,a){this.message=(r?r+": ":"")+i,a&&(this.identifier=a),null!=n&&n.__line__&&(this.line=n.__line__)};function tP(r){var n=r.key,i=r.value;return i?[new tD(n,i,"constants have been deprecated as of v8")]:[]}function tB(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var a=0;a<n.length;a+=1){var o=n[a];for(var s in o)r[s]=o[s]}return r}function tR(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function tz(r){if(Array.isArray(r))return r.map(tz);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var n={};for(var i in r)n[i]=tz(r[i]);return n}return tR(r)}var tF=function(r){function n(n,i){r.call(this,i),this.message=i,this.key=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(Error),tN=function(r,n){void 0===n&&(n=[]),this.parent=r,this.bindings={};for(var i=0,a=n;i<a.length;i+=1){var o=a[i],s=o[0],l=o[1];this.bindings[s]=l}};tN.prototype.concat=function(r){return new tN(this,r)},tN.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw Error(r+" not found in scope.")},tN.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var tU={kind:"null"},tj={kind:"number"},tV={kind:"string"},tH={kind:"boolean"},tq={kind:"color"},tG={kind:"object"},tW={kind:"value"},tY={kind:"collator"},tZ={kind:"formatted"},tX={kind:"resolvedImage"};function tK(r,n){return{kind:"array",itemType:r,N:n}}function tJ(r){if("array"===r.kind){var n=tJ(r.itemType);return"number"==typeof r.N?"array<"+n+", "+r.N+">":"value"===r.itemType.kind?"array":"array<"+n+">"}return r.kind}var t$=[tU,tj,tV,tH,tq,tZ,tG,tK(tW),tX];function tQ(r,n){if("error"===n.kind)return null;if("array"===r.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!tQ(r.itemType,n.itemType))&&("number"!=typeof r.N||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if("value"===r.kind){for(var i=0;i<t$.length;i+=1)if(!tQ(t$[i],n))return null}}return"Expected "+tJ(r)+" but found "+tJ(n)+" instead."}function t0(r,n){return n.some(function(n){return n.kind===r.kind})}function t1(r,n){return n.some(function(n){return"null"===n?null===r:"array"===n?Array.isArray(r):"object"===n?r&&!Array.isArray(r)&&"object"==typeof r:n===typeof r})}var t2=n(function(r,n){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(r){return(r=Math.round(r))<0?0:r>255?255:r}function o(r){return r<0?0:r>1?1:r}function s(r){return"%"===r[r.length-1]?a(parseFloat(r)/100*255):a(parseInt(r))}function l(r){return"%"===r[r.length-1]?o(parseFloat(r)/100):o(parseFloat(r))}function c(r,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(n-r)*i*6:2*i<1?n:3*i<2?r+(n-r)*(2/3-i)*6:r}try{n.parseCSSColor=function(r){var n,o=r.replace(/ /g,"").toLowerCase();if(o in i)return i[o].slice();if("#"===o[0])return 4===o.length?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===o.length&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var u=o.indexOf("("),f=o.indexOf(")");if(-1!==u&&f+1===o.length){var h=o.substr(0,u),p=o.substr(u+1,f-(u+1)).split(","),d=1;switch(h){case"rgba":if(4!==p.length)break;d=l(p.pop());case"rgb":return 3!==p.length?null:[s(p[0]),s(p[1]),s(p[2]),d];case"hsla":if(4!==p.length)break;d=l(p.pop());case"hsl":if(3!==p.length)break;var y=(parseFloat(p[0])%360+360)%360/360,g=l(p[1]),v=l(p[2]),m=v<=.5?v*(g+1):v+g-v*g,x=2*v-m;return[a(255*c(x,m,y+1/3)),a(255*c(x,m,y)),a(255*c(x,m,y-1/3)),d]}}return null}}catch(r){}}).parseCSSColor,t3=function(r,n,i,a){void 0===a&&(a=1),this.r=r,this.g=n,this.b=i,this.a=a};t3.parse=function(r){if(r){if(r instanceof t3)return r;if("string"==typeof r){var n=t2(r);if(n)return new t3(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}},t3.prototype.toString=function(){var r=this.toArray();return"rgba("+Math.round(r[0])+","+Math.round(r[1])+","+Math.round(r[2])+","+r[3]+")"},t3.prototype.toArray=function(){var r=this.r,n=this.g,i=this.b,a=this.a;return 0===a?[0,0,0,0]:[255*r/a,255*n/a,255*i/a,a]},t3.black=new t3(0,0,0,1),t3.white=new t3(1,1,1,1),t3.transparent=new t3(0,0,0,0),t3.red=new t3(1,0,0,1);var t4=function(r,n,i){this.sensitivity=r?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};t4.prototype.compare=function(r,n){return this.collator.compare(r,n)},t4.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var t6=function(r,n,i,a,o){this.text=r,this.image=n,this.scale=i,this.fontStack=a,this.textColor=o},t5=function(r){this.sections=r};t5.fromString=function(r){return new t5([new t6(r,null,null,null,null)])},t5.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(r){return 0!==r.text.length||r.image&&0!==r.image.name.length})},t5.factory=function(r){return r instanceof t5?r:t5.fromString(r)},t5.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(r){return r.text}).join("")},t5.prototype.serialize=function(){for(var r=["format"],n=0,i=this.sections;n<i.length;n+=1){var a=i[n];if(a.image)r.push(["image",a.image.name]);else{r.push(a.text);var o={};a.fontStack&&(o["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(o["font-scale"]=a.scale),a.textColor&&(o["text-color"]=["rgba"].concat(a.textColor.toArray())),r.push(o)}}return r};var t8=function(r){this.name=r.name,this.available=r.available};function t7(r,n,i,a){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value ["+[r,n,i,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[r,n,i,a]:[r,n,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function t9(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof t3||r instanceof t4||r instanceof t5||r instanceof t8)return!0;if(Array.isArray(r)){for(var n=0;n<r.length;n+=1)if(!t9(r[n]))return!1;return!0}if("object"==typeof r){for(var i in r)if(!t9(r[i]))return!1;return!0}return!1}function et(r){if(null===r)return tU;if("string"==typeof r)return tV;if("boolean"==typeof r)return tH;if("number"==typeof r)return tj;if(r instanceof t3)return tq;if(r instanceof t4)return tY;if(r instanceof t5)return tZ;if(r instanceof t8)return tX;if(Array.isArray(r)){for(var n,i=r.length,a=0;a<r.length;a+=1){var o=et(r[a]);if(n){if(n===o)continue;n=tW;break}n=o}return tK(n||tW,i)}return tG}function ee(r){var n=typeof r;return null===r?"":"string"===n||"number"===n||"boolean"===n?String(r):r instanceof t3||r instanceof t5||r instanceof t8?r.toString():JSON.stringify(r)}t8.prototype.toString=function(){return this.name},t8.fromString=function(r){return r?new t8({name:r,available:!1}):null},t8.prototype.serialize=function(){return["image",this.name]};var er=function(r,n){this.type=r,this.value=n};er.parse=function(r,n){if(2!==r.length)return n.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!t9(r[1]))return n.error("invalid value");var i=r[1],a=et(i),o=n.expectedType;return"array"===a.kind&&0===a.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(a=o),new er(a,i)},er.prototype.evaluate=function(){return this.value},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof t3?["rgba"].concat(this.value.toArray()):this.value instanceof t5?this.value.serialize():this.value};var en=function(r){this.name="ExpressionEvaluationError",this.message=r};en.prototype.toJSON=function(){return this.message};var ei={string:tV,number:tj,boolean:tH,object:tG},ea=function(r,n){this.type=r,this.args=n};ea.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i,a,o,s=1,l=r[0];if("array"===l){if(r.length>2){var c=r[1];if("string"!=typeof c||!(c in ei)||"object"===c)return n.error('The item type argument of "array" must be one of string, number, boolean',1);i=ei[c],s++}else i=tW;if(r.length>3){if(null!==r[2]&&("number"!=typeof r[2]||r[2]<0||r[2]!==Math.floor(r[2])))return n.error('The length argument to "array" must be a positive integer literal',2);a=r[2],s++}o=tK(i,a)}else o=ei[l];for(var u=[];s<r.length;s++){var f=n.parse(r[s],s,tW);if(!f)return null;u.push(f)}return new ea(o,u)},ea.prototype.evaluate=function(r){for(var n=0;n<this.args.length;n++){var i=this.args[n].evaluate(r);if(!tQ(this.type,et(i)))return i;if(n===this.args.length-1)throw new en("Expected value to be of type "+tJ(this.type)+", but found "+tJ(et(i))+" instead.")}return null},ea.prototype.eachChild=function(r){this.args.forEach(r)},ea.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},ea.prototype.serialize=function(){var r=this.type,n=[r.kind];if("array"===r.kind){var i=r.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);var a=r.N;("number"==typeof a||this.args.length>1)&&n.push(a)}}return n.concat(this.args.map(function(r){return r.serialize()}))};var eo=function(r){this.type=tZ,this.sections=r};eo.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i=r[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");for(var a=[],o=!1,s=1;s<=r.length-1;++s){var l=r[s];if(o&&"object"==typeof l&&!Array.isArray(l)){o=!1;var c=null;if(l["font-scale"]&&!(c=n.parse(l["font-scale"],1,tj)))return null;var u=null;if(l["text-font"]&&!(u=n.parse(l["text-font"],1,tK(tV))))return null;var f=null;if(l["text-color"]&&!(f=n.parse(l["text-color"],1,tq)))return null;var h=a[a.length-1];h.scale=c,h.font=u,h.textColor=f}else{var p=n.parse(r[s],1,tW);if(!p)return null;var d=p.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,a.push({content:p,scale:null,font:null,textColor:null})}}return new eo(a)},eo.prototype.evaluate=function(r){return new t5(this.sections.map(function(n){var i=n.content.evaluate(r);return et(i)===tX?new t6("",i,null,null,null):new t6(ee(i),null,n.scale?n.scale.evaluate(r):null,n.font?n.font.evaluate(r).join(","):null,n.textColor?n.textColor.evaluate(r):null)}))},eo.prototype.eachChild=function(r){for(var n=0,i=this.sections;n<i.length;n+=1){var a=i[n];r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){for(var r=["format"],n=0,i=this.sections;n<i.length;n+=1){var a=i[n];r.push(a.content.serialize());var o={};a.scale&&(o["font-scale"]=a.scale.serialize()),a.font&&(o["text-font"]=a.font.serialize()),a.textColor&&(o["text-color"]=a.textColor.serialize()),r.push(o)}return r};var es=function(r){this.type=tX,this.input=r};es.parse=function(r,n){if(2!==r.length)return n.error("Expected two arguments.");var i=n.parse(r[1],1,tV);return i?new es(i):n.error("No image name provided.")},es.prototype.evaluate=function(r){var n=this.input.evaluate(r),i=t8.fromString(n);return i&&r.availableImages&&(i.available=r.availableImages.indexOf(n)>-1),i},es.prototype.eachChild=function(r){r(this.input)},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){return["image",this.input.serialize()]};var el={"to-boolean":tH,"to-color":tq,"to-number":tj,"to-string":tV},ec=function(r,n){this.type=r,this.args=n};ec.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i=r[0];if(("to-boolean"===i||"to-string"===i)&&2!==r.length)return n.error("Expected one argument.");for(var a=el[i],o=[],s=1;s<r.length;s++){var l=n.parse(r[s],s,tW);if(!l)return null;o.push(l)}return new ec(a,o)},ec.prototype.evaluate=function(r){if("boolean"===this.type.kind)return!!this.args[0].evaluate(r);if("color"===this.type.kind){for(var n,i,a=0,o=this.args;a<o.length;a+=1){if(i=null,(n=o[a].evaluate(r))instanceof t3)return n;if("string"==typeof n){var s=r.parseColor(n);if(s)return s}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":t7(n[0],n[1],n[2],n[3])))return new t3(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new en(i||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'")}if("number"===this.type.kind){for(var l=null,c=0,u=this.args;c<u.length;c+=1){if(null===(l=u[c].evaluate(r)))return 0;var f=Number(l);if(!isNaN(f))return f}throw new en("Could not convert "+JSON.stringify(l)+" to number.")}return"formatted"===this.type.kind?t5.fromString(ee(this.args[0].evaluate(r))):"resolvedImage"===this.type.kind?t8.fromString(ee(this.args[0].evaluate(r))):ee(this.args[0].evaluate(r))},ec.prototype.eachChild=function(r){this.args.forEach(r)},ec.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},ec.prototype.serialize=function(){if("formatted"===this.type.kind)return new eo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new es(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(n){r.push(n.serialize())}),r};var eu=["Unknown","Point","LineString","Polygon"],ef=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ef.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ef.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?eu[this.feature.type]:this.feature.type:null},ef.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ef.prototype.canonicalID=function(){return this.canonical},ef.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ef.prototype.parseColor=function(r){var n=this._parseColorCache[r];return n||(n=this._parseColorCache[r]=t3.parse(r)),n};var eh=function(r,n,i,a){this.name=r,this.type=n,this._evaluate=i,this.args=a};eh.prototype.evaluate=function(r){return this._evaluate(r,this.args)},eh.prototype.eachChild=function(r){this.args.forEach(r)},eh.prototype.outputDefined=function(){return!1},eh.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},eh.parse=function(r,n){var i,a=r[0],o=eh.definitions[a];if(!o)return n.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,c=l.filter(function(n){var i=n[0];return!Array.isArray(i)||i.length===r.length-1}),u=null,f=0;f<c.length;f+=1){var h=c[f],p=h[0],d=h[1];u=new eI(n.registry,n.path,null,n.scope);for(var y=[],g=!1,v=1;v<r.length;v++){var m=r[v],x=Array.isArray(p)?p[v-1]:p.type,b=u.parse(m,1+y.length,x);if(!b){g=!0;break}y.push(b)}if(!g){if(Array.isArray(p)&&p.length!==y.length)u.error("Expected "+p.length+" arguments, but found "+y.length+" instead.");else{for(var _=0;_<y.length;_++){var w=Array.isArray(p)?p[_]:p.type,T=y[_];u.concat(_+1).checkSubtype(w,T.type)}if(0===u.errors.length)return new eh(a,s,d,y)}}}if(1===c.length)(i=n.errors).push.apply(i,u.errors);else{for(var A=(c.length?c:l).map(function(r){var n;return Array.isArray(n=r[0])?"("+n.map(tJ).join(", ")+")":"("+tJ(n.type)+"...)"}).join(" | "),k=[],M=1;M<r.length;M++){var S=n.parse(r[M],1+k.length);if(!S)return null;k.push(tJ(S.type))}n.error("Expected arguments of type "+A+", but found ("+k.join(", ")+") instead.")}return null},eh.register=function(r,n){for(var i in eh.definitions=n,n)r[i]=eh};var ep=function(r,n,i){this.type=tY,this.locale=i,this.caseSensitive=r,this.diacriticSensitive=n};function ed(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function ey(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function eg(r,n){for(var i,a,o,s,l,c,u,f,h=!1,p=0,d=n.length;p<d;p++)for(var y=n[p],g=0,v=y.length;g<v-1;g++){if(o=y[g],s=y[g+1],l=void 0,c=void 0,u=void 0,f=void 0,l=r[0]-o[0],c=r[1]-o[1],u=r[0]-s[0],l*(f=r[1]-s[1])-u*c==0&&l*u<=0&&c*f<=0)return!1;i=y[g],a=y[g+1],i[1]>r[1]!=a[1]>r[1]&&r[0]<(a[0]-i[0])*(r[1]-i[1])/(a[1]-i[1])+i[0]&&(h=!h)}return h}function ev(r,n,i,a){var o=r[0]-i[0],s=r[1]-i[1],l=n[0]-i[0],c=n[1]-i[1],u=a[0]-i[0],f=a[1]-i[1],h=o*f-u*s,p=l*f-u*c;return h>0&&p<0||h<0&&p>0}function em(r,n){for(var i=0;i<r.length;++i)if(!eg(r[i],n))return!1;for(var a=0;a<r.length-1;++a)if(function(r,n,i){for(var a,o,s,l,c,u=0;u<i.length;u+=1)for(var f=i[u],h=0;h<f.length-1;++h)if(a=f[h],o=f[h+1],s=void 0,l=void 0,c=void 0,c=[n[0]-r[0],n[1]-r[1]],0!=(s=[o[0]-a[0],o[1]-a[1]],l=c,s[0]*l[1]-s[1]*l[0])&&ev(r,n,a,o)&&ev(a,o,r,n))return!0;return!1}(r[a],r[a+1],n))return!1;return!0}function ex(r,n,i){for(var a=[],o=0;o<r.length;o++){for(var s=[],l=0;l<r[o].length;l++){var c=function(r,n){var i=(180+r[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,o=Math.pow(2,n.z);return[Math.round(i*o*8192),Math.round(a*o*8192)]}(r[o][l],i);ed(n,c),s.push(c)}a.push(s)}return a}function eb(r,n,i){for(var a=[],o=0;o<r.length;o++){var s=ex(r[o],n,i);a.push(s)}return a}function e_(r,n,i,a){if(r[0]<i[0]||r[0]>i[2]){var o=.5*a,s=r[0]-i[0]>o?-a:i[0]-r[0]>o?a:0;0===s&&(s=r[0]-i[2]>o?-a:i[2]-r[0]>o?a:0),r[0]+=s}ed(n,r)}function ew(r,n,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],c=0;c<r.length;c+=1)for(var u=0,f=r[c];u<f.length;u+=1){var h=f[u],p=[h.x+s[0],h.y+s[1]];e_(p,n,i,o),l.push(p)}return l}function eT(r,n,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],c=0;c<r.length;c+=1){for(var u=[],f=0,h=r[c];f<h.length;f+=1){var p=h[f],d=[p.x+s[0],p.y+s[1]];ed(n,d),u.push(d)}l.push(u)}if(n[2]-n[0]<=o/2){n[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var y=0;y<l.length;y+=1)for(var g=0,v=l[y];g<v.length;g+=1)e_(v[g],n,i,o)}return l}ep.parse=function(r,n){if(2!==r.length)return n.error("Expected one argument.");var i=r[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");var a=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,tH);if(!a)return null;var o=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,tH);if(!o)return null;var s=null;return!i.locale||(s=n.parse(i.locale,1,tV))?new ep(a,o,s):null},ep.prototype.evaluate=function(r){return new t4(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},ep.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},ep.prototype.outputDefined=function(){return!1},ep.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var eA=function(r,n){this.type=tH,this.geojson=r,this.geometries=n};function ek(r){if(r instanceof eh&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof eA)return!1;var n=!0;return r.eachChild(function(r){n&&!ek(r)&&(n=!1)}),n}function eM(r){if(r instanceof eh&&"feature-state"===r.name)return!1;var n=!0;return r.eachChild(function(r){n&&!eM(r)&&(n=!1)}),n}function eS(r,n){if(r instanceof eh&&n.indexOf(r.name)>=0)return!1;var i=!0;return r.eachChild(function(r){i&&!eS(r,n)&&(i=!1)}),i}eA.parse=function(r,n){if(2!==r.length)return n.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(t9(r[1])){var i=r[1];if("FeatureCollection"===i.type)for(var a=0;a<i.features.length;++a){var o=i.features[a].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new eA(i,i.features[a].geometry)}else if("Feature"===i.type){var s=i.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new eA(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new eA(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")},eA.prototype.evaluate=function(r){if(null!=r.geometry()&&null!=r.canonicalID()){if("Point"===r.geometryType())return function(r,n){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if("Polygon"===n.type){var s=ex(n.coordinates,a,o),l=ew(r.geometry(),i,a,o);if(!ey(i,a))return!1;for(var c=0;c<l.length;c+=1)if(!eg(l[c],s))return!1}if("MultiPolygon"===n.type){var u=eb(n.coordinates,a,o),f=ew(r.geometry(),i,a,o);if(!ey(i,a))return!1;for(var h=0;h<f.length;h+=1)if(!function(r,n){for(var i=0;i<n.length;i++)if(eg(r,n[i]))return!0;return!1}(f[h],u))return!1}return!0}(r,this.geometries);if("LineString"===r.geometryType())return function(r,n){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if("Polygon"===n.type){var s=ex(n.coordinates,a,o),l=eT(r.geometry(),i,a,o);if(!ey(i,a))return!1;for(var c=0;c<l.length;c+=1)if(!em(l[c],s))return!1}if("MultiPolygon"===n.type){var u=eb(n.coordinates,a,o),f=eT(r.geometry(),i,a,o);if(!ey(i,a))return!1;for(var h=0;h<f.length;h+=1)if(!function(r,n){for(var i=0;i<n.length;i++)if(em(r,n[i]))return!0;return!1}(f[h],u))return!1}return!0}(r,this.geometries)}return!1},eA.prototype.eachChild=function(){},eA.prototype.outputDefined=function(){return!0},eA.prototype.serialize=function(){return["within",this.geojson]};var eE=function(r,n){this.type=n.type,this.name=r,this.boundExpression=n};eE.parse=function(r,n){if(2!==r.length||"string"!=typeof r[1])return n.error("'var' expression requires exactly one string literal argument.");var i=r[1];return n.scope.has(i)?new eE(i,n.scope.get(i)):n.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},eE.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},eE.prototype.eachChild=function(){},eE.prototype.outputDefined=function(){return!1},eE.prototype.serialize=function(){return["var",this.name]};var eI=function(r,n,i,a,o){void 0===n&&(n=[]),void 0===a&&(a=new tN),void 0===o&&(o=[]),this.registry=r,this.path=n,this.key=n.map(function(r){return"["+r+"]"}).join(""),this.scope=a,this.errors=o,this.expectedType=i};function eL(r,n){for(var i,a,o=r.length-1,s=0,l=o,c=0;s<=l;)if(i=r[c=Math.floor((s+l)/2)],a=r[c+1],i<=n){if(c===o||n<a)return c;s=c+1}else{if(!(i>n))throw new en("Input is not a number.");l=c-1}return 0}eI.prototype.parse=function(r,n,i,a,o){return void 0===o&&(o={}),n?this.concat(n,i,a)._parse(r,o):this._parse(r,o)},eI.prototype._parse=function(r,n){function i(r,n,i){return"assert"===i?new ea(n,[r]):"coerce"===i?new ec(n,[r]):r}if(null!==r&&"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r||(r=["literal",r]),Array.isArray(r)){if(0===r.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=r[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[a];if(o){var s=o.parse(r,this);if(!s)return null;if(this.expectedType){var l=this.expectedType,c=s.type;if("string"!==l.kind&&"number"!==l.kind&&"boolean"!==l.kind&&"object"!==l.kind&&"array"!==l.kind||"value"!==c.kind){if("color"!==l.kind&&"formatted"!==l.kind&&"resolvedImage"!==l.kind||"value"!==c.kind&&"string"!==c.kind){if(this.checkSubtype(l,c))return null}else s=i(s,l,n.typeAnnotation||"coerce")}else s=i(s,l,n.typeAnnotation||"assert")}if(!(s instanceof er)&&"resolvedImage"!==s.type.kind&&function r(n){if(n instanceof eE)return r(n.boundExpression);if(n instanceof eh&&"error"===n.name||n instanceof ep||n instanceof eA)return!1;var i=n instanceof ec||n instanceof ea,a=!0;return n.eachChild(function(n){a=i?a&&r(n):a&&n instanceof er}),!!a&&ek(n)&&eS(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(s)){var u=new ef;try{s=new er(s.type,s.evaluate(u))}catch(r){return this.error(r.message),null}}return s}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===r?this.error("'undefined' value invalid. Use null instead."):"object"==typeof r?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof r+" instead.")},eI.prototype.concat=function(r,n,i){var a="number"==typeof r?this.path.concat(r):this.path,o=i?this.scope.concat(i):this.scope;return new eI(this.registry,a,n||null,o,this.errors)},eI.prototype.error=function(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var a=""+this.key+n.map(function(r){return"["+r+"]"}).join("");this.errors.push(new tF(a,r))},eI.prototype.checkSubtype=function(r,n){var i=tQ(r,n);return i&&this.error(i),i};var eC=function(r,n,i){this.type=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0;a<i.length;a+=1){var o=i[a],s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}};function eO(r,n,i){return r*(1-i)+n*i}eC.parse=function(r,n){if(r.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(r[1],1,tj);if(!i)return null;var a=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var s=1;s<r.length;s+=2){var l=1===s?-1/0:r[s],c=r[s+1],u=s,f=s+1;if("number"!=typeof l)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(a.length&&a[a.length-1][0]>=l)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(c,f,o);if(!h)return null;o=o||h.type,a.push([l,h])}return new eC(o,i,a)},eC.prototype.evaluate=function(r){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);var a=this.input.evaluate(r);if(a<=n[0])return i[0].evaluate(r);var o=n.length;return a>=n[o-1]?i[o-1].evaluate(r):i[eL(n,a)].evaluate(r)},eC.prototype.eachChild=function(r){r(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1)r(i[n])},eC.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},eC.prototype.serialize=function(){for(var r=["step",this.input.serialize()],n=0;n<this.labels.length;n++)n>0&&r.push(this.labels[n]),r.push(this.outputs[n].serialize());return r};var eD=Object.freeze({__proto__:null,number:eO,color:function(r,n,i){return new t3(eO(r.r,n.r,i),eO(r.g,n.g,i),eO(r.b,n.b,i),eO(r.a,n.a,i))},array:function(r,n,i){return r.map(function(r,a){return eO(r,n[a],i)})}}),eP=4/29,eB=6/29,eR=6/29*3*(6/29),ez=6/29*(6/29)*(6/29),eF=Math.PI/180,eN=180/Math.PI;function eU(r){return r>ez?Math.pow(r,1/3):r/eR+eP}function ej(r){return r>eB?r*r*r:eR*(r-eP)}function eV(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function eH(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function eq(r){var n=eH(r.r),i=eH(r.g),a=eH(r.b),o=eU((.4124564*n+.3575761*i+.1804375*a)/.95047),s=eU((.2126729*n+.7151522*i+.072175*a)/1);return{l:116*s-16,a:500*(o-s),b:200*(s-eU((.0193339*n+.119192*i+.9503041*a)/1.08883)),alpha:r.a}}function eG(r){var n=(r.l+16)/116,i=isNaN(r.a)?n:n+r.a/500,a=isNaN(r.b)?n:n-r.b/200;return n=1*ej(n),new t3(eV(3.2404542*(i=.95047*ej(i))-1.5371385*n-.4985314*(a=1.08883*ej(a))),eV(-.969266*i+1.8760108*n+.041556*a),eV(.0556434*i-.2040259*n+1.0572252*a),r.alpha)}var eW={forward:eq,reverse:eG,interpolate:function(r,n,i){return{l:eO(r.l,n.l,i),a:eO(r.a,n.a,i),b:eO(r.b,n.b,i),alpha:eO(r.alpha,n.alpha,i)}}},eY={forward:function(r){var n=eq(r),i=n.l,a=n.a,o=n.b,s=Math.atan2(o,a)*eN;return{h:s<0?s+360:s,c:Math.sqrt(a*a+o*o),l:i,alpha:r.a}},reverse:function(r){var n=r.h*eF,i=r.c;return eG({l:r.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:r.alpha})},interpolate:function(r,n,i){var a,o;return{h:(a=r.h,o=n.h-a,a+i*(o>180||o<-180?o-360*Math.round(o/360):o)),c:eO(r.c,n.c,i),l:eO(r.l,n.l,i),alpha:eO(r.alpha,n.alpha,i)}}},eZ=Object.freeze({__proto__:null,lab:eW,hcl:eY}),eX=function(r,n,i,a,o){this.type=r,this.operator=n,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(var s=0;s<o.length;s+=1){var l=o[s],c=l[0],u=l[1];this.labels.push(c),this.outputs.push(u)}};function eK(r,n,i,a){var o=a-i,s=r-i;return 0===o?0:1===n?s/o:(Math.pow(n,s)-1)/(Math.pow(n,o)-1)}eX.interpolationFactor=function(r,n,i,a){var o=0;if("exponential"===r.name)o=eK(n,r.base,i,a);else if("linear"===r.name)o=eK(n,1,i,a);else if("cubic-bezier"===r.name){var s=r.controlPoints;o=new l(s[0],s[1],s[2],s[3]).solve(eK(n,1,i,a))}return o},eX.parse=function(r,n){var i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type "+String(a[0]),1,0);var c=a.slice(1);if(4!==c.length||c.some(function(r){return"number"!=typeof r||r<0||r>1}))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(r.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,tj)))return null;var u=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=tq:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var h=0;h<s.length;h+=2){var p=s[h],d=s[h+1],y=h+3,g=h+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(u.length&&u[u.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);var v=n.parse(d,g,f);if(!v)return null;f=f||v.type,u.push([p,v])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new eX(f,i,a,o,u):n.error("Type "+tJ(f)+" is not interpolatable.")},eX.prototype.evaluate=function(r){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);var a=this.input.evaluate(r);if(a<=n[0])return i[0].evaluate(r);var o=n.length;if(a>=n[o-1])return i[o-1].evaluate(r);var s=eL(n,a),l=n[s],c=n[s+1],u=eX.interpolationFactor(this.interpolation,a,l,c),f=i[s].evaluate(r),h=i[s+1].evaluate(r);return"interpolate"===this.operator?eD[this.type.kind.toLowerCase()](f,h,u):"interpolate-hcl"===this.operator?eY.reverse(eY.interpolate(eY.forward(f),eY.forward(h),u)):eW.reverse(eW.interpolate(eW.forward(f),eW.forward(h),u))},eX.prototype.eachChild=function(r){r(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1)r(i[n])},eX.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},eX.prototype.serialize=function(){var r;r="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,r,this.input.serialize()],i=0;i<this.labels.length;i++)n.push(this.labels[i],this.outputs[i].serialize());return n};var eJ=function(r,n){this.type=r,this.args=n};eJ.parse=function(r,n){if(r.length<2)return n.error("Expectected at least one argument.");var i=null,a=n.expectedType;a&&"value"!==a.kind&&(i=a);for(var o=[],s=0,l=r.slice(1);s<l.length;s+=1){var c=l[s],u=n.parse(c,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!u)return null;i=i||u.type,o.push(u)}return new eJ(a&&o.some(function(r){return tQ(a,r.type)})?tW:i,o)},eJ.prototype.evaluate=function(r){for(var n,i=null,a=0,o=0,s=this.args;o<s.length&&(a++,(i=s[o].evaluate(r))&&i instanceof t8&&!i.available&&(n||(n=i.name),i=null,a===this.args.length&&(i=n)),null===i);o+=1);return i},eJ.prototype.eachChild=function(r){this.args.forEach(r)},eJ.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},eJ.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(n){r.push(n.serialize())}),r};var e$=function(r,n){this.type=n.type,this.bindings=[].concat(r),this.result=n};e$.prototype.evaluate=function(r){return this.result.evaluate(r)},e$.prototype.eachChild=function(r){for(var n=0,i=this.bindings;n<i.length;n+=1)r(i[n][1]);r(this.result)},e$.parse=function(r,n){if(r.length<4)return n.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var i=[],a=1;a<r.length-1;a+=2){var o=r[a];if("string"!=typeof o)return n.error("Expected string, but found "+typeof o+" instead.",a);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",a);var s=n.parse(r[a+1],a+1);if(!s)return null;i.push([o,s])}var l=n.parse(r[r.length-1],r.length-1,n.expectedType,i);return l?new e$(i,l):null},e$.prototype.outputDefined=function(){return this.result.outputDefined()},e$.prototype.serialize=function(){for(var r=["let"],n=0,i=this.bindings;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];r.push(o,s.serialize())}return r.push(this.result.serialize()),r};var eQ=function(r,n,i){this.type=r,this.index=n,this.input=i};eQ.parse=function(r,n){if(3!==r.length)return n.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tj),a=n.parse(r[2],2,tK(n.expectedType||tW));return i&&a?new eQ(a.type.itemType,i,a):null},eQ.prototype.evaluate=function(r){var n=this.index.evaluate(r),i=this.input.evaluate(r);if(n<0)throw new en("Array index out of bounds: "+n+" < 0.");if(n>=i.length)throw new en("Array index out of bounds: "+n+" > "+(i.length-1)+".");if(n!==Math.floor(n))throw new en("Array index must be an integer, but found "+n+" instead.");return i[n]},eQ.prototype.eachChild=function(r){r(this.index),r(this.input)},eQ.prototype.outputDefined=function(){return!1},eQ.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var e0=function(r,n){this.type=tH,this.needle=r,this.haystack=n};e0.parse=function(r,n){if(3!==r.length)return n.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tW),a=n.parse(r[2],2,tW);return i&&a?t0(i.type,[tH,tV,tj,tU,tW])?new e0(i,a):n.error("Expected first argument to be of type boolean, string, number or null, but found "+tJ(i.type)+" instead"):null},e0.prototype.evaluate=function(r){var n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(!i)return!1;if(!t1(n,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+tJ(et(n))+" instead.");if(!t1(i,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+tJ(et(i))+" instead.");return i.indexOf(n)>=0},e0.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},e0.prototype.outputDefined=function(){return!0},e0.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var e1=function(r,n,i){this.type=tj,this.needle=r,this.haystack=n,this.fromIndex=i};e1.parse=function(r,n){if(r.length<=2||r.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tW),a=n.parse(r[2],2,tW);if(!i||!a)return null;if(!t0(i.type,[tH,tV,tj,tU,tW]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+tJ(i.type)+" instead");if(4===r.length){var o=n.parse(r[3],3,tj);return o?new e1(i,a,o):null}return new e1(i,a)},e1.prototype.evaluate=function(r){var n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(!t1(n,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+tJ(et(n))+" instead.");if(!t1(i,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+tJ(et(i))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(r);return i.indexOf(n,a)}return i.indexOf(n)},e1.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},e1.prototype.outputDefined=function(){return!1},e1.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var e2=function(r,n,i,a,o,s){this.inputType=r,this.type=n,this.input=i,this.cases=a,this.outputs=o,this.otherwise=s};e2.parse=function(r,n){if(r.length<5)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return n.error("Expected an even number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var i,a,o={},s=[],l=2;l<r.length-1;l+=2){var c=r[l],u=r[l+1];Array.isArray(c)||(c=[c]);var f=n.concat(l);if(0===c.length)return f.error("Expected at least one branch label.");for(var h=0,p=c;h<p.length;h+=1){var d=p[h];if("number"!=typeof d&&"string"!=typeof d)return f.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return f.error("Numeric branch labels must be integer values.");if(i){if(f.checkSubtype(i,et(d)))return null}else i=et(d);if(void 0!==o[String(d)])return f.error("Branch labels must be unique.");o[String(d)]=s.length}var y=n.parse(u,l,a);if(!y)return null;a=a||y.type,s.push(y)}var g=n.parse(r[1],1,tW);if(!g)return null;var v=n.parse(r[r.length-1],r.length-1,a);return v?"value"!==g.type.kind&&n.concat(1).checkSubtype(i,g.type)?null:new e2(i,a,g,o,s,v):null},e2.prototype.evaluate=function(r){var n=this.input.evaluate(r);return(et(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(r)},e2.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},e2.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},e2.prototype.serialize=function(){for(var r=this,n=["match",this.input.serialize()],i=[],a={},o=0,s=Object.keys(this.cases).sort();o<s.length;o+=1){var l=s[o];void 0===(h=a[this.cases[l]])?(a[this.cases[l]]=i.length,i.push([this.cases[l],[l]])):i[h][1].push(l)}for(var c=function(n){return"number"===r.inputType.kind?Number(n):n},u=0;u<i.length;u+=1){var f=i[u],h=f[0],p=f[1];1===p.length?n.push(c(p[0])):n.push(p.map(c)),n.push(this.outputs[outputIndex$1].serialize())}return n.push(this.otherwise.serialize()),n};var e3=function(r,n,i){this.type=r,this.branches=n,this.otherwise=i};e3.parse=function(r,n){if(r.length<4)return n.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return n.error("Expected an odd number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var i,a=[],o=1;o<r.length-1;o+=2){var s=n.parse(r[o],o,tH);if(!s)return null;var l=n.parse(r[o+1],o+1,i);if(!l)return null;a.push([s,l]),i=i||l.type}var c=n.parse(r[r.length-1],r.length-1,i);return c?new e3(i,a,c):null},e3.prototype.evaluate=function(r){for(var n=0,i=this.branches;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];if(o.evaluate(r))return s.evaluate(r)}return this.otherwise.evaluate(r)},e3.prototype.eachChild=function(r){for(var n=0,i=this.branches;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];r(o),r(s)}r(this.otherwise)},e3.prototype.outputDefined=function(){return this.branches.every(function(r){return r[0],r[1].outputDefined()})&&this.otherwise.outputDefined()},e3.prototype.serialize=function(){var r=["case"];return this.eachChild(function(n){r.push(n.serialize())}),r};var e4=function(r,n,i,a){this.type=r,this.input=n,this.beginIndex=i,this.endIndex=a};function e6(r,n){return"=="===r||"!="===r?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function e5(r,n,i,a){return 0===a.compare(n,i)}function e8(r,n,i){var a="=="!==r&&"!="!==r;return function(){function o(r,n,i){this.type=tH,this.lhs=r,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===r.type.kind||"value"===n.type.kind}return o.parse=function(r,n){if(3!==r.length&&4!==r.length)return n.error("Expected two or three arguments.");var i=r[0],s=n.parse(r[1],1,tW);if(!s)return null;if(!e6(i,s.type))return n.concat(1).error('"'+i+"\" comparisons are not supported for type '"+tJ(s.type)+"'.");var l=n.parse(r[2],2,tW);if(!l)return null;if(!e6(i,l.type))return n.concat(2).error('"'+i+"\" comparisons are not supported for type '"+tJ(l.type)+"'.");if(s.type.kind!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error("Cannot compare types '"+tJ(s.type)+"' and '"+tJ(l.type)+"'.");a&&("value"===s.type.kind&&"value"!==l.type.kind?s=new ea(l.type,[s]):"value"!==s.type.kind&&"value"===l.type.kind&&(l=new ea(s.type,[l])));var c=null;if(4===r.length){if("string"!==s.type.kind&&"string"!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(c=n.parse(r[3],3,tY)))return null}return new o(s,l,c)},o.prototype.evaluate=function(o){var s=this.lhs.evaluate(o),l=this.rhs.evaluate(o);if(a&&this.hasUntypedArgument){var c=et(s),u=et(l);if(c.kind!==u.kind||"string"!==c.kind&&"number"!==c.kind)throw new en('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+c.kind+", "+u.kind+") instead.")}if(this.collator&&!a&&this.hasUntypedArgument){var f=et(s),h=et(l);if("string"!==f.kind||"string"!==h.kind)return n(o,s,l)}return this.collator?i(o,s,l,this.collator.evaluate(o)):n(o,s,l)},o.prototype.eachChild=function(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)},o.prototype.outputDefined=function(){return!0},o.prototype.serialize=function(){var n=[r];return this.eachChild(function(r){n.push(r.serialize())}),n},o}()}e4.parse=function(r,n){if(r.length<=2||r.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tW),a=n.parse(r[2],2,tj);if(!i||!a)return null;if(!t0(i.type,[tK(tW),tV,tW]))return n.error("Expected first argument to be of type array or string, but found "+tJ(i.type)+" instead");if(4===r.length){var o=n.parse(r[3],3,tj);return o?new e4(i.type,i,a,o):null}return new e4(i.type,i,a)},e4.prototype.evaluate=function(r){var n=this.input.evaluate(r),i=this.beginIndex.evaluate(r);if(!t1(n,["string","array"]))throw new en("Expected first argument to be of type array or string, but found "+tJ(et(n))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(r);return n.slice(i,a)}return n.slice(i)},e4.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},e4.prototype.outputDefined=function(){return!1},e4.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var e7=e8("==",function(r,n,i){return n===i},e5),e9=e8("!=",function(r,n,i){return n!==i},function(r,n,i,a){return!e5(0,n,i,a)}),rt=e8("<",function(r,n,i){return n<i},function(r,n,i,a){return 0>a.compare(n,i)}),re=e8(">",function(r,n,i){return n>i},function(r,n,i,a){return a.compare(n,i)>0}),rr=e8("<=",function(r,n,i){return n<=i},function(r,n,i,a){return 0>=a.compare(n,i)}),rn=e8(">=",function(r,n,i){return n>=i},function(r,n,i,a){return a.compare(n,i)>=0}),ri=function(r,n,i,a,o){this.type=tV,this.number=r,this.locale=n,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=o};ri.parse=function(r,n){if(3!==r.length)return n.error("Expected two arguments.");var i=n.parse(r[1],1,tj);if(!i)return null;var a=r[2];if("object"!=typeof a||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");var o=null;if(a.locale&&!(o=n.parse(a.locale,1,tV)))return null;var s=null;if(a.currency&&!(s=n.parse(a.currency,1,tV)))return null;var l=null;if(a["min-fraction-digits"]&&!(l=n.parse(a["min-fraction-digits"],1,tj)))return null;var c=null;return!a["max-fraction-digits"]||(c=n.parse(a["max-fraction-digits"],1,tj))?new ri(i,o,s,l,c):null},ri.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ri.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var ra=function(r){this.type=tj,this.input=r};ra.parse=function(r,n){if(2!==r.length)return n.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found "+tJ(i.type)+" instead."):new ra(i):null},ra.prototype.evaluate=function(r){var n=this.input.evaluate(r);if("string"==typeof n||Array.isArray(n))return n.length;throw new en("Expected value to be of type string or array, but found "+tJ(et(n))+" instead.")},ra.prototype.eachChild=function(r){r(this.input)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){var r=["length"];return this.eachChild(function(n){r.push(n.serialize())}),r};var ro={"==":e7,"!=":e9,">":re,"<":rt,">=":rn,"<=":rr,array:ea,at:eQ,boolean:ea,case:e3,coalesce:eJ,collator:ep,format:eo,image:es,in:e0,"index-of":e1,interpolate:eX,"interpolate-hcl":eX,"interpolate-lab":eX,length:ra,let:e$,literal:er,match:e2,number:ea,"number-format":ri,object:ea,slice:e4,step:eC,string:ea,"to-boolean":ec,"to-color":ec,"to-number":ec,"to-string":ec,var:eE,within:eA};function rs(r,n){var i=n[0],a=n[1],o=n[2],s=n[3];i=i.evaluate(r),a=a.evaluate(r),o=o.evaluate(r);var l=s?s.evaluate(r):1,c=t7(i,a,o,l);if(c)throw new en(c);return new t3(i/255*l,a/255*l,o/255*l,l)}function rl(r,n){var i=n[r];return void 0===i?null:i}function rc(r){return{type:r}}function ru(r){return{result:"success",value:r}}function rf(r){return{result:"error",value:r}}function rh(r){return"data-driven"===r["property-type"]||"cross-faded-data-driven"===r["property-type"]}function rp(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function rd(r){return!!r.expression&&r.expression.interpolated}function ry(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function rg(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function rv(r){return r}function rm(r,n,i){return void 0!==r?r:void 0!==n?n:void 0!==i?i:void 0}function rx(r,n,i,a,o){return rm(typeof i===o?a[i]:void 0,r.default,n.default)}function rb(r,n,i){if("number"!==ry(i))return rm(r.default,n.default);var a=r.stops.length;if(1===a||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[a-1][0])return r.stops[a-1][1];var o=eL(r.stops.map(function(r){return r[0]}),i);return r.stops[o][1]}function r_(r,n,i){var a,o,s,l=void 0!==r.base?r.base:1;if("number"!==ry(i))return rm(r.default,n.default);var c=r.stops.length;if(1===c||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[c-1][0])return r.stops[c-1][1];var u=eL(r.stops.map(function(r){return r[0]}),i),f=(a=r.stops[u][0],o=r.stops[u+1][0]-a,s=i-a,0===o?0:1===l?s/o:(Math.pow(l,s)-1)/(Math.pow(l,o)-1)),h=r.stops[u][1],p=r.stops[u+1][1],d=eD[n.type]||rv;if(r.colorSpace&&"rgb"!==r.colorSpace){var y=eZ[r.colorSpace];d=function(r,n){return y.reverse(y.interpolate(y.forward(r),y.forward(n),f))}}return"function"==typeof h.evaluate?{evaluate:function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var i=h.evaluate.apply(void 0,r),a=p.evaluate.apply(void 0,r);if(void 0!==i&&void 0!==a)return d(i,a,f)}}:d(h,p,f)}function rw(r,n,i){return"color"===n.type?i=t3.parse(i):"formatted"===n.type?i=t5.fromString(i.toString()):"resolvedImage"===n.type?i=t8.fromString(i.toString()):ry(i)===n.type||"enum"===n.type&&n.values[i]||(i=void 0),rm(i,r.default,n.default)}eh.register(ro,{error:[{kind:"error"},[tV],function(r,n){throw new en(n[0].evaluate(r))}],typeof:[tV,[tW],function(r,n){return tJ(et(n[0].evaluate(r)))}],"to-rgba":[tK(tj,4),[tq],function(r,n){return n[0].evaluate(r).toArray()}],rgb:[tq,[tj,tj,tj],rs],rgba:[tq,[tj,tj,tj,tj],rs],has:{type:tH,overloads:[[[tV],function(r,n){return n[0].evaluate(r) in r.properties()}],[[tV,tG],function(r,n){var i=n[0],a=n[1];return i.evaluate(r) in a.evaluate(r)}]]},get:{type:tW,overloads:[[[tV],function(r,n){return rl(n[0].evaluate(r),r.properties())}],[[tV,tG],function(r,n){var i=n[0],a=n[1];return rl(i.evaluate(r),a.evaluate(r))}]]},"feature-state":[tW,[tV],function(r,n){return rl(n[0].evaluate(r),r.featureState||{})}],properties:[tG,[],function(r){return r.properties()}],"geometry-type":[tV,[],function(r){return r.geometryType()}],id:[tW,[],function(r){return r.id()}],zoom:[tj,[],function(r){return r.globals.zoom}],"heatmap-density":[tj,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[tj,[],function(r){return r.globals.lineProgress||0}],accumulated:[tW,[],function(r){return void 0===r.globals.accumulated?null:r.globals.accumulated}],"+":[tj,rc(tj),function(r,n){for(var i=0,a=0;a<n.length;a+=1)i+=n[a].evaluate(r);return i}],"*":[tj,rc(tj),function(r,n){for(var i=1,a=0;a<n.length;a+=1)i*=n[a].evaluate(r);return i}],"-":{type:tj,overloads:[[[tj,tj],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)-a.evaluate(r)}],[[tj],function(r,n){return-n[0].evaluate(r)}]]},"/":[tj,[tj,tj],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)/a.evaluate(r)}],"%":[tj,[tj,tj],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)%a.evaluate(r)}],ln2:[tj,[],function(){return Math.LN2}],pi:[tj,[],function(){return Math.PI}],e:[tj,[],function(){return Math.E}],"^":[tj,[tj,tj],function(r,n){var i=n[0],a=n[1];return Math.pow(i.evaluate(r),a.evaluate(r))}],sqrt:[tj,[tj],function(r,n){return Math.sqrt(n[0].evaluate(r))}],log10:[tj,[tj],function(r,n){return Math.log(n[0].evaluate(r))/Math.LN10}],ln:[tj,[tj],function(r,n){return Math.log(n[0].evaluate(r))}],log2:[tj,[tj],function(r,n){return Math.log(n[0].evaluate(r))/Math.LN2}],sin:[tj,[tj],function(r,n){return Math.sin(n[0].evaluate(r))}],cos:[tj,[tj],function(r,n){return Math.cos(n[0].evaluate(r))}],tan:[tj,[tj],function(r,n){return Math.tan(n[0].evaluate(r))}],asin:[tj,[tj],function(r,n){return Math.asin(n[0].evaluate(r))}],acos:[tj,[tj],function(r,n){return Math.acos(n[0].evaluate(r))}],atan:[tj,[tj],function(r,n){return Math.atan(n[0].evaluate(r))}],min:[tj,rc(tj),function(r,n){return Math.min.apply(Math,n.map(function(n){return n.evaluate(r)}))}],max:[tj,rc(tj),function(r,n){return Math.max.apply(Math,n.map(function(n){return n.evaluate(r)}))}],abs:[tj,[tj],function(r,n){return Math.abs(n[0].evaluate(r))}],round:[tj,[tj],function(r,n){var i=n[0].evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[tj,[tj],function(r,n){return Math.floor(n[0].evaluate(r))}],ceil:[tj,[tj],function(r,n){return Math.ceil(n[0].evaluate(r))}],"filter-==":[tH,[tV,tW],function(r,n){var i=n[0],a=n[1];return r.properties()[i.value]===a.value}],"filter-id-==":[tH,[tW],function(r,n){var i=n[0];return r.id()===i.value}],"filter-type-==":[tH,[tV],function(r,n){var i=n[0];return r.geometryType()===i.value}],"filter-<":[tH,[tV,tW],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o<s}],"filter-id-<":[tH,[tW],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a<o}],"filter->":[tH,[tV,tW],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o>s}],"filter-id->":[tH,[tW],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a>o}],"filter-<=":[tH,[tV,tW],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o<=s}],"filter-id-<=":[tH,[tW],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a<=o}],"filter->=":[tH,[tV,tW],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o>=s}],"filter-id->=":[tH,[tW],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a>=o}],"filter-has":[tH,[tW],function(r,n){return n[0].value in r.properties()}],"filter-has-id":[tH,[],function(r){return null!==r.id()&&void 0!==r.id()}],"filter-type-in":[tH,[tK(tV)],function(r,n){return n[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[tH,[tK(tW)],function(r,n){return n[0].value.indexOf(r.id())>=0}],"filter-in-small":[tH,[tV,tK(tW)],function(r,n){var i=n[0];return n[1].value.indexOf(r.properties()[i.value])>=0}],"filter-in-large":[tH,[tV,tK(tW)],function(r,n){var i=n[0],a=n[1];return function(r,n,i,a){for(;i<=a;){var o=i+a>>1;if(n[o]===r)return!0;n[o]>r?a=o-1:i=o+1}return!1}(r.properties()[i.value],a.value,0,a.value.length-1)}],all:{type:tH,overloads:[[[tH,tH],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)&&a.evaluate(r)}],[rc(tH),function(r,n){for(var i=0;i<n.length;i+=1)if(!n[i].evaluate(r))return!1;return!0}]]},any:{type:tH,overloads:[[[tH,tH],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)||a.evaluate(r)}],[rc(tH),function(r,n){for(var i=0;i<n.length;i+=1)if(n[i].evaluate(r))return!0;return!1}]]},"!":[tH,[tH],function(r,n){return!n[0].evaluate(r)}],"is-supported-script":[tH,[tV],function(r,n){var i=n[0],a=r.globals&&r.globals.isSupportedScript;return!a||a(i.evaluate(r))}],upcase:[tV,[tV],function(r,n){return n[0].evaluate(r).toUpperCase()}],downcase:[tV,[tV],function(r,n){return n[0].evaluate(r).toLowerCase()}],concat:[tV,rc(tW),function(r,n){return n.map(function(n){return ee(n.evaluate(r))}).join("")}],"resolved-locale":[tV,[tY],function(r,n){return n[0].evaluate(r).resolvedLocale()}]});var rT=function(r,n){this.expression=r,this._warningHistory={},this._evaluator=new ef,this._defaultValue=n?"color"===n.type&&rg(n.default)?new t3(0,0,0,0):"color"===n.type?t3.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=n&&"enum"===n.type?n.values:null};function rA(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in ro}function rk(r,n){var i,a=new eI(ro,[],n?(i={color:tq,string:tV,number:tj,enum:tV,boolean:tH,formatted:tZ,resolvedImage:tX},"array"===n.type?tK(i[n.value]||tW,n.length):i[n.type]):void 0),o=a.parse(r,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return o?ru(new rT(o,n)):rf(a.errors)}rT.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._evaluator.globals=r,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)},rT.prototype.evaluate=function(r,n,i,a,o,s){this._evaluator.globals=r,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new en("Expected value to be one of "+Object.keys(this._enumValues).map(function(r){return JSON.stringify(r)}).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l}catch(r){return this._warningHistory[r.message]||(this._warningHistory[r.message]=!0,"undefined"!=typeof console&&console.warn(r.message)),this._defaultValue}};var rM=function(r,n){this.kind=r,this._styleExpression=n,this.isStateDependent="constant"!==r&&!eM(n.expression)};rM.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,a,o,s)},rM.prototype.evaluate=function(r,n,i,a,o,s){return this._styleExpression.evaluate(r,n,i,a,o,s)};var rS=function(r,n,i,a){this.kind=r,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==r&&!eM(n.expression),this.interpolationType=a};function rE(r,n){if("error"===(r=rk(r,n)).result)return r;var i=r.value.expression,a=ek(i);if(!a&&!rh(n))return rf([new tF("","data expressions not supported")]);var o=eS(i,["zoom"]);if(!o&&!rp(n))return rf([new tF("","zoom expressions not supported")]);var s=function r(n){var i=null;if(n instanceof e$)i=r(n.result);else if(n instanceof eJ)for(var a=0,o=n.args;a<o.length&&!(i=r(o[a]));a+=1);else(n instanceof eC||n instanceof eX)&&n.input instanceof eh&&"zoom"===n.input.name&&(i=n);return i instanceof tF||n.eachChild(function(n){var a=r(n);a instanceof tF?i=a:!i&&a?i=new tF("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&a&&i!==a&&(i=new tF("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);if(!s&&!o)return rf([new tF("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof tF)return rf([s]);if(s instanceof eX&&!rd(n))return rf([new tF("",'"interpolate" expressions cannot be used with this property')]);if(!s)return ru(new rM(a?"constant":"source",r.value));var l=s instanceof eX?s.interpolation:void 0;return ru(new rS(a?"camera":"composite",r.value,s.labels,l))}rS.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,a,o,s)},rS.prototype.evaluate=function(r,n,i,a,o,s){return this._styleExpression.evaluate(r,n,i,a,o,s)},rS.prototype.interpolationFactor=function(r,n,i){return this.interpolationType?eX.interpolationFactor(this.interpolationType,r,n,i):0};var rI=function(r,n){this._parameters=r,this._specification=n,tB(this,function r(n,i){var a,o,s,l="color"===i.type,c=n.stops&&"object"==typeof n.stops[0][0],u=c||void 0!==n.property,f=n.type||(rd(i)?"exponential":"interval");if(l&&((n=tB({},n)).stops&&(n.stops=n.stops.map(function(r){return[r[0],t3.parse(r[1])]})),n.default?n.default=t3.parse(n.default):n.default=t3.parse(i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!eZ[n.colorSpace])throw Error("Unknown color space: "+n.colorSpace);if("exponential"===f)a=r_;else if("interval"===f)a=rb;else if("categorical"===f){a=rx,o=Object.create(null);for(var h=0,p=n.stops;h<p.length;h+=1){var d=p[h];o[d[0]]=d[1]}s=typeof n.stops[0][0]}else{if("identity"!==f)throw Error('Unknown function type "'+f+'"');a=rw}if(c){for(var y={},g=[],v=0;v<n.stops.length;v++){var m=n.stops[v],x=m[0].zoom;void 0===y[x]&&(y[x]={zoom:x,type:n.type,property:n.property,default:n.default,stops:[]},g.push(x)),y[x].stops.push([m[0].value,m[1]])}for(var b=[],_=0;_<g.length;_+=1){var w=g[_];b.push([y[w].zoom,r(y[w],i)])}var T={name:"linear"};return{kind:"composite",interpolationType:T,interpolationFactor:eX.interpolationFactor.bind(void 0,T),zoomStops:b.map(function(r){return r[0]}),evaluate:function(r,a){var o=r.zoom;return r_({stops:b,base:n.base},i,o).evaluate(o,a)}}}if(c||!u){var A="exponential"===f?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:eX.interpolationFactor.bind(void 0,A),zoomStops:n.stops.map(function(r){return r[0]}),evaluate:function(r){var l=r.zoom;return a(n,i,l,o,s)}}}return{kind:"source",evaluate:function(r,l){var c=l&&l.properties?l.properties[n.property]:void 0;return void 0===c?rm(n.default,i.default):a(n,i,c,o,s)}}}(this._parameters,this._specification))};function rL(r){var n=r.key,i=r.value,a=r.valueSpec||{},o=r.objectElementValidators||{},s=r.style,l=r.styleSpec,c=[],u=ry(i);if("object"!==u)return[new tD(n,i,"object expected, "+u+" found")];for(var f in i){var h=f.split(".")[0],p=a[h]||a["*"],d=void 0;if(o[h])d=o[h];else if(a[h])d=r0;else if(o["*"])d=o["*"];else{if(!a["*"]){c.push(new tD(n,i[f],'unknown property "'+f+'"'));continue}d=r0}c=c.concat(d({key:(n?n+".":n)+f,value:i[f],valueSpec:p,style:s,styleSpec:l,object:i,objectKey:f},i))}for(var y in a)o[y]||a[y].required&&void 0===a[y].default&&void 0===i[y]&&c.push(new tD(n,i,'missing required property "'+y+'"'));return c}function rC(r){var n=r.value,i=r.valueSpec,a=r.style,o=r.styleSpec,s=r.key,l=r.arrayElementValidator||r0;if("array"!==ry(n))return[new tD(s,n,"array expected, "+ry(n)+" found")];if(i.length&&n.length!==i.length)return[new tD(s,n,"array length "+i.length+" expected, length "+n.length+" found")];if(i["min-length"]&&n.length<i["min-length"])return[new tD(s,n,"array length at least "+i["min-length"]+" expected, length "+n.length+" found")];var c={type:i.value,values:i.values};o.$version<7&&(c.function=i.function),"object"===ry(i.value)&&(c=i.value);for(var u=[],f=0;f<n.length;f++)u=u.concat(l({array:n,arrayIndex:f,value:n[f],valueSpec:c,style:a,styleSpec:o,key:s+"["+f+"]"}));return u}function rO(r){var n=r.key,i=r.value,a=r.valueSpec,o=ry(i);return"number"===o&&i!=i&&(o="NaN"),"number"!==o?[new tD(n,i,"number expected, "+o+" found")]:"minimum"in a&&i<a.minimum?[new tD(n,i,i+" is less than the minimum value "+a.minimum)]:"maximum"in a&&i>a.maximum?[new tD(n,i,i+" is greater than the maximum value "+a.maximum)]:[]}function rD(r){var n,i,a,o=r.valueSpec,s=tR(r.value.type),l={},c="categorical"!==s&&void 0===r.value.property,u="array"===ry(r.value.stops)&&"array"===ry(r.value.stops[0])&&"object"===ry(r.value.stops[0][0]),f=rL({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(r){if("identity"===s)return[new tD(r.key,r.value,'identity function may not have a "stops" property')];var n=[],i=r.value;return n=n.concat(rC({key:r.key,value:i,valueSpec:r.valueSpec,style:r.style,styleSpec:r.styleSpec,arrayElementValidator:h})),"array"===ry(i)&&0===i.length&&n.push(new tD(r.key,i,"array must have at least one stop")),n},default:function(r){return r0({key:r.key,value:r.value,valueSpec:o,style:r.style,styleSpec:r.styleSpec})}}});return"identity"===s&&c&&f.push(new tD(r.key,r.value,'missing required property "property"')),"identity"===s||r.value.stops||f.push(new tD(r.key,r.value,'missing required property "stops"')),"exponential"===s&&r.valueSpec.expression&&!rd(r.valueSpec)&&f.push(new tD(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(c||rh(r.valueSpec)?c&&!rp(r.valueSpec)&&f.push(new tD(r.key,r.value,"zoom functions not supported")):f.push(new tD(r.key,r.value,"property functions not supported"))),("categorical"===s||u)&&void 0===r.value.property&&f.push(new tD(r.key,r.value,'"property" property is required')),f;function h(r){var n=[],s=r.value,c=r.key;if("array"!==ry(s))return[new tD(c,s,"array expected, "+ry(s)+" found")];if(2!==s.length)return[new tD(c,s,"array length 2 expected, length "+s.length+" found")];if(u){if("object"!==ry(s[0]))return[new tD(c,s,"object expected, "+ry(s[0])+" found")];if(void 0===s[0].zoom)return[new tD(c,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new tD(c,s,"object stop key must have value")];if(a&&a>tR(s[0].zoom))return[new tD(c,s[0].zoom,"stop zoom values must appear in ascending order")];tR(s[0].zoom)!==a&&(a=tR(s[0].zoom),i=void 0,l={}),n=n.concat(rL({key:c+"[0]",value:s[0],valueSpec:{zoom:{}},style:r.style,styleSpec:r.styleSpec,objectElementValidators:{zoom:rO,value:p}}))}else n=n.concat(p({key:c+"[0]",value:s[0],valueSpec:{},style:r.style,styleSpec:r.styleSpec},s));return rA(tz(s[1]))?n.concat([new tD(c+"[1]",s[1],"expressions are not allowed in function stops.")]):n.concat(r0({key:c+"[1]",value:s[1],valueSpec:o,style:r.style,styleSpec:r.styleSpec}))}function p(r,a){var c=ry(r.value),u=tR(r.value),f=null!==r.value?r.value:a;if(n){if(c!==n)return[new tD(r.key,f,c+" stop domain type must match previous stop domain type "+n)]}else n=c;if("number"!==c&&"string"!==c&&"boolean"!==c)return[new tD(r.key,f,"stop domain value must be a number, string, or boolean")];if("number"!==c&&"categorical"!==s){var h="number expected, "+c+" found";return rh(o)&&void 0===s&&(h+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tD(r.key,f,h)]}return"categorical"!==s||"number"!==c||isFinite(u)&&Math.floor(u)===u?"categorical"!==s&&"number"===c&&void 0!==i&&u<i?[new tD(r.key,f,"stop domain values must appear in ascending order")]:(i=u,"categorical"===s&&u in l?[new tD(r.key,f,"stop domain values must be unique")]:(l[u]=!0,[])):[new tD(r.key,f,"integer expected, found "+u)]}}function rP(r){var n=("property"===r.expressionContext?rE:rk)(tz(r.value),r.valueSpec);if("error"===n.result)return n.value.map(function(n){return new tD(""+r.key+n.key,r.value,n.message)});var i=n.value.expression||n.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!i.outputDefined())return[new tD(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===r.expressionContext&&"layout"===r.propertyType&&!eM(i))return[new tD(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext&&!eM(i))return[new tD(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!eS(i,["zoom","feature-state"]))return[new tD(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!ek(i))return[new tD(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rB(r){var n=r.key,i=r.value,a=r.valueSpec,o=[];return Array.isArray(a.values)?-1===a.values.indexOf(tR(i))&&o.push(new tD(n,i,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(a.values).indexOf(tR(i))&&o.push(new tD(n,i,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(i)+" found")),o}function rR(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var n=0,i=r.slice(1);n<i.length;n+=1){var a=i[n];if(!rR(a)&&"boolean"!=typeof a)return!1}return!0;default:return!0}}rI.deserialize=function(r){return new rI(r._parameters,r._specification)},rI.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var rz={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rF(r){if(null==r)return{filter:function(){return!0},needGeometry:!1};rR(r)||(r=function r(n){if(!n)return!0;var i=n[0];return n.length<=1?"any"!==i:"=="===i?rU(n[1],n[2],"=="):"!="===i?rH(rU(n[1],n[2],"==")):"<"===i||">"===i||"<="===i||">="===i?rU(n[1],n[2],i):"any"===i?["any"].concat(n.slice(1).map(r)):"all"===i?["all"].concat(n.slice(1).map(r)):"none"===i?["all"].concat(n.slice(1).map(r).map(rH)):"in"===i?rj(n[1],n.slice(2)):"!in"===i?rH(rj(n[1],n.slice(2))):"has"===i?rV(n[1]):"!has"===i?rH(rV(n[1])):"within"!==i||n}(r));var n=rk(r,rz);if("error"===n.result)throw Error(n.value.map(function(r){return r.key+": "+r.message}).join(", "));return{filter:function(r,i,a){return n.value.evaluate(r,i,{},a)},needGeometry:function r(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(var i=1;i<n.length;i++)if(r(n[i]))return!0;return!1}(r)}}function rN(r,n){return r<n?-1:r>n?1:0}function rU(r,n,i){switch(r){case"$type":return["filter-type-"+i,n];case"$id":return["filter-id-"+i,n];default:return["filter-"+i,r,n]}}function rj(r,n){if(0===n.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(function(r){return typeof r!=typeof n[0]})?["filter-in-large",r,["literal",n.sort(rN)]]:["filter-in-small",r,["literal",n]]}}function rV(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function rH(r){return["!",r]}function rq(r){return rR(tz(r.value))?rP(tB({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(n){var i=n.value,a=n.key;if("array"!==ry(i))return[new tD(a,i,"array expected, "+ry(i)+" found")];var o,s=n.styleSpec,l=[];if(i.length<1)return[new tD(a,i,"filter array must have at least 1 element")];switch(l=l.concat(rB({key:a+"[0]",value:i[0],valueSpec:s.filter_operator,style:n.style,styleSpec:n.styleSpec})),tR(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===tR(i[1])&&l.push(new tD(a,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&l.push(new tD(a,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(o=ry(i[1]))&&l.push(new tD(a+"[1]",i[1],"string expected, "+o+" found"));for(var c=2;c<i.length;c++)o=ry(i[c]),"$type"===tR(i[1])?l=l.concat(rB({key:a+"["+c+"]",value:i[c],valueSpec:s.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&l.push(new tD(a+"["+c+"]",i[c],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var u=1;u<i.length;u++)l=l.concat(r({key:a+"["+u+"]",value:i[u],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":o=ry(i[1]),2!==i.length?l.push(new tD(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==o&&l.push(new tD(a+"[1]",i[1],"string expected, "+o+" found"));break;case"within":o=ry(i[1]),2!==i.length?l.push(new tD(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==o&&l.push(new tD(a+"[1]",i[1],"object expected, "+o+" found"))}return l}(r)}function rG(r,n){var i=r.key,a=r.style,o=r.styleSpec,s=r.value,l=r.objectKey,c=o[n+"_"+r.layerType];if(!c)return[];var u=l.match(/^(.*)-transition$/);if("paint"===n&&u&&c[u[1]]&&c[u[1]].transition)return r0({key:i,value:s,valueSpec:o.transition,style:a,styleSpec:o});var f,h=r.valueSpec||c[l];if(!h)return[new tD(i,s,'unknown property "'+l+'"')];if("string"===ry(s)&&rh(h)&&!h.tokens&&(f=/^{([^}]+)}$/.exec(s)))return[new tD(i,s,'"'+l+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(f[1])+" }`.")];var p=[];return"symbol"===r.layerType&&("text-field"===l&&a&&!a.glyphs&&p.push(new tD(i,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&rg(tz(s))&&"identity"===tR(s.type)&&p.push(new tD(i,s,'"text-font" does not support identity functions'))),p.concat(r0({key:r.key,value:s,valueSpec:h,style:a,styleSpec:o,expressionContext:"property",propertyType:n,propertyKey:l}))}function rW(r){return rG(r,"paint")}function rY(r){return rG(r,"layout")}function rZ(r){var n=[],i=r.value,a=r.key,o=r.style,s=r.styleSpec;i.type||i.ref||n.push(new tD(a,i,'either "type" or "ref" is required'));var l,c=tR(i.type),u=tR(i.ref);if(i.id)for(var f=tR(i.id),h=0;h<r.arrayIndex;h++){var p=o.layers[h];tR(p.id)===f&&n.push(new tD(a,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(r){r in i&&n.push(new tD(a,i[r],'"'+r+'" is prohibited for ref layers'))}),o.layers.forEach(function(r){tR(r.id)===u&&(l=r)}),l?l.ref?n.push(new tD(a,i.ref,"ref cannot reference another ref layer")):c=tR(l.type):n.push(new tD(a,i.ref,'ref layer "'+u+'" not found'));else if("background"!==c){if(i.source){var d=o.sources&&o.sources[i.source],y=d&&tR(d.type);d?"vector"===y&&"raster"===c?n.push(new tD(a,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===y&&"raster"!==c?n.push(new tD(a,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==y||i["source-layer"]?"raster-dem"===y&&"hillshade"!==c?n.push(new tD(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===c&&i.paint&&i.paint["line-gradient"]&&("geojson"!==y||!d.lineMetrics)&&n.push(new tD(a,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):n.push(new tD(a,i,'layer "'+i.id+'" must specify a "source-layer"')):n.push(new tD(a,i.source,'source "'+i.source+'" not found'))}else n.push(new tD(a,i,'missing required property "source"'))}return n=n.concat(rL({key:a,value:i,valueSpec:s.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return r0({key:a+".type",value:i.type,valueSpec:s.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"})},filter:rq,layout:function(r){return rL({layer:i,key:r.key,value:r.value,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(r){return rY(tB({layerType:c},r))}}})},paint:function(r){return rL({layer:i,key:r.key,value:r.value,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(r){return rW(tB({layerType:c},r))}}})}}}))}function rX(r){var n=r.value,i=r.key,a=ry(n);return"string"!==a?[new tD(i,n,"string expected, "+a+" found")]:[]}var rK={promoteId:function(r){var n=r.key,i=r.value;if("string"===ry(i))return rX({key:n,value:i});var a=[];for(var o in i)a.push.apply(a,rX({key:n+"."+o,value:i[o]}));return a}};function rJ(r){var n=r.value,i=r.key,a=r.styleSpec,o=r.style;if(!n.type)return[new tD(i,n,'"type" is required')];var s,l=tR(n.type);switch(l){case"vector":case"raster":case"raster-dem":return rL({key:i,value:n,valueSpec:a["source_"+l.replace("-","_")],style:r.style,styleSpec:a,objectElementValidators:rK});case"geojson":if(s=rL({key:i,value:n,valueSpec:a.source_geojson,style:o,styleSpec:a,objectElementValidators:rK}),n.cluster)for(var c in n.clusterProperties){var u=n.clusterProperties[c],f=u[0],h=u[1],p="string"==typeof f?[f,["accumulated"],["get",c]]:f;s.push.apply(s,rP({key:i+"."+c+".map",value:h,expressionContext:"cluster-map"})),s.push.apply(s,rP({key:i+"."+c+".reduce",value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return rL({key:i,value:n,valueSpec:a.source_video,style:o,styleSpec:a});case"image":return rL({key:i,value:n,valueSpec:a.source_image,style:o,styleSpec:a});case"canvas":return[new tD(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rB({key:i+".type",value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,styleSpec:a})}}function r$(r){var n=r.value,i=r.styleSpec,a=i.light,o=r.style,s=[],l=ry(n);if(void 0===n)return s;if("object"!==l)return s.concat([new tD("light",n,"object expected, "+l+" found")]);for(var c in n){var u=c.match(/^(.*)-transition$/);s=u&&a[u[1]]&&a[u[1]].transition?s.concat(r0({key:c,value:n[c],valueSpec:i.transition,style:o,styleSpec:i})):a[c]?s.concat(r0({key:c,value:n[c],valueSpec:a[c],style:o,styleSpec:i})):s.concat([new tD(c,n[c],'unknown property "'+c+'"')])}return s}var rQ={"*":function(){return[]},array:rC,boolean:function(r){var n=r.value,i=r.key,a=ry(n);return"boolean"!==a?[new tD(i,n,"boolean expected, "+a+" found")]:[]},number:rO,color:function(r){var n=r.key,i=r.value,a=ry(i);return"string"!==a?[new tD(n,i,"color expected, "+a+" found")]:null===t2(i)?[new tD(n,i,'color expected, "'+i+'" found')]:[]},constants:tP,enum:rB,filter:rq,function:rD,layer:rZ,object:rL,source:rJ,light:r$,string:rX,formatted:function(r){return 0===rX(r).length?[]:rP(r)},resolvedImage:function(r){return 0===rX(r).length?[]:rP(r)}};function r0(r){var n=r.value,i=r.valueSpec,a=r.styleSpec;return i.expression&&rg(tR(n))?rD(r):i.expression&&rA(tz(n))?rP(r):i.type&&rQ[i.type]?rQ[i.type](r):rL(tB({},r,{valueSpec:i.type?a[i.type]:i}))}function r1(r){var n=r.value,i=r.key,a=rX(r);return a.length||(-1===n.indexOf("{fontstack}")&&a.push(new tD(i,n,'"glyphs" url must include a "{fontstack}" token')),-1===n.indexOf("{range}")&&a.push(new tD(i,n,'"glyphs" url must include a "{range}" token'))),a}function r2(r,n){void 0===n&&(n=tO);var i=[];return i=i.concat(r0({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,objectElementValidators:{glyphs:r1,"*":function(){return[]}}})),r.constants&&(i=i.concat(tP({key:"constants",value:r.constants,style:r,styleSpec:n}))),r3(i)}function r3(r){return[].concat(r).sort(function(r,n){return r.line-n.line})}function r4(r){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return r3(r.apply(this,n))}}r2.source=r4(rJ),r2.light=r4(r$),r2.layer=r4(rZ),r2.filter=r4(rq),r2.paintProperty=r4(rW),r2.layoutProperty=r4(rY);var r6=r2.light,r5=r2.paintProperty,r8=r2.layoutProperty;function r7(r,n){var i=!1;if(n&&n.length)for(var a=0;a<n.length;a+=1){var o=n[a];r.fire(new tL(Error(o.message))),i=!0}return i}function r9(r,n,i){var a=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var o=new Int32Array(this.arrayBuffer);r=o[0],n=o[1],i=o[2],this.d=n+2*i;for(var s=0;s<this.d*this.d;s++){var l=o[3+s],c=o[3+s+1];a.push(l===c?null:o.subarray(l,c))}var u=o[3+a.length],f=o[3+a.length+1];this.keys=o.subarray(u,f),this.bboxes=o.subarray(f),this.insert=this._insertReadonly}else{this.d=n+2*i;for(var h=0;h<this.d*this.d;h++)a.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=r,this.padding=i,this.scale=n/r,this.uid=0;var p=i/n*r;this.min=-p,this.max=r+p}r9.prototype.insert=function(r,n,i,a,o){this._forEachCell(n,i,a,o,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o)},r9.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r9.prototype._insertCell=function(r,n,i,a,o,s){this.cells[o].push(s)},r9.prototype.query=function(r,n,i,a,o){var s=this.min,l=this.max;if(r<=s&&n<=s&&l<=i&&l<=a&&!o)return Array.prototype.slice.call(this.keys);var c=[];return this._forEachCell(r,n,i,a,this._queryCell,c,{},o),c},r9.prototype._queryCell=function(r,n,i,a,o,s,l,c){var u=this.cells[o];if(null!==u)for(var f=this.keys,h=this.bboxes,p=0;p<u.length;p++){var d=u[p];if(void 0===l[d]){var y=4*d;(c?c(h[y+0],h[y+1],h[y+2],h[y+3]):r<=h[y+2]&&n<=h[y+3]&&i>=h[y+0]&&a>=h[y+1])?(l[d]=!0,s.push(f[d])):l[d]=!1}}},r9.prototype._forEachCell=function(r,n,i,a,o,s,l,c){for(var u=this._convertToCellCoord(r),f=this._convertToCellCoord(n),h=this._convertToCellCoord(i),p=this._convertToCellCoord(a),d=u;d<=h;d++)for(var y=f;y<=p;y++){var g=this.d*y+d;if((!c||c(this._convertFromCellCoord(d),this._convertFromCellCoord(y),this._convertFromCellCoord(d+1),this._convertFromCellCoord(y+1)))&&o.call(this,r,n,i,a,g,s,l,c))return}},r9.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},r9.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},r9.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,n=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var o=new Int32Array(n+i+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=n,l=0;l<r.length;l++){var c=r[l];o[3+l]=s,o.set(c,s),s+=c.length}return o[3+r.length]=s,o.set(this.keys,s),s+=this.keys.length,o[3+r.length+1]=s,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer};var nt=u.ImageData,ne=u.ImageBitmap,nr={};function nn(r,n,i){void 0===i&&(i={}),Object.defineProperty(n,"_classRegistryKey",{value:r,writeable:!1}),nr[r]={klass:n,omit:i.omit||[],shallow:i.shallow||[]}}for(var ni in nn("Object",Object),r9.serialize=function(r,n){var i=r.toArrayBuffer();return n&&n.push(i),{buffer:i}},r9.deserialize=function(r){return new r9(r.buffer)},nn("Grid",r9),nn("Color",t3),nn("Error",Error),nn("ResolvedImage",t8),nn("StylePropertyFunction",rI),nn("StyleExpression",rT,{omit:["_evaluator"]}),nn("ZoomDependentExpression",rS),nn("ZoomConstantExpression",rM),nn("CompoundExpression",eh,{omit:["_evaluate"]}),ro)ro[ni]._classRegistryKey||nn("Expression_"+ni,ro[ni]);function na(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function no(r){return ne&&r instanceof ne}function ns(r,n){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(na(r)||no(r))return n&&n.push(r),r;if(ArrayBuffer.isView(r))return n&&n.push(r.buffer),r;if(r instanceof nt)return n&&n.push(r.data.buffer),r;if(Array.isArray(r)){for(var i=[],a=0;a<r.length;a+=1){var o=r[a];i.push(ns(o,n))}return i}if("object"==typeof r){var s=r.constructor,l=s._classRegistryKey;if(!l)throw Error("can't serialize object of unregistered class");var c=s.serialize?s.serialize(r,n):{};if(!s.serialize){for(var u in r)if(r.hasOwnProperty(u)&&!(nr[l].omit.indexOf(u)>=0)){var f=r[u];c[u]=nr[l].shallow.indexOf(u)>=0?f:ns(f,n)}r instanceof Error&&(c.message=r.message)}if(c.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(c.$name=l),c}throw Error("can't serialize object of type "+typeof r)}function nl(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||na(r)||no(r)||ArrayBuffer.isView(r)||r instanceof nt)return r;if(Array.isArray(r))return r.map(nl);if("object"==typeof r){var n=r.$name||"Object",i=nr[n].klass;if(!i)throw Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r);for(var a=Object.create(i.prototype),o=0,s=Object.keys(r);o<s.length;o+=1){var l=s[o];if("$name"!==l){var c=r[l];a[l]=nr[n].shallow.indexOf(l)>=0?c:nl(c)}}return a}throw Error("can't deserialize object of type "+typeof r)}var nc=function(){this.first=!0};nc.prototype.update=function(r,n){var i=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=n),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=i,!0))};var nu={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function nf(r){for(var n=0;n<r.length;n+=1)if(nh(r[n].charCodeAt(0)))return!0;return!1}function nh(r){return!(746!==r&&747!==r&&(r<4352||!(nu["Bopomofo Extended"](r)||nu.Bopomofo(r)||nu["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||nu["CJK Compatibility Ideographs"](r)||nu["CJK Compatibility"](r)||nu["CJK Radicals Supplement"](r)||nu["CJK Strokes"](r)||!(!nu["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||nu["CJK Unified Ideographs Extension A"](r)||nu["CJK Unified Ideographs"](r)||nu["Enclosed CJK Letters and Months"](r)||nu["Hangul Compatibility Jamo"](r)||nu["Hangul Jamo Extended-A"](r)||nu["Hangul Jamo Extended-B"](r)||nu["Hangul Jamo"](r)||nu["Hangul Syllables"](r)||nu.Hiragana(r)||nu["Ideographic Description Characters"](r)||nu.Kanbun(r)||nu["Kangxi Radicals"](r)||nu["Katakana Phonetic Extensions"](r)||nu.Katakana(r)&&12540!==r||!(!nu["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!nu["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||nu["Unified Canadian Aboriginal Syllabics"](r)||nu["Unified Canadian Aboriginal Syllabics Extended"](r)||nu["Vertical Forms"](r)||nu["Yijing Hexagram Symbols"](r)||nu["Yi Syllables"](r)||nu["Yi Radicals"](r))))}function np(r){return!(nh(r)||nu["Latin-1 Supplement"](r)&&(167===r||169===r||174===r||177===r||188===r||189===r||190===r||215===r||247===r)||nu["General Punctuation"](r)&&(8214===r||8224===r||8225===r||8240===r||8241===r||8251===r||8252===r||8258===r||8263===r||8264===r||8265===r||8273===r)||nu["Letterlike Symbols"](r)||nu["Number Forms"](r)||nu["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||9003===r||r>=9085&&r<=9114||r>=9150&&r<=9165||9167===r||r>=9169&&r<=9179||r>=9186&&r<=9215)||nu["Control Pictures"](r)&&9251!==r||nu["Optical Character Recognition"](r)||nu["Enclosed Alphanumerics"](r)||nu["Geometric Shapes"](r)||nu["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||nu["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nu["CJK Symbols and Punctuation"](r)||nu.Katakana(r)||nu["Private Use Area"](r)||nu["CJK Compatibility Forms"](r)||nu["Small Form Variants"](r)||nu["Halfwidth and Fullwidth Forms"](r)||8734===r||8756===r||8757===r||r>=9984&&r<=10087||r>=10102&&r<=10131||65532===r||65533===r)}function nd(r){return r>=1424&&r<=2303||nu["Arabic Presentation Forms-A"](r)||nu["Arabic Presentation Forms-B"](r)}var ny="deferred",ng="loading",nv="loaded",nm=null,nx="unavailable",nb=null,n_=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(nx="error"),nm&&nm(r)};function nw(){nT.fire(new tI("pluginStateChange",{pluginStatus:nx,pluginURL:nb}))}var nT=new tC,nA=function(){return nx},nk=function(){if(nx!==ny||!nb)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nx=ng,nw(),nb&&tT({url:nb},function(r){r?n_(r):(nx=nv,nw())})},nM={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return nx===nv||null!=nM.applyArabicShaping},isLoading:function(){return nx===ng},setState:function(r){nx=r.pluginStatus,nb=r.pluginURL},isParsed:function(){return null!=nM.applyArabicShaping&&null!=nM.processBidirectionalText&&null!=nM.processStyledBidirectionalText},getPluginURL:function(){return nb}},nS=function(r,n){this.zoom=r,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nc,this.transition={})};nS.prototype.isSupportedScript=function(r){return function(r,n){for(var i,a=0;a<r.length;a+=1)if(i=r[a].charCodeAt(0),!n&&nd(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nu.Khmer(i))return!1;return!0}(r,nM.isLoaded())},nS.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},nS.prototype.getCrossfadeParameters=function(){var r=this.zoom,n=r-Math.floor(r),i=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*n}};var nE=function(r,n){this.property=r,this.value=n,this.expression=function(r,n){if(rg(r))return new rI(r,n);if(rA(r)){var i=rE(r,n);if("error"===i.result)throw Error(i.value.map(function(r){return r.key+": "+r.message}).join(", "));return i.value}var a=r;return"string"==typeof r&&"color"===n.type&&(a=t3.parse(r)),{kind:"constant",evaluate:function(){return a}}}(void 0===n?r.specification.default:n,r.specification)};nE.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},nE.prototype.possiblyEvaluate=function(r,n,i){return this.property.possiblyEvaluate(this,r,n,i)};var nI=function(r){this.property=r,this.value=new nE(r,void 0)};nI.prototype.transitioned=function(r,n){return new nC(this.property,this.value,n,y({},r.transition,this.transition),r.now)},nI.prototype.untransitioned=function(){return new nC(this.property,this.value,null,{},0)};var nL=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};nL.prototype.getValue=function(r){return A(this._values[r].value.value)},nL.prototype.setValue=function(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nI(this._values[r].property)),this._values[r].value=new nE(this._values[r].property,null===n?void 0:A(n))},nL.prototype.getTransition=function(r){return A(this._values[r].transition)},nL.prototype.setTransition=function(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nI(this._values[r].property)),this._values[r].transition=A(n)||void 0},nL.prototype.serialize=function(){for(var r={},n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n],o=this.getValue(a);void 0!==o&&(r[a]=o);var s=this.getTransition(a);void 0!==s&&(r[a+"-transition"]=s)}return r},nL.prototype.transitioned=function(r,n){for(var i=new nO(this._properties),a=0,o=Object.keys(this._values);a<o.length;a+=1){var s=o[a];i._values[s]=this._values[s].transitioned(r,n._values[s])}return i},nL.prototype.untransitioned=function(){for(var r=new nO(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].untransitioned()}return r};var nC=function(r,n,i,a,o){this.property=r,this.value=n,this.begin=o+a.delay||0,this.end=this.begin+a.duration||0,r.specification.transition&&(a.delay||a.duration)&&(this.prior=i)};nC.prototype.possiblyEvaluate=function(r,n,i){var a=r.now||0,o=this.value.possiblyEvaluate(r,n,i),s=this.prior;if(s){if(a>this.end||this.value.isDataDriven())return this.prior=null,o;if(a<this.begin)return s.possiblyEvaluate(r,n,i);var l=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(r,n,i),o,function(r){if(r<=0)return 0;if(r>=1)return 1;var n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}(l))}return o};var nO=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};nO.prototype.possiblyEvaluate=function(r,n,i){for(var a=new nB(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(r,n,i)}return a},nO.prototype.hasTransition=function(){for(var r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];if(this._values[i].prior)return!0}return!1};var nD=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};nD.prototype.getValue=function(r){return A(this._values[r].value)},nD.prototype.setValue=function(r,n){this._values[r]=new nE(this._values[r].property,null===n?void 0:A(n))},nD.prototype.serialize=function(){for(var r={},n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n],o=this.getValue(a);void 0!==o&&(r[a]=o)}return r},nD.prototype.possiblyEvaluate=function(r,n,i){for(var a=new nB(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(r,n,i)}return a};var nP=function(r,n,i){this.property=r,this.value=n,this.parameters=i};nP.prototype.isConstant=function(){return"constant"===this.value.kind},nP.prototype.constantOr=function(r){return"constant"===this.value.kind?this.value.value:r},nP.prototype.evaluate=function(r,n,i,a){return this.property.evaluate(this.value,this.parameters,r,n,i,a)};var nB=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};nB.prototype.get=function(r){return this._values[r]};var nR=function(r){this.specification=r};nR.prototype.possiblyEvaluate=function(r,n){return r.expression.evaluate(n)},nR.prototype.interpolate=function(r,n,i){var a=eD[this.specification.type];return a?a(r,n,i):r};var nz=function(r,n){this.specification=r,this.overrides=n};nz.prototype.possiblyEvaluate=function(r,n,i,a){return"constant"===r.expression.kind||"camera"===r.expression.kind?new nP(this,{kind:"constant",value:r.expression.evaluate(n,null,{},i,a)},n):new nP(this,r.expression,n)},nz.prototype.interpolate=function(r,n,i){if("constant"!==r.value.kind||"constant"!==n.value.kind)return r;if(void 0===r.value.value||void 0===n.value.value)return new nP(this,{kind:"constant",value:void 0},r.parameters);var a=eD[this.specification.type];return a?new nP(this,{kind:"constant",value:a(r.value.value,n.value.value,i)},r.parameters):r},nz.prototype.evaluate=function(r,n,i,a,o,s){return"constant"===r.kind?r.value:r.evaluate(n,i,a,o,s)};var nF=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.possiblyEvaluate=function(r,n,i,a){if(void 0===r.value)return new nP(this,{kind:"constant",value:void 0},n);if("constant"===r.expression.kind){var o=r.expression.evaluate(n,null,{},i,a),s="resolvedImage"===r.property.specification.type&&"string"!=typeof o?o.name:o;return new nP(this,{kind:"constant",value:this._calculate(s,s,s,n)},n)}return"camera"===r.expression.kind?new nP(this,{kind:"constant",value:this._calculate(r.expression.evaluate({zoom:n.zoom-1}),r.expression.evaluate({zoom:n.zoom}),r.expression.evaluate({zoom:n.zoom+1}),n)},n):new nP(this,r.expression,n)},n.prototype.evaluate=function(r,n,i,a,o,s){if("source"===r.kind){var l=r.evaluate(n,i,a,o,s);return this._calculate(l,l,l,n)}return"composite"===r.kind?this._calculate(r.evaluate({zoom:Math.floor(n.zoom)-1},i,a),r.evaluate({zoom:Math.floor(n.zoom)},i,a),r.evaluate({zoom:Math.floor(n.zoom)+1},i,a),n):r.value},n.prototype._calculate=function(r,n,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:r,to:n}:{from:i,to:n}},n.prototype.interpolate=function(r){return r},n}(nz),nN=function(r){this.specification=r};nN.prototype.possiblyEvaluate=function(r,n,i,a){if(void 0!==r.value){if("constant"===r.expression.kind){var o=r.expression.evaluate(n,null,{},i,a);return this._calculate(o,o,o,n)}return this._calculate(r.expression.evaluate(new nS(Math.floor(n.zoom-1),n)),r.expression.evaluate(new nS(Math.floor(n.zoom),n)),r.expression.evaluate(new nS(Math.floor(n.zoom+1),n)),n)}},nN.prototype._calculate=function(r,n,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:r,to:n}:{from:i,to:n}},nN.prototype.interpolate=function(r){return r};var nU=function(r){this.specification=r};nU.prototype.possiblyEvaluate=function(r,n,i,a){return!!r.expression.evaluate(n,null,{},i,a)},nU.prototype.interpolate=function(){return!1};var nj=function(r){for(var n in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var i=r[n];i.specification.overridable&&this.overridableProperties.push(n);var a=this.defaultPropertyValues[n]=new nE(i,void 0),o=this.defaultTransitionablePropertyValues[n]=new nI(i);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=a.possiblyEvaluate({})}};nn("DataDrivenProperty",nz),nn("DataConstantProperty",nR),nn("CrossFadedDataDrivenProperty",nF),nn("CrossFadedProperty",nN),nn("ColorRampProperty",nU);var nV="-transition",nH=function(r){function n(n,i){if(r.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==n.type&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,"background"!==n.type&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),i.layout&&(this._unevaluatedLayout=new nD(i.layout)),i.paint)){for(var a in this._transitionablePaint=new nL(i.paint),n.paint)this.setPaintProperty(a,n.paint[a],{validate:!1});for(var o in n.layout)this.setLayoutProperty(o,n.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nB(i.paint)}}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},n.prototype.getLayoutProperty=function(r){return"visibility"===r?this.visibility:this._unevaluatedLayout.getValue(r)},n.prototype.setLayoutProperty=function(r,n,i){if(void 0===i&&(i={}),null!=n){var a="layers."+this.id+".layout."+r;if(this._validate(r8,a,r,n,i))return}"visibility"!==r?this._unevaluatedLayout.setValue(r,n):this.visibility=n},n.prototype.getPaintProperty=function(r){return _(r,nV)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)},n.prototype.setPaintProperty=function(r,n,i){if(void 0===i&&(i={}),null!=n){var a="layers."+this.id+".paint."+r;if(this._validate(r5,a,r,n,i))return!1}if(_(r,nV))return this._transitionablePaint.setTransition(r.slice(0,-11),n||void 0),!1;var o=this._transitionablePaint._values[r],s="cross-faded-data-driven"===o.property.specification["property-type"],l=o.value.isDataDriven(),c=o.value;this._transitionablePaint.setValue(r,n),this._handleSpecialPaintPropertyUpdate(r);var u=this._transitionablePaint._values[r].value;return u.isDataDriven()||l||s||this._handleOverridablePaintPropertyUpdate(r,c,u)},n.prototype._handleSpecialPaintPropertyUpdate=function(r){},n.prototype._handleOverridablePaintPropertyUpdate=function(r,n,i){return!1},n.prototype.isHidden=function(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||"none"===this.visibility},n.prototype.updateTransitions=function(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)},n.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},n.prototype.recalculate=function(r,n){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,n)},n.prototype.serialize=function(){var r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),T(r,function(r,n){return!(void 0===r||"layout"===n&&!Object.keys(r).length||"paint"===n&&!Object.keys(r).length)})},n.prototype._validate=function(r,n,i,a,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&r7(this,r.call(r2,{key:n,layerType:this.type,objectKey:i,value:a,styleSpec:tO,style:{glyphs:!0,sprite:!0}}))},n.prototype.is3D=function(){return!1},n.prototype.isTileClipped=function(){return!1},n.prototype.hasOffscreenPass=function(){return!1},n.prototype.resize=function(){},n.prototype.isStateDependent=function(){for(var r in this.paint._values){var n=this.paint.get(r);if(n instanceof nP&&rh(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1},n}(tC),nq={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nG=function(r,n){this._structArray=r,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},nW=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function nY(r,n){void 0===n&&(n=1);var i=0,a=0;return{members:r.map(function(r){var o,s=nq[o=r.type].BYTES_PER_ELEMENT,l=i=nZ(i,Math.max(n,s)),c=r.components||1;return a=Math.max(a,s),i+=s*c,{name:r.name,type:r.type,components:c,offset:l}}),size:nZ(i,Math.max(a,n)),alignment:n}}function nZ(r,n){return Math.ceil(r/n)*n}nW.serialize=function(r,n){return r._trim(),n&&(r.isTransferred=!0,n.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},nW.deserialize=function(r){var n=Object.create(this.prototype);return n.arrayBuffer=r.arrayBuffer,n.length=r.length,n.capacity=r.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n},nW.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},nW.prototype.clear=function(){this.length=0},nW.prototype.resize=function(r){this.reserve(r),this.length=r},nW.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}},nW.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")};var nX=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.int16[a+0]=n,this.int16[a+1]=i,r},n}(nW);nX.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",nX);var nK=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=4*r;return this.int16[s+0]=n,this.int16[s+1]=i,this.int16[s+2]=a,this.int16[s+3]=o,r},n}(nW);nK.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",nK);var nJ=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var c=6*r;return this.int16[c+0]=n,this.int16[c+1]=i,this.int16[c+2]=a,this.int16[c+3]=o,this.int16[c+4]=s,this.int16[c+5]=l,r},n}(nW);nJ.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",nJ);var n$=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var c=4*r,u=8*r;return this.int16[c+0]=n,this.int16[c+1]=i,this.uint8[u+4]=a,this.uint8[u+5]=o,this.uint8[u+6]=s,this.uint8[u+7]=l,r},n}(nW);n$.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",n$);var nQ=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.float32[a+0]=n,this.float32[a+1]=i,r},n}(nW);nQ.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",nQ);var n0=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,c,u,f){var h=this.length;return this.resize(h+1),this.emplace(h,r,n,i,a,o,s,l,c,u,f)},n.prototype.emplace=function(r,n,i,a,o,s,l,c,u,f,h){var p=10*r;return this.uint16[p+0]=n,this.uint16[p+1]=i,this.uint16[p+2]=a,this.uint16[p+3]=o,this.uint16[p+4]=s,this.uint16[p+5]=l,this.uint16[p+6]=c,this.uint16[p+7]=u,this.uint16[p+8]=f,this.uint16[p+9]=h,r},n}(nW);n0.prototype.bytesPerElement=20,nn("StructArrayLayout10ui20",n0);var n1=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,c,u,f,h,p){var d=this.length;return this.resize(d+1),this.emplace(d,r,n,i,a,o,s,l,c,u,f,h,p)},n.prototype.emplace=function(r,n,i,a,o,s,l,c,u,f,h,p,d){var y=12*r;return this.int16[y+0]=n,this.int16[y+1]=i,this.int16[y+2]=a,this.int16[y+3]=o,this.uint16[y+4]=s,this.uint16[y+5]=l,this.uint16[y+6]=c,this.uint16[y+7]=u,this.int16[y+8]=f,this.int16[y+9]=h,this.int16[y+10]=p,this.int16[y+11]=d,r},n}(nW);n1.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",n1);var n2=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.float32[o+0]=n,this.float32[o+1]=i,this.float32[o+2]=a,r},n}(nW);n2.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",n2);var n3=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.uint32[1*r+0]=n,r},n}(nW);n3.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",n3);var n4=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,c,u){var f=this.length;return this.resize(f+1),this.emplace(f,r,n,i,a,o,s,l,c,u)},n.prototype.emplace=function(r,n,i,a,o,s,l,c,u,f){var h=10*r;return this.int16[h+0]=n,this.int16[h+1]=i,this.int16[h+2]=a,this.int16[h+3]=o,this.int16[h+4]=s,this.int16[h+5]=l,this.uint32[5*r+3]=c,this.uint16[h+8]=u,this.uint16[h+9]=f,r},n}(nW);n4.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",n4);var n6=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var c=6*r;return this.int16[c+0]=n,this.int16[c+1]=i,this.int16[c+2]=a,this.int16[c+3]=o,this.int16[c+4]=s,this.int16[c+5]=l,r},n}(nW);n6.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",n6);var n5=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,r,n,i,a,o)},n.prototype.emplace=function(r,n,i,a,o,s){var l=4*r,c=8*r;return this.float32[l+0]=n,this.float32[l+1]=i,this.float32[l+2]=a,this.int16[c+6]=o,this.int16[c+7]=s,r},n}(nW);n5.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",n5);var n8=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=12*r,l=3*r;return this.uint8[s+0]=n,this.uint8[s+1]=i,this.float32[l+1]=a,this.float32[l+2]=o,r},n}(nW);n8.prototype.bytesPerElement=12,nn("StructArrayLayout2ub2f12",n8);var n7=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.uint16[o+0]=n,this.uint16[o+1]=i,this.uint16[o+2]=a,r},n}(nW);n7.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",n7);var n9=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m){var x=this.length;return this.resize(x+1),this.emplace(x,r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m)},n.prototype.emplace=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x){var b=24*r,_=12*r,w=48*r;return this.int16[b+0]=n,this.int16[b+1]=i,this.uint16[b+2]=a,this.uint16[b+3]=o,this.uint32[_+2]=s,this.uint32[_+3]=l,this.uint32[_+4]=c,this.uint16[b+10]=u,this.uint16[b+11]=f,this.uint16[b+12]=h,this.float32[_+7]=p,this.float32[_+8]=d,this.uint8[w+36]=y,this.uint8[w+37]=g,this.uint8[w+38]=v,this.uint32[_+10]=m,this.int16[b+22]=x,r},n}(nW);n9.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",n9);var it=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I){var L=this.length;return this.resize(L+1),this.emplace(L,r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I)},n.prototype.emplace=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L){var C=34*r,O=17*r;return this.int16[C+0]=n,this.int16[C+1]=i,this.int16[C+2]=a,this.int16[C+3]=o,this.int16[C+4]=s,this.int16[C+5]=l,this.int16[C+6]=c,this.int16[C+7]=u,this.uint16[C+8]=f,this.uint16[C+9]=h,this.uint16[C+10]=p,this.uint16[C+11]=d,this.uint16[C+12]=y,this.uint16[C+13]=g,this.uint16[C+14]=v,this.uint16[C+15]=m,this.uint16[C+16]=x,this.uint16[C+17]=b,this.uint16[C+18]=_,this.uint16[C+19]=w,this.uint16[C+20]=T,this.uint16[C+21]=A,this.uint16[C+22]=k,this.uint32[O+12]=M,this.float32[O+13]=S,this.float32[O+14]=E,this.float32[O+15]=I,this.float32[O+16]=L,r},n}(nW);it.prototype.bytesPerElement=68,nn("StructArrayLayout8i15ui1ul4f68",it);var ie=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.float32[1*r+0]=n,r},n}(nW);ie.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",ie);var ir=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.int16[o+0]=n,this.int16[o+1]=i,this.int16[o+2]=a,r},n}(nW);ir.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",ir);var ii=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=4*r;return this.uint32[2*r+0]=n,this.uint16[o+2]=i,this.uint16[o+3]=a,r},n}(nW);ii.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",ii);var ia=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.uint16[a+0]=n,this.uint16[a+1]=i,r},n}(nW);ia.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",ia);var io=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.uint16[1*r+0]=n,r},n}(nW);io.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",io);var is=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=4*r;return this.float32[s+0]=n,this.float32[s+1]=i,this.float32[s+2]=a,this.float32[s+3]=o,r},n}(nW);is.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",is);var il=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new c(this.anchorPointX,this.anchorPointY)},Object.defineProperties(n.prototype,i),n}(nG);il.prototype.size=20;var ic=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new il(this,r)},n}(n4);nn("CollisionBoxArray",ic);var iu=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(r){this._structArray.uint8[this._pos1+37]=r},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(r){this._structArray.uint8[this._pos1+38]=r},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(r){this._structArray.uint32[this._pos4+10]=r},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(n.prototype,i),n}(nG);iu.prototype.size=48;var ih=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new iu(this,r)},n}(n9);nn("PlacedSymbolArray",ih);var ip=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(r){this._structArray.uint32[this._pos4+12]=r},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(n.prototype,i),n}(nG);ip.prototype.size=68;var id=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new ip(this,r)},n}(it);nn("SymbolInstanceArray",id);var iy=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getoffsetX=function(r){return this.float32[1*r+0]},n}(ie);nn("GlyphOffsetArray",iy);var ig=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getx=function(r){return this.int16[3*r+0]},n.prototype.gety=function(r){return this.int16[3*r+1]},n.prototype.gettileUnitDistanceFromAnchor=function(r){return this.int16[3*r+2]},n}(ir);nn("SymbolLineVertexArray",ig);var iv=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(n.prototype,i),n}(nG);iv.prototype.size=8;var im=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new iv(this,r)},n}(ii);nn("FeatureIndexArray",im);var ix=nY([{name:"a_pos",components:2,type:"Int16"}],4).members,ib=function(r){void 0===r&&(r=[]),this.segments=r};function i_(r,n){return 256*(r=p(Math.floor(r),0,255))+p(Math.floor(n),0,255)}ib.prototype.prepareSegment=function(r,n,i,a){var o=this.segments[this.segments.length-1];return r>ib.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+ib.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!o||o.vertexLength+r>ib.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==a)&&(o={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(o.sortKey=a),this.segments.push(o)),o},ib.prototype.get=function(){return this.segments},ib.prototype.destroy=function(){for(var r=0,n=this.segments;r<n.length;r+=1){var i=n[r];for(var a in i.vaos)i.vaos[a].destroy()}},ib.simpleSegment=function(r,n,i,a){return new ib([{vertexOffset:r,primitiveOffset:n,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}])},ib.MAX_VERTEX_ARRAY_LENGTH=65535,nn("SegmentVector",ib);var iw=nY([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),iT=n(function(r){r.exports=function(r,n){var i,a,o,s,l,c;for(i=3&r.length,a=r.length-i,o=n,c=0;c<a;)l=255&r.charCodeAt(c)|(255&r.charCodeAt(++c))<<8|(255&r.charCodeAt(++c))<<16|(255&r.charCodeAt(++c))<<24,++c,o=27492+(65535&(s=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&r.charCodeAt(c+2))<<16;case 2:l^=(255&r.charCodeAt(c+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&r.charCodeAt(c)))*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295}return o^=r.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}}),iA=n(function(r){r.exports=function(r,n){for(var i,a=r.length,o=n^a,s=0;a>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(s)|(255&r.charCodeAt(++s))<<8|(255&r.charCodeAt(++s))<<16|(255&r.charCodeAt(++s))<<24))+((1540483477*(i>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++s;switch(a){case 3:o^=(255&r.charCodeAt(s+2))<<16;case 2:o^=(255&r.charCodeAt(s+1))<<8;case 1:o=1540483477*(65535&(o^=255&r.charCodeAt(s)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0}});iT.murmur3=iT,iT.murmur2=iA;var ik=function(){this.ids=[],this.positions=[],this.indexed=!1};function iM(r){var n=+r;return!isNaN(n)&&n<=9007199254740991?n:iT(String(r))}function iS(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}ik.prototype.add=function(r,n,i,a){this.ids.push(iM(r)),this.positions.push(n,i,a)},ik.prototype.getPositions=function(r){for(var n=iM(r),i=0,a=this.ids.length-1;i<a;){var o=i+a>>1;this.ids[o]>=n?a=o:i=o+1}for(var s=[];this.ids[i]===n;){var l=this.positions[3*i],c=this.positions[3*i+1],u=this.positions[3*i+2];s.push({index:l,start:c,end:u}),i++}return s},ik.serialize=function(r,n){var i=new Float64Array(r.ids),a=new Uint32Array(r.positions);return function r(n,i,a,o){for(;a<o;){for(var s=n[a+o>>1],l=a-1,c=o+1;;){do l++;while(n[l]<s)do c--;while(n[c]>s)if(l>=c)break;iS(n,l,c),iS(i,3*l,3*c),iS(i,3*l+1,3*c+1),iS(i,3*l+2,3*c+2)}c-a<o-c?(r(n,i,a,c),a=c+1):(r(n,i,c+1,o),o=c)}}(i,a,0,i.length-1),n&&n.push(i.buffer,a.buffer),{ids:i,positions:a}},ik.deserialize=function(r){var n=new ik;return n.ids=r.ids,n.positions=r.positions,n.indexed=!0,n},nn("FeaturePositionMap",ik);var iE=function(r,n){this.gl=r.gl,this.location=n},iI=function(r){function n(n,i){r.call(this,n,i),this.current=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))},n}(iE),iL=function(r){function n(n,i){r.call(this,n,i),this.current=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))},n}(iE),iC=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))},n}(iE),iO=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))},n}(iE),iD=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0,0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))},n}(iE),iP=function(r){function n(n,i){r.call(this,n,i),this.current=t3.transparent}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))},n}(iE),iB=new Float32Array(16),iR=function(r){function n(n,i){r.call(this,n,i),this.current=iB}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(var n=1;n<16;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}},n}(iE);function iz(r){return[i_(255*r.r,255*r.g),i_(255*r.b,255*r.a)]}var iF=function(r,n,i){this.value=r,this.uniformNames=n.map(function(r){return"u_"+r}),this.type=i};iF.prototype.setUniform=function(r,n,i){r.set(i.constantOr(this.value))},iF.prototype.getBinding=function(r,n,i){return"color"===this.type?new iP(r,n):new iL(r,n)};var iN=function(r,n){this.uniformNames=n.map(function(r){return"u_"+r}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};iN.prototype.setConstantPatternPositions=function(r,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=r.tlbr},iN.prototype.setUniform=function(r,n,i,a){var o="u_pattern_to"===a?this.patternTo:"u_pattern_from"===a?this.patternFrom:"u_pixel_ratio_to"===a?this.pixelRatioTo:"u_pixel_ratio_from"===a?this.pixelRatioFrom:null;o&&r.set(o)},iN.prototype.getBinding=function(r,n,i){return"u_pattern"===i.substr(0,9)?new iD(r,n):new iL(r,n)};var iU=function(r,n,i,a){this.expression=r,this.type=i,this.maxValue=0,this.paintVertexAttributes=n.map(function(r){return{name:"a_"+r,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new a};iU.prototype.populatePaintArray=function(r,n,i,a,o){var s=this.paintVertexArray.length,l=this.expression.evaluate(new nS(0),n,{},a,[],o);this.paintVertexArray.resize(r),this._setPaintValue(s,r,l)},iU.prototype.updatePaintArray=function(r,n,i,a){var o=this.expression.evaluate({zoom:0},i,a);this._setPaintValue(r,n,o)},iU.prototype._setPaintValue=function(r,n,i){if("color"===this.type)for(var a=iz(i),o=r;o<n;o++)this.paintVertexArray.emplace(o,a[0],a[1]);else{for(var s=r;s<n;s++)this.paintVertexArray.emplace(s,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},iU.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},iU.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ij=function(r,n,i,a,o,s){this.expression=r,this.uniformNames=n.map(function(r){return"u_"+r+"_t"}),this.type=i,this.useIntegerZoom=a,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=n.map(function(r){return{name:"a_"+r,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new s};ij.prototype.populatePaintArray=function(r,n,i,a,o){var s=this.expression.evaluate(new nS(this.zoom),n,{},a,[],o),l=this.expression.evaluate(new nS(this.zoom+1),n,{},a,[],o),c=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(c,r,s,l)},ij.prototype.updatePaintArray=function(r,n,i,a){var o=this.expression.evaluate({zoom:this.zoom},i,a),s=this.expression.evaluate({zoom:this.zoom+1},i,a);this._setPaintValue(r,n,o,s)},ij.prototype._setPaintValue=function(r,n,i,a){if("color"===this.type)for(var o=iz(i),s=iz(a),l=r;l<n;l++)this.paintVertexArray.emplace(l,o[0],o[1],s[0],s[1]);else{for(var c=r;c<n;c++)this.paintVertexArray.emplace(c,i,a);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(a))}},ij.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ij.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ij.prototype.setUniform=function(r,n){var i=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=p(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);r.set(a)},ij.prototype.getBinding=function(r,n,i){return new iL(r,n)};var iV=function(r,n,i,a,o,s){this.expression=r,this.type=n,this.useIntegerZoom=i,this.zoom=a,this.layerId=s,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};iV.prototype.populatePaintArray=function(r,n,i){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(a,r,n.patterns&&n.patterns[this.layerId],i)},iV.prototype.updatePaintArray=function(r,n,i,a,o){this._setPaintValues(r,n,i.patterns&&i.patterns[this.layerId],o)},iV.prototype._setPaintValues=function(r,n,i,a){if(a&&i){var o=i.min,s=i.mid,l=i.max,c=a[o],u=a[s],f=a[l];if(c&&u&&f)for(var h=r;h<n;h++)this.zoomInPaintVertexArray.emplace(h,u.tl[0],u.tl[1],u.br[0],u.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],u.pixelRatio,c.pixelRatio),this.zoomOutPaintVertexArray.emplace(h,u.tl[0],u.tl[1],u.br[0],u.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],u.pixelRatio,f.pixelRatio)}},iV.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,iw.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,iw.members,this.expression.isStateDependent))},iV.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var iH=function(r,n,i){this.binders={},this._buffers=[];var a=[];for(var o in r.paint._values)if(i(o)){var s=r.paint.get(o);if(s instanceof nP&&rh(s.property.specification)){var l,c=(l=r.type,({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[o]||[o.replace(l+"-","").replace(/-/g,"_")]),u=s.value,f=s.property.specification.type,h=s.property.useIntegerZoom,p=s.property.specification["property-type"],d="cross-faded"===p||"cross-faded-data-driven"===p;if("constant"===u.kind)this.binders[o]=d?new iN(u.value,c):new iF(u.value,c,f),a.push("/u_"+o);else if("source"===u.kind||d){var y=iG(o,f,"source");this.binders[o]=d?new iV(u,f,h,n,y,r.id):new iU(u,c,f,y),a.push("/a_"+o)}else{var g=iG(o,f,"composite");this.binders[o]=new ij(u,c,f,h,n,g),a.push("/z_"+o)}}}this.cacheKey=a.sort().join("")};iH.prototype.getMaxValue=function(r){var n=this.binders[r];return n instanceof iU||n instanceof ij?n.maxValue:0},iH.prototype.populatePaintArrays=function(r,n,i,a,o){for(var s in this.binders){var l=this.binders[s];(l instanceof iU||l instanceof ij||l instanceof iV)&&l.populatePaintArray(r,n,i,a,o)}},iH.prototype.setConstantPatternPositions=function(r,n){for(var i in this.binders){var a=this.binders[i];a instanceof iN&&a.setConstantPatternPositions(r,n)}},iH.prototype.updatePaintArrays=function(r,n,i,a,o){var s=!1;for(var l in r)for(var c=0,u=n.getPositions(l);c<u.length;c+=1){var f=u[c],h=i.feature(f.index);for(var p in this.binders){var d=this.binders[p];if((d instanceof iU||d instanceof ij||d instanceof iV)&&!0===d.expression.isStateDependent){var y=a.paint.get(p);d.expression=y.value,d.updatePaintArray(f.start,f.end,h,r[l],o),s=!0}}}return s},iH.prototype.defines=function(){var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof iF||i instanceof iN)&&r.push.apply(r,i.uniformNames.map(function(r){return"#define HAS_UNIFORM_"+r}))}return r},iH.prototype.getBinderAttributes=function(){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof iU||i instanceof ij)for(var a=0;a<i.paintVertexAttributes.length;a++)r.push(i.paintVertexAttributes[a].name);else if(i instanceof iV)for(var o=0;o<iw.members.length;o++)r.push(iw.members[o].name)}return r},iH.prototype.getBinderUniforms=function(){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof iF||i instanceof iN||i instanceof ij)for(var a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];r.push(s)}}return r},iH.prototype.getPaintVertexBuffers=function(){return this._buffers},iH.prototype.getUniforms=function(r,n){var i=[];for(var a in this.binders){var o=this.binders[a];if(o instanceof iF||o instanceof iN||o instanceof ij)for(var s=0,l=o.uniformNames;s<l.length;s+=1){var c=l[s];if(n[c]){var u=o.getBinding(r,n[c],c);i.push({name:c,property:a,binding:u})}}}return i},iH.prototype.setUniforms=function(r,n,i,a){for(var o=0;o<n.length;o+=1){var s=n[o],l=s.name,c=s.property,u=s.binding;this.binders[c].setUniform(u,a,i.get(c),l)}},iH.prototype.updatePaintBuffers=function(r){for(var n in this._buffers=[],this.binders){var i=this.binders[n];if(r&&i instanceof iV){var a=2===r.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;a&&this._buffers.push(a)}else(i instanceof iU||i instanceof ij)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},iH.prototype.upload=function(r){for(var n in this.binders){var i=this.binders[n];(i instanceof iU||i instanceof ij||i instanceof iV)&&i.upload(r)}this.updatePaintBuffers()},iH.prototype.destroy=function(){for(var r in this.binders){var n=this.binders[r];(n instanceof iU||n instanceof ij||n instanceof iV)&&n.destroy()}};var iq=function(r,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var a=0;a<r.length;a+=1){var o=r[a];this.programConfigurations[o.id]=new iH(o,n,i)}this.needsUpload=!1,this._featureMap=new ik,this._bufferOffset=0};function iG(r,n,i){var a={"line-pattern":{source:n0,composite:n0},"fill-pattern":{source:n0,composite:n0},"fill-extrusion-pattern":{source:n0,composite:n0}}[r];return a&&a[i]||({color:{source:nQ,composite:is},number:{source:ie,composite:nQ}})[n][i]}iq.prototype.populatePaintArrays=function(r,n,i,a,o,s){for(var l in this.programConfigurations)this.programConfigurations[l].populatePaintArrays(r,n,a,o,s);void 0!==n.id&&this._featureMap.add(n.id,i,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},iq.prototype.updatePaintArrays=function(r,n,i,a){for(var o=0;o<i.length;o+=1){var s=i[o];this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(r,this._featureMap,n,s,a)||this.needsUpload}},iq.prototype.get=function(r){return this.programConfigurations[r]},iq.prototype.upload=function(r){if(this.needsUpload){for(var n in this.programConfigurations)this.programConfigurations[n].upload(r);this.needsUpload=!1}},iq.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},nn("ConstantBinder",iF),nn("CrossFadedConstantBinder",iN),nn("SourceExpressionBinder",iU),nn("CrossFadedCompositeBinder",iV),nn("CompositeExpressionBinder",ij),nn("ProgramConfiguration",iH,{omit:["_buffers"]}),nn("ProgramConfigurationSet",iq);var iW=-16383-1;function iY(r){for(var n=8192/r.extent,i=r.loadGeometry(),a=0;a<i.length;a++)for(var o=i[a],s=0;s<o.length;s++){var l=o[s],c=Math.round(l.x*n),u=Math.round(l.y*n);l.x=p(c,iW,16383),l.y=p(u,iW,16383),(c<l.x||c>l.x+1||u<l.y||u>l.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function iZ(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?iY(r):[]}}function iX(r,n,i,a,o){r.emplaceBack(2*n+(a+1)/2,2*i+(o+1)/2)}var iK=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nX,this.indexArray=new n7,this.segments=new ib,this.programConfigurations=new iq(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function iJ(r,n){for(var i=0;i<r.length;i++)if(i3(n,r[i]))return!0;for(var a=0;a<n.length;a++)if(i3(r,n[a]))return!0;return!!iQ(r,n)}function i$(r,n){if(1===r.length)return i2(n,r[0]);for(var i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++)if(i3(r,a[o]))return!0;for(var s=0;s<r.length;s++)if(i2(n,r[s]))return!0;for(var l=0;l<n.length;l++)if(iQ(r,n[l]))return!0;return!1}function iQ(r,n){if(0===r.length||0===n.length)return!1;for(var i,a,o=0;o<r.length-1;o++)for(var s=r[o],l=r[o+1],c=0;c<n.length-1;c++)if(S(s,i=n[c],a=n[c+1])!==S(l,i,a)&&S(s,l,i)!==S(s,l,a))return!0;return!1}function i0(r,n,i){var a=i*i;if(1===n.length)return r.distSqr(n[0])<a;for(var o=1;o<n.length;o++)if(i1(r,n[o-1],n[o])<a)return!0;return!1}function i1(r,n,i){var a=n.distSqr(i);if(0===a)return r.distSqr(n);var o=((r.x-n.x)*(i.x-n.x)+(r.y-n.y)*(i.y-n.y))/a;return o<0?r.distSqr(n):o>1?r.distSqr(i):r.distSqr(i.sub(n)._mult(o)._add(n))}function i2(r,n){for(var i,a,o,s=!1,l=0;l<r.length;l++)for(var c=0,u=(i=r[l]).length-1;c<i.length;u=c++)a=i[c],o=i[u],a.y>n.y!=o.y>n.y&&n.x<(o.x-a.x)*(n.y-a.y)/(o.y-a.y)+a.x&&(s=!s);return s}function i3(r,n){for(var i=!1,a=0,o=r.length-1;a<r.length;o=a++){var s=r[a],l=r[o];s.y>n.y!=l.y>n.y&&n.x<(l.x-s.x)*(n.y-s.y)/(l.y-s.y)+s.x&&(i=!i)}return i}function i4(r,n,i){var a=n.paint.get(r).value;return"constant"===a.kind?a.value:i.programConfigurations.get(n.id).getMaxValue(r)}function i6(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function i5(r,n,i,a,o){if(!n[0]&&!n[1])return r;var s=c.convert(n)._mult(o);"viewport"===i&&s._rotate(-a);for(var l=[],u=0;u<r.length;u++){var f=r[u];l.push(f.sub(s))}return l}iK.prototype.populate=function(r,n,i){var a=this.layers[0],o=[],s=null;"circle"===a.type&&(s=a.layout.get("circle-sort-key"));for(var l=0;l<r.length;l+=1){var c=r[l],u=c.feature,f=c.id,h=c.index,p=c.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,y=iZ(u,d);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),y,i)){var g=s?s.evaluate(y,{},i):void 0,v={id:f,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?y.geometry:iY(u),patterns:{},sortKey:g};o.push(v)}}s&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var m=0;m<o.length;m+=1){var x=o[m],b=x.geometry,_=x.index,w=x.sourceLayerIndex,T=r[_].feature;this.addFeature(x,b,_,i),n.featureIndex.insert(T,b,_,w,this.index)}},iK.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},iK.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},iK.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},iK.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ix),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},iK.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},iK.prototype.addFeature=function(r,n,i,a){for(var o=0;o<n.length;o+=1)for(var s=0,l=n[o];s<l.length;s+=1){var c=l[s],u=c.x,f=c.y;if(!(u<0||u>=8192||f<0||f>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),p=h.vertexLength;iX(this.layoutVertexArray,u,f,-1,-1),iX(this.layoutVertexArray,u,f,1,-1),iX(this.layoutVertexArray,u,f,1,1),iX(this.layoutVertexArray,u,f,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,{},a)},nn("CircleBucket",iK,{omit:["layers"]});var i8=new nj({"circle-sort-key":new nz(tO.layout_circle["circle-sort-key"])}),i7={paint:new nj({"circle-radius":new nz(tO.paint_circle["circle-radius"]),"circle-color":new nz(tO.paint_circle["circle-color"]),"circle-blur":new nz(tO.paint_circle["circle-blur"]),"circle-opacity":new nz(tO.paint_circle["circle-opacity"]),"circle-translate":new nR(tO.paint_circle["circle-translate"]),"circle-translate-anchor":new nR(tO.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nR(tO.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nR(tO.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nz(tO.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nz(tO.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nz(tO.paint_circle["circle-stroke-opacity"])}),layout:i8},i9="undefined"!=typeof Float32Array?Float32Array:Array;function at(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ae(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],v=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],A=i[3];return r[0]=_*a+w*c+T*p+A*v,r[1]=_*o+w*u+T*d+A*m,r[2]=_*s+w*f+T*y+A*x,r[3]=_*l+w*h+T*g+A*b,_=i[4],w=i[5],T=i[6],A=i[7],r[4]=_*a+w*c+T*p+A*v,r[5]=_*o+w*u+T*d+A*m,r[6]=_*s+w*f+T*y+A*x,r[7]=_*l+w*h+T*g+A*b,_=i[8],w=i[9],T=i[10],A=i[11],r[8]=_*a+w*c+T*p+A*v,r[9]=_*o+w*u+T*d+A*m,r[10]=_*s+w*f+T*y+A*x,r[11]=_*l+w*h+T*g+A*b,_=i[12],w=i[13],T=i[14],A=i[15],r[12]=_*a+w*c+T*p+A*v,r[13]=_*o+w*u+T*d+A*m,r[14]=_*s+w*f+T*y+A*x,r[15]=_*l+w*h+T*g+A*b,r}function ar(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3];return r[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,r[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,r[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,r[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,n=0,i=arguments.length;i--;)n+=r[i]*r[i];return Math.sqrt(n)}),i=new i9(3),i9!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),a=new i9(4),i9!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);var an=(o=new i9(2),i9!=Float32Array&&(o[0]=0,o[1]=0),function(r){function n(n){r.call(this,n,i7)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new iK(r)},n.prototype.queryRadius=function(r){return i4("circle-radius",this,r)+i4("circle-stroke-width",this,r)+i6(this.paint.get("circle-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l,c){for(var u=i5(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,l),f=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i),h="map"===this.paint.get("circle-pitch-alignment"),p=h?u:u.map(function(r){return ai(r,c)}),d=h?f*l:f,y=0;y<a.length;y+=1)for(var g=0,v=a[y];g<v.length;g+=1){var m,x=v[g],b=h?x:ai(x,c),_=d,w=ar([],[x.x,x.y,0,1],c);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=w[3]/s.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=s.cameraToCenterDistance/w[3]),m=_,i3(p,b)||i0(b,p,m))return!0}return!1},n}(nH));function ai(r,n){var i=ar([],[r.x,r.y,0,1],n);return new c(i[0]/i[3],i[1]/i[3])}var aa=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(iK);function ao(r,n,i,a){var o=n.width,s=n.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==o*s*i)throw RangeError("mismatched image size")}else a=new Uint8Array(o*s*i);return r.width=o,r.height=s,r.data=a,r}function as(r,n,i){var a=n.width,o=n.height;if(a!==r.width||o!==r.height){var s=ao({},{width:a,height:o},i);al(r,s,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,a),height:Math.min(r.height,o)},i),r.width=a,r.height=o,r.data=s.data}}function al(r,n,i,a,o,s){if(0===o.width||0===o.height)return n;if(o.width>r.width||o.height>r.height||i.x>r.width-o.width||i.y>r.height-o.height)throw RangeError("out of range source coordinates for image copy");if(o.width>n.width||o.height>n.height||a.x>n.width-o.width||a.y>n.height-o.height)throw RangeError("out of range destination coordinates for image copy");for(var l=r.data,c=n.data,u=0;u<o.height;u++)for(var f=((i.y+u)*r.width+i.x)*s,h=((a.y+u)*n.width+a.x)*s,p=0;p<o.width*s;p++)c[h+p]=l[f+p];return n}nn("HeatmapBucket",aa,{omit:["layers"]});var ac=function(r,n){ao(this,r,1,n)};ac.prototype.resize=function(r){as(this,r,1)},ac.prototype.clone=function(){return new ac({width:this.width,height:this.height},new Uint8Array(this.data))},ac.copy=function(r,n,i,a,o){al(r,n,i,a,o,1)};var au=function(r,n){ao(this,r,4,n)};au.prototype.resize=function(r){as(this,r,4)},au.prototype.replace=function(r,n){n?this.data.set(r):r instanceof Uint8ClampedArray?this.data=new Uint8Array(r.buffer):this.data=r},au.prototype.clone=function(){return new au({width:this.width,height:this.height},new Uint8Array(this.data))},au.copy=function(r,n,i,a,o){al(r,n,i,a,o,4)},nn("AlphaImage",ac),nn("RGBAImage",au);var af={paint:new nj({"heatmap-radius":new nz(tO.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nz(tO.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nR(tO.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nU(tO.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nR(tO.paint_heatmap["heatmap-opacity"])})};function ah(r){var n={},i=r.resolution||256,a=r.clips?r.clips.length:1,o=r.image||new au({width:i,height:a}),s=function(i,a,s){n[r.evaluationKey]=s;var l=r.expression.evaluate(n);o.data[i+a+0]=Math.floor(255*l.r/l.a),o.data[i+a+1]=Math.floor(255*l.g/l.a),o.data[i+a+2]=Math.floor(255*l.b/l.a),o.data[i+a+3]=Math.floor(255*l.a)};if(r.clips)for(var l=0,c=0;l<a;++l,c+=4*i)for(var u=0,f=0;u<i;u++,f+=4){var h=u/(i-1),p=r.clips[l];s(c,f,p.start*(1-h)+p.end*h)}else for(var d=0,y=0;d<i;d++,y+=4)s(0,y,d/(i-1));return o}var ap=function(r){function n(n){r.call(this,n,af),this._updateColorRamp()}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new aa(r)},n.prototype._handleSpecialPaintPropertyUpdate=function(r){"heatmap-color"===r&&this._updateColorRamp()},n.prototype._updateColorRamp=function(){var r=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ah({expression:r,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},n.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},n.prototype.queryRadius=function(){return 0},n.prototype.queryIntersectsFeature=function(){return!1},n.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},n}(nH),ad={paint:new nj({"hillshade-illumination-direction":new nR(tO.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nR(tO.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nR(tO.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nR(tO.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nR(tO.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nR(tO.paint_hillshade["hillshade-accent-color"])})},ay=function(r){function n(n){r.call(this,n,ad)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},n}(nH),ag=nY([{name:"a_pos",components:2,type:"Int16"}],4).members,av=am;function am(r,n,i){i=i||2;var a,o,s,l,c,u,f,h=n&&n.length,p=h?n[0]*i:r.length,d=ax(r,0,p,i,!0),y=[];if(!d||d.next===d.prev)return y;if(h&&(d=function(r,n,i,a){var o,s,l,c=[];for(o=0,s=n.length;o<s;o++)(l=ax(r,n[o]*a,o<s-1?n[o+1]*a:r.length,a,!1))===l.next&&(l.steiner=!0),c.push(function(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r)return i}(l));for(c.sort(a_),o=0;o<c.length;o++)(function(r,n){if(n=function(r,n){var i,a,o,s=n,l=r.x,c=r.y,u=-1/0;do{if(c<=s.y&&c>=s.next.y&&s.next.y!==s.y){var f=s.x+(c-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(f<=l&&f>u){if(u=f,f===l){if(c===s.y)return s;if(c===s.next.y)return s.next}o=s.x<s.next.x?s:s.next}}s=s.next}while(s!==n)if(!o)return null;if(l===u)return o;var h,p=o,d=o.x,y=o.y,g=1/0;s=o;do l>=s.x&&s.x>=d&&l!==s.x&&aT(c<y?l:u,c,d,y,c<y?u:l,c,s.x,s.y)&&(h=Math.abs(c-s.y)/(l-s.x),aI(s,r)&&(h<g||h===g&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>aA(i.prev,i,a.prev)&&0>aA(a.next,i,i.next))))&&(o=s,g=h)),s=s.next;while(s!==p)return o}(r,n)){var i=aL(n,r);ab(n,n.next),ab(i,i.next)}})(c[o],i),i=ab(i,i.next);return i}(r,n,d,i)),r.length>80*i){a=s=r[0],o=l=r[1];for(var g=i;g<p;g+=i)(c=r[g])<a&&(a=c),(u=r[g+1])<o&&(o=u),c>s&&(s=c),u>l&&(l=u);f=0!==(f=Math.max(s-a,l-o))?1/f:0}return function r(n,i,a,o,s,l,c){if(n){!c&&l&&function(r,n,i,a){var o=r;do null===o.z&&(o.z=aw(o.x,o.y,n,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r)o.prevZ.nextZ=null,o.prevZ=null,function(r){var n,i,a,o,s,l,c,u,f=1;do{for(i=r,r=null,s=null,l=0;i;){for(l++,a=i,c=0,n=0;n<f&&(c++,a=a.nextZ);n++);for(u=f;c>0||u>0&&a;)0!==c&&(0===u||!a||i.z<=a.z)?(o=i,i=i.nextZ,c--):(o=a,a=a.nextZ,u--),s?s.nextZ=o:r=o,o.prevZ=s,s=o;i=a}s.nextZ=null,f*=2}while(l>1)}(o)}(n,o,s,l);for(var u,f,h=n;n.prev!==n.next;)if(u=n.prev,f=n.next,l?function(r,n,i,a){var o=r.prev,s=r.next;if(aA(o,r,s)>=0)return!1;for(var l=o.x<r.x?o.x<s.x?o.x:s.x:r.x<s.x?r.x:s.x,c=o.y<r.y?o.y<s.y?o.y:s.y:r.y<s.y?r.y:s.y,u=o.x>r.x?o.x>s.x?o.x:s.x:r.x>s.x?r.x:s.x,f=o.y>r.y?o.y>s.y?o.y:s.y:r.y>s.y?r.y:s.y,h=aw(l,c,n,i,a),p=aw(u,f,n,i,a),d=r.prevZ,y=r.nextZ;d&&d.z>=h&&y&&y.z<=p;){if(d!==r.prev&&d!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,d.x,d.y)&&aA(d.prev,d,d.next)>=0||(d=d.prevZ,y!==r.prev&&y!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,y.x,y.y)&&aA(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;d&&d.z>=h;){if(d!==r.prev&&d!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,d.x,d.y)&&aA(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=p;){if(y!==r.prev&&y!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,y.x,y.y)&&aA(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}(n,o,s,l):function(r){var n=r.prev,i=r.next;if(aA(n,r,i)>=0)return!1;for(var a=r.next.next;a!==r.prev;){if(aT(n.x,n.y,r.x,r.y,i.x,i.y,a.x,a.y)&&aA(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}(n))i.push(u.i/a),i.push(n.i/a),i.push(f.i/a),aO(n),n=f.next,h=f.next;else if((n=f)===h){c?1===c?r(n=function(r,n,i){var a=r;do{var o=a.prev,s=a.next.next;!ak(o,s)&&aM(o,a,a.next,s)&&aI(o,s)&&aI(s,o)&&(n.push(o.i/i),n.push(a.i/i),n.push(s.i/i),aO(a),aO(a.next),a=r=s),a=a.next}while(a!==r)return ab(a)}(ab(n),i,a),i,a,o,s,l,2):2===c&&function(n,i,a,o,s,l){var c=n;do{for(var u,f,h=c.next.next;h!==c.prev;){if(c.i!==h.i&&(u=c,f=h,u.next.i!==f.i&&u.prev.i!==f.i&&!function(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&aM(i,i.next,r,n))return!0;i=i.next}while(i!==r)return!1}(u,f)&&(aI(u,f)&&aI(f,u)&&function(r,n){var i=r,a=!1,o=(r.x+n.x)/2,s=(r.y+n.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==r)return a}(u,f)&&(aA(u.prev,u,f.prev)||aA(u,f.prev,f))||ak(u,f)&&aA(u.prev,u,u.next)>0&&aA(f.prev,f,f.next)>0))){var p=aL(c,h);return c=ab(c,c.next),p=ab(p,p.next),r(c,i,a,o,s,l),void r(p,i,a,o,s,l)}h=h.next}c=c.next}while(c!==n)}(n,i,a,o,s,l):r(ab(n),i,a,o,s,l,1);break}}}(d,y,i,a,o,f),y}function ax(r,n,i,a,o){var s,l;if(o===aP(r,n,i,a)>0)for(s=n;s<i;s+=a)l=aC(s,r[s],r[s+1],l);else for(s=i-a;s>=n;s-=a)l=aC(s,r[s],r[s+1],l);return l&&ak(l,l.next)&&(aO(l),l=l.next),l}function ab(r,n){if(!r)return r;n||(n=r);var i,a=r;do if(i=!1,a.steiner||!ak(a,a.next)&&0!==aA(a.prev,a,a.next))a=a.next;else{if(aO(a),(a=n=a.prev)===a.next)break;i=!0}while(i||a!==n)return n}function a_(r,n){return r.x-n.x}function aw(r,n,i,a,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*o)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*o)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function aT(r,n,i,a,o,s,l,c){return(o-l)*(n-c)-(r-l)*(s-c)>=0&&(r-l)*(a-c)-(i-l)*(n-c)>=0&&(i-l)*(s-c)-(o-l)*(a-c)>=0}function aA(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function ak(r,n){return r.x===n.x&&r.y===n.y}function aM(r,n,i,a){var o=aE(aA(r,n,i)),s=aE(aA(r,n,a)),l=aE(aA(i,a,r)),c=aE(aA(i,a,n));return o!==s&&l!==c||!(0!==o||!aS(r,i,n))||!(0!==s||!aS(r,a,n))||!(0!==l||!aS(i,r,a))||!(0!==c||!aS(i,n,a))}function aS(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function aE(r){return r>0?1:r<0?-1:0}function aI(r,n){return 0>aA(r.prev,r,r.next)?aA(r,n,r.next)>=0&&aA(r,r.prev,n)>=0:0>aA(r,n,r.prev)||0>aA(r,r.next,n)}function aL(r,n){var i=new aD(r.i,r.x,r.y),a=new aD(n.i,n.x,n.y),o=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a}function aC(r,n,i,a){var o=new aD(r,n,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}function aO(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function aD(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function aP(r,n,i,a){for(var o=0,s=n,l=i-a;s<i;s+=a)o+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return o}function aB(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function aR(r,n){return r<n?-1:r>n?1:0}function az(r,n){var i,a=r.length;if(a<=1)return[r];for(var o,s,l=[],c=0;c<a;c++){var u=function(r){for(var n=0,i=0,a=r.length,o=a-1,s=void 0,l=void 0;i<a;o=i++)s=r[i],n+=((l=r[o]).x-s.x)*(s.y+l.y);return n}(r[c]);0!==u&&(r[c].area=Math.abs(u),void 0===s&&(s=u<0),s===u<0?(o&&l.push(o),o=[r[c]]):o.push(r[c]))}if(o&&l.push(o),n>1)for(var f=0;f<l.length;f++)l[f].length<=n||(function r(n,i,a,o,s){for(;o>a;){if(o-a>600){var l=o-a+1,c=i-a+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1);r(n,i,Math.max(a,Math.floor(i-c*f/l+h)),Math.min(o,Math.floor(i+(l-c)*f/l+h)),s)}var p=n[i],d=a,y=o;for(aB(n,a,i),s(n[o],p)>0&&aB(n,a,o);d<y;){for(aB(n,d,y),d++,y--;0>s(n[d],p);)d++;for(;s(n[y],p)>0;)y--}0===s(n[a],p)?aB(n,a,y):aB(n,++y,o),y<=i&&(a=y+1),i<=y&&(o=y-1)}}(i=l[f],n,1,l[f].length-1||i.length-1,aF||aR),l[f]=l[f].slice(0,n));return l}function aF(r,n){return n.area-r.area}function aN(r,n,i){for(var a=i.patternDependencies,o=!1,s=0;s<n.length;s+=1){var l=n[s].paint.get(r+"-pattern");l.isConstant()||(o=!0);var c=l.constantOr(null);c&&(o=!0,a[c.to]=!0,a[c.from]=!0)}return o}function aU(r,n,i,a,o){for(var s=o.patternDependencies,l=0;l<n.length;l+=1){var c=n[l],u=c.paint.get(r+"-pattern").value;if("constant"!==u.kind){var f=u.evaluate({zoom:a-1},i,{},o.availableImages),h=u.evaluate({zoom:a},i,{},o.availableImages),p=u.evaluate({zoom:a+1},i,{},o.availableImages);f=f&&f.name?f.name:f,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,s[f]=!0,s[h]=!0,s[p]=!0,i.patterns[c.id]={min:f,mid:h,max:p}}}return i}am.deviation=function(r,n,i,a){var o=n&&n.length,s=o?n[0]*i:r.length,l=Math.abs(aP(r,0,s,i));if(o)for(var c=0,u=n.length;c<u;c++){var f=n[c]*i,h=c<u-1?n[c+1]*i:r.length;l-=Math.abs(aP(r,f,h,i))}var p=0;for(c=0;c<a.length;c+=3){var d=a[c]*i,y=a[c+1]*i,g=a[c+2]*i;p+=Math.abs((r[d]-r[g])*(r[y+1]-r[d+1])-(r[d]-r[y])*(r[g+1]-r[d+1]))}return 0===l&&0===p?0:Math.abs((p-l)/l)},am.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},a=0,o=0;o<r.length;o++){for(var s=0;s<r[o].length;s++)for(var l=0;l<n;l++)i.vertices.push(r[o][s][l]);o>0&&(a+=r[o-1].length,i.holes.push(a))}return i},av.default=am;var aj=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nX,this.indexArray=new n7,this.indexArray2=new ia,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.segments2=new ib,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};aj.prototype.populate=function(r,n,i){this.hasPattern=aN("fill",this.layers,n);for(var a=this.layers[0].layout.get("fill-sort-key"),o=[],s=0;s<r.length;s+=1){var l=r[s],c=l.feature,u=l.id,f=l.index,h=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=iZ(c,p);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),d,i)){var y=a?a.evaluate(d,{},i,n.availableImages):void 0,g={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:f,geometry:p?d.geometry:iY(c),patterns:{},sortKey:y};o.push(g)}}a&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var v=0;v<o.length;v+=1){var m=o[v],x=m.geometry,b=m.index,_=m.sourceLayerIndex;if(this.hasPattern){var w=aU("fill",this.layers,m,this.zoom,n);this.patternFeatures.push(w)}else this.addFeature(m,x,b,i,{});var T=r[b].feature;n.featureIndex.insert(T,x,b,_,this.index)}},aj.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},aj.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,n,i)}},aj.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},aj.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},aj.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ag),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},aj.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},aj.prototype.addFeature=function(r,n,i,a,o){for(var s=0,l=az(n,500);s<l.length;s+=1){for(var c=l[s],u=0,f=0;f<c.length;f+=1)u+=c[f].length;for(var h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],y=[],g=0;g<c.length;g+=1){var v=c[g];if(0!==v.length){v!==c[0]&&y.push(d.length/2);var m=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),x=m.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(x+v.length-1,x),d.push(v[0].x),d.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),d.push(v[b].x),d.push(v[b].y);m.vertexLength+=v.length,m.primitiveLength+=v.length}}for(var _=av(d,y),w=0;w<_.length;w+=3)this.indexArray.emplaceBack(p+_[w],p+_[w+1],p+_[w+2]);h.vertexLength+=u,h.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},nn("FillBucket",aj,{omit:["layers","patternFeatures"]});var aV=new nj({"fill-sort-key":new nz(tO.layout_fill["fill-sort-key"])}),aH={paint:new nj({"fill-antialias":new nR(tO.paint_fill["fill-antialias"]),"fill-opacity":new nz(tO.paint_fill["fill-opacity"]),"fill-color":new nz(tO.paint_fill["fill-color"]),"fill-outline-color":new nz(tO.paint_fill["fill-outline-color"]),"fill-translate":new nR(tO.paint_fill["fill-translate"]),"fill-translate-anchor":new nR(tO.paint_fill["fill-translate-anchor"]),"fill-pattern":new nF(tO.paint_fill["fill-pattern"])}),layout:aV},aq=function(r){function n(n){r.call(this,n,aH)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.recalculate=function(n,i){r.prototype.recalculate.call(this,n,i);var a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},n.prototype.createBucket=function(r){return new aj(r)},n.prototype.queryRadius=function(){return i6(this.paint.get("fill-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l){return i$(i5(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,l),a)},n.prototype.isTileClipped=function(){return!0},n}(nH),aG=nY([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;function aW(r,n,i,a,o){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=a,this._values=o,r.readFields(aY,this,n)}function aY(r,n,i){1==r?n.id=i.readVarint():2==r?function(r,n){for(var i=r.readVarint()+r.pos;r.pos<i;){var a=n._keys[r.readVarint()],o=n._values[r.readVarint()];n.properties[a]=o}}(i,n):3==r?n.type=i.readVarint():4==r&&(n._geometry=i.pos)}function aZ(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(aX,this,n),this.length=this._features.length}function aX(r,n,i){15===r?n.version=i.readVarint():1===r?n.name=i.readString():5===r?n.extent=i.readVarint():2===r?n._features.push(i.pos):3===r?n._keys.push(i.readString()):4===r&&n._values.push(function(r){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;){var a=r.readVarint()>>3;n=1===a?r.readString():2===a?r.readFloat():3===a?r.readDouble():4===a?r.readVarint64():5===a?r.readVarint():6===a?r.readSVarint():7===a?r.readBoolean():null}return n}(i))}function aK(r,n,i){if(3===r){var a=new aZ(i,i.readVarint()+i.pos);a.length&&(n[a.name]=a)}}aW.types=["Unknown","Point","LineString","Polygon"],aW.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,i=r.readVarint()+r.pos,a=1,o=0,s=0,l=0,u=[];r.pos<i;){if(o<=0){var f=r.readVarint();a=7&f,o=f>>3}if(o--,1===a||2===a)s+=r.readSVarint(),l+=r.readSVarint(),1===a&&(n&&u.push(n),n=[]),n.push(new c(s,l));else{if(7!==a)throw Error("unknown command "+a);n&&n.push(n[0].clone())}}return n&&u.push(n),u},aW.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,i=1,a=0,o=0,s=0,l=1/0,c=-1/0,u=1/0,f=-1/0;r.pos<n;){if(a<=0){var h=r.readVarint();i=7&h,a=h>>3}if(a--,1===i||2===i)(o+=r.readSVarint())<l&&(l=o),o>c&&(c=o),(s+=r.readSVarint())<u&&(u=s),s>f&&(f=s);else if(7!==i)throw Error("unknown command "+i)}return[l,u,c,f]},aW.prototype.toGeoJSON=function(r,n,i){var a,o,s=this.extent*Math.pow(2,i),l=this.extent*r,c=this.extent*n,u=this.loadGeometry(),f=aW.types[this.type];function h(r){for(var n=0;n<r.length;n++){var i=r[n],a=180-360*(i.y+c)/s;r[n]=[360*(i.x+l)/s-180,360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(a=0;a<u.length;a++)p[a]=u[a][0];h(u=p);break;case 2:for(a=0;a<u.length;a++)h(u[a]);break;case 3:for(u=function(r){var n=r.length;if(n<=1)return[r];for(var i,a,o=[],s=0;s<n;s++){var l=function(r){for(var n,i,a=0,o=0,s=r.length,l=s-1;o<s;l=o++)n=r[o],a+=((i=r[l]).x-n.x)*(n.y+i.y);return a}(r[s]);0!==l&&(void 0===a&&(a=l<0),a===l<0?(i&&o.push(i),i=[r[s]]):i.push(r[s]))}return i&&o.push(i),o}(u),a=0;a<u.length;a++)for(o=0;o<u[a].length;o++)h(u[a][o])}1===u.length?u=u[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:u},properties:this.properties};return"id"in this&&(d.id=this.id),d},aZ.prototype.feature=function(r){if(r<0||r>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new aW(this._pbf,n,this.extent,this._keys,this._values)};var aJ={VectorTile:function(r,n){this.layers=r.readFields(aK,{},n)},VectorTileFeature:aW,VectorTileLayer:aZ},a$=aJ.VectorTileFeature.types;function aQ(r,n,i,a,o,s,l,c){r.emplaceBack(n,i,2*Math.floor(8192*a)+l,16384*o,16384*s,Math.round(c))}var a0=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nJ,this.indexArray=new n7,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};a0.prototype.populate=function(r,n,i){this.features=[],this.hasPattern=aN("fill-extrusion",this.layers,n);for(var a=0;a<r.length;a+=1){var o=r[a],s=o.feature,l=o.id,c=o.index,u=o.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,h=iZ(s,f);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),h,i)){var p={id:l,sourceLayerIndex:u,index:c,geometry:f?h.geometry:iY(s),properties:s.properties,type:s.type,patterns:{}};this.hasPattern?this.features.push(aU("fill-extrusion",this.layers,p,this.zoom,n)):this.addFeature(p,p.geometry,c,i,{}),n.featureIndex.insert(s,p.geometry,c,u,this.index,!0)}}},a0.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.features;a<o.length;a+=1){var s=o[a],l=s.geometry;this.addFeature(s,l,s.index,n,i)}},a0.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},a0.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a0.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},a0.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,aG),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},a0.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},a0.prototype.addFeature=function(r,n,i,a,o){for(var s=0,l=az(n,500);s<l.length;s+=1){for(var c=l[s],u=0,f=0;f<c.length;f+=1)u+=c[f].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0;p<c.length;p+=1){var d=c[p];if(0!==d.length&&!(d.every(function(r){return r.x<0})||d.every(function(r){return r.x>8192})||d.every(function(r){return r.y<0})||d.every(function(r){return r.y>8192})))for(var y=0,g=0;g<d.length;g++){var v=d[g];if(g>=1){var m=d[g-1];if((v.x!==m.x||!(v.x<0)&&!(v.x>8192))&&(v.y!==m.y||!(v.y<0)&&!(v.y>8192))){h.vertexLength+4>ib.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=v.sub(m)._perp()._unit(),b=m.dist(v);y+b>32768&&(y=0),aQ(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,0,y),aQ(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,1,y),y+=b,aQ(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,0,y),aQ(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,1,y);var _=h.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+u>ib.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===a$[r.type]){for(var w=[],T=[],A=h.vertexLength,k=0;k<c.length;k+=1){var M=c[k];if(0!==M.length){M!==c[0]&&T.push(w.length/2);for(var S=0;S<M.length;S++){var E=M[S];aQ(this.layoutVertexArray,E.x,E.y,0,0,1,1,0),w.push(E.x),w.push(E.y)}}}for(var I=av(w,T),L=0;L<I.length;L+=3)this.indexArray.emplaceBack(A+I[L],A+I[L+2],A+I[L+1]);h.primitiveLength+=I.length/3,h.vertexLength+=u}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},nn("FillExtrusionBucket",a0,{omit:["layers","features"]});var a1={paint:new nj({"fill-extrusion-opacity":new nR(tO["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nz(tO["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nR(tO["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nR(tO["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nF(tO["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nz(tO["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nz(tO["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nR(tO["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},a2=function(r){function n(n){r.call(this,n,a1)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new a0(r)},n.prototype.queryRadius=function(){return i6(this.paint.get("fill-extrusion-translate"))},n.prototype.is3D=function(){return!0},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l,u){var f=i5(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,l),h=this.paint.get("fill-extrusion-height").evaluate(n,i),p=this.paint.get("fill-extrusion-base").evaluate(n,i),d=function(r,n,i,a){for(var o=[],s=0;s<r.length;s+=1){var l=r[s],u=[l.x,l.y,0,1];ar(u,u,n),o.push(new c(u[0]/u[3],u[1]/u[3]))}return o}(f,u,0,0),y=function(r,n,i,a){for(var o=[],s=[],l=a[8]*n,u=a[9]*n,f=a[10]*n,h=a[11]*n,p=a[8]*i,d=a[9]*i,y=a[10]*i,g=a[11]*i,v=0;v<r.length;v+=1){for(var m=[],x=[],b=0,_=r[v];b<_.length;b+=1){var w=_[b],T=w.x,A=w.y,k=a[0]*T+a[4]*A+a[12],M=a[1]*T+a[5]*A+a[13],S=a[2]*T+a[6]*A+a[14],E=a[3]*T+a[7]*A+a[15],I=S+f,L=E+h,C=k+p,O=M+d,D=S+y,P=E+g,B=new c((k+l)/L,(M+u)/L);B.z=I/L,m.push(B);var R=new c(C/P,O/P);R.z=D/P,x.push(R)}o.push(m),s.push(x)}return[o,s]}(a,p,h,u);return function(r,n,i){var a=1/0;i$(i,n)&&(a=a4(i,n[0]));for(var o=0;o<n.length;o++)for(var s=n[o],l=r[o],c=0;c<s.length-1;c++){var u=s[c],f=s[c+1],h=l[c],p=[u,f,l[c+1],h,u];iJ(i,p)&&(a=Math.min(a,a4(i,p)))}return a!==1/0&&a}(y[0],y[1],d)},n}(nH);function a3(r,n){return r.x*n.x+r.y*n.y}function a4(r,n){if(1===r.length){for(var i,a=0,o=n[a++];!i||o.equals(i);)if(!(i=n[a++]))return 1/0;for(;a<n.length;a++){var s=n[a],l=r[0],c=i.sub(o),u=s.sub(o),f=l.sub(o),h=a3(c,c),p=a3(c,u),d=a3(u,u),y=a3(f,c),g=a3(f,u),v=h*d-p*p,m=(d*y-p*g)/v,x=(h*g-p*y)/v,b=1-m-x,_=o.z*b+i.z*m+s.z*x;if(isFinite(_))return _}return 1/0}for(var w=1/0,T=0;T<n.length;T+=1)w=Math.min(w,n[T].z);return w}var a6=nY([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,a5=nY([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,a8=aJ.VectorTileFeature.types,a7=Math.cos(Math.PI/180*37.5),a9=function(r){var n=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(r){n.gradients[r.id]={}}),this.layoutVertexArray=new n$,this.layoutVertexArray2=new nQ,this.indexArray=new n7,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};a9.prototype.populate=function(r,n,i){this.hasPattern=aN("line",this.layers,n);for(var a=this.layers[0].layout.get("line-sort-key"),o=[],s=0;s<r.length;s+=1){var l=r[s],c=l.feature,u=l.id,f=l.index,h=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=iZ(c,p);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),d,i)){var y=a?a.evaluate(d,{},i):void 0,g={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:f,geometry:p?d.geometry:iY(c),patterns:{},sortKey:y};o.push(g)}}a&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var v=0;v<o.length;v+=1){var m=o[v],x=m.geometry,b=m.index,_=m.sourceLayerIndex;if(this.hasPattern){var w=aU("line",this.layers,m,this.zoom,n);this.patternFeatures.push(w)}else this.addFeature(m,x,b,i,{});var T=r[b].feature;n.featureIndex.insert(T,x,b,_,this.index)}},a9.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},a9.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,n,i)}},a9.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a9.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},a9.prototype.upload=function(r){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,a5)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,a6),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},a9.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},a9.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},a9.prototype.addFeature=function(r,n,i,a,o){var s=this.layers[0].layout,l=s.get("line-join").evaluate(r,{}),c=s.get("line-cap"),u=s.get("line-miter-limit"),f=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var h=0;h<n.length;h+=1){var p=n[h];this.addLine(p,r,l,c,u,f)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},a9.prototype.addLine=function(r,n,i,a,o,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var l=0;l<r.length-1;l++)this.totalDistance+=r[l].dist(r[l+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var c="Polygon"===a8[n.type],u=r.length;u>=2&&r[u-1].equals(r[u-2]);)u--;for(var f=0;f<u-1&&r[f].equals(r[f+1]);)f++;if(!(u<(c?3:2))){"bevel"===i&&(o=1.05);var h,p=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),y=void 0,g=void 0,v=void 0,m=void 0;this.e1=this.e2=-1,c&&(h=r[u-2],m=r[f].sub(h)._unit()._perp());for(var x=f;x<u;x++)if(!(g=x===u-1?c?r[f+1]:void 0:r[x+1])||!r[x].equals(g)){m&&(v=m),h&&(y=h),h=r[x],m=g?g.sub(h)._unit()._perp():v;var b=(v=v||m).add(m);0===b.x&&0===b.y||b._unit();var _=v.x*m.x+v.y*m.y,w=b.x*m.x+b.y*m.y,T=0!==w?1/w:1/0,A=2*Math.sqrt(2-2*w),k=w<a7&&y&&g,M=v.x*m.y-v.y*m.x>0;if(k&&x>f){var S=h.dist(y);if(S>2*p){var E=h.sub(h.sub(y)._mult(p/S)._round());this.updateDistance(y,E),this.addCurrentVertex(E,v,0,0,d),y=E}}var I=y&&g,L=I?i:c?"butt":a;if(I&&"round"===L&&(T<s?L="miter":T<=2&&(L="fakeround")),"miter"===L&&T>o&&(L="bevel"),"bevel"===L&&(T>2&&(L="flipbevel"),T<o&&(L="miter")),y&&this.updateDistance(y,h),"miter"===L)b._mult(T),this.addCurrentVertex(h,b,0,0,d);else if("flipbevel"===L){if(T>100)b=m.mult(-1);else{var C=T*v.add(m).mag()/v.sub(m).mag();b._perp()._mult(C*(M?-1:1))}this.addCurrentVertex(h,b,0,0,d),this.addCurrentVertex(h,b.mult(-1),0,0,d)}else if("bevel"===L||"fakeround"===L){var O=-Math.sqrt(T*T-1),D=M?O:0,P=M?0:O;if(y&&this.addCurrentVertex(h,v,D,P,d),"fakeround"===L)for(var B=Math.round(180*A/Math.PI/20),R=1;R<B;R++){var z=R/B;if(.5!==z){var F=z-.5;z+=z*F*(z-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*F*F+(.848013+_*(.215638*_-1.06021)))}var N=m.sub(v)._mult(z)._add(v)._unit()._mult(M?-1:1);this.addHalfVertex(h,N.x,N.y,!1,M,0,d)}g&&this.addCurrentVertex(h,m,-D,-P,d)}else if("butt"===L)this.addCurrentVertex(h,b,0,0,d);else if("square"===L){var U=y?1:-1;this.addCurrentVertex(h,b,U,U,d)}else"round"===L&&(y&&(this.addCurrentVertex(h,v,0,0,d),this.addCurrentVertex(h,v,1,1,d,!0)),g&&(this.addCurrentVertex(h,m,-1,-1,d,!0),this.addCurrentVertex(h,m,0,0,d)));if(k&&x<u-1){var j=h.dist(g);if(j>2*p){var V=h.add(g.sub(h)._mult(p/j)._round());this.updateDistance(h,V),this.addCurrentVertex(V,m,0,0,d),h=V}}}}},a9.prototype.addCurrentVertex=function(r,n,i,a,o,s){void 0===s&&(s=!1);var l=n.x+n.y*i,c=n.y-n.x*i,u=-n.x+n.y*a,f=-n.y-n.x*a;this.addHalfVertex(r,l,c,s,!1,i,o),this.addHalfVertex(r,u,f,s,!0,-a,o),this.distance>16384&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(r,n,i,a,o,s))},a9.prototype.addHalfVertex=function(r,n,i,a,o,s,l){var c=r.x,u=r.y,f=.5*(this.lineClips?32767*this.scaledDistance:this.scaledDistance);if(this.layoutVertexArray.emplaceBack((c<<1)+(a?1:0),(u<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===s?0:s<0?-1:1)|(63&f)<<2,f>>6),this.lineClips){var h=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(h,this.lineClipsArray.length)}var p=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,p),l.primitiveLength++),o?this.e2=p:this.e1=p},a9.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},a9.prototype.updateDistance=function(r,n){this.distance+=r.dist(n),this.updateScaledDistance()},nn("LineBucket",a9,{omit:["layers","patternFeatures"]});var ot=new nj({"line-cap":new nR(tO.layout_line["line-cap"]),"line-join":new nz(tO.layout_line["line-join"]),"line-miter-limit":new nR(tO.layout_line["line-miter-limit"]),"line-round-limit":new nR(tO.layout_line["line-round-limit"]),"line-sort-key":new nz(tO.layout_line["line-sort-key"])}),oe={paint:new nj({"line-opacity":new nz(tO.paint_line["line-opacity"]),"line-color":new nz(tO.paint_line["line-color"]),"line-translate":new nR(tO.paint_line["line-translate"]),"line-translate-anchor":new nR(tO.paint_line["line-translate-anchor"]),"line-width":new nz(tO.paint_line["line-width"]),"line-gap-width":new nz(tO.paint_line["line-gap-width"]),"line-offset":new nz(tO.paint_line["line-offset"]),"line-blur":new nz(tO.paint_line["line-blur"]),"line-dasharray":new nN(tO.paint_line["line-dasharray"]),"line-pattern":new nF(tO.paint_line["line-pattern"]),"line-gradient":new nU(tO.paint_line["line-gradient"])}),layout:ot},or=new(function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.possiblyEvaluate=function(n,i){return i=new nS(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),r.prototype.possiblyEvaluate.call(this,n,i)},n.prototype.evaluate=function(n,i,a,o){return i=y({},i,{zoom:Math.floor(i.zoom)}),r.prototype.evaluate.call(this,n,i,a,o)},n}(nz))(oe.paint.properties["line-width"].specification);or.useIntegerZoom=!0;var on=function(r){function n(n){r.call(this,n,oe),this.gradientVersion=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._handleSpecialPaintPropertyUpdate=function(r){if("line-gradient"===r){var n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression.expression instanceof eC,this.gradientVersion=(this.gradientVersion+1)%9007199254740991}},n.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},n.prototype.recalculate=function(n,i){r.prototype.recalculate.call(this,n,i),this.paint._values["line-floorwidth"]=or.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},n.prototype.createBucket=function(r){return new a9(r)},n.prototype.queryRadius=function(r){var n,i;return n=i4("line-width",this,r),((i=i4("line-gap-width",this,r))>0?i+2*n:n)/2+Math.abs(i4("line-offset",this,r))+i6(this.paint.get("line-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l){var u,f,h=i5(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,l),p=l/2*(u=this.paint.get("line-width").evaluate(n,i),(f=this.paint.get("line-gap-width").evaluate(n,i))>0?f+2*u:u),d=this.paint.get("line-offset").evaluate(n,i);return d&&(a=function(r,n){for(var i=[],a=new c(0,0),o=0;o<r.length;o++){for(var s=r[o],l=[],u=0;u<s.length;u++){var f=s[u-1],h=s[u],p=s[u+1],d=0===u?a:h.sub(f)._unit()._perp(),y=u===s.length-1?a:p.sub(h)._unit()._perp(),g=d._add(y)._unit(),v=g.x*y.x+g.y*y.y;g._mult(1/v),l.push(g._mult(n)._add(h))}i.push(l)}return i}(a,d*l)),function(r,n,i){for(var a=0;a<n.length;a++){var o=n[a];if(r.length>=3){for(var s=0;s<o.length;s++)if(i3(r,o[s]))return!0}if(function(r,n,i){if(r.length>1){if(iQ(r,n))return!0;for(var a=0;a<n.length;a++)if(i0(n[a],r,i))return!0}for(var o=0;o<r.length;o++)if(i0(r[o],n,i))return!0;return!1}(r,o,i))return!0}return!1}(h,a,p)},n.prototype.isTileClipped=function(){return!0},n}(nH),oi=nY([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oa=nY([{name:"a_projected_pos",components:3,type:"Float32"}],4),oo=(nY([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),nY([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),os=(nY([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),nY([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ol=nY([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);nY([{name:"triangle",components:3,type:"Uint16"}]),nY([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),nY([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),nY([{type:"Float32",name:"offsetX"}]),nY([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var oc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},ou=function(r,n,i,a,o){var s,l,c=8*o-a-1,u=(1<<c)-1,f=u>>1,h=-7,p=i?o-1:0,d=i?-1:1,y=r[n+p];for(p+=d,s=y&(1<<-h)-1,y>>=-h,h+=c;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===u)return l?NaN:1/0*(y?-1:1);l+=Math.pow(2,a),s-=f}return(y?-1:1)*l*Math.pow(2,s-a)},of=function(r,n,i,a,o,s){var l,c,u,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,y=a?0:s-1,g=a?1:-1,v=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(c=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-l))<1&&(l--,u*=2),(n+=l+p>=1?d/u:d*Math.pow(2,1-p))*u>=2&&(l++,u/=2),l+p>=h?(c=0,l=h):l+p>=1?(c=(n*u-1)*Math.pow(2,o),l+=p):(c=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+y]=255&c,y+=g,c/=256,o-=8);for(l=l<<o|c,f+=o;f>0;r[i+y]=255&l,y+=g,l/=256,f-=8);r[i+y-g]|=128*v};function oh(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}oh.Varint=0,oh.Fixed64=1,oh.Bytes=2,oh.Fixed32=5;var op="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function od(r){return r.type===oh.Bytes?r.readVarint()+r.pos:r.pos+1}function oy(r,n,i){var a=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(a);for(var o=i.pos-1;o>=r;o--)i.buf[o+a]=i.buf[o]}function og(r,n){for(var i=0;i<r.length;i++)n.writeVarint(r[i])}function ov(r,n){for(var i=0;i<r.length;i++)n.writeSVarint(r[i])}function om(r,n){for(var i=0;i<r.length;i++)n.writeFloat(r[i])}function ox(r,n){for(var i=0;i<r.length;i++)n.writeDouble(r[i])}function ob(r,n){for(var i=0;i<r.length;i++)n.writeBoolean(r[i])}function o_(r,n){for(var i=0;i<r.length;i++)n.writeFixed32(r[i])}function ow(r,n){for(var i=0;i<r.length;i++)n.writeSFixed32(r[i])}function oT(r,n){for(var i=0;i<r.length;i++)n.writeFixed64(r[i])}function oA(r,n){for(var i=0;i<r.length;i++)n.writeSFixed64(r[i])}function ok(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function oM(r,n,i){r[i]=n,r[i+1]=n>>>8,r[i+2]=n>>>16,r[i+3]=n>>>24}function oS(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}function oE(r,n,i){1===r&&i.readMessage(oI,n)}function oI(r,n,i){if(3===r){var a=i.readMessage(oL,{}),o=a.id,s=a.bitmap,l=a.width,c=a.height,u=a.left,f=a.top,h=a.advance;n.push({id:o,bitmap:new ac({width:l+6,height:c+6},s),metrics:{width:l,height:c,left:u,top:f,advance:h}})}}function oL(r,n,i){1===r?n.id=i.readVarint():2===r?n.bitmap=i.readBytes():3===r?n.width=i.readVarint():4===r?n.height=i.readVarint():5===r?n.left=i.readSVarint():6===r?n.top=i.readSVarint():7===r&&(n.advance=i.readVarint())}function oC(r){for(var n=0,i=0,a=0;a<r.length;a+=1){var o=r[a];n+=o.w*o.h,i=Math.max(i,o.w)}r.sort(function(r,n){return n.h-r.h});for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}],l=0,c=0,u=0;u<r.length;u+=1)for(var f=r[u],h=s.length-1;h>=0;h--){var p=s[h];if(!(f.w>p.w||f.h>p.h)){if(f.x=p.x,f.y=p.y,c=Math.max(c,f.y+f.h),l=Math.max(l,f.x+f.w),f.w===p.w&&f.h===p.h){var d=s.pop();h<s.length&&(s[h]=d)}else f.h===p.h?(p.x+=f.w,p.w-=f.w):(f.w===p.w||s.push({x:p.x+f.w,y:p.y,w:p.w-f.w,h:f.h}),p.y+=f.h,p.h-=f.h);break}}return{w:l,h:c,fill:n/(l*c)||0}}oh.prototype={destroy:function(){this.buf=null},readFields:function(r,n,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),o=a>>3,s=this.pos;this.type=7&a,r(o,n,this),this.pos===s&&this.skip(a)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=ok(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=oS(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ok(this.buf,this.pos)+4294967296*ok(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=ok(this.buf,this.pos)+4294967296*oS(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=ou(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=ou(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,i,a=this.buf;return n=127&(i=a[this.pos++]),i<128?n:(n|=(127&(i=a[this.pos++]))<<7,i<128?n:(n|=(127&(i=a[this.pos++]))<<14,i<128?n:(n|=(127&(i=a[this.pos++]))<<21,i<128?n:function(r,n,i){var a,o,s,l=i.buf;if(o=(112&(s=l[i.pos++]))>>4,s<128||(o|=(127&(s=l[i.pos++]))<<3,s<128)||(o|=(127&(s=l[i.pos++]))<<10,s<128)||(o|=(127&(s=l[i.pos++]))<<17,s<128)||(o|=(127&(s=l[i.pos++]))<<24,s<128)||(o|=(1&(s=l[i.pos++]))<<31,s<128))return a=o,n?4294967296*a+(r>>>0):4294967296*(a>>>0)+(r>>>0);throw Error("Expected varint not more than 10 bytes")}(n|=(15&(i=a[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?-((r+1)/2):r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r,n=this.readVarint()+this.pos,i=this.pos;return this.pos=n,n-i>=12&&op?(r=this.buf,op.decode(r.subarray(i,n))):function(r,n,i){for(var a="",o=n;o<i;){var s,l,c,u=r[o],f=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h>i)break;1===h?u<128&&(f=u):2===h?128==(192&(s=r[o+1]))&&(f=(31&u)<<6|63&s)<=127&&(f=null):3===h?(s=r[o+1],l=r[o+2],128==(192&s)&&128==(192&l)&&((f=(15&u)<<12|(63&s)<<6|63&l)<=2047||f>=55296&&f<=57343)&&(f=null)):4===h&&(s=r[o+1],l=r[o+2],c=r[o+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&((f=(15&u)<<18|(63&s)<<12|(63&l)<<6|63&c)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,h=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),a+=String.fromCharCode(f),o+=h}return a}(this.buf,i,n)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==oh.Bytes)return r.push(this.readVarint(n));var i=od(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==oh.Bytes)return r.push(this.readSVarint());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==oh.Bytes)return r.push(this.readBoolean());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==oh.Bytes)return r.push(this.readFloat());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==oh.Bytes)return r.push(this.readDouble());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==oh.Bytes)return r.push(this.readFixed32());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==oh.Bytes)return r.push(this.readSFixed32());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==oh.Bytes)return r.push(this.readFixed64());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==oh.Bytes)return r.push(this.readSFixed64());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===oh.Varint)for(;this.buf[this.pos++]>127;);else if(n===oh.Bytes)this.pos=this.readVarint()+this.pos;else if(n===oh.Fixed32)this.pos+=4;else{if(n!==oh.Fixed64)throw Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),oM(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),oM(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),oM(this.buf,-1&r,this.pos),oM(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),oM(this.buf,-1&r,this.pos),oM(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(r,n){var i,a,o,s,l;if(r>=0?(i=r%4294967296|0,a=r/4294967296|0):(a=~(-r/4294967296),4294967295^(i=~(-r%4294967296))?i=i+1|0:(i=0,a=a+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");n.realloc(10),o=i,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos]=127&o,l=(7&(s=a))<<4,n.buf[n.pos++]|=l|((s>>>=3)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s)))))}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?-(2*r)-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=function(r,n,i){for(var a,o,s=0;s<n.length;s++){if((a=n.charCodeAt(s))>55295&&a<57344){if(!o){a>56319||s+1===n.length?(r[i++]=239,r[i++]=191,r[i++]=189):o=a;continue}if(a<56320){r[i++]=239,r[i++]=191,r[i++]=189,o=a;continue}a=o-55296<<10|a-56320|65536,o=null}else o&&(r[i++]=239,r[i++]=191,r[i++]=189,o=null);a<128?r[i++]=a:(a<2048?r[i++]=a>>6|192:(a<65536?r[i++]=a>>12|224:(r[i++]=a>>18|240,r[i++]=a>>12&63|128),r[i++]=a>>6&63|128),r[i++]=63&a|128)}return i}(this.buf,r,this.pos);var i=this.pos-n;i>=128&&oy(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),of(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),of(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,n){this.pos++;var i=this.pos;r(n,this);var a=this.pos-i;a>=128&&oy(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(r,n,i){this.writeTag(r,oh.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,og,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,ov,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,ob,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,om,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,ox,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,o_,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,ow,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,oT,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,oA,n)},writeBytesField:function(r,n){this.writeTag(r,oh.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,oh.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,oh.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,oh.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,oh.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,oh.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,oh.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,oh.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,oh.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,oh.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var oO=function(r,n){var i=n.pixelRatio,a=n.version,o=n.stretchX,s=n.stretchY,l=n.content;this.paddedRect=r,this.pixelRatio=i,this.stretchX=o,this.stretchY=s,this.content=l,this.version=a},oD={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};oD.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},oD.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},oD.tlbr.get=function(){return this.tl.concat(this.br)},oD.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(oO.prototype,oD);var oP=function(r,n){var i={},a={};this.haveRenderCallbacks=[];var o=[];this.addImages(r,i,o),this.addImages(n,a,o);var s=oC(o),l=new au({width:s.w||1,height:s.h||1});for(var c in r){var u=r[c],f=i[c].paddedRect;au.copy(u.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},u.data)}for(var h in n){var p=n[h],d=a[h].paddedRect,y=d.x+1,g=d.y+1,v=p.data.width,m=p.data.height;au.copy(p.data,l,{x:0,y:0},{x:y,y:g},p.data),au.copy(p.data,l,{x:0,y:m-1},{x:y,y:g-1},{width:v,height:1}),au.copy(p.data,l,{x:0,y:0},{x:y,y:g+m},{width:v,height:1}),au.copy(p.data,l,{x:v-1,y:0},{x:y-1,y:g},{width:1,height:m}),au.copy(p.data,l,{x:0,y:0},{x:y+v,y:g},{width:1,height:m})}this.image=l,this.iconPositions=i,this.patternPositions=a};oP.prototype.addImages=function(r,n,i){for(var a in r){var o=r[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),n[a]=new oO(s,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(a)}},oP.prototype.patchUpdatedImages=function(r,n){for(var i in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[i],r.getImage(i),n),this.patchUpdatedImage(this.patternPositions[i],r.getImage(i),n)},oP.prototype.patchUpdatedImage=function(r,n,i){if(r&&n&&r.version!==n.version){r.version=n.version;var a=r.tl,o=a[0],s=a[1];i.update(n.data,void 0,{x:o,y:s})}},nn("ImagePosition",oO),nn("ImageAtlas",oP);var oB={horizontal:1,vertical:2,horizontalOnly:3},oR=function(){this.scale=1,this.fontStack="",this.imageName=null};oR.forText=function(r,n){var i=new oR;return i.scale=r||1,i.fontStack=n,i},oR.forImage=function(r){var n=new oR;return n.imageName=r,n};var oz=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function oF(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v){var m,x=oz.fromFeature(r,o);p===oB.vertical&&x.verticalizePunctuation();var b=nM.processBidirectionalText,_=nM.processStyledBidirectionalText;if(b&&1===x.sections.length){m=[];for(var w=0,T=b(x.toString(),oq(x,f,s,n,a,y,g));w<T.length;w+=1){var A=T[w],k=new oz;k.text=A,k.sections=x.sections;for(var M=0;M<A.length;M++)k.sectionIndex.push(0);m.push(k)}}else if(_){m=[];for(var S=0,E=_(x.text,x.sectionIndex,oq(x,f,s,n,a,y,g));S<E.length;S+=1){var I=E[S],L=new oz;L.text=I[0],L.sectionIndex=I[1],L.sections=x.sections,m.push(L)}}else m=function(r,n){for(var i=[],a=r.text,o=0,s=0;s<n.length;s+=1){var l=n[s];i.push(r.substring(o,l)),o=l}return o<a.length&&i.push(r.substring(o,a.length)),i}(x,oq(x,f,s,n,a,y,g));var C=[],O={positionedLines:C,text:x.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(r,n,i,a,o,s,l,c,u,f,h,p){for(var d=0,y=-17,g=0,v=0,m="right"===c?1:"left"===c?0:.5,x=0,b=0;b<o.length;b+=1){var _=o[b];_.trim();var w=_.getMaxScale(),T=(w-1)*24,A={positionedGlyphs:[],lineOffset:0};r.positionedLines[x]=A;var k=A.positionedGlyphs,M=0;if(_.length()){for(var S=0;S<_.length();S++){var E=_.getSection(S),I=_.getSectionIndex(S),L=_.getCharCode(S),C=0,O=null,D=null,P=null,B=24,R=!(u===oB.horizontal||!h&&!nh(L)||h&&(oN[L]||nu.Arabic(L)||nu["Arabic Supplement"](L)||nu["Arabic Extended-A"](L)||nu["Arabic Presentation Forms-A"](L)||nu["Arabic Presentation Forms-B"](L)));if(E.imageName){var z=a[E.imageName];if(!z)continue;P=E.imageName,r.iconsInText=r.iconsInText||!0,D=z.paddedRect;var F=z.displaySize;E.scale=24*E.scale/p,O={width:F[0],height:F[1],left:1,top:-3,advance:R?F[1]:F[0]},C=T+(24-F[1]*E.scale),B=O.advance;var N=R?F[0]*E.scale-24*w:F[1]*E.scale-24*w;N>0&&N>M&&(M=N)}else{var U=i[E.fontStack],j=U&&U[L];if(j&&j.rect)D=j.rect,O=j.metrics;else{var V=n[E.fontStack],H=V&&V[L];if(!H)continue;O=H.metrics}C=(w-E.scale)*24}R?(r.verticalizable=!0,k.push({glyph:L,imageName:P,x:d,y:y+C,vertical:R,scale:E.scale,fontStack:E.fontStack,sectionIndex:I,metrics:O,rect:D}),d+=B*E.scale+f):(k.push({glyph:L,imageName:P,x:d,y:y+C,vertical:R,scale:E.scale,fontStack:E.fontStack,sectionIndex:I,metrics:O,rect:D}),d+=O.advance*E.scale+f)}0!==k.length&&(g=Math.max(d-f,g),function(r,n,i,a,o){if(a||o)for(var s=r[i],l=s.metrics.advance*s.scale,c=(r[i].x+l)*a,u=0;u<=i;u++)r[u].x-=c,r[u].y+=o}(k,0,k.length-1,m,M)),d=0;var q=s*w+M;A.lineOffset=Math.max(M,T),y+=q,v=Math.max(q,v),++x}else y+=s,++x}var G=y- -17,W=oG(l),Y=W.horizontalAlign,Z=W.verticalAlign;(function(r,n,i,a,o,s,l,c,u){var f=(n-i)*o,h=0;h=s!==l?-c*a- -17:(-a*u+.5)*l;for(var p=0;p<r.length;p+=1)for(var d=0,y=r[p].positionedGlyphs;d<y.length;d+=1){var g=y[d];g.x+=f,g.y+=h}})(r.positionedLines,m,Y,Z,g,v,s,G,o.length),r.top+=-Z*G,r.bottom=r.top+G,r.left+=-Y*g,r.right=r.left+g}(O,n,i,a,m,l,c,u,p,f,d,v),!function(r){for(var n=0;n<r.length;n+=1)if(0!==r[n].positionedGlyphs.length)return!1;return!0}(C)&&O}oz.fromFeature=function(r,n){for(var i=new oz,a=0;a<r.sections.length;a++){var o=r.sections[a];o.image?i.addImageSection(o):i.addTextSection(o,n)}return i},oz.prototype.length=function(){return this.text.length},oz.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},oz.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},oz.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},oz.prototype.verticalizePunctuation=function(){this.text=function(r){for(var n="",i=0;i<r.length;i++){var a=r.charCodeAt(i+1)||null,o=r.charCodeAt(i-1)||null;a&&np(a)&&!oc[r[i+1]]||o&&np(o)&&!oc[r[i-1]]||!oc[r[i]]?n+=r[i]:n+=oc[r[i]]}return n}(this.text)},oz.prototype.trim=function(){for(var r=0,n=0;n<this.text.length&&oN[this.text.charCodeAt(n)];n++)r++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=r&&oN[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(r,i),this.sectionIndex=this.sectionIndex.slice(r,i)},oz.prototype.substring=function(r,n){var i=new oz;return i.text=this.text.substring(r,n),i.sectionIndex=this.sectionIndex.slice(r,n),i.sections=this.sections,i},oz.prototype.toString=function(){return this.text},oz.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(n,i){return Math.max(n,r.sections[i].scale)},0)},oz.prototype.addTextSection=function(r,n){this.text+=r.text,this.sections.push(oR.forText(r.scale,r.fontStack||n));for(var i=this.sections.length-1,a=0;a<r.text.length;++a)this.sectionIndex.push(i)},oz.prototype.addImageSection=function(r){var n=r.image?r.image.name:"";if(0!==n.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(oR.forImage(n)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},oz.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oN={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oU={};function oj(r,n,i,a,o,s){if(n.imageName){var l=a[n.imageName];return l?l.displaySize[0]*n.scale*24/s+o:0}var c=i[n.fontStack],u=c&&c[r];return u?u.metrics.advance*n.scale+o:0}function oV(r,n,i,a){var o=Math.pow(r-n,2);return a?r<n?o/2:2*o:o+Math.abs(i)*i}function oH(r,n,i,a,o,s){for(var l=null,c=oV(n,i,o,s),u=0;u<a.length;u+=1){var f=a[u],h=oV(n-f.x,i,o,s)+f.badness;h<=c&&(l=f,c=h)}return{index:r,x:n,priorBreak:l,badness:c}}function oq(r,n,i,a,o,s,l){if("point"!==s||!r)return[];for(var c=[],u=function(r,n,i,a,o,s){for(var l=0,c=0;c<r.length();c++){var u=r.getSection(c);l+=oj(r.getCharCode(c),u,a,o,n,s)}return l/Math.max(1,Math.ceil(l/i))}(r,n,i,a,o,l),f=r.text.indexOf("​")>=0,h=0,p=0;p<r.length();p++){var d=r.getSection(p),y=r.getCharCode(p);if(oN[y]||(h+=oj(y,d,a,o,n,l)),p<r.length()-1){var g=!(y<11904||!(nu["Bopomofo Extended"](y)||nu.Bopomofo(y)||nu["CJK Compatibility Forms"](y)||nu["CJK Compatibility Ideographs"](y)||nu["CJK Compatibility"](y)||nu["CJK Radicals Supplement"](y)||nu["CJK Strokes"](y)||nu["CJK Symbols and Punctuation"](y)||nu["CJK Unified Ideographs Extension A"](y)||nu["CJK Unified Ideographs"](y)||nu["Enclosed CJK Letters and Months"](y)||nu["Halfwidth and Fullwidth Forms"](y)||nu.Hiragana(y)||nu["Ideographic Description Characters"](y)||nu["Kangxi Radicals"](y)||nu["Katakana Phonetic Extensions"](y)||nu.Katakana(y)||nu["Vertical Forms"](y)||nu["Yi Radicals"](y)||nu["Yi Syllables"](y)));(oU[y]||g||d.imageName)&&c.push(oH(p+1,h,u,c,function(r,n,i){var a=0;return 10===r&&(a-=1e4),i&&(a+=150),40!==r&&65288!==r||(a+=50),41!==n&&65289!==n||(a+=50),a}(y,r.getCharCode(p+1),g&&f),!1))}}return function r(n){return n?r(n.priorBreak).concat(n.index):[]}(oH(r.length(),h,u,c,0,!0))}function oG(r){var n=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:n,verticalAlign:i}}function oW(r,n,i,a,o,s){var l,c=r.image;if(c.content){var u=c.content,f=c.pixelRatio||1;l=[u[0]/f,u[1]/f,c.displaySize[0]-u[2]/f,c.displaySize[1]-u[3]/f]}var h,p,d,y,g=n.left*s,v=n.right*s;"width"===i||"both"===i?(y=o[0]+g-a[3],p=o[0]+v+a[1]):p=(y=o[0]+(g+v-c.displaySize[0])/2)+c.displaySize[0];var m=n.top*s,x=n.bottom*s;return"height"===i||"both"===i?(h=o[1]+m-a[0],d=o[1]+x+a[2]):d=(h=o[1]+(m+x-c.displaySize[1])/2)+c.displaySize[1],{image:c,top:h,right:p,bottom:d,left:y,collisionPadding:l}}oU[10]=!0,oU[32]=!0,oU[38]=!0,oU[40]=!0,oU[41]=!0,oU[43]=!0,oU[45]=!0,oU[47]=!0,oU[173]=!0,oU[183]=!0,oU[8203]=!0,oU[8208]=!0,oU[8211]=!0,oU[8231]=!0;var oY=function(r){function n(n,i,a,o){r.call(this,n,i),this.angle=a,void 0!==o&&(this.segment=o)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.clone=function(){return new n(this.x,this.y,this.angle,this.segment)},n}(c);function oZ(r,n){var i=n.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new nS(r+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,o=i.interpolationType,s=0;s<a.length&&a[s]<=r;)s++;for(var l=s=Math.max(0,s-1);l<a.length&&a[l]<r+1;)l++;l=Math.min(a.length-1,l);var c=a[s],u=a[l];return"composite"===i.kind?{kind:"composite",minZoom:c,maxZoom:u,interpolationType:o}:{kind:"camera",minZoom:c,maxZoom:u,minSize:i.evaluate(new nS(c)),maxSize:i.evaluate(new nS(u)),interpolationType:o}}function oX(r,n,i){var a=n.uSize,o=n.uSizeT,s=i.lowerSize,l=i.upperSize;return"source"===r.kind?s/128:"composite"===r.kind?eO(s/128,l/128,o):a}function oK(r,n){var i=0,a=0;if("constant"===r.kind)a=r.layoutSize;else if("source"!==r.kind){var o=r.interpolationType,s=r.minZoom,l=r.maxZoom,c=o?p(eX.interpolationFactor(o,n,s,l),0,1):0;"camera"===r.kind?a=eO(r.minSize,r.maxSize,c):i=c}return{uSizeT:i,uSize:a}}nn("Anchor",oY);var oJ=Object.freeze({__proto__:null,getSizeData:oZ,evaluateSizeForFeature:oX,evaluateSizeForZoom:oK,SIZE_PACK_FACTOR:128});function o$(r,n,i,a,o){if(void 0===n.segment)return!0;for(var s=n,l=n.segment+1,c=0;c>-i/2;){if(--l<0)return!1;c-=r[l].dist(s),s=r[l]}c+=r[l].dist(r[l+1]),l++;for(var u=[],f=0;c<i/2;){var h=r[l-1],p=r[l],d=r[l+1];if(!d)return!1;var y=h.angleTo(p)-p.angleTo(d);for(y=Math.abs((y+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:c,angleDelta:y}),f+=y;c-u[0].distance>a;)f-=u.shift().angleDelta;if(f>o)return!1;l++,c+=p.dist(d)}return!0}function oQ(r){for(var n=0,i=0;i<r.length-1;i++)n+=r[i].dist(r[i+1]);return n}function o0(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function o1(r,n,i,a,o){for(var s=[],l=0;l<r.length;l++)for(var u=r[l],f=void 0,h=0;h<u.length-1;h++){var p=u[h],d=u[h+1];p.x<n&&d.x<n||(p.x<n?p=new c(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round():d.x<n&&(d=new c(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round()),p.y<i&&d.y<i||(p.y<i?p=new c(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round():d.y<i&&(d=new c(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round()),p.x>=a&&d.x>=a||(p.x>=a?p=new c(a,p.y+(d.y-p.y)*((a-p.x)/(d.x-p.x)))._round():d.x>=a&&(d=new c(a,p.y+(d.y-p.y)*((a-p.x)/(d.x-p.x)))._round()),p.y>=o&&d.y>=o||(p.y>=o?p=new c(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round():d.y>=o&&(d=new c(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round()),f&&p.equals(f[f.length-1])||(f=[p],s.push(f)),f.push(d)))))}return s}function o2(r,n,i,a){var o=[],s=r.image,l=s.pixelRatio,u=s.paddedRect.w-2,f=s.paddedRect.h-2,h=r.right-r.left,p=r.bottom-r.top,d=s.stretchX||[[0,u]],y=s.stretchY||[[0,f]],g=function(r,n){return r+n[1]-n[0]},v=d.reduce(g,0),m=y.reduce(g,0),x=u-v,b=f-m,_=0,w=v,T=0,A=m,k=0,M=x,S=0,E=b;if(s.content&&a){var I=s.content;_=o3(d,0,I[0]),T=o3(y,0,I[1]),w=o3(d,I[0],I[2]),A=o3(y,I[1],I[3]),k=I[0]-_,S=I[1]-T,M=I[2]-I[0]-w,E=I[3]-I[1]-A}var L=function(a,o,u,f){var d,y,g,x,b=(a.stretch-_)/w*h+r.left,I=(d=a.fixed-k,d-M*a.stretch/v),L=(o.stretch-T)/A*p+r.top,C=(y=o.fixed-S,y-E*o.stretch/m),O=(u.stretch-_)/w*h+r.left,D=(g=u.fixed-k,g-M*u.stretch/v),P=(f.stretch-T)/A*p+r.top,B=(x=f.fixed-S,x-E*f.stretch/m),R=new c(b,L),z=new c(O,L),F=new c(O,P),N=new c(b,P),U=new c(I/l,C/l),j=new c(D/l,B/l),V=n*Math.PI/180;if(V){var H=Math.sin(V),q=Math.cos(V),G=[q,-H,H,q];R._matMult(G),z._matMult(G),N._matMult(G),F._matMult(G)}var W=a.stretch+a.fixed,Y=u.stretch+u.fixed,Z=o.stretch+o.fixed,X=f.stretch+f.fixed;return{tl:R,tr:z,bl:N,br:F,tex:{x:s.paddedRect.x+1+W,y:s.paddedRect.y+1+Z,w:Y-W,h:X-Z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:U,pixelOffsetBR:j,minFontScaleX:M/l/h,minFontScaleY:E/l/p,isSDF:i}};if(a&&(s.stretchX||s.stretchY))for(var C=o4(d,x,v),O=o4(y,b,m),D=0;D<C.length-1;D++)for(var P=C[D],B=C[D+1],R=0;R<O.length-1;R++){var z=O[R],F=O[R+1];o.push(L(P,z,B,F))}else o.push(L({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:f+1}));return o}function o3(r,n,i){for(var a=0,o=0;o<r.length;o+=1){var s=r[o];a+=Math.max(n,Math.min(i,s[1]))-Math.max(n,Math.min(i,s[0]))}return a}function o4(r,n,i){for(var a=[{fixed:-1,stretch:0}],o=0;o<r.length;o+=1){var s=r[o],l=s[0],c=s[1],u=a[a.length-1];a.push({fixed:l-u.stretch,stretch:u.stretch}),a.push({fixed:l-u.stretch,stretch:u.stretch+(c-l)})}return a.push({fixed:n+1,stretch:i}),a}var o6=function(r,n,i,a,o,s,l,u,f,h){if(this.boxStartIndex=r.length,f){var p=s.top,d=s.bottom,y=s.collisionPadding;y&&(p-=y[1],d+=y[3]);var g=d-p;g>0&&(g=Math.max(10,g),this.circleDiameter=g)}else{var v=s.top*l-u,m=s.bottom*l+u,x=s.left*l-u,b=s.right*l+u,_=s.collisionPadding;if(_&&(x-=_[0]*l,v-=_[1]*l,b+=_[2]*l,m+=_[3]*l),h){var w=new c(x,v),T=new c(b,v),A=new c(x,m),k=new c(b,m),M=h*Math.PI/180;w._rotate(M),T._rotate(M),A._rotate(M),k._rotate(M),x=Math.min(w.x,T.x,A.x,k.x),b=Math.max(w.x,T.x,A.x,k.x),v=Math.min(w.y,T.y,A.y,k.y),m=Math.max(w.y,T.y,A.y,k.y)}r.emplaceBack(n.x,n.y,x,v,b,m,i,a,o)}this.boxEndIndex=r.length},o5=function(r,n){if(void 0===r&&(r=[]),void 0===n&&(n=o8),this.data=r,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function o8(r,n){return r<n?-1:r>n?1:0}function o7(r,n){return n.max-r.max}function o9(r,n,i,a){this.p=new c(r,n),this.h=i,this.d=function(r,n){for(var i=!1,a=1/0,o=0;o<n.length;o++)for(var s=n[o],l=0,c=s.length,u=c-1;l<c;u=l++){var f=s[l],h=s[u];f.y>r.y!=h.y>r.y&&r.x<(h.x-f.x)*(r.y-f.y)/(h.y-f.y)+f.x&&(i=!i),a=Math.min(a,i1(r,f,h))}return(i?1:-1)*Math.sqrt(a)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}o5.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},o5.prototype.pop=function(){if(0!==this.length){var r=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),r}},o5.prototype.peek=function(){return this.data[0]},o5.prototype._up=function(r){for(var n=this.data,i=this.compare,a=n[r];r>0;){var o=r-1>>1,s=n[o];if(i(a,s)>=0)break;n[r]=s,r=o}n[r]=a},o5.prototype._down=function(r){for(var n=this.data,i=this.compare,a=this.length>>1,o=n[r];r<a;){var s=1+(r<<1),l=n[s],c=s+1;if(c<this.length&&0>i(n[c],l)&&(s=c,l=n[c]),i(l,o)>=0)break;n[r]=l,r=s}n[r]=o};var st=Number.POSITIVE_INFINITY;function se(r,n){return n[1]!==st?function(r,n,i){var a=0,o=0;switch(n=Math.abs(n),i=Math.abs(i),r){case"top-right":case"top-left":case"top":o=i-7;break;case"bottom-right":case"bottom-left":case"bottom":o=-i+7}switch(r){case"top-right":case"bottom-right":case"right":a=-n;break;case"top-left":case"bottom-left":case"left":a=n}return[a,o]}(r,n[0],n[1]):function(r,n){var i=0,a=0;n<0&&(n=0);var o=n/Math.sqrt(2);switch(r){case"top-right":case"top-left":a=o-7;break;case"bottom-right":case"bottom-left":a=-o+7;break;case"bottom":a=-n+7;break;case"top":a=n-7}switch(r){case"top-right":case"bottom-right":i=-o;break;case"top-left":case"bottom-left":i=o;break;case"left":i=n;break;case"right":i=-n}return[i,a]}(r,n[0])}function sr(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sn(r,n,i,a,o,s,l,u,f,h,p,d,y,g,v){var m=function(r,n,i,a,o,s,l,u){for(var f=a.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,h=[],p=0,d=n.positionedLines;p<d.length;p+=1)for(var y=d[p],g=0,v=y.positionedGlyphs;g<v.length;g+=1){var m=v[g];if(m.rect){var x=m.rect||{},b=4,_=!0,w=1,T=0,A=(o||u)&&m.vertical,k=m.metrics.advance*m.scale/2;if(u&&n.verticalizable){var M=(m.scale-1)*24,S=(24-m.metrics.width*m.scale)/2;T=y.lineOffset/2-(m.imageName?-S:M)}if(m.imageName){var E=l[m.imageName];_=E.sdf,b=1/(w=E.pixelRatio)}var I=o?[m.x+k,m.y]:[0,0],L=o?[0,0]:[m.x+k+i[0],m.y+i[1]-T],C=[0,0];A&&(C=L,L=[0,0]);var O=(m.metrics.left-b)*m.scale-k+L[0],D=(-m.metrics.top-b)*m.scale+L[1],P=O+x.w*m.scale/w,B=D+x.h*m.scale/w,R=new c(O,D),z=new c(P,D),F=new c(O,B),N=new c(P,B);if(A){var U=new c(-k,k- -17),j=-Math.PI/2,V=12-k,H=m.imageName?V:0,q=new c(22-V,-H),G=new(Function.prototype.bind.apply(c,[null].concat(C)));R._rotateAround(j,U)._add(q)._add(G),z._rotateAround(j,U)._add(q)._add(G),F._rotateAround(j,U)._add(q)._add(G),N._rotateAround(j,U)._add(q)._add(G)}if(f){var W=Math.sin(f),Y=Math.cos(f),Z=[Y,-W,W,Y];R._matMult(Z),z._matMult(Z),F._matMult(Z),N._matMult(Z)}var X=new c(0,0),K=new c(0,0);h.push({tl:R,tr:z,bl:F,br:N,tex:x,writingMode:n.writingMode,glyphOffset:I,sectionIndex:m.sectionIndex,isSDF:_,pixelOffsetTL:X,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}return h}(0,i,u,o,s,l,a,r.allowVerticalPlacement),x=r.textSizeData,b=null;"source"===x.kind?(b=[128*o.layout.get("text-size").evaluate(l,{})])[0]>32640&&M(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===x.kind&&((b=[128*g.compositeTextSizes[0].evaluate(l,{},v),128*g.compositeTextSizes[1].evaluate(l,{},v)])[0]>32640||b[1]>32640)&&M(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,m,b,u,s,l,h,n,f.lineStartIndex,f.lineLength,y,v);for(var _=0;_<p.length;_+=1)d[p[_]]=r.text.placedSymbolArray.length-1;return 4*m.length}function si(r){for(var n in r)return r[n];return null}var sa=aJ.VectorTileFeature.types,so=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ss(r,n,i,a,o,s,l,c,u,f,h,p,d){var y=c?Math.min(32640,Math.round(c[0])):0,g=c?Math.min(32640,Math.round(c[1])):0;r.emplaceBack(n,i,Math.round(32*a),Math.round(32*o),s,l,(y<<1)+(u?1:0),g,16*f,16*h,256*p,256*d)}function sl(r,n,i){r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i)}var sc=function(r){this.layoutVertexArray=new n1,this.indexArray=new n7,this.programConfigurations=r,this.segments=new ib,this.dynamicLayoutVertexArray=new n2,this.opacityVertexArray=new n3,this.placedSymbolArray=new ih};sc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},sc.prototype.upload=function(r,n,i,a){this.isEmpty()||(i&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,oi.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,oa.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,so,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(r))},sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},nn("SymbolBuffers",sc);var su=function(r,n,i){this.layoutVertexArray=new r,this.layoutAttributes=n,this.indexArray=new i,this.segments=new ib,this.collisionVertexArray=new n8};su.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,oo.members,!0)},su.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},nn("CollisionBuffers",su);var sf=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=at([]),this.placementViewportMatrix=at([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oZ(this.zoom,n["text-size"]),this.iconSizeData=oZ(this.zoom,n["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==a.constantOr(1);var s="viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey;this.sortFeaturesByY=s&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(r){return oB[r]})),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id}),this.sourceID=r.sourceID};sf.prototype.createArrays=function(){this.text=new sc(new iq(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new sc(new iq(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new iy,this.lineVertexArray=new ig,this.symbolInstances=new id},sf.prototype.calculateGlyphDependencies=function(r,n,i,a,o){for(var s=0;s<r.length;s++)if(n[r.charCodeAt(s)]=!0,(i||a)&&o){var l=oc[r.charAt(s)];l&&(n[l.charCodeAt(0)]=!0)}},sf.prototype.populate=function(r,n,i){var a=this.layers[0],o=a.layout,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof t5&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),f="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],u||f){for(var p=n.iconDependencies,d=n.glyphDependencies,y=n.availableImages,g=new nS(this.zoom),v=0;v<r.length;v+=1){var m=r[v],x=m.feature,b=m.id,_=m.index,w=m.sourceLayerIndex,T=a._featureFilter.needGeometry,A=iZ(x,T);if(a._featureFilter.filter(g,A,i)){T||(A.geometry=iY(x));var k=void 0;if(u){var M=a.getValueAndResolveTokens("text-field",A,i,y),S=t5.factory(M);(function(r){for(var n=0,i=r.sections;n<i.length;n+=1)if(function(r){for(var n=0;n<r.length;n+=1)if(nd(r[n].charCodeAt(0)))return!0;return!1}(i[n].text))return!0;return!1})(S)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nA()||this.hasRTLText&&nM.isParsed())&&(k=function(r,n,i){return r.sections.forEach(function(r){var a,o;r.text=(a=r.text,"uppercase"===(o=n.layout.get("text-transform").evaluate(i,{}))?a=a.toLocaleUpperCase():"lowercase"===o&&(a=a.toLocaleLowerCase()),nM.applyArabicShaping&&(a=nM.applyArabicShaping(a)),a)}),r}(S,a,A))}var E=void 0;if(f){var I=a.getValueAndResolveTokens("icon-image",A,i,y);E=I instanceof t8?I:t8.fromString(I)}if(k||E){var L=this.sortFeaturesByKey?h.evaluate(A,{},i):void 0,C={id:b,text:k,icon:E,index:_,sourceLayerIndex:w,geometry:A.geometry,properties:x.properties,type:sa[x.type],sortKey:L};if(this.features.push(C),E&&(p[E.name]=!0),k){var O=s.evaluate(A,{},i).join(","),D="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(oB.vertical)>=0;for(var P=0,B=k.sections;P<B.length;P+=1){var R=B[P];if(R.image)p[R.image.name]=!0;else{var z=nf(k.toString()),F=R.fontStack||O,N=d[F]=d[F]||{};this.calculateGlyphDependencies(R.text,N,D,this.allowVerticalPlacement,z)}}}}}}"line"===o.get("symbol-placement")&&(this.features=function(r){var n={},i={},a=[],o=0;function s(n){a.push(r[n]),o++}function l(r,n,o){var s=i[r];return delete i[r],i[n]=s,a[s].geometry[0].pop(),a[s].geometry[0]=a[s].geometry[0].concat(o[0]),s}function c(r,i,o){var s=n[i];return delete n[i],n[r]=s,a[s].geometry[0].shift(),a[s].geometry[0]=o[0].concat(a[s].geometry[0]),s}function u(r,n,i){var a=i?n[0][n[0].length-1]:n[0][0];return r+":"+a.x+":"+a.y}for(var f=0;f<r.length;f++){var h=r[f],p=h.geometry,d=h.text?h.text.toString():null;if(d){var y=u(d,p),g=u(d,p,!0);if(y in i&&g in n&&i[y]!==n[g]){var v=c(y,g,p),m=l(y,g,a[v].geometry);delete n[y],delete i[g],i[u(d,a[m].geometry,!0)]=m,a[v].geometry=null}else y in i?l(y,g,p):g in n?c(y,g,p):(s(f),n[y]=o-1,i[g]=o-1)}else s(f)}return a.filter(function(r){return r.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(r,n){return r.sortKey-n.sortKey})}},sf.prototype.update=function(r,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,n,this.layers,i),this.icon.programConfigurations.updatePaintArrays(r,n,this.layers,i))},sf.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},sf.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},sf.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},sf.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},sf.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},sf.prototype.addToLineVertexArray=function(r,n){var i=this.lineVertexArray.length;if(void 0!==r.segment){for(var a=r.dist(n[r.segment+1]),o=r.dist(n[r.segment]),s={},l=r.segment+1;l<n.length;l++)s[l]={x:n[l].x,y:n[l].y,tileUnitDistanceFromAnchor:a},l<n.length-1&&(a+=n[l+1].dist(n[l]));for(var c=r.segment||0;c>=0;c--)s[c]={x:n[c].x,y:n[c].y,tileUnitDistanceFromAnchor:o},c>0&&(o+=n[c-1].dist(n[c]));for(var u=0;u<n.length;u++){var f=s[u];this.lineVertexArray.emplaceBack(f.x,f.y,f.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},sf.prototype.addSymbols=function(r,n,i,a,o,s,l,c,u,f,h,p){for(var d=r.indexArray,y=r.layoutVertexArray,g=r.segments.prepareSegment(4*n.length,y,d,this.canOverlap?s.sortKey:void 0),v=this.glyphOffsetArray.length,m=g.vertexLength,x=this.allowVerticalPlacement&&l===oB.vertical?Math.PI/2:0,b=s.text&&s.text.sections,_=0;_<n.length;_++){var w=n[_],T=w.tl,A=w.tr,k=w.bl,M=w.br,S=w.tex,E=w.pixelOffsetTL,I=w.pixelOffsetBR,L=w.minFontScaleX,C=w.minFontScaleY,O=w.glyphOffset,D=w.isSDF,P=w.sectionIndex,B=g.vertexLength,R=O[1];ss(y,c.x,c.y,T.x,R+T.y,S.x,S.y,i,D,E.x,E.y,L,C),ss(y,c.x,c.y,A.x,R+A.y,S.x+S.w,S.y,i,D,I.x,E.y,L,C),ss(y,c.x,c.y,k.x,R+k.y,S.x,S.y+S.h,i,D,E.x,I.y,L,C),ss(y,c.x,c.y,M.x,R+M.y,S.x+S.w,S.y+S.h,i,D,I.x,I.y,L,C),sl(r.dynamicLayoutVertexArray,c,x),d.emplaceBack(B,B+1,B+2),d.emplaceBack(B+1,B+2,B+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),_!==n.length-1&&P===n[_+1].sectionIndex||r.programConfigurations.populatePaintArrays(y.length,s,s.index,{},p,b&&b[P])}r.placedSymbolArray.emplaceBack(c.x,c.y,v,this.glyphOffsetArray.length-v,m,u,f,c.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],l,0,!1,0,h)},sf.prototype._addCollisionDebugVertex=function(r,n,i,a,o,s){return n.emplaceBack(0,0),r.emplaceBack(i.x,i.y,a,o,Math.round(s.x),Math.round(s.y))},sf.prototype.addCollisionDebugVertices=function(r,n,i,a,o,s,l){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),f=u.vertexLength,h=o.layoutVertexArray,p=o.collisionVertexArray,d=l.anchorX,y=l.anchorY;this._addCollisionDebugVertex(h,p,s,d,y,new c(r,n)),this._addCollisionDebugVertex(h,p,s,d,y,new c(i,n)),this._addCollisionDebugVertex(h,p,s,d,y,new c(i,a)),this._addCollisionDebugVertex(h,p,s,d,y,new c(r,a)),u.vertexLength+=4;var g=o.indexArray;g.emplaceBack(f,f+1),g.emplaceBack(f+1,f+2),g.emplaceBack(f+2,f+3),g.emplaceBack(f+3,f),u.primitiveLength+=4},sf.prototype.addDebugCollisionBoxes=function(r,n,i,a){for(var o=r;o<n;o++){var s=this.collisionBoxArray.get(o),l=s.x1,c=s.y1,u=s.x2,f=s.y2;this.addCollisionDebugVertices(l,c,u,f,a?this.textCollisionBox:this.iconCollisionBox,s.anchorPoint,i)}},sf.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new su(n6,os.members,ia),this.iconCollisionBox=new su(n6,os.members,ia);for(var r=0;r<this.symbolInstances.length;r++){var n=this.symbolInstances.get(r);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}},sf.prototype._deserializeCollisionBoxesForSymbol=function(r,n,i,a,o,s,l,c,u){for(var f={},h=n;h<i;h++){var p=r.get(h);f.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},f.textFeatureIndex=p.featureIndex;break}for(var d=a;d<o;d++){var y=r.get(d);f.verticalTextBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},f.verticalTextFeatureIndex=y.featureIndex;break}for(var g=s;g<l;g++){var v=r.get(g);f.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},f.iconFeatureIndex=v.featureIndex;break}for(var m=c;m<u;m++){var x=r.get(m);f.verticalIconBox={x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,anchorPointX:x.anchorPointX,anchorPointY:x.anchorPointY},f.verticalIconFeatureIndex=x.featureIndex;break}return f},sf.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var n=0;n<this.symbolInstances.length;n++){var i=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},sf.prototype.hasTextData=function(){return this.text.segments.get().length>0},sf.prototype.hasIconData=function(){return this.icon.segments.get().length>0},sf.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},sf.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},sf.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},sf.prototype.addIndicesForPlacedSymbol=function(r,n){for(var i=r.placedSymbolArray.get(n),a=i.vertexStartIndex+4*i.numGlyphs,o=i.vertexStartIndex;o<a;o+=4)r.indexArray.emplaceBack(o,o+1,o+2),r.indexArray.emplaceBack(o+1,o+2,o+3)},sf.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var n=Math.sin(r),i=Math.cos(r),a=[],o=[],s=[],l=0;l<this.symbolInstances.length;++l){s.push(l);var c=this.symbolInstances.get(l);a.push(0|Math.round(n*c.anchorX+i*c.anchorY)),o.push(c.featureIndex)}return s.sort(function(r,n){return a[r]-a[n]||o[n]-o[r]}),s},sf.prototype.addToSortKeyRanges=function(r,n){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===n?i.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:r+1})},sf.prototype.sortFeatures=function(r){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,a=this.symbolInstanceIndexes;i<a.length;i+=1){var o=a[i],s=this.symbolInstances.get(o);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(function(r,i,a){r>=0&&a.indexOf(r)===i&&n.addIndicesForPlacedSymbol(n.text,r)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},nn("SymbolBucket",sf,{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=sl;var sh=new nj({"symbol-placement":new nR(tO.layout_symbol["symbol-placement"]),"symbol-spacing":new nR(tO.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nR(tO.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nz(tO.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nR(tO.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nR(tO.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new nR(tO.layout_symbol["icon-ignore-placement"]),"icon-optional":new nR(tO.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nR(tO.layout_symbol["icon-rotation-alignment"]),"icon-size":new nz(tO.layout_symbol["icon-size"]),"icon-text-fit":new nR(tO.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nR(tO.layout_symbol["icon-text-fit-padding"]),"icon-image":new nz(tO.layout_symbol["icon-image"]),"icon-rotate":new nz(tO.layout_symbol["icon-rotate"]),"icon-padding":new nR(tO.layout_symbol["icon-padding"]),"icon-keep-upright":new nR(tO.layout_symbol["icon-keep-upright"]),"icon-offset":new nz(tO.layout_symbol["icon-offset"]),"icon-anchor":new nz(tO.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nR(tO.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nR(tO.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nR(tO.layout_symbol["text-rotation-alignment"]),"text-field":new nz(tO.layout_symbol["text-field"]),"text-font":new nz(tO.layout_symbol["text-font"]),"text-size":new nz(tO.layout_symbol["text-size"]),"text-max-width":new nz(tO.layout_symbol["text-max-width"]),"text-line-height":new nR(tO.layout_symbol["text-line-height"]),"text-letter-spacing":new nz(tO.layout_symbol["text-letter-spacing"]),"text-justify":new nz(tO.layout_symbol["text-justify"]),"text-radial-offset":new nz(tO.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nR(tO.layout_symbol["text-variable-anchor"]),"text-anchor":new nz(tO.layout_symbol["text-anchor"]),"text-max-angle":new nR(tO.layout_symbol["text-max-angle"]),"text-writing-mode":new nR(tO.layout_symbol["text-writing-mode"]),"text-rotate":new nz(tO.layout_symbol["text-rotate"]),"text-padding":new nR(tO.layout_symbol["text-padding"]),"text-keep-upright":new nR(tO.layout_symbol["text-keep-upright"]),"text-transform":new nz(tO.layout_symbol["text-transform"]),"text-offset":new nz(tO.layout_symbol["text-offset"]),"text-allow-overlap":new nR(tO.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new nR(tO.layout_symbol["text-ignore-placement"]),"text-optional":new nR(tO.layout_symbol["text-optional"])}),sp={paint:new nj({"icon-opacity":new nz(tO.paint_symbol["icon-opacity"]),"icon-color":new nz(tO.paint_symbol["icon-color"]),"icon-halo-color":new nz(tO.paint_symbol["icon-halo-color"]),"icon-halo-width":new nz(tO.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nz(tO.paint_symbol["icon-halo-blur"]),"icon-translate":new nR(tO.paint_symbol["icon-translate"]),"icon-translate-anchor":new nR(tO.paint_symbol["icon-translate-anchor"]),"text-opacity":new nz(tO.paint_symbol["text-opacity"]),"text-color":new nz(tO.paint_symbol["text-color"],{runtimeType:tq,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new nz(tO.paint_symbol["text-halo-color"]),"text-halo-width":new nz(tO.paint_symbol["text-halo-width"]),"text-halo-blur":new nz(tO.paint_symbol["text-halo-blur"]),"text-translate":new nR(tO.paint_symbol["text-translate"]),"text-translate-anchor":new nR(tO.paint_symbol["text-translate-anchor"])}),layout:sh},sd=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:tU,this.defaultValue=r};sd.prototype.evaluate=function(r){if(r.formattedSection){var n=this.defaultValue.property.overrides;if(n&&n.hasOverride(r.formattedSection))return n.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},sd.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},sd.prototype.outputDefined=function(){return!1},sd.prototype.serialize=function(){return null},nn("FormatSectionOverride",sd,{omit:["defaultValue"]});var sy=function(r){function n(n){r.call(this,n,sp)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.recalculate=function(n,i){if(r.prototype.recalculate.call(this,n,i),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var a=this.layout.get("text-writing-mode");if(a){for(var o=[],s=0;s<a.length;s+=1){var l=a[s];0>o.indexOf(l)&&o.push(l)}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},n.prototype.getValueAndResolveTokens=function(r,n,i,a){var o,s=this.layout.get(r).evaluate(n,{},i,a),l=this._unevaluatedLayout._values[r];return l.isDataDriven()||rA(l.value)||!s?s:(o=n.properties,s.replace(/{([^{}]+)}/g,function(r,n){return n in o?String(o[n]):""}))},n.prototype.createBucket=function(r){return new sf(r)},n.prototype.queryRadius=function(){return 0},n.prototype.queryIntersectsFeature=function(){return!1},n.prototype._setPaintOverrides=function(){for(var r=0,i=sp.paint.overridableProperties;r<i.length;r+=1){var a=i[r];if(n.hasPaintOverride(this.layout,a)){var o,s=this.paint.get(a),l=new rT(new sd(s),s.property.specification);o="constant"===s.value.kind||"source"===s.value.kind?new rM("source",l):new rS("composite",l,s.value.zoomStops,s.value._interpolationType),this.paint._values[a]=new nP(s.property,o,s.parameters)}}},n.prototype._handleOverridablePaintPropertyUpdate=function(r,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven())&&n.hasPaintOverride(this.layout,r)},n.hasPaintOverride=function(r,n){var i=r.get("text-field"),a=sp.paint.properties[n],o=!1,s=function(r){for(var n=0;n<r.length;n+=1){var i=r[n];if(a.overrides&&a.overrides.hasOverride(i))return void(o=!0)}};if("constant"===i.value.kind&&i.value.value instanceof t5)s(i.value.value.sections);else if("source"===i.value.kind){var l=function(r){o||(r instanceof er&&et(r.value)===tZ?s(r.value.sections):r instanceof eo?s(r.sections):r.eachChild(l))},c=i.value;c._styleExpression&&l(c._styleExpression.expression)}return o},n}(nH),sg={paint:new nj({"background-color":new nR(tO.paint_background["background-color"]),"background-pattern":new nN(tO.paint_background["background-pattern"]),"background-opacity":new nR(tO.paint_background["background-opacity"])})},sv=function(r){function n(n){r.call(this,n,sg)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(nH),sm={paint:new nj({"raster-opacity":new nR(tO.paint_raster["raster-opacity"]),"raster-hue-rotate":new nR(tO.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nR(tO.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nR(tO.paint_raster["raster-brightness-max"]),"raster-saturation":new nR(tO.paint_raster["raster-saturation"]),"raster-contrast":new nR(tO.paint_raster["raster-contrast"]),"raster-resampling":new nR(tO.paint_raster["raster-resampling"]),"raster-fade-duration":new nR(tO.paint_raster["raster-fade-duration"])})},sx=function(r){function n(n){r.call(this,n,sm)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(nH),sb=function(r){function n(n){r.call(this,n,{}),this.implementation=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},n.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},n.prototype.recalculate=function(){},n.prototype.updateTransitions=function(){},n.prototype.hasTransition=function(){},n.prototype.serialize=function(){},n.prototype.onAdd=function(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},n.prototype.onRemove=function(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},n}(nH),s_={circle:an,heatmap:ap,hillshade:ay,fill:aq,"fill-extrusion":a2,line:on,symbol:sy,background:sv,raster:sx},sw=u.HTMLImageElement,sT=u.HTMLCanvasElement,sA=u.HTMLVideoElement,sk=u.ImageData,sM=u.ImageBitmap,sS=function(r,n,i,a){this.context=r,this.format=i,this.texture=r.gl.createTexture(),this.update(n,a)};sS.prototype.update=function(r,n,i){var a=r.width,o=r.height,s=!(this.size&&this.size[0]===a&&this.size[1]===o||i),l=this.context,c=l.gl;if(this.useMipmap=!!(n&&n.useMipmap),c.bindTexture(c.TEXTURE_2D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(this.format===c.RGBA&&(!n||!1!==n.premultiply)),s)this.size=[a,o],r instanceof sw||r instanceof sT||r instanceof sA||r instanceof sk||sM&&r instanceof sM?c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,c.UNSIGNED_BYTE,r):c.texImage2D(c.TEXTURE_2D,0,this.format,a,o,0,this.format,c.UNSIGNED_BYTE,r.data);else{var u=i||{x:0,y:0},f=u.x,h=u.y;r instanceof sw||r instanceof sT||r instanceof sA||r instanceof sk||sM&&r instanceof sM?c.texSubImage2D(c.TEXTURE_2D,0,f,h,c.RGBA,c.UNSIGNED_BYTE,r):c.texSubImage2D(c.TEXTURE_2D,0,f,h,a,o,c.RGBA,c.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&c.generateMipmap(c.TEXTURE_2D)},sS.prototype.bind=function(r,n,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),r!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||r),this.filter=r),n!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,n),this.wrap=n)},sS.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},sS.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var sE=function(r){var n=this;this._callback=r,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})};sE.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},sE.prototype.remove=function(){delete this._channel,this._callback=function(){}};var sI=function(r,n,i){this.target=r,this.parent=n,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new sE(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?r:u};function sL(r,n,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[r*a-2*Math.PI*6378137/2,n*a-2*Math.PI*6378137/2]}sI.prototype.send=function(r,n,i,a,o){var s=this;void 0===o&&(o=!1);var l=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[l]=i);var c=C(this.globalScope)?void 0:[];return this.target.postMessage({id:l,type:r,hasCallback:!!i,targetMapId:a,mustQueue:o,sourceMapId:this.mapId,data:ns(n,c)},c),{cancel:function(){i&&delete s.callbacks[l],s.target.postMessage({id:l,type:"<cancel>",targetMapId:a,sourceMapId:s.mapId})}}},sI.prototype.receive=function(r){var n=r.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId)){if("<cancel>"===n.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a()}else E()||n.mustQueue?(this.tasks[i]=n,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,n)}},sI.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),n=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(r,n)}},sI.prototype.processTask=function(r,n){var i=this;if("<response>"===n.type){var a=this.callbacks[r];delete this.callbacks[r],a&&(n.error?a(nl(n.error)):a(null,nl(n.data)))}else{var o=!1,s=C(this.globalScope)?void 0:[],l=n.hasCallback?function(n,a){o=!0,delete i.cancelCallbacks[r],i.target.postMessage({id:r,type:"<response>",sourceMapId:i.mapId,error:n?ns(n):null,data:ns(a,s)},s)}:function(r){o=!0},c=null,u=nl(n.data);if(this.parent[n.type])c=this.parent[n.type](n.sourceMapId,u,l);else if(this.parent.getWorkerSource){var f=n.type.split(".");c=this.parent.getWorkerSource(n.sourceMapId,f[0],u.source)[f[1]](u,l)}else l(Error("Could not find function "+n.type));!o&&c&&c.cancel&&(this.cancelCallbacks[r]=c.cancel)}},sI.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var sC=function(r,n){r&&(n?this.setSouthWest(r).setNorthEast(n):4===r.length?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};sC.prototype.setNorthEast=function(r){return this._ne=r instanceof sO?new sO(r.lng,r.lat):sO.convert(r),this},sC.prototype.setSouthWest=function(r){return this._sw=r instanceof sO?new sO(r.lng,r.lat):sO.convert(r),this},sC.prototype.extend=function(r){var n,i,a=this._sw,o=this._ne;if(r instanceof sO)n=r,i=r;else{if(!(r instanceof sC))return Array.isArray(r)?4===r.length||r.every(Array.isArray)?this.extend(sC.convert(r)):this.extend(sO.convert(r)):this;if(n=r._sw,i=r._ne,!n||!i)return this}return a||o?(a.lng=Math.min(n.lng,a.lng),a.lat=Math.min(n.lat,a.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new sO(n.lng,n.lat),this._ne=new sO(i.lng,i.lat)),this},sC.prototype.getCenter=function(){return new sO((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},sC.prototype.getSouthWest=function(){return this._sw},sC.prototype.getNorthEast=function(){return this._ne},sC.prototype.getNorthWest=function(){return new sO(this.getWest(),this.getNorth())},sC.prototype.getSouthEast=function(){return new sO(this.getEast(),this.getSouth())},sC.prototype.getWest=function(){return this._sw.lng},sC.prototype.getSouth=function(){return this._sw.lat},sC.prototype.getEast=function(){return this._ne.lng},sC.prototype.getNorth=function(){return this._ne.lat},sC.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},sC.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},sC.prototype.isEmpty=function(){return!(this._sw&&this._ne)},sC.prototype.contains=function(r){var n=sO.convert(r),i=n.lng,a=n.lat,o=this._sw.lat<=a&&a<=this._ne.lat,s=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(s=this._sw.lng>=i&&i>=this._ne.lng),o&&s},sC.convert=function(r){return!r||r instanceof sC?r:new sC(r)};var sO=function(r,n){if(isNaN(r)||isNaN(n))throw Error("Invalid LngLat object: ("+r+", "+n+")");if(this.lng=+r,this.lat=+n,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")};sO.prototype.wrap=function(){return new sO(d(this.lng,-180,180),this.lat)},sO.prototype.toArray=function(){return[this.lng,this.lat]},sO.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sO.prototype.distanceTo=function(r){var n=Math.PI/180,i=this.lat*n,a=r.lat*n;return 6371008.8*Math.acos(Math.min(Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((r.lng-this.lng)*n),1))},sO.prototype.toBounds=function(r){void 0===r&&(r=0);var n=360*r/40075017,i=n/Math.cos(Math.PI/180*this.lat);return new sC(new sO(this.lng-i,this.lat-n),new sO(this.lng+i,this.lat+n))},sO.convert=function(r){if(r instanceof sO)return r;if(Array.isArray(r)&&(2===r.length||3===r.length))return new sO(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&"object"==typeof r&&null!==r)return new sO(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var sD=2*Math.PI*6371008.8;function sP(r){return sD*Math.cos(r*Math.PI/180)}function sB(r){return(180+r)/360}function sR(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function sz(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var sF=function(r,n,i){void 0===i&&(i=0),this.x=+r,this.y=+n,this.z=+i};sF.fromLngLat=function(r,n){void 0===n&&(n=0);var i=sO.convert(r);return new sF(sB(i.lng),sR(i.lat),n/sP(i.lat))},sF.prototype.toLngLat=function(){return new sO(360*this.x-180,sz(this.y))},sF.prototype.toAltitude=function(){return this.z*sP(sz(this.y))},sF.prototype.meterInMercatorCoordinateUnits=function(){return 1/sD*(1/Math.cos(sz(this.y)*Math.PI/180))};var sN=function(r,n,i){this.z=r,this.x=n,this.y=i,this.key=sV(0,r,r,n,i)};sN.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},sN.prototype.url=function(r,n){var i,a,o,s,l,c=(i=this.x,a=this.y,s=sL(256*i,256*(a=Math.pow(2,o=this.z)-a-1),o),l=sL(256*(i+1),256*(a+1),o),s[0]+","+s[1]+","+l[0]+","+l[1]),u=function(r,n,i){for(var a,o="",s=r;s>0;s--)o+=(n&(a=1<<s-1)?1:0)+(i&a?2:0);return o}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",c)},sN.prototype.getTilePoint=function(r){var n=Math.pow(2,this.z);return new c((r.x*n-this.x)*8192,(r.y*n-this.y)*8192)},sN.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sU=function(r,n){this.wrap=r,this.canonical=n,this.key=sV(r,n.z,n.z,n.x,n.y)},sj=function(r,n,i,a,o){this.overscaledZ=r,this.wrap=n,this.canonical=new sN(i,+a,+o),this.key=sV(n,r,i,a,o)};function sV(r,n,i,a,o){(r*=2)<0&&(r=-1*r-1);var s=1<<i;return(s*s*r+s*o+a).toString(36)+i.toString(36)+n.toString(36)}sj.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},sj.prototype.scaledTo=function(r){var n=this.canonical.z-r;return r>this.canonical.z?new sj(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sj(r,this.wrap,r,this.canonical.x>>n,this.canonical.y>>n)},sj.prototype.calculateScaledKey=function(r,n){var i=this.canonical.z-r;return r>this.canonical.z?sV(this.wrap*+n,r,this.canonical.z,this.canonical.x,this.canonical.y):sV(this.wrap*+n,r,r,this.canonical.x>>i,this.canonical.y>>i)},sj.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var n=this.canonical.z-r.canonical.z;return 0===r.overscaledZ||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>n&&r.canonical.y===this.canonical.y>>n},sj.prototype.children=function(r){if(this.overscaledZ>=r)return[new sj(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new sj(n,this.wrap,n,i,a),new sj(n,this.wrap,n,i+1,a),new sj(n,this.wrap,n,i,a+1),new sj(n,this.wrap,n,i+1,a+1)]},sj.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},sj.prototype.wrapped=function(){return new sj(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},sj.prototype.unwrapTo=function(r){return new sj(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},sj.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},sj.prototype.toUnwrapped=function(){return new sU(this.wrap,this.canonical)},sj.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},sj.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new sF(r.x-this.wrap,r.y))},nn("CanonicalTileID",sN),nn("OverscaledTileID",sj,{omit:["posMatrix"]});var sH=function(r,n,i){if(this.uid=r,n.height!==n.width)throw RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return M('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=n.height;var a=this.dim=n.height-2;this.data=new Uint32Array(n.data.buffer),this.encoding=i||"mapbox";for(var o=0;o<a;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(a,o)]=this.data[this._idx(a-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,a)]=this.data[this._idx(o,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};sH.prototype.get=function(r,n){var i=new Uint8Array(this.data.buffer),a=4*this._idx(r,n);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])},sH.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},sH.prototype._idx=function(r,n){if(r<-1||r>=this.dim+1||n<-1||n>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(r+1)},sH.prototype._unpackMapbox=function(r,n,i){return(256*r*256+256*n+i)/10-1e4},sH.prototype._unpackTerrarium=function(r,n,i){return 256*r+n+i/256-32768},sH.prototype.getPixels=function(){return new au({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},sH.prototype.backfillBorder=function(r,n,i){if(this.dim!==r.dim)throw Error("dem dimension mismatch");var a=n*this.dim,o=n*this.dim+this.dim,s=i*this.dim,l=i*this.dim+this.dim;switch(n){case -1:a=o-1;break;case 1:o=a+1}switch(i){case -1:s=l-1;break;case 1:l=s+1}for(var c=-n*this.dim,u=-i*this.dim,f=s;f<l;f++)for(var h=a;h<o;h++)this.data[this._idx(h,f)]=r.data[this._idx(h+c,f+u)]},nn("DEMData",sH);var sq=function(r){this._stringToNumber={},this._numberToString=[];for(var n=0;n<r.length;n++){var i=r[n];this._stringToNumber[i]=n,this._numberToString[n]=i}};sq.prototype.encode=function(r){return this._stringToNumber[r]},sq.prototype.decode=function(r){return this._numberToString[r]};var sG=function(r,n,i,a,o){this.type="Feature",this._vectorTileFeature=r,r._z=n,r._x=i,r._y=a,this.properties=r.properties,this.id=o},sW={geometry:{configurable:!0}};sW.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},sW.geometry.set=function(r){this._geometry=r},sG.prototype.toJSON=function(){var r={geometry:this.geometry};for(var n in this)"_geometry"!==n&&"_vectorTileFeature"!==n&&(r[n]=this[n]);return r},Object.defineProperties(sG.prototype,sW);var sY=function(){this.state={},this.stateChanges={},this.deletedStates={}};sY.prototype.updateState=function(r,n,i){var a=String(n);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][a]=this.stateChanges[r][a]||{},y(this.stateChanges[r][a],i),null===this.deletedStates[r])for(var o in this.deletedStates[r]={},this.state[r])o!==a&&(this.deletedStates[r][o]=null);else if(this.deletedStates[r]&&null===this.deletedStates[r][a])for(var s in this.deletedStates[r][a]={},this.state[r][a])i[s]||(this.deletedStates[r][a][s]=null);else for(var l in i)this.deletedStates[r]&&this.deletedStates[r][a]&&null===this.deletedStates[r][a][l]&&delete this.deletedStates[r][a][l]},sY.prototype.removeFeatureState=function(r,n,i){if(null!==this.deletedStates[r]){var a=String(n);if(this.deletedStates[r]=this.deletedStates[r]||{},i&&void 0!==n)null!==this.deletedStates[r][a]&&(this.deletedStates[r][a]=this.deletedStates[r][a]||{},this.deletedStates[r][a][i]=null);else if(void 0!==n){if(this.stateChanges[r]&&this.stateChanges[r][a])for(i in this.deletedStates[r][a]={},this.stateChanges[r][a])this.deletedStates[r][a][i]=null;else this.deletedStates[r][a]=null}else this.deletedStates[r]=null}},sY.prototype.getState=function(r,n){var i=String(n),a=this.state[r]||{},o=this.stateChanges[r]||{},s=y({},a[i],o[i]);if(null===this.deletedStates[r])return{};if(this.deletedStates[r]){var l=this.deletedStates[r][n];if(null===l)return{};for(var c in l)delete s[c]}return s},sY.prototype.initializeTileState=function(r,n){r.setFeatureState(this.state,n)},sY.prototype.coalesceChanges=function(r,n){var i={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var o={};for(var s in this.stateChanges[a])this.state[a][s]||(this.state[a][s]={}),y(this.state[a][s],this.stateChanges[a][s]),o[s]=this.state[a][s];i[a]=o}for(var l in this.deletedStates){this.state[l]=this.state[l]||{};var c={};if(null===this.deletedStates[l])for(var u in this.state[l])c[u]={},this.state[l][u]={};else for(var f in this.deletedStates[l]){if(null===this.deletedStates[l][f])this.state[l][f]={};else for(var h=0,p=Object.keys(this.deletedStates[l][f]);h<p.length;h+=1){var d=p[h];delete this.state[l][f][d]}c[f]=this.state[l][f]}i[l]=i[l]||{},y(i[l],c)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var g in r)r[g].setFeatureState(i,n)};var sZ=function(r,n){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new r9(8192,16,0),this.grid3D=new r9(8192,16,0),this.featureIndexArray=new im,this.promoteId=n};function sX(r,n,i,a,o){return w(r,function(r,s){var l=n instanceof nB?n.get(s):null;return l&&l.evaluate?l.evaluate(i,a,o):l})}function sK(r){for(var n=1/0,i=1/0,a=-1/0,o=-1/0,s=0;s<r.length;s+=1){var l=r[s];n=Math.min(n,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}return{minX:n,minY:i,maxX:a,maxY:o}}function sJ(r,n){return n-r}sZ.prototype.insert=function(r,n,i,a,o,s){var l=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,o);for(var c=s?this.grid3D:this.grid,u=0;u<n.length;u++){for(var f=n[u],h=[1/0,1/0,-1/0,-1/0],p=0;p<f.length;p++){var d=f[p];h[0]=Math.min(h[0],d.x),h[1]=Math.min(h[1],d.y),h[2]=Math.max(h[2],d.x),h[3]=Math.max(h[3],d.y)}h[0]<8192&&h[1]<8192&&h[2]>=0&&h[3]>=0&&c.insert(l,h[0],h[1],h[2],h[3])}},sZ.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new aJ.VectorTile(new oh(this.rawTileData)).layers,this.sourceLayerCoder=new sq(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},sZ.prototype.query=function(r,n,i,a){var o=this;this.loadVTLayers();for(var s=r.params||{},l=8192/r.tileSize/r.scale,u=rF(s.filter),f=r.queryGeometry,h=r.queryPadding*l,p=sK(f),d=this.grid.query(p.minX-h,p.minY-h,p.maxX+h,p.maxY+h),y=sK(r.cameraQueryGeometry),g=0,v=this.grid3D.query(y.minX-h,y.minY-h,y.maxX+h,y.maxY+h,function(n,i,a,o){return function(r,n,i,a,o){for(var s=0;s<r.length;s+=1){var l=r[s];if(n<=l.x&&i<=l.y&&a>=l.x&&o>=l.y)return!0}var u=[new c(n,i),new c(n,o),new c(a,o),new c(a,i)];if(r.length>2){for(var f=0;f<u.length;f+=1)if(i3(r,u[f]))return!0}for(var h=0;h<r.length-1;h++)if(function(r,n,i){var a=i[0],o=i[2];if(r.x<a.x&&n.x<a.x||r.x>o.x&&n.x>o.x||r.y<a.y&&n.y<a.y||r.y>o.y&&n.y>o.y)return!1;var s=S(r,n,i[0]);return s!==S(r,n,i[1])||s!==S(r,n,i[2])||s!==S(r,n,i[3])}(r[h],r[h+1],u))return!0;return!1}(r.cameraQueryGeometry,n-h,i-h,a+h,o+h)});g<v.length;g+=1){var m=v[g];d.push(m)}d.sort(sJ);for(var x,b={},_=0;_<d.length;_++)(function(c){var h=d[c];if(h!==x){x=h;var p=o.featureIndexArray.get(h),y=null;o.loadMatchingFeature(b,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,u,s.layers,s.availableImages,n,i,a,function(n,i,a){return y||(y=iY(n)),i.queryIntersectsFeature(f,n,a,y,o.z,r.transform,l,r.pixelPosMatrix)})}})(_);return b},sZ.prototype.loadMatchingFeature=function(r,n,i,a,o,s,l,c,u,f,h){var p=this.bucketLayerIDs[n];if(!s||function(r,n){for(var i=0;i<r.length;i++)if(n.indexOf(r[i])>=0)return!0;return!1}(s,p)){var d=this.sourceLayerCoder.decode(i),g=this.vtLayers[d].feature(a);if(o.needGeometry){var v=iZ(g,!0);if(!o.filter(new nS(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!o.filter(new nS(this.tileID.overscaledZ),g))return;for(var m=this.getId(g,d),x=0;x<p.length;x++){var b=p[x];if(!(s&&0>s.indexOf(b))){var _=c[b];if(_){var w={};void 0!==m&&f&&(w=f.getState(_.sourceLayer||"_geojsonTileLayer",m));var T=y({},u[b]);T.paint=sX(T.paint,_.paint,g,w,l),T.layout=sX(T.layout,_.layout,g,w,l);var A=!h||h(g,_,w);if(A){var k=new sG(g,this.z,this.x,this.y,m);k.layer=T;var M=r[b];void 0===M&&(M=r[b]=[]),M.push({featureIndex:a,feature:k,intersectionZ:A})}}}}}},sZ.prototype.lookupSymbolFeatures=function(r,n,i,a,o,s,l,c){var u={};this.loadVTLayers();for(var f=rF(o),h=0;h<r.length;h+=1){var p=r[h];this.loadMatchingFeature(u,i,a,p,f,s,l,c,n)}return u},sZ.prototype.hasLayer=function(r){for(var n=0,i=this.bucketLayerIDs;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1)if(r===o[a])return!0;return!1},sZ.prototype.getId=function(r,n){var i=r.id;if(this.promoteId){var a="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];"boolean"==typeof(i=r.properties[a])&&(i=Number(i))}return i},nn("FeatureIndex",sZ,{omit:["rawTileData","sourceLayerCoder"]});var s$=function(r,n){this.tileID=r,this.uid=v(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};s$.prototype.registerFadeDuration=function(r){var n=r+this.timeAdded;n<U.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)},s$.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},s$.prototype.loadVectorData=function(r,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var a in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(r,n){var i={};if(!n)return i;for(var a=function(){var r=s[o],a=r.layerIds.map(function(r){return n.getLayer(r)}).filter(Boolean);if(0!==a.length){r.layers=a,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(function(r){return a.filter(function(n){return n.id===r})[0]}));for(var l=0,c=a;l<c.length;l+=1){var u=c[l];i[u.id]=r}}},o=0,s=r;o<s.length;o+=1)a();return i}(r.buckets,n.style),this.hasSymbolBuckets=!1,this.buckets){var o=this.buckets[a];if(o instanceof sf){if(this.hasSymbolBuckets=!0,!i)break;o.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var s in this.buckets){var l=this.buckets[s];if(l instanceof sf&&l.hasRTLText){this.hasRTLText=!0,nM.isLoading()||nM.isLoaded()||"deferred"!==nA()||nk();break}}for(var c in this.queryPadding=0,this.buckets){var u=this.buckets[c];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(c).queryRadius(u))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new ic},s$.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},s$.prototype.getBucket=function(r){return this.buckets[r.id]},s$.prototype.upload=function(r){for(var n in this.buckets){var i=this.buckets[n];i.uploadPending()&&i.upload(r)}var a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sS(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sS(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},s$.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},s$.prototype.queryRenderedFeatures=function(r,n,i,a,o,s,l,c,u,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:o,scale:s,tileSize:this.tileSize,pixelPosMatrix:f,transform:c,params:l,queryPadding:this.queryPadding*u},r,n,i):{}},s$.prototype.querySourceFeatures=function(r,n){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var a=i.loadVTLayers(),o=n?n.sourceLayer:"",s=a._geojsonTileLayer||a[o];if(s)for(var l=rF(n&&n.filter),c=this.tileID.canonical,u=c.z,f=c.x,h=c.y,p={z:u,x:f,y:h},d=0;d<s.length;d++){var y=s.feature(d);if(l.needGeometry){var g=iZ(y,!0);if(!l.filter(new nS(this.tileID.overscaledZ),g,this.tileID.canonical))continue}else if(!l.filter(new nS(this.tileID.overscaledZ),y))continue;var v=i.getId(y,o),m=new sG(y,u,f,h,v);m.tile=p,r.push(m)}}},s$.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},s$.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},s$.prototype.setExpiryData=function(r){var n=this.expirationTime;if(r.cacheControl){var i=I(r.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var a=Date.now(),o=!1;if(this.expirationTime>a)o=!1;else if(n){if(this.expirationTime<n)o=!0;else{var s=this.expirationTime-n;s?this.expirationTime=a+Math.max(s,3e4):o=!0}}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},s$.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647)},s$.prototype.setFeatureState=function(r,n){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(r).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets)if(n.style.hasLayer(a)){var o=this.buckets[a],s=o.layers[0].sourceLayer||"_geojsonTileLayer",l=i[s],c=r[s];if(l&&c&&0!==Object.keys(c).length){o.update(c,l,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=n&&n.style&&n.style.getLayer(a);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(o)))}}}},s$.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},s$.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()},s$.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},s$.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=U.now()+r},s$.prototype.setDependencies=function(r,n){for(var i={},a=0;a<n.length;a+=1)i[n[a]]=!0;this.dependencies[r]=i},s$.prototype.hasDependency=function(r,n){for(var i=0;i<r.length;i+=1){var a=r[i],o=this.dependencies[a];if(o){for(var s=0;s<n.length;s+=1)if(o[n[s]])return!0}}return!1};var sQ=u.performance,s0=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},sQ.mark(this._marks.start)};s0.prototype.finish=function(){sQ.mark(this._marks.end);var r=sQ.getEntriesByName(this._marks.measure);return 0===r.length&&(sQ.measure(this._marks.measure,this._marks.start,this._marks.end),r=sQ.getEntriesByName(this._marks.measure),sQ.clearMarks(this._marks.start),sQ.clearMarks(this._marks.end),sQ.clearMeasures(this._marks.measure)),r},r.Actor=sI,r.AlphaImage=ac,r.CanonicalTileID=sN,r.CollisionBoxArray=ic,r.Color=t3,r.DEMData=sH,r.DataConstantProperty=nR,r.DictionaryCoder=sq,r.EXTENT=8192,r.ErrorEvent=tL,r.EvaluationParameters=nS,r.Event=tI,r.Evented=tC,r.FeatureIndex=sZ,r.FillBucket=aj,r.FillExtrusionBucket=a0,r.ImageAtlas=oP,r.ImagePosition=oO,r.LineBucket=a9,r.LngLat=sO,r.LngLatBounds=sC,r.MercatorCoordinate=sF,r.ONE_EM=24,r.OverscaledTileID=sj,r.Point=c,r.Point$1=c,r.Properties=nj,r.Protobuf=oh,r.RGBAImage=au,r.RequestManager=W,r.RequestPerformance=s0,r.ResourceType=tv,r.SegmentVector=ib,r.SourceFeatureState=sY,r.StructArrayLayout1ui2=io,r.StructArrayLayout2f1f2i16=n5,r.StructArrayLayout2i4=nX,r.StructArrayLayout3ui6=n7,r.StructArrayLayout4i8=nK,r.SymbolBucket=sf,r.Texture=sS,r.Tile=s$,r.Transitionable=nL,r.Uniform1f=iL,r.Uniform1i=iI,r.Uniform2f=iC,r.Uniform3f=iO,r.Uniform4f=iD,r.UniformColor=iP,r.UniformMatrix4f=iR,r.UnwrappedTileID=sU,r.ValidationError=tD,r.WritingMode=oB,r.ZoomHistory=nc,r.add=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r},r.addDynamicAttributes=sl,r.asyncAll=function(r,n,i){if(!r.length)return i(null,[]);var a=r.length,o=Array(r.length),s=null;r.forEach(function(r,l){n(r,function(r,n){r&&(s=r),o[l]=n,0==--a&&i(s,o)})})},r.bezier=f,r.bindAll=b,r.browser=U,r.cacheEntryPossiblyAdded=function(r){++ty>tf&&(r.getActor().send("enforceCacheSizeLimit",tu),ty=0)},r.clamp=p,r.clearTileCache=function(r){var n=u.caches.delete(tc);r&&n.catch(r).then(function(){return r()})},r.clipLine=o1,r.clone=function(r){var n=new i9(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},r.clone$1=A,r.clone$2=function(r){var n=new i9(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n},r.collisionCircleLayout=ol,r.config=j,r.create=function(){var r=new i9(16);return i9!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},r.create$1=function(){var r=new i9(9);return i9!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},r.create$2=function(){var r=new i9(4);return i9!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},r.createCommonjsModule=n,r.createExpression=rk,r.createLayout=nY,r.createStyleLayer=function(r){return"custom"===r.type?new sb(r):new s_[r.type](r)},r.cross=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],c=i[1],u=i[2];return r[0]=o*u-s*c,r[1]=s*l-a*u,r[2]=a*c-o*l,r},r.deepEqual=function r(n,i){if(Array.isArray(n)){if(!Array.isArray(i)||n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r(n[a],i[a]))return!1;return!0}if("object"==typeof n&&null!==n&&null!==i){if("object"!=typeof i||Object.keys(n).length!==Object.keys(i).length)return!1;for(var o in n)if(!r(n[o],i[o]))return!1;return!0}return n===i},r.dot=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]},r.dot$1=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]},r.ease=h,r.emitValidationErrors=r7,r.endsWith=_,r.enforceCacheSizeLimit=function(r){th(),tr&&tr.then(function(n){n.keys().then(function(i){for(var a=0;a<i.length-r;a++)n.delete(i[a])})})},r.evaluateSizeForFeature=oX,r.evaluateSizeForZoom=oK,r.evaluateVariableOffset=se,r.evented=nT,r.extend=y,r.featureFilter=rF,r.filterObject=T,r.fromRotation=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=i,r[2]=0,r[3]=-i,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},r.getAnchorAlignment=oG,r.getAnchorJustification=sr,r.getArrayBuffer=tT,r.getImage=tM,r.getJSON=function(r,n){return tw(y(r,{type:"json"}),n)},r.getRTLTextPluginStatus=nA,r.getReferrer=t_,r.getVideo=function(r,n){var i,a,o=u.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(var s=0;s<r.length;s++){var l=u.document.createElement("source");i=r[s],a=void 0,(a=u.document.createElement("a")).href=i,a.protocol===u.document.location.protocol&&a.host===u.document.location.host||(o.crossOrigin="Anonymous"),l.src=r[s],o.appendChild(l)}return{cancel:function(){}}},r.identity=at,r.invert=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],h=n[8],p=n[9],d=n[10],y=n[11],g=n[12],v=n[13],m=n[14],x=n[15],b=i*c-a*l,_=i*u-o*l,w=i*f-s*l,T=a*u-o*c,A=a*f-s*c,k=o*f-s*u,M=h*v-p*g,S=h*m-d*g,E=h*x-y*g,I=p*m-d*v,L=p*x-y*v,C=d*x-y*m,O=b*C-_*L+w*I+T*E-A*S+k*M;return O?(O=1/O,r[0]=(c*C-u*L+f*I)*O,r[1]=(o*L-a*C-s*I)*O,r[2]=(v*k-m*A+x*T)*O,r[3]=(d*A-p*k-y*T)*O,r[4]=(u*E-l*C-f*S)*O,r[5]=(i*C-o*E+s*S)*O,r[6]=(m*w-g*k-x*_)*O,r[7]=(h*k-d*w+y*_)*O,r[8]=(l*L-c*E+f*M)*O,r[9]=(a*E-i*L-s*M)*O,r[10]=(g*A-v*w+x*b)*O,r[11]=(p*w-h*A-y*b)*O,r[12]=(c*S-l*I-u*M)*O,r[13]=(i*I-a*S+o*M)*O,r[14]=(v*_-g*T-m*b)*O,r[15]=(h*T-p*_+d*b)*O,r):null},r.isChar=nu,r.isMapboxURL=Y,r.keysDifference=function(r,n){var i=[];for(var a in r)a in n||i.push(a);return i},r.makeRequest=tw,r.mapObject=w,r.mercatorXfromLng=sB,r.mercatorYfromLat=sR,r.mercatorZfromAltitude=function(r,n){return r/sP(n)},r.mul=ae,r.multiply=ae,r.mvt=aJ,r.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},r.normalize=function(r,n){var i=n[0],a=n[1],o=n[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r},r.number=eO,r.offscreenCanvasSupported=tg,r.ortho=function(r,n,i,a,o,s,l){var c=1/(n-i),u=1/(a-o),f=1/(s-l);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*c,r[13]=(o+a)*u,r[14]=(l+s)*f,r[15]=1,r},r.parseGlyphPBF=function(r){return new oh(r).readFields(oE,[])},r.pbf=oh,r.performSymbolLayout=function(r,n,i,a,o,s,l){r.createArrays();var u=512*r.overscaling;r.tilePixelRatio=8192/u,r.compareText={},r.iconsNeedLinear=!1;var f=r.layers[0].layout,h=r.layers[0]._unevaluatedLayout._values,p={};if("composite"===r.textSizeData.kind){var d=r.textSizeData,y=d.minZoom,g=d.maxZoom;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new nS(y),l),h["text-size"].possiblyEvaluate(new nS(g),l)]}if("composite"===r.iconSizeData.kind){var v=r.iconSizeData,m=v.minZoom,x=v.maxZoom;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new nS(m),l),h["icon-size"].possiblyEvaluate(new nS(x),l)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new nS(r.zoom+1),l),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new nS(r.zoom+1),l),p.textMaxSize=h["text-size"].possiblyEvaluate(new nS(18));for(var b=24*f.get("text-line-height"),_="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),w=f.get("text-keep-upright"),T=f.get("text-size"),A=0,k=r.features;A<k.length;A+=1)(function(){var s=k[A],u=f.get("text-font").evaluate(s,{},l).join(","),h=T.evaluate(s,{},l),d=p.layoutTextSize.evaluate(s,{},l),y=p.layoutIconSize.evaluate(s,{},l),g={horizontal:{},vertical:void 0},v=s.text,m=[0,0];if(v){var x=v.toString(),S=24*f.get("text-letter-spacing").evaluate(s,{},l),E=!function(r){for(var n,i=0;i<r.length;i+=1)if(n=r[i].charCodeAt(0),nu.Arabic(n)||nu["Arabic Supplement"](n)||nu["Arabic Extended-A"](n)||nu["Arabic Presentation Forms-A"](n)||nu["Arabic Presentation Forms-B"](n))return!1;return!0}(x)?0:S,I=f.get("text-anchor").evaluate(s,{},l),L=f.get("text-variable-anchor");if(!L){var C=f.get("text-radial-offset").evaluate(s,{},l);m=C?se(I,[24*C,st]):f.get("text-offset").evaluate(s,{},l).map(function(r){return 24*r})}var O=_?"center":f.get("text-justify").evaluate(s,{},l),D=f.get("symbol-placement"),P="point"===D?24*f.get("text-max-width").evaluate(s,{},l):0,B=function(){r.allowVerticalPlacement&&nf(x)&&(g.vertical=oF(v,n,i,o,u,P,b,I,"left",E,m,oB.vertical,!0,D,d,h))};if(!_&&L){for(var R="auto"===O?L.map(function(r){return sr(r)}):[O],z=!1,F=0;F<R.length;F++){var N=R[F];if(!g.horizontal[N]){if(z)g.horizontal[N]=g.horizontal[0];else{var U=oF(v,n,i,o,u,P,b,"center",N,E,m,oB.horizontal,!1,D,d,h);U&&(g.horizontal[N]=U,z=1===U.positionedLines.length)}}}B()}else{"auto"===O&&(O=sr(I));var j=oF(v,n,i,o,u,P,b,I,O,E,m,oB.horizontal,!1,D,d,h);j&&(g.horizontal[O]=j),B(),nf(x)&&_&&w&&(g.vertical=oF(v,n,i,o,u,P,b,I,O,E,m,oB.vertical,!1,D,d,h))}}var V=void 0,H=!1;if(s.icon&&s.icon.name){var q,G,W,Y,Z,X,K,J,$,Q,tt=a[s.icon.name];tt&&(q=o[s.icon.name],G=f.get("icon-offset").evaluate(s,{},l),Y=(W=oG(f.get("icon-anchor").evaluate(s,{},l))).horizontalAlign,Z=W.verticalAlign,X=G[0],K=G[1],$=(J=X-q.displaySize[0]*Y)+q.displaySize[0],Q=K-q.displaySize[1]*Z,V={image:q,top:Q,bottom:Q+q.displaySize[1],left:J,right:$},H=tt.sdf,void 0===r.sdfIcons?r.sdfIcons=tt.sdf:r.sdfIcons!==tt.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tt.pixelRatio!==r.pixelRatio||0!==f.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}var te=si(g.horizontal)||g.vertical;r.iconsInText=!!te&&te.iconsInText,(te||V)&&function(r,n,i,a,o,s,l,u,f,h,p){var d=s.textMaxSize.evaluate(n,{});void 0===d&&(d=l);var y,g=r.layers[0].layout,v=g.get("icon-offset").evaluate(n,{},p),m=si(i.horizontal),x=l/24,b=r.tilePixelRatio*x,_=r.tilePixelRatio*d/24,w=r.tilePixelRatio*u,T=r.tilePixelRatio*g.get("symbol-spacing"),A=g.get("text-padding")*r.tilePixelRatio,k=g.get("icon-padding")*r.tilePixelRatio,S=g.get("text-max-angle")/180*Math.PI,E="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),I="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),L=g.get("symbol-placement"),C=T/2,O=g.get("icon-text-fit");a&&"none"!==O&&(r.allowVerticalPlacement&&i.vertical&&(y=oW(a,i.vertical,O,g.get("icon-text-fit-padding"),v,x)),m&&(a=oW(a,m,O,g.get("icon-text-fit-padding"),v,x)));var D=function(c,u){u.x<0||u.x>=8192||u.y<0||u.y>=8192||function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,S){var E,I,L,C,O,D=r.addToLineVertexArray(n,i),P=0,B=0,R=0,z=0,F=-1,N=-1,U={},j=iT(""),V=0,H=0;if(void 0===c._unevaluatedLayout.getValue("text-radial-offset")?(V=(E=c.layout.get("text-offset").evaluate(w,{},k).map(function(r){return 24*r}))[0],H=E[1]):(V=24*c.layout.get("text-radial-offset").evaluate(w,{},k),H=st),r.allowVerticalPlacement&&a.vertical){var q=c.layout.get("text-rotate").evaluate(w,{},k)+90;C=new o6(u,n,f,h,p,a.vertical,d,y,g,q),l&&(O=new o6(u,n,f,h,p,l,m,x,g,q))}if(o){var G=c.layout.get("icon-rotate").evaluate(w,{}),W="none"!==c.layout.get("icon-text-fit"),Y=o2(o,G,A,W),Z=l?o2(l,G,A,W):void 0;L=new o6(u,n,f,h,p,o,m,x,!1,G),P=4*Y.length;var X=r.iconSizeData,K=null;"source"===X.kind?(K=[128*c.layout.get("icon-size").evaluate(w,{})])[0]>32640&&M(r.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===X.kind&&((K=[128*T.compositeIconSizes[0].evaluate(w,{},k),128*T.compositeIconSizes[1].evaluate(w,{},k)])[0]>32640||K[1]>32640)&&M(r.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),r.addSymbols(r.icon,Y,K,_,b,w,!1,n,D.lineStartIndex,D.lineLength,-1,k),F=r.icon.placedSymbolArray.length-1,Z&&(B=4*Z.length,r.addSymbols(r.icon,Z,K,_,b,w,oB.vertical,n,D.lineStartIndex,D.lineLength,-1,k),N=r.icon.placedSymbolArray.length-1)}for(var J in a.horizontal){var $=a.horizontal[J];I||(j=iT($.text),I=new o6(u,n,f,h,p,$,d,y,g,c.layout.get("text-rotate").evaluate(w,{},k)));var Q=1===$.positionedLines.length;if(R+=sn(r,n,$,s,c,g,w,v,D,a.vertical?oB.horizontal:oB.horizontalOnly,Q?Object.keys(a.horizontal):[J],U,F,T,k),Q)break}a.vertical&&(z+=sn(r,n,a.vertical,s,c,g,w,v,D,oB.vertical,["vertical"],U,N,T,k));var tt=I?I.boxStartIndex:r.collisionBoxArray.length,te=I?I.boxEndIndex:r.collisionBoxArray.length,tr=C?C.boxStartIndex:r.collisionBoxArray.length,tn=C?C.boxEndIndex:r.collisionBoxArray.length,ti=L?L.boxStartIndex:r.collisionBoxArray.length,ta=L?L.boxEndIndex:r.collisionBoxArray.length,to=O?O.boxStartIndex:r.collisionBoxArray.length,ts=O?O.boxEndIndex:r.collisionBoxArray.length,tl=-1,tc=function(r,n){return r&&r.circleDiameter?Math.max(r.circleDiameter,n):n};tl=tc(I,-1),tl=tc(C,tl),tl=tc(L,tl);var tu=(tl=tc(O,tl))>-1?1:0;tu&&(tl*=S/24),r.glyphOffsetArray.length>=sf.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&r.addToSortKeyRanges(r.symbolInstances.length,w.sortKey),r.symbolInstances.emplaceBack(n.x,n.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical||-1,F,N,j,tt,te,tr,tn,ti,ta,to,ts,f,R,z,P,B,tu,0,d,V,H,tl)}(r,u,c,i,a,o,y,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,b,A,E,f,w,k,I,v,n,s,h,p,l)};if("line"===L)for(var P=0,B=o1(n.geometry,0,0,8192,8192);P<B.length;P+=1)for(var R=B[P],z=0,F=function(r,n,i,a,o,s,l,c,u){var f=a?.6*24*l:0,h=o0(a,o),p=h*l,d=0===r[0].x||8192===r[0].x||0===r[0].y||8192===r[0].y;return n-p<n/4&&(n=p+n/4),function r(n,i,a,o,s,l,c,u,f){for(var h=l/2,p=oQ(n),d=0,y=i-a,g=[],v=0;v<n.length-1;v++){for(var m=n[v],x=n[v+1],b=m.dist(x),_=x.angleTo(m);y+a<d+b;){var w=((y+=a)-d)/b,T=eO(m.x,x.x,w),A=eO(m.y,x.y,w);if(T>=0&&T<f&&A>=0&&A<f&&y-h>=0&&y+h<=p){var k=new oY(T,A,_,v);k._round(),o&&!o$(n,k,l,o,s)||g.push(k)}}d+=b}return u||g.length||c||(g=r(n,d/2,a,o,s,l,c,!0,f)),g}(r,d?n/2*c%n:(h/2+48)*l*c%n,n,f,i,p,d,!1,8192)}(R,T,S,i.vertical||m,a,0,_,r.overscaling,8192);z<F.length;z+=1){var N=F[z];m&&function(r,n,i,a){var o=r.compareText;if(n in o){for(var s=o[n],l=s.length-1;l>=0;l--)if(a.dist(s[l])<i)return!0}else o[n]=[];return o[n].push(a),!1}(r,m.text,C,N)||D(R,N)}else if("line-center"===L)for(var U=0,j=n.geometry;U<j.length;U+=1){var V=j[U];if(V.length>1){var H=function(r,n,i,a,o,s){for(var l=i?.6*24*s:0,c=o0(i,a)*s,u=0,f=oQ(r)/2,h=0;h<r.length-1;h++){var p=r[h],d=r[h+1],y=p.dist(d);if(u+y>f){var g=(f-u)/y,v=new oY(eO(p.x,d.x,g),eO(p.y,d.y,g),d.angleTo(p),h);return v._round(),!l||o$(r,v,c,l,n)?v:void 0}u+=y}}(V,S,i.vertical||m,a,0,_);H&&D(V,H)}}else if("Polygon"===n.type)for(var q=0,G=az(n.geometry,0);q<G.length;q+=1){var W=G[q],Y=function(r,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);for(var a=1/0,o=1/0,s=-1/0,l=-1/0,u=r[0],f=0;f<u.length;f++){var h=u[f];(!f||h.x<a)&&(a=h.x),(!f||h.y<o)&&(o=h.y),(!f||h.x>s)&&(s=h.x),(!f||h.y>l)&&(l=h.y)}var p=Math.min(s-a,l-o),d=p/2,y=new o5([],o7);if(0===p)return new c(a,o);for(var g=a;g<s;g+=p)for(var v=o;v<l;v+=p)y.push(new o9(g+d,v+d,d,r));for(var m=function(r){for(var n=0,i=0,a=0,o=r[0],s=0,l=o.length,c=l-1;s<l;c=s++){var u=o[s],f=o[c],h=u.x*f.y-f.x*u.y;i+=(u.x+f.x)*h,a+=(u.y+f.y)*h,n+=3*h}return new o9(i/n,a/n,0,r)}(r),x=y.length;y.length;){var b=y.pop();(b.d>m.d||!m.d)&&(m=b,i&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,x)),b.max-m.d<=n||(d=b.h/2,y.push(new o9(b.p.x-d,b.p.y-d,d,r)),y.push(new o9(b.p.x+d,b.p.y-d,d,r)),y.push(new o9(b.p.x-d,b.p.y+d,d,r)),y.push(new o9(b.p.x+d,b.p.y+d,d,r)),x+=4)}return i&&(console.log("num probes: "+x),console.log("best distance: "+m.d)),m.p}(W,16);D(W[0],new oY(Y.x,Y.y,0))}else if("LineString"===n.type)for(var Z=0,X=n.geometry;Z<X.length;Z+=1){var K=X[Z];D(K,new oY(K[0].x,K[0].y,0))}else if("Point"===n.type)for(var J=0,$=n.geometry;J<$.length;J+=1)for(var Q=0,tt=$[J];Q<tt.length;Q+=1){var te=tt[Q];D([te],new oY(te.x,te.y,0))}}(r,s,g,V,a,p,d,y,m,H,l)})();s&&r.generateCollisionDebugBuffers()},r.perspective=function(r,n,i,a,o){var s,l=1/Math.tan(n/2);return r[0]=l/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=o&&o!==1/0?(s=1/(a-o),r[10]=(o+a)*s,r[14]=2*o*a*s):(r[10]=-1,r[14]=-2*a),r},r.pick=function(r,n){for(var i={},a=0;a<n.length;a++){var o=n[a];o in r&&(i[o]=r[o])}return i},r.plugin=nM,r.polygonIntersectsPolygon=iJ,r.postMapLoadEvent=tl,r.postTurnstileEvent=to,r.potpack=oC,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=nn,r.registerForPluginStateChange=function(r){return r({pluginStatus:nx,pluginURL:nb}),nT.on("pluginStateChange",r),r},r.renderColorRamp=ah,r.rotate=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=Math.sin(i),u=Math.cos(i);return r[0]=a*u+s*c,r[1]=o*u+l*c,r[2]=-(a*c)+s*u,r[3]=-(o*c)+l*u,r},r.rotateX=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=c*o+p*a,r[7]=u*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-c*a,r[11]=d*o-u*a,r},r.rotateZ=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],c=n[2],u=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=c*o+p*a,r[3]=u*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-c*a,r[7]=d*o-u*a,r},r.scale=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},r.scale$1=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r},r.scale$2=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r},r.setCacheLimits=function(r,n){tu=r,tf=n},r.setRTLTextPlugin=function(r,n,i){if(void 0===i&&(i=!1),nx===ny||nx===ng||nx===nv)throw Error("setRTLTextPlugin cannot be called multiple times.");nb=U.resolveURL(r),nx=ny,nm=n,nw(),i||nk()},r.sphericalToCartesian=function(r){var n=r[0],i=r[1],a=r[2];return i+=90,{x:n*Math.cos(i*=Math.PI/180)*Math.sin(a*=Math.PI/180),y:n*Math.sin(i)*Math.sin(a),z:n*Math.cos(a)}},r.sqrLen=function(r){var n=r[0],i=r[1];return n*n+i*i},r.styleSpec=tO,r.sub=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r},r.symbolSize=oJ,r.transformMat3=function(r,n,i){var a=n[0],o=n[1],s=n[2];return r[0]=a*i[0]+o*i[3]+s*i[6],r[1]=a*i[1]+o*i[4]+s*i[7],r[2]=a*i[2]+o*i[5]+s*i[8],r},r.transformMat4=ar,r.translate=function(r,n,i){var a,o,s,l,c,u,f,h,p,d,y,g,v=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*v+n[4]*m+n[8]*x+n[12],r[13]=n[1]*v+n[5]*m+n[9]*x+n[13],r[14]=n[2]*v+n[6]*m+n[10]*x+n[14],r[15]=n[3]*v+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=c,r[5]=u,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=y,r[11]=g,r[12]=a*v+c*m+p*x+n[12],r[13]=o*v+u*m+d*x+n[13],r[14]=s*v+f*m+y*x+n[14],r[15]=l*v+h*m+g*x+n[15]),r},r.triggerPluginCompletionEvent=n_,r.uniqueId=v,r.validateCustomStyleLayer=function(r){var n=[],i=r.id;return void 0===i&&n.push({message:"layers."+i+': missing required property "id"'}),void 0===r.render&&n.push({message:"layers."+i+': missing required method "render"'}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&n.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),n},r.validateLight=r6,r.validateStyle=r2,r.values=function(r){var n=[];for(var i in r)n.push(r[i]);return n},r.vectorTile=aJ,r.version=s,r.warnOnce=M,r.webpSupported=V,r.window=u,r.wrap=d}),a(0,function(r){var n=function(r){this.keyCache={},r&&this.replace(r)};n.prototype.replace=function(r){this._layerConfigs={},this._layers={},this.update(r,[])},n.prototype.update=function(n,i){for(var a=this,o=0;o<n.length;o+=1){var s=n[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=r.createStyleLayer(s);l._featureFilter=r.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0;c<i.length;c+=1){var u=i[c];delete this.keyCache[u],delete this._layerConfigs[u],delete this._layers[u]}this.familiesBySource={};for(var f=0,h=function(n,i){for(var a={},o=0;o<n.length;o++){var s=i&&i[n[o].id]||function(n){for(var i="",a=0,o=r.refProperties;a<o.length;a+=1)i+="/"+function r(n){var i=typeof n;if("number"===i||"boolean"===i||"string"===i||null==n)return JSON.stringify(n);if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o+=1)a+=r(n[o])+",";return a+"]"}for(var s=Object.keys(n).sort(),l="{",c=0;c<s.length;c++)l+=JSON.stringify(s[c])+":"+r(n[s[c]])+",";return l+"}"}(n[o[a]]);return i}(n[o]);i&&(i[n[o].id]=s);var l=a[s];l||(l=a[s]=[]),l.push(n[o])}var c=[];for(var u in a)c.push(a[u]);return c}(r.values(this._layerConfigs),this.keyCache);f<h.length;f+=1){var p=h[f].map(function(r){return a._layers[r.id]}),d=p[0];if("none"!==d.visibility){var y=d.source||"",g=this.familiesBySource[y];g||(g=this.familiesBySource[y]={});var v=d.sourceLayer||"_geojsonTileLayer",m=g[v];m||(m=g[v]=[]),m.push(p)}}};var i=function(n){var i={},a=[];for(var o in n){var s=n[o],l=i[o]={};for(var c in s){var u=s[+c];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var f={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};a.push(f),l[c]={rect:f,metrics:u.metrics}}}}var h=r.potpack(a),p=h.w,d=h.h,y=new r.AlphaImage({width:p||1,height:d||1});for(var g in n){var v=n[g];for(var m in v){var x=v[+m];if(x&&0!==x.bitmap.width&&0!==x.bitmap.height){var b=i[g][m].rect;r.AlphaImage.copy(x.bitmap,y,{x:0,y:0},{x:b.x+1,y:b.y+1},x.bitmap)}}}this.image=y,this.positions=i};r.register("GlyphAtlas",i);var a=function(n){this.tileID=new r.OverscaledTileID(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.uid=n.uid,this.zoom=n.zoom,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId};function o(n,i,a){for(var o=new r.EvaluationParameters(i),s=0;s<n.length;s+=1)n[s].recalculate(o,a)}function s(n,i){var a=r.getArrayBuffer(n.request,function(n,a,o,s){n?i(n):a&&i(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(a)),rawData:a,cacheControl:o,expires:s})});return function(){a.cancel(),i()}}a.prototype.parse=function(n,a,s,l,c){var u=this;this.status="parsing",this.data=n,this.collisionBoxArray=new r.CollisionBoxArray;var f=new r.DictionaryCoder(Object.keys(n.layers).sort()),h=new r.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=[];var p,d,y,g,v={},m={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},x=a.familiesBySource[this.source];for(var b in x){var _=n.layers[b];if(_){1===_.version&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=f.encode(b),T=[],A=0;A<_.length;A++){var k=_.feature(A),M=h.getId(k,b);T.push({feature:k,id:M,index:A,sourceLayerIndex:w})}for(var S=0,E=x[b];S<E.length;S+=1){var I=E[S],L=I[0];L.minzoom&&this.zoom<Math.floor(L.minzoom)||L.maxzoom&&this.zoom>=L.maxzoom||"none"!==L.visibility&&(o(I,this.zoom,s),(v[L.id]=L.createBucket({index:h.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:w,sourceID:this.source})).populate(T,m,this.tileID.canonical),h.bucketLayerIDs.push(I.map(function(r){return r.id})))}}}var C=r.mapObject(m.glyphDependencies,function(r){return Object.keys(r).map(Number)});Object.keys(C).length?l.send("getGlyphs",{uid:this.uid,stacks:C},function(r,n){p||(p=r,d=n,P.call(u))}):d={};var O=Object.keys(m.iconDependencies);O.length?l.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"icons"},function(r,n){p||(p=r,y=n,P.call(u))}):y={};var D=Object.keys(m.patternDependencies);function P(){if(p)return c(p);if(d&&y&&g){var n=new i(d),a=new r.ImageAtlas(y,g);for(var l in v){var u=v[l];u instanceof r.SymbolBucket?(o(u.layers,this.zoom,s),r.performSymbolLayout(u,d,n.positions,y,a.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof r.LineBucket||u instanceof r.FillBucket||u instanceof r.FillExtrusionBucket)&&(o(u.layers,this.zoom,s),u.addFeatures(m,this.tileID.canonical,a.patternPositions))}this.status="done",c(null,{buckets:r.values(v).filter(function(r){return!r.isEmpty()}),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:n.image,imageAtlas:a,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?y:null,glyphPositions:this.returnDependencies?n.positions:null})}}D.length?l.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"patterns"},function(r,n){p||(p=r,g=n,P.call(u))}):g={},P.call(this)};var l=function(r,n,i,a){this.actor=r,this.layerIndex=n,this.availableImages=i,this.loadVectorData=a||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(n,i){var o=this,s=n.uid;this.loading||(this.loading={});var l=!!(n&&n.request&&n.request.collectResourceTiming)&&new r.RequestPerformance(n.request),c=this.loading[s]=new a(n);c.abort=this.loadVectorData(n,function(n,a){if(delete o.loading[s],n||!a)return c.status="done",o.loaded[s]=c,i(n);var u=a.rawData,f={};a.expires&&(f.expires=a.expires),a.cacheControl&&(f.cacheControl=a.cacheControl);var h={};if(l){var p=l.finish();p&&(h.resourceTiming=JSON.parse(JSON.stringify(p)))}c.vectorTile=a.vectorTile,c.parse(a.vectorTile,o.layerIndex,o.availableImages,o.actor,function(n,a){if(n||!a)return i(n);i(null,r.extend({rawTileData:u.slice(0)},a,f,h))}),o.loaded=o.loaded||{},o.loaded[s]=c})},l.prototype.reloadTile=function(r,n){var i=this,a=this.loaded,o=r.uid,s=this;if(a&&a[o]){var l=a[o];l.showCollisionBoxes=r.showCollisionBoxes;var c=function(r,a){var o=l.reloadCallback;o&&(delete l.reloadCallback,l.parse(l.vectorTile,s.layerIndex,i.availableImages,s.actor,o)),n(r,a)};"parsing"===l.status?l.reloadCallback=c:"done"===l.status&&(l.vectorTile?l.parse(l.vectorTile,this.layerIndex,this.availableImages,this.actor,c):c())}},l.prototype.abortTile=function(r,n){var i=this.loading,a=r.uid;i&&i[a]&&i[a].abort&&(i[a].abort(),delete i[a]),n()},l.prototype.removeTile=function(r,n){var i=this.loaded,a=r.uid;i&&i[a]&&delete i[a],n()};var c=r.window.ImageBitmap,u=function(){this.loaded={}};u.prototype.loadTile=function(n,i){var a=n.uid,o=n.encoding,s=n.rawImageData,l=c&&s instanceof c?this.getImageData(s):s,u=new r.DEMData(a,l,o);this.loaded=this.loaded||{},this.loaded[a]=u,i(null,u)},u.prototype.getImageData=function(n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(n.width,n.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=n.width,this.offscreenCanvas.height=n.height,this.offscreenCanvasContext.drawImage(n,0,0,n.width,n.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,n.width+2,n.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:i.width,height:i.height},i.data)},u.prototype.removeTile=function(r){var n=this.loaded,i=r.uid;n&&n[i]&&delete n[i]};var f=function r(n,i){var a,o=n&&n.type;if("FeatureCollection"===o)for(a=0;a<n.features.length;a++)r(n.features[a],i);else if("GeometryCollection"===o)for(a=0;a<n.geometries.length;a++)r(n.geometries[a],i);else if("Feature"===o)r(n.geometry,i);else if("Polygon"===o)h(n.coordinates,i);else if("MultiPolygon"===o)for(a=0;a<n.coordinates.length;a++)h(n.coordinates[a],i);return n};function h(r,n){if(0!==r.length){p(r[0],n);for(var i=1;i<r.length;i++)p(r[i],!n)}}function p(r,n){for(var i=0,a=0,o=r.length,s=o-1;a<o;s=a++)i+=(r[a][0]-r[s][0])*(r[s][1]+r[a][1]);i>=0!=!!n&&r.reverse()}var d=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,y=function(n){this._feature=n,this.extent=r.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))};y.prototype.loadGeometry=function(){if(1===this._feature.type){for(var n=[],i=0,a=this._feature.geometry;i<a.length;i+=1){var o=a[i];n.push([new r.Point$1(o[0],o[1])])}return n}for(var s=[],l=0,c=this._feature.geometry;l<c.length;l+=1){for(var u=[],f=0,h=c[l];f<h.length;f+=1){var p=h[f];u.push(new r.Point$1(p[0],p[1]))}s.push(u)}return s},y.prototype.toGeoJSON=function(r,n,i){return d.call(this,r,n,i)};var g=function(n){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=n.length,this._features=n};g.prototype.feature=function(r){return new y(this._features[r])};var v=r.vectorTile.VectorTileFeature;function m(r,n){this.options=n||{},this.features=r,this.length=r.length}function x(r,n){this.id="number"==typeof r.id?r.id:void 0,this.type=r.type,this.rawGeometry=1===r.type?[r.geometry]:r.geometry,this.properties=r.tags,this.extent=n||4096}m.prototype.feature=function(r){return new x(this.features[r],this.options.extent)},x.prototype.loadGeometry=function(){var n=this.rawGeometry;this.geometry=[];for(var i=0;i<n.length;i++){for(var a=n[i],o=[],s=0;s<a.length;s++)o.push(new r.Point$1(a[s][0],a[s][1]));this.geometry.push(o)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var r=this.geometry,n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<r.length;s++)for(var l=r[s],c=0;c<l.length;c++){var u=l[c];n=Math.min(n,u.x),i=Math.max(i,u.x),a=Math.min(a,u.y),o=Math.max(o,u.y)}return[n,a,i,o]},x.prototype.toGeoJSON=v.prototype.toGeoJSON;var b=_;function _(n){var i=new r.pbf;return function(r,n){for(var i in r.layers)n.writeMessage(3,w,r.layers[i])}(n,i),i.finish()}function w(r,n){n.writeVarintField(15,r.version||1),n.writeStringField(1,r.name||""),n.writeVarintField(5,r.extent||4096);var i,a={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<r.length;i++)a.feature=r.feature(i),n.writeMessage(2,T,a);var o=a.keys;for(i=0;i<o.length;i++)n.writeStringField(3,o[i]);var s=a.values;for(i=0;i<s.length;i++)n.writeMessage(4,M,s[i])}function T(r,n){var i=r.feature;void 0!==i.id&&n.writeVarintField(1,i.id),n.writeMessage(2,A,r),n.writeVarintField(3,i.type),n.writeMessage(4,k,i)}function A(r,n){var i=r.feature,a=r.keys,o=r.values,s=r.keycache,l=r.valuecache;for(var c in i.properties){var u=s[c];void 0===u&&(a.push(c),u=a.length-1,s[c]=u),n.writeVarint(u);var f=i.properties[c],h=typeof f;"string"!==h&&"boolean"!==h&&"number"!==h&&(f=JSON.stringify(f));var p=h+":"+f,d=l[p];void 0===d&&(o.push(f),d=o.length-1,l[p]=d),n.writeVarint(d)}}function k(r,n){for(var i=r.loadGeometry(),a=r.type,o=0,s=0,l=i.length,c=0;c<l;c++){var u=i[c],f=1;1===a&&(f=u.length),n.writeVarint((f<<3)+1);for(var h=3===a?u.length-1:u.length,p=0;p<h;p++){1===p&&1!==a&&n.writeVarint((h-1<<3)+2);var d=u[p].x-o,y=u[p].y-s;n.writeVarint(d<<1^d>>31),n.writeVarint(y<<1^y>>31),o+=d,s+=y}3===a&&n.writeVarint(15)}}function M(r,n){var i=typeof r;"string"===i?n.writeStringField(1,r):"boolean"===i?n.writeBooleanField(7,r):"number"===i&&(r%1!=0?n.writeDoubleField(3,r):r<0?n.writeSVarintField(6,r):n.writeVarintField(5,r))}function S(r,n,i,a){E(r,i,a),E(n,2*i,2*a),E(n,2*i+1,2*a+1)}function E(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function I(r,n,i,a){var o=r-i,s=n-a;return o*o+s*s}b.fromVectorTileJs=_,b.fromGeojsonVt=function(r,n){n=n||{};var i={};for(var a in r)i[a]=new m(r[a].features,n),i[a].name=a,i[a].version=n.version,i[a].extent=n.extent;return _({layers:i})},b.GeoJSONWrapper=m;var L=function(r){return r[0]},C=function(r){return r[1]},O=function(r,n,i,a,o){void 0===n&&(n=L),void 0===i&&(i=C),void 0===a&&(a=64),void 0===o&&(o=Float64Array),this.nodeSize=a,this.points=r;for(var s=r.length<65536?Uint16Array:Uint32Array,l=this.ids=new s(r.length),c=this.coords=new o(2*r.length),u=0;u<r.length;u++)l[u]=u,c[2*u]=n(r[u]),c[2*u+1]=i(r[u]);(function r(n,i,a,o,s,l){if(!(s-o<=a)){var c=o+s>>1;(function r(n,i,a,o,s,l){for(;s>o;){if(s-o>600){var c=s-o+1,u=a-o+1,f=Math.log(c),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1);r(n,i,a,Math.max(o,Math.floor(a-u*h/c+p)),Math.min(s,Math.floor(a+(c-u)*h/c+p)),l)}var d=i[2*a+l],y=o,g=s;for(S(n,i,o,a),i[2*s+l]>d&&S(n,i,o,s);y<g;){for(S(n,i,y,g),y++,g--;i[2*y+l]<d;)y++;for(;i[2*g+l]>d;)g--}i[2*o+l]===d?S(n,i,o,g):S(n,i,++g,s),g<=a&&(o=g+1),a<=g&&(s=g-1)}})(n,i,c,o,s,l%2),r(n,i,a,o,c-1,l+1),r(n,i,a,c+1,s,l+1)}})(l,c,a,0,l.length-1,0)};O.prototype.range=function(r,n,i,a){return function(r,n,i,a,o,s,l){for(var c,u,f=[0,r.length-1,0],h=[];f.length;){var p=f.pop(),d=f.pop(),y=f.pop();if(d-y<=l)for(var g=y;g<=d;g++)c=n[2*g],u=n[2*g+1],c>=i&&c<=o&&u>=a&&u<=s&&h.push(r[g]);else{var v=Math.floor((y+d)/2);c=n[2*v],u=n[2*v+1],c>=i&&c<=o&&u>=a&&u<=s&&h.push(r[v]);var m=(p+1)%2;(0===p?i<=c:a<=u)&&(f.push(y),f.push(v-1),f.push(m)),(0===p?o>=c:s>=u)&&(f.push(v+1),f.push(d),f.push(m))}}return h}(this.ids,this.coords,r,n,i,a,this.nodeSize)},O.prototype.within=function(r,n,i){return function(r,n,i,a,o,s){for(var l=[0,r.length-1,0],c=[],u=o*o;l.length;){var f=l.pop(),h=l.pop(),p=l.pop();if(h-p<=s)for(var d=p;d<=h;d++)I(n[2*d],n[2*d+1],i,a)<=u&&c.push(r[d]);else{var y=Math.floor((p+h)/2),g=n[2*y],v=n[2*y+1];I(g,v,i,a)<=u&&c.push(r[y]);var m=(f+1)%2;(0===f?i-o<=g:a-o<=v)&&(l.push(p),l.push(y-1),l.push(m)),(0===f?i+o>=g:a+o>=v)&&(l.push(y+1),l.push(h),l.push(m))}}return c}(this.ids,this.coords,r,n,i,this.nodeSize)};var D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(r){return r}},P=function(r){this.options=N(Object.create(D),r),this.trees=Array(this.options.maxZoom+1)};function B(r){return{type:"Feature",id:r.id,properties:R(r),geometry:{type:"Point",coordinates:[360*(r.x-.5),360*Math.atan(Math.exp((180-360*r.y)*Math.PI/180))/Math.PI-90]}}}function R(r){var n=r.numPoints,i=n>=1e4?Math.round(n/1e3)+"k":n>=1e3?Math.round(n/100)/10+"k":n;return N(N({},r.properties),{cluster:!0,cluster_id:r.id,point_count:n,point_count_abbreviated:i})}function z(r){return r/360+.5}function F(r){var n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function N(r,n){for(var i in n)r[i]=n[i];return r}function U(r){return r.x}function j(r){return r.y}function V(r,n,i,a){var o={id:void 0===r?null:r,type:n,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(r){var n=r.geometry,i=r.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)H(r,n);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<n.length;a++)H(r,n[a]);else if("MultiPolygon"===i)for(a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)H(r,n[a][o])}(o),o}function H(r,n){for(var i=0;i<n.length;i+=3)r.minX=Math.min(r.minX,n[i]),r.minY=Math.min(r.minY,n[i+1]),r.maxX=Math.max(r.maxX,n[i]),r.maxY=Math.max(r.maxY,n[i+1])}function q(r,n,i,a){if(n.geometry){var o=n.geometry.coordinates,s=n.geometry.type,l=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),c=[],u=n.id;if(i.promoteId?u=n.properties[i.promoteId]:i.generateId&&(u=a||0),"Point"===s)G(o,c);else if("MultiPoint"===s)for(var f=0;f<o.length;f++)G(o[f],c);else if("LineString"===s)W(o,c,l,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(f=0;f<o.length;f++)c=[],W(o[f],c,l,!1),r.push(V(u,"LineString",c,n.properties));return}Y(o,c,l,!1)}else if("Polygon"===s)Y(o,c,l,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(f=0;f<n.geometry.geometries.length;f++)q(r,{id:u,geometry:n.geometry.geometries[f],properties:n.properties},i,a);return}throw Error("Input data is not a valid GeoJSON object.")}for(f=0;f<o.length;f++){var h=[];Y(o[f],h,l,!0),c.push(h)}}r.push(V(u,s,c,n.properties))}}function G(r,n){n.push(r[0]/360+.5),n.push(Z(r[1])),n.push(0)}function W(r,n,i,a){for(var o,s,l=0,c=0;c<r.length;c++){var u=r[c][0]/360+.5,f=Z(r[c][1]);n.push(u),n.push(f),n.push(0),c>0&&(l+=a?(o*f-u*s)/2:Math.sqrt(Math.pow(u-o,2)+Math.pow(f-s,2))),o=u,s=f}var h=n.length-3;n[2]=1,function r(n,i,a,o){for(var s,l=o,c=a-i>>1,u=a-i,f=n[i],h=n[i+1],p=n[a],d=n[a+1],y=i+3;y<a;y+=3){var g=function(r,n,i,a,o,s){var l=o-i,c=s-a;if(0!==l||0!==c){var u=((r-i)*l+(n-a)*c)/(l*l+c*c);u>1?(i=o,a=s):u>0&&(i+=l*u,a+=c*u)}return(l=r-i)*l+(c=n-a)*c}(n[y],n[y+1],f,h,p,d);if(g>l)s=y,l=g;else if(g===l){var v=Math.abs(y-c);v<u&&(s=y,u=v)}}l>o&&(s-i>3&&r(n,i,s,o),n[s+2]=l,a-s>3&&r(n,s,a,o))}(n,0,h,i),n[h+2]=1,n.size=Math.abs(l),n.start=0,n.end=n.size}function Y(r,n,i,a){for(var o=0;o<r.length;o++){var s=[];W(r[o],s,i,a),n.push(s)}}function Z(r){var n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function X(r,n,i,a,o,s,l,c){if(a/=n,s>=(i/=n)&&l<a)return r;if(l<i||s>=a)return null;for(var u=[],f=0;f<r.length;f++){var h=r[f],p=h.geometry,d=h.type,y=0===o?h.minX:h.minY,g=0===o?h.maxX:h.maxY;if(y>=i&&g<a)u.push(h);else if(!(g<i||y>=a)){var v=[];if("Point"===d||"MultiPoint"===d)(function(r,n,i,a,o){for(var s=0;s<r.length;s+=3){var l=r[s+o];l>=i&&l<=a&&(n.push(r[s]),n.push(r[s+1]),n.push(r[s+2]))}})(p,v,i,a,o);else if("LineString"===d)K(p,v,i,a,o,!1,c.lineMetrics);else if("MultiLineString"===d)$(p,v,i,a,o,!1);else if("Polygon"===d)$(p,v,i,a,o,!0);else if("MultiPolygon"===d)for(var m=0;m<p.length;m++){var x=[];$(p[m],x,i,a,o,!0),x.length&&v.push(x)}if(v.length){if(c.lineMetrics&&"LineString"===d){for(m=0;m<v.length;m++)u.push(V(h.id,d,v[m],h.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===v.length?(d="LineString",v=v[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===v.length?"Point":"MultiPoint"),u.push(V(h.id,d,v,h.tags))}}}return u.length?u:null}function K(r,n,i,a,o,s,l){for(var c,u,f=J(r),h=0===o?tt:te,p=r.start,d=0;d<r.length-3;d+=3){var y=r[d],g=r[d+1],v=r[d+2],m=r[d+3],x=r[d+4],b=0===o?y:g,_=0===o?m:x,w=!1;l&&(c=Math.sqrt(Math.pow(y-m,2)+Math.pow(g-x,2))),b<i?_>i&&(u=h(f,y,g,m,x,i),l&&(f.start=p+c*u)):b>a?_<a&&(u=h(f,y,g,m,x,a),l&&(f.start=p+c*u)):Q(f,y,g,v),_<i&&b>=i&&(u=h(f,y,g,m,x,i),w=!0),_>a&&b<=a&&(u=h(f,y,g,m,x,a),w=!0),!s&&w&&(l&&(f.end=p+c*u),n.push(f),f=J(r)),l&&(p+=c)}var T=r.length-3;y=r[T],g=r[T+1],v=r[T+2],(b=0===o?y:g)>=i&&b<=a&&Q(f,y,g,v),T=f.length-3,s&&T>=3&&(f[T]!==f[0]||f[T+1]!==f[1])&&Q(f,f[0],f[1],f[2]),f.length&&n.push(f)}function J(r){var n=[];return n.size=r.size,n.start=r.start,n.end=r.end,n}function $(r,n,i,a,o,s){for(var l=0;l<r.length;l++)K(r[l],n,i,a,o,s,!1)}function Q(r,n,i,a){r.push(n),r.push(i),r.push(a)}function tt(r,n,i,a,o,s){var l=(s-n)/(a-n);return r.push(s),r.push(i+(o-i)*l),r.push(1),l}function te(r,n,i,a,o,s){var l=(s-i)/(o-i);return r.push(n+(a-n)*l),r.push(s),r.push(1),l}function tr(r,n){for(var i=[],a=0;a<r.length;a++){var o,s=r[a],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)o=tn(s.geometry,n);else if("MultiLineString"===l||"Polygon"===l){o=[];for(var c=0;c<s.geometry.length;c++)o.push(tn(s.geometry[c],n))}else if("MultiPolygon"===l)for(o=[],c=0;c<s.geometry.length;c++){for(var u=[],f=0;f<s.geometry[c].length;f++)u.push(tn(s.geometry[c][f],n));o.push(u)}i.push(V(s.id,l,o,s.tags))}return i}function tn(r,n){var i=[];i.size=r.size,void 0!==r.start&&(i.start=r.start,i.end=r.end);for(var a=0;a<r.length;a+=3)i.push(r[a]+n,r[a+1],r[a+2]);return i}function ti(r,n){if(r.transformed)return r;var i,a,o,s=1<<r.z,l=r.x,c=r.y;for(i=0;i<r.features.length;i++){var u=r.features[i],f=u.geometry,h=u.type;if(u.geometry=[],1===h)for(a=0;a<f.length;a+=2)u.geometry.push(ta(f[a],f[a+1],n,s,l,c));else for(a=0;a<f.length;a++){var p=[];for(o=0;o<f[a].length;o+=2)p.push(ta(f[a][o],f[a][o+1],n,s,l,c));u.geometry.push(p)}}return r.transformed=!0,r}function ta(r,n,i,a,o,s){return[Math.round(i*(r*a-o)),Math.round(i*(n*a-s))]}function to(r,n,i,a,o,s){var l=a*a;if(a>0&&n.size<(o?l:a))i.numPoints+=n.length/3;else{for(var c=[],u=0;u<n.length;u+=3)(0===a||n[u+2]>l)&&(i.numSimplified++,c.push(n[u]),c.push(n[u+1])),i.numPoints++;o&&function(r,n){for(var i=0,a=0,o=r.length,s=o-2;a<o;s=a,a+=2)i+=(r[a]-r[s])*(r[a+1]+r[s+1]);if(i>0===n)for(a=0,o=r.length;a<o/2;a+=2){var l=r[a],c=r[a+1];r[a]=r[o-2-a],r[a+1]=r[o-1-a],r[o-2-a]=l,r[o-1-a]=c}}(c,s),r.push(c)}}function ts(r,n){var i,a,o,s,l,c,u=(n=this.options=function(r,n){for(var i in n)r[i]=n[i];return r}(Object.create(this.options),n)).debug;if(u&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw Error("promoteId and generateId cannot be used together.");var f=function(r,n){var i=[];if("FeatureCollection"===r.type)for(var a=0;a<r.features.length;a++)q(i,r.features[a],n,a);else"Feature"===r.type?q(i,r,n):q(i,{geometry:r},n);return i}(r,n);this.tiles={},this.tileCoords=[],u&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=f,o=(a=n).buffer/a.extent,s=i,l=X(i,1,-1-o,o,0,-1,2,a),c=X(i,1,1-o,2+o,0,-1,2,a),(l||c)&&(s=X(i,1,-o,1+o,0,-1,2,a)||[],l&&(s=tr(l,1).concat(s)),c&&(s=s.concat(tr(c,-1)))),f=s).length&&this.splitTile(f,0,0,0),u&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tl(r,n,i){return 32*((1<<r)*i+n)+r}function tc(r,n){var i=r.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);var a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return n(null,null);var o=new g(a.features),s=b(o);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),n(null,{vectorTile:o,rawData:s.buffer})}P.prototype.load=function(r){var n=this.options,i=n.log,a=n.minZoom,o=n.maxZoom,s=n.nodeSize;i&&console.time("total time");var l="prepare "+r.length+" points";i&&console.time(l),this.points=r;for(var c=[],u=0;u<r.length;u++)r[u].geometry&&c.push(function(r,n){var i=r.geometry.coordinates,a=i[0],o=i[1];return{x:z(a),y:F(o),zoom:1/0,index:n,parentId:-1}}(r[u],u));this.trees[o+1]=new O(c,U,j,s,Float32Array),i&&console.timeEnd(l);for(var f=o;f>=a;f--){var h=+Date.now();c=this._cluster(c,f),this.trees[f]=new O(c,U,j,s,Float32Array),i&&console.log("z%d: %d clusters in %dms",f,c.length,+Date.now()-h)}return i&&console.timeEnd("total time"),this},P.prototype.getClusters=function(r,n){var i=((r[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,r[1])),o=180===r[2]?180:((r[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,r[3]));if(r[2]-r[0]>=360)i=-180,o=180;else if(i>o){var l=this.getClusters([i,a,180,s],n),c=this.getClusters([-180,a,o,s],n);return l.concat(c)}for(var u=this.trees[this._limitZoom(n)],f=[],h=0,p=u.range(z(i),F(s),z(o),F(a));h<p.length;h+=1){var d=p[h],y=u.points[d];f.push(y.numPoints?B(y):this.points[y.index])}return f},P.prototype.getChildren=function(r){var n=this._getOriginId(r),i=this._getOriginZoom(r),a="No cluster with the specified id.",o=this.trees[i];if(!o)throw Error(a);var s=o.points[n];if(!s)throw Error(a);for(var l=this.options.radius/(this.options.extent*Math.pow(2,i-1)),c=[],u=0,f=o.within(s.x,s.y,l);u<f.length;u+=1){var h=f[u],p=o.points[h];p.parentId===r&&c.push(p.numPoints?B(p):this.points[p.index])}if(0===c.length)throw Error(a);return c},P.prototype.getLeaves=function(r,n,i){n=n||10,i=i||0;var a=[];return this._appendLeaves(a,r,n,i,0),a},P.prototype.getTile=function(r,n,i){var a=this.trees[this._limitZoom(r)],o=Math.pow(2,r),s=this.options,l=s.extent,c=s.radius/l,u=(i-c)/o,f=(i+1+c)/o,h={features:[]};return this._addTileFeatures(a.range((n-c)/o,u,(n+1+c)/o,f),a.points,n,i,o,h),0===n&&this._addTileFeatures(a.range(1-c/o,u,1,f),a.points,o,i,o,h),n===o-1&&this._addTileFeatures(a.range(0,u,c/o,f),a.points,-1,i,o,h),h.features.length?h:null},P.prototype.getClusterExpansionZoom=function(r){for(var n=this._getOriginZoom(r)-1;n<=this.options.maxZoom;){var i=this.getChildren(r);if(n++,1!==i.length)break;r=i[0].properties.cluster_id}return n},P.prototype._appendLeaves=function(r,n,i,a,o){for(var s=0,l=this.getChildren(n);s<l.length;s+=1){var c=l[s],u=c.properties;if(u&&u.cluster?o+u.point_count<=a?o+=u.point_count:o=this._appendLeaves(r,u.cluster_id,i,a,o):o<a?o++:r.push(c),r.length===i)break}return o},P.prototype._addTileFeatures=function(r,n,i,a,o,s){for(var l=0;l<r.length;l+=1){var c=n[r[l]],u=c.numPoints,f={type:1,geometry:[[Math.round(this.options.extent*(c.x*o-i)),Math.round(this.options.extent*(c.y*o-a))]],tags:u?R(c):this.points[c.index].properties},h=void 0;u?h=c.id:this.options.generateId?h=c.index:this.points[c.index].id&&(h=this.points[c.index].id),void 0!==h&&(f.id=h),s.features.push(f)}},P.prototype._limitZoom=function(r){return Math.max(this.options.minZoom,Math.min(+r,this.options.maxZoom+1))},P.prototype._cluster=function(r,n){for(var i=[],a=this.options,o=a.radius,s=a.extent,l=a.reduce,c=a.minPoints,u=o/(s*Math.pow(2,n)),f=0;f<r.length;f++){var h=r[f];if(!(h.zoom<=n)){h.zoom=n;for(var p=this.trees[n+1],d=p.within(h.x,h.y,u),y=h.numPoints||1,g=y,v=0;v<d.length;v+=1){var m=d[v],x=p.points[m];x.zoom>n&&(g+=x.numPoints||1)}if(g>=c){for(var b=h.x*y,_=h.y*y,w=l&&y>1?this._map(h,!0):null,T=(f<<5)+(n+1)+this.points.length,A=0;A<d.length;A+=1){var k=d[A],M=p.points[k];if(!(M.zoom<=n)){M.zoom=n;var S=M.numPoints||1;b+=M.x*S,_+=M.y*S,M.parentId=T,l&&(w||(w=this._map(h,!0)),l(w,this._map(M)))}}h.parentId=T,i.push({x:b/g,y:_/g,zoom:1/0,id:T,parentId:-1,numPoints:g,properties:w})}else if(i.push(h),g>1)for(var E=0;E<d.length;E+=1){var I=d[E],L=p.points[I];L.zoom<=n||(L.zoom=n,i.push(L))}}}return i},P.prototype._getOriginId=function(r){return r-this.points.length>>5},P.prototype._getOriginZoom=function(r){return(r-this.points.length)%32},P.prototype._map=function(r,n){if(r.numPoints)return n?N({},r.properties):r.properties;var i=this.points[r.index].properties,a=this.options.map(i);return n&&a===i?N({},a):a},ts.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ts.prototype.splitTile=function(r,n,i,a,o,s,l){for(var c=[r,n,i,a],u=this.options,f=u.debug;c.length;){a=c.pop(),i=c.pop(),n=c.pop(),r=c.pop();var h=1<<n,p=tl(n,i,a),d=this.tiles[p];if(!d&&(f>1&&console.time("creation"),d=this.tiles[p]=function(r,n,i,a,o){for(var s=n===o.maxZoom?0:o.tolerance/((1<<n)*o.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},c=0;c<r.length;c++){l.numFeatures++,function(r,n,i,a){var o=n.geometry,s=n.type,l=[];if("Point"===s||"MultiPoint"===s)for(var c=0;c<o.length;c+=3)l.push(o[c]),l.push(o[c+1]),r.numPoints++,r.numSimplified++;else if("LineString"===s)to(l,o,r,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(c=0;c<o.length;c++)to(l,o[c],r,i,"Polygon"===s,0===c);else if("MultiPolygon"===s)for(var u=0;u<o.length;u++){var f=o[u];for(c=0;c<f.length;c++)to(l,f[c],r,i,!0,0===c)}if(l.length){var h=n.tags||null;if("LineString"===s&&a.lineMetrics){for(var p in h={},n.tags)h[p]=n.tags[p];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var d={geometry:l,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:h};null!==n.id&&(d.id=n.id),r.features.push(d)}}(l,r[c],s,o);var u=r[c].minX,f=r[c].minY,h=r[c].maxX,p=r[c].maxY;u<l.minX&&(l.minX=u),f<l.minY&&(l.minY=f),h>l.maxX&&(l.maxX=h),p>l.maxY&&(l.maxY=p)}return l}(r,n,i,a,u),this.tileCoords.push({z:n,x:i,y:a}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,i,a,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var y="z"+n;this.stats[y]=(this.stats[y]||0)+1,this.total++}if(d.source=r,o){if(n===u.maxZoom||n===o)continue;var g=1<<o-n;if(i!==Math.floor(s/g)||a!==Math.floor(l/g))continue}else if(n===u.indexMaxZoom||d.numPoints<=u.indexMaxPoints)continue;if(d.source=null,0!==r.length){f>1&&console.time("clipping");var v,m,x,b,_,w,T=.5*u.buffer/u.extent,A=.5-T,k=.5+T,M=1+T;v=m=x=b=null,_=X(r,h,i-T,i+k,0,d.minX,d.maxX,u),w=X(r,h,i+A,i+M,0,d.minX,d.maxX,u),r=null,_&&(v=X(_,h,a-T,a+k,1,d.minY,d.maxY,u),m=X(_,h,a+A,a+M,1,d.minY,d.maxY,u),_=null),w&&(x=X(w,h,a-T,a+k,1,d.minY,d.maxY,u),b=X(w,h,a+A,a+M,1,d.minY,d.maxY,u),w=null),f>1&&console.timeEnd("clipping"),c.push(v||[],n+1,2*i,2*a),c.push(m||[],n+1,2*i,2*a+1),c.push(x||[],n+1,2*i+1,2*a),c.push(b||[],n+1,2*i+1,2*a+1)}}},ts.prototype.getTile=function(r,n,i){var a=this.options,o=a.extent,s=a.debug;if(r<0||r>24)return null;var l=1<<r,c=tl(r,n=(n%l+l)%l,i);if(this.tiles[c])return ti(this.tiles[c],o);s>1&&console.log("drilling down to z%d-%d-%d",r,n,i);for(var u,f=r,h=n,p=i;!u&&f>0;)f--,h=Math.floor(h/2),p=Math.floor(p/2),u=this.tiles[tl(f,h,p)];return u&&u.source?(s>1&&console.log("found parent tile z%d-%d-%d",f,h,p),s>1&&console.time("drilling down"),this.splitTile(u.source,f,h,p,r,n,i),s>1&&console.timeEnd("drilling down"),this.tiles[c]?ti(this.tiles[c],o):null):null};var tu=function(n){function i(r,i,a,o){n.call(this,r,i,a,tc),o&&(this.loadGeoJSON=o)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.loadData=function(r,n){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=n,this._pendingLoadDataParams=r,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var n=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(a&&a.request&&a.request.collectResourceTiming)&&new r.RequestPerformance(a.request);this.loadGeoJSON(a,function(s,l){if(s||!l)return i(s);if("object"!=typeof l)return i(Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."));f(l,!0);try{if(a.filter){var c,u,h=r.createExpression(a.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===h.result)throw Error(h.value.map(function(r){return r.key+": "+r.message}).join(", "));var p=l.features.filter(function(r){return h.value.evaluate({zoom:0},r)});l={type:"FeatureCollection",features:p}}n._geoJSONIndex=a.cluster?new P(function(n){var i=n.superclusterOptions,a=n.clusterProperties;if(!a||!i)return i;for(var o={},s={},l={accumulated:null,zoom:0},c={properties:null},u=Object.keys(a),f=0;f<u.length;f+=1){var h=u[f],p=a[h],d=p[0],y=p[1],g=r.createExpression(y),v=r.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);o[h]=g.value,s[h]=v.value}return i.map=function(r){c.properties=r;for(var n={},i=0;i<u.length;i+=1){var a=u[i];n[a]=o[a].evaluate(l,c)}return n},i.reduce=function(r,n){c.properties=n;for(var i=0;i<u.length;i+=1){var a=u[i];l.accumulated=r[a],r[a]=s[a].evaluate(l,c)}},i}(a)).load(l.features):(c=l,u=a.geojsonVtOptions,new ts(c,u))}catch(r){return i(r)}n.loaded={};var d={};if(o){var y=o.finish();y&&(d.resourceTiming={},d.resourceTiming[a.source]=JSON.parse(JSON.stringify(y)))}i(null,d)})}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(r,i){var a=this.loaded,o=r.uid;return a&&a[o]?n.prototype.reloadTile.call(this,r,i):this.loadTile(r,i)},i.prototype.loadGeoJSON=function(n,i){if(n.request)r.getJSON(n.request,i);else{if("string"!=typeof n.data)return i(Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(n.data))}catch(r){return i(Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(r,n){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),n()},i.prototype.getClusterExpansionZoom=function(r,n){try{n(null,this._geoJSONIndex.getClusterExpansionZoom(r.clusterId))}catch(r){n(r)}},i.prototype.getClusterChildren=function(r,n){try{n(null,this._geoJSONIndex.getChildren(r.clusterId))}catch(r){n(r)}},i.prototype.getClusterLeaves=function(r,n){try{n(null,this._geoJSONIndex.getLeaves(r.clusterId,r.limit,r.offset))}catch(r){n(r)}},i}(l),tf=function(n){var i=this;this.self=n,this.actor=new r.Actor(n,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:tu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(r,n){if(i.workerSourceTypes[r])throw Error('Worker source with name "'+r+'" already registered.');i.workerSourceTypes[r]=n},this.self.registerRTLTextPlugin=function(n){if(r.plugin.isParsed())throw Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=n.applyArabicShaping,r.plugin.processBidirectionalText=n.processBidirectionalText,r.plugin.processStyledBidirectionalText=n.processStyledBidirectionalText}};return tf.prototype.setReferrer=function(r,n){this.referrer=n},tf.prototype.setImages=function(r,n,i){for(var a in this.availableImages[r]=n,this.workerSources[r]){var o=this.workerSources[r][a];for(var s in o)o[s].availableImages=n}i()},tf.prototype.setLayers=function(r,n,i){this.getLayerIndex(r).replace(n),i()},tf.prototype.updateLayers=function(r,n,i){this.getLayerIndex(r).update(n.layers,n.removedIds),i()},tf.prototype.loadTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).loadTile(n,i)},tf.prototype.loadDEMTile=function(r,n,i){this.getDEMWorkerSource(r,n.source).loadTile(n,i)},tf.prototype.reloadTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).reloadTile(n,i)},tf.prototype.abortTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).abortTile(n,i)},tf.prototype.removeTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).removeTile(n,i)},tf.prototype.removeDEMTile=function(r,n){this.getDEMWorkerSource(r,n.source).removeTile(n)},tf.prototype.removeSource=function(r,n,i){if(this.workerSources[r]&&this.workerSources[r][n.type]&&this.workerSources[r][n.type][n.source]){var a=this.workerSources[r][n.type][n.source];delete this.workerSources[r][n.type][n.source],void 0!==a.removeSource?a.removeSource(n,i):i()}},tf.prototype.loadWorkerSource=function(r,n,i){try{this.self.importScripts(n.url),i()}catch(r){i(r.toString())}},tf.prototype.syncRTLPluginState=function(n,i,a){try{r.plugin.setState(i);var o=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&null!=o){this.self.importScripts(o);var s=r.plugin.isParsed();a(s?void 0:Error("RTL Text Plugin failed to import scripts from "+o),s)}}catch(r){a(r.toString())}},tf.prototype.getAvailableImages=function(r){var n=this.availableImages[r];return n||(n=[]),n},tf.prototype.getLayerIndex=function(r){var i=this.layerIndexes[r];return i||(i=this.layerIndexes[r]=new n),i},tf.prototype.getWorkerSource=function(r,n,i){var a=this;return this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][n]||(this.workerSources[r][n]={}),this.workerSources[r][n][i]||(this.workerSources[r][n][i]=new this.workerSourceTypes[n]({send:function(n,i,o){a.actor.send(n,i,o,r)}},this.getLayerIndex(r),this.getAvailableImages(r))),this.workerSources[r][n][i]},tf.prototype.getDEMWorkerSource=function(r,n){return this.demWorkerSources[r]||(this.demWorkerSources[r]={}),this.demWorkerSources[r][n]||(this.demWorkerSources[r][n]=new u),this.demWorkerSources[r][n]},tf.prototype.enforceCacheSizeLimit=function(n,i){r.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new tf(self)),tf}),a(0,function(r){var n=r.createCommonjsModule(function(r){function n(r){return!i(r)}function i(r){var i;return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var r,n,i=new Blob([""],{type:"text/javascript"}),a=URL.createObjectURL(i);try{n=new Worker(a),r=!0}catch(n){r=!1}return n&&n.terminate(),URL.revokeObjectURL(a),r}()?"insufficient worker support":"Uint8ClampedArray"in window?ArrayBuffer.isView?!function(){var r=document.createElement("canvas");r.width=r.height=1;var n=r.getContext("2d");if(!n)return!1;var i=n.getImageData(0,0,1,1);return i&&i.width===r.width}()?"insufficient Canvas/getImageData support":(void 0===a[i=r&&r.failIfMajorPerformanceCaveat]&&(a[i]=function(r){var i,a,o=(i=document.createElement("canvas"),(a=Object.create(n.webGLContextAttributes)).failIfMajorPerformanceCaveat=r,i.probablySupportsContext?i.probablySupportsContext("webgl",a)||i.probablySupportsContext("experimental-webgl",a):i.supportsContext?i.supportsContext("webgl",a)||i.supportsContext("experimental-webgl",a):i.getContext("webgl",a)||i.getContext("experimental-webgl",a));if(!o)return!1;var s=o.createShader(o.VERTEX_SHADER);return!(!s||o.isContextLost())&&(o.shaderSource(s,"void main() {}"),o.compileShader(s),!0===o.getShaderParameter(s,o.COMPILE_STATUS))}(i)),a[i]?void 0:"insufficient WebGL support"):"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}r.exports?r.exports=n:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=n,window.mapboxgl.notSupportedReason=i);var a={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(n,i,a){var o=r.window.document.createElement(n);return void 0!==i&&(o.className=i),a&&a.appendChild(o),o},createNS:function(n,i){return r.window.document.createElementNS(n,i)}},a=r.window.document&&r.window.document.documentElement.style;function o(r){if(!a)return r[0];for(var n=0;n<r.length;n++)if(r[n]in a)return r[n];return r[0]}var s,l=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){a&&l&&(s=a[l],a[l]="none")},i.enableDrag=function(){a&&l&&(a[l]=s)};var c=o(["transform","WebkitTransform"]);i.setTransform=function(r,n){r.style[c]=n};var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});r.window.addEventListener("test",f,f),r.window.removeEventListener("test",f,f)}catch(r){u=!1}i.addEventListener=function(r,n,i,a){void 0===a&&(a={}),"passive"in a&&u?r.addEventListener(n,i,a):r.addEventListener(n,i,a.capture)},i.removeEventListener=function(r,n,i,a){void 0===a&&(a={}),"passive"in a&&u?r.removeEventListener(n,i,a):r.removeEventListener(n,i,a.capture)};var h=function(n){n.preventDefault(),n.stopPropagation(),r.window.removeEventListener("click",h,!0)};i.suppressClick=function(){r.window.addEventListener("click",h,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",h,!0)},0)},i.mousePos=function(n,i){var a=n.getBoundingClientRect();return new r.Point(i.clientX-a.left-n.clientLeft,i.clientY-a.top-n.clientTop)},i.touchPos=function(n,i){for(var a=n.getBoundingClientRect(),o=[],s=0;s<i.length;s++)o.push(new r.Point(i[s].clientX-a.left-n.clientLeft,i[s].clientY-a.top-n.clientTop));return o},i.mouseButton=function(n){return void 0!==r.window.InstallTrigger&&2===n.button&&n.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},i.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var p=function(n){function i(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(r){if(this.loaded!==r&&(this.loaded=r,r)){for(var n=0,i=this.requestors;n<i.length;n+=1){var a=i[n],o=a.ids,s=a.callback;this._notify(o,s)}this.requestors=[]}},i.prototype.getImage=function(r){return this.images[r]},i.prototype.addImage=function(r,n){this._validate(r,n)&&(this.images[r]=n)},i.prototype._validate=function(n,i){var a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "stretchX" value'))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "stretchY" value'))),a=!1),this._validateContent(i.content,i)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "content" value'))),a=!1),a},i.prototype._validateStretch=function(r,n){if(!r)return!0;for(var i=0,a=0;a<r.length;a+=1){var o=r[a];if(o[0]<i||o[1]<o[0]||n<o[1])return!1;i=o[1]}return!0},i.prototype._validateContent=function(r,n){return!(r&&(4!==r.length||r[0]<0||n.data.width<r[0]||r[1]<0||n.data.height<r[1]||r[2]<0||n.data.width<r[2]||r[3]<0||n.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))},i.prototype.updateImage=function(r,n){var i=this.images[r];n.version=i.version+1,this.images[r]=n,this.updatedImages[r]=!0},i.prototype.removeImage=function(r){var n=this.images[r];delete this.images[r],delete this.patterns[r],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(r,n){var i=!0;if(!this.isLoaded())for(var a=0;a<r.length;a+=1){var o=r[a];this.images[o]||(i=!1)}this.isLoaded()||i?this._notify(r,n):this.requestors.push({ids:r,callback:n})},i.prototype._notify=function(n,i){for(var a={},o=0;o<n.length;o+=1){var s=n[o];this.images[s]||this.fire(new r.Event("styleimagemissing",{id:s}));var l=this.images[s];l?a[s]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,hasRenderCallback:!!(l.userImage&&l.userImage.render)}:r.warnOnce('Image "'+s+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,a)},i.prototype.getPixelSize=function(){var r=this.atlasImage;return{width:r.width,height:r.height}},i.prototype.getPattern=function(n){var i=this.patterns[n],a=this.getImage(n);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else{var o={w:a.data.width+2,h:a.data.height+2,x:0,y:0},s=new r.ImagePosition(o,a);this.patterns[n]={bin:o,position:s}}return this._updatePatternAtlas(),this.patterns[n].position},i.prototype.bind=function(n){var i=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(n,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var n=[];for(var i in this.patterns)n.push(this.patterns[i].bin);var a=r.potpack(n),o=a.w,s=a.h,l=this.atlasImage;for(var c in l.resize({width:o||1,height:s||1}),this.patterns){var u=this.patterns[c].bin,f=u.x+1,h=u.y+1,p=this.images[c].data,d=p.width,y=p.height;r.RGBAImage.copy(p,l,{x:0,y:0},{x:f,y:h},{width:d,height:y}),r.RGBAImage.copy(p,l,{x:0,y:y-1},{x:f,y:h-1},{width:d,height:1}),r.RGBAImage.copy(p,l,{x:0,y:0},{x:f,y:h+y},{width:d,height:1}),r.RGBAImage.copy(p,l,{x:d-1,y:0},{x:f-1,y:h},{width:1,height:y}),r.RGBAImage.copy(p,l,{x:0,y:0},{x:f+d,y:h},{width:1,height:y})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(r){for(var n=0;n<r.length;n+=1){var i=r[n];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var a=this.images[i];(function(r){var n=r.userImage;return!!(n&&n.render&&n.render())&&(r.data.replace(new Uint8Array(n.data.buffer)),!0)})(a)&&this.updateImage(i,a)}}},i}(r.Evented);function d(r,n,i,a,o,s){this.fontSize=r||24,this.buffer=void 0===n?3:n,this.cutoff=a||.25,this.fontFamily=o||"sans-serif",this.fontWeight=s||"normal",this.radius=i||8;var l=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=l,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.d=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Int16Array(l),this.middle=Math.round(l/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(r,n,i,a,o,s,l){for(var c=0;c<n;c++){for(var u=0;u<i;u++)a[u]=r[u*n+c];for(g(a,o,s,l,i),u=0;u<i;u++)r[u*n+c]=o[u]}for(u=0;u<i;u++){for(c=0;c<n;c++)a[c]=r[u*n+c];for(g(a,o,s,l,n),c=0;c<n;c++)r[u*n+c]=Math.sqrt(o[c])}}function g(r,n,i,a,o){i[0]=0,a[0]=-1e20,a[1]=1e20;for(var s=1,l=0;s<o;s++){for(var c=(r[s]+s*s-(r[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);c<=a[l];)l--,c=(r[s]+s*s-(r[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);i[++l]=s,a[l]=c,a[l+1]=1e20}for(s=0,l=0;s<o;s++){for(;a[l+1]<s;)l++;n[s]=(s-i[l])*(s-i[l])+r[i[l]]}}d.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var n=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),a=0;a<this.size*this.size;a++){var o=n.data[4*a+3]/255;this.gridOuter[a]=1===o?0:0===o?1e20:Math.pow(Math.max(0,.5-o),2),this.gridInner[a]=1===o?1e20:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),a=0;a<this.size*this.size;a++){var s=this.gridOuter[a]-this.gridInner[a];i[a]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return i},d.default=d;var v=function(r,n){this.requestManager=r,this.localIdeographFontFamily=n,this.entries={}};v.prototype.setURL=function(r){this.url=r},v.prototype.getGlyphs=function(n,i){var a=this,o=[];for(var s in n)for(var l=0,c=n[s];l<c.length;l+=1){var u=c[l];o.push({stack:s,id:u})}r.asyncAll(o,function(r,n){var i=r.stack,o=r.id,s=a.entries[i];s||(s=a.entries[i]={glyphs:{},requests:{},ranges:{}});var l=s.glyphs[o];if(void 0===l){if(l=a._tinySDF(s,i,o))return s.glyphs[o]=l,void n(null,{stack:i,id:o,glyph:l});var c=Math.floor(o/256);if(256*c>65535)n(Error("glyphs > 65535 not supported"));else if(s.ranges[c])n(null,{stack:i,id:o,glyph:l});else{var u=s.requests[c];u||(u=s.requests[c]=[],v.loadGlyphRange(i,c,a.url,a.requestManager,function(r,n){if(n){for(var i in n)a._doesCharSupportLocalGlyph(+i)||(s.glyphs[+i]=n[+i]);s.ranges[c]=!0}for(var o=0,l=u;o<l.length;o+=1)(0,l[o])(r,n);delete s.requests[c]})),u.push(function(r,a){r?n(r):a&&n(null,{stack:i,id:o,glyph:a[o]||null})})}}else n(null,{stack:i,id:o,glyph:l})},function(r,n){if(r)i(r);else if(n){for(var a={},o=0;o<n.length;o+=1){var s=n[o],l=s.stack,c=s.id,u=s.glyph;(a[l]||(a[l]={}))[c]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}i(null,a)}})},v.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](n)||r.isChar["Hangul Syllables"](n)||r.isChar.Hiragana(n)||r.isChar.Katakana(n))},v.prototype._tinySDF=function(n,i,a){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(a)){var s=n.tinySDF;if(!s){var l="400";/bold/i.test(i)?l="900":/medium/i.test(i)?l="500":/light/i.test(i)&&(l="200"),s=n.tinySDF=new v.TinySDF(24,3,8,.25,o,l)}return{id:a,bitmap:new r.AlphaImage({width:30,height:30},s.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(n,i,a,o,s){var l=256*i,c=o.transformRequest(o.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",l+"-"+(l+255)),r.ResourceType.Glyphs);r.getArrayBuffer(c,function(n,i){if(n)s(n);else if(i){for(var a={},o=0,l=r.parseGlyphPBF(i);o<l.length;o+=1){var c=l[o];a[c.id]=c}s(null,a)}})},v.TinySDF=d;var m=function(){this.specification=r.styleSpec.light.position};m.prototype.possiblyEvaluate=function(n,i){return r.sphericalToCartesian(n.expression.evaluate(i))},m.prototype.interpolate=function(n,i,a){return{x:r.number(n.x,i.x,a),y:r.number(n.y,i.y,a),z:r.number(n.z,i.z,a)}};var x=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new m,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),b=function(n){function i(i){n.call(this),this._transitionable=new r.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(n,i){if(void 0===i&&(i={}),!this._validate(r.validateLight,n,i))for(var a in n){var o=n[a];r.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),o):this._transitionable.setValue(a,o)}},i.prototype.updateTransitions=function(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(r){this.properties=this._transitioning.possiblyEvaluate(r)},i.prototype._validate=function(n,i,a){return(!a||!1!==a.validate)&&r.emitValidationErrors(this,n.call(r.validateStyle,r.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},i}(r.Evented),_=function(r,n){this.width=r,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};_.prototype.getDash=function(r,n){var i=r.join(",")+String(n);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(r,n)),this.dashEntry[i]},_.prototype.getDashRanges=function(r,n,i){var a=[],o=r.length%2==1?-r[r.length-1]*i:0,s=r[0]*i,l=!0;a.push({left:o,right:s,isDash:l,zeroLength:0===r[0]});for(var c=r[0],u=1;u<r.length;u++){l=!l;var f=r[u];o=c*i,s=(c+=f)*i,a.push({left:o,right:s,isDash:l,zeroLength:0===f})}return a},_.prototype.addRoundDash=function(r,n,i){for(var a=n/2,o=-i;o<=i;o++)for(var s=this.nextRow+i+o,l=this.width*s,c=0,u=r[c],f=0;f<this.width;f++){f/u.right>1&&(u=r[++c]);var h=Math.min(Math.abs(f-u.left),Math.abs(f-u.right)),p=void 0,d=o/i*(a+1);if(u.isDash){var y=a-Math.abs(d);p=Math.sqrt(h*h+y*y)}else p=a-Math.sqrt(h*h+d*d);this.data[l+f]=Math.max(0,Math.min(255,p+128))}},_.prototype.addRegularDash=function(r){for(var n=r.length-1;n>=0;--n){var i=r[n],a=r[n+1];i.zeroLength?r.splice(n,1):a&&a.isDash===i.isDash&&(a.left=i.left,r.splice(n,1))}var o=r[0],s=r[r.length-1];o.isDash===s.isDash&&(o.left=s.left-this.width,s.right=o.right+this.width);for(var l=this.width*this.nextRow,c=0,u=r[c],f=0;f<this.width;f++){f/u.right>1&&(u=r[++c]);var h=Math.min(Math.abs(f-u.left),Math.abs(f-u.right)),p=u.isDash?h:-h;this.data[l+f]=Math.max(0,Math.min(255,p+128))}},_.prototype.addDash=function(n,i){var a=i?7:0,o=2*a+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var s=0,l=0;l<n.length;l++)s+=n[l];if(0!==s){var c=this.width/s,u=this.getDashRanges(n,this.width,c);i?this.addRoundDash(u,c,a):this.addRegularDash(u)}var f={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:s};return this.nextRow+=o,this.dirty=!0,f},_.prototype.bind=function(r){var n=r.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))};var w=function n(i,a){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),s=0;s<o.length;s++){var l=o[s],c=new n.Actor(l,a,this.id);c.name="Worker "+s,this.actors.push(c)}};function T(n,i,a){var o=function(o,s){if(o)return a(o);if(s){var l=r.pick(r.extend(s,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);s.vector_layers&&(l.vectorLayers=s.vector_layers,l.vectorLayerIds=l.vectorLayers.map(function(r){return r.id})),l.tiles=i.canonicalizeTileset(l,n.url),a(null,l)}};return n.url?r.getJSON(i.transformRequest(i.normalizeSourceURL(n.url),r.ResourceType.Source),o):r.browser.frame(function(){return o(null,n)})}w.prototype.broadcast=function(n,i,a){a=a||function(){},r.asyncAll(this.actors,function(r,a){r.send(n,i,a)},a)},w.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},w.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=r.Actor;var A=function(n,i,a){this.bounds=r.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=i||0,this.maxzoom=a||24};A.prototype.validateBounds=function(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},A.prototype.contains=function(n){var i=Math.pow(2,n.z),a=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*i),o=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*i),s=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*i),l=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*i);return n.x>=a&&n.x<s&&n.y>=o&&n.y<l};var k=function(n){function i(i,a,o,s){if(n.call(this),this.id=i,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(a,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(s)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,function(i,a){n._tileJSONRequest=null,n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(r.extend(n,a),a.bounds&&(n.tileBounds=new A(a.bounds,n.minzoom,n.maxzoom)),r.postTurnstileEvent(a.tiles,n.map._requestManager._customAccessToken),r.postMapLoadEvent(a.tiles,n.map._getMapId(),n.map._requestManager._skuToken,n.map._requestManager._customAccessToken),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setSourceProperty=function(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(r){var n=this;return this.setSourceProperty(function(){n._options.tiles=r}),this},i.prototype.setUrl=function(r){var n=this;return this.setSourceProperty(function(){n.url=r,n._options.url=r}),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return r.extend({},this._options)},i.prototype.loadTile=function(n,i){var a=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(a,r.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function s(a,o){return delete n.request,n.aborted?i(null):a&&404!==a.status?i(a):(o&&o.resourceTiming&&(n.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&n.setExpiryData(o),n.loadVectorData(o,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}o.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=i:n.request=n.actor.send("reloadTile",o,s.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",o,s.bind(this)))},i.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(r.Evented),M=function(n){function i(i,a,o,s){n.call(this),this.id=i,this.dispatcher=o,this.setEventedParent(s),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},a),r.extend(this,r.pick(a,["url","scheme","tileSize"]))}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,function(i,a){n._tileJSONRequest=null,n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(r.extend(n,a),a.bounds&&(n.tileBounds=new A(a.bounds,n.minzoom,n.maxzoom)),r.postTurnstileEvent(a.tiles),r.postMapLoadEvent(a.tiles,n.map._getMapId(),n.map._requestManager._skuToken),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return r.extend({},this._options)},i.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},i.prototype.loadTile=function(n,i){var a=this,o=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);n.request=r.getImage(this.map._requestManager.transformRequest(o,r.ResourceType.Tile),function(o,s){if(delete n.request,n.aborted)n.state="unloaded",i(null);else if(o)n.state="errored",i(o);else if(s){a.map._refreshExpiredTiles&&n.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=a.map.painter.context,c=l.gl;n.texture=a.map.painter.getTileTexture(s.width),n.texture?n.texture.update(s,{useMipmap:!0}):(n.texture=new r.Texture(l,s,c.RGBA,{useMipmap:!0}),n.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),l.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax)),n.state="loaded",r.cacheEntryPossiblyAdded(a.dispatcher),i(null)}})},i.prototype.abortTile=function(r,n){r.request&&(r.request.cancel(),delete r.request),n()},i.prototype.unloadTile=function(r,n){r.texture&&this.map.painter.saveTileTexture(r.texture),n()},i.prototype.hasTransition=function(){return!1},i}(r.Evented),S=function(n){function i(i,a,o,s){n.call(this,i,a,o,s),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(n,i){var a=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function o(r,a){r&&(n.state="errored",i(r)),a&&(n.dem=a,n.needsHillshadePrepare=!0,n.state="loaded",i(null))}n.request=r.getImage(this.map._requestManager.transformRequest(a,r.ResourceType.Tile),(function(a,s){if(delete n.request,n.aborted)n.state="unloaded",i(null);else if(a)n.state="errored",i(a);else if(s){this.map._refreshExpiredTiles&&n.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=r.window.ImageBitmap&&s instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?s:r.browser.getImageData(s,1),c={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:l,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",c,o.bind(this)))}}).bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},i.prototype._getNeighboringTiles=function(n){var i=n.canonical,a=Math.pow(2,i.z),o=(i.x-1+a)%a,s=0===i.x?n.wrap-1:n.wrap,l=(i.x+1+a)%a,c=i.x+1===a?n.wrap+1:n.wrap,u={};return u[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},u[new r.OverscaledTileID(n.overscaledZ,c,i.z,l,i.y).key]={backfilled:!1},i.y>0&&(u[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1},u[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},u[new r.OverscaledTileID(n.overscaledZ,c,i.z,l,i.y-1).key]={backfilled:!1}),i.y+1<a&&(u[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1},u[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},u[new r.OverscaledTileID(n.overscaledZ,c,i.z,l,i.y+1).key]={backfilled:!1}),u},i.prototype.unloadTile=function(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})},i}(M),E=function(n){function i(i,a,o,s){n.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(s),this._data=a.data,this._options=r.extend({},a),this._collectResourceTiming=a.collectResourceTiming,this._resourceTiming=[],void 0!==a.maxzoom&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;var l=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(void 0!==a.buffer?a.buffer:128)*l,tolerance:(void 0!==a.tolerance?a.tolerance:.375)*l,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:void 0!==a.clusterMaxZoom?Math.min(a.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:r.EXTENT,radius:(a.clusterRadius||50)*l,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)n.fire(new r.ErrorEvent(i));else{var a={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(a.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new r.Event("data",a))}})},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setData=function(n){var i=this;return this._data=n,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)i.fire(new r.ErrorEvent(n));else{var a={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(a.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new r.Event("data",a))}}),this},i.prototype.getClusterExpansionZoom=function(r,n){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},n),this},i.prototype.getClusterChildren=function(r,n){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},n),this},i.prototype.getClusterLeaves=function(r,n,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:n,offset:i},a),this},i.prototype._updateWorkerData=function(n){var i=this;this._loaded=!1;var a=r.extend({},this.workerOptions),o=this._data;"string"==typeof o?(a.request=this.map._requestManager.transformRequest(r.browser.resolveURL(o),r.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(o),this.actor.send(this.type+".loadData",a,function(r,o){i._removed||o&&o.abandoned||(i._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[i.id]&&(i._resourceTiming=o.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:a.source},null),n(r))})},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(n,i){var a=this,o=n.actor?"reloadTile":"loadTile";n.actor=this.actor;var s={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(o,s,function(r,s){return delete n.request,n.unloadVectorData(),n.aborted?i(null):r?i(r):(n.loadVectorData(s,a.map.painter,"reloadTile"===o),i(null))})},i.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0},i.prototype.unloadTile=function(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(r.Evented),I=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),L=function(n){function i(r,i,a,o){n.call(this),this.id=r,this.dispatcher=a,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=i}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(n,i){var a=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(o,s){a._loaded=!0,o?a.fire(new r.ErrorEvent(o)):s&&(a.image=s,n&&(a.coordinates=n),i&&i(),a._finishLoading())})},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(r){var n=this;return this.image&&r.url&&(this.options.url=r.url,this.load(r.coordinates,function(){n.texture=null})),this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setCoordinates=function(n){var i=this;this.coordinates=n;var a=n.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(n){for(var i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<n.length;l+=1){var c=n[l];i=Math.min(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}var u=Math.max(0,Math.floor(-Math.log(Math.max(o-i,s-a))/Math.LN2)),f=Math.pow(2,u);return new r.CanonicalTileID(u,Math.floor((i+o)/2*f),Math.floor((a+s)/2*f))}(a),this.minzoom=this.maxzoom=this.tileID.z;var o=a.map(function(r){return i.tileID.getTilePoint(r)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var n=this.map.painter.context,i=n.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(n,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.loadTile=function(r,n){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored",n(null)},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(r.Evented),C=function(n){function i(r,i,a,o){n.call(this,r,i,a,o),this.roundZoom=!0,this.type="video",this.options=i}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1;var i=this.options;this.urls=[];for(var a=0,o=i.urls;a<o.length;a+=1){var s=o[a];this.urls.push(this.map._requestManager.transformRequest(s,r.ResourceType.Source).url)}r.getVideo(this.urls,function(i,a){n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(n.video=a,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map.triggerRepaint()}),n.map&&n.video.play(),n._finishLoading())})},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(n){if(this.video){var i=this.video.seekable;n<i.start(0)||n>i.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=n}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var n=this.map.painter.context,i=n.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(n,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(L),O=function(n){function i(i,a,o,s){n.call(this,i,a,o,s),a.coordinates?Array.isArray(a.coordinates)&&4===a.coordinates.length&&!a.coordinates.some(function(r){return!Array.isArray(r)||2!==r.length||r.some(function(r){return"number"!=typeof r})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'missing required property "coordinates"'))),a.animate&&"boolean"!=typeof a.animate&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),a.canvas?"string"==typeof a.canvas||a.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=a,this.animate=void 0===a.animate||a.animate}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,a=i.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(i,this.canvas,a.RGBA,{premultiply:!0}),this.tiles){var s=this.tiles[o];"loaded"!==s.state&&(s.state="loaded",s.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var r=0,n=[this.canvas.width,this.canvas.height];r<n.length;r+=1){var i=n[r];if(isNaN(i)||i<=0)return!0}return!1},i}(L),D={vector:k,raster:M,"raster-dem":S,geojson:E,video:C,image:L,canvas:O};function P(r,n){var i=r.tileID,a=n.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}var B=function(r,n){this.max=r,this.onRemove=n,this.reset()};B.prototype.reset=function(){for(var r in this.data)for(var n=0,i=this.data[r];n<i.length;n+=1){var a=i[n];a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value)}return this.data={},this.order=[],this},B.prototype.add=function(r,n,i){var a=this,o=r.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var s={value:n,timeout:void 0};if(void 0!==i&&(s.timeout=setTimeout(function(){a.remove(r,s)},i)),this.data[o].push(s),this.order.push(o),this.order.length>this.max){var l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this},B.prototype.has=function(r){return r.wrapped().key in this.data},B.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},B.prototype._getAndRemoveByKey=function(r){var n=this.data[r].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),n.value},B.prototype.getByKey=function(r){var n=this.data[r];return n?n[0].value:null},B.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},B.prototype.remove=function(r,n){if(!this.has(r))return this;var i=r.wrapped().key,a=void 0===n?0:this.data[i].indexOf(n),o=this.data[i][a];return this.data[i].splice(a,1),o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(o.value),this.order.splice(this.order.indexOf(i),1),this},B.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},B.prototype.filter=function(r){var n=[];for(var i in this.data)for(var a=0,o=this.data[i];a<o.length;a+=1){var s=o[a];r(s.value)||n.push(s)}for(var l=0;l<n.length;l+=1){var c=n[l];this.remove(c.value.tileID,c)}};var R=function(r,n,i){this.context=r;var a=r.gl;this.buffer=a.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer};R.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},R.prototype.updateData=function(r){var n=this.context.gl;this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},R.prototype.destroy=function(){var r=this.context.gl;this.buffer&&(r.deleteBuffer(this.buffer),delete this.buffer)};var z={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},F=function(r,n,i,a){this.length=n.length,this.attributes=i,this.itemSize=n.bytesPerElement,this.dynamicDraw=a,this.context=r;var o=r.gl;this.buffer=o.createBuffer(),r.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer};F.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},F.prototype.updateData=function(r){var n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,r.arrayBuffer)},F.prototype.enableAttributes=function(r,n){for(var i=0;i<this.attributes.length;i++){var a=this.attributes[i],o=n.attributes[a.name];void 0!==o&&r.enableVertexAttribArray(o)}},F.prototype.setVertexAttribPointers=function(r,n,i){for(var a=0;a<this.attributes.length;a++){var o=this.attributes[a],s=n.attributes[o.name];void 0!==s&&r.vertexAttribPointer(s,o.components,r[z[o.type]],!1,this.itemSize,o.offset+this.itemSize*(i||0))}},F.prototype.destroy=function(){var r=this.context.gl;this.buffer&&(r.deleteBuffer(this.buffer),delete this.buffer)};var N=function(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};N.prototype.get=function(){return this.current},N.prototype.set=function(r){},N.prototype.getDefault=function(){return this.default},N.prototype.setDefault=function(){this.set(this.default)};var U=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return r.Color.transparent},i.prototype.set=function(r){var n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},i}(N),j=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 1},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)},n}(N),V=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)},n}(N),H=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return[!0,!0,!0,!0]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},n}(N),q=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)},n}(N),G=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 255},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)},n}(N),W=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},n.prototype.set=function(r){var n=this.current;(r.func!==n.func||r.ref!==n.ref||r.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)},n}(N),Y=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)},n}(N),Z=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=r,this.dirty=!1}},n}(N),X=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return[0,1]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)},n}(N),K=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=r,this.dirty=!1}},n}(N),J=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.LESS},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)},n}(N),$=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.BLEND):n.disable(n.BLEND),this.current=r,this.dirty=!1}},n}(N),Q=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[r.ONE,r.ZERO]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)},n}(N),tt=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return r.Color.transparent},i.prototype.set=function(r){var n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},i}(N),te=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.FUNC_ADD},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)},n}(N),tr=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=r,this.dirty=!1}},n}(N),tn=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.BACK},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)},n}(N),ti=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.CCW},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)},n}(N),ta=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)},n}(N),to=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.TEXTURE0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)},n}(N),ts=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},n}(N),tl=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,r),this.current=r,this.dirty=!1}},n}(N),tc=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,r),this.current=r,this.dirty=!1}},n}(N),tu=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindTexture(n.TEXTURE_2D,r),this.current=r,this.dirty=!1}},n}(N),tf=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}},n}(N),th=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){var n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1},n}(N),tp=function(r){function n(n){r.call(this,n),this.vao=n.extVertexArrayObject}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)},n}(N),td=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 4},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}},n}(N),ty=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}},n}(N),tg=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}},n}(N),tv=function(r){function n(n,i){r.call(this,n),this.context=n,this.parent=i}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n}(N),tm=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.setDirty=function(){this.dirty=!0},n.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}},n}(tv),tx=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r),this.current=r,this.dirty=!1}},n}(tv),tb=function(r,n,i,a){this.context=r,this.width=n,this.height=i;var o=r.gl,s=this.framebuffer=o.createFramebuffer();this.colorAttachment=new tm(r,s),a&&(this.depthAttachment=new tx(r,s))};tb.prototype.destroy=function(){var r=this.context.gl,n=this.colorAttachment.get();if(n&&r.deleteTexture(n),this.depthAttachment){var i=this.depthAttachment.get();i&&r.deleteRenderbuffer(i)}r.deleteFramebuffer(this.framebuffer)};var t_=function(r,n,i){this.func=r,this.mask=n,this.range=i};t_.ReadOnly=!1,t_.ReadWrite=!0,t_.disabled=new t_(519,t_.ReadOnly,[0,1]);var tw=function(r,n,i,a,o,s){this.test=r,this.ref=n,this.mask=i,this.fail=a,this.depthFail=o,this.pass=s};tw.disabled=new tw({func:519,mask:0},0,0,7680,7680,7680);var tT=function(r,n,i){this.blendFunction=r,this.blendColor=n,this.mask=i};tT.Replace=[1,0],tT.disabled=new tT(tT.Replace,r.Color.transparent,[!1,!1,!1,!1]),tT.unblended=new tT(tT.Replace,r.Color.transparent,[!0,!0,!0,!0]),tT.alphaBlended=new tT([1,771],r.Color.transparent,[!0,!0,!0,!0]);var tA=function(r,n,i){this.enable=r,this.mode=n,this.frontFace=i};tA.disabled=new tA(!1,1029,2305),tA.backCCW=new tA(!0,1029,2305);var tk=function(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new U(this),this.clearDepth=new j(this),this.clearStencil=new V(this),this.colorMask=new H(this),this.depthMask=new q(this),this.stencilMask=new G(this),this.stencilFunc=new W(this),this.stencilOp=new Y(this),this.stencilTest=new Z(this),this.depthRange=new X(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new $(this),this.blendFunc=new Q(this),this.blendColor=new tt(this),this.blendEquation=new te(this),this.cullFace=new tr(this),this.cullFaceSide=new tn(this),this.frontFace=new ti(this),this.program=new ta(this),this.activeTexture=new to(this),this.viewport=new ts(this),this.bindFramebuffer=new tl(this),this.bindRenderbuffer=new tc(this),this.bindTexture=new tu(this),this.bindVertexBuffer=new tf(this),this.bindElementBuffer=new th(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tp(this),this.pixelStoreUnpack=new td(this),this.pixelStoreUnpackPremultiplyAlpha=new ty(this),this.pixelStoreUnpackFlipY=new tg(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)};tk.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tk.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tk.prototype.createIndexBuffer=function(r,n){return new R(this,r,n)},tk.prototype.createVertexBuffer=function(r,n,i){return new F(this,r,n,i)},tk.prototype.createRenderbuffer=function(r,n,i){var a=this.gl,o=a.createRenderbuffer();return this.bindRenderbuffer.set(o),a.renderbufferStorage(a.RENDERBUFFER,r,n,i),this.bindRenderbuffer.set(null),o},tk.prototype.createFramebuffer=function(r,n,i){return new tb(this,r,n,i)},tk.prototype.clear=function(r){var n=r.color,i=r.depth,a=this.gl,o=0;n&&(o|=a.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(o|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),a.clear(o)},tk.prototype.setCullFace=function(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},tk.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},tk.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},tk.prototype.setColorMode=function(n){r.deepEqual(n.blendFunction,tT.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},tk.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var tM=function(n){function i(i,a,o){var s=this;n.call(this),this.id=i,this.dispatcher=o,this.on("data",function(r){"source"===r.dataType&&"metadata"===r.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===r.dataType&&"content"===r.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform))}),this.on("error",function(){s._sourceErrored=!0}),this._source=function(n,i,a,o){var s=new D[i.type](n,i,a,o);if(s.id!==n)throw Error("Expected Source id to be "+n+" instead of "+s.id);return r.bindAll(["load","abort","unload","serialize","prepare"],s),s}(i,a,o,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)},i.prototype.onRemove=function(r){this._source&&this._source.onRemove&&this._source.onRemove(r)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var r in this._tiles){var n=this._tiles[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(r,n){return this._source.loadTile(r,n)},i.prototype._unloadTile=function(r){if(this._source.unloadTile)return this._source.unloadTile(r,function(){})},i.prototype._abortTile=function(r){if(this._source.abortTile)return this._source.abortTile(r,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(r){for(var n in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[n];i.upload(r),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return r.values(this._tiles).map(function(r){return r.tileID}).sort(tS).map(function(r){return r.key})},i.prototype.getRenderableIds=function(n){var i=this,a=[];for(var o in this._tiles)this._isIdRenderable(o,n)&&a.push(this._tiles[o]);return n?a.sort(function(n,a){var o=n.tileID,s=a.tileID,l=new r.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle),c=new r.Point(s.canonical.x,s.canonical.y)._rotate(i.transform.angle);return o.overscaledZ-s.overscaledZ||c.y-l.y||c.x-l.x}).map(function(r){return r.tileID.key}):a.map(function(r){return r.tileID}).sort(tS).map(function(r){return r.key})},i.prototype.hasRenderableParent=function(r){var n=this.findLoadedParent(r,0);return!!n&&this._isIdRenderable(n.tileID.key)},i.prototype._isIdRenderable=function(r,n){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(n||!this._tiles[r].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var r in this._cache.reset(),this._tiles)"errored"!==this._tiles[r].state&&this._reloadTile(r,"reloading")},i.prototype._reloadTile=function(r,n){var i=this._tiles[r];i&&("loading"!==i.state&&(i.state=n),this._loadTile(i,this._tileLoaded.bind(this,i,r,n)))},i.prototype._tileLoaded=function(n,i,a,o){if(o)return n.state="errored",void(404!==o.status?this._source.fire(new r.ErrorEvent(o,{tile:n})):this.update(this.transform));n.timeAdded=r.browser.now(),"expired"===a&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(i,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:n,coord:n.tileID}))},i.prototype._backfillDEM=function(r){for(var n=this.getRenderableIds(),i=0;i<n.length;i++){var a=n[i];if(r.neighboringTiles&&r.neighboringTiles[a]){var o=this.getTileByID(a);s(r,o),s(o,r)}}function s(r,n){r.needsHillshadePrepare=!0;var i=n.tileID.canonical.x-r.tileID.canonical.x,a=n.tileID.canonical.y-r.tileID.canonical.y,o=Math.pow(2,r.tileID.canonical.z),s=n.tileID.key;0===i&&0===a||Math.abs(a)>1||(Math.abs(i)>1&&(1===Math.abs(i+o)?i+=o:1===Math.abs(i-o)&&(i-=o)),n.dem&&r.dem&&(r.dem.backfillBorder(n.dem,i,a),r.neighboringTiles&&r.neighboringTiles[s]&&(r.neighboringTiles[s].backfilled=!0)))}},i.prototype.getTile=function(r){return this.getTileByID(r.key)},i.prototype.getTileByID=function(r){return this._tiles[r]},i.prototype._retainLoadedChildren=function(r,n,i,a){for(var o in this._tiles){var s=this._tiles[o];if(!(a[o]||!s.hasData()||s.tileID.overscaledZ<=n||s.tileID.overscaledZ>i)){for(var l=s.tileID;s&&s.tileID.overscaledZ>n+1;){var c=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[c.key])&&s.hasData()&&(l=c)}for(var u=l;u.overscaledZ>n;)if(r[(u=u.scaledTo(u.overscaledZ-1)).key]){a[l.key]=l;break}}}},i.prototype.findLoadedParent=function(r,n){if(r.key in this._loadedParentTiles){var i=this._loadedParentTiles[r.key];return i&&i.tileID.overscaledZ>=n?i:null}for(var a=r.overscaledZ-1;a>=n;a--){var o=r.scaledTo(a),s=this._getLoadedTile(o);if(s)return s}},i.prototype._getLoadedTile=function(r){var n=this._tiles[r.key];return n&&n.hasData()?n:this._cache.getByKey(r.wrapped().key)},i.prototype.updateCacheSize=function(r){var n=Math.floor(5*((Math.ceil(r.width/this._source.tileSize)+1)*(Math.ceil(r.height/this._source.tileSize)+1))),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},i.prototype.handleWrapJump=function(r){var n=Math.round((r-(void 0===this._prevLng?r:this._prevLng))/360);if(this._prevLng=r,n){var i={};for(var a in this._tiles){var o=this._tiles[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),i[o.tileID.key]=o}for(var s in this._tiles=i,this._timers)clearTimeout(this._timers[s]),delete this._timers[s];for(var l in this._tiles){var c=this._tiles[l];this._setTileReloadTimer(l,c)}}},i.prototype.update=function(n){var a=this;if(this.transform=n,this._sourceLoaded&&!this._paused){this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(n){return new r.OverscaledTileID(n.canonical.z,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y)}):(o=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(r){return a._source.hasTile(r)}))):o=[];var o,s=n.coveringZoomLevel(this._source),l=Math.max(s-i.maxOverzooming,this._source.minzoom),c=Math.max(s+i.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(o,s);if(tE(this._source.type)){for(var f={},h={},p=0,d=Object.keys(u);p<d.length;p+=1){var y=d[p],g=u[y],v=this._tiles[y];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=r.browser.now())){var m=this.findLoadedParent(g,l);m&&(this._addTile(m.tileID),f[m.tileID.key]=m.tileID),h[y]=g}}for(var x in this._retainLoadedChildren(h,s,c,u),f)u[x]||(this._coveredTiles[x]=!0,u[x]=f[x])}for(var b in u)this._tiles[b].clearFadeHold();for(var _=0,w=r.keysDifference(this._tiles,u);_<w.length;_+=1){var T=w[_],A=this._tiles[T];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(T)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)},i.prototype._updateRetainedTiles=function(r,n){for(var a={},o={},s=Math.max(n-i.maxOverzooming,this._source.minzoom),l=Math.max(n+i.maxUnderzooming,this._source.minzoom),c={},u=0;u<r.length;u+=1){var f=r[u],h=this._addTile(f);a[f.key]=f,h.hasData()||n<this._source.maxzoom&&(c[f.key]=f)}this._retainLoadedChildren(c,n,l,a);for(var p=0;p<r.length;p+=1){var d=r[p],y=this._tiles[d.key];if(!y.hasData()){if(n+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],v=this.getTile(g);if(v&&v.hasData()){a[g.key]=g;continue}}else{var m=d.children(this._source.maxzoom);if(a[m[0].key]&&a[m[1].key]&&a[m[2].key]&&a[m[3].key])continue}for(var x=y.wasRequested(),b=d.overscaledZ-1;b>=s;--b){var _=d.scaledTo(b);if(o[_.key]||(o[_.key]=!0,(y=this.getTile(_))||!x||(y=this._addTile(_)),y&&(a[_.key]=_,x=y.wasRequested(),y.hasData())))break}}}return a},i.prototype._updateLoadedParentTileCache=function(){for(var r in this._loadedParentTiles={},this._tiles){for(var n=[],i=void 0,a=this._tiles[r].tileID;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){i=this._loadedParentTiles[a.key];break}n.push(a.key);var o=a.scaledTo(a.overscaledZ-1);if(i=this._getLoadedTile(o))break;a=o}for(var s=0;s<n.length;s+=1){var l=n[s];this._loadedParentTiles[l]=i}}},i.prototype._addTile=function(n){var i=this._tiles[n.key];if(i)return i;(i=this._cache.getAndRemove(n))&&(this._setTileReloadTimer(n.key,i),i.tileID=n,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,i)));var a=!!i;return a||(i=new r.Tile(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,n.key,i.state))),i?(i.uses++,this._tiles[n.key]=i,a||this._source.fire(new r.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(r,n){var i=this;r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);var a=n.getExpiryTimeout();a&&(this._timers[r]=setTimeout(function(){i._reloadTile(r,"expired"),delete i._timers[r]},a))},i.prototype._removeTile=function(r){var n=this._tiles[r];n&&(n.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),n.uses>0||(n.hasData()&&"reloading"!==n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))},i.prototype.clearTiles=function(){for(var r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(r);this._cache.reset()},i.prototype.tilesIn=function(n,i,a){var o=this,s=[],l=this.transform;if(!l)return s;for(var c=a?l.getCameraQueryGeometry(n):n,u=n.map(function(r){return l.pointCoordinate(r)}),f=c.map(function(r){return l.pointCoordinate(r)}),h=this.getIds(),p=1/0,d=1/0,y=-1/0,g=-1/0,v=0;v<f.length;v+=1){var m=f[v];p=Math.min(p,m.x),d=Math.min(d,m.y),y=Math.max(y,m.x),g=Math.max(g,m.y)}for(var x=0;x<h.length;x++)(function(n){var a=o._tiles[h[n]];if(!a.holdingForFade()){var c=a.tileID,v=Math.pow(2,l.zoom-a.tileID.overscaledZ),m=i*a.queryPadding*r.EXTENT/a.tileSize/v,x=[c.getTilePoint(new r.MercatorCoordinate(p,d)),c.getTilePoint(new r.MercatorCoordinate(y,g))];if(x[0].x-m<r.EXTENT&&x[0].y-m<r.EXTENT&&x[1].x+m>=0&&x[1].y+m>=0){var b=u.map(function(r){return c.getTilePoint(r)}),_=f.map(function(r){return c.getTilePoint(r)});s.push({tile:a,tileID:c,queryGeometry:b,cameraQueryGeometry:_,scale:v})}}})(x);return s},i.prototype.getVisibleCoordinates=function(r){for(var n=this,i=this.getRenderableIds(r).map(function(r){return n._tiles[r].tileID}),a=0;a<i.length;a+=1){var o=i[a];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(tE(this._source.type))for(var n in this._tiles){var i=this._tiles[n];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=r.browser.now())return!0}return!1},i.prototype.setFeatureState=function(r,n,i){r=r||"_geojsonTileLayer",this._state.updateState(r,n,i)},i.prototype.removeFeatureState=function(r,n,i){r=r||"_geojsonTileLayer",this._state.removeFeatureState(r,n,i)},i.prototype.getFeatureState=function(r,n){return r=r||"_geojsonTileLayer",this._state.getState(r,n)},i.prototype.setDependencies=function(r,n,i){var a=this._tiles[r];a&&a.setDependencies(n,i)},i.prototype.reloadTilesForDependencies=function(r,n){for(var i in this._tiles)this._tiles[i].hasDependency(r,n)&&this._reloadTile(i,"reloading");this._cache.filter(function(i){return!i.hasDependency(r,n)})},i}(r.Evented);function tS(r,n){var i=Math.abs(2*r.wrap)-+(r.wrap<0),a=Math.abs(2*n.wrap)-+(n.wrap<0);return r.overscaledZ-n.overscaledZ||a-i||n.canonical.y-r.canonical.y||n.canonical.x-r.canonical.x}function tE(r){return"raster"===r||"image"===r||"video"===r}function tI(){return new r.window.Worker(ng.workerUrl)}tM.maxOverzooming=10,tM.maxUnderzooming=3;var tL="mapboxgl_preloaded_worker_pool",tC=function(){this.active={}};tC.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<tC.workerCount;)this.workers.push(new tI);return this.active[r]=!0,this.workers.slice()},tC.prototype.release=function(r){delete this.active[r],0===this.numActive()&&(this.workers.forEach(function(r){r.terminate()}),this.workers=null)},tC.prototype.isPreloaded=function(){return!!this.active[tL]},tC.prototype.numActive=function(){return Object.keys(this.active).length};var tO,tD=Math.floor(r.browser.hardwareConcurrency/2);function tP(){return tO||(tO=new tC),tO}function tB(n){n=n.slice();for(var i=Object.create(null),a=0;a<n.length;a++)i[n[a].id]=n[a];for(var o=0;o<n.length;o++)"ref"in n[o]&&(n[o]=function(n,i){var a={};for(var o in n)"ref"!==o&&(a[o]=n[o]);return r.refProperties.forEach(function(r){r in i&&(a[r]=i[r])}),a}(n[o],i[n[o].ref]));return n}tC.workerCount=Math.max(Math.min(tD,6),1);var tR={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tz(r,n,i){i.push({command:tR.addSource,args:[r,n[r]]})}function tF(r,n,i){n.push({command:tR.removeSource,args:[r]}),i[r]=!0}function tN(n,i,a,o,s,l){var c;for(c in i=i||{},n=n||{})n.hasOwnProperty(c)&&(r.deepEqual(n[c],i[c])||a.push({command:l,args:[o,c,i[c],s]}));for(c in i)i.hasOwnProperty(c)&&!n.hasOwnProperty(c)&&(r.deepEqual(n[c],i[c])||a.push({command:l,args:[o,c,i[c],s]}))}function tU(r){return r.id}function tj(r,n){return r[n.id]=n,r}var tV=function(r,n){this.reset(r,n)};tV.prototype.reset=function(r,n){this.points=r||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding},tV.prototype.lerp=function(n){if(1===this.points.length)return this.points[0];n=r.clamp(n,0,1);for(var i=1,a=this._distances[i],o=n*this.paddedLength+this.padding;a<o&&i<this._distances.length;)a=this._distances[++i];var s=i-1,l=this._distances[s],c=a-l,u=c>0?(o-l)/c:0;return this.points[s].mult(1-u).add(this.points[i].mult(u))};var tH=function(r,n,i){var a=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(r/i),this.yCellCount=Math.ceil(n/i);for(var s=0;s<this.xCellCount*this.yCellCount;s++)a.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=n,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0};function tq(n,i,a,o,s){var l=r.create();return i?(r.scale(l,l,[1/s,1/s,1]),a||r.rotateZ(l,l,o.angle)):r.multiply(l,o.labelPlaneMatrix,n),l}function tG(n,i,a,o,s){if(i){var l=r.clone(n);return r.scale(l,l,[s,s,1]),a||r.rotateZ(l,l,-o.angle),l}return o.glCoordMatrix}function tW(n,i){var a=[n.x,n.y,0,1];t1(a,a,i);var o=a[3];return{point:new r.Point(a[0]/o,a[1]/o),signedDistanceFromCamera:o}}function tY(r,n){return .5+r/n*.5}function tZ(r,n,i,a,o,s,l,c,u,f,h){var p=c.glyphStartIndex+c.numGlyphs,d=c.lineStartIndex,y=c.lineStartIndex+c.lineLength,g=n.getoffsetX(c.glyphStartIndex),v=n.getoffsetX(p-1),m=t$(r*g,i,a,o,s,l,c.segment,d,y,u,f,h);if(!m)return null;var x=t$(r*v,i,a,o,s,l,c.segment,d,y,u,f,h);return x?{first:m,last:x}:null}function tX(n,i,a,o){return n===r.WritingMode.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*o?{useVertical:!0}:(n===r.WritingMode.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function tK(n,i,a,o,s,l,c,u,f,h,p,d,y,g){var v,m=i/24,x=n.lineOffsetX*m,b=n.lineOffsetY*m;if(n.numGlyphs>1){var _=n.glyphStartIndex+n.numGlyphs,w=n.lineStartIndex,T=n.lineStartIndex+n.lineLength,A=tZ(m,u,x,b,a,p,d,n,f,l,y);if(!A)return{notEnoughRoom:!0};var k=tW(A.first.point,c).point,M=tW(A.last.point,c).point;if(o&&!a){var S=tX(n.writingMode,k,M,g);if(S)return S}v=[A.first];for(var E=n.glyphStartIndex+1;E<_-1;E++)v.push(t$(m*u.getoffsetX(E),x,b,a,p,d,n.segment,w,T,f,l,y));v.push(A.last)}else{if(o&&!a){var I=tW(d,s).point,L=n.lineStartIndex+n.segment+1,C=new r.Point(f.getx(L),f.gety(L)),O=tW(C,s),D=O.signedDistanceFromCamera>0?O.point:tJ(d,C,I,1,s),P=tX(n.writingMode,I,D,g);if(P)return P}var B=t$(m*u.getoffsetX(n.glyphStartIndex),x,b,a,p,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,f,l,y);if(!B)return{notEnoughRoom:!0};v=[B]}for(var R=0,z=v;R<z.length;R+=1){var F=z[R];r.addDynamicAttributes(h,F.point,F.angle)}return{}}function tJ(r,n,i,a,o){var s=tW(r.add(r.sub(n)._unit()),o).point,l=i.sub(s);return i.add(l._mult(a/l.mag()))}function t$(n,i,a,o,s,l,c,u,f,h,p,d){var y=o?n-i:n+i,g=y>0?1:-1,v=0;o&&(g*=-1,v=Math.PI),g<0&&(v+=Math.PI);for(var m=g>0?u+c:u+c+1,x=s,b=s,_=0,w=0,T=Math.abs(y),A=[];_+w<=T;){if((m+=g)<u||m>=f)return null;if(b=x,A.push(x),void 0===(x=d[m])){var k=new r.Point(h.getx(m),h.gety(m)),M=tW(k,p);if(M.signedDistanceFromCamera>0)x=d[m]=M.point;else{var S=m-g;x=tJ(0===_?l:new r.Point(h.getx(S),h.gety(S)),k,b,T-_+1,p)}}_+=w,w=b.dist(x)}var E=(T-_)/w,I=x.sub(b),L=I.mult(E)._add(b);L._add(I._unit()._perp()._mult(a*g));var C=v+Math.atan2(x.y-b.y,x.x-b.x);return A.push(L),{point:L,angle:C,path:A}}tH.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},tH.prototype.insert=function(r,n,i,a,o){this._forEachCell(n,i,a,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o)},tH.prototype.insertCircle=function(r,n,i,a){this._forEachCell(n-a,i-a,n+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(n),this.circles.push(i),this.circles.push(a)},tH.prototype._insertBoxCell=function(r,n,i,a,o,s){this.boxCells[o].push(s)},tH.prototype._insertCircleCell=function(r,n,i,a,o,s){this.circleCells[o].push(s)},tH.prototype._query=function(r,n,i,a,o,s){if(i<0||r>this.width||a<0||n>this.height)return!o&&[];var l=[];if(r<=0&&n<=0&&this.width<=i&&this.height<=a){if(o)return!0;for(var c=0;c<this.boxKeys.length;c++)l.push({key:this.boxKeys[c],x1:this.bboxes[4*c],y1:this.bboxes[4*c+1],x2:this.bboxes[4*c+2],y2:this.bboxes[4*c+3]});for(var u=0;u<this.circleKeys.length;u++){var f=this.circles[3*u],h=this.circles[3*u+1],p=this.circles[3*u+2];l.push({key:this.circleKeys[u],x1:f-p,y1:h-p,x2:f+p,y2:h+p})}return s?l.filter(s):l}return this._forEachCell(r,n,i,a,this._queryCell,l,{hitTest:o,seenUids:{box:{},circle:{}}},s),o?l.length>0:l},tH.prototype._queryCircle=function(r,n,i,a,o){var s=r-i,l=r+i,c=n-i,u=n+i;if(l<0||s>this.width||u<0||c>this.height)return!a&&[];var f=[];return this._forEachCell(s,c,l,u,this._queryCellCircle,f,{hitTest:a,circle:{x:r,y:n,radius:i},seenUids:{box:{},circle:{}}},o),a?f.length>0:f},tH.prototype.query=function(r,n,i,a,o){return this._query(r,n,i,a,!1,o)},tH.prototype.hitTest=function(r,n,i,a,o){return this._query(r,n,i,a,!0,o)},tH.prototype.hitTestCircle=function(r,n,i,a){return this._queryCircle(r,n,i,!0,a)},tH.prototype._queryCell=function(r,n,i,a,o,s,l,c){var u=l.seenUids,f=this.boxCells[o];if(null!==f)for(var h=this.bboxes,p=0;p<f.length;p+=1){var d=f[p];if(!u.box[d]){u.box[d]=!0;var y=4*d;if(r<=h[y+2]&&n<=h[y+3]&&i>=h[y+0]&&a>=h[y+1]&&(!c||c(this.boxKeys[d]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[d],x1:h[y],y1:h[y+1],x2:h[y+2],y2:h[y+3]})}}}var g=this.circleCells[o];if(null!==g)for(var v=this.circles,m=0;m<g.length;m+=1){var x=g[m];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(v[b],v[b+1],v[b+2],r,n,i,a)&&(!c||c(this.circleKeys[x]))){if(l.hitTest)return s.push(!0),!0;var _=v[b],w=v[b+1],T=v[b+2];s.push({key:this.circleKeys[x],x1:_-T,y1:w-T,x2:_+T,y2:w+T})}}}},tH.prototype._queryCellCircle=function(r,n,i,a,o,s,l,c){var u=l.circle,f=l.seenUids,h=this.boxCells[o];if(null!==h)for(var p=this.bboxes,d=0;d<h.length;d+=1){var y=h[d];if(!f.box[y]){f.box[y]=!0;var g=4*y;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!c||c(this.boxKeys[y])))return s.push(!0),!0}}var v=this.circleCells[o];if(null!==v)for(var m=this.circles,x=0;x<v.length;x+=1){var b=v[x];if(!f.circle[b]){f.circle[b]=!0;var _=3*b;if(this._circlesCollide(m[_],m[_+1],m[_+2],u.x,u.y,u.radius)&&(!c||c(this.circleKeys[b])))return s.push(!0),!0}}},tH.prototype._forEachCell=function(r,n,i,a,o,s,l,c){for(var u=this._convertToXCellCoord(r),f=this._convertToYCellCoord(n),h=this._convertToXCellCoord(i),p=this._convertToYCellCoord(a),d=u;d<=h;d++)for(var y=f;y<=p;y++){var g=this.xCellCount*y+d;if(o.call(this,r,n,i,a,g,s,l,c))return}},tH.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},tH.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},tH.prototype._circlesCollide=function(r,n,i,a,o,s){var l=a-r,c=o-n,u=i+s;return u*u>l*l+c*c},tH.prototype._circleAndRectCollide=function(r,n,i,a,o,s,l){var c=(s-a)/2,u=Math.abs(r-(a+c));if(u>c+i)return!1;var f=(l-o)/2,h=Math.abs(n-(o+f));if(h>f+i)return!1;if(u<=c||h<=f)return!0;var p=u-c,d=h-f;return p*p+d*d<=i*i};var tQ=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function t0(r,n){for(var i=0;i<r;i++){var a=n.length;n.resize(a+4),n.float32.set(tQ,3*a)}}function t1(r,n,i){var a=n[0],o=n[1];return r[0]=i[0]*a+i[4]*o+i[12],r[1]=i[1]*a+i[5]*o+i[13],r[3]=i[3]*a+i[7]*o+i[15],r}var t2=function(r,n,i){void 0===n&&(n=new tH(r.width+200,r.height+200,25)),void 0===i&&(i=new tH(r.width+200,r.height+200,25)),this.transform=r,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200};function t3(n,i,a){return i*(r.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}t2.prototype.placeCollisionBox=function(r,n,i,a,o){var s=this.projectAndGetPerspectiveRatio(a,r.anchorPointX,r.anchorPointY),l=i*s.perspectiveRatio,c=r.x1*l+s.point.x,u=r.y1*l+s.point.y,f=r.x2*l+s.point.x,h=r.y2*l+s.point.y;return!this.isInsideGrid(c,u,f,h)||!n&&this.grid.hitTest(c,u,f,h,o)?{box:[],offscreen:!1}:{box:[c,u,f,h],offscreen:this.isOffscreen(c,u,f,h)}},t2.prototype.placeCollisionCircles=function(n,i,a,o,s,l,c,u,f,h,p,d,y){var g=[],v=new r.Point(i.anchorX,i.anchorY),m=tW(v,l),x=tY(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),b=(h?s/x:s*x)/r.ONE_EM,_=tW(v,c).point,w=tZ(b,o,i.lineOffsetX*b,i.lineOffsetY*b,!1,_,v,i,a,c,{}),T=!1,A=!1,k=!0;if(w){for(var M=.5*d*x+y,S=new r.Point(-100,-100),E=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),I=new tV,L=w.first,C=w.last,O=[],D=L.path.length-1;D>=1;D--)O.push(L.path[D]);for(var P=1;P<C.path.length;P++)O.push(C.path[P]);var B=2.5*M;if(u){var R=O.map(function(r){return tW(r,u)});O=R.some(function(r){return r.signedDistanceFromCamera<=0})?[]:R.map(function(r){return r.point})}var z=[];if(O.length>0){for(var F=O[0].clone(),N=O[0].clone(),U=1;U<O.length;U++)F.x=Math.min(F.x,O[U].x),F.y=Math.min(F.y,O[U].y),N.x=Math.max(N.x,O[U].x),N.y=Math.max(N.y,O[U].y);z=F.x>=S.x&&N.x<=E.x&&F.y>=S.y&&N.y<=E.y?[O]:N.x<S.x||F.x>E.x||N.y<S.y||F.y>E.y?[]:r.clipLine([O],S.x,S.y,E.x,E.y)}for(var j=0,V=z;j<V.length;j+=1){var H,q=V[j];I.reset(q,.25*M),H=I.length<=.5*M?1:Math.ceil(I.paddedLength/B)+1;for(var G=0;G<H;G++){var W=G/Math.max(H-1,1),Y=I.lerp(W),Z=Y.x+100,X=Y.y+100;g.push(Z,X,M,0);var K=Z-M,J=X-M,$=Z+M,Q=X+M;if(k=k&&this.isOffscreen(K,J,$,Q),A=A||this.isInsideGrid(K,J,$,Q),!n&&this.grid.hitTestCircle(Z,X,M,p)&&(T=!0,!f))return{circles:[],offscreen:!1,collisionDetected:T}}}}return{circles:(f||!T)&&A?g:[],offscreen:k,collisionDetected:T}},t2.prototype.queryRenderedSymbols=function(n){if(0===n.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],a=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<n.length;c+=1){var u=n[c],f=new r.Point(u.x+100,u.y+100);a=Math.min(a,f.x),o=Math.min(o,f.y),s=Math.max(s,f.x),l=Math.max(l,f.y),i.push(f)}for(var h={},p={},d=0,y=this.grid.query(a,o,s,l).concat(this.ignoredGrid.query(a,o,s,l));d<y.length;d+=1){var g=y[d],v=g.key;if(void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]={}),!h[v.bucketInstanceId][v.featureIndex]){var m=[new r.Point(g.x1,g.y1),new r.Point(g.x2,g.y1),new r.Point(g.x2,g.y2),new r.Point(g.x1,g.y2)];r.polygonIntersectsPolygon(i,m)&&(h[v.bucketInstanceId][v.featureIndex]=!0,void 0===p[v.bucketInstanceId]&&(p[v.bucketInstanceId]=[]),p[v.bucketInstanceId].push(v.featureIndex))}}return p},t2.prototype.insertCollisionBox=function(r,n,i,a,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:a,collisionGroupID:o},r[0],r[1],r[2],r[3])},t2.prototype.insertCollisionCircles=function(r,n,i,a,o){for(var s=n?this.ignoredGrid:this.grid,l={bucketInstanceId:i,featureIndex:a,collisionGroupID:o},c=0;c<r.length;c+=4)s.insertCircle(l,r[c],r[c+1],r[c+2])},t2.prototype.projectAndGetPerspectiveRatio=function(n,i,a){var o=[i,a,0,1];return t1(o,o,n),{point:new r.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}},t2.prototype.isOffscreen=function(r,n,i,a){return i<100||r>=this.screenRightBoundary||a<100||n>this.screenBottomBoundary},t2.prototype.isInsideGrid=function(r,n,i,a){return i>=0&&r<this.gridRightBoundary&&a>=0&&n<this.gridBottomBoundary},t2.prototype.getViewportMatrix=function(){var n=r.identity([]);return r.translate(n,n,[-100,-100,0]),n};var t4=function(r,n,i,a){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?n:-n))):a&&i?1:0,this.placed=i};t4.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var t6=function(r,n,i,a,o){this.text=new t4(r?r.text:null,n,i,o),this.icon=new t4(r?r.icon:null,n,a,o)};t6.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var t5=function(r,n,i){this.text=r,this.icon=n,this.skipFade=i},t8=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},t7=function(r,n,i,a,o){this.bucketInstanceId=r,this.featureIndex=n,this.sourceLayerIndex=i,this.bucketIndex=a,this.tileID=o},t9=function(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}};function et(n,i,a,o,s){var l=r.getAnchorAlignment(n),c=-(l.horizontalAlign-.5)*i,u=-(l.verticalAlign-.5)*a,f=r.evaluateVariableOffset(n,o);return new r.Point(c+f[0]*s,u+f[1]*s)}function ee(n,i,a,o,s,l){var c=n.x1,u=n.x2,f=n.y1,h=n.y2,p=n.anchorPointX,d=n.anchorPointY,y=new r.Point(i,a);return o&&y._rotate(s?l:-l),{x1:c+y.x,y1:f+y.y,x2:u+y.x,y2:h+y.y,anchorPointX:p,anchorPointY:d}}t9.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var n=++this.maxGroupID;this.collisionGroups[r]={ID:n,predicate:function(r){return r.collisionGroupID===n}}}return this.collisionGroups[r]};var er=function(r,n,i,a){this.transform=r.clone(),this.collisionIndex=new t2(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new t9(i),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={}};function en(r,n,i,a,o){r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0)}function ei(r){if(0===r.opacity&&!r.placed)return 0;if(1===r.opacity&&r.placed)return 4294967295;var n=r.placed?1:0,i=Math.floor(127*r.opacity);return 33554432*i+16777216*n+131072*i+65536*n+512*i+256*n+2*i+n}er.prototype.getBucketParts=function(n,i,a,o){var s=a.getBucket(i),l=a.latestFeatureIndex;if(s&&l&&i.id===s.layerIds[0]){var c=a.collisionBoxArray,u=s.layers[0].layout,f=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),h=a.tileSize/r.EXTENT,p=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),d="map"===u.get("text-pitch-alignment"),y="map"===u.get("text-rotation-alignment"),g=t3(a,1,this.transform.zoom),v=tq(p,d,y,this.transform,g),m=null;if(d){var x=tG(p,d,y,this.transform,g);m=r.multiply([],this.transform.labelPlaneMatrix,x)}this.retainedQueryData[s.bucketInstanceId]=new t7(s.bucketInstanceId,l,s.sourceLayerIndex,s.index,a.tileID);var b={bucket:s,layout:u,posMatrix:p,textLabelPlaneMatrix:v,labelToScreenMatrix:m,scale:f,textPixelRatio:h,holdingForFade:a.holdingForFade(),collisionBoxArray:c,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(o)for(var _=0,w=s.sortKeyRanges;_<w.length;_+=1){var T=w[_],A=T.sortKey,k=T.symbolInstanceStart,M=T.symbolInstanceEnd;n.push({sortKey:A,symbolInstanceStart:k,symbolInstanceEnd:M,parameters:b})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:b})}},er.prototype.attemptAnchorPlacement=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g){var v,m=[p.textOffset0,p.textOffset1],x=et(r,i,a,m,o),b=this.collisionIndex.placeCollisionBox(ee(n,x.x,x.y,s,l,this.transform.angle),h,c,u,f.predicate);if(!g||0!==this.collisionIndex.placeCollisionBox(ee(g,x.x,x.y,s,l,this.transform.angle),h,c,u,f.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(v=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:m,width:i,height:a,anchor:r,textBoxScale:o,prevAnchor:v},this.markUsedJustification(d,r,p,y),d.allowVerticalPlacement&&(this.markUsedOrientation(d,y,p),this.placedOrientations[p.crossTileID]=y),{shift:x,placedGlyphBoxes:b}):void 0},er.prototype.placeLayerBucketPart=function(n,i,a){var o=this,s=n.parameters,l=s.bucket,c=s.layout,u=s.posMatrix,f=s.textLabelPlaneMatrix,h=s.labelToScreenMatrix,p=s.textPixelRatio,d=s.holdingForFade,y=s.collisionBoxArray,g=s.partiallyEvaluatedTextSize,v=s.collisionGroup,m=c.get("text-optional"),x=c.get("icon-optional"),b=c.get("text-allow-overlap"),_=c.get("icon-allow-overlap"),w="map"===c.get("text-rotation-alignment"),T="map"===c.get("text-pitch-alignment"),A="none"!==c.get("icon-text-fit"),k="viewport-y"===c.get("symbol-z-order"),M=b&&(_||!l.hasIconData()||x),S=_&&(b||!l.hasTextData()||m);!l.collisionArrays&&y&&l.deserializeCollisionBoxes(y);var E=function(n,s){if(!i[n.crossTileID]){if(d)o.placements[n.crossTileID]=new t5(!1,!1,!1);else{var y,k=!1,E=!1,I=!0,L=null,C={box:null,offscreen:null},O={box:null,offscreen:null},D=null,P=null,B=0,R=0,z=0;s.textFeatureIndex?B=s.textFeatureIndex:n.useRuntimeCollisionCircles&&(B=n.featureIndex),s.verticalTextFeatureIndex&&(R=s.verticalTextFeatureIndex);var F=s.textBox;if(F){var N=function(i){var a=r.WritingMode.horizontal;if(l.allowVerticalPlacement&&!i&&o.prevPlacement){var s=o.prevPlacement.placedOrientations[n.crossTileID];s&&(o.placedOrientations[n.crossTileID]=s,a=s,o.markUsedOrientation(l,a,n))}return a},U=function(i,a){if(l.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&s.verticalTextBox)for(var o=0,c=l.writingModes;o<c.length&&(c[o]===r.WritingMode.vertical?O=C=a():C=i(),!(C&&C.box&&C.box.length));o+=1);else C=i()};if(c.get("text-variable-anchor")){var j=c.get("text-variable-anchor");if(o.prevPlacement&&o.prevPlacement.variableOffsets[n.crossTileID]){var V=o.prevPlacement.variableOffsets[n.crossTileID];j.indexOf(V.anchor)>0&&(j=j.filter(function(r){return r!==V.anchor})).unshift(V.anchor)}var H=function(r,i,a){for(var s=r.x2-r.x1,c=r.y2-r.y1,f=n.textBoxScale,h=A&&!_?i:null,d={box:[],offscreen:!1},y=b?2*j.length:j.length,g=0;g<y;++g){var m=j[g%j.length],x=g>=j.length,M=o.attemptAnchorPlacement(m,r,s,c,f,w,T,p,u,v,x,n,l,a,h);if(M&&(d=M.placedGlyphBoxes)&&d.box&&d.box.length){k=!0,L=M.shift;break}}return d};U(function(){return H(F,s.iconBox,r.WritingMode.horizontal)},function(){var i=s.verticalTextBox,a=C&&C.box&&C.box.length;return l.allowVerticalPlacement&&!a&&n.numVerticalGlyphVertices>0&&i?H(i,s.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),C&&(k=C.box,I=C.offscreen);var q=N(C&&C.box);if(!k&&o.prevPlacement){var G=o.prevPlacement.variableOffsets[n.crossTileID];G&&(o.variableOffsets[n.crossTileID]=G,o.markUsedJustification(l,G.anchor,n,q))}}else{var W=function(r,i){var a=o.collisionIndex.placeCollisionBox(r,b,p,u,v.predicate);return a&&a.box&&a.box.length&&(o.markUsedOrientation(l,i,n),o.placedOrientations[n.crossTileID]=i),a};U(function(){return W(F,r.WritingMode.horizontal)},function(){var i=s.verticalTextBox;return l.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&i?W(i,r.WritingMode.vertical):{box:null,offscreen:null}}),N(C&&C.box&&C.box.length)}}if(k=(y=C)&&y.box&&y.box.length>0,I=y&&y.offscreen,n.useRuntimeCollisionCircles){var Y=l.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex),Z=r.evaluateSizeForFeature(l.textSizeData,g,Y),X=c.get("text-padding"),K=n.collisionCircleDiameter;D=o.collisionIndex.placeCollisionCircles(b,Y,l.lineVertexArray,l.glyphOffsetArray,Z,u,f,h,a,T,v.predicate,K,X),k=b||D.circles.length>0&&!D.collisionDetected,I=I&&D.offscreen}if(s.iconFeatureIndex&&(z=s.iconFeatureIndex),s.iconBox){var J=function(r){var n=A&&L?ee(r,L.x,L.y,w,T,o.transform.angle):r;return o.collisionIndex.placeCollisionBox(n,_,p,u,v.predicate)};E=O&&O.box&&O.box.length&&s.verticalIconBox?(P=J(s.verticalIconBox)).box.length>0:(P=J(s.iconBox)).box.length>0,I=I&&P.offscreen}var $=m||0===n.numHorizontalGlyphVertices&&0===n.numVerticalGlyphVertices,Q=x||0===n.numIconVertices;if($||Q?Q?$||(E=E&&k):k=E&&k:E=k=E&&k,k&&y&&y.box&&(O&&O.box&&R?o.collisionIndex.insertCollisionBox(y.box,c.get("text-ignore-placement"),l.bucketInstanceId,R,v.ID):o.collisionIndex.insertCollisionBox(y.box,c.get("text-ignore-placement"),l.bucketInstanceId,B,v.ID)),E&&P&&o.collisionIndex.insertCollisionBox(P.box,c.get("icon-ignore-placement"),l.bucketInstanceId,z,v.ID),D&&(k&&o.collisionIndex.insertCollisionCircles(D.circles,c.get("text-ignore-placement"),l.bucketInstanceId,B,v.ID),a)){var tt=l.bucketInstanceId,te=o.collisionCircleArrays[tt];void 0===te&&(te=o.collisionCircleArrays[tt]=new t8);for(var tr=0;tr<D.circles.length;tr+=4)te.circles.push(D.circles[tr+0]),te.circles.push(D.circles[tr+1]),te.circles.push(D.circles[tr+2]),te.circles.push(D.collisionDetected?1:0)}o.placements[n.crossTileID]=new t5(k||M,E||S,I||l.justReloaded),i[n.crossTileID]=!0}}};if(k)for(var I=l.getSortedSymbolIndexes(this.transform.angle),L=I.length-1;L>=0;--L){var C=I[L];E(l.symbolInstances.get(C),l.collisionArrays[C])}else for(var O=n.symbolInstanceStart;O<n.symbolInstanceEnd;O++)E(l.symbolInstances.get(O),l.collisionArrays[O]);if(a&&l.bucketInstanceId in this.collisionCircleArrays){var D=this.collisionCircleArrays[l.bucketInstanceId];r.invert(D.invProjMatrix,u),D.viewportMatrix=this.collisionIndex.getViewportMatrix()}l.justReloaded=!1},er.prototype.markUsedJustification=function(n,i,a,o){var s,l={left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex};s=o===r.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:l[r.getAnchorJustification(i)];for(var c=0,u=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];c<u.length;c+=1){var f=u[c];f>=0&&(n.text.placedSymbolArray.get(f).crossTileID=s>=0&&f!==s?0:a.crossTileID)}},er.prototype.markUsedOrientation=function(n,i,a){for(var o=i===r.WritingMode.horizontal||i===r.WritingMode.horizontalOnly?i:0,s=i===r.WritingMode.vertical?i:0,l=0,c=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];l<c.length;l+=1){var u=c[l];n.text.placedSymbolArray.get(u).placedOrientation=o}a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=s)},er.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var n=this.prevPlacement,i=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;var a=n?n.symbolFadeChange(r):1,o=n?n.opacities:{},s=n?n.variableOffsets:{},l=n?n.placedOrientations:{};for(var c in this.placements){var u=this.placements[c],f=o[c];f?(this.opacities[c]=new t6(f,a,u.text,u.icon),i=i||u.text!==f.text.placed||u.icon!==f.icon.placed):(this.opacities[c]=new t6(null,a,u.text,u.icon,u.skipFade),i=i||u.text||u.icon)}for(var h in o){var p=o[h];if(!this.opacities[h]){var d=new t6(p,a,!1,!1);d.isHidden()||(this.opacities[h]=d,i=i||p.text.placed||p.icon.placed)}}for(var y in s)this.variableOffsets[y]||!this.opacities[y]||this.opacities[y].isHidden()||(this.variableOffsets[y]=s[y]);for(var g in l)this.placedOrientations[g]||!this.opacities[g]||this.opacities[g].isHidden()||(this.placedOrientations[g]=l[g]);i?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:r)},er.prototype.updateLayerOpacities=function(r,n){for(var i={},a=0;a<n.length;a+=1){var o=n[a],s=o.getBucket(r);s&&o.latestFeatureIndex&&r.id===s.layerIds[0]&&this.updateBucketOpacities(s,i,o.collisionBoxArray)}},er.prototype.updateBucketOpacities=function(n,i,a){var o=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var s=n.layers[0].layout,l=new t6(null,0,!1,!1,!0),c=s.get("text-allow-overlap"),u=s.get("icon-allow-overlap"),f=s.get("text-variable-anchor"),h="map"===s.get("text-rotation-alignment"),p="map"===s.get("text-pitch-alignment"),d="none"!==s.get("icon-text-fit"),y=new t6(null,0,c&&(u||!n.hasIconData()||s.get("icon-optional")),u&&(c||!n.hasTextData()||s.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var g=function(r,n,i){for(var a=0;a<n/4;a++)r.opacityVertexArray.emplaceBack(i)},v=0;v<n.symbolInstances.length;v++)(function(a){var s=n.symbolInstances.get(a),c=s.numHorizontalGlyphVertices,u=s.numVerticalGlyphVertices,v=s.crossTileID,m=i[v],x=o.opacities[v];m?x=l:x||(x=y,o.opacities[v]=x),i[v]=!0;var b=c>0||u>0,_=s.numIconVertices>0,w=o.placedOrientations[s.crossTileID],T=w===r.WritingMode.vertical,A=w===r.WritingMode.horizontal||w===r.WritingMode.horizontalOnly;if(b){var k=ei(x.text),M=T?ea:k;g(n.text,c,M);var S=A?ea:k;g(n.text,u,S);var E=x.text.isHidden();[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(function(r){r>=0&&(n.text.placedSymbolArray.get(r).hidden=E||T?1:0)}),s.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).hidden=E||A?1:0);var I=o.variableOffsets[s.crossTileID];I&&o.markUsedJustification(n,I.anchor,s,w);var L=o.placedOrientations[s.crossTileID];L&&(o.markUsedJustification(n,"left",s,L),o.markUsedOrientation(n,L,s))}if(_){var C=ei(x.icon),O=!(d&&s.verticalPlacedIconSymbolIndex&&T);if(s.placedIconSymbolIndex>=0){var D=O?C:ea;g(n.icon,s.numIconVertices,D),n.icon.placedSymbolArray.get(s.placedIconSymbolIndex).hidden=x.icon.isHidden()}if(s.verticalPlacedIconSymbolIndex>=0){var P=O?ea:C;g(n.icon,s.numVerticalIconVertices,P),n.icon.placedSymbolArray.get(s.verticalPlacedIconSymbolIndex).hidden=x.icon.isHidden()}}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var B=n.collisionArrays[a];if(B){var R=new r.Point(0,0);if(B.textBox||B.verticalTextBox){var z=!0;if(f){var F=o.variableOffsets[v];F?(R=et(F.anchor,F.width,F.height,F.textOffset,F.textBoxScale),h&&R._rotate(p?o.transform.angle:-o.transform.angle)):z=!1}B.textBox&&en(n.textCollisionBox.collisionVertexArray,x.text.placed,!z||T,R.x,R.y),B.verticalTextBox&&en(n.textCollisionBox.collisionVertexArray,x.text.placed,!z||A,R.x,R.y)}var N=!!(!A&&B.verticalIconBox);B.iconBox&&en(n.iconCollisionBox.collisionVertexArray,x.icon.placed,N,d?R.x:0,d?R.y:0),B.verticalIconBox&&en(n.iconCollisionBox.collisionVertexArray,x.icon.placed,!N,d?R.x:0,d?R.y:0)}}})(v);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=m.invProjMatrix,n.placementViewportMatrix=m.viewportMatrix,n.collisionCircleArray=m.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},er.prototype.symbolFadeChange=function(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},er.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},er.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},er.prototype.stillRecent=function(r,n){var i=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*i>r},er.prototype.setStale=function(){this.stale=!0};var ea=0,eo=function(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};eo.prototype.continuePlacement=function(r,n,i,a,o){for(var s=this._bucketParts;this._currentTileIndex<r.length;){var l=r[this._currentTileIndex];if(n.getBucketParts(s,a,l,this._sortAcrossTiles),this._currentTileIndex++,o())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(function(r,n){return r.sortKey-n.sortKey}));this._currentPartIndex<s.length;){var c=s[this._currentPartIndex];if(n.placeLayerBucketPart(c,this._seenCrossTileIDs,i),this._currentPartIndex++,o())return!0}return!1};var es=function(r,n,i,a,o,s,l){this.placement=new er(r,o,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=a,this._done=!1};es.prototype.isDone=function(){return this._done},es.prototype.continuePlacement=function(n,i,a){for(var o=this,s=r.browser.now(),l=function(){var n=r.browser.now()-s;return!o._forceFullPlacement&&n>2};this._currentPlacementIndex>=0;){var c=i[n[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===c.type&&(!c.minzoom||c.minzoom<=u)&&(!c.maxzoom||c.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new eo(c)),this._inProgressLayer.continuePlacement(a[c.source],this.placement,this._showCollisionBoxes,c,l))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},es.prototype.commit=function(r){return this.placement.commit(r),this.placement};var el=512/r.EXTENT/2,ec=function(r,n,i){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var a=0;a<n.length;a++){var o=n.get(a),s=o.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,r)})}};ec.prototype.getScaledCoordinates=function(n,i){var a=el/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*r.EXTENT+n.anchorX)*a),y:Math.floor((i.canonical.y*r.EXTENT+n.anchorY)*a)}},ec.prototype.findMatches=function(r,n,i){for(var a=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=0;o<r.length;o++){var s=r.get(o);if(!s.crossTileID){var l=this.indexedSymbolInstances[s.key];if(l)for(var c=this.getScaledCoordinates(s,n),u=0;u<l.length;u+=1){var f=l[u];if(Math.abs(f.coord.x-c.x)<=a&&Math.abs(f.coord.y-c.y)<=a&&!i[f.crossTileID]){i[f.crossTileID]=!0,s.crossTileID=f.crossTileID;break}}}}};var eu=function(){this.maxCrossTileID=0};eu.prototype.generate=function(){return++this.maxCrossTileID};var ef=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ef.prototype.handleWrapJump=function(r){var n=Math.round((r-this.lng)/360);if(0!==n)for(var i in this.indexes){var a=this.indexes[i],o={};for(var s in a){var l=a[s];l.tileID=l.tileID.unwrapTo(l.tileID.wrap+n),o[l.tileID.key]=l}this.indexes[i]=o}this.lng=r},ef.prototype.addBucket=function(r,n,i){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var a=0;a<n.symbolInstances.length;a++)n.symbolInstances.get(a).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var o=this.usedCrossTileIDs[r.overscaledZ];for(var s in this.indexes){var l=this.indexes[s];if(Number(s)>r.overscaledZ)for(var c in l){var u=l[c];u.tileID.isChildOf(r)&&u.findMatches(n.symbolInstances,r,o)}else{var f=l[r.scaledTo(Number(s)).key];f&&f.findMatches(n.symbolInstances,r,o)}}for(var h=0;h<n.symbolInstances.length;h++){var p=n.symbolInstances.get(h);p.crossTileID||(p.crossTileID=i.generate(),o[p.crossTileID]=!0)}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ec(r,n.symbolInstances,n.bucketInstanceId),!0},ef.prototype.removeBucketCrossTileIDs=function(r,n){for(var i in n.indexedSymbolInstances)for(var a=0,o=n.indexedSymbolInstances[i];a<o.length;a+=1){var s=o[a];delete this.usedCrossTileIDs[r][s.crossTileID]}},ef.prototype.removeStaleBuckets=function(r){var n=!1;for(var i in this.indexes){var a=this.indexes[i];for(var o in a)r[a[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[o]),delete a[o],n=!0)}return n};var eh=function(){this.layerIndexes={},this.crossTileIDs=new eu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};eh.prototype.addLayer=function(r,n,i){var a=this.layerIndexes[r.id];void 0===a&&(a=this.layerIndexes[r.id]=new ef);var o=!1,s={};a.handleWrapJump(i);for(var l=0;l<n.length;l+=1){var c=n[l],u=c.getBucket(r);u&&r.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(c.tileID,u,this.crossTileIDs)&&(o=!0),s[u.bucketInstanceId]=!0)}return a.removeStaleBuckets(s)&&(o=!0),o},eh.prototype.pruneUnusedLayers=function(r){var n={};for(var i in r.forEach(function(r){n[r]=!0}),this.layerIndexes)n[i]||delete this.layerIndexes[i]};var ep=function(n,i){return r.emitValidationErrors(n,i&&i.filter(function(r){return"source.canvas"!==r.identifier}))},ed=r.pick(tR,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ey=r.pick(tR,["setCenter","setZoom","setBearing","setPitch"]),eg=function(){var n={},i=r.styleSpec.$version;for(var a in r.styleSpec.$root){var o,s=r.styleSpec.$root[a];s.required&&null!=(o="version"===a?i:"array"===s.type?[]:{})&&(n[a]=o)}return n}(),ev=function(n){function i(a,o){var s=this;void 0===o&&(o={}),n.call(this),this.map=a,this.dispatcher=new w(tP(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new v(a._requestManager,o.localIdeographFontFamily),this.lineAtlas=new _(256,512),this.crossTileSymbolIndex=new eh,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var l=this;this._rtlTextPluginCallback=i.registerForPluginStateChange(function(n){var i={pluginStatus:n.pluginStatus,pluginURL:n.pluginURL};l.dispatcher.broadcast("syncRTLPluginState",i,function(n,i){if(r.triggerPluginCompletionEvent(n),i&&i.every(function(r){return r}))for(var a in l.sourceCaches)l.sourceCaches[a].reload()})}),this.on("data",function(r){if("source"===r.dataType&&"metadata"===r.sourceDataType){var n=s.sourceCaches[r.sourceId];if(n){var i=n.getSource();if(i&&i.vectorLayerIds)for(var a in s._layers){var o=s._layers[a];o.source===i.id&&s._validateLayer(o)}}}})}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(n,i){var a=this;void 0===i&&(i={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var o="boolean"==typeof i.validate?i.validate:!r.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,i.accessToken);var s=this.map._requestManager.transformRequest(n,r.ResourceType.Style);this._request=r.getJSON(s,function(n,i){a._request=null,n?a.fire(new r.ErrorEvent(n)):i&&a._load(i,o)})},i.prototype.loadJSON=function(n,i){var a=this;void 0===i&&(i={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){a._request=null,a._load(n,!1!==i.validate)})},i.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(eg,!1)},i.prototype._load=function(n,i){if(!i||!ep(this,r.validateStyle(n))){for(var a in this._loaded=!0,this.stylesheet=n,n.sources)this.addSource(a,n.sources[a],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);var o=tB(this.stylesheet.layers);this._order=o.map(function(r){return r.id}),this._layers={},this._serializedLayers={};for(var s=0;s<o.length;s+=1){var l=o[s];(l=r.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},i.prototype._loadSprite=function(n){var i=this;this._spriteRequest=function(n,i,a){var o,s,l,c=r.browser.devicePixelRatio>1?"@2x":"",u=r.getJSON(i.transformRequest(i.normalizeSpriteURL(n,c,".json"),r.ResourceType.SpriteJSON),function(r,n){u=null,l||(l=r,o=n,h())}),f=r.getImage(i.transformRequest(i.normalizeSpriteURL(n,c,".png"),r.ResourceType.SpriteImage),function(r,n){f=null,l||(l=r,s=n,h())});function h(){if(l)a(l);else if(o&&s){var n=r.browser.getImageData(s),i={};for(var c in o){var u=o[c],f=u.width,h=u.height,p=u.x,d=u.y,y=u.sdf,g=u.pixelRatio,v=u.stretchX,m=u.stretchY,x=u.content,b=new r.RGBAImage({width:f,height:h});r.RGBAImage.copy(n,b,{x:p,y:d},{x:0,y:0},{width:f,height:h}),i[c]={data:b,pixelRatio:g,sdf:y,stretchX:v,stretchY:m,content:x}}a(null,i)}}return{cancel:function(){u&&(u.cancel(),u=null),f&&(f.cancel(),f=null)}}}(n,this.map._requestManager,function(n,a){if(i._spriteRequest=null,n)i.fire(new r.ErrorEvent(n));else if(a)for(var o in a)i.imageManager.addImage(o,a[o]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new r.Event("data",{dataType:"style"}))})},i.prototype._validateLayer=function(n){var i=this.sourceCaches[n.source];if(i){var a=n.sourceLayer;if(a){var o=i.getSource();("geojson"===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(a))&&this.fire(new r.ErrorEvent(Error('Source layer "'+a+'" does not exist on source "'+o.id+'" as specified by style layer "'+n.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(r){for(var n=[],i=0;i<r.length;i+=1){var a=r[i],o=this._layers[a];"custom"!==o.type&&n.push(o.serialize())}return n},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(var n in this._layers)if(this._layers[n].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading")},i.prototype.update=function(n){if(this._loaded){var i=this._changed;if(this._changed){var a=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);for(var s in(a.length||o.length)&&this._updateWorkerLayers(a,o),this._updatedSources){var l=this._updatedSources[s];"reload"===l?this._reloadSource(s):"clear"===l&&this._clearSource(s)}for(var c in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[c].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}var u={};for(var f in this.sourceCaches){var h=this.sourceCaches[f];u[f]=h.used,h.used=!1}for(var p=0,d=this._order;p<d.length;p+=1){var y=d[p],g=this._layers[y];g.recalculate(n,this._availableImages),!g.isHidden(n.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(var v in u){var m=this.sourceCaches[v];u[v]!==m.used&&m.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(n),this.z=n.zoom,i&&this.fire(new r.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var r=Object.keys(this._changedImages);if(r.length){for(var n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}},i.prototype._updateWorkerLayers=function(r,n){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:n})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(n){var i=this;if(this._checkLoaded(),ep(this,r.validateStyle(n)))return!1;(n=r.clone$1(n)).layers=tB(n.layers);var a=(function(n,i){if(!n)return[{command:tR.setStyle,args:[i]}];var a=[];try{if(!r.deepEqual(n.version,i.version))return[{command:tR.setStyle,args:[i]}];r.deepEqual(n.center,i.center)||a.push({command:tR.setCenter,args:[i.center]}),r.deepEqual(n.zoom,i.zoom)||a.push({command:tR.setZoom,args:[i.zoom]}),r.deepEqual(n.bearing,i.bearing)||a.push({command:tR.setBearing,args:[i.bearing]}),r.deepEqual(n.pitch,i.pitch)||a.push({command:tR.setPitch,args:[i.pitch]}),r.deepEqual(n.sprite,i.sprite)||a.push({command:tR.setSprite,args:[i.sprite]}),r.deepEqual(n.glyphs,i.glyphs)||a.push({command:tR.setGlyphs,args:[i.glyphs]}),r.deepEqual(n.transition,i.transition)||a.push({command:tR.setTransition,args:[i.transition]}),r.deepEqual(n.light,i.light)||a.push({command:tR.setLight,args:[i.light]});var o={},s=[];!function(n,i,a,o){var s,l,c;for(s in i=i||{},n=n||{})n.hasOwnProperty(s)&&(i.hasOwnProperty(s)||tF(s,a,o));for(s in i)i.hasOwnProperty(s)&&(n.hasOwnProperty(s)?r.deepEqual(n[s],i[s])||("geojson"===n[s].type&&"geojson"===i[s].type&&function(n,i,a){var o;for(o in n[a])if(n[a].hasOwnProperty(o)&&"data"!==o&&!r.deepEqual(n[a][o],i[a][o]))return!1;for(o in i[a])if(i[a].hasOwnProperty(o)&&"data"!==o&&!r.deepEqual(n[a][o],i[a][o]))return!1;return!0}(n,i,s)?a.push({command:tR.setGeoJSONSourceData,args:[s,i[s].data]}):(l=s,c=i,tF(l,a,o),tz(l,c,a))):tz(s,i,a))}(n.sources,i.sources,s,o);var l=[];n.layers&&n.layers.forEach(function(r){o[r.source]?a.push({command:tR.removeLayer,args:[r.id]}):l.push(r)}),a=a.concat(s),function(n,i,a){i=i||[];var o,s,l,c,u,f,h,p=(n=n||[]).map(tU),d=i.map(tU),y=n.reduce(tj,{}),g=i.reduce(tj,{}),v=p.slice(),m=Object.create(null);for(o=0,s=0;o<p.length;o++)l=p[o],g.hasOwnProperty(l)?s++:(a.push({command:tR.removeLayer,args:[l]}),v.splice(v.indexOf(l,s),1));for(o=0,s=0;o<d.length;o++)l=d[d.length-1-o],v[v.length-1-o]!==l&&(y.hasOwnProperty(l)?(a.push({command:tR.removeLayer,args:[l]}),v.splice(v.lastIndexOf(l,v.length-s),1)):s++,f=v[v.length-o],a.push({command:tR.addLayer,args:[g[l],f]}),v.splice(v.length-o,0,l),m[l]=!0);for(o=0;o<d.length;o++)if(c=y[l=d[o]],u=g[l],!m[l]&&!r.deepEqual(c,u)){if(r.deepEqual(c.source,u.source)&&r.deepEqual(c["source-layer"],u["source-layer"])&&r.deepEqual(c.type,u.type)){for(h in tN(c.layout,u.layout,a,l,null,tR.setLayoutProperty),tN(c.paint,u.paint,a,l,null,tR.setPaintProperty),r.deepEqual(c.filter,u.filter)||a.push({command:tR.setFilter,args:[l,u.filter]}),r.deepEqual(c.minzoom,u.minzoom)&&r.deepEqual(c.maxzoom,u.maxzoom)||a.push({command:tR.setLayerZoomRange,args:[l,u.minzoom,u.maxzoom]}),c)c.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?tN(c[h],u[h],a,l,h.slice(6),tR.setPaintProperty):r.deepEqual(c[h],u[h])||a.push({command:tR.setLayerProperty,args:[l,h,u[h]]}));for(h in u)u.hasOwnProperty(h)&&!c.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?tN(c[h],u[h],a,l,h.slice(6),tR.setPaintProperty):r.deepEqual(c[h],u[h])||a.push({command:tR.setLayerProperty,args:[l,h,u[h]]}))}else a.push({command:tR.removeLayer,args:[l]}),f=v[v.lastIndexOf(l)+1],a.push({command:tR.addLayer,args:[u,f]})}}(l,i.layers,a)}catch(r){console.warn("Unable to compute style diff:",r),a=[{command:tR.setStyle,args:[i]}]}return a})(this.serialize(),n).filter(function(r){return!(r.command in ey)});if(0===a.length)return!1;var o=a.filter(function(r){return!(r.command in ed)});if(o.length>0)throw Error("Unimplemented: "+o.map(function(r){return r.command}).join(", ")+".");return a.forEach(function(r){"setTransition"!==r.command&&i[r.command].apply(i,r.args)}),this.stylesheet=n,!0},i.prototype.addImage=function(n,i){if(this.getImage(n))return this.fire(new r.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(n,i),this._afterImageUpdated(n)},i.prototype.updateImage=function(r,n){this.imageManager.updateImage(r,n)},i.prototype.getImage=function(r){return this.imageManager.getImage(r)},i.prototype.removeImage=function(n){if(!this.getImage(n))return this.fire(new r.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(n),this._afterImageUpdated(n)},i.prototype._afterImageUpdated=function(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(n,i,a){var o=this;if(void 0===a&&(a={}),this._checkLoaded(),void 0!==this.sourceCaches[n])throw Error("There is already a source with this ID");if(!i.type)throw Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(r.validateStyle.source,"sources."+n,i,null,a))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var s=this.sourceCaches[n]=new tM(n,i,this.dispatcher);s.style=this,s.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:s.serialize(),sourceId:n}}),s.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===n)return this.fire(new r.ErrorEvent(Error('Source "'+n+'" cannot be removed while layer "'+i+'" is using it.')));var a=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],a.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),a.setEventedParent(null),a.clearTiles(),a.onRemove&&a.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(r,n){this._checkLoaded(),this.sourceCaches[r].getSource().setData(n),this._changed=!0},i.prototype.getSource=function(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()},i.prototype.addLayer=function(n,i,a){void 0===a&&(a={}),this._checkLoaded();var o=n.id;if(this.getLayer(o))this.fire(new r.ErrorEvent(Error('Layer with id "'+o+'" already exists on this map')));else{if("custom"===n.type){if(ep(this,r.validateCustomStyleLayer(n)))return;s=r.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(o,n.source),n=r.clone$1(n),n=r.extend(n,{source:o})),this._validate(r.validateStyle.layer,"layers."+o,n,{arrayIndex:-1},a))return;s=r.createStyleLayer(n),this._validateLayer(s),s.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[s.id]=s.serialize()}var s,l=i?this._order.indexOf(i):this._order.length;if(i&&-1===l)this.fire(new r.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(l,0,o),this._layerOrderChanged=!0,this._layers[o]=s,this._removedLayers[o]&&s.source&&"custom"!==s.type){var c=this._removedLayers[o];delete this._removedLayers[o],c.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map)}}},i.prototype.moveLayer=function(n,i){if(this._checkLoaded(),this._changed=!0,this._layers[n]){if(n!==i){var a=this._order.indexOf(n);this._order.splice(a,1);var o=i?this._order.indexOf(i):this._order.length;i&&-1===o?this.fire(new r.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(o,0,n),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(n){this._checkLoaded();var i=this._layers[n];if(i){i.setEventedParent(null);var a=this._order.indexOf(n);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=i,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],i.onRemove&&i.onRemove(this.map)}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(r){return this._layers[r]},i.prototype.hasLayer=function(r){return r in this._layers},i.prototype.setLayerZoomRange=function(n,i,a){this._checkLoaded();var o=this.getLayer(n);o?o.minzoom===i&&o.maxzoom===a||(null!=i&&(o.minzoom=i),null!=a&&(o.maxzoom=a),this._updateLayer(o)):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(n,i,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(n);if(o){if(!r.deepEqual(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(r.validateStyle.filter,"layers."+o.id+".filter",i,null,a)||(o.filter=r.clone$1(i),this._updateLayer(o)))}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(n){return r.clone$1(this.getLayer(n).filter)},i.prototype.setLayoutProperty=function(n,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(n);s?r.deepEqual(s.getLayoutProperty(i),a)||(s.setLayoutProperty(i,a,o),this._updateLayer(s)):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(n,i){var a=this.getLayer(n);if(a)return a.getLayoutProperty(i);this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(n,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(n);s?r.deepEqual(s.getPaintProperty(i),a)||(s.setPaintProperty(i,a,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(r,n){return this.getLayer(r).getPaintProperty(n)},i.prototype.setFeatureState=function(n,i){this._checkLoaded();var a=n.source,o=n.sourceLayer,s=this.sourceCaches[a];if(void 0!==s){var l=s.getSource().type;"geojson"===l&&o?this.fire(new r.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==l||o?(void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided."))),s.setFeatureState(o,n.id,i)):this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(n,i){this._checkLoaded();var a=n.source,o=this.sourceCaches[a];if(void 0!==o){var s=o.getSource().type,l="vector"===s?n.sourceLayer:void 0;"vector"!==s||l?i&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new r.ErrorEvent(Error("A feature id is required to remove its specific state property."))):o.removeFeatureState(l,n.id,i):this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(n){this._checkLoaded();var i=n.source,a=n.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){if("vector"!==o.getSource().type||a)return void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided."))),o.getFeatureState(a,n.id);this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(r){return r.serialize()}),layers:this._serializeLayers(this._order)},function(r){return void 0!==r})},i.prototype._updateLayer=function(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&"raster"!==this.sourceCaches[r.source].getSource().type&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(r){for(var n=this,i=function(r){return"fill-extrusion"===n._layers[r].type},a={},o=[],s=this._order.length-1;s>=0;s--){var l=this._order[s];if(i(l)){a[l]=s;for(var c=0;c<r.length;c+=1){var u=r[c][l];if(u)for(var f=0;f<u.length;f+=1){var h=u[f];o.push(h)}}}}o.sort(function(r,n){return n.intersectionZ-r.intersectionZ});for(var p=[],d=this._order.length-1;d>=0;d--){var y=this._order[d];if(i(y))for(var g=o.length-1;g>=0;g--){var v=o[g].feature;if(a[v.layer.id]<d)break;p.push(v),o.pop()}else for(var m=0;m<r.length;m+=1){var x=r[m][y];if(x)for(var b=0;b<x.length;b+=1){var _=x[b];p.push(_.feature)}}}return p},i.prototype.queryRenderedFeatures=function(n,i,a){i&&i.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var o={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new r.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var s=0,l=i.layers;s<l.length;s+=1){var c=l[s],u=this._layers[c];if(!u)return this.fire(new r.ErrorEvent(Error("The layer '"+c+"' does not exist in the map's style and cannot be queried for features."))),[];o[u.source]=!0}}var f=[];for(var h in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!o[h]||f.push(function(n,i,a,o,s,l){var c=function(r,n,i){if(r)for(var a=0;a<r.length;a+=1){var o=n[r[a]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var s in n){var l=n[s];if(l.source===i&&"fill-extrusion"===l.type)return!0}return!1}(s&&s.layers,i,n.id),u=l.maxPitchScaleFactor(),f=n.tilesIn(o,u,c);f.sort(P);for(var h=[],p=0;p<f.length;p+=1){var d=f[p];h.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(i,a,n._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,s,l,u,function(n,i){var a=r.identity([]);return r.translate(a,a,[1,1,0]),r.scale(a,a,[.5*n.width,.5*n.height,1]),r.multiply(a,a,n.calculatePosMatrix(i.toUnwrapped()))}(n.transform,d.tileID))})}var y=function(r){for(var n={},i={},a=0;a<r.length;a+=1){var o=r[a],s=o.queryResults,l=o.wrappedTileID,c=i[l]=i[l]||{};for(var u in s)for(var f=s[u],h=c[u]=c[u]||{},p=n[u]=n[u]||[],d=0;d<f.length;d+=1){var y=f[d];h[y.featureIndex]||(h[y.featureIndex]=!0,p.push(y))}}return n}(h);for(var g in y)y[g].forEach(function(r){var i=r.feature,a=n.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a});return y}(this.sourceCaches[h],this._layers,this._serializedLayers,n,i,a));return this.placement&&f.push(function(r,n,i,a,o,s,l){for(var c={},u=s.queryRenderedSymbols(a),f=[],h=0,p=Object.keys(u).map(Number);h<p.length;h+=1){var d=p[h];f.push(l[d])}f.sort(P);for(var y=0;y<f.length;y+=1)(function(){var i=f[y],a=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],n,i.bucketIndex,i.sourceLayerIndex,o.filter,o.layers,o.availableImages,r);for(var s in a){var l=c[s]=c[s]||[],h=a[s];h.sort(function(r,n){var a=i.featureSortOrder;if(a){var o=a.indexOf(r.featureIndex);return a.indexOf(n.featureIndex)-o}return n.featureIndex-r.featureIndex});for(var p=0;p<h.length;p+=1){var d=h[p];l.push(d)}}})();var g=function(n){c[n].forEach(function(a){var o=a.feature,s=i[r[n].source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=s})};for(var v in c)g(v);return c}(this._layers,this._serializedLayers,this.sourceCaches,n,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)},i.prototype.querySourceFeatures=function(n,i){i&&i.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var a=this.sourceCaches[n];return a?function(r,n){for(var i=r.getRenderableIds().map(function(n){return r.getTileByID(n)}),a=[],o={},s=0;s<i.length;s++){var l=i[s],c=l.tileID.canonical.key;o[c]||(o[c]=!0,l.querySourceFeatures(a,n))}return a}(a,i):[]},i.prototype.addSourceType=function(r,n,a){return i.getSourceType(r)?a(Error('A source type called "'+r+'" already exists.')):(i.setSourceType(r,n),n.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:n.workerSourceURL},a):a(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(n,i){void 0===i&&(i={}),this._checkLoaded();var a=this.light.getLight(),o=!1;for(var s in n)if(!r.deepEqual(n[s],a[s])){o=!0;break}if(o){var l={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,i),this.light.updateTransitions(l)}},i.prototype._validate=function(n,i,a,o,s){return void 0===s&&(s={}),(!s||!1!==s.validate)&&ep(this,n.call(r.validateStyle,r.extend({key:i,style:this.serialize(),value:a,styleSpec:r.styleSpec},o)))},i.prototype._remove=function(){for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(r){this.sourceCaches[r].clearTiles()},i.prototype._reloadSource=function(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()},i.prototype._updateSources=function(r){for(var n in this.sourceCaches)this.sourceCaches[n].update(r)},i.prototype._generateCollisionBoxes=function(){for(var r in this.sourceCaches)this._reloadSource(r)},i.prototype._updatePlacement=function(n,i,a,o,s){void 0===s&&(s=!1);for(var l=!1,c=!1,u={},f=0,h=this._order;f<h.length;f+=1){var p=h[f],d=this._layers[p];if("symbol"===d.type){if(!u[d.source]){var y=this.sourceCaches[d.source];u[d.source]=y.getRenderableIds(!0).map(function(r){return y.getTileByID(r)}).sort(function(r,n){return n.tileID.overscaledZ-r.tileID.overscaledZ||(r.tileID.isLessThan(n.tileID)?-1:1)})}var g=this.crossTileSymbolIndex.addLayer(d,u[d.source],n.center.lng);l=l||g}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===a)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),n.zoom))&&(this.pauseablePlacement=new es(n,this._order,s,i,a,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),c=!0),l&&this.pauseablePlacement.placement.setStale()),c||l)for(var v=0,m=this._order;v<m.length;v+=1){var x=m[v],b=this._layers[x];"symbol"===b.type&&this.placement.updateLayerOpacities(b,u[b.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()},i.prototype.getImages=function(r,n,i){this.imageManager.getImages(n.icons,i),this._updateTilesForChangedImages();var a=this.sourceCaches[n.source];a&&a.setDependencies(n.tileID.key,n.type,n.icons)},i.prototype.getGlyphs=function(r,n,i){this.glyphManager.getGlyphs(n.stacks,i)},i.prototype.getResource=function(n,i,a){return r.makeRequest(i,a)},i}(r.Evented);ev.getSourceType=function(r){return D[r]},ev.setSourceType=function(r,n){D[r]=n},ev.registerForPluginStateChange=r.registerForPluginStateChange;var em=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),ex=eb("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}");function eb(r,n){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=n.match(/attribute ([\w]+) ([\w]+)/g),o=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),l=s?s.concat(o):o,c={};return{fragmentSource:r=r.replace(i,function(r,n,i,a,o){return c[o]=!0,"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:n=n.replace(i,function(r,n,i,a,o){var s="float"===a?"vec2":"vec4",l=o.match(/color/)?"color":s;return c[o]?"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n"}),staticAttributes:a,staticUniforms:l}}var e_=Object.freeze({__proto__:null,prelude:ex,background:eb("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:eb("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:eb("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:eb("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:eb("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:eb("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:eb("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:eb("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:eb("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:eb("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:eb("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:eb("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:eb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:eb("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:eb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:eb("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:eb("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:eb("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:eb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:eb("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:eb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:eb("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:eb("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:eb("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:eb("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")}),ew=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function eT(r){for(var n=[],i=0;i<r.length;i++)if(null!==r[i]){var a=r[i].split(" ");n.push(a.pop())}return n}ew.prototype.bind=function(r,n,i,a,o,s,l,c){this.context=r;for(var u=this.boundPaintVertexBuffers.length!==a.length,f=0;!u&&f<a.length;f++)this.boundPaintVertexBuffers[f]!==a[f]&&(u=!0);var h=!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==i||u||this.boundIndexBuffer!==o||this.boundVertexOffset!==s||this.boundDynamicVertexBuffer!==l||this.boundDynamicVertexBuffer2!==c;!r.extVertexArrayObject||h?this.freshBind(n,i,a,o,s,l,c):(r.bindVertexArrayOES.set(this.vao),l&&l.bind(),o&&o.dynamicDraw&&o.bind(),c&&c.bind())},ew.prototype.freshBind=function(r,n,i,a,o,s,l){var c,u=r.numAttributes,f=this.context,h=f.gl;if(f.extVertexArrayObject)this.vao&&this.destroy(),this.vao=f.extVertexArrayObject.createVertexArrayOES(),f.bindVertexArrayOES.set(this.vao),c=0,this.boundProgram=r,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=s,this.boundDynamicVertexBuffer2=l;else{c=f.currentNumAttributes||0;for(var p=u;p<c;p++)h.disableVertexAttribArray(p)}n.enableAttributes(h,r);for(var d=0;d<i.length;d+=1)i[d].enableAttributes(h,r);s&&s.enableAttributes(h,r),l&&l.enableAttributes(h,r),n.bind(),n.setVertexAttribPointers(h,r,o);for(var y=0;y<i.length;y+=1){var g=i[y];g.bind(),g.setVertexAttribPointers(h,r,o)}s&&(s.bind(),s.setVertexAttribPointers(h,r,o)),a&&a.bind(),l&&(l.bind(),l.setVertexAttribPointers(h,r,o)),f.currentNumAttributes=u},ew.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var eA=function(r,n,i,a,o,s){var l=r.gl;this.program=l.createProgram();for(var c=eT(i.staticAttributes),u=a?a.getBinderAttributes():[],f=c.concat(u),h=i.staticUniforms?eT(i.staticUniforms):[],p=a?a.getBinderUniforms():[],d=[],y=0,g=h.concat(p);y<g.length;y+=1){var v=g[y];0>d.indexOf(v)&&d.push(v)}var m=a?a.defines():[];s&&m.push("#define OVERDRAW_INSPECTOR;");var x=m.concat(ex.fragmentSource,i.fragmentSource).join("\n"),b=m.concat(ex.vertexSource,i.vertexSource).join("\n"),_=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(_,x),l.compileShader(_),l.attachShader(this.program,_);var w=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(w,b),l.compileShader(w),l.attachShader(this.program,w),this.attributes={};var T={};this.numAttributes=f.length;for(var A=0;A<this.numAttributes;A++)f[A]&&(l.bindAttribLocation(this.program,A,f[A]),this.attributes[f[A]]=A);l.linkProgram(this.program),l.deleteShader(w),l.deleteShader(_);for(var k=0;k<d.length;k++){var M=d[k];if(M&&!T[M]){var S=l.getUniformLocation(this.program,M);S&&(T[M]=S)}}this.fixedUniforms=o(r,T),this.binderUniforms=a?a.getUniforms(r,T):[]}}};function ek(r,n,i){var a=1/t3(i,1,n.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),s=i.tileSize*Math.pow(2,n.transform.tileZoom)/o,l=s*(i.tileID.canonical.x+i.tileID.wrap*o),c=s*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}eA.prototype.draw=function(r,n,i,a,o,s,l,c,u,f,h,p,d,y,g,v){var m,x=r.gl;if(!this.failedToCreate){for(var b in r.program.set(this.program),r.setDepthMode(i),r.setStencilMode(a),r.setColorMode(o),r.setCullFace(s),this.fixedUniforms)this.fixedUniforms[b].set(l[b]);y&&y.setUniforms(r,this.binderUniforms,p,{zoom:d});for(var _=((m={})[x.LINES]=2,m[x.TRIANGLES]=3,m[x.LINE_STRIP]=1,m)[n],w=0,T=h.get();w<T.length;w+=1){var A=T[w],k=A.vaos||(A.vaos={});(k[c]||(k[c]=new ew)).bind(r,this,u,y?y.getPaintVertexBuffers():[],f,A.vertexOffset,g,v),x.drawElements(n,A.primitiveLength*_,x.UNSIGNED_SHORT,A.primitiveOffset*_*2)}}};var eM=function(n,i,a,o){var s=i.style.light,l=s.properties.get("position"),c=[l.x,l.y,l.z],u=r.create$1();"viewport"===s.properties.get("anchor")&&r.fromRotation(u,-i.transform.angle),r.transformMat3(c,c,u);var f=s.properties.get("color");return{u_matrix:n,u_lightpos:c,u_lightintensity:s.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+a,u_opacity:o}},eS=function(r){return{u_matrix:r}},eE=function(n,i,a,o){return r.extend(eS(n),ek(a,i,o))},eI=function(n,i,a,o){var s,l,c=n.transform;if("map"===o.paint.get("circle-pitch-alignment")){var u=t3(a,1,c.zoom);s=!0,l=[u,u]}else s=!1,l=c.pixelsToGLUnits;return{u_camera_to_center_distance:c.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:n.translatePosMatrix(i.posMatrix,a,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+s,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:l}},eL=function(r,n,i){var a=t3(i,1,n.zoom),o=Math.pow(2,n.zoom-i.tileID.overscaledZ),s=i.tileID.overscaleFactor();return{u_matrix:r,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:a,u_extrude_scale:[n.pixelsToGLUnits[0]/(a*o),n.pixelsToGLUnits[1]/(a*o)],u_overscale_factor:s}},eC=function(r,n,i){return void 0===i&&(i=1),{u_matrix:r,u_color:n,u_overlay:0,u_overlay_scale:i}},eO=function(r){return{u_matrix:r}},eD=function(n,i,a,o){var s=r.create();r.ortho(s,0,n.width,n.height,0,0,1);var l=n.context.gl;return{u_matrix:s,u_world:[l.drawingBufferWidth,l.drawingBufferHeight],u_image:a,u_color_ramp:o,u_opacity:i.paint.get("heatmap-opacity")}},eP=function(n,i,a){var o=a.paint.get("hillshade-shadow-color"),s=a.paint.get("hillshade-highlight-color"),l=a.paint.get("hillshade-accent-color"),c=a.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===a.paint.get("hillshade-illumination-anchor")&&(c-=n.transform.angle);var u,f,h,p=!n.options.moving;return{u_matrix:n.transform.calculatePosMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:(f=Math.pow(2,(u=i.tileID).canonical.z),h=u.canonical.y,[new r.MercatorCoordinate(0,h/f).toLngLat().lat,new r.MercatorCoordinate(0,(h+1)/f).toLngLat().lat]),u_light:[a.paint.get("hillshade-exaggeration"),c],u_shadow:o,u_highlight:s,u_accent:l}},eB=function(n,i){var a=i.stride,o=r.create();return r.ortho(o,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(o,o,[0,-r.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[a,a],u_zoom:n.overscaledZ,u_unpack:i.getUnpackVector()}},eR=function(n,i,a){var o=n.transform;return{u_matrix:eU(n,i,a),u_ratio:1/t3(i,1,o.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},ez=function(n,i,a,o){var s=n.transform,l=eN(i,s);return{u_matrix:eU(n,i,a),u_texsize:i.imageAtlasTexture.size,u_ratio:1/t3(i,1,s.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[l,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},eF=function(n,i,a,o,s){var l=n.transform,c=n.lineAtlas,u=eN(i,l),f="round"===a.layout.get("line-cap"),h=c.getDash(o.from,f),p=c.getDash(o.to,f),d=h.width*s.fromScale,y=p.width*s.toScale;return r.extend(eR(n,i,a),{u_patternscale_a:[u/d,-h.height/2],u_patternscale_b:[u/y,-p.height/2],u_sdfgamma:c.width/(256*Math.min(d,y)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:p.y,u_mix:s.t})};function eN(r,n){return 1/t3(r,1,n.tileZoom)}function eU(r,n,i){return r.translatePosMatrix(n.tileID.posMatrix,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var ej,eV=function(r,n,i,a,o){var s,l,c,u,f;return{u_matrix:r,u_tl_parent:n,u_scale_parent:i,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(l=o.paint.get("raster-saturation"))>0?1-1/(1.001-l):-l,u_contrast_factor:(s=o.paint.get("raster-contrast"))>0?1/(1-s):1+s,u_spin_weights:(u=Math.sin(c=o.paint.get("raster-hue-rotate")*(Math.PI/180)),[(2*(f=Math.cos(c))+1)/3,(-Math.sqrt(3)*u-f+1)/3,(Math.sqrt(3)*u-f+1)/3])}},eH=function(r,n,i,a,o,s,l,c,u,f){var h=o.transform;return{u_is_size_zoom_constant:+("constant"===r||"source"===r),u_is_size_feature_constant:+("constant"===r||"camera"===r),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:h.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:h.width/h.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:c,u_is_text:+u,u_pitch_with_map:+a,u_texsize:f,u_texture:0}},eq=function(n,i,a,o,s,l,c,u,f,h,p){var d=s.transform;return r.extend(eH(n,i,a,o,s,l,c,u,f,h),{u_gamma_scale:o?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+p})},eG=function(n,i,a,o,s,l){var c,u,f,h,p,d,y,g,v;return r.extend((c=a.imageManager.getPattern(o.from.toString()),u=a.imageManager.getPattern(o.to.toString()),h=(f=a.imageManager.getPixelSize()).width,p=f.height,d=Math.pow(2,s.tileID.overscaledZ),g=(y=s.tileSize*Math.pow(2,a.transform.tileZoom)/d)*(s.tileID.canonical.x+s.tileID.wrap*d),v=y*s.tileID.canonical.y,{u_image:0,u_pattern_tl_a:c.tl,u_pattern_br_a:c.br,u_pattern_tl_b:u.tl,u_pattern_br_b:u.br,u_texsize:[h,p],u_mix:l.t,u_pattern_size_a:c.displaySize,u_pattern_size_b:u.displaySize,u_scale_a:l.fromScale,u_scale_b:l.toScale,u_tile_units_to_pixels:1/t3(s,1,a.transform.tileZoom),u_pixel_coord_upper:[g>>16,v>>16],u_pixel_coord_lower:[65535&g,65535&v]}),{u_matrix:n,u_opacity:i})},eW={fillExtrusion:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_lightpos:new r.Uniform3f(n,i.u_lightpos),u_lightintensity:new r.Uniform1f(n,i.u_lightintensity),u_lightcolor:new r.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new r.Uniform1f(n,i.u_vertical_gradient),u_opacity:new r.Uniform1f(n,i.u_opacity)}},fillExtrusionPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_lightpos:new r.Uniform3f(n,i.u_lightpos),u_lightintensity:new r.Uniform1f(n,i.u_lightintensity),u_lightcolor:new r.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new r.Uniform1f(n,i.u_vertical_gradient),u_height_factor:new r.Uniform1f(n,i.u_height_factor),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade),u_opacity:new r.Uniform1f(n,i.u_opacity)}},fill:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},fillPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},fillOutline:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world)}},fillOutlinePattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},circle:function(n,i){return{u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(n,i.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(n,i.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},collisionBox:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(n,i.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(n,i.u_extrude_scale),u_overscale_factor:new r.Uniform1f(n,i.u_overscale_factor)}},collisionCircle:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_inv_matrix:new r.UniformMatrix4f(n,i.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(n,i.u_viewport_size)}},debug:function(n,i){return{u_color:new r.UniformColor(n,i.u_color),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_overlay:new r.Uniform1i(n,i.u_overlay),u_overlay_scale:new r.Uniform1f(n,i.u_overlay_scale)}},clippingMask:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},heatmap:function(n,i){return{u_extrude_scale:new r.Uniform1f(n,i.u_extrude_scale),u_intensity:new r.Uniform1f(n,i.u_intensity),u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},heatmapTexture:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world),u_image:new r.Uniform1i(n,i.u_image),u_color_ramp:new r.Uniform1i(n,i.u_color_ramp),u_opacity:new r.Uniform1f(n,i.u_opacity)}},hillshade:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_latrange:new r.Uniform2f(n,i.u_latrange),u_light:new r.Uniform2f(n,i.u_light),u_shadow:new r.UniformColor(n,i.u_shadow),u_highlight:new r.UniformColor(n,i.u_highlight),u_accent:new r.UniformColor(n,i.u_accent)}},hillshadePrepare:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_dimension:new r.Uniform2f(n,i.u_dimension),u_zoom:new r.Uniform1f(n,i.u_zoom),u_unpack:new r.Uniform4f(n,i.u_unpack)}},line:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels)}},lineGradient:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_image:new r.Uniform1i(n,i.u_image),u_image_height:new r.Uniform1f(n,i.u_image_height)}},linePattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_texsize:new r.Uniform2f(n,i.u_texsize),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_image:new r.Uniform1i(n,i.u_image),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},lineSDF:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(n,i.u_patternscale_a),u_patternscale_b:new r.Uniform2f(n,i.u_patternscale_b),u_sdfgamma:new r.Uniform1f(n,i.u_sdfgamma),u_image:new r.Uniform1i(n,i.u_image),u_tex_y_a:new r.Uniform1f(n,i.u_tex_y_a),u_tex_y_b:new r.Uniform1f(n,i.u_tex_y_b),u_mix:new r.Uniform1f(n,i.u_mix)}},raster:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_tl_parent:new r.Uniform2f(n,i.u_tl_parent),u_scale_parent:new r.Uniform1f(n,i.u_scale_parent),u_buffer_scale:new r.Uniform1f(n,i.u_buffer_scale),u_fade_t:new r.Uniform1f(n,i.u_fade_t),u_opacity:new r.Uniform1f(n,i.u_opacity),u_image0:new r.Uniform1i(n,i.u_image0),u_image1:new r.Uniform1i(n,i.u_image1),u_brightness_low:new r.Uniform1f(n,i.u_brightness_low),u_brightness_high:new r.Uniform1f(n,i.u_brightness_high),u_saturation_factor:new r.Uniform1f(n,i.u_saturation_factor),u_contrast_factor:new r.Uniform1f(n,i.u_contrast_factor),u_spin_weights:new r.Uniform3f(n,i.u_spin_weights)}},symbolIcon:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texture:new r.Uniform1i(n,i.u_texture)}},symbolSDF:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texture:new r.Uniform1i(n,i.u_texture),u_gamma_scale:new r.Uniform1f(n,i.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(n,i.u_is_halo)}},symbolTextAndIcon:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texsize_icon:new r.Uniform2f(n,i.u_texsize_icon),u_texture:new r.Uniform1i(n,i.u_texture),u_texture_icon:new r.Uniform1i(n,i.u_texture_icon),u_gamma_scale:new r.Uniform1f(n,i.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(n,i.u_is_halo)}},background:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_opacity:new r.Uniform1f(n,i.u_opacity),u_color:new r.UniformColor(n,i.u_color)}},backgroundPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_opacity:new r.Uniform1f(n,i.u_opacity),u_image:new r.Uniform1i(n,i.u_image),u_pattern_tl_a:new r.Uniform2f(n,i.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(n,i.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(n,i.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(n,i.u_pattern_br_b),u_texsize:new r.Uniform2f(n,i.u_texsize),u_mix:new r.Uniform1f(n,i.u_mix),u_pattern_size_a:new r.Uniform2f(n,i.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(n,i.u_pattern_size_b),u_scale_a:new r.Uniform1f(n,i.u_scale_a),u_scale_b:new r.Uniform1f(n,i.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(n,i.u_tile_units_to_pixels)}}};function eY(n,i,a,o,s,l,c){for(var u=n.context,f=u.gl,h=n.useProgram("collisionBox"),p=[],d=0,y=0,g=0;g<o.length;g++){var v=o[g],m=i.getTile(v),x=m.getBucket(a);if(x){var b=v.posMatrix;0===s[0]&&0===s[1]||(b=n.translatePosMatrix(v.posMatrix,m,s,l));var _=c?x.textCollisionBox:x.iconCollisionBox,w=x.collisionCircleArray;if(w.length>0){var T=r.create(),A=b;r.mul(T,x.placementInvProjMatrix,n.transform.glCoordMatrix),r.mul(T,T,x.placementViewportMatrix),p.push({circleArray:w,circleOffset:y,transform:A,invTransform:T}),y=d+=w.length/4}_&&h.draw(u,f.LINES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tA.disabled,eL(b,n.transform,m),a.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,n.transform.zoom,null,null,_.collisionVertexBuffer)}}if(c&&p.length){var k=n.useProgram("collisionCircle"),M=new r.StructArrayLayout2f1f2i16;M.resize(4*d),M._trim();for(var S=0,E=0;E<p.length;E+=1)for(var I=p[E],L=0;L<I.circleArray.length/4;L++){var C=4*L,O=I.circleArray[C+0],D=I.circleArray[C+1],P=I.circleArray[C+2],B=I.circleArray[C+3];M.emplace(S++,O,D,P,B,0),M.emplace(S++,O,D,P,B,1),M.emplace(S++,O,D,P,B,2),M.emplace(S++,O,D,P,B,3)}(!ej||ej.length<2*d)&&(ej=function(n){var i=2*n,a=new r.StructArrayLayout3ui6;a.resize(i),a._trim();for(var o=0;o<i;o++){var s=6*o;a.uint16[s+0]=4*o+0,a.uint16[s+1]=4*o+1,a.uint16[s+2]=4*o+2,a.uint16[s+3]=4*o+2,a.uint16[s+4]=4*o+3,a.uint16[s+5]=4*o+0}return a}(d));for(var R=u.createIndexBuffer(ej,!0),z=u.createVertexBuffer(M,r.collisionCircleLayout.members,!0),F=0;F<p.length;F+=1){var N,U=p[F],j={u_matrix:U.transform,u_inv_matrix:U.invTransform,u_camera_to_center_distance:(N=n.transform).cameraToCenterDistance,u_viewport_size:[N.width,N.height]};k.draw(u,f.TRIANGLES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tA.disabled,j,a.id,z,R,r.SegmentVector.simpleSegment(0,2*U.circleOffset,U.circleArray.length,U.circleArray.length/2),null,n.transform.zoom,null,null,null)}z.destroy(),R.destroy()}}var eZ=r.identity(new Float32Array(16));function eX(n,i,a,o,s,l,c,u,f,h,p,d){for(var y=n.context,g=y.gl,v=n.transform,m="map"===u,x="map"===f,b=m&&"point"!==a.layout.get("symbol-placement"),_=m&&!x&&!b,w=void 0!==a.layout.get("symbol-sort-key").constantOr(1),T=!1,A=n.depthModeForSublayer(0,t_.ReadOnly),k=a.layout.get("text-variable-anchor"),M=[],S=0;S<o.length;S+=1){var E=o[S],I=i.getTile(E),L=I.getBucket(a);if(L){var C=s?L.text:L.icon;if(C&&C.segments.get().length){var O,D,P,B=C.programConfigurations.get(a.id),R=s||L.sdfIcons,z=s?L.textSizeData:L.iconSizeData,F=x||0!==v.pitch,N=n.useProgram(L.iconsInText&&s?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon",B),U=r.evaluateSizeForZoom(z,v.zoom),j=void 0,V=[0,0],H=void 0,q=void 0,G=null,W=void 0;if(s){if(H=I.glyphAtlasTexture,q=g.LINEAR,j=I.glyphAtlasTexture.size,L.iconsInText){V=I.imageAtlasTexture.size,G=I.imageAtlasTexture;var Y="composite"===z.kind||"camera"===z.kind;W=F||n.options.rotating||n.options.zooming||Y?g.LINEAR:g.NEAREST}}else{var Z=1!==a.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear;H=I.imageAtlasTexture,q=R||n.options.rotating||n.options.zooming||Z||F?g.LINEAR:g.NEAREST,j=I.imageAtlasTexture.size}var X=t3(I,1,n.transform.zoom),K=tq(E.posMatrix,x,m,n.transform,X),J=tG(E.posMatrix,x,m,n.transform,X),$=k&&L.hasTextData(),Q="none"!==a.layout.get("icon-text-fit")&&$&&L.hasIconData();b&&function(n,i,a,o,s,l,c,u){var f=o?n.textSizeData:n.iconSizeData,h=r.evaluateSizeForZoom(f,a.transform.zoom),p=[256/a.width*2+1,256/a.height*2+1],d=o?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;d.clear();for(var y=n.lineVertexArray,g=o?n.text.placedSymbolArray:n.icon.placedSymbolArray,v=a.transform.width/a.transform.height,m=!1,x=0;x<g.length;x++){var b=g.get(x);if(b.hidden||b.writingMode===r.WritingMode.vertical&&!m)t0(b.numGlyphs,d);else{m=!1;var _=[b.anchorX,b.anchorY,0,1];if(r.transformMat4(_,_,i),function(r,n){var i=r[0]/r[3],a=r[1]/r[3];return i>=-n[0]&&i<=n[0]&&a>=-n[1]&&a<=n[1]}(_,p)){var w=_[3],T=tY(a.transform.cameraToCenterDistance,w),A=r.evaluateSizeForFeature(f,h,b),k=c?A/T:A*T,M=new r.Point(b.anchorX,b.anchorY),S=tW(M,s).point,E={},I=tK(b,k,!1,u,i,s,l,n.glyphOffsetArray,y,d,S,M,E,v);m=I.useVertical,(I.notEnoughRoom||m||I.needsFlipping&&tK(b,k,!0,u,i,s,l,n.glyphOffsetArray,y,d,S,M,E,v).notEnoughRoom)&&t0(b.numGlyphs,d)}else t0(b.numGlyphs,d)}}o?n.text.dynamicLayoutVertexBuffer.updateData(d):n.icon.dynamicLayoutVertexBuffer.updateData(d)}(L,E.posMatrix,n,s,K,J,x,h);var tt=n.translatePosMatrix(E.posMatrix,I,l,c),te=b||s&&k||Q?eZ:K,tr=n.translatePosMatrix(J,I,l,c,!0),tn=R&&0!==a.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),ti={program:N,buffers:C,uniformValues:R?L.iconsInText?(O=z.kind,D=j,P=V,r.extend(eq(O,U,_,x,n,tt,te,tr,!0,D,!0),{u_texsize_icon:P,u_texture_icon:1})):eq(z.kind,U,_,x,n,tt,te,tr,s,j,!0):eH(z.kind,U,_,x,n,tt,te,tr,s,j),atlasTexture:H,atlasTextureIcon:G,atlasInterpolation:q,atlasInterpolationIcon:W,isSDF:R,hasHalo:tn};if(w&&L.canOverlap){T=!0;for(var ta=0,to=C.segments.get();ta<to.length;ta+=1){var ts=to[ta];M.push({segments:new r.SegmentVector([ts]),sortKey:ts.sortKey,state:ti})}}else M.push({segments:C.segments,sortKey:0,state:ti})}}}T&&M.sort(function(r,n){return r.sortKey-n.sortKey});for(var tl=0;tl<M.length;tl+=1){var tc=M[tl],tu=tc.state;if(y.activeTexture.set(g.TEXTURE0),tu.atlasTexture.bind(tu.atlasInterpolation,g.CLAMP_TO_EDGE),tu.atlasTextureIcon&&(y.activeTexture.set(g.TEXTURE1),tu.atlasTextureIcon&&tu.atlasTextureIcon.bind(tu.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),tu.isSDF){var tf=tu.uniformValues;tu.hasHalo&&(tf.u_is_halo=1,eK(tu.buffers,tc.segments,a,n,tu.program,A,p,d,tf)),tf.u_is_halo=0}eK(tu.buffers,tc.segments,a,n,tu.program,A,p,d,tu.uniformValues)}}function eK(r,n,i,a,o,s,l,c,u){var f=a.context,h=f.gl;o.draw(f,h.TRIANGLES,s,l,c,tA.disabled,u,i.id,r.layoutVertexBuffer,r.indexBuffer,n,i.paint,a.transform.zoom,r.programConfigurations.get(i.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function eJ(n,i,a,o,s,l,c){var u,f,h,p,d,y=n.context.gl,g=a.paint.get("fill-pattern"),v=g&&g.constantOr(1),m=a.getCrossfadeParameters();c?(f=v&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=y.LINES):(f=v?"fillPattern":"fill",u=y.TRIANGLES);for(var x=0;x<o.length;x+=1){var b=o[x],_=i.getTile(b);if(!v||_.patternsLoaded()){var w=_.getBucket(a);if(w){var T=w.programConfigurations.get(a.id),A=n.useProgram(f,T);v&&(n.context.activeTexture.set(y.TEXTURE0),_.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),T.updatePaintBuffers(m));var k=g.constantOr(null);if(k&&_.imageAtlas){var M=_.imageAtlas,S=M.patternPositions[k.to.toString()],E=M.patternPositions[k.from.toString()];S&&E&&T.setConstantPatternPositions(S,E)}var I=n.translatePosMatrix(b.posMatrix,_,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(c){p=w.indexBuffer2,d=w.segments2;var L=[y.drawingBufferWidth,y.drawingBufferHeight];h="fillOutlinePattern"===f&&v?r.extend(eE(I,n,m,_),{u_world:L}):{u_matrix:I,u_world:L}}else p=w.indexBuffer,d=w.segments,h=v?eE(I,n,m,_):eS(I);A.draw(n.context,u,s,n.stencilModeForClipping(b),l,tA.disabled,h,a.id,w.layoutVertexBuffer,p,d,a.paint,n.transform.zoom,T)}}}}function e$(n,i,a,o,s,l,c){for(var u=n.context,f=u.gl,h=a.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),d=a.getCrossfadeParameters(),y=a.paint.get("fill-extrusion-opacity"),g=0;g<o.length;g+=1){var v=o[g],m=i.getTile(v),x=m.getBucket(a);if(x){var b=x.programConfigurations.get(a.id),_=n.useProgram(p?"fillExtrusionPattern":"fillExtrusion",b);p&&(n.context.activeTexture.set(f.TEXTURE0),m.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),b.updatePaintBuffers(d));var w=h.constantOr(null);if(w&&m.imageAtlas){var T=m.imageAtlas,A=T.patternPositions[w.to.toString()],k=T.patternPositions[w.from.toString()];A&&k&&b.setConstantPatternPositions(A,k)}var M=n.translatePosMatrix(v.posMatrix,m,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),S=a.paint.get("fill-extrusion-vertical-gradient"),E=p?r.extend(eM(M,n,S,y),ek(d,n,m),{u_height_factor:-Math.pow(2,v.overscaledZ)/m.tileSize/8}):eM(M,n,S,y);_.draw(u,u.gl.TRIANGLES,s,l,c,tA.backCCW,E,a.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,a.paint,n.transform.zoom,b)}}}var eQ=new r.Color(1,0,0,1),e0=new r.Color(0,1,0,1),e1=new r.Color(0,0,1,1),e2=new r.Color(1,0,1,1),e3=new r.Color(0,1,1,1);function e4(r,n,i,a){e5(r,0,n+i/2,r.transform.width,i,a)}function e6(r,n,i,a){e5(r,n-i/2,0,i,r.transform.height,a)}function e5(n,i,a,o,s,l){var c=n.context,u=c.gl;u.enable(u.SCISSOR_TEST),u.scissor(i*r.browser.devicePixelRatio,a*r.browser.devicePixelRatio,o*r.browser.devicePixelRatio,s*r.browser.devicePixelRatio),c.clear({color:l}),u.disable(u.SCISSOR_TEST)}var e8={symbol:function(n,i,a,o,s){if("translucent"===n.renderPass){var l=tw.disabled,c=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(n,i,a,o,s,l,c){for(var u=i.transform,f="map"===s,h="map"===l,p=0;p<n.length;p+=1){var d=n[p],y=o.getTile(d),g=y.getBucket(a);if(g&&g.text&&g.text.segments.get().length){var v=g.textSizeData,m=r.evaluateSizeForZoom(v,u.zoom),x=t3(y,1,i.transform.zoom),b=tq(d.posMatrix,h,f,i.transform,x),_="none"!==a.layout.get("icon-text-fit")&&g.hasIconData();if(m){var w=Math.pow(2,u.zoom-y.tileID.overscaledZ);(function(n,i,a,o,s,l,c,u,f,h,p){var d=n.text.placedSymbolArray,y=n.text.dynamicLayoutVertexArray,g=n.icon.dynamicLayoutVertexArray,v={};y.clear();for(var m=0;m<d.length;m++){var x=d.get(m),b=n.allowVerticalPlacement&&!x.placedOrientation,_=x.hidden||!x.crossTileID||b?null:o[x.crossTileID];if(_){var w=new r.Point(x.anchorX,x.anchorY),T=tW(w,a?u:c),A=tY(l.cameraToCenterDistance,T.signedDistanceFromCamera),k=s.evaluateSizeForFeature(n.textSizeData,h,x)*A/r.ONE_EM;a&&(k*=n.tilePixelRatio/f);for(var M=_.width,S=_.height,E=function(n,i,a,o,s,l){var c=r.getAnchorAlignment(n),u=-(c.horizontalAlign-.5)*i,f=-(c.verticalAlign-.5)*a,h=r.evaluateVariableOffset(n,o);return new r.Point((u/s+h[0])*l,(f/s+h[1])*l)}(_.anchor,M,S,_.textOffset,_.textBoxScale,k),I=a?tW(w.add(E),c).point:T.point.add(i?E.rotate(-l.angle):E),L=n.allowVerticalPlacement&&x.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,C=0;C<x.numGlyphs;C++)r.addDynamicAttributes(y,I,L);p&&x.associatedIconIndex>=0&&(v[x.associatedIconIndex]={shiftedAnchor:I,angle:L})}else t0(x.numGlyphs,y)}if(p){g.clear();for(var O=n.icon.placedSymbolArray,D=0;D<O.length;D++){var P=O.get(D);if(P.hidden)t0(P.numGlyphs,g);else{var B=v[D];if(B)for(var R=0;R<P.numGlyphs;R++)r.addDynamicAttributes(g,B.shiftedAnchor,B.angle);else t0(P.numGlyphs,g)}}n.icon.dynamicLayoutVertexBuffer.updateData(g)}n.text.dynamicLayoutVertexBuffer.updateData(y)})(g,f,h,c,r.symbolSize,u,b,d.posMatrix,w,m,_)}}}}(o,n,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),s),0!==a.paint.get("icon-opacity").constantOr(1)&&eX(n,i,a,o,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),l,c),0!==a.paint.get("text-opacity").constantOr(1)&&eX(n,i,a,o,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),l,c),i.map.showCollisionBoxes&&(eY(n,i,a,o,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),eY(n,i,a,o,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,i,a,o){if("translucent"===n.renderPass){var s=a.paint.get("circle-opacity"),l=a.paint.get("circle-stroke-width"),c=a.paint.get("circle-stroke-opacity"),u=void 0!==a.layout.get("circle-sort-key").constantOr(1);if(0!==s.constantOr(1)||0!==l.constantOr(1)&&0!==c.constantOr(1)){for(var f=n.context,h=f.gl,p=n.depthModeForSublayer(0,t_.ReadOnly),d=tw.disabled,y=n.colorModeForRenderPass(),g=[],v=0;v<o.length;v++){var m=o[v],x=i.getTile(m),b=x.getBucket(a);if(b){var _=b.programConfigurations.get(a.id),w={programConfiguration:_,program:n.useProgram("circle",_),layoutVertexBuffer:b.layoutVertexBuffer,indexBuffer:b.indexBuffer,uniformValues:eI(n,m,x,a)};if(u)for(var T=0,A=b.segments.get();T<A.length;T+=1){var k=A[T];g.push({segments:new r.SegmentVector([k]),sortKey:k.sortKey,state:w})}else g.push({segments:b.segments,sortKey:0,state:w})}}u&&g.sort(function(r,n){return r.sortKey-n.sortKey});for(var M=0;M<g.length;M+=1){var S=g[M],E=S.state,I=E.programConfiguration,L=E.program,C=E.layoutVertexBuffer,O=E.indexBuffer,D=E.uniformValues,P=S.segments;L.draw(f,h.TRIANGLES,p,d,y,tA.disabled,D,a.id,C,O,P,a.paint,n.transform.zoom,I)}}}},heatmap:function(n,i,a,o){if(0!==a.paint.get("heatmap-opacity")){if("offscreen"===n.renderPass){var s=n.context,l=s.gl,c=tw.disabled,u=new tT([l.ONE,l.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(r,n,i){var a=r.gl;r.activeTexture.set(a.TEXTURE1),r.viewport.set([0,0,n.width/4,n.height/4]);var o=i.heatmapFbo;if(o)a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),r.bindFramebuffer.set(o.framebuffer);else{var s,l,c,u=a.createTexture();a.bindTexture(a.TEXTURE_2D,u),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),s=o=i.heatmapFbo=r.createFramebuffer(n.width/4,n.height/4,!1),l=r.gl,c=r.extRenderToTextureHalfFloat?r.extTextureHalfFloat.HALF_FLOAT_OES:l.UNSIGNED_BYTE,l.texImage2D(l.TEXTURE_2D,0,l.RGBA,n.width/4,n.height/4,0,l.RGBA,c,null),s.colorAttachment.set(u)}})(s,n,a),s.clear({color:r.Color.transparent});for(var f=0;f<o.length;f++){var h=o[f];if(!i.hasRenderableParent(h)){var p=i.getTile(h),d=p.getBucket(a);if(d){var y,g,v=d.programConfigurations.get(a.id),m=n.useProgram("heatmap",v),x=n.transform.zoom;m.draw(s,l.TRIANGLES,t_.disabled,c,u,tA.disabled,(y=h.posMatrix,g=a.paint.get("heatmap-intensity"),{u_matrix:y,u_extrude_scale:t3(p,1,x),u_intensity:g}),a.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,a.paint,n.transform.zoom,v)}}}s.viewport.set([0,0,n.width,n.height])}else"translucent"===n.renderPass&&(n.context.setColorMode(n.colorModeForRenderPass()),function(n,i){var a=n.context,o=a.gl,s=i.heatmapFbo;if(s){a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),a.activeTexture.set(o.TEXTURE1);var l=i.colorRampTexture;l||(l=i.colorRampTexture=new r.Texture(a,i.colorRamp,o.RGBA)),l.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.useProgram("heatmapTexture").draw(a,o.TRIANGLES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tA.disabled,eD(n,i,0,1),i.id,n.viewportBuffer,n.quadTriangleIndexBuffer,n.viewportSegments,i.paint,n.transform.zoom)}}(n,a))}},line:function(n,i,a,o){if("translucent"===n.renderPass){var s=a.paint.get("line-opacity"),l=a.paint.get("line-width");if(0!==s.constantOr(1)&&0!==l.constantOr(1))for(var c=n.depthModeForSublayer(0,t_.ReadOnly),u=n.colorModeForRenderPass(),f=a.paint.get("line-dasharray"),h=a.paint.get("line-pattern"),p=h.constantOr(1),d=a.paint.get("line-gradient"),y=a.getCrossfadeParameters(),g=p?"linePattern":f?"lineSDF":d?"lineGradient":"line",v=n.context,m=v.gl,x=!0,b=0;b<o.length;b+=1){var _=o[b],w=i.getTile(_);if(!p||w.patternsLoaded()){var T=w.getBucket(a);if(T){var A,k=T.programConfigurations.get(a.id),M=n.context.program.get(),S=n.useProgram(g,k),E=x||S.program!==M,I=h.constantOr(null);if(I&&w.imageAtlas){var L=w.imageAtlas,C=L.patternPositions[I.to.toString()],O=L.patternPositions[I.from.toString()];C&&O&&k.setConstantPatternPositions(C,O)}var D=p?ez(n,w,a,y):f?eF(n,w,a,f,y):d?(A=T.lineClipsArray.length,r.extend(eR(n,w,a),{u_image:0,u_image_height:A})):eR(n,w,a);if(p)v.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.updatePaintBuffers(y);else if(f&&(E||n.lineAtlas.dirty))v.activeTexture.set(m.TEXTURE0),n.lineAtlas.bind(v);else if(d){var P=T.gradients[a.id],B=P.texture;if(a.gradientVersion!==P.version){var R=256;if(a.stepInterpolant){var z=i.getSource().maxzoom,F=_.canonical.z===z?Math.ceil(1<<n.transform.maxZoom-_.canonical.z):1,N=T.maxLineLength/r.EXTENT*1024*F;R=r.clamp(r.nextPowerOfTwo(N),256,v.maxTextureSize)}P.gradient=r.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:P.gradient||void 0,clips:T.lineClipsArray}),P.texture?P.texture.update(P.gradient):P.texture=new r.Texture(v,P.gradient,m.RGBA),P.version=a.gradientVersion,B=P.texture}v.activeTexture.set(m.TEXTURE0),B.bind(a.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}S.draw(v,m.TRIANGLES,c,n.stencilModeForClipping(_),u,tA.disabled,D,a.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,a.paint,n.transform.zoom,k,T.layoutVertexBuffer2),x=!1}}}}},fill:function(n,i,a,o){var s=a.paint.get("fill-color"),l=a.paint.get("fill-opacity");if(0!==l.constantOr(1)){var c=n.colorModeForRenderPass(),u=a.paint.get("fill-pattern"),f=n.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===s.constantOr(r.Color.transparent).a&&1===l.constantOr(0)?"opaque":"translucent";if(n.renderPass===f){var h=n.depthModeForSublayer(1,"opaque"===n.renderPass?t_.ReadWrite:t_.ReadOnly);eJ(n,i,a,o,h,c,!1)}if("translucent"===n.renderPass&&a.paint.get("fill-antialias")){var p=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,t_.ReadOnly);eJ(n,i,a,o,p,c,!0)}}},"fill-extrusion":function(r,n,i,a){var o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===r.renderPass){var s=new t_(r.context.gl.LEQUAL,t_.ReadWrite,r.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))e$(r,n,i,a,s,tw.disabled,tT.disabled),e$(r,n,i,a,s,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var l=r.colorModeForRenderPass();e$(r,n,i,a,s,tw.disabled,l)}}},hillshade:function(n,i,a,o){if("offscreen"===n.renderPass||"translucent"===n.renderPass){for(var s=n.context,l=n.depthModeForSublayer(0,t_.ReadOnly),c=n.colorModeForRenderPass(),u="translucent"===n.renderPass?n.stencilConfigForOverlap(o):[{},o],f=u[0],h=0,p=u[1];h<p.length;h+=1){var d=p[h],y=i.getTile(d);y.needsHillshadePrepare&&"offscreen"===n.renderPass?function(n,i,a,o,s,l){var c=n.context,u=c.gl,f=i.dem;if(f&&f.data){var h=f.dim,p=f.stride,d=f.getPixels();if(c.activeTexture.set(u.TEXTURE1),c.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||n.getTileTexture(p),i.demTexture){var y=i.demTexture;y.update(d,{premultiply:!1}),y.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else i.demTexture=new r.Texture(c,d,u.RGBA,{premultiply:!1}),i.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);c.activeTexture.set(u.TEXTURE0);var g=i.fbo;if(!g){var v=new r.Texture(c,{width:h,height:h,data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE),(g=i.fbo=c.createFramebuffer(h,h,!0)).colorAttachment.set(v.texture)}c.bindFramebuffer.set(g.framebuffer),c.viewport.set([0,0,h,h]),n.useProgram("hillshadePrepare").draw(c,u.TRIANGLES,o,s,l,tA.disabled,eB(i.tileID,f),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),i.needsHillshadePrepare=!1}}(n,y,a,l,tw.disabled,c):"translucent"===n.renderPass&&function(r,n,i,a,o,s){var l=r.context,c=l.gl,u=n.fbo;if(u){var f=r.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());var h=eP(r,n,i);f.draw(l,c.TRIANGLES,a,o,s,tA.disabled,h,i.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}(n,y,a,l,f[d.overscaledZ],c)}s.viewport.set([0,0,n.width,n.height])}},raster:function(n,i,a,o){if("translucent"===n.renderPass&&0!==a.paint.get("raster-opacity")&&o.length)for(var s=n.context,l=s.gl,c=i.getSource(),u=n.useProgram("raster"),f=n.colorModeForRenderPass(),h=c instanceof L?[{},o]:n.stencilConfigForOverlap(o),p=h[0],d=h[1],y=d[d.length-1].overscaledZ,g=!n.options.moving,v=0;v<d.length;v+=1){var m=d[v],x=n.depthModeForSublayer(m.overscaledZ-y,1===a.paint.get("raster-opacity")?t_.ReadWrite:t_.ReadOnly,l.LESS),b=i.getTile(m),_=n.transform.calculatePosMatrix(m.toUnwrapped(),g);b.registerFadeDuration(a.paint.get("raster-fade-duration"));var w=i.findLoadedParent(m,0),T=function(n,i,a,o,s){var l=o.paint.get("raster-fade-duration");if(l>0){var c=r.browser.now(),u=(c-n.timeAdded)/l,f=i?(c-i.timeAdded)/l:-1,h=a.getSource(),p=s.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),d=!i||Math.abs(i.tileID.overscaledZ-p)>Math.abs(n.tileID.overscaledZ-p),y=d&&n.refreshedUponExpiration?1:r.clamp(d?u:1-f,0,1);return n.refreshedUponExpiration&&u>=1&&(n.refreshedUponExpiration=!1),i?{opacity:1,mix:1-y}:{opacity:y,mix:0}}return{opacity:1,mix:0}}(b,w,i,a,n.transform),A=void 0,k=void 0,M="nearest"===a.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),b.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),A=Math.pow(2,w.tileID.overscaledZ-b.tileID.overscaledZ),k=[b.tileID.canonical.x*A%1,b.tileID.canonical.y*A%1]):b.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var S=eV(_,k||[0,0],A||1,T,a);c instanceof L?u.draw(s,l.TRIANGLES,x,tw.disabled,f,tA.disabled,S,a.id,c.boundsBuffer,n.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,x,p[m.overscaledZ],f,tA.disabled,S,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(r,n,i){var a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0!==o){var s=r.context,l=s.gl,c=r.transform,u=c.tileSize,f=i.paint.get("background-pattern");if(!r.isPatternMissing(f)){var h=!f&&1===a.a&&1===o&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===h){var p=tw.disabled,d=r.depthModeForSublayer(0,"opaque"===h?t_.ReadWrite:t_.ReadOnly),y=r.colorModeForRenderPass(),g=r.useProgram(f?"backgroundPattern":"background"),v=c.coveringTiles({tileSize:u});f&&(s.activeTexture.set(l.TEXTURE0),r.imageManager.bind(r.context));for(var m=i.getCrossfadeParameters(),x=0;x<v.length;x+=1){var b=v[x],_=r.transform.calculatePosMatrix(b.toUnwrapped()),w=f?eG(_,o,r,f,{tileID:b,tileSize:u},m):{u_matrix:_,u_opacity:o,u_color:a};g.draw(s,l.TRIANGLES,d,p,y,tA.disabled,w,i.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(n,i,a){for(var o=0;o<a.length;o++)(function(n,i,a){var o=n.context,s=o.gl,l=a.posMatrix,c=n.useProgram("debug"),u=t_.disabled,f=tw.disabled,h=n.colorModeForRenderPass(),p="$debug";o.activeTexture.set(s.TEXTURE0),n.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),c.draw(o,s.LINE_STRIP,u,f,h,tA.disabled,eC(l,r.Color.red),p,n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var d=i.getTileByID(a.key).latestRawTileData,y=Math.floor((d&&d.byteLength||0)/1024),g=512/Math.min(i.getTile(a).tileSize,512)*(a.overscaledZ/n.transform.zoom)*.5,v=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(v+=" => "+a.overscaledZ),function(r,n){r.initDebugOverlayCanvas();var i=r.debugOverlayCanvas,a=r.context.gl,o=r.debugOverlayCanvas.getContext("2d");o.clearRect(0,0,i.width,i.height),o.shadowColor="white",o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle="white",o.textBaseline="top",o.font="bold 36px Open Sans, sans-serif",o.fillText(n,5,5),o.strokeText(n,5,5),r.debugOverlayTexture.update(i),r.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}(n,v+" "+y+"kb"),c.draw(o,s.TRIANGLES,u,f,tT.alphaBlended,tA.disabled,eC(l,r.Color.transparent,g),p,n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)})(n,i,a[o])},custom:function(r,n,i){var a=r.context,o=i.implementation;if("offscreen"===r.renderPass){var s=o.prerender;s&&(r.setCustomLayerDefaults(),a.setColorMode(r.colorModeForRenderPass()),s.call(o,a.gl,r.transform.customLayerMatrix()),a.setDirty(),r.setBaseState())}else if("translucent"===r.renderPass){r.setCustomLayerDefaults(),a.setColorMode(r.colorModeForRenderPass()),a.setStencilMode(tw.disabled);var l="3d"===o.renderingMode?new t_(r.context.gl.LEQUAL,t_.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,t_.ReadOnly);a.setDepthMode(l),o.render(a.gl,r.transform.customLayerMatrix()),a.setDirty(),r.setBaseState(),a.bindFramebuffer.set(null)}}},e7=function(r,n){this.context=new tk(r),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=tM.maxUnderzooming+tM.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new eh,this.gpuTimers={}};e7.prototype.resize=function(n,i){if(this.width=n*r.browser.devicePixelRatio,this.height=i*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,o=this.style._order;a<o.length;a+=1){var s=o[a];this.style._layers[s].resize()}},e7.prototype.setup=function(){var n=this.context,i=new r.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(r.EXTENT,0),i.emplaceBack(0,r.EXTENT),i.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(i,em.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var a=new r.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(r.EXTENT,0),a.emplaceBack(0,r.EXTENT),a.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=n.createVertexBuffer(a,em.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var o=new r.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(r.EXTENT,0,r.EXTENT,0),o.emplaceBack(0,r.EXTENT,0,r.EXTENT),o.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(o,I.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var s=new r.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(s,em.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var l=new r.StructArrayLayout1ui2;l.emplaceBack(0),l.emplaceBack(1),l.emplaceBack(3),l.emplaceBack(2),l.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(l);var c=new r.StructArrayLayout3ui6;c.emplaceBack(0,1,2),c.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(c),this.emptyTexture=new r.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new tw({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},e7.prototype.clearStencil=function(){var n=this.context,i=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=r.create();r.ortho(a,0,this.width,this.height,0,0,1),r.scale(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,i.TRIANGLES,t_.disabled,this.stencilClearMode,tT.disabled,tA.disabled,eO(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},e7.prototype._renderTileClippingMasks=function(r,n){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&n&&n.length){this.currentStencilSource=r.source;var i=this.context,a=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(tT.disabled),i.setDepthMode(t_.disabled);var o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var s=0;s<n.length;s+=1){var l=n[s],c=this._tileClippingMaskIDs[l.key]=this.nextStencilID++;o.draw(i,a.TRIANGLES,t_.disabled,new tw({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),tT.disabled,tA.disabled,eO(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},e7.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var r=this.nextStencilID++,n=this.context.gl;return new tw({func:n.NOTEQUAL,mask:255},r,255,n.KEEP,n.KEEP,n.REPLACE)},e7.prototype.stencilModeForClipping=function(r){var n=this.context.gl;return new tw({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,n.KEEP,n.KEEP,n.REPLACE)},e7.prototype.stencilConfigForOverlap=function(r){var n,i=this.context.gl,a=r.sort(function(r,n){return n.overscaledZ-r.overscaledZ}),o=a[a.length-1].overscaledZ,s=a[0].overscaledZ-o+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();for(var l={},c=0;c<s;c++)l[c+o]=new tw({func:i.GEQUAL,mask:255},c+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=s,[l,a]}return[((n={})[o]=tw.disabled,n),a]},e7.prototype.colorModeForRenderPass=function(){var n=this.context.gl;if(this._showOverdrawInspector){var i=1/8;return new tT([n.CONSTANT_COLOR,n.ONE],new r.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?tT.unblended:tT.alphaBlended},e7.prototype.depthModeForSublayer=function(r,n,i){if(!this.opaquePassEnabledForLayer())return t_.disabled;var a=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new t_(i||this.context.gl.LEQUAL,n,[a,a])},e7.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},e7.prototype.render=function(n,i){var a,o,s,l,c=this;this.style=n,this.options=i,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var u=this.style._order,f=this.style.sourceCaches;for(var h in f){var p=f[h];p.used&&p.prepare(this.context)}var d,y,g={},v={},m={};for(var x in f){var b=f[x];g[x]=b.getVisibleCoordinates(),v[x]=g[x].slice().reverse(),m[x]=b.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<u.length;_++){var w=u[_];if(this.style._layers[w].is3D()){this.opaquePassCutoff=_;break}}this.renderPass="offscreen";for(var T=0;T<u.length;T+=1){var A=u[T],k=this.style._layers[A];if(k.hasOffscreenPass()&&!k.isHidden(this.transform.zoom)){var M=v[k.source];("custom"===k.type||M.length)&&this.renderLayer(this,f[k.source],k,M)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[u[this.currentLayer]],E=f[S.source],I=g[S.source];this._renderTileClippingMasks(S,I),this.renderLayer(this,E,S,I)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var L=this.style._layers[u[this.currentLayer]],C=f[L.source],O=("symbol"===L.type?m:v)[L.source];this._renderTileClippingMasks(L,g[L.source]),this.renderLayer(this,C,L,O)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(r){r.source&&!r.isHidden(c.transform.zoom)&&(r.source!==(y&&y.id)&&(y=c.style.sourceCaches[r.source]),(!d||d.getSource().maxzoom<y.getSource().maxzoom)&&(d=y))}),d&&e8.debug(this,d,d.getVisibleCoordinates())),this.options.showPadding&&(a=this.transform.padding,e4(this,this.transform.height-(a.top||0),3,eQ),e4(this,a.bottom||0,3,e0),e6(this,a.left||0,3,e1),e6(this,this.transform.width-(a.right||0),3,e2),e5(this,(s=(o=this.transform.centerPoint).x)-1,(l=this.transform.height-o.y)-10,2,20,e3),e5(this,s-10,l-1,20,2,e3)),this.context.setDefault()},e7.prototype.renderLayer=function(r,n,i,a){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||a.length)&&(this.id=i.id,this.gpuTimingStart(i),e8[i.type](r,n,i,a,this.style.placement.variableOffsets),this.gpuTimingEnd())},e7.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var n=this.context.extTimerQuery,i=this.gpuTimers[r.id];i||(i=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:n.createQueryEXT()}),i.calls++,n.beginQueryEXT(n.TIME_ELAPSED_EXT,i.query)}},e7.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},e7.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},e7.prototype.queryGpuTimers=function(r){var n={};for(var i in r){var a=r[i],o=this.context.extTimerQuery,s=o.getQueryObjectEXT(a.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(a.query),n[i]=s}return n},e7.prototype.translatePosMatrix=function(n,i,a,o,s){if(!a[0]&&!a[1])return n;var l=s?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(l){var c=Math.sin(l),u=Math.cos(l);a=[a[0]*u-a[1]*c,a[0]*c+a[1]*u]}var f=[s?a[0]:t3(i,a[0],this.transform.zoom),s?a[1]:t3(i,a[1],this.transform.zoom),0],h=new Float32Array(16);return r.translate(h,n,f),h},e7.prototype.saveTileTexture=function(r){var n=this._tileTextures[r.size[0]];n?n.push(r):this._tileTextures[r.size[0]]=[r]},e7.prototype.getTileTexture=function(r){var n=this._tileTextures[r];return n&&n.length>0?n.pop():null},e7.prototype.isPatternMissing=function(r){if(!r)return!1;if(!r.from||!r.to)return!0;var n=this.imageManager.getPattern(r.from.toString()),i=this.imageManager.getPattern(r.to.toString());return!n||!i},e7.prototype.useProgram=function(r,n){this.cache=this.cache||{};var i=""+r+(n?n.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new eA(this.context,r,e_[r],n,eW[r],this._showOverdrawInspector)),this.cache[i]},e7.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},e7.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)},e7.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var n=this.context.gl;this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,n.RGBA)}},e7.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var e9=function(r,n){this.points=r,this.planes=n};e9.fromInvProjectionMatrix=function(n,i,a){var o=Math.pow(2,a),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(i){return r.transformMat4([],i,n)}).map(function(n){return r.scale$1([],n,1/n[3]/i*o)}),l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(n){var i=r.sub([],s[n[0]],s[n[1]]),a=r.sub([],s[n[2]],s[n[1]]),o=r.normalize([],r.cross([],i,a)),l=-r.dot(o,s[n[1]]);return o.concat(l)});return new e9(s,l)};var rt=function(n,i){this.min=n,this.max=i,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};rt.prototype.quadrant=function(n){for(var i=[n%2==0,n<2],a=r.clone$2(this.min),o=r.clone$2(this.max),s=0;s<i.length;s++)a[s]=i[s]?this.min[s]:this.center[s],o[s]=i[s]?this.center[s]:this.max[s];return o[2]=this.max[2],new rt(a,o)},rt.prototype.distanceX=function(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]},rt.prototype.distanceY=function(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]},rt.prototype.intersects=function(n){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,o=0;o<n.planes.length;o++){for(var s=n.planes[o],l=0,c=0;c<i.length;c++)l+=r.dot$1(s,i[c])>=0;if(0===l)return 0;l!==i.length&&(a=!1)}if(a)return 2;for(var u=0;u<3;u++){for(var f=Number.MAX_VALUE,h=-Number.MAX_VALUE,p=0;p<n.points.length;p++){var d=n.points[p][u]-this.min[u];f=Math.min(f,d),h=Math.max(h,d)}if(h<0||f>this.max[u]-this.min[u])return 0}return 1};var re=function(r,n,i,a){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),isNaN(r)||r<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(a)||a<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=n,this.left=i,this.right=a};re.prototype.interpolate=function(n,i,a){return null!=i.top&&null!=n.top&&(this.top=r.number(n.top,i.top,a)),null!=i.bottom&&null!=n.bottom&&(this.bottom=r.number(n.bottom,i.bottom,a)),null!=i.left&&null!=n.left&&(this.left=r.number(n.left,i.left,a)),null!=i.right&&null!=n.right&&(this.right=r.number(n.right,i.right,a)),this},re.prototype.getCenter=function(n,i){var a=r.clamp((this.left+n-this.right)/2,0,n),o=r.clamp((this.top+i-this.bottom)/2,0,i);return new r.Point(a,o)},re.prototype.equals=function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right},re.prototype.clone=function(){return new re(this.top,this.bottom,this.left,this.right)},re.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var rr=function(n,i,a,o,s){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===s||s,this._minZoom=n||0,this._maxZoom=i||22,this._minPitch=null==a?0:a,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new re,this._posMatrixCache={},this._alignedPosMatrixCache={}},rn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};rr.prototype.clone=function(){var r=new rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r},rn.minZoom.get=function(){return this._minZoom},rn.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},rn.maxZoom.get=function(){return this._maxZoom},rn.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},rn.minPitch.get=function(){return this._minPitch},rn.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},rn.maxPitch.get=function(){return this._maxPitch},rn.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},rn.renderWorldCopies.get=function(){return this._renderWorldCopies},rn.renderWorldCopies.set=function(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r},rn.worldSize.get=function(){return this.tileSize*this.scale},rn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},rn.size.get=function(){return new r.Point(this.width,this.height)},rn.bearing.get=function(){return-this.angle/Math.PI*180},rn.bearing.set=function(n){var i=-r.wrap(n,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},rn.pitch.get=function(){return this._pitch/Math.PI*180},rn.pitch.set=function(n){var i=r.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},rn.fov.get=function(){return this._fov/Math.PI*180},rn.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},rn.zoom.get=function(){return this._zoom},rn.zoom.set=function(r){var n=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this.scale=this.zoomScale(n),this.tileZoom=Math.floor(n),this.zoomFraction=n-this.tileZoom,this._constrain(),this._calcMatrices())},rn.center.get=function(){return this._center},rn.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},rn.padding.get=function(){return this._edgeInsets.toJSON()},rn.padding.set=function(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())},rn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},rr.prototype.isPaddingEqual=function(r){return this._edgeInsets.equals(r)},rr.prototype.interpolatePadding=function(r,n,i){this._unmodified=!1,this._edgeInsets.interpolate(r,n,i),this._constrain(),this._calcMatrices()},rr.prototype.coveringZoomLevel=function(r){return Math.max(0,(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize)))},rr.prototype.getVisibleUnwrappedCoordinates=function(n){var i=[new r.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new r.Point(0,0)),o=this.pointCoordinate(new r.Point(this.width,0)),s=this.pointCoordinate(new r.Point(this.width,this.height)),l=this.pointCoordinate(new r.Point(0,this.height)),c=Math.floor(Math.min(a.x,o.x,s.x,l.x)),u=Math.floor(Math.max(a.x,o.x,s.x,l.x)),f=c-1;f<=u+1;f++)0!==f&&i.push(new r.UnwrappedTileID(f,n));return i},rr.prototype.coveringTiles=function(n){var i=this.coveringZoomLevel(n),a=i;if(void 0!==n.minzoom&&i<n.minzoom)return[];void 0!==n.maxzoom&&i>n.maxzoom&&(i=n.maxzoom);var o=r.MercatorCoordinate.fromLngLat(this.center),s=Math.pow(2,i),l=[s*o.x,s*o.y,0],c=e9.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),u=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=i);var f=function(r){return{aabb:new rt([r*s,0,0],[(r+1)*s,s,0]),zoom:0,x:0,y:0,wrap:r,fullyVisible:!1}},h=[],p=[],d=i,y=n.reparseOverscaled?a:i;if(this._renderWorldCopies)for(var g=1;g<=3;g++)h.push(f(-g)),h.push(f(g));for(h.push(f(0));h.length>0;){var v=h.pop(),m=v.x,x=v.y,b=v.fullyVisible;if(!b){var _=v.aabb.intersects(c);if(0===_)continue;b=2===_}var w=Math.max(Math.abs(v.aabb.distanceX(l)),Math.abs(v.aabb.distanceY(l))),T=3+(1<<d-v.zoom)-2;if(v.zoom===d||w>T&&v.zoom>=u)p.push({tileID:new r.OverscaledTileID(v.zoom===d?y:v.zoom,v.wrap,v.zoom,m,x),distanceSq:r.sqrLen([l[0]-.5-m,l[1]-.5-x])});else for(var A=0;A<4;A++){var k=(m<<1)+A%2,M=(x<<1)+(A>>1);h.push({aabb:v.aabb.quadrant(A),zoom:v.zoom+1,x:k,y:M,wrap:v.wrap,fullyVisible:b})}}return p.sort(function(r,n){return r.distanceSq-n.distanceSq}).map(function(r){return r.tileID})},rr.prototype.resize=function(r,n){this.width=r,this.height=n,this.pixelsToGLUnits=[2/r,-2/n],this._constrain(),this._calcMatrices()},rn.unmodified.get=function(){return this._unmodified},rr.prototype.zoomScale=function(r){return Math.pow(2,r)},rr.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},rr.prototype.project=function(n){var i=r.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(n.lng)*this.worldSize,r.mercatorYfromLat(i)*this.worldSize)},rr.prototype.unproject=function(n){return new r.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},rn.point.get=function(){return this.project(this.center)},rr.prototype.setLocationAtPoint=function(n,i){var a=this.pointCoordinate(i),o=this.pointCoordinate(this.centerPoint),s=this.locationCoordinate(n),l=new r.MercatorCoordinate(s.x-(a.x-o.x),s.y-(a.y-o.y));this.center=this.coordinateLocation(l),this._renderWorldCopies&&(this.center=this.center.wrap())},rr.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},rr.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},rr.prototype.locationCoordinate=function(n){return r.MercatorCoordinate.fromLngLat(n)},rr.prototype.coordinateLocation=function(r){return r.toLngLat()},rr.prototype.pointCoordinate=function(n){var i=[n.x,n.y,0,1],a=[n.x,n.y,1,1];r.transformMat4(i,i,this.pixelMatrixInverse),r.transformMat4(a,a,this.pixelMatrixInverse);var o=i[3],s=a[3],l=i[0]/o,c=a[0]/s,u=i[1]/o,f=a[1]/s,h=i[2]/o,p=a[2]/s,d=h===p?0:(0-h)/(p-h);return new r.MercatorCoordinate(r.number(l,c,d)/this.worldSize,r.number(u,f,d)/this.worldSize)},rr.prototype.coordinatePoint=function(n){var i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return r.transformMat4(i,i,this.pixelMatrix),new r.Point(i[0]/i[3],i[1]/i[3])},rr.prototype.getBounds=function(){return(new r.LngLatBounds).extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},rr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},rr.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},rr.prototype.calculatePosMatrix=function(n,i){void 0===i&&(i=!1);var a=n.key,o=i?this._alignedPosMatrixCache:this._posMatrixCache;if(o[a])return o[a];var s=n.canonical,l=this.worldSize/this.zoomScale(s.z),c=s.x+Math.pow(2,s.z)*n.wrap,u=r.identity(new Float64Array(16));return r.translate(u,u,[c*l,s.y*l,0]),r.scale(u,u,[l/r.EXTENT,l/r.EXTENT,1]),r.multiply(u,i?this.alignedProjMatrix:this.projMatrix,u),o[a]=new Float32Array(u),o[a]},rr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},rr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,i,a,o,s=-90,l=90,c=-180,u=180,f=this.size,h=this._unmodified;if(this.latRange){var p=this.latRange;s=r.mercatorYfromLat(p[1])*this.worldSize,n=(l=r.mercatorYfromLat(p[0])*this.worldSize)-s<f.y?f.y/(l-s):0}if(this.lngRange){var d=this.lngRange;c=r.mercatorXfromLng(d[0])*this.worldSize,i=(u=r.mercatorXfromLng(d[1])*this.worldSize)-c<f.x?f.x/(u-c):0}var y=this.point,g=Math.max(i||0,n||0);if(g)return this.center=this.unproject(new r.Point(i?(u+c)/2:y.x,n?(l+s)/2:y.y)),this.zoom+=this.scaleZoom(g),this._unmodified=h,void(this._constraining=!1);if(this.latRange){var v=y.y,m=f.y/2;v-m<s&&(o=s+m),v+m>l&&(o=l-m)}if(this.lngRange){var x=y.x,b=f.x/2;x-b<c&&(a=c+b),x+b>u&&(a=u-b)}void 0===a&&void 0===o||(this.center=this.unproject(new r.Point(void 0!==a?a:y.x,void 0!==o?o:y.y))),this._unmodified=h,this._constraining=!1}},rr.prototype._calcMatrices=function(){if(this.height){var n=this._fov/2,i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(n)*this.height;var a=Math.PI/2+this._pitch,o=this._fov*(.5+i.y/this.height),s=Math.sin(o)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-a-o,.01,Math.PI-.01)),l=this.point,c=l.x,u=l.y,f=1.01*(Math.cos(Math.PI/2-this._pitch)*s+this.cameraToCenterDistance),h=this.height/50,p=new Float64Array(16);r.perspective(p,this._fov,this.width/this.height,h,f),p[8]=-(2*i.x)/this.width,p[9]=2*i.y/this.height,r.scale(p,p,[1,-1,1]),r.translate(p,p,[0,0,-this.cameraToCenterDistance]),r.rotateX(p,p,this._pitch),r.rotateZ(p,p,this.angle),r.translate(p,p,[-c,-u,0]),this.mercatorMatrix=r.scale([],p,[this.worldSize,this.worldSize,this.worldSize]),r.scale(p,p,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=p,this.invProjMatrix=r.invert([],this.projMatrix);var d=this.width%2/2,y=this.height%2/2,g=Math.cos(this.angle),v=Math.sin(this.angle),m=c-Math.round(c)+g*d+v*y,x=u-Math.round(u)+g*y+v*d,b=new Float64Array(p);if(r.translate(b,b,[m>.5?m-1:m,x>.5?x-1:x,0]),this.alignedProjMatrix=b,p=r.create(),r.scale(p,p,[this.width/2,-this.height/2,1]),r.translate(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=r.create(),r.scale(p,p,[1,-1,1]),r.translate(p,p,[-1,-1,0]),r.scale(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(p=r.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={}}},rr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new r.Point(0,0)),i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return r.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},rr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,n))},rr.prototype.getCameraQueryGeometry=function(n){var i=this.getCameraPoint();if(1===n.length)return[n[0],i];for(var a=i.x,o=i.y,s=i.x,l=i.y,c=0;c<n.length;c+=1){var u=n[c];a=Math.min(a,u.x),o=Math.min(o,u.y),s=Math.max(s,u.x),l=Math.max(l,u.y)}return[new r.Point(a,o),new r.Point(s,o),new r.Point(s,l),new r.Point(a,l),new r.Point(a,o)]},Object.defineProperties(rr.prototype,rn);var ri=function(n){var i,a,o,s;this._hashName=n&&encodeURIComponent(n),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),a=!1,o=null,s=function(){o=null,a&&(i(),o=setTimeout(s,300),a=!1)},function(){return a=!0,o||s(),o})};ri.prototype.addTo=function(n){return this._map=n,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ri.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ri.prototype.getHashString=function(n){var i=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,o=Math.pow(10,Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10)),s=Math.round(i.lng*o)/o,l=Math.round(i.lat*o)/o,c=this._map.getBearing(),u=this._map.getPitch(),f="";if(f+=n?"/"+s+"/"+l+"/"+a:a+"/"+l+"/"+s,(c||u)&&(f+="/"+Math.round(10*c)/10),u&&(f+="/"+Math.round(u)),this._hashName){var h=this._hashName,p=!1,d=r.window.location.hash.slice(1).split("&").map(function(r){var n=r.split("=")[0];return n===h?(p=!0,n+"="+f):r}).filter(function(r){return r});return p||d.push(h+"="+f),"#"+d.join("&")}return"#"+f},ri.prototype._getCurrentHash=function(){var n,i=this,a=r.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(r){return r.split("=")}).forEach(function(r){r[0]===i._hashName&&(n=r)}),(n&&n[1]||"").split("/")):a.split("/")},ri.prototype._onHashChange=function(){var r=this._getCurrentHash();if(r.length>=3&&!r.some(function(r){return isNaN(r)})){var n=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:n,pitch:+(r[4]||0)}),!0}return!1},ri.prototype._updateHashUnthrottled=function(){var n=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,n)}catch(r){}};var ra={linearity:.3,easing:r.bezier(0,0,.3,1)},ro=r.extend({deceleration:2500,maxSpeed:1400},ra),rs=r.extend({deceleration:20,maxSpeed:1400},ra),rl=r.extend({deceleration:1e3,maxSpeed:360},ra),rc=r.extend({deceleration:1e3,maxSpeed:90},ra),ru=function(r){this._map=r,this.clear()};function rf(r,n){(!r.duration||r.duration<n.duration)&&(r.duration=n.duration,r.easing=n.easing)}function rh(n,i,a){var o=a.maxSpeed,s=a.linearity,l=a.deceleration,c=r.clamp(n*s/(i/1e3),-o,o),u=Math.abs(c)/(l*s);return{easing:a.easing,duration:1e3*u,amount:u/2*c}}ru.prototype.clear=function(){this._inertiaBuffer=[]},ru.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:n})},ru.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,i=r.browser.now();n.length>0&&i-n[0].time>160;)n.shift()},ru.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},a=0,o=this._inertiaBuffer;a<o.length;a+=1){var s=o[a].settings;i.zoom+=s.zoomDelta||0,i.bearing+=s.bearingDelta||0,i.pitch+=s.pitchDelta||0,s.panDelta&&i.pan._add(s.panDelta),s.around&&(i.around=s.around),s.pinchAround&&(i.pinchAround=s.pinchAround)}var l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,c={};if(i.pan.mag()){var u=rh(i.pan.mag(),l,r.extend({},ro,n||{}));c.offset=i.pan.mult(u.amount/i.pan.mag()),c.center=this._map.transform.center,rf(c,u)}if(i.zoom){var f=rh(i.zoom,l,rs);c.zoom=this._map.transform.zoom+f.amount,rf(c,f)}if(i.bearing){var h=rh(i.bearing,l,rl);c.bearing=this._map.transform.bearing+r.clamp(h.amount,-179,179),rf(c,h)}if(i.pitch){var p=rh(i.pitch,l,rc);c.pitch=this._map.transform.pitch+p.amount,rf(c,p)}if(c.zoom||c.bearing){var d=void 0===i.pinchAround?i.around:i.pinchAround;c.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),r.extend(c,{noMoveStart:!0})}};var rp=function(n){function a(a,o,s,l){void 0===l&&(l={});var c=i.mousePos(o.getCanvasContainer(),s),u=o.unproject(c);n.call(this,a,r.extend({point:c,lngLat:u,originalEvent:s},l)),this._defaultPrevented=!1,this.target=o}n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,o),a}(r.Event),rd=function(n){function a(a,o,s){var l="touchend"===a?s.changedTouches:s.touches,c=i.touchPos(o.getCanvasContainer(),l),u=c.map(function(r){return o.unproject(r)}),f=c.reduce(function(r,n,i,a){return r.add(n.div(a.length))},new r.Point(0,0)),h=o.unproject(f);n.call(this,a,{points:c,point:f,lngLats:u,lngLat:h,originalEvent:s}),this._defaultPrevented=!1}n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,o),a}(r.Event),ry=function(r){function n(n,i,a){r.call(this,n,{originalEvent:a}),this._defaultPrevented=!1}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(r.Event),rg=function(r,n){this._map=r,this._clickTolerance=n.clickTolerance};rg.prototype.reset=function(){delete this._mousedownPos},rg.prototype.wheel=function(r){return this._firePreventable(new ry(r.type,this._map,r))},rg.prototype.mousedown=function(r,n){return this._mousedownPos=n,this._firePreventable(new rp(r.type,this._map,r))},rg.prototype.mouseup=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.click=function(r,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new rp(r.type,this._map,r))},rg.prototype.dblclick=function(r){return this._firePreventable(new rp(r.type,this._map,r))},rg.prototype.mouseover=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.mouseout=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.touchstart=function(r){return this._firePreventable(new rd(r.type,this._map,r))},rg.prototype.touchmove=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype.touchend=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype.touchcancel=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype._firePreventable=function(r){if(this._map.fire(r),r.defaultPrevented)return{}},rg.prototype.isEnabled=function(){return!0},rg.prototype.isActive=function(){return!1},rg.prototype.enable=function(){},rg.prototype.disable=function(){};var rv=function(r){this._map=r};rv.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},rv.prototype.mousemove=function(r){this._map.fire(new rp(r.type,this._map,r))},rv.prototype.mousedown=function(){this._delayContextMenu=!0},rv.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rp("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},rv.prototype.contextmenu=function(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new rp(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()},rv.prototype.isEnabled=function(){return!0},rv.prototype.isActive=function(){return!1},rv.prototype.enable=function(){},rv.prototype.disable=function(){};var rm=function(r,n){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=n.clickTolerance||1};function rx(r,n){for(var i={},a=0;a<r.length;a++)i[r[a].identifier]=n[a];return i}rm.prototype.isEnabled=function(){return!!this._enabled},rm.prototype.isActive=function(){return!!this._active},rm.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rm.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rm.prototype.mousedown=function(r,n){this.isEnabled()&&r.shiftKey&&0===r.button&&(i.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)},rm.prototype.mousemoveWindow=function(r,n){if(this._active&&!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var o=Math.min(a.x,n.x),s=Math.max(a.x,n.x),l=Math.min(a.y,n.y),c=Math.max(a.y,n.y);i.setTransform(this._box,"translate("+o+"px,"+l+"px)"),this._box.style.width=s-o+"px",this._box.style.height=c-l+"px"}},rm.prototype.mouseupWindow=function(n,a){var o=this;if(this._active&&0===n.button){var s=this._startPos;if(this.reset(),i.suppressClick(),s.x!==a.x||s.y!==a.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(r){return r.fitScreenCoordinates(s,a,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},rm.prototype.keydown=function(r){this._active&&27===r.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",r))},rm.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},rm.prototype._fireEvent=function(n,i){return this._map.fire(new r.Event(n,{originalEvent:i}))};var rb=function(r){this.reset(),this.numTouches=r.numTouches};rb.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rb.prototype.touchstart=function(n,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(n){for(var i=new r.Point(0,0),a=0;a<n.length;a+=1){var o=n[a];i._add(o)}return i.div(n.length)}(i),this.touches=rx(a,i)))},rb.prototype.touchmove=function(r,n,i){if(!this.aborted&&this.centroid){var a=rx(i,n);for(var o in this.touches){var s=this.touches[o],l=a[o];(!l||l.dist(s)>30)&&(this.aborted=!0)}}},rb.prototype.touchend=function(r,n,i){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var a=!this.aborted&&this.centroid;if(this.reset(),a)return a}};var r_=function(r){this.singleTap=new rb(r),this.numTaps=r.numTaps,this.reset()};r_.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},r_.prototype.touchstart=function(r,n,i){this.singleTap.touchstart(r,n,i)},r_.prototype.touchmove=function(r,n,i){this.singleTap.touchmove(r,n,i)},r_.prototype.touchend=function(r,n,i){var a=this.singleTap.touchend(r,n,i);if(a){var o=r.timeStamp-this.lastTime<500,s=!this.lastTap||30>this.lastTap.dist(a);if(o&&s||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}};var rw=function(){this._zoomIn=new r_({numTouches:1,numTaps:2}),this._zoomOut=new r_({numTouches:2,numTaps:1}),this.reset()};rw.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},rw.prototype.touchstart=function(r,n,i){this._zoomIn.touchstart(r,n,i),this._zoomOut.touchstart(r,n,i)},rw.prototype.touchmove=function(r,n,i){this._zoomIn.touchmove(r,n,i),this._zoomOut.touchmove(r,n,i)},rw.prototype.touchend=function(r,n,i){var a=this,o=this._zoomIn.touchend(r,n,i),s=this._zoomOut.touchend(r,n,i);return o?(this._active=!0,r.preventDefault(),setTimeout(function(){return a.reset()},0),{cameraAnimation:function(n){return n.easeTo({duration:300,zoom:n.getZoom()+1,around:n.unproject(o)},{originalEvent:r})}}):s?(this._active=!0,r.preventDefault(),setTimeout(function(){return a.reset()},0),{cameraAnimation:function(n){return n.easeTo({duration:300,zoom:n.getZoom()-1,around:n.unproject(s)},{originalEvent:r})}}):void 0},rw.prototype.touchcancel=function(){this.reset()},rw.prototype.enable=function(){this._enabled=!0},rw.prototype.disable=function(){this._enabled=!1,this.reset()},rw.prototype.isEnabled=function(){return this._enabled},rw.prototype.isActive=function(){return this._active};var rT={};rT[0]=1,rT[2]=2;var rA=function(r){this.reset(),this._clickTolerance=r.clickTolerance||1};rA.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rA.prototype._correctButton=function(r,n){return!1},rA.prototype._move=function(r,n){return{}},rA.prototype.mousedown=function(r,n){if(!this._lastPoint){var a=i.mouseButton(r);this._correctButton(r,a)&&(this._lastPoint=n,this._eventButton=a)}},rA.prototype.mousemoveWindow=function(r,n){var i,a=this._lastPoint;if(a){if(r.preventDefault(),i=rT[this._eventButton],void 0===r.buttons||(r.buttons&i)!==i)this.reset();else if(this._moved||!(n.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=n,this._move(a,n)}},rA.prototype.mouseupWindow=function(r){this._lastPoint&&i.mouseButton(r)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},rA.prototype.enable=function(){this._enabled=!0},rA.prototype.disable=function(){this._enabled=!1,this.reset()},rA.prototype.isEnabled=function(){return this._enabled},rA.prototype.isActive=function(){return this._active};var rk=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.mousedown=function(n,i){r.prototype.mousedown.call(this,n,i),this._lastPoint&&(this._active=!0)},n.prototype._correctButton=function(r,n){return 0===n&&!r.ctrlKey},n.prototype._move=function(r,n){return{around:n,panDelta:n.sub(r)}},n}(rA),rM=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._correctButton=function(r,n){return 0===n&&r.ctrlKey||2===n},n.prototype._move=function(r,n){var i=.8*(n.x-r.x);if(i)return this._active=!0,{bearingDelta:i}},n.prototype.contextmenu=function(r){r.preventDefault()},n}(rA),rS=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._correctButton=function(r,n){return 0===n&&r.ctrlKey||2===n},n.prototype._move=function(r,n){var i=-.5*(n.y-r.y);if(i)return this._active=!0,{pitchDelta:i}},n.prototype.contextmenu=function(r){r.preventDefault()},n}(rA),rE=function(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()};rE.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},rE.prototype.touchstart=function(r,n,i){return this._calculateTransform(r,n,i)},rE.prototype.touchmove=function(r,n,i){if(this._active&&!(i.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,n,i)},rE.prototype.touchend=function(r,n,i){this._calculateTransform(r,n,i),this._active&&i.length<this._minTouches&&this.reset()},rE.prototype.touchcancel=function(){this.reset()},rE.prototype._calculateTransform=function(n,i,a){a.length>0&&(this._active=!0);var o=rx(a,i),s=new r.Point(0,0),l=new r.Point(0,0),c=0;for(var u in o){var f=o[u],h=this._touches[u];h&&(s._add(f),l._add(f.sub(h)),c++,o[u]=f)}if(this._touches=o,!(c<this._minTouches)&&l.mag()){var p=l.div(c);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:s.div(c),panDelta:p}}},rE.prototype.enable=function(){this._enabled=!0},rE.prototype.disable=function(){this._enabled=!1,this.reset()},rE.prototype.isEnabled=function(){return this._enabled},rE.prototype.isActive=function(){return this._active};var rI=function(){this.reset()};function rL(r,n,i){for(var a=0;a<r.length;a++)if(r[a].identifier===i)return n[a]}function rC(r,n){return Math.log(r/n)/Math.LN2}rI.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},rI.prototype._start=function(r){},rI.prototype._move=function(r,n,i){return{}},rI.prototype.touchstart=function(r,n,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([n[0],n[1]]))},rI.prototype.touchmove=function(r,n,i){if(this._firstTwoTouches){r.preventDefault();var a=this._firstTwoTouches,o=a[0],s=a[1],l=rL(i,n,o),c=rL(i,n,s);if(l&&c){var u=this._aroundCenter?null:l.add(c).div(2);return this._move([l,c],u,r)}}},rI.prototype.touchend=function(r,n,a){if(this._firstTwoTouches){var o=this._firstTwoTouches,s=o[0],l=o[1],c=rL(a,n,s),u=rL(a,n,l);c&&u||(this._active&&i.suppressClick(),this.reset())}},rI.prototype.touchcancel=function(){this.reset()},rI.prototype.enable=function(r){this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around},rI.prototype.disable=function(){this._enabled=!1,this.reset()},rI.prototype.isEnabled=function(){return this._enabled},rI.prototype.isActive=function(){return this._active};var rO=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),delete this._distance,delete this._startDistance},n.prototype._start=function(r){this._startDistance=this._distance=r[0].dist(r[1])},n.prototype._move=function(r,n){var i=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(.1>Math.abs(rC(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:rC(this._distance,i),pinchAround:n}},n}(rI);function rD(r,n){return 180*r.angleWith(n)/Math.PI}var rP=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},n.prototype._start=function(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])},n.prototype._move=function(r,n){var i=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rD(this._vector,i),pinchAround:n}},n.prototype._isBelowThreshold=function(r){this._minDiameter=Math.min(this._minDiameter,r.mag());var n=25/(Math.PI*this._minDiameter)*360;return Math.abs(rD(r,this._startVector))<n},n}(rI);function rB(r){return Math.abs(r.y)>Math.abs(r.x)}var rR=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},n.prototype._start=function(r){this._lastPoints=r,rB(r[0].sub(r[1]))&&(this._valid=!1)},n.prototype._move=function(r,n,i){var a=r[0].sub(this._lastPoints[0]),o=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(a,o,i.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:-((a.y+o.y)/2*.5)}},n.prototype.gestureBeginsVertically=function(r,n,i){if(void 0!==this._valid)return this._valid;var a=r.mag()>=2,o=n.mag()>=2;if(a||o){if(!a||!o)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var s=r.y>0==n.y>0;return rB(r)&&rB(n)&&s}},n}(rI),rz=function(){this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1};function rF(r){return r*(2-r)}rz.prototype.reset=function(){this._active=!1},rz.prototype.keydown=function(r){var n=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var i=0,a=0,o=0,s=0,l=0;switch(r.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:r.shiftKey?a=-1:(r.preventDefault(),s=-1);break;case 39:r.shiftKey?a=1:(r.preventDefault(),s=1);break;case 38:r.shiftKey?o=1:(r.preventDefault(),l=-1);break;case 40:r.shiftKey?o=-1:(r.preventDefault(),l=1);break;default:return}return this._rotationDisabled&&(a=0,o=0),{cameraAnimation:function(c){var u=c.getZoom();c.easeTo({duration:300,easeId:"keyboardHandler",easing:rF,zoom:i?Math.round(u)+i*(r.shiftKey?2:1):u,bearing:c.getBearing()+a*n._bearingStep,pitch:c.getPitch()+o*n._pitchStep,offset:[-s*n._panStep,-l*n._panStep],center:c.getCenter()},{originalEvent:r})}}}},rz.prototype.enable=function(){this._enabled=!0},rz.prototype.disable=function(){this._enabled=!1,this.reset()},rz.prototype.isEnabled=function(){return this._enabled},rz.prototype.isActive=function(){return this._active},rz.prototype.disableRotation=function(){this._rotationDisabled=!0},rz.prototype.enableRotation=function(){this._rotationDisabled=!1};var rN=function(n,i){this._map=n,this._el=n.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)};rN.prototype.setZoomRate=function(r){this._defaultZoomRate=r},rN.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},rN.prototype.isEnabled=function(){return!!this._enabled},rN.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},rN.prototype.isZooming=function(){return!!this._zooming},rN.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&"center"===r.around)},rN.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rN.prototype.wheel=function(n){if(this.isEnabled()){var i=n.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=r.browser.now(),o=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&4>Math.abs(i)?this._type="trackpad":o>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=200>Math.abs(o*i)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),n.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=n,this._delta-=i,this._active||this._start(n)),n.preventDefault()}},rN.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)},rN.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var a=i.mousePos(this._el,n);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},rN.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var a="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&0!==o&&(o=1/o);var s="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(s*o))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var l,c="number"==typeof this._targetZoom?this._targetZoom:i.zoom,u=this._startZoom,f=this._easing,h=!1;if("wheel"===this._type&&u&&f){var p=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),d=f(p);l=r.number(u,c,d),p<1?this._frameId||(this._frameId=!0):h=!0}else l=c,h=!0;return this._active=!0,h&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!h,zoomDelta:l-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},rN.prototype._smoothOutEasing=function(n){var i=r.ease;if(this._prevEase){var a=this._prevEase,o=(r.browser.now()-a.start)/a.duration,s=a.easing(o+.01)-a.easing(o),l=.27/Math.sqrt(s*s+1e-4)*.01,c=Math.sqrt(.0729-l*l);i=r.bezier(l,c,.25,1)}return this._prevEase={start:r.browser.now(),duration:n,easing:i},i},rN.prototype.reset=function(){this._active=!1};var rU=function(r,n){this._clickZoom=r,this._tapZoom=n};rU.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},rU.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},rU.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},rU.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var rj=function(){this.reset()};rj.prototype.reset=function(){this._active=!1},rj.prototype.dblclick=function(r,n){return r.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(r.shiftKey?-1:1),around:i.unproject(n)},{originalEvent:r})}}},rj.prototype.enable=function(){this._enabled=!0},rj.prototype.disable=function(){this._enabled=!1,this.reset()},rj.prototype.isEnabled=function(){return this._enabled},rj.prototype.isActive=function(){return this._active};var rV=function(){this._tap=new r_({numTouches:1,numTaps:1}),this.reset()};rV.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rV.prototype.touchstart=function(r,n,i){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=n[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(r,n,i))},rV.prototype.touchmove=function(r,n,i){if(this._tapTime){if(this._swipePoint&&i[0].identifier===this._swipeTouch){var a=n[0],o=a.y-this._swipePoint.y;return this._swipePoint=a,r.preventDefault(),this._active=!0,{zoomDelta:o/128}}}else this._tap.touchmove(r,n,i)},rV.prototype.touchend=function(r,n,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(r,n,i)&&(this._tapTime=r.timeStamp)},rV.prototype.touchcancel=function(){this.reset()},rV.prototype.enable=function(){this._enabled=!0},rV.prototype.disable=function(){this._enabled=!1,this.reset()},rV.prototype.isEnabled=function(){return this._enabled},rV.prototype.isActive=function(){return this._active};var rH=function(r,n,i){this._el=r,this._mousePan=n,this._touchPan=i};rH.prototype.enable=function(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},rH.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},rH.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},rH.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var rq=function(r,n,i){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=n,this._mousePitch=i};rq.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},rq.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},rq.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},rq.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var rG=function(r,n,i,a){this._el=r,this._touchZoom=n,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0};rG.prototype.enable=function(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},rG.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},rG.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},rG.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},rG.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},rG.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rW=function(r){return r.zoom||r.drag||r.pitch||r.rotate},rY=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(r.Event);function rZ(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}var rX=function(n,a){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ru(n),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),r.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[r.window,"blur",void 0]];for(var s=0,l=this._listeners;s<l.length;s+=1){var c=l[s],u=c[0],f=c[1],h=c[2];i.addEventListener(u,f,u===r.window.document?this.handleWindowEvent:this.handleEvent,h)}};rX.prototype.destroy=function(){for(var n=0,a=this._listeners;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],c=o[2];i.removeEventListener(s,l,s===r.window.document?this.handleWindowEvent:this.handleEvent,c)}},rX.prototype._addDefaultHandlers=function(r){var n=this._map,i=n.getCanvasContainer();this._add("mapEvent",new rg(n,r));var a=n.boxZoom=new rm(n,r);this._add("boxZoom",a);var o=new rw,s=new rj;n.doubleClickZoom=new rU(s,o),this._add("tapZoom",o),this._add("clickZoom",s);var l=new rV;this._add("tapDragZoom",l);var c=n.touchPitch=new rR;this._add("touchPitch",c);var u=new rM(r),f=new rS(r);n.dragRotate=new rq(r,u,f),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]);var h=new rk(r),p=new rE(r);n.dragPan=new rH(i,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]);var d=new rP,y=new rO;n.touchZoomRotate=new rG(i,y,d,l),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",y,["touchPan","touchRotate"]);var g=n.scrollZoom=new rN(n,this);this._add("scrollZoom",g,["mousePan"]);var v=n.keyboard=new rz;this._add("keyboard",v),this._add("blockableMapEvent",new rv(n));for(var m=0,x=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<x.length;m+=1){var b=x[m];r.interactive&&r[b]&&n[b].enable(r[b])}},rX.prototype._add=function(r,n,i){this._handlers.push({handlerName:r,handler:n,allowed:i}),this._handlersById[r]=n},rX.prototype.stop=function(r){if(!this._updatingCamera){for(var n=0,i=this._handlers;n<i.length;n+=1)i[n].handler.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}},rX.prototype.isActive=function(){for(var r=0,n=this._handlers;r<n.length;r+=1)if(n[r].handler.isActive())return!0;return!1},rX.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},rX.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},rX.prototype.isMoving=function(){return!!rW(this._eventsInProgress)||this.isZooming()},rX.prototype._blockedByActive=function(r,n,i){for(var a in r)if(a!==i&&(!n||0>n.indexOf(a)))return!0;return!1},rX.prototype.handleWindowEvent=function(r){this.handleEvent(r,r.type+"Window")},rX.prototype._getMapTouches=function(r){for(var n=[],i=0;i<r.length;i+=1){var a=r[i],o=a.target;this._el.contains(o)&&n.push(a)}return n},rX.prototype.handleEvent=function(r,n){if("blur"!==r.type){this._updatingCamera=!0;for(var a="renderFrame"===r.type?void 0:r,o={needsRenderFrame:!1},s={},l={},c=r.touches?this._getMapTouches(r.touches):void 0,u=c?i.touchPos(this._el,c):i.mousePos(this._el,r),f=0,h=this._handlers;f<h.length;f+=1){var p=h[f],d=p.handlerName,y=p.handler,g=p.allowed;if(y.isEnabled()){var v=void 0;this._blockedByActive(l,g,d)?y.reset():y[n||r.type]&&(v=y[n||r.type](r,u,c),this.mergeHandlerResult(o,s,v,d,a),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||y.isActive())&&(l[d]=y)}}var m={};for(var x in this._previousActiveHandlers)l[x]||(m[x]=a);this._previousActiveHandlers=l,(Object.keys(m).length||rZ(o))&&(this._changes.push([o,s,m]),this._triggerRenderFrame()),(Object.keys(l).length||rZ(o))&&this._map._stop(!0),this._updatingCamera=!1;var b=o.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map))}else this.stop(!0)},rX.prototype.mergeHandlerResult=function(n,i,a,o,s){if(a){r.extend(n,a);var l={handlerName:o,originalEvent:a.originalEvent||s};void 0!==a.zoomDelta&&(i.zoom=l),void 0!==a.panDelta&&(i.drag=l),void 0!==a.pitchDelta&&(i.pitch=l),void 0!==a.bearingDelta&&(i.rotate=l)}},rX.prototype._applyChanges=function(){for(var n={},i={},a={},o=0,s=this._changes;o<s.length;o+=1){var l=s[o],c=l[0],u=l[1],f=l[2];c.panDelta&&(n.panDelta=(n.panDelta||new r.Point(0,0))._add(c.panDelta)),c.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+c.zoomDelta),c.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+c.bearingDelta),c.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+c.pitchDelta),void 0!==c.around&&(n.around=c.around),void 0!==c.pinchAround&&(n.pinchAround=c.pinchAround),c.noInertia&&(n.noInertia=c.noInertia),r.extend(i,u),r.extend(a,f)}this._updateMapTransform(n,i,a),this._changes=[]},rX.prototype._updateMapTransform=function(r,n,i){var a=this._map,o=a.transform;if(!rZ(r))return this._fireEvents(n,i,!0);var s=r.panDelta,l=r.zoomDelta,c=r.bearingDelta,u=r.pitchDelta,f=r.around,h=r.pinchAround;void 0!==h&&(f=h),a._stop(!0),f=f||a.transform.centerPoint;var p=o.pointLocation(s?f.sub(s):f);c&&(o.bearing+=c),u&&(o.pitch+=u),l&&(o.zoom+=l),o.setLocationAtPoint(p,f),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(n,i,!0)},rX.prototype._fireEvents=function(n,i,a){var o=this,s=rW(this._eventsInProgress),l=rW(n),c={};for(var u in n){var f=n[u].originalEvent;this._eventsInProgress[u]||(c[u+"start"]=f),this._eventsInProgress[u]=n[u]}for(var h in!s&&l&&this._fireEvent("movestart",l.originalEvent),c)this._fireEvent(h,c[h]);for(var p in l&&this._fireEvent("move",l.originalEvent),n){var d=n[p].originalEvent;this._fireEvent(p,d)}var y,g={};for(var v in this._eventsInProgress){var m=this._eventsInProgress[v],x=m.handlerName,b=m.originalEvent;this._handlersById[x].isActive()||(delete this._eventsInProgress[v],y=i[x]||b,g[v+"end"]=y)}for(var _ in g)this._fireEvent(_,g[_]);var w=rW(this._eventsInProgress);if(a&&(s||l)&&!w){this._updatingCamera=!0;var T=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),A=function(r){return 0!==r&&-o._bearingSnap<r&&r<o._bearingSnap};T?(A(T.bearing||this._map.getBearing())&&(T.bearing=0),this._map.easeTo(T,{originalEvent:y})):(this._map.fire(new r.Event("moveend",{originalEvent:y})),A(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},rX.prototype._fireEvent=function(n,i){this._map.fire(new r.Event(n,i?{originalEvent:i}:{}))},rX.prototype._requestFrame=function(){var r=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(n){delete r._frameId,r.handleEvent(new rY("renderFrame",{timeStamp:n})),r._applyChanges()})},rX.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var rK=function(n){function i(i,a){n.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=a.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(r,n){return this.jumpTo({center:r},n)},i.prototype.panBy=function(n,i,a){return n=r.Point.convert(n).mult(-1),this.panTo(this.transform.center,r.extend({offset:n},i),a)},i.prototype.panTo=function(n,i,a){return this.easeTo(r.extend({center:n},i),a)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(r,n){return this.jumpTo({zoom:r},n),this},i.prototype.zoomTo=function(n,i,a){return this.easeTo(r.extend({zoom:n},i),a)},i.prototype.zoomIn=function(r,n){return this.zoomTo(this.getZoom()+1,r,n),this},i.prototype.zoomOut=function(r,n){return this.zoomTo(this.getZoom()-1,r,n),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(r,n){return this.jumpTo({bearing:r},n),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(r,n){return this.jumpTo({padding:r},n),this},i.prototype.rotateTo=function(n,i,a){return this.easeTo(r.extend({bearing:n},i),a)},i.prototype.resetNorth=function(n,i){return this.rotateTo(0,r.extend({duration:1e3},n),i),this},i.prototype.resetNorthPitch=function(n,i){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},n),i),this},i.prototype.snapToNorth=function(r,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,n):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(r,n){return this.jumpTo({pitch:r},n),this},i.prototype.cameraForBounds=function(n,i){n=r.LngLatBounds.convert(n);var a=i&&i.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),a,i)},i.prototype._cameraForBoxAndBearing=function(n,i,a,o){var s={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=r.extend({padding:s,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){var l=o.padding;o.padding={top:l,bottom:l,right:l,left:l}}o.padding=r.extend(s,o.padding);var c=this.transform,u=c.padding,f=c.project(r.LngLat.convert(n)),h=c.project(r.LngLat.convert(i)),p=f.rotate(-a*Math.PI/180),d=h.rotate(-a*Math.PI/180),y=new r.Point(Math.max(p.x,d.x),Math.max(p.y,d.y)),g=new r.Point(Math.min(p.x,d.x),Math.min(p.y,d.y)),v=y.sub(g),m=(c.width-(u.left+u.right+o.padding.left+o.padding.right))/v.x,x=(c.height-(u.top+u.bottom+o.padding.top+o.padding.bottom))/v.y;if(!(x<0||m<0)){var b=Math.min(c.scaleZoom(c.scale*Math.min(m,x)),o.maxZoom),_="number"==typeof o.offset.x?new r.Point(o.offset.x,o.offset.y):r.Point.convert(o.offset),w=(o.padding.left-o.padding.right)/2,T=(o.padding.top-o.padding.bottom)/2,A=new r.Point(w,T).rotate(a*Math.PI/180),k=_.add(A).mult(c.scale/c.zoomScale(b));return{center:c.unproject(f.add(h).div(2).sub(k)),zoom:b,bearing:a}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(r,n,i){return this._fitInternal(this.cameraForBounds(r,n),n,i)},i.prototype.fitScreenCoordinates=function(n,i,a,o,s){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(n)),this.transform.pointLocation(r.Point.convert(i)),a,o),o,s)},i.prototype._fitInternal=function(n,i,a){return n?(delete(i=r.extend(n,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this},i.prototype.jumpTo=function(n,i){this.stop();var a=this.transform,o=!1,s=!1,l=!1;return"zoom"in n&&a.zoom!==+n.zoom&&(o=!0,a.zoom=+n.zoom),void 0!==n.center&&(a.center=r.LngLat.convert(n.center)),"bearing"in n&&a.bearing!==+n.bearing&&(s=!0,a.bearing=+n.bearing),"pitch"in n&&a.pitch!==+n.pitch&&(l=!0,a.pitch=+n.pitch),null==n.padding||a.isPaddingEqual(n.padding)||(a.padding=n.padding),this.fire(new r.Event("movestart",i)).fire(new r.Event("move",i)),o&&this.fire(new r.Event("zoomstart",i)).fire(new r.Event("zoom",i)).fire(new r.Event("zoomend",i)),s&&this.fire(new r.Event("rotatestart",i)).fire(new r.Event("rotate",i)).fire(new r.Event("rotateend",i)),l&&this.fire(new r.Event("pitchstart",i)).fire(new r.Event("pitch",i)).fire(new r.Event("pitchend",i)),this.fire(new r.Event("moveend",i))},i.prototype.easeTo=function(n,i){var a=this;this._stop(!1,n.easeId),(!1===(n=r.extend({offset:[0,0],duration:500,easing:r.ease},n)).animate||!n.essential&&r.browser.prefersReducedMotion)&&(n.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),u=this.getPadding(),f="zoom"in n?+n.zoom:s,h="bearing"in n?this._normalizeBearing(n.bearing,l):l,p="pitch"in n?+n.pitch:c,d="padding"in n?n.padding:o.padding,y=r.Point.convert(n.offset),g=o.centerPoint.add(y),v=o.pointLocation(g),m=r.LngLat.convert(n.center||v);this._normalizeCenter(m);var x,b,_=o.project(v),w=o.project(m).sub(_),T=o.zoomScale(f-s);n.around&&(x=r.LngLat.convert(n.around),b=o.locationPoint(x));var A={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||f!==s,this._rotating=this._rotating||l!==h,this._pitching=this._pitching||p!==c,this._padding=!o.isPaddingEqual(d),this._easeId=n.easeId,this._prepareEase(i,n.noMoveStart,A),this._ease(function(n){if(a._zooming&&(o.zoom=r.number(s,f,n)),a._rotating&&(o.bearing=r.number(l,h,n)),a._pitching&&(o.pitch=r.number(c,p,n)),a._padding&&(o.interpolatePadding(u,d,n),g=o.centerPoint.add(y)),x)o.setLocationAtPoint(x,b);else{var v=o.zoomScale(o.zoom-s),m=Math.pow(f>s?Math.min(2,T):Math.max(.5,T),1-n),A=o.unproject(_.add(w.mult(n*m)).mult(v));o.setLocationAtPoint(o.renderWorldCopies?A.wrap():A,g)}a._fireMoveEvents(i)},function(r){a._afterEase(i,r)},n),this},i.prototype._prepareEase=function(n,i,a){void 0===a&&(a={}),this._moving=!0,i||a.moving||this.fire(new r.Event("movestart",n)),this._zooming&&!a.zooming&&this.fire(new r.Event("zoomstart",n)),this._rotating&&!a.rotating&&this.fire(new r.Event("rotatestart",n)),this._pitching&&!a.pitching&&this.fire(new r.Event("pitchstart",n))},i.prototype._fireMoveEvents=function(n){this.fire(new r.Event("move",n)),this._zooming&&this.fire(new r.Event("zoom",n)),this._rotating&&this.fire(new r.Event("rotate",n)),this._pitching&&this.fire(new r.Event("pitch",n))},i.prototype._afterEase=function(n,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var a=this._zooming,o=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new r.Event("zoomend",n)),o&&this.fire(new r.Event("rotateend",n)),s&&this.fire(new r.Event("pitchend",n)),this.fire(new r.Event("moveend",n))}},i.prototype.flyTo=function(n,i){var a=this;if(!n.essential&&r.browser.prefersReducedMotion){var o=r.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i)}this.stop(),n=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},n);var s=this.transform,l=this.getZoom(),c=this.getBearing(),u=this.getPitch(),f=this.getPadding(),h="zoom"in n?r.clamp(+n.zoom,s.minZoom,s.maxZoom):l,p="bearing"in n?this._normalizeBearing(n.bearing,c):c,d="pitch"in n?+n.pitch:u,y="padding"in n?n.padding:s.padding,g=s.zoomScale(h-l),v=r.Point.convert(n.offset),m=s.centerPoint.add(v),x=s.pointLocation(m),b=r.LngLat.convert(n.center||x);this._normalizeCenter(b);var _=s.project(x),w=s.project(b).sub(_),T=n.curve,A=Math.max(s.width,s.height),k=A/g,M=w.mag();if("minZoom"in n){var S=r.clamp(Math.min(n.minZoom,l,h),s.minZoom,s.maxZoom);T=Math.sqrt(A/s.zoomScale(S-l)/M*2)}var E=T*T;function I(r){var n=(k*k-A*A+(r?-1:1)*E*E*M*M)/(2*(r?k:A)*E*M);return Math.log(Math.sqrt(n*n+1)-n)}function L(r){return(Math.exp(r)-Math.exp(-r))/2}function C(r){return(Math.exp(r)+Math.exp(-r))/2}var O=I(0),D=function(r){return C(O)/C(O+T*r)},P=function(r){var n;return A*((C(O)*(L(n=O+T*r)/C(n))-L(O))/E)/M},B=(I(1)-O)/T;if(1e-6>Math.abs(M)||!isFinite(B)){if(1e-6>Math.abs(A-k))return this.easeTo(n,i);var R=k<A?-1:1;B=Math.abs(Math.log(k/A))/T,P=function(){return 0},D=function(r){return Math.exp(R*T*r)}}if("duration"in n)n.duration=+n.duration;else{var z="screenSpeed"in n?+n.screenSpeed/T:+n.speed;n.duration=1e3*B/z}return n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=c!==p,this._pitching=d!==u,this._padding=!s.isPaddingEqual(y),this._prepareEase(i,!1),this._ease(function(n){var o=n*B,g=1/D(o);s.zoom=1===n?h:l+s.scaleZoom(g),a._rotating&&(s.bearing=r.number(c,p,n)),a._pitching&&(s.pitch=r.number(u,d,n)),a._padding&&(s.interpolatePadding(f,y,n),m=s.centerPoint.add(v));var x=1===n?b:s.unproject(_.add(w.mult(P(o))).mult(g));s.setLocationAtPoint(s.renderWorldCopies?x.wrap():x,m),a._fireMoveEvents(i)},function(){return a._afterEase(i)},n),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(r,n){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,n)}if(!r){var a=this.handlers;a&&a.stop(!1)}return this},i.prototype._ease=function(n,i,a){!1===a.animate||0===a.duration?(n(1),i()):(this._easeStart=r.browser.now(),this._easeOptions=a,this._onEaseFrame=n,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var n=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(n,i){var a=Math.abs((n=r.wrap(n,-180,180))-i);return Math.abs(n-360-i)<a&&(n-=360),Math.abs(n+360-i)<a&&(n+=360),n},i.prototype._normalizeCenter=function(r){var n=this.transform;if(n.renderWorldCopies&&!n.lngRange){var i=r.lng-n.center.lng;r.lng+=i>180?-360:i<-180?360:0}},i}(r.Evented),rJ=function(n){void 0===n&&(n={}),this.options=n,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rJ.prototype.getDefaultPosition=function(){return"bottom-right"},rJ.prototype.onAdd=function(r){var n=this.options&&this.options.compact;return this._map=r,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),n&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===n&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rJ.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rJ.prototype._setElementTitle=function(r,n){var i=this._map._getUIString("AttributionControl."+n);r.title=i,r.setAttribute("aria-label",i)},rJ.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rJ.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(n){var a=i.reduce(function(r,n,a){return n.value&&(r+=n.key+"="+n.value+(a<i.length-1?"&":"")),r},"?");n.href=r.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},rJ.prototype._updateData=function(r){r&&("metadata"===r.sourceDataType||"visibility"===r.sourceDataType||"style"===r.dataType)&&(this._updateAttributions(),this._updateEditLink())},rJ.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(r){return"string"!=typeof r?"":r})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var n=this._map.style.stylesheet;this.styleOwner=n.owner,this.styleId=n.id}var i=this._map.style.sourceCaches;for(var a in i){var o=i[a];if(o.used){var s=o.getSource();s.attribution&&0>r.indexOf(s.attribution)&&r.push(s.attribution)}}r.sort(function(r,n){return r.length-n.length});var l=(r=r.filter(function(n,i){for(var a=i+1;a<r.length;a++)if(r[a].indexOf(n)>=0)return!1;return!0})).join(" | ");l!==this._attribHTML&&(this._attribHTML=l,r.length?(this._innerContainer.innerHTML=l,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rJ.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var r$=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};r$.prototype.onAdd=function(r){this._map=r,this._container=i.create("div","mapboxgl-ctrl");var n=i.create("a","mapboxgl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://www.mapbox.com/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},r$.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},r$.prototype.getDefaultPosition=function(){return"bottom-left"},r$.prototype._updateLogo=function(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},r$.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var n in r)if(r[n].getSource().mapbox_logo)return!0;return!1}},r$.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var n=r[0];this._map.getCanvasContainer().offsetWidth<250?n.classList.add("mapboxgl-compact"):n.classList.remove("mapboxgl-compact")}};var rQ=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};rQ.prototype.add=function(r){var n=++this._id;return this._queue.push({callback:r,id:n,cancelled:!1}),n},rQ.prototype.remove=function(r){for(var n=this._currentlyRunning,i=0,a=n?this._queue.concat(n):this._queue;i<a.length;i+=1){var o=a[i];if(o.id===r)return void(o.cancelled=!0)}},rQ.prototype.run=function(r){void 0===r&&(r=0);var n=this._currentlyRunning=this._queue;this._queue=[];for(var i=0;i<n.length;i+=1){var a=n[i];if(!a.cancelled&&(a.callback(r),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},rQ.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var r0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},r1=r.window.HTMLImageElement,r2=r.window.HTMLElement,r3=r.window.ImageBitmap,r4={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},r6=function(a){function o(n){var i=this;if(null!=(n=r.extend({},r4,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>60)throw Error("maxPitch must be less than or equal to 60");var o=new rr(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(a.call(this,o,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new rQ,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},r0,n.locale),this._clickTolerance=n.clickTolerance,this._requestManager=new r.RequestManager(n.transformRequest,n.accessToken),"string"==typeof n.container){if(this._container=r.window.document.getElementById(n.container),!this._container)throw Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof r2))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("moveend",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==r.window&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new rX(this,n);var s="string"==typeof n.hash&&n.hash||void 0;this._hash=n.hash&&new ri(s).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,r.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new rJ({customAttribution:n.customAttribution})),this.addControl(new r$,n.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(n){i._update("style"===n.dataType),i.fire(new r.Event(n.dataType+"data",n))}),this.on("dataloading",function(n){i.fire(new r.Event(n.dataType+"dataloading",n))})}a&&(o.__proto__=a),o.prototype=Object.create(a&&a.prototype),o.prototype.constructor=o;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(n,i){if(void 0===i&&(i=n.getDefaultPosition?n.getDefaultPosition():"top-right"),!n||!n.onAdd)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var a=n.onAdd(this);this._controls.push(n);var o=this._controlPositions[i];return -1!==i.indexOf("bottom")?o.insertBefore(a,o.firstChild):o.appendChild(a),this},o.prototype.removeControl=function(n){if(!n||!n.onRemove)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(n);return i>-1&&this._controls.splice(i,1),n.onRemove(this),this},o.prototype.hasControl=function(r){return this._controls.indexOf(r)>-1},o.prototype.resize=function(n){var i=this._containerDimensions(),a=i[0],o=i[1];this._resizeCanvas(a,o),this.transform.resize(a,o),this.painter.resize(a,o);var s=!this._moving;return s&&(this.stop(),this.fire(new r.Event("movestart",n)).fire(new r.Event("move",n))),this.fire(new r.Event("resize",n)),s&&this.fire(new r.Event("moveend",n)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(n){return this.transform.setMaxBounds(r.LngLatBounds.convert(n)),this._update()},o.prototype.setMinZoom=function(r){if((r=null==r?-2:r)>=-2&&r<=this.transform.maxZoom)return this.transform.minZoom=r,this._update(),this.getZoom()<r&&this.setZoom(r),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(r){if((r=null==r?22:r)>=this.transform.minZoom)return this.transform.maxZoom=r,this._update(),this.getZoom()>r&&this.setZoom(r),this;throw Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(r){if((r=null==r?0:r)<0)throw Error("minPitch must be greater than or equal to 0");if(r>=0&&r<=this.transform.maxPitch)return this.transform.minPitch=r,this._update(),this.getPitch()<r&&this.setPitch(r),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(r){if((r=null==r?60:r)>60)throw Error("maxPitch must be less than or equal to 60");if(r>=this.transform.minPitch)return this.transform.maxPitch=r,this._update(),this.getPitch()>r&&this.setPitch(r),this;throw Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(r){return this.transform.renderWorldCopies=r,this._update()},o.prototype.project=function(n){return this.transform.locationPoint(r.LngLat.convert(n))},o.prototype.unproject=function(n){return this.transform.pointLocation(r.Point.convert(n))},o.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},o.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},o.prototype._createDelegatedListener=function(r,n,i){var a,o=this;if("mouseenter"===r||"mouseover"===r){var s=!1;return{layer:n,listener:i,delegates:{mousemove:function(a){var l=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];l.length?s||(s=!0,i.call(o,new rp(r,o,a.originalEvent,{features:l}))):s=!1},mouseout:function(){s=!1}}}}if("mouseleave"===r||"mouseout"===r){var l=!1;return{layer:n,listener:i,delegates:{mousemove:function(a){(o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[]).length?l=!0:l&&(l=!1,i.call(o,new rp(r,o,a.originalEvent)))},mouseout:function(n){l&&(l=!1,i.call(o,new rp(r,o,n.originalEvent)))}}}}return{layer:n,listener:i,delegates:((a={})[r]=function(r){var a=o.getLayer(n)?o.queryRenderedFeatures(r.point,{layers:[n]}):[];a.length&&(r.features=a,i.call(o,r),delete r.features)},a)}},o.prototype.on=function(r,n,i){if(void 0===i)return a.prototype.on.call(this,r,n);var o=this._createDelegatedListener(r,n,i);for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[r]=this._delegatedListeners[r]||[],this._delegatedListeners[r].push(o),o.delegates)this.on(s,o.delegates[s]);return this},o.prototype.once=function(r,n,i){if(void 0===i)return a.prototype.once.call(this,r,n);var o=this._createDelegatedListener(r,n,i);for(var s in o.delegates)this.once(s,o.delegates[s]);return this},o.prototype.off=function(r,n,i){var o=this;return void 0===i?a.prototype.off.call(this,r,n):(this._delegatedListeners&&this._delegatedListeners[r]&&function(a){for(var s=a[r],l=0;l<s.length;l++){var c=s[l];if(c.layer===n&&c.listener===i){for(var u in c.delegates)o.off(u,c.delegates[u]);return s.splice(l,1),o}}}(this._delegatedListeners),this)},o.prototype.queryRenderedFeatures=function(n,i){if(!this.style)return[];if(void 0!==i||void 0===n||n instanceof r.Point||Array.isArray(n)||(i=n,n=void 0),i=i||{},(n=n||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||"number"==typeof n[0])a=[r.Point.convert(n)];else{var a,o=r.Point.convert(n[0]),s=r.Point.convert(n[1]);a=[o,new r.Point(s.x,o.y),s,new r.Point(o.x,s.y),o]}return this.style.queryRenderedFeatures(a,i,this.transform)},o.prototype.querySourceFeatures=function(r,n){return this.style.querySourceFeatures(r,n)},o.prototype.setStyle=function(n,i){return!1!==(i=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&n?(this._diffStyle(n,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(n,i))},o.prototype._getUIString=function(r){var n=this._locale[r];if(null==n)throw Error("Missing UI string '"+r+"'");return n},o.prototype._updateStyle=function(r,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),r?(this.style=new ev(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof r?this.style.loadURL(r):this.style.loadJSON(r)):delete this.style,this},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ev(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},o.prototype._diffStyle=function(n,i){var a=this;if("string"==typeof n){var o=this._requestManager.normalizeStyleURL(n),s=this._requestManager.transformRequest(o,r.ResourceType.Style);r.getJSON(s,function(n,o){n?a.fire(new r.ErrorEvent(n)):o&&a._updateDiff(o,i)})}else"object"==typeof n&&this._updateDiff(n,i)},o.prototype._updateDiff=function(n,i){try{this.style.setState(n)&&this._update(!0)}catch(a){r.warnOnce("Unable to perform style diff: "+(a.message||a.error||a)+".  Rebuilding the style from scratch."),this._updateStyle(n,i)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(r,n){return this._lazyInitEmptyStyle(),this.style.addSource(r,n),this._update(!0)},o.prototype.isSourceLoaded=function(n){var i=this.style&&this.style.sourceCaches[n];if(void 0!==i)return i.loaded();this.fire(new r.ErrorEvent(Error("There is no source with ID '"+n+"'")))},o.prototype.areTilesLoaded=function(){var r=this.style&&this.style.sourceCaches;for(var n in r){var i=r[n]._tiles;for(var a in i){var o=i[a];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},o.prototype.addSourceType=function(r,n,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(r,n,i)},o.prototype.removeSource=function(r){return this.style.removeSource(r),this._update(!0)},o.prototype.getSource=function(r){return this.style.getSource(r)},o.prototype.addImage=function(n,i,a){void 0===a&&(a={});var o=a.pixelRatio;void 0===o&&(o=1);var s=a.sdf;void 0===s&&(s=!1);var l=a.stretchX,c=a.stretchY,u=a.content;if(this._lazyInitEmptyStyle(),i instanceof r1||r3&&i instanceof r3){var f=r.browser.getImageData(i),h=f.width,p=f.height,d=f.data;this.style.addImage(n,{data:new r.RGBAImage({width:h,height:p},d),pixelRatio:o,stretchX:l,stretchY:c,content:u,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new r.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var y=i.width,g=i.height,v=i.data;this.style.addImage(n,{data:new r.RGBAImage({width:y,height:g},new Uint8Array(v)),pixelRatio:o,stretchX:l,stretchY:c,content:u,sdf:s,version:0,userImage:i}),i.onAdd&&i.onAdd(this,n)}},o.prototype.updateImage=function(n,i){var a=this.style.getImage(n);if(!a)return this.fire(new r.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var o=i instanceof r1||r3&&i instanceof r3?r.browser.getImageData(i):i,s=o.width,l=o.height,c=o.data;return void 0===s||void 0===l?this.fire(new r.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):s!==a.data.width||l!==a.data.height?this.fire(new r.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):void(a.data.replace(c,!(i instanceof r1||r3&&i instanceof r3)),this.style.updateImage(n,a))},o.prototype.hasImage=function(n){return n?!!this.style.getImage(n):(this.fire(new r.ErrorEvent(Error("Missing required image id"))),!1)},o.prototype.removeImage=function(r){this.style.removeImage(r)},o.prototype.loadImage=function(n,i){r.getImage(this._requestManager.transformRequest(n,r.ResourceType.Image),i)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(r,n){return this._lazyInitEmptyStyle(),this.style.addLayer(r,n),this._update(!0)},o.prototype.moveLayer=function(r,n){return this.style.moveLayer(r,n),this._update(!0)},o.prototype.removeLayer=function(r){return this.style.removeLayer(r),this._update(!0)},o.prototype.getLayer=function(r){return this.style.getLayer(r)},o.prototype.setLayerZoomRange=function(r,n,i){return this.style.setLayerZoomRange(r,n,i),this._update(!0)},o.prototype.setFilter=function(r,n,i){return void 0===i&&(i={}),this.style.setFilter(r,n,i),this._update(!0)},o.prototype.getFilter=function(r){return this.style.getFilter(r)},o.prototype.setPaintProperty=function(r,n,i,a){return void 0===a&&(a={}),this.style.setPaintProperty(r,n,i,a),this._update(!0)},o.prototype.getPaintProperty=function(r,n){return this.style.getPaintProperty(r,n)},o.prototype.setLayoutProperty=function(r,n,i,a){return void 0===a&&(a={}),this.style.setLayoutProperty(r,n,i,a),this._update(!0)},o.prototype.getLayoutProperty=function(r,n){return this.style.getLayoutProperty(r,n)},o.prototype.setLight=function(r,n){return void 0===n&&(n={}),this._lazyInitEmptyStyle(),this.style.setLight(r,n),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(r,n){return this.style.setFeatureState(r,n),this._update()},o.prototype.removeFeatureState=function(r,n){return this.style.removeFeatureState(r,n),this._update()},o.prototype.getFeatureState=function(r){return this.style.getFeatureState(r)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var r=0,n=0;return this._container&&(r=this._container.clientWidth||400,n=this._container.clientHeight||300),[r,n]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var r=this._container;r.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",r)).style.visibility="hidden",this._detectMissingCSS();var n=this._canvasContainer=i.create("div","mapboxgl-canvas-container",r);this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);var o=this._controlContainer=i.create("div","mapboxgl-control-container",r),s=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(r){s[r]=i.create("div","mapboxgl-ctrl-"+r,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},o.prototype._resizeCanvas=function(n,i){var a=r.browser.devicePixelRatio||1;this._canvas.width=a*n,this._canvas.height=a*i,this._canvas.style.width=n+"px",this._canvas.style.height=i+"px"},o.prototype._setupPainter=function(){var i=r.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);a?(this.painter=new e7(a,this.transform),r.webpSupported.testSupport(a)):this.fire(new r.ErrorEvent(Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(n){n.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:n}))},o.prototype._contextRestored=function(n){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:n}))},o.prototype._onMapScroll=function(r){if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(r){return this.style&&(this._styleDirty=this._styleDirty||r,this._sourcesDirty=!0,this.triggerRepaint()),this},o.prototype._requestRenderFrame=function(r){return this._update(),this._renderTaskQueue.add(r)},o.prototype._cancelRenderFrame=function(r){this._renderTaskQueue.remove(r)},o.prototype._render=function(n){var i,a=this,o=0,s=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=s.createQueryEXT(),s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),o=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(n),!this._removed){var l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var c=this.transform.zoom,u=r.browser.now();this.style.zoomHistory.update(c,u);var f=new r.EvaluationParameters(c,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),h=f.crossFadingFactor();1===h&&h===this._crossFadingFactor||(l=!0,this._crossFadingFactor=h),this.style.update(f)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var p=r.browser.now()-o;s.endQueryEXT(s.TIME_ELAPSED_EXT,i),setTimeout(function(){var n=s.getQueryObjectEXT(i,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(i),a.fire(new r.Event("gpu-timing-frame",{cpuTime:p,gpuTime:n}))},50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout(function(){var n=a.painter.queryGpuTimers(d);a.fire(new r.Event("gpu-timing-layer",{layerTimes:n}))},50)}var y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0),this}},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var n=0,i=this._controls;n<i.length;n+=1)i[n].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==r.window&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext&&a.loseContext(),r5(this._canvasContainer),r5(this._controlContainer),r5(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},o.prototype.triggerRepaint=function(){var n=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(r){n._frame=null,n._render(r)}))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(r){this._trackResize&&this.resize({originalEvent:r})._update()},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries},s.showTileBoundaries.set=function(r){this._showTileBoundaries!==r&&(this._showTileBoundaries=r,this._update())},s.showPadding.get=function(){return!!this._showPadding},s.showPadding.set=function(r){this._showPadding!==r&&(this._showPadding=r,this._update())},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},s.showCollisionBoxes.set=function(r){this._showCollisionBoxes!==r&&(this._showCollisionBoxes=r,r?this.style._generateCollisionBoxes():this._update())},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},s.showOverdrawInspector.set=function(r){this._showOverdrawInspector!==r&&(this._showOverdrawInspector=r,this._update())},s.repaint.get=function(){return!!this._repaint},s.repaint.set=function(r){this._repaint!==r&&(this._repaint=r,this.triggerRepaint())},s.vertices.get=function(){return!!this._vertices},s.vertices.set=function(r){this._vertices=r,this._update()},o.prototype._setCacheLimits=function(n,i){r.setCacheLimits(n,i)},s.version.get=function(){return r.version},Object.defineProperties(o.prototype,s),o}(rK);function r5(r){r.parentNode&&r.parentNode.removeChild(r)}var r8={showCompass:!0,showZoom:!0,visualizePitch:!1},r7=function(n){var a=this;this.options=r.extend({},r8,n),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(r){return r.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(r){return a._map.zoomIn({},{originalEvent:r})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(r){return a._map.zoomOut({},{originalEvent:r})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(r){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:r}):a._map.resetNorth({},{originalEvent:r})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};r7.prototype._updateZoomButtons=function(){var r=this._map.getZoom(),n=r===this._map.getMaxZoom(),i=r===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},r7.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},r7.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new r9(this._map,this._compass,this.options.visualizePitch)),this._container},r7.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},r7.prototype._createButton=function(r,n){var a=i.create("button",r,this._container);return a.type="button",a.addEventListener("click",n),a},r7.prototype._setButtonTitle=function(r,n){var i=this._map._getUIString("NavigationControl."+n);r.title=i,r.setAttribute("aria-label",i)};var r9=function(n,a,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=a,this.mouseRotate=new rM({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new rS({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(a,"mousedown",this.mousedown),i.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(a,"touchmove",this.touchmove),i.addEventListener(a,"touchend",this.touchend),i.addEventListener(a,"touchcancel",this.reset)};function nt(n,i,a){if(n=new r.LngLat(n.lng,n.lat),i){var o=new r.LngLat(n.lng-360,n.lat),s=new r.LngLat(n.lng+360,n.lat),l=a.locationPoint(n).distSqr(i);a.locationPoint(o).distSqr(i)<l?n=o:a.locationPoint(s).distSqr(i)<l&&(n=s)}for(;Math.abs(n.lng-a.center.lng)>180;){var c=a.locationPoint(n);if(c.x>=0&&c.y>=0&&c.x<=a.width&&c.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}r9.prototype.down=function(r,n){this.mouseRotate.mousedown(r,n),this.mousePitch&&this.mousePitch.mousedown(r,n),i.disableDrag()},r9.prototype.move=function(r,n){var i=this.map,a=this.mouseRotate.mousemoveWindow(r,n);if(a&&a.bearingDelta&&i.setBearing(i.getBearing()+a.bearingDelta),this.mousePitch){var o=this.mousePitch.mousemoveWindow(r,n);o&&o.pitchDelta&&i.setPitch(i.getPitch()+o.pitchDelta)}},r9.prototype.off=function(){var r=this.element;i.removeEventListener(r,"mousedown",this.mousedown),i.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(r,"touchmove",this.touchmove),i.removeEventListener(r,"touchend",this.touchend),i.removeEventListener(r,"touchcancel",this.reset),this.offTemp()},r9.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(r.window,"mousemove",this.mousemove),i.removeEventListener(r.window,"mouseup",this.mouseup)},r9.prototype.mousedown=function(n){this.down(r.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),i.mousePos(this.element,n)),i.addEventListener(r.window,"mousemove",this.mousemove),i.addEventListener(r.window,"mouseup",this.mouseup)},r9.prototype.mousemove=function(r){this.move(r,i.mousePos(this.element,r))},r9.prototype.mouseup=function(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()},r9.prototype.touchstart=function(r){1!==r.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return r.preventDefault()}},this._startPos))},r9.prototype.touchmove=function(r){1!==r.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:function(){return r.preventDefault()}},this._lastPos))},r9.prototype.touchend=function(r){0===r.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},r9.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ne={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nr(r,n,i){var a=r.classList;for(var o in ne)a.remove("mapboxgl-"+i+"-anchor-"+o);a.add("mapboxgl-"+i+"-anchor-"+n)}var nn,ni=function(n){function a(a,o){if(n.call(this),(a instanceof r.window.HTMLElement||o)&&(a=r.extend({element:a},o)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=r.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var s=i.createNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height","41px"),s.setAttributeNS(null,"width","27px"),s.setAttributeNS(null,"viewBox","0 0 27 41");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"stroke","none"),l.setAttributeNS(null,"stroke-width","1"),l.setAttributeNS(null,"fill","none"),l.setAttributeNS(null,"fill-rule","evenodd");var c=i.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var f=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];f<h.length;f+=1){var p=h[f],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",p.rx),d.setAttributeNS(null,"ry",p.ry),u.appendChild(d)}var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"fill",this._color);var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),y.appendChild(g);var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var x=i.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"transform","translate(6.0, 7.0)"),x.setAttributeNS(null,"fill","#FFFFFF");var b=i.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=i.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var w=i.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),b.appendChild(_),b.appendChild(w),c.appendChild(u),c.appendChild(y),c.appendChild(v),c.appendChild(x),c.appendChild(b),s.appendChild(c),s.setAttributeNS(null,"height",41*this._scale+"px"),s.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(s),this._offset=r.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(r){r.preventDefault()}),this._element.addEventListener("mousedown",function(r){r.preventDefault()}),nr(this._element,this._anchor,"marker"),this._popup=null}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.addTo=function(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(n){return this._lngLat=r.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){var n=Math.sqrt(91.125);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[n,-1*(24.6+n)],"bottom-right":[-n,-1*(24.6+n)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},a.prototype._onKeyPress=function(r){var n=r.code,i=r.charCode||r.keyCode;"Space"!==n&&"Enter"!==n&&32!==i&&13!==i||this.togglePopup()},a.prototype._onMapClick=function(r){var n=r.originalEvent.target,i=this._element;this._popup&&(n===i||i.contains(n))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var r=this._popup;return r&&(r.isOpen()?r.remove():r.addTo(this._map)),this},a.prototype._update=function(r){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=nt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var n="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?n="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(n="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a="rotateX("+this._map.getPitch()+"deg)"),r&&"moveend"!==r.type||(this._pos=this._pos.round()),i.setTransform(this._element,ne[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+a+" "+n)}},a.prototype.getOffset=function(){return this._offset},a.prototype.setOffset=function(n){return this._offset=r.Point.convert(n),this._update(),this},a.prototype._onMove=function(n){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},a.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new r.Event("dragend")),this._state="inactive"},a.prototype._addDragHandler=function(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},a.prototype.setDraggable=function(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},a.prototype.isDraggable=function(){return this._draggable},a.prototype.setRotation=function(r){return this._rotation=r||0,this._update(),this},a.prototype.getRotation=function(){return this._rotation},a.prototype.setRotationAlignment=function(r){return this._rotationAlignment=r||"auto",this._update(),this},a.prototype.getRotationAlignment=function(){return this._rotationAlignment},a.prototype.setPitchAlignment=function(r){return this._pitchAlignment=r&&"auto"!==r?r:this._rotationAlignment,this._update(),this},a.prototype.getPitchAlignment=function(){return this._pitchAlignment},a}(r.Evented),na={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},no=0,ns=!1,nl=function(n){function a(i){n.call(this),this.options=r.extend({},na,i),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.onAdd=function(n){var a;return this._map=n,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),a=this._setupUI,void 0!==nn?a(nn):void 0!==r.window.navigator.permissions?r.window.navigator.permissions.query({name:"geolocation"}).then(function(r){a(nn="denied"!==r.state)}):a(nn=!!r.window.navigator.geolocation),this._container},a.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,no=0,ns=!1},a.prototype._isOutOfMapMaxBounds=function(r){var n=this._map.getMaxBounds(),i=r.coords;return n&&(i.longitude<n.getWest()||i.longitude>n.getEast()||i.latitude<n.getSouth()||i.latitude>n.getNorth())},a.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},a.prototype._onSuccess=function(n){if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(n),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",n)),this._finish()}},a.prototype._updateCamera=function(n){var i=new r.LngLat(n.coords.longitude,n.coords.latitude),a=n.coords.accuracy,o=this._map.getBearing(),s=r.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),s,{geolocateSource:!0})},a.prototype._updateMarker=function(n){if(n){var i=new r.LngLat(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},a.prototype._updateCircleRadius=function(){var r=this._map._container.clientHeight/2,n=this._map.unproject([0,r]),i=this._map.unproject([1,r]),a=n.distanceTo(i),o=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=o+"px",this._circleElement.style.height=o+"px"},a.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},a.prototype._onError=function(n){if(this._map){if(this.options.trackUserLocation){if(1===n.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===n.code&&ns)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",n)),this._finish()}},a.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},a.prototype._setupUI=function(n){var a=this;if(this._container.addEventListener("contextmenu",function(r){return r.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===n){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{var s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ni(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ni({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(n){var i=n.originalEvent&&"resize"===n.originalEvent.type;n.geolocateSource||"ACTIVE_LOCK"!==a._watchState||i||(a._watchState="BACKGROUND",a._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),a._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),a.fire(new r.Event("trackuserlocationend")))})},a.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":no--,ns=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var n;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++no>1?(n={maximumAge:6e5,timeout:0},ns=!0):(n=this.options.positionOptions,ns=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,n)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},a.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},a}(r.Evented),nc={maxWidth:100,unit:"metric"},nu=function(n){this.options=r.extend({},nc,n),r.bindAll(["_onMove","setUnit"],this)};function nf(r,n,i){var a=i&&i.maxWidth||100,o=r._container.clientHeight/2,s=r.unproject([0,o]),l=r.unproject([a,o]),c=s.distanceTo(l);if(i&&"imperial"===i.unit){var u=3.2808*c;u>5280?nh(n,a,u/5280,r._getUIString("ScaleControl.Miles")):nh(n,a,u,r._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?nh(n,a,c/1852,r._getUIString("ScaleControl.NauticalMiles")):c>=1e3?nh(n,a,c/1e3,r._getUIString("ScaleControl.Kilometers")):nh(n,a,c,r._getUIString("ScaleControl.Meters"))}function nh(r,n,i,a){var o,s,l,c=(s=Math.pow(10,(""+Math.floor(i)).length-1))*((l=i/s)>=10?10:l>=5?5:l>=3?3:l>=2?2:l>=1?1:(o=Math.pow(10,Math.ceil(-Math.log(l)/Math.LN10)),Math.round(l*o)/o));r.style.width=c/i*n+"px",r.innerHTML=c+"&nbsp;"+a}nu.prototype.getDefaultPosition=function(){return"bottom-left"},nu.prototype._onMove=function(){nf(this._map,this._container,this.options)},nu.prototype.onAdd=function(r){return this._map=r,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},nu.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},nu.prototype.setUnit=function(r){this.options.unit=r,nf(this._map,this._container,this.options)};var np=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof r.window.HTMLElement?this._container=n.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};np.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},np.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},np.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},np.prototype._setupUI=function(){var n=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},np.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},np.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},np.prototype._isFullscreen=function(){return this._fullscreen},np.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},np.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var nd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ny=function(n){function a(i){n.call(this),this.options=r.extend(Object.create(nd),i),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.addTo=function(n){return this._map&&this.remove(),this._map=n,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},a.prototype.isOpen=function(){return!!this._map},a.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(n){return this._lngLat=r.LngLat.convert(n),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},a.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},a.prototype.getElement=function(){return this._container},a.prototype.setText=function(n){return this.setDOMContent(r.window.document.createTextNode(n))},a.prototype.setHTML=function(n){var i,a=r.window.document.createDocumentFragment(),o=r.window.document.createElement("body");for(o.innerHTML=n;i=o.firstChild;)a.appendChild(i);return this.setDOMContent(a)},a.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},a.prototype.setMaxWidth=function(r){return this.options.maxWidth=r,this._update(),this},a.prototype.setDOMContent=function(r){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(r),this._createCloseButton(),this._update(),this._focusFirstElement(),this},a.prototype.addClassName=function(r){this._container&&this._container.classList.add(r)},a.prototype.removeClassName=function(r){this._container&&this._container.classList.remove(r)},a.prototype.setOffset=function(r){return this.options.offset=r,this._update(),this},a.prototype.toggleClassName=function(r){if(this._container)return this._container.classList.toggle(r)},a.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},a.prototype._onMouseUp=function(r){this._update(r.point)},a.prototype._onMouseMove=function(r){this._update(r.point)},a.prototype._onDrag=function(r){this._update(r.point)},a.prototype._update=function(n){var a=this,o=this._lngLat||this._trackPointer;if(this._map&&o&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(r){return a._container.classList.add(r)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||n)){var s=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat),l=this.options.anchor,c=function n(i){if(i){if("number"==typeof i){var a=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new r.Point(0,0),top:new r.Point(0,i),"top-left":new r.Point(a,a),"top-right":new r.Point(-a,a),bottom:new r.Point(0,-i),"bottom-left":new r.Point(a,-a),"bottom-right":new r.Point(-a,-a),left:new r.Point(i,0),right:new r.Point(-i,0)}}if(i instanceof r.Point||Array.isArray(i)){var o=r.Point.convert(i);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:r.Point.convert(i.center||[0,0]),top:r.Point.convert(i.top||[0,0]),"top-left":r.Point.convert(i["top-left"]||[0,0]),"top-right":r.Point.convert(i["top-right"]||[0,0]),bottom:r.Point.convert(i.bottom||[0,0]),"bottom-left":r.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(i["bottom-right"]||[0,0]),left:r.Point.convert(i.left||[0,0]),right:r.Point.convert(i.right||[0,0])}}return n(new r.Point(0,0))}(this.options.offset);if(!l){var u,f=this._container.offsetWidth,h=this._container.offsetHeight;u=s.y+c.bottom.y<h?["top"]:s.y>this._map.transform.height-h?["bottom"]:[],s.x<f/2?u.push("left"):s.x>this._map.transform.width-f/2&&u.push("right"),l=0===u.length?"bottom":u.join("-")}var p=s.add(c[l]).round();i.setTransform(this._container,ne[l]+" translate("+p.x+"px,"+p.y+"px)"),nr(this._container,l,"popup")}},a.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var r=this._container.querySelector("a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])");r&&r.focus()}},a.prototype._onClose=function(){this.remove()},a}(r.Evented),ng={version:r.version,supported:n,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:r6,NavigationControl:r7,GeolocateControl:nl,AttributionControl:rJ,ScaleControl:nu,FullscreenControl:np,Popup:ny,Marker:ni,Style:ev,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){tP().acquire(tL)},clearPrewarmedResources:function(){var r=tO;r&&(r.isPreloaded()&&1===r.numActive()?(r.release(tL),tO=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(e){r.config.ACCESS_TOKEN=e},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(e){r.config.API_URL=e},get workerCount(){return tC.workerCount},set workerCount(t){tC.workerCount=t},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){r.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(n){r.clearTileCache(n)},workerUrl:""};return ng}),i}()},3108:function(r,n,i){r.exports=i(26099)},26099:function(r,n,i){var a=i(64928),o=i(32420),s=i(51160),l=i(76752),c=i(55616),u=i(31264),f=i(47520),h=i(18400),p=i(72512),d=i(76244);function y(r,n){for(var i=n[0],a=n[1],s=1/(n[2]-i),l=1/(n[3]-a),c=Array(r.length),u=0,f=r.length/2;u<f;u++)c[2*u]=o((r[2*u]-i)*s,0,1),c[2*u+1]=o((r[2*u+1]-a)*l,0,1);return c}r.exports=function(r,n){n||(n={}),r=f(r,"float64");var i=u((n=c(n,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"})).maxDepth,255),o=u(n.bounds,l(r,2));o[0]===o[2]&&o[2]++,o[1]===o[3]&&o[3]++;var g,v=y(r,o),m=r.length>>>1;n.dtype||(n.dtype="array"),"string"==typeof n.dtype?g=new(p(n.dtype))(m):n.dtype&&Array.isArray(g=n.dtype)&&(g.length=m);for(var x=0;x<m;++x)g[x]=x;var b=[],_=[],w=[],T=[];!function r(n,a,o,s,l,c){if(!s.length)return null;var u=b[l]||(b[l]=[]),f=w[l]||(w[l]=[]),h=_[l]||(_[l]=[]),p=u.length;if(++l>i||c>1073741824){for(var d=0;d<s.length;d++)u.push(s[d]),f.push(c),h.push(null,null,null,null);return p}if(u.push(s[0]),f.push(c),s.length<=1)return h.push(null,null,null,null),p;for(var y=.5*o,g=n+y,m=a+y,x=[],T=[],A=[],k=[],M=1,S=s.length;M<S;M++){var E=s[M],I=v[2*E],L=v[2*E+1];I<g?L<m?x.push(E):T.push(E):L<m?A.push(E):k.push(E)}return c<<=2,h.push(r(n,a,y,x,l,c),r(n,m,y,T,l,c+1),r(g,a,y,A,l,c+2),r(g,m,y,k,l,c+3)),p}(0,0,1,g,0,1);for(var A=0,k=0;k<b.length;k++){var M=b[k];if(g.set)g.set(M,A);else for(var S=0,E=M.length;S<E;S++)g[S+A]=M[S];var I=A+b[k].length;T[k]=[A,I],A=I}return g.range=function(){for(var n,i=[],l=arguments.length;l--;)i[l]=arguments[l];if(h(i[i.length-1])){var f=i.pop();i.length||null==f.x&&null==f.l&&null==f.left||(i=[f],n={}),n=c(f,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else n={};i.length||(i=o);var p,g=s.apply(void 0,i),v=[Math.min(g.x,g.x+g.width),Math.min(g.y,g.y+g.height),Math.max(g.x,g.x+g.width),Math.max(g.y,g.y+g.height)],m=v[0],x=v[1],A=v[2],k=v[3],M=y([m,x,A,k],o),S=M[0],E=M[1],I=M[2],C=M[3],O=u(n.level,b.length);if(null!=n.d&&("number"==typeof n.d?p=[n.d,n.d]:n.d.length&&(p=n.d),O=Math.min(Math.max(Math.ceil(-d(Math.abs(p[0])/(o[2]-o[0]))),Math.ceil(-d(Math.abs(p[1])/(o[3]-o[1])))),O)),O=Math.min(O,b.length),n.lod)return function(r,n,i,o,s){for(var l=[],c=0;c<s;c++){var u=w[c],f=T[c][0],h=L(r,n,c),p=L(i,o,c),d=a.ge(u,h),y=a.gt(u,p,d,u.length-1);l[c]=[d+f,y+f]}return l}(S,E,I,C,O);var D=[];return function n(i,a,o,s,l,c){if(null!==l&&null!==c&&!(S>i+o||E>a+o||I<i||C<a||s>=O||l===c)){var u=b[s];void 0===c&&(c=u.length);for(var f=l;f<c;f++){var h=u[f],p=r[2*h],d=r[2*h+1];p>=m&&p<=A&&d>=x&&d<=k&&D.push(h)}var y=_[s],g=y[4*l+0],v=y[4*l+1],w=y[4*l+2],T=y[4*l+3],M=function(r,n){for(var i=null,a=0;null===i;)if(i=r[4*n+a],++a>r.length)return null;return i}(y,l+1),L=.5*o,P=s+1;n(i,a,L,P,g,v||w||T||M),n(i,a+L,L,P,v,w||T||M),n(i+L,a,L,P,w,T||M),n(i+L,a+L,L,P,T,M)}}(0,0,1,0,0,1),D},g;function L(r,n,i){for(var a=1,o=.5,s=.5,l=.5,c=0;c<i;c++)a<<=2,a+=r<o?n<s?0:1:n<s?2:3,l*=.5,o+=r<o?-l:l,s+=n<s?-l:l;return a}}},40440:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(3256);function o(r){var n=0;if(r&&r.length>0){n+=Math.abs(s(r[0]));for(var i=1;i<r.length;i++)n-=Math.abs(s(r[i]))}return n}function s(r){var n,i,a,o,s,c,u=0,f=r.length;if(f>2){for(c=0;c<f;c++)c===f-2?(a=f-2,o=f-1,s=0):c===f-1?(a=f-1,o=0,s=1):(a=c,o=c+1,s=c+2),n=r[a],i=r[o],u+=(l(r[s][0])-l(n[0]))*Math.sin(l(i[1]));u=40680631590769*u/2}return u}function l(r){return r*Math.PI/180}n.default=function(r){return a.geomReduce(r,function(r,n){return r+function(r){var n,i=0;switch(r.type){case"Polygon":return o(r.coordinates);case"MultiPolygon":for(n=0;n<r.coordinates.length;n++)i+=o(r.coordinates[n]);return i}return 0}(n)},0)}},46284:function(r,n){function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){if(void 0===a&&(a={}),!r)throw Error("coordinates is required");if(!Array.isArray(r))throw Error("coordinates must be an Array");if(r.length<2)throw Error("coordinates must be at least 2 numbers long");if(!y(r[0])||!y(r[1]))throw Error("coordinates must contain numbers");return i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function y(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:1.0936*n.earthRadius},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return u(n).geometry;case"MultiLineString":return c(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=c,n.multiPoint=u,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=y,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!y(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")}},3256:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(46284);function o(r,n,i){if(null!==r)for(var a,s,l,c,u,f,h,p,d=0,y=0,g=r.type,v="FeatureCollection"===g,m="Feature"===g,x=v?r.features.length:1,b=0;b<x;b++){u=(p=!!(h=v?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<u;_++){var w=0,T=0;if(null!==(c=p?h.geometries[_]:h)){f=c.coordinates;var A=c.type;switch(d=i&&("Polygon"===A||"MultiPolygon"===A)?1:0,A){case null:break;case"Point":if(!1===n(f,y,b,w,T))return!1;y++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],y,b,w,T))return!1;y++,"MultiPoint"===A&&w++}"LineString"===A&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],y,b,w,T))return!1;y++}"MultiLineString"===A&&w++,"Polygon"===A&&T++}"Polygon"===A&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],y,b,w,T))return!1;y++}T++}w++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===o(c.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function c(r,n){var i,a,o,s,l,c,u,f,h,p,d=0,y="FeatureCollection"===r.type,g="Feature"===r.type,v=y?r.features.length:1;for(i=0;i<v;i++){for(c=y?r.features[i].geometry:g?r.geometry:r,f=y?r.features[i].properties:g?r.properties:{},h=y?r.features[i].bbox:g?r.bbox:void 0,p=y?r.features[i].id:g?r.id:void 0,l=(u=!!c&&"GeometryCollection"===c.type)?c.geometries.length:1,o=0;o<l;o++)if(null!==(s=u?c.geometries[o]:c))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function u(r,n){c(r,function(r,i,o,s,l){var c,u=null===r?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:c,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){u(r,function(r,i,s){var l=0;if(r.geometry){var c=r.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var u,f=0,h=0,p=0;return!1!==o(r,function(o,c,d,y,g){return void 0===u||i>f||y>h||g>p?(u=o,f=i,h=y,p=g,void(l=0)):!1!==n(a.lineString([u,o],r.properties),i,s,g,l)&&void(l++,u=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");u(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var c=0;c<l.length;c++)if(!1===n(a.lineString(l[c],r.properties),i,o,c))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,c){s=0===a&&void 0===i?r:n(s,r,a,o,l,c)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=c,n.geomReduce=function(r,n,i){var a=i;return c(r,function(r,o,s,l,c){a=0===o&&void 0===i?r:n(a,r,o,s,l,c)}),a},n.flattenEach=u,n.flattenReduce=function(r,n,i){var a=i;return u(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,c,u){a=!1===o&&void 0===i?r:n(a,r,s,l,c,u),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.segmentIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=f.length+c-1),a.lineString([f[c],f[c+1]],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c-1),a.lineString([f[l][c],f[l][c+1]],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c-1),a.lineString([f[s][c],f[s][c+1]],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c-1),a.lineString([f[s][l][c],f[s][l][c+1]],u,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.coordIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,u,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],u,n);case"LineString":return c<0&&(c=f.length+c),a.point(f[c],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c),a.point(f[l][c],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c),a.point(f[s][c],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c),a.point(f[s][l][c],u,n)}throw Error("geojson is invalid")}},42428:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(84880);function o(r){var n=[1/0,1/0,-1/0,-1/0];return a.coordEach(r,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}o.default=o,n.default=o},76796:function(r,n){function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){if(void 0===a&&(a={}),!r)throw Error("coordinates is required");if(!Array.isArray(r))throw Error("coordinates must be an Array");if(r.length<2)throw Error("coordinates must be at least 2 numbers long");if(!y(r[0])||!y(r[1]))throw Error("coordinates must contain numbers");return i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function y(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:1.0936*n.earthRadius},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return u(n).geometry;case"MultiLineString":return c(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=c,n.multiPoint=u,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=y,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!y(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")}},84880:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(76796);function o(r,n,i){if(null!==r)for(var a,s,l,c,u,f,h,p,d=0,y=0,g=r.type,v="FeatureCollection"===g,m="Feature"===g,x=v?r.features.length:1,b=0;b<x;b++){u=(p=!!(h=v?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<u;_++){var w=0,T=0;if(null!==(c=p?h.geometries[_]:h)){f=c.coordinates;var A=c.type;switch(d=i&&("Polygon"===A||"MultiPolygon"===A)?1:0,A){case null:break;case"Point":if(!1===n(f,y,b,w,T))return!1;y++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],y,b,w,T))return!1;y++,"MultiPoint"===A&&w++}"LineString"===A&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],y,b,w,T))return!1;y++}"MultiLineString"===A&&w++,"Polygon"===A&&T++}"Polygon"===A&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],y,b,w,T))return!1;y++}T++}w++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===o(c.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function c(r,n){var i,a,o,s,l,c,u,f,h,p,d=0,y="FeatureCollection"===r.type,g="Feature"===r.type,v=y?r.features.length:1;for(i=0;i<v;i++){for(c=y?r.features[i].geometry:g?r.geometry:r,f=y?r.features[i].properties:g?r.properties:{},h=y?r.features[i].bbox:g?r.bbox:void 0,p=y?r.features[i].id:g?r.id:void 0,l=(u=!!c&&"GeometryCollection"===c.type)?c.geometries.length:1,o=0;o<l;o++)if(null!==(s=u?c.geometries[o]:c))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function u(r,n){c(r,function(r,i,o,s,l){var c,u=null===r?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:c,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){u(r,function(r,i,s){var l=0;if(r.geometry){var c=r.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var u,f=0,h=0,p=0;return!1!==o(r,function(o,c,d,y,g){return void 0===u||i>f||y>h||g>p?(u=o,f=i,h=y,p=g,void(l=0)):!1!==n(a.lineString([u,o],r.properties),i,s,g,l)&&void(l++,u=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");u(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var c=0;c<l.length;c++)if(!1===n(a.lineString(l[c],r.properties),i,o,c))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,c){s=0===a&&void 0===i?r:n(s,r,a,o,l,c)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=c,n.geomReduce=function(r,n,i){var a=i;return c(r,function(r,o,s,l,c){a=0===o&&void 0===i?r:n(a,r,o,s,l,c)}),a},n.flattenEach=u,n.flattenReduce=function(r,n,i){var a=i;return u(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,c,u){a=!1===o&&void 0===i?r:n(a,r,s,l,c,u),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.segmentIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=f.length+c-1),a.lineString([f[c],f[c+1]],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c-1),a.lineString([f[l][c],f[l][c+1]],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c-1),a.lineString([f[s][c],f[s][c+1]],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c-1),a.lineString([f[s][l][c],f[s][l][c+1]],u,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.coordIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,u,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],u,n);case"LineString":return c<0&&(c=f.length+c),a.point(f[c],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c),a.point(f[l][c],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c),a.point(f[s][c],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c),a.point(f[s][l][c],u,n)}throw Error("geojson is invalid")}},77844:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(43752),o=i(49840);n.default=function(r,n){void 0===n&&(n={});var i=0,s=0,l=0;return a.coordEach(r,function(r){i+=r[0],s+=r[1],l++}),o.point([i/l,s/l],n.properties)}},49840:function(r,n){function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){return void 0===a&&(a={}),i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function y(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)&&!/^\s*$/.test(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:n.earthRadius/1.0936},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1/1.0936},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return u(n).geometry;case"MultiLineString":return c(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=c,n.multiPoint=u,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=y,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!y(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")},n.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`")},n.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`")},n.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`")},n.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`")},n.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`")},n.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`")},n.convertDistance=function(){throw Error("method has been renamed to `convertLength`")}},43752:function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(49840);function o(r,n,i){if(null!==r)for(var a,s,l,c,u,f,h,p,d=0,y=0,g=r.type,v="FeatureCollection"===g,m="Feature"===g,x=v?r.features.length:1,b=0;b<x;b++){u=(p=!!(h=v?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<u;_++){var w=0,T=0;if(null!==(c=p?h.geometries[_]:h)){f=c.coordinates;var A=c.type;switch(d=i&&("Polygon"===A||"MultiPolygon"===A)?1:0,A){case null:break;case"Point":if(!1===n(f,y,b,w,T))return!1;y++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],y,b,w,T))return!1;y++,"MultiPoint"===A&&w++}"LineString"===A&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],y,b,w,T))return!1;y++}"MultiLineString"===A&&w++,"Polygon"===A&&T++}"Polygon"===A&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],y,b,w,T))return!1;y++}T++}w++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===o(c.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function c(r,n){var i,a,o,s,l,c,u,f,h,p,d=0,y="FeatureCollection"===r.type,g="Feature"===r.type,v=y?r.features.length:1;for(i=0;i<v;i++){for(c=y?r.features[i].geometry:g?r.geometry:r,f=y?r.features[i].properties:g?r.properties:{},h=y?r.features[i].bbox:g?r.bbox:void 0,p=y?r.features[i].id:g?r.id:void 0,l=(u=!!c&&"GeometryCollection"===c.type)?c.geometries.length:1,o=0;o<l;o++)if(null!==(s=u?c.geometries[o]:c))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function u(r,n){c(r,function(r,i,o,s,l){var c,u=null===r?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:c,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){u(r,function(r,i,s){var l=0;if(r.geometry){var c=r.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var u,f=0,h=0,p=0;return!1!==o(r,function(o,c,d,y,g){return void 0===u||i>f||y>h||g>p?(u=o,f=i,h=y,p=g,void(l=0)):!1!==n(a.lineString([u,o],r.properties),i,s,g,l)&&void(l++,u=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");u(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var c=0;c<l.length;c++)if(!1===n(a.lineString(l[c],r.properties),i,o,c))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,c){s=0===a&&void 0===i?r:n(s,r,a,o,l,c)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=c,n.geomReduce=function(r,n,i){var a=i;return c(r,function(r,o,s,l,c){a=0===o&&void 0===i?r:n(a,r,o,s,l,c)}),a},n.flattenEach=u,n.flattenReduce=function(r,n,i){var a=i;return u(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,c,u){a=!1===o&&void 0===i?r:n(a,r,s,l,c,u),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.segmentIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=f.length+c-1),a.lineString([f[c],f[c+1]],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c-1),a.lineString([f[l][c],f[l][c+1]],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c-1),a.lineString([f[s][c],f[s][c+1]],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c-1),a.lineString([f[s][l][c],f[s][l][c+1]],u,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.coordIndex||0,u=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),u=u||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":u=u||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,u,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],u,n);case"LineString":return c<0&&(c=f.length+c),a.point(f[c],u,n);case"Polygon":return l<0&&(l=f.length+l),c<0&&(c=f[l].length+c),a.point(f[l][c],u,n);case"MultiLineString":return s<0&&(s=f.length+s),c<0&&(c=f[s].length+c),a.point(f[s][c],u,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),c<0&&(c=f[s][l].length-c),a.point(f[s][l][c],u,n)}throw Error("geojson is invalid")}},49972:function(r){r.exports=function(r){var n=0,i=0,a=0,o=0;return r.map(function(r){var s=(r=r.slice())[0],l=s.toUpperCase();if(s!=l)switch(r[0]=l,s){case"a":r[6]+=a,r[7]+=o;break;case"v":r[1]+=o;break;case"h":r[1]+=a;break;default:for(var c=1;c<r.length;)r[c++]+=a,r[c++]+=o}switch(l){case"Z":a=n,o=i;break;case"H":a=r[1];break;case"V":o=r[1];break;case"M":a=n=r[1],o=i=r[2];break;default:a=r[r.length-2],o=r[r.length-1]}return r})}},76752:function(r){r.exports=function(r,n){if(!r||null==r.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var i=Array(2*n),a=0;a<n;a++){for(var o=-1/0,s=1/0,l=a,c=r.length;l<c;l+=n)r[l]>o&&(o=r[l]),r[l]<s&&(s=r[l]);i[a]=s,i[n+a]=o}return i}},10272:function(r){r.exports=function(r,n,i){if("function"==typeof Array.prototype.findIndex)return r.findIndex(n,i);if("function"!=typeof n)throw TypeError("predicate must be a function");var a=Object(r),o=a.length;if(0===o)return -1;for(var s=0;s<o;s++)if(n.call(i,a[s],s,a))return s;return -1}},71152:function(r,n,i){var a=i(76752);r.exports=function(r,n,i){if(!r||null==r.length)throw Error("Argument should be an array");null==n&&(n=1),null==i&&(i=a(r,n));for(var o=0;o<n;o++){var s=i[n+o],l=i[o],c=o,u=r.length;if(s===1/0&&l===-1/0)for(c=o;c<u;c+=n)r[c]=r[c]===s?1:r[c]===l?0:.5;else if(s===1/0)for(c=o;c<u;c+=n)r[c]=r[c]===s?1:0;else if(l===-1/0)for(c=o;c<u;c+=n)r[c]=r[c]===l?0:1;else{var f=s-l;for(c=o;c<u;c+=n)isNaN(r[c])||(r[c]=0===f?.5:(r[c]-l)/f)}}return r}},67752:function(r){r.exports=function(r,n){var i="number"==typeof r,a="number"==typeof n;i&&!a?(n=r,r=0):i||a||(r=0,n=0);var o=(n|=0)-(r|=0);if(o<0)throw Error("array length must be positive");for(var s=Array(o),l=0,c=r;l<o;l++,c++)s[l]=c;return s}},45408:function(r,n,i){var a=i(4168);function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var s,l,c=i(86832).codes,u=c.ERR_AMBIGUOUS_ARGUMENT,f=c.ERR_INVALID_ARG_TYPE,h=c.ERR_INVALID_ARG_VALUE,p=c.ERR_INVALID_RETURN_VALUE,d=c.ERR_MISSING_ARGS,y=i(26144),g=i(35840).inspect,v=i(35840).types,m=v.isPromise,x=v.isRegExp,b=Object.assign?Object.assign:i(60964).assign,_=Object.is?Object.is:i(39896);function w(){var r=i(25116);s=r.isDeepEqual,l=r.isDeepStrictEqual}var T=!1,A=r.exports=E,k={};function M(r){if(r.message instanceof Error)throw r.message;throw new y(r)}function S(r,n,i,a){if(!i){var o=!1;if(0===n)o=!0,a="No value argument passed to `assert.ok()`";else if(a instanceof Error)throw a;var s=new y({actual:i,expected:!0,message:a,operator:"==",stackStartFn:r});throw s.generatedMessage=o,s}}function E(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];S.apply(void 0,[E,n.length].concat(n))}A.fail=function r(n,i,o,s,l){var c,u=arguments.length;if(0===u?c="Failed":1===u?(o=n,n=void 0):(!1===T&&(T=!0,(a.emitWarning?a.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(s="!=")),o instanceof Error)throw o;var f={actual:n,expected:i,operator:void 0===s?"fail":s,stackStartFn:l||r};void 0!==o&&(f.message=o);var h=new y(f);throw c&&(h.message=c,h.generatedMessage=!0),h},A.AssertionError=y,A.ok=E,A.equal=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");n!=i&&M({actual:n,expected:i,message:a,operator:"==",stackStartFn:r})},A.notEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");n==i&&M({actual:n,expected:i,message:a,operator:"!=",stackStartFn:r})},A.deepEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(n,i)||M({actual:n,expected:i,message:a,operator:"deepEqual",stackStartFn:r})},A.notDeepEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(n,i)&&M({actual:n,expected:i,message:a,operator:"notDeepEqual",stackStartFn:r})},A.deepStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),l(n,i)||M({actual:n,expected:i,message:a,operator:"deepStrictEqual",stackStartFn:r})},A.notDeepStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),l(n,i)&&M({actual:n,expected:i,message:a,operator:"notDeepStrictEqual",stackStartFn:r})},A.strictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");_(n,i)||M({actual:n,expected:i,message:a,operator:"strictEqual",stackStartFn:r})},A.notStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");_(n,i)&&M({actual:n,expected:i,message:a,operator:"notStrictEqual",stackStartFn:r})};var I=function r(n,i,a){var o=this;(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")})(this,r),i.forEach(function(r){r in n&&(void 0!==a&&"string"==typeof a[r]&&x(n[r])&&n[r].test(a[r])?o[r]=a[r]:o[r]=n[r])})};function L(r,n,i,a){if("function"!=typeof n){if(x(n))return n.test(r);if(2==arguments.length)throw new f("expected",["Function","RegExp"],n);if("object"!==o(r)||null===r){var c=new y({actual:r,expected:n,message:i,operator:"deepStrictEqual",stackStartFn:a});throw c.operator=a.name,c}var u=Object.keys(n);if(n instanceof Error)u.push("name","message");else if(0===u.length)throw new h("error",n,"may not be an empty object");return void 0===s&&w(),u.forEach(function(o){"string"==typeof r[o]&&x(n[o])&&n[o].test(r[o])||function(r,n,i,a,o,s){if(!(i in r)||!l(r[i],n[i])){if(!a){var c=new y({actual:new I(r,o),expected:new I(n,o,r),operator:"deepStrictEqual",stackStartFn:s});throw c.actual=r,c.expected=n,c.operator=s.name,c}M({actual:r,expected:n,message:a,operator:s.name,stackStartFn:s})}}(r,n,o,i,u,a)}),!0}return void 0!==n.prototype&&r instanceof n||!Error.isPrototypeOf(n)&&!0===n.call({},r)}function C(r){if("function"!=typeof r)throw new f("fn","Function",r);try{r()}catch(r){return r}return k}function O(r){return m(r)||null!==r&&"object"===o(r)&&"function"==typeof r.then&&"function"==typeof r.catch}function D(r){return Promise.resolve().then(function(){var n;if("function"==typeof r){if(!O(n=r()))throw new p("instance of Promise","promiseFn",n)}else{if(!O(r))throw new f("promiseFn",["Function","Promise"],r);n=r}return Promise.resolve().then(function(){return n}).then(function(){return k}).catch(function(r){return r})})}function P(r,n,i,a){if("string"==typeof i){if(4==arguments.length)throw new f("error",["Object","Error","Function","RegExp"],i);if("object"===o(n)&&null!==n){if(n.message===i)throw new u("error/message",'The error message "'.concat(n.message,'" is identical to the message.'))}else if(n===i)throw new u("error/message",'The error "'.concat(n,'" is identical to the message.'));a=i,i=void 0}else if(null!=i&&"object"!==o(i)&&"function"!=typeof i)throw new f("error",["Object","Error","Function","RegExp"],i);if(n===k){var s="";i&&i.name&&(s+=" (".concat(i.name,")")),s+=a?": ".concat(a):".";var l="rejects"===r.name?"rejection":"exception";M({actual:void 0,expected:i,operator:r.name,message:"Missing expected ".concat(l).concat(s),stackStartFn:r})}if(i&&!L(n,i,a,r))throw n}function B(r,n,i,a){if(n!==k){if("string"==typeof i&&(a=i,i=void 0),!i||L(n,i)){var o=a?": ".concat(a):".",s="doesNotReject"===r.name?"rejection":"exception";M({actual:n,expected:i,operator:r.name,message:"Got unwanted ".concat(s).concat(o,"\n")+'Actual message: "'.concat(n&&n.message,'"'),stackStartFn:r})}throw n}}A.throws=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];P.apply(void 0,[r,C(n)].concat(a))},A.rejects=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return D(n).then(function(n){return P.apply(void 0,[r,n].concat(a))})},A.doesNotThrow=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];B.apply(void 0,[r,C(n)].concat(a))},A.doesNotReject=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return D(n).then(function(n){return B.apply(void 0,[r,n].concat(a))})},A.ifError=function r(n){if(null!=n){var i="ifError got unwanted exception: ";"object"===o(n)&&"string"==typeof n.message?0===n.message.length&&n.constructor?i+=n.constructor.name:i+=n.message:i+=g(n);var a=new y({actual:n,expected:null,operator:"ifError",message:i,stackStartFn:r}),s=n.stack;if("string"==typeof s){var l=s.split("\n");l.shift();for(var c=a.stack.split("\n"),u=0;u<l.length;u++){var f=c.indexOf(l[u]);if(-1!==f){c=c.slice(0,f);break}}a.stack="".concat(c.join("\n"),"\n").concat(l.join("\n"))}throw a}},A.strict=b(function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];S.apply(void 0,[r,i.length].concat(i))},A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),A.strict.strict=A.strict},26144:function(r,n,i){var a=i(4168);function o(r,n){return n&&("object"===h(n)||"function"==typeof n)?n:s(r)}function s(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function l(r){var n="function"==typeof Map?new Map:void 0;return(l=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return c(r,arguments,f(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,r)})(r)}function c(r,n,i){return(c=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}()?function(r,n,i){var a=[null];a.push.apply(a,n);var o=new(Function.bind.apply(r,a));return i&&u(o,i.prototype),o}:Reflect.construct).apply(null,arguments)}function u(r,n){return(u=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function f(r){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function h(r){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var p=i(35840).inspect,d=i(86832).codes.ERR_INVALID_ARG_TYPE;function y(r,n,i){return(void 0===i||i>r.length)&&(i=r.length),r.substring(i-n.length,i)===n}var g="",v="",m="",x="",b={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function _(r){var n=Object.keys(r),i=Object.create(Object.getPrototypeOf(r));return n.forEach(function(n){i[n]=r[n]}),Object.defineProperty(i,"message",{value:r.message}),i}function w(r){return p(r,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var T=function(r){var n;function i(r){if(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,i),"object"!==h(r)||null===r)throw new d("options","Object",r);var n,l=r.message,c=r.operator,u=r.stackStartFn,p=r.actual,T=r.expected,A=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=l)n=o(this,f(i).call(this,String(l)));else if(a.stderr&&a.stderr.isTTY&&(a.stderr&&a.stderr.getColorDepth&&1!==a.stderr.getColorDepth()?(g="\x1b[34m",v="\x1b[32m",x="\x1b[39m",m="\x1b[31m"):(g="",v="",x="",m="")),"object"===h(p)&&null!==p&&"object"===h(T)&&null!==T&&"stack"in p&&p instanceof Error&&"stack"in T&&T instanceof Error&&(p=_(p),T=_(T)),"deepStrictEqual"===c||"strictEqual"===c)n=o(this,f(i).call(this,function(r,n,i){var o="",s="",l=0,c="",u=!1,f=w(r),p=f.split("\n"),d=w(n).split("\n"),_=0,T="";if("strictEqual"===i&&"object"===h(r)&&"object"===h(n)&&null!==r&&null!==n&&(i="strictEqualObject"),1===p.length&&1===d.length&&p[0]!==d[0]){var A=p[0].length+d[0].length;if(A<=10){if(!("object"===h(r)&&null!==r||"object"===h(n)&&null!==n||0===r&&0===n))return"".concat(b[i],"\n\n")+"".concat(p[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==i&&A<(a.stderr&&a.stderr.isTTY?a.stderr.columns:80)){for(;p[0][_]===d[0][_];)_++;_>2&&(T="\n  ".concat(function(r,n){if(n=Math.floor(n),0==r.length||0==n)return"";var i=r.length*n;for(n=Math.floor(Math.log(n)/Math.log(2));n;)r+=r,n--;return r+r.substring(0,i-r.length)}(" ",_),"^"),_=0)}}for(var k=p[p.length-1],M=d[d.length-1];k===M&&(_++<2?c="\n  ".concat(k).concat(c):o=k,p.pop(),d.pop(),0!==p.length&&0!==d.length);)k=p[p.length-1],M=d[d.length-1];var S=Math.max(p.length,d.length);if(0===S){var E=f.split("\n");if(E.length>30)for(E[26]="".concat(g,"...").concat(x);E.length>27;)E.pop();return"".concat(b.notIdentical,"\n\n").concat(E.join("\n"),"\n")}_>3&&(c="\n".concat(g,"...").concat(x).concat(c),u=!0),""!==o&&(c="\n  ".concat(o).concat(c),o="");var I=0,L=b[i]+"\n".concat(v,"+ actual").concat(x," ").concat(m,"- expected").concat(x),C=" ".concat(g,"...").concat(x," Lines skipped");for(_=0;_<S;_++){var O=_-l;if(p.length<_+1)O>1&&_>2&&(O>4?(s+="\n".concat(g,"...").concat(x),u=!0):O>3&&(s+="\n  ".concat(d[_-2]),I++),s+="\n  ".concat(d[_-1]),I++),l=_,o+="\n".concat(m,"-").concat(x," ").concat(d[_]),I++;else if(d.length<_+1)O>1&&_>2&&(O>4?(s+="\n".concat(g,"...").concat(x),u=!0):O>3&&(s+="\n  ".concat(p[_-2]),I++),s+="\n  ".concat(p[_-1]),I++),l=_,s+="\n".concat(v,"+").concat(x," ").concat(p[_]),I++;else{var D=d[_],P=p[_],B=P!==D&&(!y(P,",")||P.slice(0,-1)!==D);B&&y(D,",")&&D.slice(0,-1)===P&&(B=!1,P+=","),B?(O>1&&_>2&&(O>4?(s+="\n".concat(g,"...").concat(x),u=!0):O>3&&(s+="\n  ".concat(p[_-2]),I++),s+="\n  ".concat(p[_-1]),I++),l=_,s+="\n".concat(v,"+").concat(x," ").concat(P),o+="\n".concat(m,"-").concat(x," ").concat(D),I+=2):(s+=o,o="",1!==O&&0!==_||(s+="\n  ".concat(P),I++))}if(I>20&&_<S-2)return"".concat(L).concat(C,"\n").concat(s,"\n").concat(g,"...").concat(x).concat(o,"\n")+"".concat(g,"...").concat(x)}return"".concat(L).concat(u?C:"","\n").concat(s).concat(o).concat(c).concat(T)}(p,T,c)));else if("notDeepStrictEqual"===c||"notStrictEqual"===c){var k=b[c],M=w(p).split("\n");if("notStrictEqual"===c&&"object"===h(p)&&null!==p&&(k=b.notStrictEqualObject),M.length>30)for(M[26]="".concat(g,"...").concat(x);M.length>27;)M.pop();n=1===M.length?o(this,f(i).call(this,"".concat(k," ").concat(M[0]))):o(this,f(i).call(this,"".concat(k,"\n\n").concat(M.join("\n"),"\n")))}else{var S=w(p),E="",I=b[c];"notDeepEqual"===c||"notEqual"===c?(S="".concat(b[c],"\n\n").concat(S)).length>1024&&(S="".concat(S.slice(0,1021),"...")):(E="".concat(w(T)),S.length>512&&(S="".concat(S.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===c||"equal"===c?S="".concat(I,"\n\n").concat(S,"\n\nshould equal\n\n"):E=" ".concat(c," ").concat(E)),n=o(this,f(i).call(this,"".concat(S).concat(E)))}return Error.stackTraceLimit=A,n.generatedMessage=!l,Object.defineProperty(s(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=p,n.expected=T,n.operator=c,Error.captureStackTrace&&Error.captureStackTrace(s(n),u),n.stack,n.name="AssertionError",o(n)}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&u(r,n)}(i,r),n=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(r,n){return p(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(n){var a;a=i[n],n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a})}return r}({},n,{customInspect:!1,depth:0}))}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(i.prototype,n),i}(l(Error));r.exports=T},86832:function(r,n,i){function a(r){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function o(r){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function s(r,n){return(s=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}var l,c,u={};function f(r,n,i){i||(i=Error);var l=function(i){function l(i,s,c){var u,f;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,l),(u=(f=o(l).call(this,"string"==typeof n?n:n(i,s,c)))&&("object"===a(f)||"function"==typeof f)?f:function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this)).code=r,u}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&s(r,n)}(l,i),l}(i);u[r]=l}function h(r,n){if(Array.isArray(r)){var i=r.length;return r=r.map(function(r){return String(r)}),i>2?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:2===i?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}return"of ".concat(n," ").concat(String(r))}f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(r,n,o){if(void 0===l&&(l=i(45408)),l("string"==typeof r,"'name' must be a string"),"string"==typeof n&&(c="not ",n.substr(0,4)===c)?(s="must not be",n=n.replace(/^not /,"")):s="must be",(void 0===p||p>r.length)&&(p=r.length)," argument"===r.substring(p-9,p))u="The ".concat(r," ").concat(s," ").concat(h(n,"type"));else{var s,c,u,f,p,d=("number"!=typeof f&&(f=0),f+1>r.length||-1===r.indexOf(".",f)?"argument":"property");u='The "'.concat(r,'" ').concat(d," ").concat(s," ").concat(h(n,"type"))}return u+". Received type ".concat(a(o))},TypeError),f("ERR_INVALID_ARG_VALUE",function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=i(35840));var o=c.inspect(n);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(r,"' ").concat(a,". Received ").concat(o)},TypeError,RangeError),f("ERR_INVALID_RETURN_VALUE",function(r,n,i){var o;return o=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(a(i)),"Expected ".concat(r,' to be returned from the "').concat(n,'"')+" function but got ".concat(o,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];void 0===l&&(l=i(45408)),l(n.length>0,"At least one arg needs to be specified");var o="The ",s=n.length;switch(n=n.map(function(r){return'"'.concat(r,'"')}),s){case 1:o+="".concat(n[0]," argument");break;case 2:o+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:o+=n.slice(0,s-1).join(", ")+", and ".concat(n[s-1]," arguments")}return"".concat(o," must be specified")},TypeError),r.exports.codes=u},25116:function(r,n,i){function a(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i=[],a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done)&&(i.push(l.value),!n||i.length!==n);a=!0);}catch(r){o=!0,s=r}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var s=void 0!==/a/g.flags,l=function(r){var n=[];return r.forEach(function(r){return n.push(r)}),n},c=function(r){var n=[];return r.forEach(function(r,i){return n.push([i,r])}),n},u=Object.is?Object.is:i(39896),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:i(1560);function p(r){return r.call.bind(r)}var d=p(Object.prototype.hasOwnProperty),y=p(Object.prototype.propertyIsEnumerable),g=p(Object.prototype.toString),v=i(35840).types,m=v.isAnyArrayBuffer,x=v.isArrayBufferView,b=v.isDate,_=v.isMap,w=v.isRegExp,T=v.isSet,A=v.isNativeError,k=v.isBoxedPrimitive,M=v.isNumberObject,S=v.isStringObject,E=v.isBooleanObject,I=v.isBigIntObject,L=v.isSymbolObject,C=v.isFloat32Array,O=v.isFloat64Array;function D(r){if(0===r.length||r.length>10)return!0;for(var n=0;n<r.length;n++){var i=r.charCodeAt(n);if(i<48||i>57)return!0}return 10===r.length&&r>=4294967296}function P(r){return Object.keys(r).filter(D).concat(f(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function B(r,n){if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0}function R(r,n,i,a){if(r===n)return 0!==r||!i||u(r,n);if(i){if("object"!==o(r))return"number"==typeof r&&h(r)&&h(n);if("object"!==o(n)||null===r||null===n||Object.getPrototypeOf(r)!==Object.getPrototypeOf(n))return!1}else{if(null===r||"object"!==o(r))return(null===n||"object"!==o(n))&&r==n;if(null===n||"object"!==o(n))return!1}var l=g(r);if(l!==g(n))return!1;if(Array.isArray(r)){if(r.length!==n.length)return!1;var c=P(r),f=P(n);return c.length===f.length&&F(r,n,i,a,1,c)}if("[object Object]"===l&&(!_(r)&&_(n)||!T(r)&&T(n)))return!1;if(b(r)){if(!b(n)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(n))return!1}else if(w(r)){if(!w(n)||!(s?r.source===n.source&&r.flags===n.flags:RegExp.prototype.toString.call(r)===RegExp.prototype.toString.call(n)))return!1}else if(A(r)||r instanceof Error){if(r.message!==n.message||r.name!==n.name)return!1}else{if(x(r)){if(!i&&(C(r)||O(r))){if(!function(r,n){if(r.byteLength!==n.byteLength)return!1;for(var i=0;i<r.byteLength;i++)if(r[i]!==n[i])return!1;return!0}(r,n))return!1}else if(r.byteLength!==n.byteLength||0!==B(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),new Uint8Array(n.buffer,n.byteOffset,n.byteLength)))return!1;var p=P(r),d=P(n);return p.length===d.length&&F(r,n,i,a,0,p)}if(T(r))return!(!T(n)||r.size!==n.size)&&F(r,n,i,a,2);if(_(r))return!(!_(n)||r.size!==n.size)&&F(r,n,i,a,3);if(m(r)){if(r.byteLength!==n.byteLength||0!==B(new Uint8Array(r),new Uint8Array(n)))return!1}else if(k(r)&&(M(r)?!(M(n)&&u(Number.prototype.valueOf.call(r),Number.prototype.valueOf.call(n))):S(r)?!S(n)||String.prototype.valueOf.call(r)!==String.prototype.valueOf.call(n):E(r)?!E(n)||Boolean.prototype.valueOf.call(r)!==Boolean.prototype.valueOf.call(n):I(r)?!I(n)||BigInt.prototype.valueOf.call(r)!==BigInt.prototype.valueOf.call(n):!L(n)||Symbol.prototype.valueOf.call(r)!==Symbol.prototype.valueOf.call(n)))return!1}return F(r,n,i,a,0)}function z(r,n){return n.filter(function(n){return y(r,n)})}function F(r,n,i,s,u,h){if(5==arguments.length){h=Object.keys(r);var p=Object.keys(n);if(h.length!==p.length)return!1}for(var g=0;g<h.length;g++)if(!d(n,h[g]))return!1;if(i&&5==arguments.length){var v=f(r);if(0!==v.length){var m=0;for(g=0;g<v.length;g++){var x=v[g];if(y(r,x)){if(!y(n,x))return!1;h.push(x),m++}else if(y(n,x))return!1}var b=f(n);if(v.length!==b.length&&z(n,b).length!==m)return!1}else{var _=f(n);if(0!==_.length&&0!==z(n,_).length)return!1}}if(0===h.length&&(0===u||1===u&&0===r.length||0===r.size))return!0;if(void 0===s)s={val1:new Map,val2:new Map,position:0};else{var w=s.val1.get(r);if(void 0!==w){var T=s.val2.get(n);if(void 0!==T)return w===T}s.position++}s.val1.set(r,s.position),s.val2.set(n,s.position);var A=function(r,n,i,s,u,f){var h=0;if(2===f){if(!function(r,n,i,a){for(var s=null,c=l(r),u=0;u<c.length;u++){var f=c[u];if("object"===o(f)&&null!==f)null===s&&(s=new Set),s.add(f);else if(!n.has(f)){if(i||!function(r,n,i){var a=U(i);return null!=a?a:n.has(a)&&!r.has(a)}(r,n,f))return!1;null===s&&(s=new Set),s.add(f)}}if(null!==s){for(var h=l(n),p=0;p<h.length;p++){var d=h[p];if("object"===o(d)&&null!==d){if(!N(s,d,i,a))return!1}else if(!i&&!r.has(d)&&!N(s,d,i,a))return!1}return 0===s.size}return!0}(r,n,i,u))return!1}else if(3===f){if(!function(r,n,i,s){for(var l=null,u=c(r),f=0;f<u.length;f++){var h=a(u[f],2),p=h[0],d=h[1];if("object"===o(p)&&null!==p)null===l&&(l=new Set),l.add(p);else{var y=n.get(p);if(void 0===y&&!n.has(p)||!R(d,y,i,s)){if(i||!function(r,n,i,a,o){var s=U(i);if(null!=s)return s;var l=n.get(s);return!(void 0===l&&!n.has(s)||!R(a,l,!1,o))&&!r.has(s)&&R(a,l,!1,o)}(r,n,p,d,s))return!1;null===l&&(l=new Set),l.add(p)}}}if(null!==l){for(var g=c(n),v=0;v<g.length;v++){var m=a(g[v],2),x=(p=m[0],m[1]);if("object"===o(p)&&null!==p){if(!j(l,r,p,x,i,s))return!1}else if(!(i||r.has(p)&&R(r.get(p),x,!1,s)||j(l,r,p,x,!1,s)))return!1}return 0===l.size}return!0}(r,n,i,u))return!1}else if(1===f)for(;h<r.length;h++){if(!d(r,h)){if(d(n,h))return!1;for(var p=Object.keys(r);h<p.length;h++){var y=p[h];if(!d(n,y)||!R(r[y],n[y],i,u))return!1}return p.length===Object.keys(n).length}if(!d(n,h)||!R(r[h],n[h],i,u))return!1}for(h=0;h<s.length;h++){var g=s[h];if(!R(r[g],n[g],i,u))return!1}return!0}(r,n,i,h,s,u);return s.val1.delete(r),s.val2.delete(n),A}function N(r,n,i,a){for(var o=l(r),s=0;s<o.length;s++){var c=o[s];if(R(n,c,i,a))return r.delete(c),!0}return!1}function U(r){switch(o(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(h(r))return!1}return!0}function j(r,n,i,a,o,s){for(var c=l(r),u=0;u<c.length;u++){var f=c[u];if(R(i,f,o,s)&&R(a,n.get(f),o,s))return r.delete(f),!0}return!1}r.exports={isDeepEqual:function(r,n){return R(r,n,!1)},isDeepStrictEqual:function(r,n){return R(r,n,!0)}}},83160:function(r,n,i){i.r(n),i.d(n,{decode:function(){return c},encode:function(){return l}});for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<64;s++)o[a.charCodeAt(s)]=s;var l=function(r){var n,i=new Uint8Array(r),o=i.length,s="";for(n=0;n<o;n+=3)s+=a[i[n]>>2]+a[(3&i[n])<<4|i[n+1]>>4]+a[(15&i[n+1])<<2|i[n+2]>>6]+a[63&i[n+2]];return o%3==2?s=s.substring(0,s.length-1)+"=":o%3==1&&(s=s.substring(0,s.length-2)+"=="),s},c=function(r){var n,i,a,s,l,c=.75*r.length,u=r.length,f=0;"="===r[r.length-1]&&(c--,"="===r[r.length-2]&&c--);var h=new ArrayBuffer(c),p=new Uint8Array(h);for(n=0;n<u;n+=4)i=o[r.charCodeAt(n)],a=o[r.charCodeAt(n+1)],s=o[r.charCodeAt(n+2)],l=o[r.charCodeAt(n+3)],p[f++]=i<<2|a>>4,p[f++]=(15&a)<<4|s>>2,p[f++]=(3&s)<<6|63&l;return h}},59968:function(r,n){n.byteLength=function(r){var n=c(r),i=n[0],a=n[1];return 3*(i+a)/4-a},n.toByteArray=function(r){var n,i,s=c(r),l=s[0],u=s[1],f=new o(3*(l+u)/4-u),h=0,p=u>0?l-4:l;for(i=0;i<p;i+=4)n=a[r.charCodeAt(i)]<<18|a[r.charCodeAt(i+1)]<<12|a[r.charCodeAt(i+2)]<<6|a[r.charCodeAt(i+3)],f[h++]=n>>16&255,f[h++]=n>>8&255,f[h++]=255&n;return 2===u&&(n=a[r.charCodeAt(i)]<<2|a[r.charCodeAt(i+1)]>>4,f[h++]=255&n),1===u&&(n=a[r.charCodeAt(i)]<<10|a[r.charCodeAt(i+1)]<<4|a[r.charCodeAt(i+2)]>>2,f[h++]=n>>8&255,f[h++]=255&n),f},n.fromByteArray=function(r){for(var n,a=r.length,o=a%3,s=[],l=0,c=a-o;l<c;l+=16383)s.push(function(r,n,a){for(var o,s=[],l=n;l<a;l+=3)s.push(i[(o=(r[l]<<16&16711680)+(r[l+1]<<8&65280)+(255&r[l+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}(r,l,l+16383>c?c:l+16383));return 1===o?s.push(i[(n=r[a-1])>>2]+i[n<<4&63]+"=="):2===o&&s.push(i[(n=(r[a-2]<<8)+r[a-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),s.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)i[l]=s[l],a[s.charCodeAt(l)]=l;function c(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");return -1===i&&(i=n),[i,i===n?0:4-i%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},64928:function(r){function n(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)>=0?(s=l,o=l-1):a=l+1}return s}function i(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)>0?(s=l,o=l-1):a=l+1}return s}function a(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)<0?(s=l,a=l+1):o=l-1}return s}function o(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,c=r[l];(void 0!==i?i(c,n):c-n)<=0?(s=l,a=l+1):o=l-1}return s}function s(r,n,i,a,o){for(;a<=o;){var s=a+o>>>1,l=r[s],c=void 0!==i?i(l,n):l-n;if(0===c)return s;c<=0?a=s+1:o=s-1}return -1}function l(r,n,i,a,o,s){return"function"==typeof i?s(r,n,i,void 0===a?0:0|a,void 0===o?r.length-1:0|o):s(r,n,void 0,void 0===i?0:0|i,void 0===a?r.length-1:0|a)}r.exports={ge:function(r,i,a,o,s){return l(r,i,a,o,s,n)},gt:function(r,n,a,o,s){return l(r,n,a,o,s,i)},lt:function(r,n,i,o,s){return l(r,n,i,o,s,a)},le:function(r,n,i,a,s){return l(r,n,i,a,s,o)},eq:function(r,n,i,a,o){return l(r,n,i,a,o,s)}}},308:function(r,n){function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},29620:function(r,n,i){var a=i(32420);r.exports=function(r,n){n||(n={});var i,l,c,u,f,h,p,d,y,g,v,m=null==n.cutoff?.25:n.cutoff,x=null==n.radius?8:n.radius,b=n.channel||0;if(ArrayBuffer.isView(r)||Array.isArray(r)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,l=n.height,u=r,h=n.stride?n.stride:Math.floor(r.length/i/l)}else window.HTMLCanvasElement&&r instanceof window.HTMLCanvasElement?(p=(d=r).getContext("2d"),i=d.width,l=d.height,u=(y=p.getImageData(0,0,i,l)).data,h=4):window.CanvasRenderingContext2D&&r instanceof window.CanvasRenderingContext2D?(p=r,i=(d=r.canvas).width,l=d.height,u=(y=p.getImageData(0,0,i,l)).data,h=4):window.ImageData&&r instanceof window.ImageData&&(y=r,i=r.width,l=r.height,u=y.data,h=4);if(c=Math.max(i,l),window.Uint8ClampedArray&&u instanceof window.Uint8ClampedArray||window.Uint8Array&&u instanceof window.Uint8Array)for(f=u,u=Array(i*l),g=0,v=f.length;g<v;g++)u[g]=f[g*h+b]/255;else if(1!==h)throw Error("Raw data can have only 1 value per pixel");var _=Array(i*l),w=Array(i*l),T=Array(c),A=Array(c),k=Array(c+1),M=Array(c);for(g=0,v=i*l;g<v;g++){var S=u[g];_[g]=1===S?0:0===S?o:Math.pow(Math.max(0,.5-S),2),w[g]=1===S?o:0===S?0:Math.pow(Math.max(0,S-.5),2)}s(_,i,l,T,A,M,k),s(w,i,l,T,A,M,k);var E=window.Float32Array?new Float32Array(i*l):Array(i*l);for(g=0,v=i*l;g<v;g++)E[g]=a(1-((_[g]-w[g])/x+m),0,1);return E};var o=1e20;function s(r,n,i,a,o,s,c){for(var u=0;u<n;u++){for(var f=0;f<i;f++)a[f]=r[f*n+u];for(l(a,o,s,c,i),f=0;f<i;f++)r[f*n+u]=o[f]}for(f=0;f<i;f++){for(u=0;u<n;u++)a[u]=r[f*n+u];for(l(a,o,s,c,n),u=0;u<n;u++)r[f*n+u]=Math.sqrt(o[u])}}function l(r,n,i,a,s){i[0]=0,a[0]=-o,a[1]=+o;for(var l=1,c=0;l<s;l++){for(var u=(r[l]+l*l-(r[i[c]]+i[c]*i[c]))/(2*l-2*i[c]);u<=a[c];)c--,u=(r[l]+l*l-(r[i[c]]+i[c]*i[c]))/(2*l-2*i[c]);i[++c]=l,a[c]=u,a[c+1]=+o}for(l=0,c=0;l<s;l++){for(;a[c+1]<l;)c++;n[l]=(l-i[c])*(l-i[c])+r[i[c]]}}},99676:function(r,n,i){var a=i(53664),o=i(57916),s=o(a("String.prototype.indexOf"));r.exports=function(r,n){var i=a(r,!!n);return"function"==typeof i&&s(r,".prototype.")>-1?o(i):i}},57916:function(r,n,i){var a=i(8844),o=i(53664),s=i(14500),l=o("%TypeError%"),c=o("%Function.prototype.apply%"),u=o("%Function.prototype.call%"),f=o("%Reflect.apply%",!0)||a.call(u,c),h=o("%Object.defineProperty%",!0),p=o("%Math.max%");if(h)try{h({},"a",{value:1})}catch(r){h=null}r.exports=function(r){if("function"!=typeof r)throw new l("a function is required");var n=f(a,u,arguments);return s(n,1+p(0,r.length-(arguments.length-1)),!0)};var d=function(){return f(a,c,arguments)};h?h(r.exports,"apply",{value:d}):r.exports.apply=d},32420:function(r){r.exports=function(r,n,i){return n<i?r<n?n:r>i?i:r:r<i?i:r>n?n:r}},3808:function(r,n,i){var a=i(32420);function o(r,n){null==n&&(n=!0);var i=r[0],o=r[1],s=r[2],l=r[3];return null==l&&(l=n?1:255),n&&(i*=255,o*=255,s*=255,l*=255),16777216*(i=255&a(i,0,255))+((o=255&a(o,0,255))<<16)+((s=255&a(s,0,255))<<8)+(255&a(l,0,255))}r.exports=o,r.exports.to=o,r.exports.from=function(r,n){var i=(r=+r)>>>24,a=(16711680&r)>>>16,o=(65280&r)>>>8,s=255&r;return!1===n?[i,a,o,s]:[i/255,a/255,o/255,s/255]}},17592:function(r){r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(r,n,i){var a=i(96824),o=i(32420),s=i(72512);r.exports=function(r,n){"float"!==n&&n||(n="array"),"uint"===n&&(n="uint8"),"uint_clamped"===n&&(n="uint8_clamped");var i,l=new(s(n))(4),c="uint8"!==n&&"uint8_clamped"!==n;return r.length&&"string"!=typeof r||((r=a(r))[0]/=255,r[1]/=255,r[2]/=255),(i=r)instanceof Uint8Array||i instanceof Uint8ClampedArray||Array.isArray(i)&&(i[0]>1||0===i[0])&&(i[1]>1||0===i[1])&&(i[2]>1||0===i[2])&&(!i[3]||i[3]>1)?(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=null!=r[3]?r[3]:255,c&&(l[0]/=255,l[1]/=255,l[2]/=255,l[3]/=255)):c?(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=null!=r[3]?r[3]:1):(l[0]=o(Math.floor(255*r[0]),0,255),l[1]=o(Math.floor(255*r[1]),0,255),l[2]=o(Math.floor(255*r[2]),0,255),l[3]=null==r[3]?255:o(Math.floor(255*r[3]),0,255)),l}},96824:function(r,n,i){var a=i(95532),o=i(53576),s=i(32420);r.exports=function(r){var n,i=a(r);return i.space?((n=[,,,])[0]=s(i.values[0],0,255),n[1]=s(i.values[1],0,255),n[2]=s(i.values[2],0,255),"h"===i.space[0]&&(n=o.rgb(n)),n.push(s(i.alpha,0,1)),n):[]}},95532:function(r,n,i){var a=i(17592);r.exports=function(r){var n,i,s=[],l=1;if("string"==typeof r){if(a[r=r.toLowerCase()])s=a[r].slice(),i="rgb";else if("transparent"===r)l=0,i="rgb",s=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var c=r.slice(1);l=1,(h=c.length)<=4?(s=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===h&&(l=parseInt(c[3]+c[3],16)/255)):(s=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===h&&(l=parseInt(c[6]+c[7],16)/255)),s[0]||(s[0]=0),s[1]||(s[1]=0),s[2]||(s[2]=0),i="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var u=n[1],f="rgb"===u;i=c=u.replace(/a$/,"");var h="cmyk"===c?4:"gray"===c?1:3;s=n[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(r,n){if(/%$/.test(r))return n===h?parseFloat(r)/100:"rgb"===c?255*parseFloat(r)/100:parseFloat(r);if("h"===c[n]){if(/deg$/.test(r))return parseFloat(r);if(void 0!==o[r])return o[r]}return parseFloat(r)}),u===c&&s.push(1),l=f||void 0===s[h]?1:s[h],s=s.slice(0,h)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(s=r.match(/([0-9]+)/g).map(function(r){return parseFloat(r)}),i=r.match(/([a-z])/gi).join("").toLowerCase())}else isNaN(r)?Array.isArray(r)||r.length?(s=[r[0],r[1],r[2]],i="rgb",l=4===r.length?r[3]:1):r instanceof Object&&(null!=r.r||null!=r.red||null!=r.R?(i="rgb",s=[r.r||r.red||r.R||0,r.g||r.green||r.G||0,r.b||r.blue||r.B||0]):(i="hsl",s=[r.h||r.hue||r.H||0,r.s||r.saturation||r.S||0,r.l||r.lightness||r.L||r.b||r.brightness]),l=r.a||r.alpha||r.opacity||1,null!=r.opacity&&(l/=100)):(i="rgb",s=[r>>>16,(65280&r)>>>8,255&r]);return{space:i,values:s,alpha:l}};var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(r,n,i){var a=i(19336);r.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var n,i,a,o,s,l=r[0]/360,c=r[1]/100,u=r[2]/100;if(0===c)return[s=255*u,s,s];n=2*u-(i=u<.5?u*(1+c):u+c-u*c),o=[0,0,0];for(var f=0;f<3;f++)(a=l+-(1/3*(f-1)))<0?a++:a>1&&a--,s=6*a<1?n+6*(i-n)*a:2*a<1?i:3*a<2?n+(i-n)*(2/3-a)*6:n,o[f]=255*s;return o}},a.hsl=function(r){var n,i,a=r[0]/255,o=r[1]/255,s=r[2]/255,l=Math.min(a,o,s),c=Math.max(a,o,s),u=c-l;return c===l?n=0:a===c?n=(o-s)/u:o===c?n=2+(s-a)/u:s===c&&(n=4+(a-o)/u),(n=Math.min(60*n,360))<0&&(n+=360),i=(l+c)/2,[n,100*(c===l?0:i<=.5?u/(c+l):u/(2-c-l)),100*i]}},19336:function(r){r.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(r){r.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(r,n,i){r.exports={parse:i(46416),stringify:i(49395)}},8744:function(r,n,i){var a=i(30584);r.exports={isSize:function(r){return/^[\d\.]/.test(r)||-1!==r.indexOf("/")||-1!==a.indexOf(r)}}},46416:function(r,n,i){var a=i(92384),o=i(68194),s=i(3748),l=i(2904),c=i(47916),u=i(7294),f=i(39956),h=i(8744).isSize;r.exports=d;var p=d.cache={};function d(r){if("string"!=typeof r)throw Error("Font argument must be a string.");if(p[r])return p[r];if(""===r)throw Error("Cannot parse an empty string.");if(-1!==s.indexOf(r))return p[r]={system:r};for(var n,i={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=f(r,/\s+/);n=d.shift();){if(-1!==o.indexOf(n))return["style","variant","weight","stretch"].forEach(function(r){i[r]=n}),p[r]=i;if(-1===c.indexOf(n)){if("normal"!==n&&"small-caps"!==n){if(-1===u.indexOf(n)){if(-1===l.indexOf(n)){if(h(n)){var g=f(n,"/");if(i.size=g[0],null!=g[1]?i.lineHeight=y(g[1]):"/"===d[0]&&(d.shift(),i.lineHeight=y(d.shift())),!d.length)throw Error("Missing required font-family.");return i.family=f(d.join(" "),/\s*,\s*/).map(a),p[r]=i}throw Error("Unknown or unsupported font token: "+n)}i.weight=n}else i.stretch=n}else i.variant=n}else i.style=n}throw Error("Missing required font-size.")}function y(r){var n=parseFloat(r);return n.toString()===r?n:r}},49395:function(r,n,i){var a=i(55616),o=i(8744).isSize,s=g(i(68194)),l=g(i(3748)),c=g(i(2904)),u=g(i(47916)),f=g(i(7294)),h={normal:1,"small-caps":1},p={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d="serif";function y(r,n){if(r&&!n[r]&&!s[r])throw Error("Unknown keyword `"+r+"`");return r}function g(r){for(var n={},i=0;i<r.length;i++)n[r[i]]=1;return n}r.exports=function(r){if((r=a(r,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return r.system&&y(r.system,l),r.system;if(y(r.style,u),y(r.variant,h),y(r.weight,c),y(r.stretch,f),null==r.size&&(r.size="1rem"),"number"==typeof r.size&&(r.size+="px"),!o)throw Error("Bad size value `"+r.size+"`");r.family||(r.family=d),Array.isArray(r.family)&&(r.family.length||(r.family=[d]),r.family=r.family.map(function(r){return p[r]?r:'"'+r+'"'}).join(", "));var n=[];return n.push(r.style),r.variant!==r.style&&n.push(r.variant),r.weight!==r.variant&&r.weight!==r.style&&n.push(r.weight),r.stretch!==r.weight&&r.stretch!==r.variant&&r.stretch!==r.style&&n.push(r.stretch),n.push(r.size+(null==r.lineHeight||"normal"===r.lineHeight||r.lineHeight+""=="1"?"":"/"+r.lineHeight)),n.push(r.family),n.filter(Boolean).join(" ")}},27940:function(r,n,i){var a,o=i(81680),s=i(18496),l=i(87396),c=i(95920),u=i(50868),f=i(84323),h=Function.prototype.bind,p=Object.defineProperty,d=Object.prototype.hasOwnProperty;a=function(r,n,i){var a,o=s(n)&&l(n.value);return delete(a=c(n)).writable,delete a.value,a.get=function(){return!i.overwriteDefinition&&d.call(this,r)?o:(n.value=h.call(o,i.resolveContext?i.resolveContext(this):this),p(this,r,n),this[r])},a},r.exports=function(r){var n=u(arguments[1]);return o(n.resolveContext)&&l(n.resolveContext),f(r,function(r,i){return a(i,r,n)})}},21092:function(r,n,i){var a=i(81680),o=i(85488),s=i(38452),l=i(50868),c=i(71056);(r.exports=function(r,n){var i,o,u,f,h;return arguments.length<2||"string"!=typeof r?(f=n,n=r,r=null):f=arguments[2],a(r)?(i=c.call(r,"c"),o=c.call(r,"e"),u=c.call(r,"w")):(i=u=!0,o=!1),h={value:n,configurable:i,enumerable:o,writable:u},f?s(l(f),h):h}).gs=function(r,n,i){var u,f,h,p;return"string"!=typeof r?(h=i,i=n,n=r,r=null):h=arguments[3],a(n)?o(n)?a(i)?o(i)||(h=i,i=void 0):i=void 0:(h=n,n=i=void 0):n=void 0,a(r)?(u=c.call(r,"c"),f=c.call(r,"e")):(u=!0,f=!1),p={get:n,set:i,configurable:u,enumerable:f},h?s(l(h),p):p}},84706:function(r,n,i){function a(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}i.d(n,{XE:function(){return a},kv:function(){return c},mo:function(){return f},Uf:function(){return h},SY:function(){return p},ik:function(){return d},oh:function(){return y}}),1===(o=a).length&&(s=o,o=function(r,n){return a(s(r),n)});var o,s,l=Array.prototype;function c(r,n){var i,a,o=r.length,s=-1;if(null==n){for(;++s<o;)if(null!=(i=r[s])&&i>=i)for(a=i;++s<o;)null!=(i=r[s])&&i>a&&(a=i)}else for(;++s<o;)if(null!=(i=n(r[s],s,r))&&i>=i)for(a=i;++s<o;)null!=(i=n(r[s],s,r))&&i>a&&(a=i);return a}function u(r){return null===r?NaN:+r}function f(r,n){var i,a=r.length,o=a,s=-1,l=0;if(null==n)for(;++s<a;)isNaN(i=u(r[s]))?--o:l+=i;else for(;++s<a;)isNaN(i=u(n(r[s],s,r)))?--o:l+=i;if(o)return l/o}function h(r){for(var n,i,a,o=r.length,s=-1,l=0;++s<o;)l+=r[s].length;for(i=Array(l);--o>=0;)for(n=(a=r[o]).length;--n>=0;)i[--l]=a[n];return i}function p(r,n){var i,a,o=r.length,s=-1;if(null==n){for(;++s<o;)if(null!=(i=r[s])&&i>=i)for(a=i;++s<o;)null!=(i=r[s])&&a>i&&(a=i)}else for(;++s<o;)if(null!=(i=n(r[s],s,r))&&i>=i)for(a=i;++s<o;)null!=(i=n(r[s],s,r))&&a>i&&(a=i);return a}function d(r,n,i){r=+r,n=+n,i=(o=arguments.length)<2?(n=r,r=0,1):o<3?1:+i;for(var a=-1,o=0|Math.max(0,Math.ceil((n-r)/i)),s=Array(o);++a<o;)s[a]=r+a*i;return s}function y(r,n){var i,a=r.length,o=-1,s=0;if(null==n)for(;++o<a;)(i=+r[o])&&(s+=i);else for(;++o<a;)(i=+n(r[o],o,r))&&(s+=i);return s}l.slice,l.map},34712:function(r,n,i){function a(){}function o(r,n){var i=new a;if(r instanceof a)r.each(function(r,n){i.set(n,r)});else if(Array.isArray(r)){var o,s=-1,l=r.length;if(null==n)for(;++s<l;)i.set(s,r[s]);else for(;++s<l;)i.set(n(o=r[s],s,r),o)}else if(r)for(var c in r)i.set(c,r[c]);return i}i.d(n,{kH:function(){return s},UJ:function(){return l}}),a.prototype=o.prototype={constructor:a,has:function(r){return"$"+r in this},get:function(r){return this["$"+r]},set:function(r,n){return this["$"+r]=n,this},remove:function(r){var n="$"+r;return n in this&&delete this[n]},clear:function(){for(var r in this)"$"===r[0]&&delete this[r]},keys:function(){var r=[];for(var n in this)"$"===n[0]&&r.push(n.slice(1));return r},values:function(){var r=[];for(var n in this)"$"===n[0]&&r.push(this[n]);return r},entries:function(){var r=[];for(var n in this)"$"===n[0]&&r.push({key:n.slice(1),value:this[n]});return r},size:function(){var r=0;for(var n in this)"$"===n[0]&&++r;return r},empty:function(){for(var r in this)if("$"===r[0])return!1;return!0},each:function(r){for(var n in this)"$"===n[0]&&r(this[n],n.slice(1),this)}};var s=o;function l(){var r,n,i,a=[],o=[];function l(i,o,c,u){if(o>=a.length)return null!=r&&i.sort(r),null!=n?n(i):i;for(var f,h,p,d=-1,y=i.length,g=a[o++],v=s(),m=c();++d<y;)(p=v.get(f=g(h=i[d])+""))?p.push(h):v.set(f,[h]);return v.each(function(r,n){u(m,n,l(r,o,c,u))}),m}return i={object:function(r){return l(r,0,c,u)},map:function(r){return l(r,0,f,h)},entries:function(r){return function r(i,s){if(++s>a.length)return i;var l,c=o[s-1];return null!=n&&s>=a.length?l=i.entries():(l=[],i.each(function(n,i){l.push({key:i,values:r(n,s)})})),null!=c?l.sort(function(r,n){return c(r.key,n.key)}):l}(l(r,0,f,h),0)},key:function(r){return a.push(r),i},sortKeys:function(r){return o[a.length-1]=r,i},sortValues:function(n){return r=n,i},rollup:function(r){return n=r,i}}}function c(){return{}}function u(r,n,i){r[n]=i}function f(){return s()}function h(r,n,i){r.set(n,i)}function p(){}var d=s.prototype;p.prototype=(function(r,n){var i=new p;if(r instanceof p)r.each(function(r){i.add(r)});else if(r){var a=-1,o=r.length;if(null==n)for(;++a<o;)i.add(r[a]);else for(;++a<o;)i.add(n(r[a],a,r))}return i}).prototype={constructor:p,has:d.has,add:function(r){return this["$"+(r+="")]=r,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each}},49812:function(r,n,i){function a(r,n){var i;function a(){var a,o,s=i.length,l=0,c=0;for(a=0;a<s;++a)l+=(o=i[a]).x,c+=o.y;for(l=l/s-r,c=c/s-n,a=0;a<s;++a)(o=i[a]).x-=l,o.y-=c}return null==r&&(r=0),null==n&&(n=0),a.initialize=function(r){i=r},a.x=function(n){return arguments.length?(r=+n,a):r},a.y=function(r){return arguments.length?(n=+r,a):n},a}function o(r){return function(){return r}}function s(){return 1e-6*(Math.random()-.5)}function l(r,n,i,a){if(isNaN(n)||isNaN(i))return r;var o,s,l,c,u,f,h,p,d,y=r._root,g={data:a},v=r._x0,m=r._y0,x=r._x1,b=r._y1;if(!y)return r._root=g,r;for(;y.length;)if((f=n>=(s=(v+x)/2))?v=s:x=s,(h=i>=(l=(m+b)/2))?m=l:b=l,o=y,!(y=y[p=h<<1|f]))return o[p]=g,r;if(c=+r._x.call(null,y.data),u=+r._y.call(null,y.data),n===c&&i===u)return g.next=y,o?o[p]=g:r._root=g,r;do o=o?o[p]=[,,,,]:r._root=[,,,,],(f=n>=(s=(v+x)/2))?v=s:x=s,(h=i>=(l=(m+b)/2))?m=l:b=l;while((p=h<<1|f)==(d=(u>=l)<<1|c>=s))return o[d]=y,o[p]=g,r}function c(r,n,i,a,o){this.node=r,this.x0=n,this.y0=i,this.x1=a,this.y1=o}function u(r){return r[0]}function f(r){return r[1]}function h(r,n,i){var a=new p(null==n?u:n,null==i?f:i,NaN,NaN,NaN,NaN);return null==r?a:a.addAll(r)}function p(r,n,i,a,o,s){this._x=r,this._y=n,this._x0=i,this._y0=a,this._x1=o,this._y1=s,this._root=void 0}function d(r){for(var n={data:r.data},i=n;r=r.next;)i=i.next={data:r.data};return n}i.r(n),i.d(n,{forceCenter:function(){return a},forceCollide:function(){return m},forceLink:function(){return w},forceManyBody:function(){return Z},forceRadial:function(){return X},forceSimulation:function(){return Y},forceX:function(){return K},forceY:function(){return J}});var y=h.prototype=p.prototype;function g(r){return r.x+r.vx}function v(r){return r.y+r.vy}function m(r){var n,i,a=1,l=1;function c(){for(var r,o,c,f,p,d,y,m=n.length,x=0;x<l;++x)for(o=h(n,g,v).visitAfter(u),r=0;r<m;++r)y=(d=i[(c=n[r]).index])*d,f=c.x+c.vx,p=c.y+c.vy,o.visit(b);function b(r,n,i,o,l){var u=r.data,h=r.r,g=d+h;if(!u)return n>f+g||o<f-g||i>p+g||l<p-g;if(u.index>c.index){var v=f-u.x-u.vx,m=p-u.y-u.vy,x=v*v+m*m;x<g*g&&(0===v&&(x+=(v=s())*v),0===m&&(x+=(m=s())*m),x=(g-(x=Math.sqrt(x)))/x*a,c.vx+=(v*=x)*(g=(h*=h)/(y+h)),c.vy+=(m*=x)*g,u.vx-=v*(g=1-g),u.vy-=m*g)}}}function u(r){if(r.data)return r.r=i[r.data.index];for(var n=r.r=0;n<4;++n)r[n]&&r[n].r>r.r&&(r.r=r[n].r)}function f(){if(n){var a,o,s=n.length;for(i=Array(s),a=0;a<s;++a)i[(o=n[a]).index]=+r(o,a,n)}}return"function"!=typeof r&&(r=o(null==r?1:+r)),c.initialize=function(r){n=r,f()},c.iterations=function(r){return arguments.length?(l=+r,c):l},c.strength=function(r){return arguments.length?(a=+r,c):a},c.radius=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),f(),c):r},c}y.copy=function(){var r,n,i=new p(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return i;if(!a.length)return i._root=d(a),i;for(r=[{source:a,target:i._root=[,,,,]}];a=r.pop();)for(var o=0;o<4;++o)(n=a.source[o])&&(n.length?r.push({source:n,target:a.target[o]=[,,,,]}):a.target[o]=d(n));return i},y.add=function(r){var n=+this._x.call(null,r),i=+this._y.call(null,r);return l(this.cover(n,i),n,i,r)},y.addAll=function(r){var n,i,a,o,s=r.length,c=Array(s),u=Array(s),f=1/0,h=1/0,p=-1/0,d=-1/0;for(i=0;i<s;++i)isNaN(a=+this._x.call(null,n=r[i]))||isNaN(o=+this._y.call(null,n))||(c[i]=a,u[i]=o,a<f&&(f=a),a>p&&(p=a),o<h&&(h=o),o>d&&(d=o));if(f>p||h>d)return this;for(this.cover(f,h).cover(p,d),i=0;i<s;++i)l(this,c[i],u[i],r[i]);return this},y.cover=function(r,n){if(isNaN(r=+r)||isNaN(n=+n))return this;var i=this._x0,a=this._y0,o=this._x1,s=this._y1;if(isNaN(i))o=(i=Math.floor(r))+1,s=(a=Math.floor(n))+1;else{for(var l,c,u=o-i,f=this._root;i>r||r>=o||a>n||n>=s;)switch(c=(n<a)<<1|r<i,(l=[,,,,])[c]=f,f=l,u*=2,c){case 0:o=i+u,s=a+u;break;case 1:i=o-u,s=a+u;break;case 2:o=i+u,a=s-u;break;case 3:i=o-u,a=s-u}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=a,this._x1=o,this._y1=s,this},y.data=function(){var r=[];return this.visit(function(n){if(!n.length)do r.push(n.data);while(n=n.next)}),r},y.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},y.find=function(r,n,i){var a,o,s,l,u,f,h,p=this._x0,d=this._y0,y=this._x1,g=this._y1,v=[],m=this._root;for(m&&v.push(new c(m,p,d,y,g)),null==i?i=1/0:(p=r-i,d=n-i,y=r+i,g=n+i,i*=i);f=v.pop();)if(!(!(m=f.node)||(o=f.x0)>y||(s=f.y0)>g||(l=f.x1)<p||(u=f.y1)<d)){if(m.length){var x=(o+l)/2,b=(s+u)/2;v.push(new c(m[3],x,b,l,u),new c(m[2],o,b,x,u),new c(m[1],x,s,l,b),new c(m[0],o,s,x,b)),(h=(n>=b)<<1|r>=x)&&(f=v[v.length-1],v[v.length-1]=v[v.length-1-h],v[v.length-1-h]=f)}else{var _=r-+this._x.call(null,m.data),w=n-+this._y.call(null,m.data),T=_*_+w*w;if(T<i){var A=Math.sqrt(i=T);p=r-A,d=n-A,y=r+A,g=n+A,a=m.data}}}return a},y.remove=function(r){if(isNaN(s=+this._x.call(null,r))||isNaN(l=+this._y.call(null,r)))return this;var n,i,a,o,s,l,c,u,f,h,p,d,y=this._root,g=this._x0,v=this._y0,m=this._x1,x=this._y1;if(!y)return this;if(y.length)for(;;){if((f=s>=(c=(g+m)/2))?g=c:m=c,(h=l>=(u=(v+x)/2))?v=u:x=u,n=y,!(y=y[p=h<<1|f]))return this;if(!y.length)break;(n[p+1&3]||n[p+2&3]||n[p+3&3])&&(i=n,d=p)}for(;y.data!==r;)if(a=y,!(y=y.next))return this;return(o=y.next)&&delete y.next,a?o?a.next=o:delete a.next:n?(o?n[p]=o:delete n[p],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(i?i[d]=y:this._root=y)):this._root=o,this},y.removeAll=function(r){for(var n=0,i=r.length;n<i;++n)this.remove(r[n]);return this},y.root=function(){return this._root},y.size=function(){var r=0;return this.visit(function(n){if(!n.length)do++r;while(n=n.next)}),r},y.visit=function(r){var n,i,a,o,s,l,u=[],f=this._root;for(f&&u.push(new c(f,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!r(f=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&f.length){var h=(a+s)/2,p=(o+l)/2;(i=f[3])&&u.push(new c(i,h,p,s,l)),(i=f[2])&&u.push(new c(i,a,p,h,l)),(i=f[1])&&u.push(new c(i,h,o,s,p)),(i=f[0])&&u.push(new c(i,a,o,h,p))}return this},y.visitAfter=function(r){var n,i=[],a=[];for(this._root&&i.push(new c(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var o=n.node;if(o.length){var s,l=n.x0,u=n.y0,f=n.x1,h=n.y1,p=(l+f)/2,d=(u+h)/2;(s=o[0])&&i.push(new c(s,l,u,p,d)),(s=o[1])&&i.push(new c(s,p,u,f,d)),(s=o[2])&&i.push(new c(s,l,d,p,h)),(s=o[3])&&i.push(new c(s,p,d,f,h))}a.push(n)}for(;n=a.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this},y.x=function(r){return arguments.length?(this._x=r,this):this._x},y.y=function(r){return arguments.length?(this._y=r,this):this._y};var x=i(34712);function b(r){return r.index}function _(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function w(r){var n,i,a,l,c,u=b,f=function(r){return 1/Math.min(l[r.source.index],l[r.target.index])},h=o(30),p=1;function d(a){for(var o=0,l=r.length;o<p;++o)for(var u,f,h,d,y,g,v,m=0;m<l;++m)f=(u=r[m]).source,d=(h=u.target).x+h.vx-f.x-f.vx||s(),y=h.y+h.vy-f.y-f.vy||s(),d*=g=((g=Math.sqrt(d*d+y*y))-i[m])/g*a*n[m],y*=g,h.vx-=d*(v=c[m]),h.vy-=y*v,f.vx+=d*(v=1-v),f.vy+=y*v}function y(){if(a){var o,s,f=a.length,h=r.length,p=(0,x.kH)(a,u);for(o=0,l=Array(f);o<h;++o)(s=r[o]).index=o,"object"!=typeof s.source&&(s.source=_(p,s.source)),"object"!=typeof s.target&&(s.target=_(p,s.target)),l[s.source.index]=(l[s.source.index]||0)+1,l[s.target.index]=(l[s.target.index]||0)+1;for(o=0,c=Array(h);o<h;++o)s=r[o],c[o]=l[s.source.index]/(l[s.source.index]+l[s.target.index]);n=Array(h),g(),i=Array(h),v()}}function g(){if(a)for(var i=0,o=r.length;i<o;++i)n[i]=+f(r[i],i,r)}function v(){if(a)for(var n=0,o=r.length;n<o;++n)i[n]=+h(r[n],n,r)}return null==r&&(r=[]),d.initialize=function(r){a=r,y()},d.links=function(n){return arguments.length?(r=n,y(),d):r},d.id=function(r){return arguments.length?(u=r,d):u},d.iterations=function(r){return arguments.length?(p=+r,d):p},d.strength=function(r){return arguments.length?(f="function"==typeof r?r:o(+r),g(),d):f},d.distance=function(r){return arguments.length?(h="function"==typeof r?r:o(+r),v(),d):h},d}var T={value:function(){}};function A(){for(var r,n=0,i=arguments.length,a={};n<i;++n){if(!(r=arguments[n]+"")||r in a||/[\s.]/.test(r))throw Error("illegal type: "+r);a[r]=[]}return new k(a)}function k(r){this._=r}function M(r,n,i){for(var a=0,o=r.length;a<o;++a)if(r[a].name===n){r[a]=T,r=r.slice(0,a).concat(r.slice(a+1));break}return null!=i&&r.push({name:n,value:i}),r}k.prototype=A.prototype={constructor:k,on:function(r,n){var i,a=this._,o=(r+"").trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!a.hasOwnProperty(r))throw Error("unknown type: "+r);return{type:r,name:n}}),s=-1,l=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw Error("invalid callback: "+n);for(;++s<l;)if(i=(r=o[s]).type)a[i]=M(a[i],r.name,n);else if(null==n)for(i in a)a[i]=M(a[i],r.name,null);return this}for(;++s<l;)if((i=(r=o[s]).type)&&(i=function(r,n){for(var i,a=0,o=r.length;a<o;++a)if((i=r[a]).name===n)return i.value}(a[i],r.name)))return i},copy:function(){var r={},n=this._;for(var i in n)r[i]=n[i].slice();return new k(r)},call:function(r,n){if((i=arguments.length-2)>0)for(var i,a,o=Array(i),s=0;s<i;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw Error("unknown type: "+r);for(s=0,i=(a=this._[r]).length;s<i;++s)a[s].value.apply(n,o)},apply:function(r,n,i){if(!this._.hasOwnProperty(r))throw Error("unknown type: "+r);for(var a=this._[r],o=0,s=a.length;o<s;++o)a[o].value.apply(n,i)}};var S,E,I=0,L=0,C=0,O=0,D=0,P=0,B="object"==typeof performance&&performance.now?performance:Date,R="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function z(){return D||(R(F),D=B.now()+P)}function F(){D=0}function N(){this._call=this._time=this._next=null}function U(r,n,i){var a=new N;return a.restart(r,n,i),a}function j(){D=(O=B.now())+P,I=L=0;try{!function(){z(),++I;for(var r,n=S;n;)(r=D-n._time)>=0&&n._call.call(null,r),n=n._next;--I}()}finally{I=0,function(){for(var r,n,i=S,a=1/0;i;)i._call?(a>i._time&&(a=i._time),r=i,i=i._next):(n=i._next,i._next=null,i=r?r._next=n:S=n);E=r,H(a)}(),D=0}}function V(){var r=B.now(),n=r-O;n>1e3&&(P-=n,O=r)}function H(r){I||(L&&(L=clearTimeout(L)),r-D>24?(r<1/0&&(L=setTimeout(j,r-B.now()-P)),C&&(C=clearInterval(C))):(C||(O=B.now(),C=setInterval(V,1e3)),I=1,R(j)))}function q(r){return r.x}function G(r){return r.y}N.prototype=U.prototype={constructor:N,restart:function(r,n,i){if("function"!=typeof r)throw TypeError("callback is not a function");i=(null==i?z():+i)+(null==n?0:+n),this._next||E===this||(E?E._next=this:S=this,E=this),this._call=r,this._time=i,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};var W=Math.PI*(3-Math.sqrt(5));function Y(r){var n,i=1,a=.001,o=1-Math.pow(.001,1/300),s=0,l=.6,c=(0,x.kH)(),u=U(h),f=A("tick","end");function h(){p(),f.call("tick",n),i<a&&(u.stop(),f.call("end",n))}function p(a){var u,f,h=r.length;void 0===a&&(a=1);for(var p=0;p<a;++p)for(i+=(s-i)*o,c.each(function(r){r(i)}),u=0;u<h;++u)null==(f=r[u]).fx?f.x+=f.vx*=l:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=l:(f.y=f.fy,f.vy=0);return n}function d(){for(var n,i=0,a=r.length;i<a;++i){if((n=r[i]).index=i,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var o=10*Math.sqrt(i),s=i*W;n.x=o*Math.cos(s),n.y=o*Math.sin(s)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(r),n}return null==r&&(r=[]),d(),n={tick:p,restart:function(){return u.restart(h),n},stop:function(){return u.stop(),n},nodes:function(i){return arguments.length?(r=i,d(),c.each(y),n):r},alpha:function(r){return arguments.length?(i=+r,n):i},alphaMin:function(r){return arguments.length?(a=+r,n):a},alphaDecay:function(r){return arguments.length?(o=+r,n):+o},alphaTarget:function(r){return arguments.length?(s=+r,n):s},velocityDecay:function(r){return arguments.length?(l=1-r,n):1-l},force:function(r,i){return arguments.length>1?(null==i?c.remove(r):c.set(r,y(i)),n):c.get(r)},find:function(n,i,a){var o,s,l,c,u,f=0,h=r.length;for(null==a?a=1/0:a*=a,f=0;f<h;++f)(l=(o=n-(c=r[f]).x)*o+(s=i-c.y)*s)<a&&(u=c,a=l);return u},on:function(r,i){return arguments.length>1?(f.on(r,i),n):f.on(r)}}}function Z(){var r,n,i,a,l=o(-30),c=1,u=1/0,f=.81;function p(a){var o,s=r.length,l=h(r,q,G).visitAfter(y);for(i=a,o=0;o<s;++o)n=r[o],l.visit(g)}function d(){if(r){var n,i,o=r.length;for(a=Array(o),n=0;n<o;++n)a[(i=r[n]).index]=+l(i,n,r)}}function y(r){var n,i,o,s,l,c=0,u=0;if(r.length){for(o=s=l=0;l<4;++l)(n=r[l])&&(i=Math.abs(n.value))&&(c+=n.value,u+=i,o+=i*n.x,s+=i*n.y);r.x=o/u,r.y=s/u}else{(n=r).x=n.data.x,n.y=n.data.y;do c+=a[n.data.index];while(n=n.next)}r.value=c}function g(r,o,l,h){if(!r.value)return!0;var p=r.x-n.x,d=r.y-n.y,y=h-o,g=p*p+d*d;if(y*y/f<g)return g<u&&(0===p&&(g+=(p=s())*p),0===d&&(g+=(d=s())*d),g<c&&(g=Math.sqrt(c*g)),n.vx+=p*r.value*i/g,n.vy+=d*r.value*i/g),!0;if(!(r.length||g>=u)){(r.data!==n||r.next)&&(0===p&&(g+=(p=s())*p),0===d&&(g+=(d=s())*d),g<c&&(g=Math.sqrt(c*g)));do r.data!==n&&(y=a[r.data.index]*i/g,n.vx+=p*y,n.vy+=d*y);while(r=r.next)}}return p.initialize=function(n){r=n,d()},p.strength=function(r){return arguments.length?(l="function"==typeof r?r:o(+r),d(),p):l},p.distanceMin=function(r){return arguments.length?(c=r*r,p):Math.sqrt(c)},p.distanceMax=function(r){return arguments.length?(u=r*r,p):Math.sqrt(u)},p.theta=function(r){return arguments.length?(f=r*r,p):Math.sqrt(f)},p}function X(r,n,i){var a,s,l,c=o(.1);function u(r){for(var o=0,c=a.length;o<c;++o){var u=a[o],f=u.x-n||1e-6,h=u.y-i||1e-6,p=Math.sqrt(f*f+h*h),d=(l[o]-p)*s[o]*r/p;u.vx+=f*d,u.vy+=h*d}}function f(){if(a){var n,i=a.length;for(s=Array(i),l=Array(i),n=0;n<i;++n)l[n]=+r(a[n],n,a),s[n]=isNaN(l[n])?0:+c(a[n],n,a)}}return"function"!=typeof r&&(r=o(+r)),null==n&&(n=0),null==i&&(i=0),u.initialize=function(r){a=r,f()},u.strength=function(r){return arguments.length?(c="function"==typeof r?r:o(+r),f(),u):c},u.radius=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),f(),u):r},u.x=function(r){return arguments.length?(n=+r,u):n},u.y=function(r){return arguments.length?(i=+r,u):i},u}function K(r){var n,i,a,s=o(.1);function l(r){for(var o,s=0,l=n.length;s<l;++s)(o=n[s]).vx+=(a[s]-o.x)*i[s]*r}function c(){if(n){var o,l=n.length;for(i=Array(l),a=Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+r(n[o],o,n))?0:+s(n[o],o,n)}}return"function"!=typeof r&&(r=o(null==r?0:+r)),l.initialize=function(r){n=r,c()},l.strength=function(r){return arguments.length?(s="function"==typeof r?r:o(+r),c(),l):s},l.x=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),c(),l):r},l}function J(r){var n,i,a,s=o(.1);function l(r){for(var o,s=0,l=n.length;s<l;++s)(o=n[s]).vy+=(a[s]-o.y)*i[s]*r}function c(){if(n){var o,l=n.length;for(i=Array(l),a=Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+r(n[o],o,n))?0:+s(n[o],o,n)}}return"function"!=typeof r&&(r=o(null==r?0:+r)),l.initialize=function(r){n=r,c()},l.strength=function(r){return arguments.length?(s="function"==typeof r?r:o(+r),c(),l):s},l.y=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),c(),l):r},l}},57624:function(r,n,i){function a(r,n){if((i=(r=n?r.toExponential(n-1):r.toExponential()).indexOf("e"))<0)return null;var i,a=r.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+r.slice(i+1)]}i.d(n,{E9:function(){return d},SO:function(){return v}});var o,s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l(r){var n;if(!(n=s.exec(r)))throw Error("invalid format: "+r);return new c({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function c(r){this.fill=void 0===r.fill?" ":r.fill+"",this.align=void 0===r.align?">":r.align+"",this.sign=void 0===r.sign?"-":r.sign+"",this.symbol=void 0===r.symbol?"":r.symbol+"",this.zero=!!r.zero,this.width=void 0===r.width?void 0:+r.width,this.comma=!!r.comma,this.precision=void 0===r.precision?void 0:+r.precision,this.trim=!!r.trim,this.type=void 0===r.type?"":r.type+""}function u(r,n){var i=a(r,n);if(!i)return r+"";var o=i[0],s=i[1];return s<0?"0."+Array(-s).join("0")+o:o.length>s+1?o.slice(0,s+1)+"."+o.slice(s+1):o+Array(s-o.length+2).join("0")}l.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var f={"%":function(r,n){return(100*r).toFixed(n)},b:function(r){return Math.round(r).toString(2)},c:function(r){return r+""},d:function(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)},e:function(r,n){return r.toExponential(n)},f:function(r,n){return r.toFixed(n)},g:function(r,n){return r.toPrecision(n)},o:function(r){return Math.round(r).toString(8)},p:function(r,n){return u(100*r,n)},r:u,s:function(r,n){var i=a(r,n);if(!i)return r+"";var s=i[0],l=i[1],c=l-(o=3*Math.max(-8,Math.min(8,Math.floor(l/3))))+1,u=s.length;return c===u?s:c>u?s+Array(c-u+1).join("0"):c>0?s.slice(0,c)+"."+s.slice(c):"0."+Array(1-c).join("0")+a(r,Math.max(0,n+c-1))[0]},X:function(r){return Math.round(r).toString(16).toUpperCase()},x:function(r){return Math.round(r).toString(16)}};function h(r){return r}var p,d,y=Array.prototype.map,g=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function v(r){var n,i,s,c=void 0===r.grouping||void 0===r.thousands?h:(i=y.call(r.grouping,Number),s=r.thousands+"",function(r,n){for(var a=r.length,o=[],l=0,c=i[0],u=0;a>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),o.push(r.substring(a-=c,a+c)),!((u+=c+1)>n));)c=i[l=(l+1)%i.length];return o.reverse().join(s)}),u=void 0===r.currency?"":r.currency[0]+"",p=void 0===r.currency?"":r.currency[1]+"",d=void 0===r.decimal?".":r.decimal+"",v=void 0===r.numerals?h:(n=y.call(r.numerals,String),function(r){return r.replace(/[0-9]/g,function(r){return n[+r]})}),m=void 0===r.percent?"%":r.percent+"",x=void 0===r.minus?"-":r.minus+"",b=void 0===r.nan?"NaN":r.nan+"";function _(r){var n=(r=l(r)).fill,i=r.align,a=r.sign,s=r.symbol,h=r.zero,y=r.width,_=r.comma,w=r.precision,T=r.trim,A=r.type;"n"===A?(_=!0,A="g"):f[A]||(void 0===w&&(w=12),T=!0,A="g"),(h||"0"===n&&"="===i)&&(h=!0,n="0",i="=");var k="$"===s?u:"#"===s&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",M="$"===s?p:/[%p]/.test(A)?m:"",S=f[A],E=/[defgprs%]/.test(A);function I(r){var s,l,u,f=k,p=M;if("c"===A)p=S(r)+p,r="";else{var m=(r=+r)<0||1/r<0;if(r=isNaN(r)?b:S(Math.abs(r),w),T&&(r=function(r){e:for(var n,i=r.length,a=1,o=-1;a<i;++a)switch(r[a]){case".":o=n=a;break;case"0":0===o&&(o=a),n=a;break;default:if(!+r[a])break e;o>0&&(o=0)}return o>0?r.slice(0,o)+r.slice(n+1):r}(r)),m&&0==+r&&"+"!==a&&(m=!1),f=(m?"("===a?a:x:"-"===a||"("===a?"":a)+f,p=("s"===A?g[8+o/3]:"")+p+(m&&"("===a?")":""),E){for(s=-1,l=r.length;++s<l;)if(48>(u=r.charCodeAt(s))||u>57){p=(46===u?d+r.slice(s+1):r.slice(s))+p,r=r.slice(0,s);break}}}_&&!h&&(r=c(r,1/0));var I=f.length+r.length+p.length,L=I<y?Array(y-I+1).join(n):"";switch(_&&h&&(r=c(L+r,L.length?y-p.length:1/0),L=""),i){case"<":r=f+r+p+L;break;case"=":r=f+L+r+p;break;case"^":r=L.slice(0,I=L.length>>1)+f+r+p+L.slice(I);break;default:r=L+f+r+p}return v(r)}return w=void 0===w?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),I.toString=function(){return r+""},I}return{format:_,formatPrefix:function(r,n){var i,o=_(((r=l(r)).type="f",r)),s=3*Math.max(-8,Math.min(8,Math.floor(((i=a(Math.abs(i=n)))?i[1]:NaN)/3))),c=Math.pow(10,-s),u=g[8+s/3];return function(r){return o(c*r)+u}}}}d=(p=v({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,p.formatPrefix},87108:function(r,n,i){i.r(n),i.d(n,{geoAiry:function(){return B},geoAiryRaw:function(){return P},geoAitoff:function(){return z},geoAitoffRaw:function(){return R},geoArmadillo:function(){return N},geoArmadilloRaw:function(){return F},geoAugust:function(){return j},geoAugustRaw:function(){return U},geoBaker:function(){return G},geoBakerRaw:function(){return q},geoBerghaus:function(){return Z},geoBerghausRaw:function(){return Y},geoBertin1953:function(){return tr},geoBertin1953Raw:function(){return te},geoBoggs:function(){return tl},geoBoggsRaw:function(){return ts},geoBonne:function(){return tp},geoBonneRaw:function(){return th},geoBottomley:function(){return ty},geoBottomleyRaw:function(){return td},geoBromley:function(){return tv},geoBromleyRaw:function(){return tg},geoChamberlin:function(){return tk},geoChamberlinAfrica:function(){return tA},geoChamberlinRaw:function(){return tw},geoCollignon:function(){return tS},geoCollignonRaw:function(){return tM},geoCraig:function(){return tI},geoCraigRaw:function(){return tE},geoCraster:function(){return tO},geoCrasterRaw:function(){return tC},geoCylindricalEqualArea:function(){return tP},geoCylindricalEqualAreaRaw:function(){return tD},geoCylindricalStereographic:function(){return tR},geoCylindricalStereographicRaw:function(){return tB},geoEckert1:function(){return tF},geoEckert1Raw:function(){return tz},geoEckert2:function(){return tU},geoEckert2Raw:function(){return tN},geoEckert3:function(){return tV},geoEckert3Raw:function(){return tj},geoEckert4:function(){return tq},geoEckert4Raw:function(){return tH},geoEckert5:function(){return tW},geoEckert5Raw:function(){return tG},geoEckert6:function(){return tZ},geoEckert6Raw:function(){return tY},geoEisenlohr:function(){return tJ},geoEisenlohrRaw:function(){return tK},geoFahey:function(){return t0},geoFaheyRaw:function(){return tQ},geoFoucaut:function(){return t2},geoFoucautRaw:function(){return t1},geoFoucautSinusoidal:function(){return t4},geoFoucautSinusoidalRaw:function(){return t3},geoGilbert:function(){return t9},geoGingery:function(){return en},geoGingeryRaw:function(){return et},geoGinzburg4:function(){return eo},geoGinzburg4Raw:function(){return ea},geoGinzburg5:function(){return el},geoGinzburg5Raw:function(){return es},geoGinzburg6:function(){return eu},geoGinzburg6Raw:function(){return ec},geoGinzburg8:function(){return eh},geoGinzburg8Raw:function(){return ef},geoGinzburg9:function(){return ed},geoGinzburg9Raw:function(){return ep},geoGringorten:function(){return ev},geoGringortenQuincuncial:function(){return nl},geoGringortenRaw:function(){return eg},geoGuyou:function(){return e_},geoGuyouRaw:function(){return eb},geoHammer:function(){return $},geoHammerRaw:function(){return K},geoHammerRetroazimuthal:function(){return ek},geoHammerRetroazimuthalRaw:function(){return eT},geoHealpix:function(){return eP},geoHealpixRaw:function(){return eL},geoHill:function(){return eR},geoHillRaw:function(){return eB},geoHomolosine:function(){return eU},geoHomolosineRaw:function(){return eN},geoHufnagel:function(){return eV},geoHufnagelRaw:function(){return ej},geoHyperelliptical:function(){return eq},geoHyperellipticalRaw:function(){return eH},geoInterrupt:function(){return eW},geoInterruptedBoggs:function(){return eZ},geoInterruptedHomolosine:function(){return eK},geoInterruptedMollweide:function(){return e$},geoInterruptedMollweideHemispheres:function(){return e0},geoInterruptedQuarticAuthalic:function(){return rR},geoInterruptedSinuMollweide:function(){return e2},geoInterruptedSinusoidal:function(){return e4},geoKavrayskiy7:function(){return e5},geoKavrayskiy7Raw:function(){return e6},geoLagrange:function(){return e7},geoLagrangeRaw:function(){return e8},geoLarrivee:function(){return re},geoLarriveeRaw:function(){return rt},geoLaskowski:function(){return rn},geoLaskowskiRaw:function(){return rr},geoLittrow:function(){return ra},geoLittrowRaw:function(){return ri},geoLoximuthal:function(){return rs},geoLoximuthalRaw:function(){return ro},geoMiller:function(){return rc},geoMillerRaw:function(){return rl},geoModifiedStereographic:function(){return r_},geoModifiedStereographicAlaska:function(){return rg},geoModifiedStereographicGs48:function(){return rv},geoModifiedStereographicGs50:function(){return rm},geoModifiedStereographicLee:function(){return rb},geoModifiedStereographicMiller:function(){return rx},geoModifiedStereographicRaw:function(){return ru},geoMollweide:function(){return to},geoMollweideRaw:function(){return ta},geoMtFlatPolarParabolic:function(){return rk},geoMtFlatPolarParabolicRaw:function(){return rA},geoMtFlatPolarQuartic:function(){return rS},geoMtFlatPolarQuarticRaw:function(){return rM},geoMtFlatPolarSinusoidal:function(){return rI},geoMtFlatPolarSinusoidalRaw:function(){return rE},geoNaturalEarth:function(){return rL.c},geoNaturalEarth2:function(){return rO},geoNaturalEarth2Raw:function(){return rC},geoNaturalEarthRaw:function(){return rL.g},geoNellHammer:function(){return rP},geoNellHammerRaw:function(){return rD},geoNicolosi:function(){return rF},geoNicolosiRaw:function(){return rz},geoPatterson:function(){return rU},geoPattersonRaw:function(){return rN},geoPeirceQuincuncial:function(){return nc},geoPierceQuincuncial:function(){return nc},geoPolyconic:function(){return rV},geoPolyconicRaw:function(){return rj},geoPolyhedral:function(){return rZ},geoPolyhedralButterfly:function(){return rQ},geoPolyhedralCollignon:function(){return r2},geoPolyhedralWaterman:function(){return r3},geoProject:function(){return r7},geoQuantize:function(){return nu},geoQuincuncial:function(){return ns},geoRectangularPolyconic:function(){return nh},geoRectangularPolyconicRaw:function(){return nf},geoRobinson:function(){return ny},geoRobinsonRaw:function(){return nd},geoSatellite:function(){return nv},geoSatelliteRaw:function(){return ng},geoSinuMollweide:function(){return eF},geoSinuMollweideRaw:function(){return ez},geoSinusoidal:function(){return tf},geoSinusoidalRaw:function(){return tu},geoStitch:function(){return nM},geoTimes:function(){return nE},geoTimesRaw:function(){return nS},geoTwoPointAzimuthal:function(){return nO},geoTwoPointAzimuthalRaw:function(){return nL},geoTwoPointAzimuthalUsa:function(){return nC},geoTwoPointEquidistant:function(){return nB},geoTwoPointEquidistantRaw:function(){return nD},geoTwoPointEquidistantUsa:function(){return nP},geoVanDerGrinten:function(){return nz},geoVanDerGrinten2:function(){return nN},geoVanDerGrinten2Raw:function(){return nF},geoVanDerGrinten3:function(){return nj},geoVanDerGrinten3Raw:function(){return nU},geoVanDerGrinten4:function(){return nH},geoVanDerGrinten4Raw:function(){return nV},geoVanDerGrintenRaw:function(){return nR},geoWagner:function(){return nG},geoWagner4:function(){return nK},geoWagner4Raw:function(){return nX},geoWagner6:function(){return n$},geoWagner6Raw:function(){return nJ},geoWagner7:function(){return nW},geoWagnerRaw:function(){return nq},geoWiechel:function(){return n0},geoWiechelRaw:function(){return nQ},geoWinkel3:function(){return n2},geoWinkel3Raw:function(){return n1}});var a=i(87952),o=Math.abs,s=Math.atan,l=Math.atan2,c=Math.cos,u=Math.exp,f=Math.floor,h=Math.log,p=Math.max,d=Math.min,y=Math.pow,g=Math.round,v=Math.sign||function(r){return r>0?1:r<0?-1:0},m=Math.sin,x=Math.tan,b=Math.PI,_=b/2,w=b/4,T=Math.SQRT1_2,A=C(2),k=C(b),M=2*b,S=180/b,E=b/180;function I(r){return r>1?_:r<-1?-_:Math.asin(r)}function L(r){return r>1?0:r<-1?b:Math.acos(r)}function C(r){return r>0?Math.sqrt(r):0}function O(r){return(u(r)-u(-r))/2}function D(r){return(u(r)+u(-r))/2}function P(r){var n=x(r/2),i=2*h(c(r/2))/(n*n);function a(r,n){var a=c(r),o=c(n),s=m(n),l=o*a,u=-((1-l?h((1+l)/2)/(1-l):-.5)+i/(1+l));return[u*o*m(r),u*s]}return a.invert=function(n,a){var s,u=C(n*n+a*a),f=-r/2,p=50;if(!u)return[0,0];do{var d=f/2,y=c(d),g=m(d),v=g/y,x=-h(o(y));f-=s=(2/v*x-i*v-u)/(-x/(g*g)+1-i/(2*y*y))*(y<0?.7:1)}while(o(s)>1e-6&&--p>0)var b=m(f);return[l(n*b,u*c(f)),I(a*b/u)]},a}function B(){var r=_,n=(0,a.U)(P),i=n(r);return i.radius=function(i){return arguments.length?n(r=i*E):r*S},i.scale(179.976).clipAngle(147)}function R(r,n){var i,a=c(n),o=(i=L(a*c(r/=2)))?i/Math.sin(i):1;return[2*a*m(r)*o,m(n)*o]}function z(){return(0,a.c)(R).scale(152.63)}function F(r){var n=m(r),i=c(r),a=r>=0?1:-1,s=x(a*r),u=(1+n-i)/2;function f(r,o){var f=c(o),h=c(r/=2);return[(1+f)*m(r),(a*o>-l(h,s)-.001?0:-(10*a))+u+m(o)*i-(1+f)*n*h]}return f.invert=function(r,f){var h=0,p=0,d=50;do{var y=c(h),g=m(h),v=c(p),x=m(p),b=1+v,_=b*g-r,w=u+x*i-b*n*y-f,T=b*y/2,A=-g*x,k=n*b*g/2,M=i*v+n*y*x,S=A*k-M*T,E=(w*A-_*M)/S/2,I=(_*k-w*T)/S;o(I)>2&&(I/=2),h-=E,p-=I}while((o(E)>1e-6||o(I)>1e-6)&&--d>0)return a*p>-l(c(h),s)-.001?[2*h,p]:null},f}function N(){var r=20*E,n=r>=0?1:-1,i=x(n*r),o=(0,a.U)(F),s=o(r),u=s.stream;return s.parallel=function(a){return arguments.length?(i=x((n=(r=a*E)>=0?1:-1)*r),o(r)):r*S},s.stream=function(a){var o=s.rotate(),f=u(a),h=(s.rotate([0,0]),u(a)),p=s.precision();return s.rotate(o),f.sphere=function(){h.polygonStart(),h.lineStart();for(var a=-180*n;n*a<180;a+=90*n)h.point(a,90*n);if(r)for(;n*(a-=3*n*p)>=-180;)h.point(a,-(n*l(c(a*E/2),i))*S);h.lineEnd(),h.polygonEnd()},f},s.scale(218.695).center([0,28.0974])}function U(r,n){var i=x(n/2),a=C(1-i*i),o=1+a*c(r/=2),s=m(r)*a/o,l=i/o,u=s*s,f=l*l;return[4/3*s*(3+u-3*f),4/3*l*(3+3*u-f)]}function j(){return(0,a.c)(U).scale(66.1603)}R.invert=function(r,n){if(!(r*r+4*n*n>b*b+1e-6)){var i=r,a=n,s=25;do{var l,u=m(i),f=m(i/2),h=c(i/2),p=m(a),d=c(a),y=m(2*a),g=p*p,v=d*d,x=f*f,_=1-v*h*h,w=_?L(d*h)*C(l=1/_):l=0,T=2*w*d*f-r,A=w*p-n,k=l*(v*x+w*d*h*g),M=l*(.5*u*y-2*w*p*f),S=.25*l*(y*f-w*p*v*u),E=l*(g*h+w*x*d),I=M*S-E*k;if(!I)break;var O=(A*M-T*E)/I,D=(T*S-A*k)/I;i-=O,a-=D}while((o(O)>1e-6||o(D)>1e-6)&&--s>0)return[i,a]}},U.invert=function(r,n){if(n*=3/8,!(r*=3/8)&&o(n)>1)return null;var i,a,s=1+r*r+n*n,u=C((s-C(s*s-4*n*n))/2),f=I(u)/3,p=u?h((i=o(n/u))+C(i*i-1))/3:h((a=o(r))+C(a*a+1))/3,d=c(f),y=D(p),g=y*y-d*d;return[2*v(r)*l(O(p)*d,.25-g),2*v(n)*l(y*m(f),.25+g)]};var V=C(8),H=h(1+A);function q(r,n){var i=o(n);return i<w?[r,h(x(w+n/2))]:[r*c(i)*(2*A-1/m(i)),v(n)*(2*A*(i-w)-h(x(i/2)))]}function G(){return(0,a.c)(q).scale(112.314)}q.invert=function(r,n){if((a=o(n))<H)return[r,2*s(u(n))-_];var i,a,l=w,f=25;do{var p=c(l/2),d=x(l/2);l-=i=(V*(l-w)-h(d)-a)/(V-p*p/(2*d))}while(o(i)>1e-12&&--f>0)return[r/(c(l)*(V-1/m(l))),v(n)*l]};var W=i(69020);function Y(r){var n=2*b/r;function i(r,i){var a=(0,W.O)(r,i);if(o(r)>_){var s=l(a[1],a[0]),u=C(a[0]*a[0]+a[1]*a[1]),f=n*g((s-_)/n)+_,h=l(m(s-=f),2-c(s));s=f+I(b/u*m(h))-h,a[0]=u*c(s),a[1]=u*m(s)}return a}return i.invert=function(r,i){var a=C(r*r+i*i);if(a>_){var o=l(i,r),u=n*g((o-_)/n)+_,f=o>u?-1:1,h=a*c(u-o),p=1/x(f*L((h-b)/C(b*(b-2*h)+a*a)));r=a*c(o=u+2*s((p+f*C(p*p-3))/3)),i=a*m(o)}return W.O.invert(r,i)},i}function Z(){var r=5,n=(0,a.U)(Y),i=n(r),o=i.stream,s=-c(.01*E),u=m(.01*E);return i.lobes=function(i){return arguments.length?n(r=+i):r},i.stream=function(n){var a=i.rotate(),f=o(n),h=(i.rotate([0,0]),o(n));return i.rotate(a),f.sphere=function(){h.polygonStart(),h.lineStart();for(var n=0,i=360/r,a=2*b/r,o=90-180/r,f=_;n<r;++n,o-=i,f-=a)h.point(l(u*c(f),s)*S,I(u*m(f))*S),o<-90?(h.point(-90,-180-o-.01),h.point(-90,-180-o+.01)):(h.point(90,o+.01),h.point(90,o-.01));h.lineEnd(),h.polygonEnd()},f},i.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var X=i(54724);function K(r,n){if(arguments.length<2&&(n=r),1===n)return X.y;if(n===1/0)return J;function i(i,a){var o=(0,X.y)(i/n,a);return o[0]*=r,o}return i.invert=function(i,a){var o=X.y.invert(i/r,a);return o[0]*=n,o},i}function J(r,n){return[r*c(n)/c(n/=2),2*m(n)]}function $(){var r=2,n=(0,a.U)(K),i=n(r);return i.coefficient=function(i){return arguments.length?n(r=+i):r},i.scale(169.529)}function Q(r,n,i){var a,s,l,c=100;i=void 0===i?0:+i,n=+n;do(s=r(i))===(l=r(i+1e-6))&&(l=s+1e-6),i-=a=-.000001*(s-n)/(s-l);while(c-- >0&&o(a)>1e-6)return c<0?NaN:i}function tt(r,n,i){return void 0===n&&(n=40),void 0===i&&(i=1e-12),function(a,s,l,c){var u,f,h;l=void 0===l?0:+l,c=void 0===c?0:+c;for(var p=0;p<n;p++){var d=r(l,c),y=d[0]-a,g=d[1]-s;if(o(y)<i&&o(g)<i)break;var v=y*y+g*g;if(v>u)l-=f/=2,c-=h/=2;else{u=v;var m=(l>0?-1:1)*i,x=(c>0?-1:1)*i,b=r(l+m,c),_=r(l,c+x),w=(b[0]-d[0])/m,T=(b[1]-d[1])/m,A=(_[0]-d[0])/x,k=(_[1]-d[1])/x,M=k*w-T*A,S=(.5>o(M)?.5:1)/M;if(l+=f=(g*A-y*k)*S,c+=h=(y*T-g*w)*S,o(f)<i&&o(h)<i)break}}return[l,c]}}function te(){var r=K(1.68,2);function n(n,i){if(n+i<-1.4){var a=(n-i+1.6)*(n+i+1.4)/8;n+=a,i-=.8*a*m(i+b/2)}var o=r(n,i),s=(1-c(n*i))/12;return o[1]<0&&(o[0]*=1+s),o[1]>0&&(o[1]*=1+s/1.5*o[0]*o[0]),o}return n.invert=tt(n),n}function tr(){return(0,a.c)(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function tn(r,n){var i,a=r*m(n),s=30;do n-=i=(n+m(n)-a)/(1+c(n));while(o(i)>1e-6&&--s>0)return n/2}function ti(r,n,i){function a(a,o){return[r*a*c(o=tn(i,o)),n*m(o)]}return a.invert=function(a,o){return[a/(r*c(o=I(o/n))),I((2*o+m(2*o))/i)]},a}J.invert=function(r,n){var i=2*I(n/2);return[r*c(i/2)/c(i),i]};var ta=ti(A/_,A,b);function to(){return(0,a.c)(ta).scale(169.529)}function ts(r,n){var i=tn(b,n);return[2.00276*r/(1/c(n)+1.11072/c(i)),(n+A*m(i))/2.00276]}function tl(){return(0,a.c)(ts).scale(160.857)}function tc(r){var n=0,i=(0,a.U)(r),o=i(n);return o.parallel=function(r){return arguments.length?i(n=r*E):n*S},o}function tu(r,n){return[r*c(n),n]}function tf(){return(0,a.c)(tu).scale(152.63)}function th(r){if(!r)return tu;var n=1/x(r);function i(i,a){var o=n+r-a,s=o?i*c(a)/o:o;return[o*m(s),n-o*c(s)]}return i.invert=function(i,a){var o=C(i*i+(a=n-a)*a),s=n+r-o;return[o/c(s)*l(i,a),s]},i}function tp(){return tc(th).scale(123.082).center([0,26.1441]).parallel(45)}function td(r){function n(n,i){var a=_-i,o=a?n*r*m(a)/a:a;return[a*m(o)/r,_-a*c(o)]}return n.invert=function(n,i){var a=n*r,o=_-i,s=C(a*a+o*o),c=l(a,o);return[(s?s/m(s):1)*c/r,_-s]},n}function ty(){var r=.5,n=(0,a.U)(td),i=n(r);return i.fraction=function(i){return arguments.length?n(r=+i):r},i.scale(158.837)}ts.invert=function(r,n){var i,a,s=2.00276*n,l=n<0?-w:w,u=25;do a=s-A*m(l),l-=i=(m(2*l)+2*l-b*m(a))/(2*c(2*l)+2+b*c(a)*A*c(l));while(o(i)>1e-6&&--u>0)return[r*(1/c(a=s-A*m(l))+1.11072/c(l))/2.00276,a]},tu.invert=function(r,n){return[r/c(n),n]};var tg=ti(1,4/b,b);function tv(){return(0,a.c)(tg).scale(152.63)}var tm=i(24052),tx=i(92992);function tb(r,n,i,a,s,u){var f,h=c(u);if(o(r)>1||o(u)>1)f=L(i*s+n*a*h);else{var p=m(r/2),d=m(u/2);f=2*I(C(p*p+n*a*d*d))}return o(f)>1e-6?[f,l(a*m(u),n*s-i*a*h)]:[0,0]}function t_(r,n,i){return L((r*r+n*n-i*i)/(2*r*n))}function tw(r,n,i){for(var a,o=[[r[0],r[1],m(r[1]),c(r[1])],[n[0],n[1],m(n[1]),c(n[1])],[i[0],i[1],m(i[1]),c(i[1])]],s=o[2],l=0;l<3;++l,s=a)a=o[l],s.v=tb(a[1]-s[1],s[3],s[2],a[3],a[2],a[0]-s[0]),s.point=[0,0];var u=t_(o[0].v[0],o[2].v[0],o[1].v[0]),h=t_(o[0].v[0],o[1].v[0],o[2].v[0]),p=b-u;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var d=[o[2].point[0]=o[0].point[0]+o[2].v[0]*c(u),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*m(u))];return function(r,n){var i,a=m(n),s=c(n),l=[,,,];for(i=0;i<3;++i){var u,y=o[i];if(l[i]=tb(n-y[1],y[3],y[2],s,a,r-y[0]),!l[i][0])return y.point;l[i][1]=(u=l[i][1]-y.v[1])-2*b*f((u+b)/(2*b))}var g=d.slice();for(i=0;i<3;++i){var v=2==i?0:i+1,x=t_(o[i].v[0],l[i][0],l[v][0]);l[i][1]<0&&(x=-x),i?1==i?(x=h-x,g[0]-=l[i][0]*c(x),g[1]-=l[i][0]*m(x)):(x=p-x,g[0]+=l[i][0]*c(x),g[1]+=l[i][0]*m(x)):(g[0]+=l[i][0]*c(x),g[1]-=l[i][0]*m(x))}return g[0]/=3,g[1]/=3,g}}function tT(r){return r[0]*=E,r[1]*=E,r}function tA(){return tk([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function tk(r,n,i){var o=(0,tm.c)({type:"MultiPoint",coordinates:[r,n,i]}),s=[-o[0],-o[1]],l=(0,tx.c)(s),c=tw(tT(l(r)),tT(l(n)),tT(l(i)));c.invert=tt(c);var u=(0,a.c)(c).rotate(s),f=u.center;return delete u.rotate,u.center=function(r){return arguments.length?f(l(r)):l.invert(f())},u.clipAngle(90)}function tM(r,n){var i=C(1-m(n));return[2/k*r*i,k*(1-i)]}function tS(){return(0,a.c)(tM).scale(95.6464).center([0,30])}function tE(r){var n=x(r);function i(r,i){return[r,(r?r/m(r):1)*(m(i)*c(r)-n*c(i))]}return i.invert=n?function(r,i){r&&(i*=m(r)/r);var a=c(r);return[r,2*l(C(a*a+n*n-i*i)-a,n-i)]}:function(r,n){return[r,I(r?n*x(r)/r:n)]},i}function tI(){return tc(tE).scale(249.828).clipAngle(90)}tM.invert=function(r,n){var i=(i=n/k-1)*i;return[i>0?r*C(b/i)/2:0,I(1-i)]};var tL=C(3);function tC(r,n){return[tL*r*(2*c(2*n/3)-1)/k,tL*k*m(n/3)]}function tO(){return(0,a.c)(tC).scale(156.19)}function tD(r){var n=c(r);function i(r,i){return[r*n,m(i)/n]}return i.invert=function(r,i){return[r/n,I(i*n)]},i}function tP(){return tc(tD).parallel(38.58).scale(195.044)}function tB(r){var n=c(r);function i(r,i){return[r*n,(1+n)*x(i/2)]}return i.invert=function(r,i){return[r/n,2*s(i/(1+n))]},i}function tR(){return tc(tB).scale(124.75)}function tz(r,n){var i=C(8/(3*b));return[i*r*(1-o(n)/b),i*n]}function tF(){return(0,a.c)(tz).scale(165.664)}function tN(r,n){var i=C(4-3*m(o(n)));return[2/C(6*b)*r*i,v(n)*C(2*b/3)*(2-i)]}function tU(){return(0,a.c)(tN).scale(165.664)}function tj(r,n){var i=C(b*(4+b));return[2/i*r*(1+C(1-4*n*n/(b*b))),4/i*n]}function tV(){return(0,a.c)(tj).scale(180.739)}function tH(r,n){var i=(2+_)*m(n);n/=2;for(var a=0,s=1/0;a<10&&o(s)>1e-6;a++){var l=c(n);n-=s=(n+m(n)*(l+2)-i)/(2*l*(1+l))}return[2/C(b*(4+b))*r*(1+c(n)),2*C(b/(4+b))*m(n)]}function tq(){return(0,a.c)(tH).scale(180.739)}function tG(r,n){return[r*(1+c(n))/C(2+b),2*n/C(2+b)]}function tW(){return(0,a.c)(tG).scale(173.044)}function tY(r,n){for(var i=(1+_)*m(n),a=0,s=1/0;a<10&&o(s)>1e-6;a++)n-=s=(n+m(n)-i)/(1+c(n));return i=C(2+b),[r*(1+c(n))/i,2*n/i]}function tZ(){return(0,a.c)(tY).scale(173.044)}tC.invert=function(r,n){var i=3*I(n/(tL*k));return[k*r/(tL*(2*c(2*i/3)-1)),i]},tz.invert=function(r,n){var i=C(8/(3*b)),a=n/i;return[r/(i*(1-o(a)/b)),a]},tN.invert=function(r,n){var i=2-o(n)/C(2*b/3);return[r*C(6*b)/(2*i),v(n)*I((4-i*i)/3)]},tj.invert=function(r,n){var i=C(b*(4+b))/2;return[r*i/(1+C(1-n*n*(4+b)/(4*b))),n*i/2]},tH.invert=function(r,n){var i=n*C((4+b)/b)/2,a=I(i),o=c(a);return[r/(2/C(b*(4+b))*(1+o)),I((a+i*(o+2))/(2+_))]},tG.invert=function(r,n){var i=C(2+b),a=n*i/2;return[i*r/(1+c(a)),a]},tY.invert=function(r,n){var i=1+_,a=C(i/2);return[2*r*a/(1+c(n*=a)),I((n+m(n))/i)]};var tX=3+2*A;function tK(r,n){var i=m(r/=2),a=c(r),o=C(c(n)),l=c(n/=2),u=m(n)/(l+A*a*o),f=C(2/(1+u*u)),p=C((A*l+(a+i)*o)/(A*l+(a-i)*o));return[tX*(f*(p-1/p)-2*h(p)),tX*(f*u*(p+1/p)-2*s(u))]}function tJ(){return(0,a.c)(tK).scale(62.5271)}tK.invert=function(r,n){if(!(i=U.invert(r/1.2,1.065*n)))return null;var i,a=i[0],l=i[1],u=20;r/=tX,n/=tX;do{var f=a/2,y=l/2,g=m(f),v=c(f),x=m(y),b=c(y),w=c(l),k=C(w),M=x/(b+A*v*k),S=M*M,E=C(2/(1+S)),I=(A*b+(v+g)*k)/(A*b+(v-g)*k),L=C(I),O=L-1/L,D=L+1/L,P=E*O-2*h(L)-r,B=E*M*D-2*s(M)-n,R=x&&T*k*g*S/x,z=(A*v*b+k)/(2*(b+A*v*k)*(b+A*v*k)*k),F=-.5*M*E*E*E,N=F*R,j=F*z,V=(V=2*b+A*k*(v-g))*V*L,H=(A*v*b*k+w)/V,q=-A*g*x/(k*V),G=O*N-2*H/L+E*(H+H/I),W=O*j-2*q/L+E*(q+q/I),Y=M*D*N-2*R/(1+S)+E*D*R+E*M*(H-H/I),Z=M*D*j-2*z/(1+S)+E*D*z+E*M*(q-q/I),X=W*Y-Z*G;if(!X)break;var K=(B*W-P*Z)/X,J=(P*Y-B*G)/X;a-=K,l=p(-_,d(_,l-J))}while((o(K)>1e-6||o(J)>1e-6)&&--u>0)return 1e-6>o(o(l)-_)?[0,l]:u&&[a,l]};var t$=c(35*E);function tQ(r,n){var i=x(n/2);return[r*t$*C(1-i*i),(1+t$)*i]}function t0(){return(0,a.c)(tQ).scale(137.152)}function t1(r,n){var i=n/2,a=c(i);return[2*r/k*c(n)*a*a,k*x(i)]}function t2(){return(0,a.c)(t1).scale(135.264)}function t3(r){var n=1-r,i=o(b,0)[0]-o(-b,0)[0],a=C(2*(o(0,_)[1]-o(0,-_)[1])/i);function o(i,a){var o=c(a),s=m(a);return[o/(n+r*o)*i,n*a+r*s]}function s(r,n){var i=o(r,n);return[i[0]*a,i[1]/a]}function l(r){return s(0,r)[1]}return s.invert=function(i,o){var s=Q(l,o);return[i/a*(r+n/c(s)),s]},s}function t4(){var r=.5,n=(0,a.U)(t3),i=n(r);return i.alpha=function(i){return arguments.length?n(r=+i):r},i.scale(168.725)}tQ.invert=function(r,n){var i=n/(1+t$);return[r&&r/(t$*C(1-i*i)),2*s(i)]},t1.invert=function(r,n){var i=s(n/k),a=c(i),o=2*i;return[r*k/2/(c(o)*a*a),o]};var t6=i(4888),t5=i(69604);function t8(r){return[r[0]/2,I(x(r[1]/2*E))*S]}function t7(r){return[2*r[0],2*s(m(r[1]*E))*S]}function t9(r){null==r&&(r=t6.c);var n=r(),i=(0,t5.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function a(r){return n(t8(r))}function o(r){a[r]=function(){return arguments.length?(n[r].apply(n,arguments),a):n[r]()}}return n.invert&&(a.invert=function(r){return t7(n.invert(r))}),a.stream=function(r){var a=n.stream(r),o=i.stream({point:function(r,n){a.point(r/2,I(x(-n/2*E))*S)},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}});return o.sphere=a.sphere,o},a.rotate=function(r){return arguments.length?(i.rotate(r),a):i.rotate()},a.center=function(r){return arguments.length?(n.center(t8(r)),a):t7(n.center())},o("angle"),o("clipAngle"),o("clipExtent"),o("fitExtent"),o("fitHeight"),o("fitSize"),o("fitWidth"),o("scale"),o("translate"),o("precision"),a.scale(249.5)}function et(r,n){var i=2*b/n,a=r*r;function s(n,s){var u=(0,W.O)(n,s),f=u[0],h=u[1],p=f*f+h*h;if(p>a){var d=C(p),y=l(h,f),v=i*g(y/i),x=y-v,w=r*c(x),T=(r*m(x)-x*m(w))/(_-w),A=ee(x,T),k=(b-r)/er(A,w,b);f=d;var M,S=50;do f-=M=(r+er(A,w,f)*k-d)/(A(f)*k);while(o(M)>1e-6&&--S>0)h=x*m(f),f<_&&(h-=T*(f-_));var E=m(v),I=c(v);u[0]=f*I-h*E,u[1]=f*E+h*I}return u}return s.invert=function(n,s){var u=n*n+s*s;if(u>a){var f=C(u),h=l(s,n),p=i*g(h/i),d=h-p;n=f*c(d),s=f*m(d);for(var y=n-_,v=m(n),x=s/v,w=n<_?1/0:0,T=10;;){var A=r*m(x),k=r*c(x),M=m(k),S=_-k,E=(A-x*M)/S,I=ee(x,E);if(1e-12>o(w)||!--T)break;x-=w=(x*v-E*y-s)/(v-2*y*(S*(k+x*A*c(k)-M)-A*(A-x*M))/(S*S))}n=(f=r+er(I,k,n)*(b-r)/er(I,k,b))*c(h=p+x),s=f*m(h)}return W.O.invert(n,s)},s}function ee(r,n){return function(i){var a=r*c(i);return i<_&&(a-=n),C(1+a*a)}}function er(r,n,i){for(var a=(i-n)/50,o=r(n)+r(i),s=1,l=n;s<50;++s)o+=2*r(l+=a);return .5*o*a}function en(){var r=6,n=30*E,i=c(n),o=m(n),s=(0,a.U)(et),u=s(n,r),f=u.stream,h=-c(.01*E),p=m(.01*E);return u.radius=function(a){return arguments.length?(i=c(n=a*E),o=m(n),s(n,r)):n*S},u.lobes=function(i){return arguments.length?s(n,r=+i):r},u.stream=function(n){var a=u.rotate(),s=f(n),d=(u.rotate([0,0]),f(n));return u.rotate(a),s.sphere=function(){d.polygonStart(),d.lineStart();for(var n=0,a=2*b/r,s=0;n<r;++n,s-=a)d.point(l(p*c(s),h)*S,I(p*m(s))*S),d.point(l(o*c(s-a/2),i)*S,I(o*m(s-a/2))*S);d.lineEnd(),d.polygonEnd()},s},u.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ei(r,n,i,a,s,l,u,f){function h(o,h){if(!h)return[r*o/b,0];var p=h*h,d=r+p*(n+p*(i+p*a)),y=h*(s-1+p*(l-f+p*u)),g=(d*d+y*y)/(2*y),v=o*I(d/g)/b;return[g*m(v),h*(1+p*f)+g*(1-c(v))]}return arguments.length<8&&(f=0),h.invert=function(h,p){var d,y,g=b*h/r,v=p,x=50;do{var _=v*v,w=r+_*(n+_*(i+_*a)),T=v*(s-1+_*(l-f+_*u)),A=w*w+T*T,k=2*T,M=A/k,S=M*M,E=I(w/M)/b,L=g*E,O=w*w,D=(2*n+_*(4*i+6*_*a))*v,P=s+_*(3*l+5*_*u),B=(2*(w*D+T*(P-1))*k-2*(P-1)*A)/(k*k),R=c(L),z=m(L),F=M*R,N=M*z,U=g/b*(1/C(1-O/S))*(D*M-w*B)/S,j=N-h,V=v*(1+_*f)+M-F-p,H=B*z+F*U,q=F*E,G=1+B-(B*R-N*U),W=N*E,Y=H*W-G*q;if(!Y)break;g-=d=(V*H-j*G)/Y,v-=y=(j*W-V*q)/Y}while((o(d)>1e-6||o(y)>1e-6)&&--x>0)return[g,v]},h}var ea=ei(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function eo(){return(0,a.c)(ea).scale(149.995)}var es=ei(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function el(){return(0,a.c)(es).scale(153.93)}var ec=ei(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function eu(){return(0,a.c)(ec).scale(130.945)}function ef(r,n){var i=r*r,a=n*n;return[r*(1-.162388*a)*(.87-952426e-9*i*i),n*(1+a/12)]}function eh(){return(0,a.c)(ef).scale(131.747)}ef.invert=function(r,n){var i,a=r,s=n,l=50;do{var c=s*s;s-=i=(s*(1+c/12)-n)/(1+c/4)}while(o(i)>1e-6&&--l>0)l=50,r/=1-.162388*c;do{var u=(u=a*a)*u;a-=i=(a*(.87-952426e-9*u)-r)/(.87-.00476213*u)}while(o(i)>1e-6&&--l>0)return[a,s]};var ep=ei(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ed(){return(0,a.c)(ep).scale(131.087)}function ey(r){var n=r(_,0)[0]-r(-_,0)[0];function i(i,a){var o=i>0?-.5:.5,s=r(i+o*b,a);return s[0]-=o*n,s}return r.invert&&(i.invert=function(i,a){var o=i>0?-.5:.5,s=r.invert(i+o*n,a),l=s[0]-o*b;return l<-b?l+=2*b:l>b&&(l-=2*b),s[0]=l,s}),i}function eg(r,n){var i=v(r),a=v(n),s=c(n),u=c(r)*s,f=m(r)*s,h=m(a*n);r=o(l(f,h)),n=I(u),o(r-_)>1e-6&&(r%=_);var p=function(r,n){if(n===_)return[0,0];var i,a,s=m(n),l=s*s,u=l*l,f=1+u,h=1+3*u,p=1-u,d=I(1/C(f)),y=p+l*f*d,g=(1-s)/y,v=C(g),x=g*f,w=C(x),T=v*p;if(0===r)return[0,-(T+l*w)];var A,k=c(n),M=1/k,S=2*s*k,E=(-y*k-(-3*l+d*h)*S*(1-s))/(y*y),L=-M*S,O=-M*(l*f*E+g*h*S),D=-2*M*(.5*E/v*p-2*l*v*S),P=4*r/b;if(r>.222*b||n<b/4&&r>.175*b){if(i=(T+l*C(x*(1+u)-T*T))/(1+u),r>b/4)return[i,i];var B=i,R=.5*i;i=.5*(R+B),a=50;do{var z=i*(D+L*C(x-i*i))+O*I(i/w)-P;if(!z)break;z<0?R=i:B=i,i=.5*(R+B)}while(o(B-R)>1e-6&&--a>0)}else{i=1e-6,a=25;do{var F=i*i,N=C(x-F),U=D+L*N,j=i*U+O*I(i/w)-P;i-=A=N?j/(U+(O-L*F)/N):0}while(o(A)>1e-6&&--a>0)}return[i,-T-l*C(x-i*i)]}(r>b/4?_-r:r,n);return r>b/4&&(h=p[0],p[0]=-p[1],p[1]=-h),p[0]*=i,p[1]*=-a,p}function ev(){return(0,a.c)(ey(eg)).scale(239.75)}function em(r,n){if(n<1e-6)return[(f=m(r))-(i=n*(r-f*(a=c(r)))/4)*a,a+i*f,1-n*f*f/2,r-i];if(n>=.999999)return i=(1-n)/4,l=1/(a=D(r)),[(f=((p=u(2*(p=r)))-1)/(p+1))+i*((h=a*O(r))-r)/(a*a),l-i*f*l*(h-r),l+i*f*l*(h+r),2*s(u(r))-_+i*(h-r)/a];var i,a,l,f,h,p,d=[1,0,0,0,0,0,0,0,0],y=[C(n),0,0,0,0,0,0,0,0],g=0;for(a=C(1-n),h=1;o(y[g]/d[g])>1e-6&&g<8;)i=d[g++],y[g]=(i-a)/2,d[g]=(i+a)/2,a=C(i*a),h*=2;l=h*d[g]*r;do l=(I(f=y[g]*m(a=l)/d[g])+l)/2;while(--g)return[m(l),f=c(l),f/c(l-a),l]}function ex(r,n){if(!n)return r;if(1===n)return h(x(r/2+w));for(var i=1,a=C(1-n),l=C(n),c=0;o(l)>1e-6;c++){if(r%b){var u=s(a*x(r)/i);u<0&&(u+=b),r+=u+~~(r/b)*b}else r+=r;l=(i+a)/2,a=C(i*a),l=((i=l)-a)/2}return r/(y(2,c)*i)}function eb(r,n){var i,a,f,p,d,y=(A-1)/(A+1),g=C(1-y*y),w=ex(_,g*g),T=u(-1*h(x(b/4+o(n)/2)))/C(y),k=(i=T*c(-1*r),a=T*m(-1*r),f=i*i,p=a+1,[.5*((i>=0?_:-_)-l(d=1-f-a*a,2*i)),-.25*h(d*d+4*f)+.5*h(p*p+f)]),M=function(r,n,i){var a=o(r),l=O(o(n));if(a){var c=1/m(a),u=1/(x(a)*x(a)),f=-(u+l*l*c*c*i-1+i),h=(-f+C(f*f-(i-1)*u*4))/2;return[ex(s(1/C(h)),i)*v(r),ex(s(C((h/u-1)/i)),1-i)*v(n)]}return[0,ex(s(l),1-i)*v(n)]}(k[0],k[1],g*g);return[-M[1],(n>=0?1:-1)*(.5*w-M[0])]}function e_(){return(0,a.c)(ey(eb)).scale(151.496)}eg.invert=function(r,n){o(r)>1&&(r=2*v(r)-r),o(n)>1&&(n=2*v(n)-n);var i=v(r),a=v(n),s=-i*r,u=-a*n,f=u/s<1,h=function(r,n){for(var i=0,a=1,s=.5,l=50;;){var u=s*s,f=C(s),h=I(1/C(1+u)),p=1-u+s*(1+u)*h,d=(1-f)/p,y=C(d),g=d*(1+u),v=y*(1-u),m=C(g-r*r),x=n+v+s*m;if(1e-12>o(a-i)||0==--l||0===x)break;x>0?i=s:a=s,s=.5*(i+a)}if(!l)return null;var _=I(f),w=c(_),T=1/w,A=2*f*w,k=(-p*w-(-3*s+h*(1+3*u))*A*(1-f))/(p*p);return[b/4*(r*(-2*T*(.5*k/y*(1-u)-2*s*y*A)+-T*A*m)+-T*(s*(1+u)*k+d*(1+3*u)*A)*I(r/C(g))),_]}(f?u:s,f?s:u),p=h[0],d=h[1],y=c(d);return f&&(p=-_-p),[i*(l(m(p)*y,-m(d))+b),a*I(c(p)*y)]},eb.invert=function(r,n){var i,a,o,c,f,p,d,y,g,v=(A-1)/(A+1),m=C(1-v*v),x=(f=-r,p=m*m,(c=.5*ex(_,m*m)-n)?(d=em(c,p),f?(g=(y=em(f,1-p))[1]*y[1]+p*d[0]*d[0]*y[0]*y[0],[[d[0]*y[2]/g,d[1]*d[2]*y[0]*y[1]/g],[d[1]*y[1]/g,-d[0]*d[2]*y[0]*y[2]/g],[d[2]*y[1]*y[2]/g,-p*d[0]*d[1]*y[0]/g]]):[[d[0],0],[d[1],0],[d[2],0]]):[[0,(y=em(f,1-p))[0]/y[1]],[1/y[1],0],[y[2]/y[1],0]]),b=(i=x[0],o=(a=x[1])[0]*a[0]+a[1]*a[1],[(i[0]*a[0]+i[1]*a[1])/o,(i[1]*a[0]-i[0]*a[1])/o]);return[-(l(b[1],b[0])/1),2*s(u(-.5*h(v*b[0]*b[0]+v*b[1]*b[1])))-_]};var ew=i(61780);function eT(r){var n=m(r),i=c(r),a=eA(r);function s(r,s){var l=a(r,s);r=l[0];var u=m(s=l[1]),f=c(s),h=c(r),p=L(n*u+i*f*h),d=m(p),y=o(d)>1e-6?p/d:1;return[y*i*m(r),(o(r)>_?y:-y)*(n*f-i*u*h)]}return a.invert=eA(-r),s.invert=function(r,i){var o=C(r*r+i*i),s=-m(o),u=c(o),f=o*u,h=-i*s,p=o*n,d=C(f*f+h*h-p*p),y=l(f*p+h*d,h*p-f*d),g=(o>_?-1:1)*l(r*s,o*c(y)*u+i*m(y)*s);return a.invert(g,y)},s}function eA(r){var n=m(r),i=c(r);return function(r,a){var o=c(a),s=c(r)*o,u=m(r)*o,f=m(a);return[l(u,s*i-f*n),I(f*i+s*n)]}}function ek(){var r=0,n=(0,a.U)(eT),i=n(r),o=i.rotate,s=i.stream,l=(0,ew.c)();return i.parallel=function(a){if(!arguments.length)return r*S;var o=i.rotate();return n(r=a*E).rotate(o)},i.rotate=function(n){return arguments.length?(o.call(i,[n[0],n[1]-r*S]),l.center([-n[0],-n[1]]),i):((n=o.call(i))[1]+=r*S,n)},i.stream=function(r){return(r=s(r)).sphere=function(){r.polygonStart();var n,i=l.radius(89.99)().coordinates[0],a=i.length-1,o=-1;for(r.lineStart();++o<a;)r.point((n=i[o])[0],n[1]);for(r.lineEnd(),a=(i=l.radius(90.01)().coordinates[0]).length-1,r.lineStart();--o>=0;)r.point((n=i[o])[0],n[1]);r.lineEnd(),r.polygonEnd()},r},i.scale(79.4187).parallel(45).clipAngle(179.999)}var eM=i(84706),eS=i(16016),eE=I(1-1/3)*S,eI=tD(0);function eL(r){var n=eE*E,i=tM(b,n)[0]-tM(-b,n)[0],a=eI(0,n)[1],s=tM(0,n)[1],l=k-s,c=M/r,u=4/M,h=a+l*l*4/M;function y(y,g){var v,m=o(g);if(m>n){var x=d(r-1,p(0,f((y+b)/c)));(v=tM(y+=b*(r-1)/r-x*c,m))[0]=v[0]*M/i-M*(r-1)/(2*r)+x*M/r,v[1]=a+4*(v[1]-s)*l/M,g<0&&(v[1]=-v[1])}else v=eI(y,g);return v[0]*=u,v[1]/=h,v}return y.invert=function(n,y){n/=u;var g=o(y*=h);if(g>a){var v=d(r-1,p(0,f((n+b)/c)));n=(n+b*(r-1)/r-v*c)*i/M;var m=tM.invert(n,.25*(g-a)*M/l+s);return m[0]-=b*(r-1)/r-v*c,y<0&&(m[1]=-m[1]),m}return eI.invert(n,y)},y}function eC(r,n){return[r,1&n?89.999999:eE]}function eO(r,n){return[r,1&n?-89.999999:-eE]}function eD(r){return[.999999*r[0],r[1]]}function eP(){var r=4,n=(0,a.U)(eL),i=n(r),o=i.stream;return i.lobes=function(i){return arguments.length?n(r=+i):r},i.stream=function(n){var a=i.rotate(),s=o(n),l=(i.rotate([0,0]),o(n));return i.rotate(a),s.sphere=function(){var n,i;(0,eS.c)((n=180/r,i=[].concat((0,eM.ik)(-180,180+n/2,n).map(eC),(0,eM.ik)(180,-180-n/2,-n).map(eO)),{type:"Polygon",coordinates:[180===n?i.map(eD):i]}),l)},s},i.scale(239.75)}function eB(r){var n,i=1+r,a=I(m(1/i)),s=2*C(b/(n=b+4*a*i)),u=.5*s*(i+C(r*(2+r))),f=r*r,h=i*i;function p(p,d){var y,g,v=1-m(d);if(v&&v<2){var x,w=_-d,T=25;do{var A=m(w),k=c(w),M=a+l(A,i-k),S=1+h-2*i*k;w-=x=(w-f*a-i*A+S*M-.5*v*n)/(2*i*A*M)}while(o(x)>1e-12&&--T>0)y=s*C(S),g=p*M/b}else y=s*(r+v),g=p*a/b;return[y*m(g),u-y*c(g)]}return p.invert=function(r,o){var c=r*r+(o-=u)*o,p=(1+h-c/(s*s))/(2*i),d=L(p),y=m(d),g=a+l(y,i-p);return[I(r/C(c))*b/g,I(1-2*(d-f*a-i*y+(1+h-2*i*p)*g)/n)]},p}function eR(){var r=1,n=(0,a.U)(eB),i=n(r);return i.ratio=function(i){return arguments.length?n(r=+i):r},i.scale(167.774).center([0,18.67])}function ez(r,n){return n>-.7109889596207567?((r=ta(r,n))[1]+=.0528035274542,r):tu(r,n)}function eF(){return(0,a.c)(ez).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function eN(r,n){return o(n)>.7109889596207567?((r=ta(r,n))[1]-=n>0?.0528035274542:-.0528035274542,r):tu(r,n)}function eU(){return(0,a.c)(eN).scale(152.63)}function ej(r,n,i,a){var o=C(4*b/(2*i+(1+r-n/2)*m(2*i)+(r+n)/2*m(4*i)+n/2*m(6*i))),s=C(a*m(i)*C((1+r*c(2*i)+n*c(4*i))/(1+r+n))),l=i*f(1);function u(i){return C(1+r*c(2*i)+n*c(4*i))}function f(a){var o=a*i;return(2*o+(1+r-n/2)*m(2*o)+(r+n)/2*m(4*o)+n/2*m(6*o))/i}function h(r){return u(r)*m(r)}var p=function(r,n){var a=i*Q(f,l*m(n)/i,n/b);isNaN(a)&&(a=i*v(n));var h=o*u(a);return[h*s*r/b*c(a),h/s*m(a)]};return p.invert=function(r,n){var a=Q(h,n*s/o);return[r*b/(c(a)*o*s*u(a)),I(i*f(a/i)/l)]},0===i&&(o=C(a/b),(p=function(r,n){return[r*o,m(n)/o]}).invert=function(r,n){return[r/o,I(n*o)]}),p}function eV(){var r=1,n=0,i=45*E,o=2,s=(0,a.U)(ej),l=s(r,n,i,o);return l.a=function(a){return arguments.length?s(r=+a,n,i,o):r},l.b=function(a){return arguments.length?s(r,n=+a,i,o):n},l.psiMax=function(a){return arguments.length?s(r,n,i=+a*E,o):i*S},l.ratio=function(a){return arguments.length?s(r,n,i,o=+a):o},l.scale(180.739)}function eH(r,n,i){function a(i){return r+(1-r)*y(1-y(i,n),1/n)}function s(r){var n,i,o,s;return void 0===n&&(n=20),i=a(0),o=a(.5*(0+r)),s=a(r),function r(n,i,a,o,s,l,c,u,f,h,p){var d,y,g,v,m,x,b,_,w,T;if(p.nanEncountered)return NaN;if(y=n(i+.25*(d=a-i)),g=n(a-.25*d),isNaN(y))p.nanEncountered=!0;else{if(!isNaN(g))return T=((x=(v=d*(o+4*y+s)/12)+(m=d*(s+4*g+l)/12))-c)/15,h>f?(p.maxDepthCount++,x+T):Math.abs(T)<u?x+T:isNaN(_=r(n,i,b=i+.5*d,o,y,s,v,.5*u,f,h+1,p))?(p.nanEncountered=!0,NaN):isNaN(w=r(n,b,a,s,g,l,m,.5*u,f,h+1,p))?(p.nanEncountered=!0,NaN):_+w;p.nanEncountered=!0}}(a,0,r,i,o,s,(i+4*o+s)*(r-0)/6,1e-4,n,1,{maxDepthCount:0,nanEncountered:!1})}for(var l=1/s(1),c=(1+1e-8)*l,u=[],f=0;f<=1e3;f++)u.push(s(f/1e3)*c);function h(r){var n=0,i=1e3,a=500;do u[a]>r?i=a:n=a,a=n+i>>1;while(a>n)var o=u[a+1]-u[a];return o&&(o=(r-u[a+1])/o),(a+1+o)/1e3}var p=2*h(1)/b*l/i,d=function(r,n){var i=h(o(m(n))),s=a(i)*r;return i/=p,[s,n>=0?i:-i]};return d.invert=function(r,n){var i;return 1>o(n*=p)&&(i=v(n)*I(s(o(n))*l)),[r/a(o(n)),i]},d}function eq(){var r=0,n=2.5,i=1.183136,o=(0,a.U)(eH),s=o(r,n,i);return s.alpha=function(a){return arguments.length?o(r=+a,n,i):r},s.k=function(a){return arguments.length?o(r,n=+a,i):n},s.gamma=function(a){return arguments.length?o(r,n,i=+a):i},s.scale(152.63)}function eG(r,n){for(var i,a,o,s=-1,l=r.length,c=r[0],u=[];++s<l;){a=((i=r[s])[0]-c[0])/n,o=(i[1]-c[1])/n;for(var f=0;f<n;++f)u.push([c[0]+f*a,c[1]+f*o]);c=i}return u.push(i),u}function eW(r,n,i){function s(i,a){for(var o=a<0?-1:1,s=n[+(a<0)],l=0,c=s.length-1;l<c&&i>s[l][2][0];++l);var u=r(i-s[l][1][0],a);return u[0]+=r(s[l][1][0],o*a>o*s[l][0][1]?s[l][0][1]:a)[0],u}i?s.invert=i(s):r.invert&&(s.invert=function(i,a){for(var l=c[+(a<0)],u=n[+(a<0)],f=0,h=l.length;f<h;++f){var p=l[f];if(p[0][0]<=i&&i<p[1][0]&&p[0][1]<=a&&a<p[1][1]){var d,y,g=r.invert(i-r(u[f][1][0],0)[0],a);return g[0]+=u[f][1][0],(d=s(g[0],g[1]),y=[i,a],1e-6>o(d[0]-y[0])&&1e-6>o(d[1]-y[1]))?g:null}}});var l,c,u=(0,a.c)(s),f=u.stream;return u.stream=function(r){var n=u.rotate(),i=f(r),a=(u.rotate([0,0]),f(r));return u.rotate(n),i.sphere=function(){(0,eS.c)(l,a)},i},u.lobes=function(i){return arguments.length?(l=function(r){var n,i,a,o,s,l,c,u=[],f=r[0].length;for(c=0;c<f;++c)i=(n=r[0][c])[0][0],a=n[0][1],o=n[1][1],s=n[2][0],l=n[2][1],u.push(eG([[i+1e-6,a+1e-6],[i+1e-6,o-1e-6],[s-1e-6,o-1e-6],[s-1e-6,l+1e-6]],30));for(c=r[1].length-1;c>=0;--c)i=(n=r[1][c])[0][0],a=n[0][1],o=n[1][1],s=n[2][0],l=n[2][1],u.push(eG([[s-1e-6,l-1e-6],[s-1e-6,o+1e-6],[i+1e-6,o+1e-6],[i+1e-6,a-1e-6]],30));return{type:"Polygon",coordinates:[(0,eM.Uf)(u)]}}(i),c=(n=i.map(function(r){return r.map(function(r){return[[r[0][0]*E,r[0][1]*E],[r[1][0]*E,r[1][1]*E],[r[2][0]*E,r[2][1]*E]]})})).map(function(n){return n.map(function(n){var i,a=r(n[0][0],n[0][1])[0],o=r(n[2][0],n[2][1])[0],s=r(n[1][0],n[0][1])[1],l=r(n[1][0],n[1][1])[1];return s>l&&(i=s,s=l,l=i),[[a,s],[o,l]]})}),u):n.map(function(r){return r.map(function(r){return[[r[0][0]*S,r[0][1]*S],[r[1][0]*S,r[1][1]*S],[r[2][0]*S,r[2][1]*S]]})})},null!=n&&u.lobes(n),u}ez.invert=function(r,n){return n>-.7109889596207567?ta.invert(r,n-.0528035274542):tu.invert(r,n)},eN.invert=function(r,n){return o(n)>.7109889596207567?ta.invert(r,n+(n>0?.0528035274542:-.0528035274542)):tu.invert(r,n)};var eY=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function eZ(){return eW(ts,eY).scale(160.857)}var eX=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function eK(){return eW(eN,eX).scale(152.63)}var eJ=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function e$(){return eW(ta,eJ).scale(169.529)}var eQ=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function e0(){return eW(ta,eQ).scale(169.529).rotate([20,0])}var e1=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function e2(){return eW(ez,e1,tt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var e3=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function e4(){return eW(tu,e3).scale(152.63).rotate([-20,0])}function e6(r,n){return[3/M*r*C(b*b/3-n*n),n]}function e5(){return(0,a.c)(e6).scale(158.837)}function e8(r){function n(n,i){if(1e-6>o(o(i)-_))return[0,i<0?-2:2];var a=m(i),s=y((1+a)/(1-a),r/2),l=.5*(s+1/s)+c(n*=r);return[2*m(n)/l,(s-1/s)/l]}return n.invert=function(n,i){var a=o(i);if(1e-6>o(a-2))return n?null:[0,v(i)*_];if(a>2)return null;var s=(n/=2)*n,c=(i/=2)*i,u=2*i/(1+s+c);return u=y((1+u)/(1-u),1/r),[l(2*n,1-s-c)/r,I((u-1)/(u+1))]},n}function e7(){var r=.5,n=(0,a.U)(e8),i=n(r);return i.spacing=function(i){return arguments.length?n(r=+i):r},i.scale(124.75)}e6.invert=function(r,n){return[M/3*r/C(b*b/3-n*n),n]};var e9=b/A;function rt(r,n){return[r*(1+C(c(n)))/2,n/(c(n/2)*c(r/6))]}function re(){return(0,a.c)(rt).scale(97.2672)}function rr(r,n){var i=r*r,a=n*n;return[r*(.975534+a*(-.0143059*i-.119161+-.0547009*a)),n*(1.00384+i*(.0802894+-.02855*a+199025e-9*i)+a*(.0998909+-.0491032*a))]}function rn(){return(0,a.c)(rr).scale(139.98)}function ri(r,n){return[m(r)/c(n),x(n)*c(r)]}function ra(){return(0,a.c)(ri).scale(144.049).clipAngle(89.999)}function ro(r){var n=c(r),i=x(w+r/2);function a(a,s){var l=s-r,c=1e-6>o(l)?a*n:1e-6>o(c=w+s/2)||1e-6>o(o(c)-_)?0:a*l/h(x(c)/i);return[c,l]}return a.invert=function(a,s){var l,c=s+r;return[1e-6>o(s)?a/n:1e-6>o(l=w+c/2)||1e-6>o(o(l)-_)?0:a*h(x(l)/i)/s,c]},a}function rs(){return tc(ro).parallel(40).scale(158.837)}function rl(r,n){return[r,1.25*h(x(w+.4*n))]}function rc(){return(0,a.c)(rl).scale(108.318)}function ru(r){var n=r.length-1;function i(i,a){for(var o,s=c(a),l=2/(1+s*c(i)),u=l*s*m(i),f=l*m(a),h=n,p=r[h],d=p[0],y=p[1];--h>=0;)d=(p=r[h])[0]+u*(o=d)-f*y,y=p[1]+u*y+f*o;return[d=u*(o=d)-f*y,y=u*y+f*o]}return i.invert=function(i,a){var u=20,f=i,h=a;do{for(var p,d=n,y=r[d],g=y[0],v=y[1],x=0,b=0;--d>=0;)x=g+f*(p=x)-h*b,b=v+f*b+h*p,g=(y=r[d])[0]+f*(p=g)-h*v,v=y[1]+f*v+h*p;var _,w,T=(x=g+f*(p=x)-h*b)*x+(b=v+f*b+h*p)*b;f-=_=((g=f*(p=g)-h*v-i)*x+(v=f*v+h*p-a)*b)/T,h-=w=(v*x-g*b)/T}while(o(_)+o(w)>1e-6*1e-6&&--u>0)if(u){var A=C(f*f+h*h),k=2*s(.5*A),M=m(k);return[l(f*M,A*c(k)),A?I(h*M/A):0]}},i}rt.invert=function(r,n){var i=o(r),a=o(n),s=1e-6,l=_;a<e9?l*=a/e9:s+=6*L(e9/a);for(var u=0;u<25;u++){var f=m(l),h=C(c(l)),p=m(l/2),d=c(l/2),y=m(s/6),g=c(s/6),v=.5*s*(1+h)-i,x=l/(d*g)-a,b=h?-.25*s*f/h:0,w=.5*(1+h),T=(1+.5*l*p/d)/(d*g),A=l/d*(y/6)/(g*g),k=b*A-T*w,M=(v*A-x*w)/k,S=(x*b-v*T)/k;if(l-=M,s-=S,1e-6>o(M)&&1e-6>o(S))break}return[r<0?-s:s,n<0?-l:l]},rr.invert=function(r,n){var i=v(r)*b,a=n/2,s=50;do{var l=i*i,c=a*a,u=i*a,f=i*(.975534+c*(-.0143059*l-.119161+-.0547009*c))-r,h=a*(1.00384+l*(.0802894+-.02855*c+199025e-9*l)+c*(.0998909+-.0491032*c))-n,p=.975534-c*(.119161+3*l*.0143059+.0547009*c),d=-u*(.238322+.2188036*c+.0286118*l),y=u*(.1605788+7961e-7*l+-.0571*c),g=1.00384+l*(.0802894+199025e-9*l)+c*(3*(.0998909-.02855*l)-.245516*c),m=d*y-g*p,x=(h*d-f*g)/m,_=(f*y-h*p)/m;i-=x,a-=_}while((o(x)>1e-6||o(_)>1e-6)&&--s>0)return s&&[i,a]},ri.invert=function(r,n){var i=r*r,a=n*n+1,o=i+a,s=r?T*C((o-C(o*o-4*i))/i):1/C(a);return[I(r*s),v(n)*L(s)]},rl.invert=function(r,n){return[r,2.5*s(u(.8*n))-.625*b]};var rf=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],rh=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],rp=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],rd=[[.9245,0],[0,0],[.01943,0]],ry=[[.721316,0],[0,0],[-.00881625,-.00617325]];function rg(){return r_(rf,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function rv(){return r_(rh,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function rm(){return r_(rp,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function rx(){return r_(rd,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function rb(){return r_(ry,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function r_(r,n){var i=(0,a.c)(ru(r)).rotate(n).clipAngle(90),o=(0,tx.c)(n),s=i.center;return delete i.rotate,i.center=function(r){return arguments.length?s(o(r)):o.invert(s())},i}var rw=C(6),rT=C(7);function rA(r,n){var i=I(7*m(n)/(3*rw));return[rw*r*(2*c(2*i/3)-1)/rT,9*m(i/3)/rT]}function rk(){return(0,a.c)(rA).scale(164.859)}function rM(r,n){for(var i,a=(1+T)*m(n),s=n,l=0;l<25&&(s-=i=(m(s/2)+m(s)-a)/(.5*c(s/2)+c(s)),!(1e-6>o(i)));l++);return[r*(1+2*c(s)/c(s/2))/(3*A),2*C(3)*m(s/2)/C(2+A)]}function rS(){return(0,a.c)(rM).scale(188.209)}function rE(r,n){for(var i,a=C(6/(4+b)),s=(1+b/4)*m(n),l=n/2,u=0;u<25&&(l-=i=(l/2+m(l)-s)/(.5+c(l)),!(1e-6>o(i)));u++);return[a*(.5+c(l))*r/1.5,a*l]}function rI(){return(0,a.c)(rE).scale(166.518)}rA.invert=function(r,n){var i=3*I(n*rT/9);return[r*rT/(rw*(2*c(2*i/3)-1)),I(3*m(i)*rw/7)]},rM.invert=function(r,n){var i=n*C(2+A)/(2*C(3)),a=2*I(i);return[3*A*r/(1+2*c(a)/c(a/2)),I((i+m(a))/(1+T))]},rE.invert=function(r,n){var i=C(6/(4+b)),a=n/i;return 1e-6>o(o(a)-_)&&(a=a<0?-_:_),[1.5*r/(i*(.5+c(a))),I((a/2+m(a))/(1+b/4))]};var rL=i(47984);function rC(r,n){var i=n*n,a=i*i,o=i*a;return[r*(.84719-.13063*i+o*o*(.05494*i-.04515-.02326*a+.00331*o)),n*(1.01183+a*a*(.01926*i-.02625-.00396*a))]}function rO(){return(0,a.c)(rC).scale(175.295)}function rD(r,n){return[r*(1+c(n))/2,2*(n-x(n/2))]}function rP(){return(0,a.c)(rD).scale(152.63)}rC.invert=function(r,n){var i,a,s,l,c=n,u=25;do c-=i=(c*(1.01183+(s=(a=c*c)*a)*s*(.01926*a-.02625-.00396*s))-n)/(1.01183+s*s*(.21186*a-.23625+-.05148*s));while(o(i)>1e-12&&--u>0)return[r/(.84719-.13063*(a=c*c)+(l=a*(s=a*a))*l*(.05494*a-.04515-.02326*s+.00331*l)),c]},rD.invert=function(r,n){for(var i=n/2,a=0,s=1/0;a<10&&o(s)>1e-6;++a){var l=c(n/2);n-=s=(n-x(n/2)-i)/(1-.5/(l*l))}return[2*r/(1+c(n)),n]};var rB=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function rR(){return eW(K(1/0),rB).rotate([20,0]).scale(152.63)}function rz(r,n){var i=m(n),a=c(n),s=v(r);if(0===r||o(n)===_)return[0,n];if(0===n)return[r,0];if(o(r)===_)return[r*a,_*i];var l=b/(2*r)-2*r/b,u=2*n/b,f=(1-u*u)/(i-u),h=l*l,p=f*f,d=1+h/p,y=1+p/h,g=(l*i/f-l/2)/d,x=(p*i/h+f/2)/y,w=x*x-(p*i*i/h+f*i-1)/y;return[_*(g+C(g*g+a*a/d)*s),_*(x+C(w<0?0:w)*v(-n*l)*s)]}function rF(){return(0,a.c)(rz).scale(127.267)}function rN(r,n){var i=n*n;return[r,n*(1.0148+i*i*(.23185+i*(-.14499+.02406*i)))]}function rU(){return(0,a.c)(rN).scale(139.319)}function rj(r,n){if(1e-6>o(n))return[r,0];var i=x(n),a=r*m(n);return[m(a)/i,n+(1-c(a))/i]}function rV(){return(0,a.c)(rj).scale(103.74)}rz.invert=function(r,n){var i=(r/=_)*r,a=i+(n/=_)*n,o=b*b;return[r?(a-1+C((1-a)*(1-a)+4*i))/(2*r)*_:0,Q(function(r){return a*(b*m(r)-2*r)*b+4*r*r*(n-m(r))+2*b*r-o*n},0)]},rN.invert=function(r,n){n>1.790857183?n=1.790857183:n<-1.790857183&&(n=-1.790857183);var i,a=n;do{var s=a*a;a-=i=(a*(1.0148+s*s*(.23185+s*(-.14499+.02406*s)))-n)/(1.0148+s*s*(1.1592500000000001+s*(-1.01493+.21654*s)))}while(o(i)>1e-6)return[r,a]},rj.invert=function(r,n){if(1e-6>o(n))return[r,0];var i,a=r*r+n*n,s=.5*n,l=10;do{var u=x(s),f=1/c(s),h=a-2*n*s+s*s;s-=i=(u*h+2*(s-n))/(2+h*f*f+2*(s-n)*u)}while(o(i)>1e-6&&--l>0)return u=x(s),[(o(n)<o(s+1/u)?I(r*u):v(n)*v(r)*(L(o(r*u))+_))/m(s),s]};var rH=i(13696),rq=i(27284);function rG(r,n){return[r[0]*n[0]+r[1]*n[3],r[0]*n[1]+r[1]*n[4],r[0]*n[2]+r[1]*n[5]+r[2],r[3]*n[0]+r[4]*n[3],r[3]*n[1]+r[4]*n[4],r[3]*n[2]+r[4]*n[5]+r[5]]}function rW(r,n){return[r[0]-n[0],r[1]-n[1]]}function rY(r){return C(r[0]*r[0]+r[1]*r[1])}function rZ(r,n,i){function s(r,i){var a,o=n(r,i),s=o.project([r*S,i*S]);return(a=o.transform)?[a[0]*s[0]+a[1]*s[1]+a[2],-(a[3]*s[0]+a[4]*s[1]+a[5])]:(s[1]=-s[1],s)}(function r(n,i){if(n.edges=function(r){for(var n=r.length,i=[],a=r[n-1],o=0;o<n;++o)i.push([a,a=r[o]]);return i}(n.face),i.face){var a,o,s,u,f,h,p=n.shared=function(r,n){for(var i,a,o=r.length,s=null,l=0;l<o;++l){i=r[l];for(var c=n.length;--c>=0;)if(a=n[c],i[0]===a[0]&&i[1]===a[1]){if(s)return[s,i];s=i}}}(n.face,i.face),d=(a=p.map(i.project),o=p.map(n.project),s=rW(a[1],a[0]),u=rW(o[1],o[0]),f=l(s[0]*u[1]-s[1]*u[0],s[0]*u[0]+s[1]*u[1]),h=rY(s)/rY(u),rG([1,0,a[0][0],0,1,a[0][1]],rG([h,0,0,0,h,0],rG([c(f),m(f),0,-m(f),c(f),0],[1,0,-o[0][0],0,1,-o[0][1]]))));n.transform=i.transform?rG(i.transform,d):d;for(var y=i.edges,g=0,v=y.length;g<v;++g)rX(p[0],y[g][1])&&rX(p[1],y[g][0])&&(y[g]=n),rX(p[0],y[g][0])&&rX(p[1],y[g][1])&&(y[g]=n);for(g=0,v=(y=n.edges).length;g<v;++g)rX(p[0],y[g][0])&&rX(p[1],y[g][1])&&(y[g]=i),rX(p[0],y[g][1])&&rX(p[1],y[g][0])&&(y[g]=i)}else n.transform=i.transform;return n.children&&n.children.forEach(function(i){r(i,n)}),n})(r,{transform:null}),function r(n){return n.project.invert||n.children&&n.children.some(r)}(r)&&(s.invert=function(i,a){var o=function r(i,a){var o=i.project.invert,s=i.transform,l=a;if(s&&(l=[(s=[(u=1/((c=s)[0]*c[4]-c[1]*c[3]))*c[4],-u*c[1],u*(c[1]*c[5]-c[2]*c[4]),-u*c[3],u*c[0],u*(c[2]*c[3]-c[0]*c[5])])[0]*l[0]+s[1]*l[1]+s[2],s[3]*l[0]+s[4]*l[1]+s[5]]),o&&i===n((f=h=o(l))[0]*E,f[1]*E))return h;for(var c,u,f,h,p=i.children,d=0,y=p&&p.length;d<y;++d)if(h=r(p[d],a))return h}(r,[i,-a]);return o&&(o[0]*=E,o[1]*=E,o)});var u=(0,a.c)(s),f=u.stream;return u.stream=function(n){var i=u.rotate(),a=f(n),s=(u.rotate([0,0]),f(n));return u.rotate(i),a.sphere=function(){s.polygonStart(),s.lineStart(),function r(n,i,a){var s,l,c=i.edges,u=c.length,f={type:"MultiPoint",coordinates:i.face},h=i.face.filter(function(r){return 90!==o(r[1])}),p=(0,rH.c)({type:"MultiPoint",coordinates:h}),d=!1,y=-1,g=p[1][0]-p[0][0],v=180===g||360===g?[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]:(0,tm.c)(f);if(a)for(;++y<u&&c[y]!==a;);++y;for(var m=0;m<u;++m)Array.isArray(l=c[(m+y)%u])?(d||(n.point((s=(0,rq.c)(l[0],v)(1e-6))[0],s[1]),d=!0),n.point((s=(0,rq.c)(l[1],v)(1e-6))[0],s[1])):(d=!1,l!==a&&r(n,l,i))}(s,r),s.lineEnd(),s.polygonEnd()},a},u.angle(null==i?-30:i*S)}function rX(r,n){return r&&n&&r[0]===n[0]&&r[1]===n[1]}var rK=i(53285),rJ=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],r$=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(r){return r.map(function(r){return rJ[r]})});function rQ(r){r=r||function(r){var n=(0,tm.c)({type:"MultiPoint",coordinates:r});return(0,rK.c)().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=r$.map(function(n){return{face:n,project:r(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,i){var a=n[r];a&&(a.children||(a.children=[])).push(n[i])}),rZ(n[0],function(r,i){return n[r<-b/2?i<0?6:4:r<0?i<0?2:0:r<b/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var r0=2/C(3);function r1(r,n){var i=tM(r,n);return[i[0]*r0,i[1]]}function r2(r){r=r||function(r){var n=(0,tm.c)({type:"MultiPoint",coordinates:r});return(0,a.c)(r1).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])};var n=r$.map(function(n){return{face:n,project:r(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,i){var a=n[r];a&&(a.children||(a.children=[])).push(n[i])}),rZ(n[0],function(r,i){return n[r<-b/2?i<0?6:4:r<0?i<0?2:0:r<b/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function r3(r){r=r||function(r){var n=6===r.length?(0,tm.c)({type:"MultiPoint",coordinates:r}):r[0];return(0,rK.c)().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=r$.map(function(r){for(var n,i=r.map(r5),a=i.length,o=i[a-1],s=[],l=0;l<a;++l)n=i[l],s.push(r6([.9486832980505138*o[0]+.31622776601683794*n[0],.9486832980505138*o[1]+.31622776601683794*n[1],.9486832980505138*o[2]+.31622776601683794*n[2]]),r6([.9486832980505138*n[0]+.31622776601683794*o[0],.9486832980505138*n[1]+.31622776601683794*o[1],.9486832980505138*n[2]+.31622776601683794*o[2]])),o=n;return s}),i=[],a=[-1,0,0,1,0,1,4,5];n.forEach(function(r,o){for(var s,l,c=r$[o],u=c.length,f=i[o]=[],h=0;h<u;++h)n.push([c[h],r[(2*h+2)%(2*u)],r[(2*h+1)%(2*u)]]),a.push(o),f.push((s=r5(r[(2*h+2)%(2*u)]),l=r5(r[(2*h+1)%(2*u)]),[s[1]*l[2]-s[2]*l[1],s[2]*l[0]-s[0]*l[2],s[0]*l[1]-s[1]*l[0]]))});var o=n.map(function(n){return{project:r(n),face:n}});return a.forEach(function(r,n){var i=o[r];i&&(i.children||(i.children=[])).push(o[n])}),rZ(o[0],function(r,n){var a=c(n),s=[a*c(r),a*m(r),m(n)],l=r<-b/2?n<0?6:4:r<0?n<0?2:0:r<b/2?n<0?3:1:n<0?7:5,u=i[l];return o[0>r4(u[0],s)?8+3*l:0>r4(u[1],s)?8+3*l+1:0>r4(u[2],s)?8+3*l+2:l]}).angle(-30).scale(110.625).center([0,45])}function r4(r,n){for(var i=0,a=r.length,o=0;i<a;++i)o+=r[i]*n[i];return o}function r6(r){return[l(r[1],r[0])*S,I(p(-1,d(1,r[2])))*S]}function r5(r){var n=r[0]*E,i=r[1]*E,a=c(i);return[a*c(n),a*m(n),m(i)]}function r8(){}function r7(r,n){var i,a=n.stream;if(!a)throw Error("invalid projection");switch(r&&r.type){case"Feature":i=nt;break;case"FeatureCollection":i=r9;break;default:i=ne}return i(r,a)}function r9(r,n){return{type:"FeatureCollection",features:r.features.map(function(r){return nt(r,n)})}}function nt(r,n){return{type:"Feature",id:r.id,properties:r.properties,geometry:ne(r.geometry,n)}}function ne(r,n){var i;if(!r)return null;if("GeometryCollection"===r.type)return{type:"GeometryCollection",geometries:r.geometries.map(function(r){return ne(r,n)})};switch(r.type){case"Point":case"MultiPoint":i=ni;break;case"LineString":case"MultiLineString":i=na;break;case"Polygon":case"MultiPolygon":case"Sphere":i=no;break;default:return null}return(0,eS.c)(r,n(i)),i.result()}r1.invert=function(r,n){return tM.invert(r/r0,n)};var nr=[],nn=[],ni={point:function(r,n){nr.push([r,n])},result:function(){var r=nr.length?nr.length<2?{type:"Point",coordinates:nr[0]}:{type:"MultiPoint",coordinates:nr}:null;return nr=[],r}},na={lineStart:r8,point:function(r,n){nr.push([r,n])},lineEnd:function(){nr.length&&(nn.push(nr),nr=[])},result:function(){var r=nn.length?nn.length<2?{type:"LineString",coordinates:nn[0]}:{type:"MultiLineString",coordinates:nn}:null;return nn=[],r}},no={polygonStart:r8,lineStart:r8,point:function(r,n){nr.push([r,n])},lineEnd:function(){var r=nr.length;if(r){do nr.push(nr[0].slice());while(++r<4)nn.push(nr),nr=[]}},polygonEnd:r8,result:function(){if(!nn.length)return null;var r=[],n=[];return nn.forEach(function(i){(function(r){if((n=r.length)<4)return!1;for(var n,i=0,a=r[n-1][1]*r[0][0]-r[n-1][0]*r[0][1];++i<n;)a+=r[i-1][1]*r[i][0]-r[i-1][0]*r[i][1];return a<=0})(i)?r.push([i]):n.push(i)}),n.forEach(function(n){var i=n[0];r.some(function(r){if(function(r,n){for(var i=n[0],a=n[1],o=!1,s=0,l=r.length,c=l-1;s<l;c=s++){var u=r[s],f=u[0],h=u[1],p=r[c],d=p[0],y=p[1];h>a^y>a&&i<(d-f)*(a-h)/(y-h)+f&&(o=!o)}return o}(r[0],i))return r.push(n),!0})||r.push([n])}),nn=[],r.length?r.length>1?{type:"MultiPolygon",coordinates:r}:{type:"Polygon",coordinates:r[0]}:null}};function ns(r){var n=r(_,0)[0]-r(-_,0)[0];function i(i,a){var s=o(i)<_,l=r(s?i:i>0?i-b:i+b,a),c=(l[0]-l[1])*T,u=(l[0]+l[1])*T;if(s)return[c,u];var f=n*T,h=c>0^u>0?-1:1;return[h*c-v(u)*f,h*u-v(c)*f]}return r.invert&&(i.invert=function(i,a){var s=(i+a)*T,l=(a-i)*T,c=o(s)<.5*n&&o(l)<.5*n;if(!c){var u=n*T,f=s>0^l>0?-1:1,h=-f*i+(l>0?1:-1)*u,p=-f*a+(s>0?1:-1)*u;s=(-h-p)*T,l=(h-p)*T}var d=r.invert(s,l);return c||(d[0]+=s>0?b:-b),d}),(0,a.c)(i).rotate([-90,-90,45]).clipAngle(179.999)}function nl(){return ns(eg).scale(176.423)}function nc(){return ns(eb).scale(111.48)}function nu(r,n){if(!(0<=(n=+n)&&n<=20))throw Error("invalid digits");function i(r){var i=r.length,a=2,o=Array(i);for(o[0]=+r[0].toFixed(n),o[1]=+r[1].toFixed(n);a<i;)o[a]=r[a],++a;return o}function a(r){for(var n=i(r[0]),a=[n],o=1;o<r.length;o++){var s=i(r[o]);(s.length>2||s[0]!=n[0]||s[1]!=n[1])&&(a.push(s),n=s)}return 1===a.length&&r.length>1&&a.push(i(r[r.length-1])),a}function o(r){return r.map(a)}function s(r){var n;if(null==r)return r;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(s)};break;case"Point":n={type:"Point",coordinates:i(r.coordinates)};break;case"MultiPoint":n={type:r.type,coordinates:r.coordinates.map(i)};break;case"LineString":n={type:r.type,coordinates:a(r.coordinates)};break;case"MultiLineString":case"Polygon":n={type:r.type,coordinates:o(r.coordinates)};break;case"MultiPolygon":n={type:"MultiPolygon",coordinates:r.coordinates.map(o)};break;default:return r}return null!=r.bbox&&(n.bbox=r.bbox),n}function l(r){var n={type:"Feature",properties:r.properties,geometry:s(r.geometry)};return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),n}if(null!=r)switch(r.type){case"Feature":return l(r);case"FeatureCollection":var c={type:"FeatureCollection",features:r.features.map(l)};return null!=r.bbox&&(c.bbox=r.bbox),c;default:return s(r)}return r}function nf(r){var n=m(r);function i(i,a){var o=n?x(i*n/2)/n:i/2;if(!a)return[2*o,-r];var l=2*s(o*m(a)),u=1/x(a);return[m(l)*u,a+(1-c(l))*u-r]}return i.invert=function(i,a){if(1e-6>o(a+=r))return[n?2*s(n*i/2)/n:i,0];var l,u=i*i+a*a,f=0,h=10;do{var p=x(f),d=1/c(f),y=u-2*a*f+f*f;f-=l=(p*y+2*(f-a))/(2+y*d*d+2*(f-a)*p)}while(o(l)>1e-6&&--h>0)var g=i*(p=x(f)),v=x(o(a)<o(f+1/p)?.5*I(g):.5*L(g)+b/4)/m(f);return[n?2*s(n*v)/n:2*v,f]},i}function nh(){return tc(nf).scale(131.215)}var np=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function nd(r,n){var i,a=d(18,36*o(n)/b),s=f(a),l=a-s,c=(i=np[s])[0],u=i[1],h=(i=np[++s])[0],p=i[1],y=(i=np[d(19,++s)])[0],g=i[1];return[r*(h+l*(y-c)/2+l*l*(y-2*h+c)/2),(n>0?_:-_)*(p+l*(g-u)/2+l*l*(g-2*p+u)/2)]}function ny(){return(0,a.c)(nd).scale(152.63)}function ng(r,n){var i=function(r){function n(n,i){var a=c(i),o=(r-1)/(r-a*c(n));return[o*a*m(n),o*m(i)]}return n.invert=function(n,i){var a=n*n+i*i,o=C(a),s=(r-C(1-a*(r+1)/(r-1)))/((r-1)/o+o/(r-1));return[l(n*s,o*C(1-s*s)),o?I(i*s/o):0]},n}(r);if(!n)return i;var a=c(n),o=m(n);function s(n,s){var l=i(n,s),c=l[1],u=c*o/(r-1)+a;return[l[0]*a/u,c/u]}return s.invert=function(n,s){var l=(r-1)/(r-1-s*o);return i.invert(l*n,l*s*a)},s}function nv(){var r=2,n=0,i=(0,a.U)(ng),o=i(r,n);return o.distance=function(a){return arguments.length?i(r=+a,n):r},o.tilt=function(a){return arguments.length?i(r,n=a*E):n*S},o.scale(432.147).clipAngle(L(1/r)*S-1e-6)}function nm(r){return r.length>0}function nx(r){return -90===r||90===r?[0,r]:[-180,Math.floor(1e4*r)/1e4]}function nb(r){var n=r[0],i=r[1],a=!1;return n<=-179.9999?(n=-180,a=!0):n>=179.9999&&(n=180,a=!0),i<=-89.9999?(i=-90,a=!0):i>=89.9999&&(i=90,a=!0),a?[n,i]:r}function n_(r){return r.map(nb)}function nw(r,n,i){for(var a=0,o=r.length;a<o;++a){var s=r[a].slice();i.push({index:-1,polygon:n,ring:s});for(var l=0,c=s.length;l<c;++l){var u=s[l],f=u[0],h=u[1];if(f<=-179.9999||f>=179.9999||h<=-89.9999||h>=89.9999){s[l]=nb(u);for(var p=l+1;p<c;++p){var d=s[p],y=d[0],g=d[1];if(y>-179.9999&&y<179.9999&&g>-89.9999&&g<89.9999)break}if(p===l+1)continue;if(l){var v={index:-1,polygon:n,ring:s.slice(0,l+1)};v.ring[v.ring.length-1]=nx(h),i[i.length-1]=v}else i.pop();if(p>=c)break;i.push({index:-1,polygon:n,ring:s=s.slice(p-1)}),s[0]=nx(s[0][1]),l=-1,c=s.length}}}}function nT(r){var n,i,a,o,s,l,c=r.length,u={},f={};for(n=0;n<c;++n)a=(i=r[n]).ring[0],s=i.ring[i.ring.length-1],a[0]!==s[0]||a[1]!==s[1]?(i.index=n,u[a]=f[s]=i):(i.polygon.push(i.ring),r[n]=null);for(n=0;n<c;++n)if(i=r[n]){if(a=i.ring[0],s=i.ring[i.ring.length-1],o=f[a],l=u[s],delete u[a],delete f[s],a[0]===s[0]&&a[1]===s[1]){i.polygon.push(i.ring);continue}o?(delete f[a],delete u[o.ring[0]],o.ring.pop(),r[o.index]=null,i={index:-1,polygon:o.polygon,ring:o.ring.concat(i.ring)},o===l?i.polygon.push(i.ring):(i.index=c++,r.push(u[i.ring[0]]=f[i.ring[i.ring.length-1]]=i))):l?(delete u[s],delete f[l.ring[l.ring.length-1]],i.ring.pop(),i={index:c++,polygon:l.polygon,ring:i.ring.concat(l.ring)},r[l.index]=null,r.push(u[i.ring[0]]=f[i.ring[i.ring.length-1]]=i)):(i.ring.push(i.ring[0]),i.polygon.push(i.ring))}}function nA(r){var n={type:"Feature",geometry:nk(r.geometry)};return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function nk(r){if(null==r)return r;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(nk)};break;case"Point":n={type:"Point",coordinates:nb(r.coordinates)};break;case"MultiPoint":case"LineString":n={type:r.type,coordinates:n_(r.coordinates)};break;case"MultiLineString":n={type:"MultiLineString",coordinates:r.coordinates.map(n_)};break;case"Polygon":var n,i,a,o,s=[];nw(r.coordinates,s,i=[]),nT(i),n={type:"Polygon",coordinates:s};break;case"MultiPolygon":i=[],a=-1,o=r.coordinates.length;for(var l=Array(o);++a<o;)nw(r.coordinates[a],l[a]=[],i);nT(i),n={type:"MultiPolygon",coordinates:l.filter(nm)};break;default:return r}return null!=r.bbox&&(n.bbox=r.bbox),n}function nM(r){if(null==r)return r;switch(r.type){case"Feature":return nA(r);case"FeatureCollection":var n={type:"FeatureCollection",features:r.features.map(nA)};return null!=r.bbox&&(n.bbox=r.bbox),n;default:return nk(r)}}function nS(r,n){var i=x(n/2),a=m(w*i);return[r*(.74482-.34588*a*a),1.70711*i]}function nE(){return(0,a.c)(nS).scale(146.153)}function nI(r,n,i){var o=(0,rq.c)(n,i),s=o(.5),l=(0,tx.c)([-s[0],-s[1]])(n),c=o.distance/2,u=-I(m(l[1]*E)/m(c)),f=[-s[0],-s[1],-(l[0]>0?b-u:u)*S],h=(0,a.c)(r(c)).rotate(f),p=(0,tx.c)(f),d=h.center;return delete h.rotate,h.center=function(r){return arguments.length?d(p(r)):p.invert(d())},h.clipAngle(90)}function nL(r){var n=c(r);function i(r,i){var a=(0,rK.Y)(r,i);return a[0]*=n,a}return i.invert=function(r,i){return rK.Y.invert(r/n,i)},i}function nC(){return nO([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function nO(r,n){return nI(nL,r,n)}function nD(r){if(!(r*=2))return W.O;var n=-r/2,i=-n,a=r*r,o=x(i),s=.5/m(i);function u(o,s){var l=L(c(s)*c(o-n)),u=L(c(s)*c(o-i));return[((l*=l)-(u*=u))/(2*r),(s<0?-1:1)*C(4*a*u-(a-l+u)*(a-l+u))/(2*r)]}return u.invert=function(r,a){var u,f,h=a*a,p=c(C(h+(u=r+n)*u)),d=c(C(h+(u=r+i)*u));return[l(f=p-d,u=(p+d)*o),(a<0?-1:1)*L(C(u*u+f*f)*s)]},u}function nP(){return nB([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function nB(r,n){return nI(nD,r,n)}function nR(r,n){if(1e-6>o(n))return[r,0];var i=o(n/_),a=I(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,v(n)*b*x(a/2)];var s=c(a),l=o(b/r-r/b)/2,u=l*l,f=s/(i+s-1),h=f*(2/i-1),p=h*h,d=p+u,y=f-p,g=u+f;return[v(r)*b*(l*y+C(u*y*y-d*(f*f-p)))/d,v(n)*b*(h*g-l*C((u+1)*d-g*g))/d]}function nz(){return(0,a.c)(nR).scale(79.4183)}function nF(r,n){if(1e-6>o(n))return[r,0];var i=o(n/_),a=I(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,v(n)*b*x(a/2)];var s=c(a),l=o(b/r-r/b)/2,u=l*l,f=s*(C(1+u)-l*s)/(1+u*i*i);return[v(r)*b*f,v(n)*b*C(1-f*(2*l+f))]}function nN(){return(0,a.c)(nF).scale(79.4183)}function nU(r,n){if(1e-6>o(n))return[r,0];var i=n/_,a=I(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,b*x(a/2)];var s=(b/r-r/b)/2,l=i/(1+c(a));return[b*(v(r)*C(s*s+1-l*l)-s),b*l]}function nj(){return(0,a.c)(nU).scale(79.4183)}function nV(r,n){if(!n)return[r,0];var i=o(n);if(!r||i===_)return[0,n];var a=i/_,s=a*a,l=(8*a-s*(s+2)-5)/(2*s*(a-1)),c=l*l,u=a*l,f=s+c+2*u,h=a+3*l,p=r/_,d=p+1/p,y=v(o(r)-_)*C(d*d-4),g=y*y,m=(y*(f+c-1)+2*C(f*(s+c*g-1)+(1-s)*(s*(h*h+4*c)+12*u*c+4*c*c)))/(4*f+g);return[v(r)*_*m,v(n)*_*C(1+y*o(m)-m*m)]}function nH(){return(0,a.c)(nV).scale(127.16)}function nq(r,n,i,a){var o=b/3;r=p(r,1e-6),n=p(n,1e-6),r=d(r,_),n=d(n,b-1e-6),i=d(i=p(i,0),99.999999);var s=(a=p(a,1e-6))/100,u=L((i/100+1)*c(o))/o,f=m(r)/m(u*_),h=n/b,y=C(s*m(r/2)/m(n/2));return function(r,n,i,a,o){function s(s,l){var u=i*m(a*l),f=C(1-u*u),h=C(2/(1+f*c(s*=o)));return[r*f*h*m(s),n*u*h]}return s.invert=function(s,c){var u=s/r,f=c/n,h=C(u*u+f*f),p=2*I(h/2);return[l(s*x(p),r*h)/o,h&&I(c*m(p)/(n*i*h))/a]},s}(y/C(h*f*u),1/(y*C(h*f*u)),f,u,h)}function nG(){var r=65*E,n=60*E,i=20,o=200,s=(0,a.U)(nq),l=s(r,n,i,o);return l.poleline=function(a){return arguments.length?s(r=+a*E,n,i,o):r*S},l.parallels=function(a){return arguments.length?s(r,n=+a*E,i,o):n*S},l.inflation=function(a){return arguments.length?s(r,n,i=+a,o):i},l.ratio=function(a){return arguments.length?s(r,n,i,o=+a):o},l.scale(163.775)}function nW(){return nG().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}np.forEach(function(r){r[1]*=1.0144}),nd.invert=function(r,n){var i=n/_,a=90*i,s=d(18,o(a/5)),l=p(0,f(s));do{var c=np[l][1],u=np[l+1][1],h=np[d(19,l+2)][1],y=h-c,g=h-2*u+c,v=2*(o(i)-u)/y,m=g/y,x=v*(1-m*v*(1-2*m*v));if(x>=0||1===l){a=(n>=0?5:-5)*(x+s);var b,w=50;do x=(s=d(18,o(a)/5))-(l=f(s)),c=np[l][1],a-=(b=(n>=0?_:-_)*((u=np[l+1][1])+x*((h=np[d(19,l+2)][1])-c)/2+x*x*(h-2*u+c)/2)-n)*S;while(o(b)>1e-12&&--w>0)break}}while(--l>=0)var T=np[l][0],A=np[l+1][0],k=np[d(19,l+2)][0];return[r/(A+x*(k-T)/2+x*x*(k-2*A+T)/2),a*E]},nS.invert=function(r,n){var i=n/1.70711,a=m(w*i);return[r/(.74482-.34588*a*a),2*s(i)]},nR.invert=function(r,n){if(1e-6>o(n))return[r,0];if(1e-6>o(r))return[0,_*m(2*s(n/b))];var i=(r/=b)*r,a=(n/=b)*n,l=i+a,u=l*l,f=-o(n)*(1+l),h=f-2*a+i,p=-2*f+1+2*a+u,d=(f-h*h/(3*p))/p,y=2*C(-d/3),g=L(3*(a/p+(2*h*h*h/(p*p*p)-9*f*h/(p*p))/27)/(d*y))/3;return[b*(l-1+C(1+2*(i-a)+u))/(2*r),v(n)*b*(-y*c(g+b/3)-h/(3*p))]},nF.invert=function(r,n){if(!r)return[0,_*m(2*s(n/b))];var i=o(r/b),a=(1-i*i-(n/=b)*n)/(2*i),c=C(a*a+1);return[v(r)*b*(c-a),v(n)*_*m(2*l(C((1-2*a*i)*(a+c)-i),C(c+a+i)))]},nU.invert=function(r,n){if(!n)return[r,0];var i=n/b,a=(b*b*(1-i*i)-r*r)/(2*b*r);return[r?b*(v(r)*C(a*a+1)-a):0,_*m(2*s(i))]},nV.invert=function(r,n){if(!r||!n)return[r,n];n/=b;var i,a=v(r)*r/_,s=(a*a-1+4*n*n)/o(a),l=s*s,c=2*n,u=50;do{var f=c*c,h=(8*c-f*(f+2)-5)/(2*f*(c-1)),p=(3*c-f*c-10)/(2*f*c),d=h*h,y=c*h,g=c+h,m=g*g,x=c+3*h,w=-2*g*(4*y*d+(1-4*f+3*f*f)*(1+p)+d*(14*f-6-l+(8*f-8-2*l)*p)+y*(12*f-8+(10*f-10-l)*p)),T=C(m*(f+d*l-1)+(1-f)*(f*(x*x+4*d)+d*(12*y+4*d)));c-=i=(s*(m+d-1)+2*T-a*(4*m+l))/(s*(2*h*p+2*g*(1+p))+w/T-8*g*(s*(-1+d+m)+2*T)*(1+p)/(l+4*m))}while(i>1e-6&&--u>0)return[v(r)*(C(s*s+4)+s)*b/4,_*c]};var nY=4*b+3*C(3),nZ=2*C(2*b*C(3)/nY),nX=ti(nZ*C(3)/b,nZ,nY/6);function nK(){return(0,a.c)(nX).scale(176.84)}function nJ(r,n){return[r*C(1-3*n*n/(b*b)),n]}function n$(){return(0,a.c)(nJ).scale(152.63)}function nQ(r,n){var i=c(n),a=c(r)*i,o=1-a,s=c(r=l(m(r)*i,-m(n))),u=m(r);return[u*(i=C(1-a*a))-s*o,-s*i-u*o]}function n0(){return(0,a.c)(nQ).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function n1(r,n){var i=R(r,n);return[(i[0]+r/_)/2,(i[1]+n)/2]}function n2(){return(0,a.c)(n1).scale(158.837)}nJ.invert=function(r,n){return[r/C(1-3*n*n/(b*b)),n]},nQ.invert=function(r,n){var i=-((r*r+n*n)/2),a=C(-i*(2+i)),o=n*i+r*a,s=r*i-n*a,c=C(s*s+o*o);return[l(a*o,c*(1+i)),c?-I(a*s/c):0]},n1.invert=function(r,n){var i=r,a=n,s=25;do{var l,u=c(a),f=m(a),h=m(2*a),p=f*f,d=u*u,y=m(i),g=c(i/2),v=m(i/2),x=v*v,b=1-d*g*g,w=b?L(u*g)*C(l=1/b):l=0,T=.5*(2*w*u*v+i/_)-r,A=.5*(w*f+a)-n,k=.5*l*(d*x+w*u*g*p)+.5/_,M=l*(y*h/4-w*f*v),S=.125*l*(h*v-w*f*d*y),E=.5*l*(p*g+w*x*u)+.5,I=M*S-E*k,O=(A*M-T*E)/I,D=(T*S-A*k)/I;i-=O,a-=D}while((o(O)>1e-6||o(D)>1e-6)&&--s>0)return[i,a]}},88728:function(r,n,i){function a(){return new o}function o(){this.reset()}i.d(n,{c:function(){return a}}),o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(r){l(s,r,this.t),l(this,s.s,this.s),this.s?this.t+=s.t:this.s=s.t},valueOf:function(){return this.s}};var s=new o;function l(r,n,i){var a=r.s=n+i,o=a-n;r.t=n-(a-o)+(i-o)}},95384:function(r,n,i){i.d(n,{cp:function(){return _},mQ:function(){return d},oB:function(){return g}});var a,o,s,l,c,u=i(88728),f=i(64528),h=i(70932),p=i(16016),d=(0,u.c)(),y=(0,u.c)(),g={point:h.c,lineStart:h.c,lineEnd:h.c,polygonStart:function(){d.reset(),g.lineStart=v,g.lineEnd=m},polygonEnd:function(){var r=+d;y.add(r<0?f.kD+r:r),this.lineStart=this.lineEnd=this.point=h.c},sphere:function(){y.add(f.kD)}};function v(){g.point=x}function m(){b(a,o)}function x(r,n){g.point=b,a=r,o=n,r*=f.qw,n*=f.qw,s=r,l=(0,f.W8)(n=n/2+f.wL),c=(0,f.g$)(n)}function b(r,n){r*=f.qw,n=(n*=f.qw)/2+f.wL;var i=r-s,a=i>=0?1:-1,o=a*i,u=(0,f.W8)(n),h=(0,f.g$)(n),p=c*h,y=l*u+p*(0,f.W8)(o),g=p*a*(0,f.g$)(o);d.add((0,f.WE)(g,y)),s=r,l=u,c=h}function _(r){return y.reset(),(0,p.c)(r,g),2*y}},13696:function(r,n,i){i.d(n,{c:function(){return O}});var a,o,s,l,c,u,f,h,p,d,y=i(88728),g=i(95384),v=i(84220),m=i(64528),x=i(16016),b=(0,y.c)(),_={point:w,lineStart:A,lineEnd:k,polygonStart:function(){_.point=M,_.lineStart=S,_.lineEnd=E,b.reset(),g.oB.polygonStart()},polygonEnd:function(){g.oB.polygonEnd(),_.point=w,_.lineStart=A,_.lineEnd=k,g.mQ<0?(a=-(s=180),o=-(l=90)):b>m.Gg?l=90:b<-m.Gg&&(o=-90),d[0]=a,d[1]=s},sphere:function(){a=-(s=180),o=-(l=90)}};function w(r,n){p.push(d=[a=r,s=r]),n<o&&(o=n),n>l&&(l=n)}function T(r,n){var i=(0,v.ux)([r*m.qw,n*m.qw]);if(h){var u=(0,v.CW)(h,i),f=[u[1],-u[0],0],y=(0,v.CW)(f,u);(0,v.cJ)(y),y=(0,v.G)(y);var g,x=r-c,b=x>0?1:-1,_=y[0]*m.oh*b,w=(0,m.a2)(x)>180;w^(b*c<_&&_<b*r)?(g=y[1]*m.oh)>l&&(l=g):w^(b*c<(_=(_+360)%360-180)&&_<b*r)?(g=-y[1]*m.oh)<o&&(o=g):(n<o&&(o=n),n>l&&(l=n)),w?r<c?I(a,r)>I(a,s)&&(s=r):I(r,s)>I(a,s)&&(a=r):s>=a?(r<a&&(a=r),r>s&&(s=r)):r>c?I(a,r)>I(a,s)&&(s=r):I(r,s)>I(a,s)&&(a=r)}else p.push(d=[a=r,s=r]);n<o&&(o=n),n>l&&(l=n),h=i,c=r}function A(){_.point=T}function k(){d[0]=a,d[1]=s,_.point=w,h=null}function M(r,n){if(h){var i=r-c;b.add((0,m.a2)(i)>180?i+(i>0?360:-360):i)}else u=r,f=n;g.oB.point(r,n),T(r,n)}function S(){g.oB.lineStart()}function E(){M(u,f),g.oB.lineEnd(),(0,m.a2)(b)>m.Gg&&(a=-(s=180)),d[0]=a,d[1]=s,h=null}function I(r,n){return(n-=r)<0?n+360:n}function L(r,n){return r[0]-n[0]}function C(r,n){return r[0]<=r[1]?r[0]<=n&&n<=r[1]:n<r[0]||r[1]<n}function O(r){var n,i,c,u,f,h,y;if(l=s=-(a=o=1/0),p=[],(0,x.c)(r,_),i=p.length){for(p.sort(L),n=1,f=[c=p[0]];n<i;++n)C(c,(u=p[n])[0])||C(c,u[1])?(I(c[0],u[1])>I(c[0],c[1])&&(c[1]=u[1]),I(u[0],c[1])>I(c[0],c[1])&&(c[0]=u[0])):f.push(c=u);for(h=-1/0,n=0,c=f[i=f.length-1];n<=i;c=u,++n)u=f[n],(y=I(c[1],u[0]))>h&&(h=y,a=u[0],s=c[1])}return p=d=null,a===1/0||o===1/0?[[NaN,NaN],[NaN,NaN]]:[[a,o],[s,l]]}},84220:function(r,n,i){i.d(n,{CW:function(){return c},Ez:function(){return l},G:function(){return o},cJ:function(){return h},mg:function(){return u},ux:function(){return s},wx:function(){return f}});var a=i(64528);function o(r){return[(0,a.WE)(r[1],r[0]),(0,a.qR)(r[2])]}function s(r){var n=r[0],i=r[1],o=(0,a.W8)(i);return[o*(0,a.W8)(n),o*(0,a.g$)(n),(0,a.g$)(i)]}function l(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function c(r,n){return[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]]}function u(r,n){r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]}function f(r,n){return[r[0]*n,r[1]*n,r[2]*n]}function h(r){var n=(0,a._I)(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=n,r[1]/=n,r[2]/=n}},24052:function(r,n,i){i.d(n,{c:function(){return B}});var a,o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_=i(64528),w=i(70932),T=i(16016),A={sphere:w.c,point:k,lineStart:S,lineEnd:L,polygonStart:function(){A.lineStart=C,A.lineEnd=O},polygonEnd:function(){A.lineStart=S,A.lineEnd=L}};function k(r,n){r*=_.qw,n*=_.qw;var i=(0,_.W8)(n);M(i*(0,_.W8)(r),i*(0,_.g$)(r),(0,_.g$)(n))}function M(r,n,i){++a,s+=(r-s)/a,l+=(n-l)/a,c+=(i-c)/a}function S(){A.point=E}function E(r,n){r*=_.qw,n*=_.qw;var i=(0,_.W8)(n);m=i*(0,_.W8)(r),x=i*(0,_.g$)(r),b=(0,_.g$)(n),A.point=I,M(m,x,b)}function I(r,n){r*=_.qw,n*=_.qw;var i=(0,_.W8)(n),a=i*(0,_.W8)(r),s=i*(0,_.g$)(r),l=(0,_.g$)(n),c=(0,_.WE)((0,_._I)((c=x*l-b*s)*c+(c=b*a-m*l)*c+(c=m*s-x*a)*c),m*a+x*s+b*l);o+=c,u+=c*(m+(m=a)),f+=c*(x+(x=s)),h+=c*(b+(b=l)),M(m,x,b)}function L(){A.point=k}function C(){A.point=D}function O(){P(g,v),A.point=k}function D(r,n){g=r,v=n,r*=_.qw,n*=_.qw,A.point=P;var i=(0,_.W8)(n);m=i*(0,_.W8)(r),x=i*(0,_.g$)(r),b=(0,_.g$)(n),M(m,x,b)}function P(r,n){r*=_.qw,n*=_.qw;var i=(0,_.W8)(n),a=i*(0,_.W8)(r),s=i*(0,_.g$)(r),l=(0,_.g$)(n),c=x*l-b*s,g=b*a-m*l,v=m*s-x*a,w=(0,_._I)(c*c+g*g+v*v),T=(0,_.qR)(w),A=w&&-T/w;p+=A*c,d+=A*g,y+=A*v,o+=T,u+=T*(m+(m=a)),f+=T*(x+(x=s)),h+=T*(b+(b=l)),M(m,x,b)}function B(r){a=o=s=l=c=u=f=h=p=d=y=0,(0,T.c)(r,A);var n=p,i=d,g=y,v=n*n+i*i+g*g;return v<_.a8&&(n=u,i=f,g=h,o<_.Gg&&(n=s,i=l,g=c),(v=n*n+i*i+g*g)<_.a8)?[NaN,NaN]:[(0,_.WE)(i,n)*_.oh,(0,_.qR)(g/(0,_._I)(v))*_.oh]}},61780:function(r,n,i){i.d(n,{Q:function(){return c},c:function(){return f}});var a=i(84220);function o(r){return function(){return r}}var s=i(64528),l=i(92992);function c(r,n,i,o,l,c){if(i){var f=(0,s.W8)(n),h=(0,s.g$)(n),p=o*i;null==l?(l=n+o*s.kD,c=n-p/2):(l=u(f,l),c=u(f,c),(o>0?l<c:l>c)&&(l+=o*s.kD));for(var d,y=l;o>0?y>c:y<c;y-=p)d=(0,a.G)([f,-h*(0,s.W8)(y),-h*(0,s.g$)(y)]),r.point(d[0],d[1])}}function u(r,n){(n=(0,a.ux)(n))[0]-=r,(0,a.cJ)(n);var i=(0,s.mE)(-n[1]);return((0>-n[2]?-i:i)+s.kD-s.Gg)%s.kD}function f(){var r,n,i=o([0,0]),a=o(90),u=o(6),f={point:function(i,a){r.push(i=n(i,a)),i[0]*=s.oh,i[1]*=s.oh}};function h(){var o=i.apply(this,arguments),h=a.apply(this,arguments)*s.qw,p=u.apply(this,arguments)*s.qw;return r=[],n=(0,l.O)(-o[0]*s.qw,-o[1]*s.qw,0).invert,c(f,h,p,1),o={type:"Polygon",coordinates:[r]},r=n=null,o}return h.center=function(r){return arguments.length?(i="function"==typeof r?r:o([+r[0],+r[1]]),h):i},h.radius=function(r){return arguments.length?(a="function"==typeof r?r:o(+r),h):a},h.precision=function(r){return arguments.length?(u="function"==typeof r?r:o(+r),h):u},h}},78284:function(r,n,i){var a=i(14229),o=i(64528);n.c=(0,a.c)(function(){return!0},function(r){var n,i=NaN,a=NaN,s=NaN;return{lineStart:function(){r.lineStart(),n=1},point:function(l,c){var u,f,h,p,d,y,g=l>0?o.pi:-o.pi,v=(0,o.a2)(l-i);(0,o.a2)(v-o.pi)<o.Gg?(r.point(i,a=(a+c)/2>0?o.or:-o.or),r.point(s,a),r.lineEnd(),r.lineStart(),r.point(g,a),r.point(l,a),n=0):s!==g&&v>=o.pi&&((0,o.a2)(i-s)<o.Gg&&(i-=s*o.Gg),(0,o.a2)(l-g)<o.Gg&&(l-=g*o.Gg),u=i,f=a,h=l,y=(0,o.g$)(u-h),a=(0,o.a2)(y)>o.Gg?(0,o.MQ)(((0,o.g$)(f)*(d=(0,o.W8)(c))*(0,o.g$)(h)-(0,o.g$)(c)*(p=(0,o.W8)(f))*(0,o.g$)(u))/(p*d*y)):(f+c)/2,r.point(s,a),r.lineEnd(),r.lineStart(),r.point(g,a),n=0),r.point(i=l,a=c),s=g},lineEnd:function(){r.lineEnd(),i=a=NaN},clean:function(){return 2-n}}},function(r,n,i,a){var s;if(null==r)s=i*o.or,a.point(-o.pi,s),a.point(0,s),a.point(o.pi,s),a.point(o.pi,0),a.point(o.pi,-s),a.point(0,-s),a.point(-o.pi,-s),a.point(-o.pi,0),a.point(-o.pi,s);else if((0,o.a2)(r[0]-n[0])>o.Gg){var l=r[0]<n[0]?o.pi:-o.pi;s=i*l/2,a.point(-l,s),a.point(0,s),a.point(l,s)}else a.point(n[0],n[1])},[-o.pi,-o.or])},97208:function(r,n,i){i.d(n,{c:function(){return o}});var a=i(70932);function o(){var r,n=[];return{point:function(n,i,a){r.push([n,i,a])},lineStart:function(){n.push(r=[])},lineEnd:a.c,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],r=null,i}}}},2728:function(r,n,i){i.d(n,{c:function(){return u}});var a=i(84220),o=i(61780),s=i(64528),l=i(41860),c=i(14229);function u(r){var n=(0,s.W8)(r),i=6*s.qw,u=n>0,f=(0,s.a2)(n)>s.Gg;function h(r,i){return(0,s.W8)(r)*(0,s.W8)(i)>n}function p(r,i,o){var l=(0,a.ux)(r),c=(0,a.ux)(i),u=[1,0,0],f=(0,a.CW)(l,c),h=(0,a.Ez)(f,f),p=f[0],d=h-p*p;if(!d)return!o&&r;var y=(0,a.CW)(u,f),g=(0,a.wx)(u,n*h/d),v=(0,a.wx)(f,-n*p/d);(0,a.mg)(g,v);var m=(0,a.Ez)(g,y),x=(0,a.Ez)(y,y),b=m*m-x*((0,a.Ez)(g,g)-1);if(!(b<0)){var _=(0,s._I)(b),w=(0,a.wx)(y,(-m-_)/x);if((0,a.mg)(w,g),w=(0,a.G)(w),!o)return w;var T,A=r[0],k=i[0],M=r[1],S=i[1];k<A&&(T=A,A=k,k=T);var E=k-A,I=(0,s.a2)(E-s.pi)<s.Gg;if(!I&&S<M&&(T=M,M=S,S=T),I||E<s.Gg?I?M+S>0^w[1]<((0,s.a2)(w[0]-A)<s.Gg?M:S):M<=w[1]&&w[1]<=S:E>s.pi^(A<=w[0]&&w[0]<=k)){var L=(0,a.wx)(y,(-m+_)/x);return(0,a.mg)(L,g),[w,(0,a.G)(L)]}}}function d(n,i){var a=u?r:s.pi-r,o=0;return n<-a?o|=1:n>a&&(o|=2),i<-a?o|=4:i>a&&(o|=8),o}return(0,c.c)(h,function(r){var n,i,a,o,c;return{lineStart:function(){o=a=!1,c=1},point:function(y,g){var v,m,x=[y,g],b=h(y,g),_=u?b?0:d(y,g):b?d(y+(y<0?s.pi:-s.pi),g):0;(!n&&(o=a=b)&&r.lineStart(),b!==a&&(!(m=p(n,x))||(0,l.c)(n,m)||(0,l.c)(x,m))&&(x[2]=1),b!==a)?(c=0,b?(r.lineStart(),m=p(x,n),r.point(m[0],m[1])):(m=p(n,x),r.point(m[0],m[1],2),r.lineEnd()),n=m):f&&n&&u^b&&!(_&i)&&(v=p(x,n,!0))&&(c=0,u?(r.lineStart(),r.point(v[0][0],v[0][1]),r.point(v[1][0],v[1][1]),r.lineEnd()):(r.point(v[1][0],v[1][1]),r.lineEnd(),r.lineStart(),r.point(v[0][0],v[0][1],3))),!b||n&&(0,l.c)(n,x)||r.point(x[0],x[1]),n=x,a=b,i=_},lineEnd:function(){a&&r.lineEnd(),n=null},clean:function(){return c|(o&&a)<<1}}},function(n,a,s,l){(0,o.Q)(l,r,i,s,n,a)},u?[0,-r]:[-s.pi,r-s.pi])}},14229:function(r,n,i){i.d(n,{c:function(){return u}});var a=i(97208),o=i(32232),s=i(64528),l=i(58196),c=i(84706);function u(r,n,i,s){return function(u){var p,d,y,g=n(u),v=(0,a.c)(),m=n(v),x=!1,b={point:_,lineStart:T,lineEnd:A,polygonStart:function(){b.point=k,b.lineStart=M,b.lineEnd=S,d=[],p=[]},polygonEnd:function(){b.point=_,b.lineStart=T,b.lineEnd=A,d=(0,c.Uf)(d);var r=(0,l.c)(p,s);d.length?(x||(u.polygonStart(),x=!0),(0,o.c)(d,h,r,i,u)):r&&(x||(u.polygonStart(),x=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),x&&(u.polygonEnd(),x=!1),d=p=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function _(n,i){r(n,i)&&u.point(n,i)}function w(r,n){g.point(r,n)}function T(){b.point=w,g.lineStart()}function A(){b.point=_,g.lineEnd()}function k(r,n){y.push([r,n]),m.point(r,n)}function M(){m.lineStart(),y=[]}function S(){k(y[0][0],y[0][1]),m.lineEnd();var r,n,i,a,o=m.clean(),s=v.result(),l=s.length;if(y.pop(),p.push(y),y=null,l){if(1&o){if((n=(i=s[0]).length-1)>0){for(x||(u.polygonStart(),x=!0),u.lineStart(),r=0;r<n;++r)u.point((a=i[r])[0],a[1]);u.lineEnd()}}else l>1&&2&o&&s.push(s.pop().concat(s.shift())),d.push(s.filter(f))}}return b}}function f(r){return r.length>1}function h(r,n){return((r=r.x)[0]<0?r[1]-s.or-s.Gg:s.or-r[1])-((n=n.x)[0]<0?n[1]-s.or-s.Gg:s.or-n[1])}},21676:function(r,n,i){i.d(n,{c:function(){return c}});var a=i(64528),o=i(97208),s=i(32232),l=i(84706);function c(r,n,i,c){function u(a,o){return r<=a&&a<=i&&n<=o&&o<=c}function f(a,o,s,l){var u=0,f=0;if(null==a||(u=h(a,s))!==(f=h(o,s))||0>d(a,o)^s>0)do l.point(0===u||3===u?r:i,u>1?c:n);while((u=(u+s+4)%4)!==f)else l.point(o[0],o[1])}function h(o,s){return(0,a.a2)(o[0]-r)<a.Gg?s>0?0:3:(0,a.a2)(o[0]-i)<a.Gg?s>0?2:1:(0,a.a2)(o[1]-n)<a.Gg?s>0?1:0:s>0?3:2}function p(r,n){return d(r.x,n.x)}function d(r,n){var i=h(r,1),a=h(n,1);return i!==a?i-a:0===i?n[1]-r[1]:1===i?r[0]-n[0]:2===i?r[1]-n[1]:n[0]-r[0]}return function(a){var h,d,y,g,v,m,x,b,_,w,T,A=a,k=(0,o.c)(),M={point:S,lineStart:function(){M.point=E,d&&d.push(y=[]),w=!0,_=!1,x=b=NaN},lineEnd:function(){h&&(E(g,v),m&&_&&k.rejoin(),h.push(k.result())),M.point=S,_&&A.lineEnd()},polygonStart:function(){A=k,h=[],d=[],T=!0},polygonEnd:function(){var n=function(){for(var n=0,i=0,a=d.length;i<a;++i)for(var o,s,l=d[i],u=1,f=l.length,h=l[0],p=h[0],y=h[1];u<f;++u)o=p,s=y,p=(h=l[u])[0],y=h[1],s<=c?y>c&&(p-o)*(c-s)>(y-s)*(r-o)&&++n:y<=c&&(p-o)*(c-s)<(y-s)*(r-o)&&--n;return n}(),i=T&&n,o=(h=(0,l.Uf)(h)).length;(i||o)&&(a.polygonStart(),i&&(a.lineStart(),f(null,null,1,a),a.lineEnd()),o&&(0,s.c)(h,p,n,f,a),a.polygonEnd()),A=a,h=d=y=null}};function S(r,n){u(r,n)&&A.point(r,n)}function E(a,o){var s=u(a,o);if(d&&y.push([a,o]),w)g=a,v=o,m=s,w=!1,s&&(A.lineStart(),A.point(a,o));else if(s&&_)A.point(a,o);else{var l=[x=Math.max(-1e9,Math.min(1e9,x)),b=Math.max(-1e9,Math.min(1e9,b))],f=[a=Math.max(-1e9,Math.min(1e9,a)),o=Math.max(-1e9,Math.min(1e9,o))];(function(r,n,i,a,o,s){var l,c=r[0],u=r[1],f=0,h=1,p=n[0]-c,d=n[1]-u;if(l=i-c,p||!(l>0)){if(l/=p,p<0){if(l<f)return;l<h&&(h=l)}else if(p>0){if(l>h)return;l>f&&(f=l)}if(l=o-c,p||!(l<0)){if(l/=p,p<0){if(l>h)return;l>f&&(f=l)}else if(p>0){if(l<f)return;l<h&&(h=l)}if(l=a-u,d||!(l>0)){if(l/=d,d<0){if(l<f)return;l<h&&(h=l)}else if(d>0){if(l>h)return;l>f&&(f=l)}if(l=s-u,d||!(l<0)){if(l/=d,d<0){if(l>h)return;l>f&&(f=l)}else if(d>0){if(l<f)return;l<h&&(h=l)}return f>0&&(r[0]=c+f*p,r[1]=u+f*d),h<1&&(n[0]=c+h*p,n[1]=u+h*d),!0}}}}})(l,f,r,n,i,c)?(_||(A.lineStart(),A.point(l[0],l[1])),A.point(f[0],f[1]),s||A.lineEnd(),T=!1):s&&(A.lineStart(),A.point(a,o),T=!1)}x=a,b=o,_=s}return M}}},32232:function(r,n,i){i.d(n,{c:function(){return l}});var a=i(41860),o=i(64528);function s(r,n,i,a){this.x=r,this.z=n,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function l(r,n,i,l,u){var f,h,p=[],d=[];if(r.forEach(function(r){if(!((n=r.length-1)<=0)){var n,i,l=r[0],c=r[n];if((0,a.c)(l,c)){if(!l[2]&&!c[2]){for(u.lineStart(),f=0;f<n;++f)u.point((l=r[f])[0],l[1]);return void u.lineEnd()}c[0]+=2*o.Gg}p.push(i=new s(l,r,null,!0)),d.push(i.o=new s(l,null,i,!1)),p.push(i=new s(c,r,null,!1)),d.push(i.o=new s(c,null,i,!0))}}),p.length){for(d.sort(n),c(p),c(d),f=0,h=d.length;f<h;++f)d[f].e=i=!i;for(var y,g,v=p[0];;){for(var m=v,x=!0;m.v;)if((m=m.n)===v)return;y=m.z,u.lineStart();do{if(m.v=m.o.v=!0,m.e){if(x)for(f=0,h=y.length;f<h;++f)u.point((g=y[f])[0],g[1]);else l(m.x,m.n.x,1,u);m=m.n}else{if(x)for(f=(y=m.p.z).length-1;f>=0;--f)u.point((g=y[f])[0],g[1]);else l(m.x,m.p.x,-1,u);m=m.p}y=(m=m.o).z,x=!x}while(!m.v)u.lineEnd()}}}function c(r){if(n=r.length){for(var n,i,a=0,o=r[0];++a<n;)o.n=i=r[a],i.p=o,o=i;o.n=i=r[0],i.p=o}}},68120:function(r,n,i){function a(r,n){function i(i,a){return n((i=r(i,a))[0],i[1])}return r.invert&&n.invert&&(i.invert=function(i,a){return(i=n.invert(i,a))&&r.invert(i[0],i[1])}),i}i.d(n,{c:function(){return a}})},7376:function(r,n,i){function a(r){return r}i.d(n,{c:function(){return a}})},83356:function(r,n,i){i.r(n),i.d(n,{geoAlbers:function(){return tH},geoAlbersUsa:function(){return tG},geoArea:function(){return a.cp},geoAzimuthalEqualArea:function(){return tW.c},geoAzimuthalEqualAreaRaw:function(){return tW.y},geoAzimuthalEquidistant:function(){return tY.c},geoAzimuthalEquidistantRaw:function(){return tY.O},geoBounds:function(){return o.c},geoCentroid:function(){return s.c},geoCircle:function(){return l.c},geoClipAntimeridian:function(){return c.c},geoClipCircle:function(){return u.c},geoClipExtent:function(){return h},geoClipRectangle:function(){return f.c},geoConicConformal:function(){return t0},geoConicConformalRaw:function(){return tQ},geoConicEqualArea:function(){return tV},geoConicEqualAreaRaw:function(){return tj},geoConicEquidistant:function(){return t3},geoConicEquidistantRaw:function(){return t2},geoContains:function(){return z},geoDistance:function(){return I},geoEqualEarth:function(){return t5},geoEqualEarthRaw:function(){return t6},geoEquirectangular:function(){return t1.c},geoEquirectangularRaw:function(){return t1.u},geoGnomonic:function(){return t8.c},geoGnomonicRaw:function(){return t8.Y},geoGraticule:function(){return j},geoGraticule10:function(){return V},geoIdentity:function(){return t9},geoInterpolate:function(){return Y.c},geoLength:function(){return M},geoMercator:function(){return tK},geoMercatorRaw:function(){return tX},geoNaturalEarth1:function(){return et.c},geoNaturalEarth1Raw:function(){return et.g},geoOrthographic:function(){return ee.c},geoOrthographicRaw:function(){return ee.t},geoPath:function(){return tF},geoProjection:function(){return tN.c},geoProjectionMutator:function(){return tN.U},geoRotation:function(){return tZ.c},geoStereographic:function(){return ei},geoStereographicRaw:function(){return en},geoStream:function(){return b.c},geoTransform:function(){return t7.c},geoTransverseMercator:function(){return eo},geoTransverseMercatorRaw:function(){return ea}});var a=i(95384),o=i(13696),s=i(24052),l=i(61780),c=i(78284),u=i(2728),f=i(21676);function h(){var r,n,i,a=0,o=0,s=960,l=500;return i={stream:function(i){return r&&n===i?r:r=(0,f.c)(a,o,s,l)(n=i)},extent:function(c){return arguments.length?(a=+c[0][0],o=+c[0][1],s=+c[1][0],l=+c[1][1],r=n=null,i):[[a,o],[s,l]]}}}var p,d,y,g=i(58196),v=i(88728),m=i(64528),x=i(70932),b=i(16016),_=(0,v.c)(),w={sphere:x.c,point:x.c,lineStart:function(){w.point=A,w.lineEnd=T},lineEnd:x.c,polygonStart:x.c,polygonEnd:x.c};function T(){w.point=w.lineEnd=x.c}function A(r,n){r*=m.qw,n*=m.qw,p=r,d=(0,m.g$)(n),y=(0,m.W8)(n),w.point=k}function k(r,n){r*=m.qw,n*=m.qw;var i=(0,m.g$)(n),a=(0,m.W8)(n),o=(0,m.a2)(r-p),s=(0,m.W8)(o),l=a*(0,m.g$)(o),c=y*i-d*a*s,u=d*i+y*a*s;_.add((0,m.WE)((0,m._I)(l*l+c*c),u)),p=r,d=i,y=a}function M(r){return _.reset(),(0,b.c)(r,w),+_}var S=[null,null],E={type:"LineString",coordinates:S};function I(r,n){return S[0]=r,S[1]=n,M(E)}var L={Feature:function(r,n){return O(r.geometry,n)},FeatureCollection:function(r,n){for(var i=r.features,a=-1,o=i.length;++a<o;)if(O(i[a].geometry,n))return!0;return!1}},C={Sphere:function(){return!0},Point:function(r,n){return 0===I(r.coordinates,n)},MultiPoint:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(0===I(i[a],n))return!0;return!1},LineString:function(r,n){return D(r.coordinates,n)},MultiLineString:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(D(i[a],n))return!0;return!1},Polygon:function(r,n){return P(r.coordinates,n)},MultiPolygon:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(P(i[a],n))return!0;return!1},GeometryCollection:function(r,n){for(var i=r.geometries,a=-1,o=i.length;++a<o;)if(O(i[a],n))return!0;return!1}};function O(r,n){return!(!r||!C.hasOwnProperty(r.type))&&C[r.type](r,n)}function D(r,n){for(var i,a,o,s=0,l=r.length;s<l;s++){if(0===(a=I(r[s],n))||s>0&&(o=I(r[s],r[s-1]))>0&&i<=o&&a<=o&&(i+a-o)*(1-Math.pow((i-a)/o,2))<m.a8*o)return!0;i=a}return!1}function P(r,n){return!!(0,g.c)(r.map(B),R(n))}function B(r){return(r=r.map(R)).pop(),r}function R(r){return[r[0]*m.qw,r[1]*m.qw]}function z(r,n){return(r&&L.hasOwnProperty(r.type)?L[r.type]:O)(r,n)}var F=i(84706);function N(r,n,i){var a=(0,F.ik)(r,n-m.Gg,i).concat(n);return function(r){return a.map(function(n){return[r,n]})}}function U(r,n,i){var a=(0,F.ik)(r,n-m.Gg,i).concat(n);return function(r){return a.map(function(n){return[n,r]})}}function j(){var r,n,i,a,o,s,l,c,u,f,h,p,d=10,y=10,g=90,v=360,x=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return(0,F.ik)((0,m.Km)(a/g)*g,i,g).map(h).concat((0,F.ik)((0,m.Km)(c/v)*v,l,v).map(p)).concat((0,F.ik)((0,m.Km)(n/d)*d,r,d).filter(function(r){return(0,m.a2)(r%g)>m.Gg}).map(u)).concat((0,F.ik)((0,m.Km)(s/y)*y,o,y).filter(function(r){return(0,m.a2)(r%v)>m.Gg}).map(f))}return b.lines=function(){return _().map(function(r){return{type:"LineString",coordinates:r}})},b.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(l).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},b.extent=function(r){return arguments.length?b.extentMajor(r).extentMinor(r):b.extentMinor()},b.extentMajor=function(r){return arguments.length?(a=+r[0][0],i=+r[1][0],c=+r[0][1],l=+r[1][1],a>i&&(r=a,a=i,i=r),c>l&&(r=c,c=l,l=r),b.precision(x)):[[a,c],[i,l]]},b.extentMinor=function(i){return arguments.length?(n=+i[0][0],r=+i[1][0],s=+i[0][1],o=+i[1][1],n>r&&(i=n,n=r,r=i),s>o&&(i=s,s=o,o=i),b.precision(x)):[[n,s],[r,o]]},b.step=function(r){return arguments.length?b.stepMajor(r).stepMinor(r):b.stepMinor()},b.stepMajor=function(r){return arguments.length?(g=+r[0],v=+r[1],b):[g,v]},b.stepMinor=function(r){return arguments.length?(d=+r[0],y=+r[1],b):[d,y]},b.precision=function(d){return arguments.length?(x=+d,u=N(s,o,90),f=U(n,r,x),h=N(c,l,90),p=U(a,i,x),b):x},b.extentMajor([[-180,-90+m.Gg],[180,90-m.Gg]]).extentMinor([[-180,-80-m.Gg],[180,80+m.Gg]])}function V(){return j()()}var H,q,G,W,Y=i(27284),Z=i(7376),X=(0,v.c)(),K=(0,v.c)(),J={point:x.c,lineStart:x.c,lineEnd:x.c,polygonStart:function(){J.lineStart=$,J.lineEnd=te},polygonEnd:function(){J.lineStart=J.lineEnd=J.point=x.c,X.add((0,m.a2)(K)),K.reset()},result:function(){var r=X/2;return X.reset(),r}};function $(){J.point=Q}function Q(r,n){J.point=tt,H=G=r,q=W=n}function tt(r,n){K.add(W*r-G*n),G=r,W=n}function te(){tt(H,q)}var tr,tn,ti,ta,to=i(73784),ts=0,tl=0,tc=0,tu=0,tf=0,th=0,tp=0,td=0,ty=0,tg={point:tv,lineStart:tm,lineEnd:t_,polygonStart:function(){tg.lineStart=tw,tg.lineEnd=tT},polygonEnd:function(){tg.point=tv,tg.lineStart=tm,tg.lineEnd=t_},result:function(){var r=ty?[tp/ty,td/ty]:th?[tu/th,tf/th]:tc?[ts/tc,tl/tc]:[NaN,NaN];return ts=tl=tc=tu=tf=th=tp=td=ty=0,r}};function tv(r,n){ts+=r,tl+=n,++tc}function tm(){tg.point=tx}function tx(r,n){tg.point=tb,tv(ti=r,ta=n)}function tb(r,n){var i=r-ti,a=n-ta,o=(0,m._I)(i*i+a*a);tu+=o*(ti+r)/2,tf+=o*(ta+n)/2,th+=o,tv(ti=r,ta=n)}function t_(){tg.point=tv}function tw(){tg.point=tA}function tT(){tk(tr,tn)}function tA(r,n){tg.point=tk,tv(tr=ti=r,tn=ta=n)}function tk(r,n){var i=r-ti,a=n-ta,o=(0,m._I)(i*i+a*a);tu+=o*(ti+r)/2,tf+=o*(ta+n)/2,th+=o,tp+=(o=ta*r-ti*n)*(ti+r),td+=o*(ta+n),ty+=3*o,tv(ti=r,ta=n)}function tM(r){this._context=r}tM.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(r,n){switch(this._point){case 0:this._context.moveTo(r,n),this._point=1;break;case 1:this._context.lineTo(r,n);break;default:this._context.moveTo(r+this._radius,n),this._context.arc(r,n,this._radius,0,m.kD)}},result:x.c};var tS,tE,tI,tL,tC,tO=(0,v.c)(),tD={point:x.c,lineStart:function(){tD.point=tP},lineEnd:function(){tS&&tB(tE,tI),tD.point=x.c},polygonStart:function(){tS=!0},polygonEnd:function(){tS=null},result:function(){var r=+tO;return tO.reset(),r}};function tP(r,n){tD.point=tB,tE=tL=r,tI=tC=n}function tB(r,n){tL-=r,tC-=n,tO.add((0,m._I)(tL*tL+tC*tC)),tL=r,tC=n}function tR(){this._string=[]}function tz(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function tF(r,n){var i,a,o=4.5;function s(r){return r&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),(0,b.c)(r,i(a))),a.result()}return s.area=function(r){return(0,b.c)(r,i(J)),J.result()},s.measure=function(r){return(0,b.c)(r,i(tD)),tD.result()},s.bounds=function(r){return(0,b.c)(r,i(to.c)),to.c.result()},s.centroid=function(r){return(0,b.c)(r,i(tg)),tg.result()},s.projection=function(n){return arguments.length?(i=null==n?(r=null,Z.c):(r=n).stream,s):r},s.context=function(r){return arguments.length?(a=null==r?(n=null,new tR):new tM(n=r),"function"!=typeof o&&a.pointRadius(o),s):n},s.pointRadius=function(r){return arguments.length?(o="function"==typeof r?r:(a.pointRadius(+r),+r),s):o},s.projection(r).context(n)}tR.prototype={_radius:4.5,_circle:tz(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(r,n){switch(this._point){case 0:this._string.push("M",r,",",n),this._point=1;break;case 1:this._string.push("L",r,",",n);break;default:null==this._circle&&(this._circle=tz(this._radius)),this._string.push("M",r,",",n,this._circle)}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}return null}};var tN=i(87952);function tU(r){var n=0,i=m.pi/3,a=(0,tN.U)(r),o=a(n,i);return o.parallels=function(r){return arguments.length?a(n=r[0]*m.qw,i=r[1]*m.qw):[n*m.oh,i*m.oh]},o}function tj(r,n){var i=(0,m.g$)(r),a=(i+(0,m.g$)(n))/2;if((0,m.a2)(a)<m.Gg)return function(r){var n=(0,m.W8)(r);function i(r,i){return[r*n,(0,m.g$)(i)/n]}return i.invert=function(r,i){return[r/n,(0,m.qR)(i*n)]},i}(r);var o=1+i*(2*a-i),s=(0,m._I)(o)/a;function l(r,n){var i=(0,m._I)(o-2*a*(0,m.g$)(n))/a;return[i*(0,m.g$)(r*=a),s-i*(0,m.W8)(r)]}return l.invert=function(r,n){var i=s-n,l=(0,m.WE)(r,(0,m.a2)(i))*(0,m.kq)(i);return i*a<0&&(l-=m.pi*(0,m.kq)(r)*(0,m.kq)(i)),[l/a,(0,m.qR)((o-(r*r+i*i)*a*a)/(2*a))]},l}function tV(){return tU(tj).scale(155.424).center([0,33.6442])}function tH(){return tV().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var tq=i(86420);function tG(){var r,n,i,a,o,s,l=tH(),c=tV().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=tV().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(r,n){s=[r,n]}};function h(r){var n=r[0],l=r[1];return s=null,i.point(n,l),s||(a.point(n,l),s)||(o.point(n,l),s)}function p(){return r=n=null,h}return h.invert=function(r){var n=l.scale(),i=l.translate(),a=(r[0]-i[0])/n,o=(r[1]-i[1])/n;return(o>=.12&&o<.234&&a>=-.425&&a<-.214?c:o>=.166&&o<.234&&a>=-.214&&a<-.115?u:l).invert(r)},h.stream=function(i){var a,o;return r&&n===i?r:(o=(a=[l.stream(n=i),c.stream(i),u.stream(i)]).length,r={point:function(r,n){for(var i=-1;++i<o;)a[i].point(r,n)},sphere:function(){for(var r=-1;++r<o;)a[r].sphere()},lineStart:function(){for(var r=-1;++r<o;)a[r].lineStart()},lineEnd:function(){for(var r=-1;++r<o;)a[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<o;)a[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<o;)a[r].polygonEnd()}})},h.precision=function(r){return arguments.length?(l.precision(r),c.precision(r),u.precision(r),p()):l.precision()},h.scale=function(r){return arguments.length?(l.scale(r),c.scale(.35*r),u.scale(r),h.translate(l.translate())):l.scale()},h.translate=function(r){if(!arguments.length)return l.translate();var n=l.scale(),s=+r[0],h=+r[1];return i=l.translate(r).clipExtent([[s-.455*n,h-.238*n],[s+.455*n,h+.238*n]]).stream(f),a=c.translate([s-.307*n,h+.201*n]).clipExtent([[s-.425*n+m.Gg,h+.12*n+m.Gg],[s-.214*n-m.Gg,h+.234*n-m.Gg]]).stream(f),o=u.translate([s-.205*n,h+.212*n]).clipExtent([[s-.214*n+m.Gg,h+.166*n+m.Gg],[s-.115*n-m.Gg,h+.234*n-m.Gg]]).stream(f),p()},h.fitExtent=function(r,n){return(0,tq.QX)(h,r,n)},h.fitSize=function(r,n){return(0,tq.UV)(h,r,n)},h.fitWidth=function(r,n){return(0,tq.Qx)(h,r,n)},h.fitHeight=function(r,n){return(0,tq.OW)(h,r,n)},h.scale(1070)}var tW=i(54724),tY=i(69020),tZ=i(92992);function tX(r,n){return[r,(0,m.Yz)((0,m.a6)((m.or+n)/2))]}function tK(){return tJ(tX).scale(961/m.kD)}function tJ(r){var n,i,a,o=(0,tN.c)(r),s=o.center,l=o.scale,c=o.translate,u=o.clipExtent,f=null;function h(){var s=m.pi*l(),c=o((0,tZ.c)(o.rotate()).invert([0,0]));return u(null==f?[[c[0]-s,c[1]-s],[c[0]+s,c[1]+s]]:r===tX?[[Math.max(c[0]-s,f),n],[Math.min(c[0]+s,i),a]]:[[f,Math.max(c[1]-s,n)],[i,Math.min(c[1]+s,a)]])}return o.scale=function(r){return arguments.length?(l(r),h()):l()},o.translate=function(r){return arguments.length?(c(r),h()):c()},o.center=function(r){return arguments.length?(s(r),h()):s()},o.clipExtent=function(r){return arguments.length?(null==r?f=n=i=a=null:(f=+r[0][0],n=+r[0][1],i=+r[1][0],a=+r[1][1]),h()):null==f?null:[[f,n],[i,a]]},h()}function t$(r){return(0,m.a6)((m.or+r)/2)}function tQ(r,n){var i=(0,m.W8)(r),a=r===n?(0,m.g$)(r):(0,m.Yz)(i/(0,m.W8)(n))/(0,m.Yz)(t$(n)/t$(r)),o=i*(0,m.g3)(t$(r),a)/a;if(!a)return tX;function s(r,n){o>0?n<-m.or+m.Gg&&(n=-m.or+m.Gg):n>m.or-m.Gg&&(n=m.or-m.Gg);var i=o/(0,m.g3)(t$(n),a);return[i*(0,m.g$)(a*r),o-i*(0,m.W8)(a*r)]}return s.invert=function(r,n){var i=o-n,s=(0,m.kq)(a)*(0,m._I)(r*r+i*i),l=(0,m.WE)(r,(0,m.a2)(i))*(0,m.kq)(i);return i*a<0&&(l-=m.pi*(0,m.kq)(r)*(0,m.kq)(i)),[l/a,2*(0,m.MQ)((0,m.g3)(o/s,1/a))-m.or]},s}function t0(){return tU(tQ).scale(109.5).parallels([30,30])}tX.invert=function(r,n){return[r,2*(0,m.MQ)((0,m.oN)(n))-m.or]};var t1=i(69604);function t2(r,n){var i=(0,m.W8)(r),a=r===n?(0,m.g$)(r):(i-(0,m.W8)(n))/(n-r),o=i/a+r;if((0,m.a2)(a)<m.Gg)return t1.u;function s(r,n){var i=o-n,s=a*r;return[i*(0,m.g$)(s),o-i*(0,m.W8)(s)]}return s.invert=function(r,n){var i=o-n,s=(0,m.WE)(r,(0,m.a2)(i))*(0,m.kq)(i);return i*a<0&&(s-=m.pi*(0,m.kq)(r)*(0,m.kq)(i)),[s/a,o-(0,m.kq)(a)*(0,m._I)(r*r+i*i)]},s}function t3(){return tU(t2).scale(131.154).center([0,13.9389])}var t4=(0,m._I)(3)/2;function t6(r,n){var i=(0,m.qR)(t4*(0,m.g$)(n)),a=i*i,o=a*a*a;return[r*(0,m.W8)(i)/(t4*(1.340264+-.24331799999999998*a+o*(.0062510000000000005+.034164*a))),i*(1.340264+-.081106*a+o*(893e-6+.003796*a))]}function t5(){return(0,tN.c)(t6).scale(177.158)}t6.invert=function(r,n){for(var i,a=n,o=a*a,s=o*o*o,l=0;l<12&&(s=(o=(a-=i=(a*(1.340264+-.081106*o+s*(893e-6+.003796*o))-n)/(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o)))*a)*o*o,!((0,m.a2)(i)<m.a8));++l);return[t4*r*(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o))/(0,m.W8)(a),(0,m.qR)((0,m.g$)(a)/t4)]};var t8=i(53285),t7=i(15196);function t9(){var r,n,i,a,o,s,l,c=1,u=0,h=0,p=1,d=1,y=0,g=null,v=1,x=1,b=(0,t7.s)({point:function(r,n){var i=T([r,n]);this.stream.point(i[0],i[1])}}),_=Z.c;function w(){return v=c*p,x=c*d,s=l=null,T}function T(i){var a=i[0]*v,o=i[1]*x;if(y){var s=o*r-a*n;a=a*r+o*n,o=s}return[a+u,o+h]}return T.invert=function(i){var a=i[0]-u,o=i[1]-h;if(y){var s=o*r+a*n;a=a*r-o*n,o=s}return[a/v,o/x]},T.stream=function(r){return s&&l===r?s:s=b(_(l=r))},T.postclip=function(r){return arguments.length?(_=r,g=i=a=o=null,w()):_},T.clipExtent=function(r){return arguments.length?(_=null==r?(g=i=a=o=null,Z.c):(0,f.c)(g=+r[0][0],i=+r[0][1],a=+r[1][0],o=+r[1][1]),w()):null==g?null:[[g,i],[a,o]]},T.scale=function(r){return arguments.length?(c=+r,w()):c},T.translate=function(r){return arguments.length?(u=+r[0],h=+r[1],w()):[u,h]},T.angle=function(i){return arguments.length?(y=i%360*m.qw,n=(0,m.g$)(y),r=(0,m.W8)(y),w()):y*m.oh},T.reflectX=function(r){return arguments.length?(p=r?-1:1,w()):p<0},T.reflectY=function(r){return arguments.length?(d=r?-1:1,w()):d<0},T.fitExtent=function(r,n){return(0,tq.QX)(T,r,n)},T.fitSize=function(r,n){return(0,tq.UV)(T,r,n)},T.fitWidth=function(r,n){return(0,tq.Qx)(T,r,n)},T.fitHeight=function(r,n){return(0,tq.OW)(T,r,n)},T}var et=i(47984),ee=i(4888),er=i(62280);function en(r,n){var i=(0,m.W8)(n),a=1+(0,m.W8)(r)*i;return[i*(0,m.g$)(r)/a,(0,m.g$)(n)/a]}function ei(){return(0,tN.c)(en).scale(250).clipAngle(142)}function ea(r,n){return[(0,m.Yz)((0,m.a6)((m.or+n)/2)),-r]}function eo(){var r=tJ(ea),n=r.center,i=r.rotate;return r.center=function(r){return arguments.length?n([-r[1],r[0]]):[(r=n())[1],-r[0]]},r.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):[(r=i())[0],r[1],r[2]-90]},i([0,0,90]).scale(159.155)}en.invert=(0,er.g)(function(r){return 2*(0,m.MQ)(r)}),ea.invert=function(r,n){return[-n,2*(0,m.MQ)((0,m.oN)(r))-m.or]}},27284:function(r,n,i){i.d(n,{c:function(){return o}});var a=i(64528);function o(r,n){var i=r[0]*a.qw,o=r[1]*a.qw,s=n[0]*a.qw,l=n[1]*a.qw,c=(0,a.W8)(o),u=(0,a.g$)(o),f=(0,a.W8)(l),h=(0,a.g$)(l),p=c*(0,a.W8)(i),d=c*(0,a.g$)(i),y=f*(0,a.W8)(s),g=f*(0,a.g$)(s),v=2*(0,a.qR)((0,a._I)((0,a.SD)(l-o)+c*f*(0,a.SD)(s-i))),m=(0,a.g$)(v),x=v?function(r){var n=(0,a.g$)(r*=v)/m,i=(0,a.g$)(v-r)/m,o=i*p+n*y,s=i*d+n*g;return[(0,a.WE)(s,o)*a.oh,(0,a.WE)(i*u+n*h,(0,a._I)(o*o+s*s))*a.oh]}:function(){return[i*a.oh,o*a.oh]};return x.distance=v,x}},64528:function(r,n,i){i.d(n,{Gg:function(){return a},Km:function(){return v},MQ:function(){return d},SD:function(){return S},W8:function(){return g},WE:function(){return y},Yz:function(){return x},_I:function(){return T},a2:function(){return p},a6:function(){return A},a8:function(){return o},g$:function(){return _},g3:function(){return b},kD:function(){return u},kq:function(){return w},mE:function(){return k},oN:function(){return m},oh:function(){return f},or:function(){return l},pi:function(){return s},qR:function(){return M},qw:function(){return h},wL:function(){return c}});var a=1e-6,o=1e-12,s=Math.PI,l=s/2,c=s/4,u=2*s,f=180/s,h=s/180,p=Math.abs,d=Math.atan,y=Math.atan2,g=Math.cos,v=Math.ceil,m=Math.exp,x=Math.log,b=Math.pow,_=Math.sin,w=Math.sign||function(r){return r>0?1:r<0?-1:0},T=Math.sqrt,A=Math.tan;function k(r){return r>1?0:r<-1?s:Math.acos(r)}function M(r){return r>1?l:r<-1?-l:Math.asin(r)}function S(r){return(r=_(r/2))*r}},70932:function(r,n,i){function a(){}i.d(n,{c:function(){return a}})},73784:function(r,n,i){var a=i(70932),o=1/0,s=1/0,l=-1/0,c=l,u={point:function(r,n){r<o&&(o=r),r>l&&(l=r),n<s&&(s=n),n>c&&(c=n)},lineStart:a.c,lineEnd:a.c,polygonStart:a.c,polygonEnd:a.c,result:function(){var r=[[o,s],[l,c]];return l=c=-(s=o=1/0),r}};n.c=u},41860:function(r,n,i){i.d(n,{c:function(){return o}});var a=i(64528);function o(r,n){return(0,a.a2)(r[0]-n[0])<a.Gg&&(0,a.a2)(r[1]-n[1])<a.Gg}},58196:function(r,n,i){i.d(n,{c:function(){return u}});var a=i(88728),o=i(84220),s=i(64528),l=(0,a.c)();function c(r){return(0,s.a2)(r[0])<=s.pi?r[0]:(0,s.kq)(r[0])*(((0,s.a2)(r[0])+s.pi)%s.kD-s.pi)}function u(r,n){var i=c(n),a=n[1],u=(0,s.g$)(a),f=[(0,s.g$)(i),-(0,s.W8)(i),0],h=0,p=0;l.reset(),1===u?a=s.or+s.Gg:-1===u&&(a=-s.or-s.Gg);for(var d=0,y=r.length;d<y;++d)if(v=(g=r[d]).length)for(var g,v,m=g[v-1],x=c(m),b=m[1]/2+s.wL,_=(0,s.g$)(b),w=(0,s.W8)(b),T=0;T<v;++T,x=k,_=S,w=E,m=A){var A=g[T],k=c(A),M=A[1]/2+s.wL,S=(0,s.g$)(M),E=(0,s.W8)(M),I=k-x,L=I>=0?1:-1,C=L*I,O=C>s.pi,D=_*S;if(l.add((0,s.WE)(D*L*(0,s.g$)(C),w*E+D*(0,s.W8)(C))),h+=O?I+L*s.kD:I,O^x>=i^k>=i){var P=(0,o.CW)((0,o.ux)(m),(0,o.ux)(A));(0,o.cJ)(P);var B=(0,o.CW)(f,P);(0,o.cJ)(B);var R=(O^I>=0?-1:1)*(0,s.qR)(B[2]);(a>R||a===R&&(P[0]||P[1]))&&(p+=O^I>=0?1:-1)}}return(h<-s.Gg||h<s.Gg&&l<-s.Gg)^1&p}},62280:function(r,n,i){i.d(n,{a:function(){return o},g:function(){return s}});var a=i(64528);function o(r){return function(n,i){var o=(0,a.W8)(n),s=(0,a.W8)(i),l=r(o*s);return[l*s*(0,a.g$)(n),l*(0,a.g$)(i)]}}function s(r){return function(n,i){var o=(0,a._I)(n*n+i*i),s=r(o),l=(0,a.g$)(s),c=(0,a.W8)(s);return[(0,a.WE)(n*l,o*c),(0,a.qR)(o&&i*l/o)]}}},54724:function(r,n,i){i.d(n,{c:function(){return c},y:function(){return l}});var a=i(64528),o=i(62280),s=i(87952),l=(0,o.a)(function(r){return(0,a._I)(2/(1+r))});function c(){return(0,s.c)(l).scale(124.75).clipAngle(179.999)}l.invert=(0,o.g)(function(r){return 2*(0,a.qR)(r/2)})},69020:function(r,n,i){i.d(n,{O:function(){return l},c:function(){return c}});var a=i(64528),o=i(62280),s=i(87952),l=(0,o.a)(function(r){return(r=(0,a.mE)(r))&&r/(0,a.g$)(r)});function c(){return(0,s.c)(l).scale(79.4188).clipAngle(179.999)}l.invert=(0,o.g)(function(r){return r})},69604:function(r,n,i){i.d(n,{c:function(){return s},u:function(){return o}});var a=i(87952);function o(r,n){return[r,n]}function s(){return(0,a.c)(o).scale(152.63)}o.invert=o},86420:function(r,n,i){i.d(n,{OW:function(){return f},QX:function(){return l},Qx:function(){return u},UV:function(){return c}});var a=i(16016),o=i(73784);function s(r,n,i){var s=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),null!=s&&r.clipExtent(null),(0,a.c)(i,r.stream(o.c)),n(o.c.result()),null!=s&&r.clipExtent(s),r}function l(r,n,i){return s(r,function(i){var a=n[1][0]-n[0][0],o=n[1][1]-n[0][1],s=Math.min(a/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+n[0][0]+(a-s*(i[1][0]+i[0][0]))/2,c=+n[0][1]+(o-s*(i[1][1]+i[0][1]))/2;r.scale(150*s).translate([l,c])},i)}function c(r,n,i){return l(r,[[0,0],n],i)}function u(r,n,i){return s(r,function(i){var a=+n,o=a/(i[1][0]-i[0][0]),s=(a-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];r.scale(150*o).translate([s,l])},i)}function f(r,n,i){return s(r,function(i){var a=+n,o=a/(i[1][1]-i[0][1]),s=-o*i[0][0],l=(a-o*(i[1][1]+i[0][1]))/2;r.scale(150*o).translate([s,l])},i)}},53285:function(r,n,i){i.d(n,{Y:function(){return l},c:function(){return c}});var a=i(64528),o=i(62280),s=i(87952);function l(r,n){var i=(0,a.W8)(n),o=(0,a.W8)(r)*i;return[i*(0,a.g$)(r)/o,(0,a.g$)(n)/o]}function c(){return(0,s.c)(l).scale(144.049).clipAngle(60)}l.invert=(0,o.g)(a.MQ)},87952:function(r,n,i){i.d(n,{c:function(){return x},U:function(){return b}});var a=i(78284),o=i(2728),s=i(21676),l=i(68120),c=i(7376),u=i(64528),f=i(92992),h=i(15196),p=i(86420),d=i(84220),y=(0,u.W8)(30*u.qw);function g(r,n){return+n?function(r,n){function i(a,o,s,l,c,f,h,p,d,g,v,m,x,b){var _=h-a,w=p-o,T=_*_+w*w;if(T>4*n&&x--){var A=l+g,k=c+v,M=f+m,S=(0,u._I)(A*A+k*k+M*M),E=(0,u.qR)(M/=S),I=(0,u.a2)((0,u.a2)(M)-1)<u.Gg||(0,u.a2)(s-d)<u.Gg?(s+d)/2:(0,u.WE)(k,A),L=r(I,E),C=L[0],O=L[1],D=C-a,P=O-o,B=w*D-_*P;(B*B/T>n||(0,u.a2)((_*D+w*P)/T-.5)>.3||l*g+c*v+f*m<y)&&(i(a,o,s,l,c,f,C,O,I,A/=S,k/=S,M,x,b),b.point(C,O),i(C,O,I,A,k,M,h,p,d,g,v,m,x,b))}}return function(n){var a,o,s,l,c,u,f,h,p,y,g,v,m={point:x,lineStart:b,lineEnd:w,polygonStart:function(){n.polygonStart(),m.lineStart=T},polygonEnd:function(){n.polygonEnd(),m.lineStart=b}};function x(i,a){i=r(i,a),n.point(i[0],i[1])}function b(){h=NaN,m.point=_,n.lineStart()}function _(a,o){var s=(0,d.ux)([a,o]),l=r(a,o);i(h,p,f,y,g,v,h=l[0],p=l[1],f=a,y=s[0],g=s[1],v=s[2],16,n),n.point(h,p)}function w(){m.point=x,n.lineEnd()}function T(){b(),m.point=A,m.lineEnd=k}function A(r,n){_(a=r,n),o=h,s=p,l=y,c=g,u=v,m.point=_}function k(){i(h,p,f,y,g,v,o,s,a,l,c,u,16,n),m.lineEnd=w,w()}return m}}(r,n):(0,h.s)({point:function(n,i){n=r(n,i),this.stream.point(n[0],n[1])}})}var v=(0,h.s)({point:function(r,n){this.stream.point(r*u.qw,n*u.qw)}});function m(r,n,i,a,o,s){var l=(0,u.W8)(s),c=(0,u.g$)(s),f=l*r,h=c*r,p=l/r,d=c/r,y=(c*i-l*n)/r,g=(c*n+l*i)/r;function v(r,s){return[f*(r*=a)-h*(s*=o)+n,i-h*r-f*s]}return v.invert=function(r,n){return[a*(p*r-d*n+y),o*(g-d*r-p*n)]},v}function x(r){return b(function(){return r})()}function b(r){var n,i,d,y,x,b,_,w,T,A,k=150,M=480,S=250,E=0,I=0,L=0,C=0,O=0,D=0,P=1,B=1,R=null,z=a.c,F=null,N=c.c,U=.5;function j(r){return w(r[0]*u.qw,r[1]*u.qw)}function V(r){return(r=w.invert(r[0],r[1]))&&[r[0]*u.oh,r[1]*u.oh]}function H(){var r=m(k,0,0,P,B,D).apply(null,n(E,I)),a=(D?m:function(r,n,i,a,o){function s(s,l){return[n+r*(s*=a),i-r*(l*=o)]}return s.invert=function(s,l){return[(s-n)/r*a,(i-l)/r*o]},s})(k,M-r[0],S-r[1],P,B,D);return i=(0,f.O)(L,C,O),_=(0,l.c)(n,a),w=(0,l.c)(i,_),b=g(_,U),q()}function q(){return T=A=null,j}return j.stream=function(r){var n;return T&&A===r?T:T=v((n=i,(0,h.s)({point:function(r,i){var a=n(r,i);return this.stream.point(a[0],a[1])}}))(z(b(N(A=r)))))},j.preclip=function(r){return arguments.length?(z=r,R=void 0,q()):z},j.postclip=function(r){return arguments.length?(N=r,F=d=y=x=null,q()):N},j.clipAngle=function(r){return arguments.length?(z=+r?(0,o.c)(R=r*u.qw):(R=null,a.c),q()):R*u.oh},j.clipExtent=function(r){return arguments.length?(N=null==r?(F=d=y=x=null,c.c):(0,s.c)(F=+r[0][0],d=+r[0][1],y=+r[1][0],x=+r[1][1]),q()):null==F?null:[[F,d],[y,x]]},j.scale=function(r){return arguments.length?(k=+r,H()):k},j.translate=function(r){return arguments.length?(M=+r[0],S=+r[1],H()):[M,S]},j.center=function(r){return arguments.length?(E=r[0]%360*u.qw,I=r[1]%360*u.qw,H()):[E*u.oh,I*u.oh]},j.rotate=function(r){return arguments.length?(L=r[0]%360*u.qw,C=r[1]%360*u.qw,O=r.length>2?r[2]%360*u.qw:0,H()):[L*u.oh,C*u.oh,O*u.oh]},j.angle=function(r){return arguments.length?(D=r%360*u.qw,H()):D*u.oh},j.reflectX=function(r){return arguments.length?(P=r?-1:1,H()):P<0},j.reflectY=function(r){return arguments.length?(B=r?-1:1,H()):B<0},j.precision=function(r){return arguments.length?(b=g(_,U=r*r),q()):(0,u._I)(U)},j.fitExtent=function(r,n){return(0,p.QX)(j,r,n)},j.fitSize=function(r,n){return(0,p.UV)(j,r,n)},j.fitWidth=function(r,n){return(0,p.Qx)(j,r,n)},j.fitHeight=function(r,n){return(0,p.OW)(j,r,n)},function(){return n=r.apply(this,arguments),j.invert=n.invert&&V,H()}}},47984:function(r,n,i){i.d(n,{c:function(){return l},g:function(){return s}});var a=i(87952),o=i(64528);function s(r,n){var i=n*n,a=i*i;return[r*(.8707-.131979*i+a*(a*(.003971*i-.001529*a)-.013791)),n*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))]}function l(){return(0,a.c)(s).scale(175.295)}s.invert=function(r,n){var i,a=n,s=25;do{var l=a*a,c=l*l;a-=i=(a*(1.007226+l*(.015085+c*(.028874*l-.044475-.005916*c)))-n)/(1.007226+l*(.045255+c*(.259866*l-.311325-.005916*11*c)))}while((0,o.a2)(i)>o.Gg&&--s>0)return[r/(.8707+(l=a*a)*(l*(l*l*l*(.003971-.001529*l)-.013791)-.131979)),a]}},4888:function(r,n,i){i.d(n,{c:function(){return c},t:function(){return l}});var a=i(64528),o=i(62280),s=i(87952);function l(r,n){return[(0,a.W8)(n)*(0,a.g$)(r),(0,a.g$)(n)]}function c(){return(0,s.c)(l).scale(249.5).clipAngle(90+a.Gg)}l.invert=(0,o.g)(a.qR)},92992:function(r,n,i){i.d(n,{O:function(){return l},c:function(){return h}});var a=i(68120),o=i(64528);function s(r,n){return[(0,o.a2)(r)>o.pi?r+Math.round(-r/o.kD)*o.kD:r,n]}function l(r,n,i){return(r%=o.kD)?n||i?(0,a.c)(u(r),f(n,i)):u(r):n||i?f(n,i):s}function c(r){return function(n,i){return[(n+=r)>o.pi?n-o.kD:n<-o.pi?n+o.kD:n,i]}}function u(r){var n=c(r);return n.invert=c(-r),n}function f(r,n){var i=(0,o.W8)(r),a=(0,o.g$)(r),s=(0,o.W8)(n),l=(0,o.g$)(n);function c(r,n){var c=(0,o.W8)(n),u=(0,o.W8)(r)*c,f=(0,o.g$)(r)*c,h=(0,o.g$)(n),p=h*i+u*a;return[(0,o.WE)(f*s-p*l,u*i-h*a),(0,o.qR)(p*s+f*l)]}return c.invert=function(r,n){var c=(0,o.W8)(n),u=(0,o.W8)(r)*c,f=(0,o.g$)(r)*c,h=(0,o.g$)(n),p=h*s-f*l;return[(0,o.WE)(f*s+h*l,u*i+p*a),(0,o.qR)(p*i-u*a)]},c}function h(r){function n(n){return(n=r(n[0]*o.qw,n[1]*o.qw))[0]*=o.oh,n[1]*=o.oh,n}return r=l(r[0]*o.qw,r[1]*o.qw,r.length>2?r[2]*o.qw:0),n.invert=function(n){return(n=r.invert(n[0]*o.qw,n[1]*o.qw))[0]*=o.oh,n[1]*=o.oh,n},n}s.invert=s},16016:function(r,n,i){function a(r,n){r&&s.hasOwnProperty(r.type)&&s[r.type](r,n)}i.d(n,{c:function(){return u}});var o={Feature:function(r,n){a(r.geometry,n)},FeatureCollection:function(r,n){for(var i=r.features,o=-1,s=i.length;++o<s;)a(i[o].geometry,n)}},s={Sphere:function(r,n){n.sphere()},Point:function(r,n){r=r.coordinates,n.point(r[0],r[1],r[2])},MultiPoint:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)r=i[a],n.point(r[0],r[1],r[2])},LineString:function(r,n){l(r.coordinates,n,0)},MultiLineString:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)l(i[a],n,0)},Polygon:function(r,n){c(r.coordinates,n)},MultiPolygon:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)c(i[a],n)},GeometryCollection:function(r,n){for(var i=r.geometries,o=-1,s=i.length;++o<s;)a(i[o],n)}};function l(r,n,i){var a,o=-1,s=r.length-i;for(n.lineStart();++o<s;)a=r[o],n.point(a[0],a[1],a[2]);n.lineEnd()}function c(r,n){var i=-1,a=r.length;for(n.polygonStart();++i<a;)l(r[i],n,1);n.polygonEnd()}function u(r,n){r&&o.hasOwnProperty(r.type)?o[r.type](r,n):a(r,n)}},15196:function(r,n,i){function a(r){return{stream:o(r)}}function o(r){return function(n){var i=new s;for(var a in r)i[a]=r[a];return i.stream=n,i}}function s(){}i.d(n,{c:function(){return a},s:function(){return o}}),s.prototype={constructor:s,point:function(r,n){this.stream.point(r,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(r,n,i){function a(r,n){return r.parent===n.parent?1:2}function o(r,n){return r+n.x}function s(r,n){return Math.max(r,n.y)}function l(){var r=a,n=1,i=1,l=!1;function c(a){var c,u=0;a.eachAfter(function(n){var i=n.children;i?(n.x=i.reduce(o,0)/i.length,n.y=1+i.reduce(s,0)):(n.x=c?u+=r(n,c):0,n.y=0,c=n)});var f=function(r){for(var n;n=r.children;)r=n[0];return r}(a),h=function(r){for(var n;n=r.children;)r=n[n.length-1];return r}(a),p=f.x-r(f,h)/2,d=h.x+r(h,f)/2;return a.eachAfter(l?function(r){r.x=(r.x-a.x)*n,r.y=(a.y-r.y)*i}:function(r){r.x=(r.x-p)/(d-p)*n,r.y=(1-(a.y?r.y/a.y:1))*i})}return c.separation=function(n){return arguments.length?(r=n,c):r},c.size=function(r){return arguments.length?(l=!1,n=+r[0],i=+r[1],c):l?null:[n,i]},c.nodeSize=function(r){return arguments.length?(l=!0,n=+r[0],i=+r[1],c):l?[n,i]:null},c}function c(r){var n=0,i=r.children,a=i&&i.length;if(a)for(;--a>=0;)n+=i[a].value;else n=1;r.value=n}function u(r,n){var i,a,o,s,l,c=new d(r),u=+r.value&&(c.value=r.value),h=[c];for(null==n&&(n=f);i=h.pop();)if(u&&(i.value=+i.data.value),(o=n(i.data))&&(l=o.length))for(i.children=Array(l),s=l-1;s>=0;--s)h.push(a=i.children[s]=new d(o[s])),a.parent=i,a.depth=i.depth+1;return c.eachBefore(p)}function f(r){return r.children}function h(r){r.data=r.data.data}function p(r){var n=0;do r.height=n;while((r=r.parent)&&r.height<++n)}function d(r){this.data=r,this.depth=this.height=0,this.parent=null}i.r(n),i.d(n,{cluster:function(){return l},hierarchy:function(){return u},pack:function(){return O},packEnclose:function(){return g},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return H},tree:function(){return Z},treemap:function(){return Q},treemapBinary:function(){return tt},treemapDice:function(){return z},treemapResquarify:function(){return tr},treemapSlice:function(){return X},treemapSliceDice:function(){return te},treemapSquarify:function(){return $}}),d.prototype=u.prototype={constructor:d,count:function(){return this.eachAfter(c)},each:function(r){var n,i,a,o,s=this,l=[s];do for(n=l.reverse(),l=[];s=n.pop();)if(r(s),i=s.children)for(a=0,o=i.length;a<o;++a)l.push(i[a]);while(l.length)return this},eachAfter:function(r){for(var n,i,a,o=this,s=[o],l=[];o=s.pop();)if(l.push(o),n=o.children)for(i=0,a=n.length;i<a;++i)s.push(n[i]);for(;o=l.pop();)r(o);return this},eachBefore:function(r){for(var n,i,a=this,o=[a];a=o.pop();)if(r(a),n=a.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},sum:function(r){return this.eachAfter(function(n){for(var i=+r(n.data)||0,a=n.children,o=a&&a.length;--o>=0;)i+=a[o].value;n.value=i})},sort:function(r){return this.eachBefore(function(n){n.children&&n.children.sort(r)})},path:function(r){for(var n=this,i=function(r,n){if(r===n)return r;var i=r.ancestors(),a=n.ancestors(),o=null;for(r=i.pop(),n=a.pop();r===n;)o=r,r=i.pop(),n=a.pop();return o}(n,r),a=[n];n!==i;)a.push(n=n.parent);for(var o=a.length;r!==i;)a.splice(o,0,r),r=r.parent;return a},ancestors:function(){for(var r=this,n=[r];r=r.parent;)n.push(r);return n},descendants:function(){var r=[];return this.each(function(n){r.push(n)}),r},leaves:function(){var r=[];return this.eachBefore(function(n){n.children||r.push(n)}),r},links:function(){var r=this,n=[];return r.each(function(i){i!==r&&n.push({source:i.parent,target:i})}),n},copy:function(){return u(this).eachBefore(h)}};var y=Array.prototype.slice;function g(r){for(var n,i,a=0,o=(r=function(r){for(var n,i,a=r.length;a;)i=Math.random()*a--|0,n=r[a],r[a]=r[i],r[i]=n;return r}(y.call(r))).length,s=[];a<o;)n=r[a],i&&m(i,n)?++a:(i=function(r){var n;switch(r.length){case 1:return{x:(n=r[0]).x,y:n.y,r:n.r};case 2:return b(r[0],r[1]);case 3:return _(r[0],r[1],r[2])}}(s=function(r,n){var i,a;if(x(n,r))return[n];for(i=0;i<r.length;++i)if(v(n,r[i])&&x(b(r[i],n),r))return[r[i],n];for(i=0;i<r.length-1;++i)for(a=i+1;a<r.length;++a)if(v(b(r[i],r[a]),n)&&v(b(r[i],n),r[a])&&v(b(r[a],n),r[i])&&x(_(r[i],r[a],n),r))return[r[i],r[a],n];throw Error()}(s,n)),a=0);return i}function v(r,n){var i=r.r-n.r,a=n.x-r.x,o=n.y-r.y;return i<0||i*i<a*a+o*o}function m(r,n){var i=r.r-n.r+1e-6,a=n.x-r.x,o=n.y-r.y;return i>0&&i*i>a*a+o*o}function x(r,n){for(var i=0;i<n.length;++i)if(!m(r,n[i]))return!1;return!0}function b(r,n){var i=r.x,a=r.y,o=r.r,s=n.x,l=n.y,c=n.r,u=s-i,f=l-a,h=c-o,p=Math.sqrt(u*u+f*f);return{x:(i+s+u/p*h)/2,y:(a+l+f/p*h)/2,r:(p+o+c)/2}}function _(r,n,i){var a=r.x,o=r.y,s=r.r,l=n.x,c=n.y,u=n.r,f=i.x,h=i.y,p=i.r,d=a-l,y=a-f,g=o-c,v=o-h,m=u-s,x=p-s,b=a*a+o*o-s*s,_=b-l*l-c*c+u*u,w=b-f*f-h*h+p*p,T=y*g-d*v,A=(g*w-v*_)/(2*T)-a,k=(v*m-g*x)/T,M=(y*_-d*w)/(2*T)-o,S=(d*x-y*m)/T,E=k*k+S*S-1,I=2*(s+A*k+M*S),L=A*A+M*M-s*s,C=-(E?(I+Math.sqrt(I*I-4*E*L))/(2*E):L/I);return{x:a+A+k*C,y:o+M+S*C,r:C}}function w(r,n,i){var a,o,s,l,c=r.x-n.x,u=r.y-n.y,f=c*c+u*u;f?(o=n.r+i.r,o*=o,l=r.r+i.r,o>(l*=l)?(a=(f+l-o)/(2*f),s=Math.sqrt(Math.max(0,l/f-a*a)),i.x=r.x-a*c-s*u,i.y=r.y-a*u+s*c):(a=(f+o-l)/(2*f),s=Math.sqrt(Math.max(0,o/f-a*a)),i.x=n.x+a*c-s*u,i.y=n.y+a*u+s*c)):(i.x=n.x+i.r,i.y=n.y)}function T(r,n){var i=r.r+n.r-1e-6,a=n.x-r.x,o=n.y-r.y;return i>0&&i*i>a*a+o*o}function A(r){var n=r._,i=r.next._,a=n.r+i.r,o=(n.x*i.r+i.x*n.r)/a,s=(n.y*i.r+i.y*n.r)/a;return o*o+s*s}function k(r){this._=r,this.next=null,this.previous=null}function M(r){var n,i,a,o,s,l,c,u,f,h,p;if(!(o=r.length))return 0;if((n=r[0]).x=0,n.y=0,!(o>1))return n.r;if(i=r[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;w(i,n,a=r[2]),n=new k(n),i=new k(i),a=new k(a),n.next=a.previous=i,i.next=n.previous=a,a.next=i.previous=n;e:for(c=3;c<o;++c){w(n._,i._,a=r[c]),a=new k(a),u=i.next,f=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(T(u._,a._)){i=u,n.next=i,i.previous=n,--c;continue e}h+=u._.r,u=u.next}else{if(T(f._,a._)){(n=f).next=i,i.previous=n,--c;continue e}p+=f._.r,f=f.previous}while(u!==f.next)for(a.previous=n,a.next=i,n.next=i.previous=i=a,s=A(n);(a=a.next)!==i;)(l=A(a))<s&&(n=a,s=l);i=n.next}for(n=[i._],a=i;(a=a.next)!==i;)n.push(a._);for(a=g(n),c=0;c<o;++c)(n=r[c]).x-=a.x,n.y-=a.y;return a.r}function S(r){return M(r),r}function E(r){if("function"!=typeof r)throw Error();return r}function I(){return 0}function L(r){return function(){return r}}function C(r){return Math.sqrt(r.value)}function O(){var r=null,n=1,i=1,a=I;function o(o){return o.x=n/2,o.y=i/2,r?o.eachBefore(D(r)).eachAfter(P(a,.5)).eachBefore(B(1)):o.eachBefore(D(C)).eachAfter(P(I,1)).eachAfter(P(a,o.r/Math.min(n,i))).eachBefore(B(Math.min(n,i)/(2*o.r))),o}return o.radius=function(n){return arguments.length?(r=null==n?null:E(n),o):r},o.size=function(r){return arguments.length?(n=+r[0],i=+r[1],o):[n,i]},o.padding=function(r){return arguments.length?(a="function"==typeof r?r:L(+r),o):a},o}function D(r){return function(n){n.children||(n.r=Math.max(0,+r(n)||0))}}function P(r,n){return function(i){if(a=i.children){var a,o,s,l=a.length,c=r(i)*n||0;if(c)for(o=0;o<l;++o)a[o].r+=c;if(s=M(a),c)for(o=0;o<l;++o)a[o].r-=c;i.r=s+c}}}function B(r){return function(n){var i=n.parent;n.r*=r,i&&(n.x=i.x+r*n.x,n.y=i.y+r*n.y)}}function R(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function z(r,n,i,a,o){for(var s,l=r.children,c=-1,u=l.length,f=r.value&&(a-n)/r.value;++c<u;)(s=l[c]).y0=i,s.y1=o,s.x0=n,s.x1=n+=s.value*f}function F(){var r=1,n=1,i=0,a=!1;function o(o){var s,l=o.height+1;return o.x0=o.y0=i,o.x1=r,o.y1=n/l,o.eachBefore((s=n,function(r){r.children&&z(r,r.x0,s*(r.depth+1)/l,r.x1,s*(r.depth+2)/l);var n=r.x0,a=r.y0,o=r.x1-i,c=r.y1-i;o<n&&(n=o=(n+o)/2),c<a&&(a=c=(a+c)/2),r.x0=n,r.y0=a,r.x1=o,r.y1=c})),a&&o.eachBefore(R),o}return o.round=function(r){return arguments.length?(a=!!r,o):a},o.size=function(i){return arguments.length?(r=+i[0],n=+i[1],o):[r,n]},o.padding=function(r){return arguments.length?(i=+r,o):i},o}var N={depth:-1},U={};function j(r){return r.id}function V(r){return r.parentId}function H(){var r=j,n=V;function i(i){var a,o,s,l,c,u,f,h=i.length,y=Array(h),g={};for(o=0;o<h;++o)a=i[o],c=y[o]=new d(a),null!=(u=r(a,o,i))&&(u+="")&&(g[f="$"+(c.id=u)]=f in g?U:c);for(o=0;o<h;++o)if(c=y[o],null!=(u=n(i[o],o,i))&&(u+="")){if(!(l=g["$"+u]))throw Error("missing: "+u);if(l===U)throw Error("ambiguous: "+u);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw Error("multiple roots");s=c}if(!s)throw Error("no root");if(s.parent=N,s.eachBefore(function(r){r.depth=r.parent.depth+1,--h}).eachBefore(p),s.parent=null,h>0)throw Error("cycle");return s}return i.id=function(n){return arguments.length?(r=E(n),i):r},i.parentId=function(r){return arguments.length?(n=E(r),i):n},i}function q(r,n){return r.parent===n.parent?1:2}function G(r){var n=r.children;return n?n[0]:r.t}function W(r){var n=r.children;return n?n[n.length-1]:r.t}function Y(r,n){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Z(){var r=q,n=1,i=1,a=null;function o(o){var u=function(r){for(var n,i,a,o,s,l=new Y(r,0),c=[l];n=c.pop();)if(a=n._.children)for(n.children=Array(s=a.length),o=s-1;o>=0;--o)c.push(i=n.children[o]=new Y(a[o],o)),i.parent=n;return(l.parent=new Y(null,0)).children=[l],l}(o);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(l),a)o.eachBefore(c);else{var f=o,h=o,p=o;o.eachBefore(function(r){r.x<f.x&&(f=r),r.x>h.x&&(h=r),r.depth>p.depth&&(p=r)});var d=f===h?1:r(f,h)/2,y=d-f.x,g=n/(h.x+d+y),v=i/(p.depth||1);o.eachBefore(function(r){r.x=(r.x+y)*g,r.y=r.depth*v})}return o}function s(n){var i=n.children,a=n.parent.children,o=n.i?a[n.i-1]:null;if(i){!function(r){for(var n,i=0,a=0,o=r.children,s=o.length;--s>=0;)(n=o[s]).z+=i,n.m+=i,i+=n.s+(a+=n.c)}(n);var s=(i[0].z+i[i.length-1].z)/2;o?(n.z=o.z+r(n._,o._),n.m=n.z-s):n.z=s}else o&&(n.z=o.z+r(n._,o._));n.parent.A=function(n,i,a){if(i){for(var o,s,l,c=n,u=n,f=i,h=c.parent.children[0],p=c.m,d=u.m,y=f.m,g=h.m;f=W(f),c=G(c),f&&c;)h=G(h),(u=W(u)).a=n,(l=f.z+y-c.z-p+r(f._,c._))>0&&(function(r,n,i){var a=i/(n.i-r.i);n.c-=a,n.s+=i,r.c+=a,n.z+=i,n.m+=i}((o=f,s=a,o.a.parent===n.parent?o.a:s),n,l),p+=l,d+=l),y+=f.m,p+=c.m,g+=h.m,d+=u.m;f&&!W(u)&&(u.t=f,u.m+=y-d),c&&!G(h)&&(h.t=c,h.m+=p-g,a=n)}return a}(n,o,n.parent.A||a[0])}function l(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function c(r){r.x*=n,r.y=r.depth*i}return o.separation=function(n){return arguments.length?(r=n,o):r},o.size=function(r){return arguments.length?(a=!1,n=+r[0],i=+r[1],o):a?null:[n,i]},o.nodeSize=function(r){return arguments.length?(a=!0,n=+r[0],i=+r[1],o):a?[n,i]:null},o}function X(r,n,i,a,o){for(var s,l=r.children,c=-1,u=l.length,f=r.value&&(o-i)/r.value;++c<u;)(s=l[c]).x0=n,s.x1=a,s.y0=i,s.y1=i+=s.value*f}Y.prototype=Object.create(d.prototype);var K=(1+Math.sqrt(5))/2;function J(r,n,i,a,o,s){for(var l,c,u,f,h,p,d,y,g,v,m,x=[],b=n.children,_=0,w=0,T=b.length,A=n.value;_<T;){u=o-i,f=s-a;do h=b[w++].value;while(!h&&w<T)for(p=d=h,g=Math.max(d/(m=h*h*(v=Math.max(f/u,u/f)/(A*r))),m/p);w<T;++w){if(h+=c=b[w].value,c<p&&(p=c),c>d&&(d=c),(y=Math.max(d/(m=h*h*v),m/p))>g){h-=c;break}g=y}x.push(l={value:h,dice:u<f,children:b.slice(_,w)}),l.dice?z(l,i,a,o,A?a+=f*h/A:s):X(l,i,a,A?i+=u*h/A:o,s),A-=h,_=w}return x}var $=function r(n){function i(r,i,a,o,s){J(n,r,i,a,o,s)}return i.ratio=function(n){return r((n=+n)>1?n:1)},i}(K);function Q(){var r=$,n=!1,i=1,a=1,o=[0],s=I,l=I,c=I,u=I,f=I;function h(r){return r.x0=r.y0=0,r.x1=i,r.y1=a,r.eachBefore(p),o=[0],n&&r.eachBefore(R),r}function p(n){var i=o[n.depth],a=n.x0+i,h=n.y0+i,p=n.x1-i,d=n.y1-i;p<a&&(a=p=(a+p)/2),d<h&&(h=d=(h+d)/2),n.x0=a,n.y0=h,n.x1=p,n.y1=d,n.children&&(i=o[n.depth+1]=s(n)/2,a+=f(n)-i,h+=l(n)-i,(p-=c(n)-i)<a&&(a=p=(a+p)/2),(d-=u(n)-i)<h&&(h=d=(h+d)/2),r(n,a,h,p,d))}return h.round=function(r){return arguments.length?(n=!!r,h):n},h.size=function(r){return arguments.length?(i=+r[0],a=+r[1],h):[i,a]},h.tile=function(n){return arguments.length?(r=E(n),h):r},h.padding=function(r){return arguments.length?h.paddingInner(r).paddingOuter(r):h.paddingInner()},h.paddingInner=function(r){return arguments.length?(s="function"==typeof r?r:L(+r),h):s},h.paddingOuter=function(r){return arguments.length?h.paddingTop(r).paddingRight(r).paddingBottom(r).paddingLeft(r):h.paddingTop()},h.paddingTop=function(r){return arguments.length?(l="function"==typeof r?r:L(+r),h):l},h.paddingRight=function(r){return arguments.length?(c="function"==typeof r?r:L(+r),h):c},h.paddingBottom=function(r){return arguments.length?(u="function"==typeof r?r:L(+r),h):u},h.paddingLeft=function(r){return arguments.length?(f="function"==typeof r?r:L(+r),h):f},h}function tt(r,n,i,a,o){var s,l,c=r.children,u=c.length,f=Array(u+1);for(f[0]=l=s=0;s<u;++s)f[s+1]=l+=c[s].value;!function r(n,i,a,o,s,l,u){if(n>=i-1){var h=c[n];return h.x0=o,h.y0=s,h.x1=l,void(h.y1=u)}for(var p=f[n],d=a/2+p,y=n+1,g=i-1;y<g;){var v=y+g>>>1;f[v]<d?y=v+1:g=v}d-f[y-1]<f[y]-d&&n+1<y&&--y;var m=f[y]-p,x=a-m;if(l-o>u-s){var b=(o*x+l*m)/a;r(n,y,m,o,s,b,u),r(y,i,x,b,s,l,u)}else{var _=(s*x+u*m)/a;r(n,y,m,o,s,l,_),r(y,i,x,o,_,l,u)}}(0,u,r.value,n,i,a,o)}function te(r,n,i,a,o){(1&r.depth?X:z)(r,n,i,a,o)}var tr=function r(n){function i(r,i,a,o,s){if((l=r._squarify)&&l.ratio===n)for(var l,c,u,f,h,p=-1,d=l.length,y=r.value;++p<d;){for(u=(c=l[p]).children,f=c.value=0,h=u.length;f<h;++f)c.value+=u[f].value;c.dice?z(c,i,a,o,a+=(s-a)*c.value/y):X(c,i,a,i+=(o-i)*c.value/y,s),y-=c.value}else r._squarify=l=J(n,r,i,a,o,s),l.ratio=n}return i.ratio=function(n){return r((n=+n)>1?n:1)},i}(K)},10132:function(r,n,i){i.d(n,{ak:function(){return v}});var a=Math.PI,o=2*a,s=o-1e-6;function l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new l}l.prototype=c.prototype={constructor:l,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,i,a){this._+="Q"+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},bezierCurveTo:function(r,n,i,a,o,s){this._+="C"+ +r+","+ +n+","+ +i+","+ +a+","+(this._x1=+o)+","+(this._y1=+s)},arcTo:function(r,n,i,o,s){r=+r,n=+n,i=+i,o=+o,s=+s;var l=this._x1,c=this._y1,u=i-r,f=o-n,h=l-r,p=c-n,d=h*h+p*p;if(s<0)throw Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(d>1e-6){if(Math.abs(p*u-f*h)>1e-6&&s){var y=i-l,g=o-c,v=u*u+f*f,m=Math.sqrt(v),x=Math.sqrt(d),b=s*Math.tan((a-Math.acos((v+d-(y*y+g*g))/(2*m*x)))/2),_=b/x,w=b/m;Math.abs(_-1)>1e-6&&(this._+="L"+(r+_*h)+","+(n+_*p)),this._+="A"+s+","+s+",0,0,"+ +(p*y>h*g)+","+(this._x1=r+w*u)+","+(this._y1=n+w*f)}else this._+="L"+(this._x1=r)+","+(this._y1=n)}},arc:function(r,n,i,l,c,u){r=+r,n=+n,u=!!u;var f=(i=+i)*Math.cos(l),h=i*Math.sin(l),p=r+f,d=n+h,y=1^u,g=u?l-c:c-l;if(i<0)throw Error("negative radius: "+i);null===this._x1?this._+="M"+p+","+d:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-d)>1e-6)&&(this._+="L"+p+","+d),i&&(g<0&&(g=g%o+o),g>s?this._+="A"+i+","+i+",0,1,"+y+","+(r-f)+","+(n-h)+"A"+i+","+i+",0,1,"+y+","+(this._x1=p)+","+(this._y1=d):g>1e-6&&(this._+="A"+i+","+i+",0,"+ +(g>=a)+","+y+","+(this._x1=r+i*Math.cos(c))+","+(this._y1=n+i*Math.sin(c))))},rect:function(r,n,i,a){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +a+"h"+-i+"Z"},toString:function(){return this._}};var u=Array.prototype.slice;function f(r){return function(){return r}}function h(r){return r[0]}function p(r){return r[1]}function d(r){return r.source}function y(r){return r.target}function g(r,n,i,a,o){r.moveTo(n,i),r.bezierCurveTo(n=(n+a)/2,i,n,o,a,o)}function v(){return function(r){var n=d,i=y,a=h,o=p,s=null;function l(){var l,f=u.call(arguments),h=n.apply(this,f),p=i.apply(this,f);if(s||(s=l=c()),r(s,+a.apply(this,(f[0]=h,f)),+o.apply(this,f),+a.apply(this,(f[0]=p,f)),+o.apply(this,f)),l)return s=null,l+""||null}return l.source=function(r){return arguments.length?(n=r,l):n},l.target=function(r){return arguments.length?(i=r,l):i},l.x=function(r){return arguments.length?(a="function"==typeof r?r:f(+r),l):a},l.y=function(r){return arguments.length?(o="function"==typeof r?r:f(+r),l):o},l.context=function(r){return arguments.length?(s=null==r?null:r,l):s},l}(g)}},94336:function(r,n,i){i.d(n,{Yn:function(){return g},m_:function(){return d},E9:function(){return v}});var a=i(8208),o=i(58931),s=i(46192),l=i(68936),c=i(32171),u=i(53528);function f(r){if(0<=r.y&&r.y<100){var n=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return n.setFullYear(r.y),n}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function h(r){if(0<=r.y&&r.y<100){var n=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return n.setUTCFullYear(r.y),n}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function p(r,n,i){return{y:r,m:n,d:i,H:0,M:0,S:0,L:0}}function d(r){var n=r.dateTime,i=r.date,c=r.time,u=r.periods,d=r.days,y=r.shortDays,g=r.months,v=r.shortMonths,x=A(u),b=k(u),_=A(d),w=k(d),T=A(y),tI=k(y),tL=A(g),tC=k(g),tO=A(v),tD=k(v),tP={a:function(r){return y[r.getDay()]},A:function(r){return d[r.getDay()]},b:function(r){return v[r.getMonth()]},B:function(r){return g[r.getMonth()]},c:null,d:W,e:W,f:J,H:Y,I:Z,j:X,L:K,m:$,M:Q,p:function(r){return u[+(r.getHours()>=12)]},q:function(r){return 1+~~(r.getMonth()/3)},Q:tS,s:tE,S:tt,u:te,U:tr,V:tn,w:ti,W:ta,x:null,X:null,y:to,Y:ts,Z:tl,"%":tM},tB={a:function(r){return y[r.getUTCDay()]},A:function(r){return d[r.getUTCDay()]},b:function(r){return v[r.getUTCMonth()]},B:function(r){return g[r.getUTCMonth()]},c:null,d:tc,e:tc,f:td,H:tu,I:tf,j:th,L:tp,m:ty,M:tg,p:function(r){return u[+(r.getUTCHours()>=12)]},q:function(r){return 1+~~(r.getUTCMonth()/3)},Q:tS,s:tE,S:tv,u:tm,U:tx,V:tb,w:t_,W:tw,x:null,X:null,y:tT,Y:tA,Z:tk,"%":tM},tR={a:function(r,n,i){var a=T.exec(n.slice(i));return a?(r.w=tI[a[0].toLowerCase()],i+a[0].length):-1},A:function(r,n,i){var a=_.exec(n.slice(i));return a?(r.w=w[a[0].toLowerCase()],i+a[0].length):-1},b:function(r,n,i){var a=tO.exec(n.slice(i));return a?(r.m=tD[a[0].toLowerCase()],i+a[0].length):-1},B:function(r,n,i){var a=tL.exec(n.slice(i));return a?(r.m=tC[a[0].toLowerCase()],i+a[0].length):-1},c:function(r,i,a){return tN(r,n,i,a)},d:R,e:R,f:V,H:F,I:F,j:z,L:j,m:B,M:N,p:function(r,n,i){var a=x.exec(n.slice(i));return a?(r.p=b[a[0].toLowerCase()],i+a[0].length):-1},q:P,Q:q,s:G,S:U,u:S,U:E,V:I,w:M,W:L,x:function(r,n,a){return tN(r,i,n,a)},X:function(r,n,i){return tN(r,c,n,i)},y:O,Y:C,Z:D,"%":H};function tz(r,n){return function(i){var a,o,s,l=[],c=-1,u=0,f=r.length;for(i instanceof Date||(i=new Date(+i));++c<f;)37===r.charCodeAt(c)&&(l.push(r.slice(u,c)),null!=(o=m[a=r.charAt(++c)])?a=r.charAt(++c):o="e"===a?" ":"0",(s=n[a])&&(a=s(i,o)),l.push(a),u=c+1);return l.push(r.slice(u,c)),l.join("")}}function tF(r,n){return function(i){var c,u,d=p(1900,void 0,1);if(tN(d,r,i+="",0)!=i.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!n||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(c=(u=(c=h(p(d.y,0,1))).getUTCDay())>4||0===u?a.ot.ceil(c):(0,a.ot)(c),c=o.c.offset(c,7*(d.V-1)),d.y=c.getUTCFullYear(),d.m=c.getUTCMonth(),d.d=c.getUTCDate()+(d.w+6)%7):(c=(u=(c=f(p(d.y,0,1))).getDay())>4||0===u?s.qT.ceil(c):(0,s.qT)(c),c=l.c.offset(c,7*(d.V-1)),d.y=c.getFullYear(),d.m=c.getMonth(),d.d=c.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),u="Z"in d?h(p(d.y,0,1)).getUTCDay():f(p(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(u+5)%7:d.w+7*d.U-(u+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,h(d)):f(d)}}function tN(r,n,i,a){for(var o,s,l=0,c=n.length,u=i.length;l<c;){if(a>=u)return -1;if(37===(o=n.charCodeAt(l++))){if(!(s=tR[(o=n.charAt(l++))in m?n.charAt(l++):o])||(a=s(r,i,a))<0)return -1}else if(o!=i.charCodeAt(a++))return -1}return a}return tP.x=tz(i,tP),tP.X=tz(c,tP),tP.c=tz(n,tP),tB.x=tz(i,tB),tB.X=tz(c,tB),tB.c=tz(n,tB),{format:function(r){var n=tz(r+="",tP);return n.toString=function(){return r},n},parse:function(r){var n=tF(r+="",!1);return n.toString=function(){return r},n},utcFormat:function(r){var n=tz(r+="",tB);return n.toString=function(){return r},n},utcParse:function(r){var n=tF(r+="",!0);return n.toString=function(){return r},n}}}var y,g,v,m={"-":"",_:" ",0:"0"},x=/^\s*\d+/,b=/^%/,_=/[\\^$*+?|[\]().{}]/g;function w(r,n,i){var a=r<0?"-":"",o=(a?-r:r)+"",s=o.length;return a+(s<i?Array(i-s+1).join(n)+o:o)}function T(r){return r.replace(_,"\\$&")}function A(r){return RegExp("^(?:"+r.map(T).join("|")+")","i")}function k(r){for(var n={},i=-1,a=r.length;++i<a;)n[r[i].toLowerCase()]=i;return n}function M(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.w=+a[0],i+a[0].length):-1}function S(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.u=+a[0],i+a[0].length):-1}function E(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.U=+a[0],i+a[0].length):-1}function I(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.V=+a[0],i+a[0].length):-1}function L(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.W=+a[0],i+a[0].length):-1}function C(r,n,i){var a=x.exec(n.slice(i,i+4));return a?(r.y=+a[0],i+a[0].length):-1}function O(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function D(r,n,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(i,i+6));return a?(r.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function P(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.q=3*a[0]-3,i+a[0].length):-1}function B(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.m=a[0]-1,i+a[0].length):-1}function R(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.d=+a[0],i+a[0].length):-1}function z(r,n,i){var a=x.exec(n.slice(i,i+3));return a?(r.m=0,r.d=+a[0],i+a[0].length):-1}function F(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.H=+a[0],i+a[0].length):-1}function N(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.M=+a[0],i+a[0].length):-1}function U(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.S=+a[0],i+a[0].length):-1}function j(r,n,i){var a=x.exec(n.slice(i,i+3));return a?(r.L=+a[0],i+a[0].length):-1}function V(r,n,i){var a=x.exec(n.slice(i,i+6));return a?(r.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function H(r,n,i){var a=b.exec(n.slice(i,i+1));return a?i+a[0].length:-1}function q(r,n,i){var a=x.exec(n.slice(i));return a?(r.Q=+a[0],i+a[0].length):-1}function G(r,n,i){var a=x.exec(n.slice(i));return a?(r.s=+a[0],i+a[0].length):-1}function W(r,n){return w(r.getDate(),n,2)}function Y(r,n){return w(r.getHours(),n,2)}function Z(r,n){return w(r.getHours()%12||12,n,2)}function X(r,n){return w(1+l.c.count((0,c.c)(r),r),n,3)}function K(r,n){return w(r.getMilliseconds(),n,3)}function J(r,n){return K(r,n)+"000"}function $(r,n){return w(r.getMonth()+1,n,2)}function Q(r,n){return w(r.getMinutes(),n,2)}function tt(r,n){return w(r.getSeconds(),n,2)}function te(r){var n=r.getDay();return 0===n?7:n}function tr(r,n){return w(s.uU.count((0,c.c)(r)-1,r),n,2)}function tn(r,n){var i=r.getDay();return r=i>=4||0===i?(0,s.kD)(r):s.kD.ceil(r),w(s.kD.count((0,c.c)(r),r)+(4===(0,c.c)(r).getDay()),n,2)}function ti(r){return r.getDay()}function ta(r,n){return w(s.qT.count((0,c.c)(r)-1,r),n,2)}function to(r,n){return w(r.getFullYear()%100,n,2)}function ts(r,n){return w(r.getFullYear()%1e4,n,4)}function tl(r){var n=r.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+w(n/60|0,"0",2)+w(n%60,"0",2)}function tc(r,n){return w(r.getUTCDate(),n,2)}function tu(r,n){return w(r.getUTCHours(),n,2)}function tf(r,n){return w(r.getUTCHours()%12||12,n,2)}function th(r,n){return w(1+o.c.count((0,u.c)(r),r),n,3)}function tp(r,n){return w(r.getUTCMilliseconds(),n,3)}function td(r,n){return tp(r,n)+"000"}function ty(r,n){return w(r.getUTCMonth()+1,n,2)}function tg(r,n){return w(r.getUTCMinutes(),n,2)}function tv(r,n){return w(r.getUTCSeconds(),n,2)}function tm(r){var n=r.getUTCDay();return 0===n?7:n}function tx(r,n){return w(a.EV.count((0,u.c)(r)-1,r),n,2)}function tb(r,n){var i=r.getUTCDay();return r=i>=4||0===i?(0,a.yA)(r):a.yA.ceil(r),w(a.yA.count((0,u.c)(r),r)+(4===(0,u.c)(r).getUTCDay()),n,2)}function t_(r){return r.getUTCDay()}function tw(r,n){return w(a.ot.count((0,u.c)(r)-1,r),n,2)}function tT(r,n){return w(r.getUTCFullYear()%100,n,2)}function tA(r,n){return w(r.getUTCFullYear()%1e4,n,4)}function tk(){return"+0000"}function tM(){return"%"}function tS(r){return+r}function tE(r){return Math.floor(+r/1e3)}g=(y=d({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,y.parse,v=y.utcFormat,y.utcParse},68936:function(r,n,i){i.d(n,{m:function(){return l}});var a=i(81628),o=i(69792),s=(0,a.c)(function(r){r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*o.iy)/o.SK},function(r){return r.getDate()-1});n.c=s;var l=s.range},69792:function(r,n,i){i.d(n,{KK:function(){return c},SK:function(){return l},cg:function(){return s},iy:function(){return o},yc:function(){return a}});var a=1e3,o=6e4,s=36e5,l=864e5,c=6048e5},73220:function(r,n,i){i.r(n),i.d(n,{timeDay:function(){return x.c},timeDays:function(){return x.m},timeFriday:function(){return b.iB},timeFridays:function(){return b.sJ},timeHour:function(){return v},timeHours:function(){return m},timeInterval:function(){return a.c},timeMillisecond:function(){return s},timeMilliseconds:function(){return l},timeMinute:function(){return d},timeMinutes:function(){return y},timeMonday:function(){return b.qT},timeMondays:function(){return b.QP},timeMonth:function(){return w},timeMonths:function(){return T},timeSaturday:function(){return b.Wc},timeSaturdays:function(){return b.aI},timeSecond:function(){return f},timeSeconds:function(){return h},timeSunday:function(){return b.uU},timeSundays:function(){return b.Ab},timeThursday:function(){return b.kD},timeThursdays:function(){return b.eC},timeTuesday:function(){return b.Mf},timeTuesdays:function(){return b.Oc},timeWednesday:function(){return b.eg},timeWednesdays:function(){return b.sn},timeWeek:function(){return b.uU},timeWeeks:function(){return b.Ab},timeYear:function(){return A.c},timeYears:function(){return A.Q},utcDay:function(){return C.c},utcDays:function(){return C.o},utcFriday:function(){return O.od},utcFridays:function(){return O.iG},utcHour:function(){return I},utcHours:function(){return L},utcMillisecond:function(){return s},utcMilliseconds:function(){return l},utcMinute:function(){return M},utcMinutes:function(){return S},utcMonday:function(){return O.ot},utcMondays:function(){return O.iO},utcMonth:function(){return P},utcMonths:function(){return B},utcSaturday:function(){return O.Ad},utcSaturdays:function(){return O.K8},utcSecond:function(){return f},utcSeconds:function(){return h},utcSunday:function(){return O.EV},utcSundays:function(){return O.Wq},utcThursday:function(){return O.yA},utcThursdays:function(){return O.ob},utcTuesday:function(){return O.sG},utcTuesdays:function(){return O.kl},utcWednesday:function(){return O._6},utcWednesdays:function(){return O.W_},utcWeek:function(){return O.EV},utcWeeks:function(){return O.Wq},utcYear:function(){return R.c},utcYears:function(){return R.i}});var a=i(81628),o=(0,a.c)(function(){},function(r,n){r.setTime(+r+n)},function(r,n){return n-r});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?r>1?(0,a.c)(function(n){n.setTime(Math.floor(n/r)*r)},function(n,i){n.setTime(+n+i*r)},function(n,i){return(i-n)/r}):o:null};var s=o,l=o.range,c=i(69792),u=(0,a.c)(function(r){r.setTime(r-r.getMilliseconds())},function(r,n){r.setTime(+r+n*c.yc)},function(r,n){return(n-r)/c.yc},function(r){return r.getUTCSeconds()}),f=u,h=u.range,p=(0,a.c)(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*c.yc)},function(r,n){r.setTime(+r+n*c.iy)},function(r,n){return(n-r)/c.iy},function(r){return r.getMinutes()}),d=p,y=p.range,g=(0,a.c)(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*c.yc-r.getMinutes()*c.iy)},function(r,n){r.setTime(+r+n*c.cg)},function(r,n){return(n-r)/c.cg},function(r){return r.getHours()}),v=g,m=g.range,x=i(68936),b=i(46192),_=(0,a.c)(function(r){r.setDate(1),r.setHours(0,0,0,0)},function(r,n){r.setMonth(r.getMonth()+n)},function(r,n){return n.getMonth()-r.getMonth()+12*(n.getFullYear()-r.getFullYear())},function(r){return r.getMonth()}),w=_,T=_.range,A=i(32171),k=(0,a.c)(function(r){r.setUTCSeconds(0,0)},function(r,n){r.setTime(+r+n*c.iy)},function(r,n){return(n-r)/c.iy},function(r){return r.getUTCMinutes()}),M=k,S=k.range,E=(0,a.c)(function(r){r.setUTCMinutes(0,0,0)},function(r,n){r.setTime(+r+n*c.cg)},function(r,n){return(n-r)/c.cg},function(r){return r.getUTCHours()}),I=E,L=E.range,C=i(58931),O=i(8208),D=(0,a.c)(function(r){r.setUTCDate(1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCMonth(r.getUTCMonth()+n)},function(r,n){return n.getUTCMonth()-r.getUTCMonth()+12*(n.getUTCFullYear()-r.getUTCFullYear())},function(r){return r.getUTCMonth()}),P=D,B=D.range,R=i(53528)},81628:function(r,n,i){i.d(n,{c:function(){return function r(n,i,s,l){function c(r){return n(r=0==arguments.length?new Date:new Date(+r)),r}return c.floor=function(r){return n(r=new Date(+r)),r},c.ceil=function(r){return n(r=new Date(r-1)),i(r,1),n(r),r},c.round=function(r){var n=c(r),i=c.ceil(r);return r-n<i-r?n:i},c.offset=function(r,n){return i(r=new Date(+r),null==n?1:Math.floor(n)),r},c.range=function(r,a,o){var s,l=[];if(r=c.ceil(r),o=null==o?1:Math.floor(o),!(r<a&&o>0))return l;do l.push(s=new Date(+r)),i(r,o),n(r);while(s<r&&r<a)return l},c.filter=function(a){return r(function(r){if(r>=r)for(;n(r),!a(r);)r.setTime(r-1)},function(r,n){if(r>=r){if(n<0)for(;++n<=0;)for(;i(r,-1),!a(r););else for(;--n>=0;)for(;i(r,1),!a(r););}})},s&&(c.count=function(r,i){return a.setTime(+r),o.setTime(+i),n(a),n(o),Math.floor(s(a,o))},c.every=function(r){return isFinite(r=Math.floor(r))&&r>0?r>1?c.filter(l?function(n){return l(n)%r==0}:function(n){return c.count(0,n)%r==0}):c:null}),c}}});var a=new Date,o=new Date},58931:function(r,n,i){i.d(n,{o:function(){return l}});var a=i(81628),o=i(69792),s=(0,a.c)(function(r){r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n)},function(r,n){return(n-r)/o.SK},function(r){return r.getUTCDate()-1});n.c=s;var l=s.range},8208:function(r,n,i){i.d(n,{Ad:function(){return d},EV:function(){return l},K8:function(){return _},W_:function(){return m},Wq:function(){return y},_6:function(){return f},iG:function(){return b},iO:function(){return g},kl:function(){return v},ob:function(){return x},od:function(){return p},ot:function(){return c},sG:function(){return u},yA:function(){return h}});var a=i(81628),o=i(69792);function s(r){return(0,a.c)(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-r)%7),n.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+7*n)},function(r,n){return(n-r)/o.KK})}var l=s(0),c=s(1),u=s(2),f=s(3),h=s(4),p=s(5),d=s(6),y=l.range,g=c.range,v=u.range,m=f.range,x=h.range,b=p.range,_=d.range},53528:function(r,n,i){i.d(n,{i:function(){return s}});var a=i(81628),o=(0,a.c)(function(r){r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n)},function(r,n){return n.getUTCFullYear()-r.getUTCFullYear()},function(r){return r.getUTCFullYear()});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?(0,a.c)(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/r)*r),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,i){n.setUTCFullYear(n.getUTCFullYear()+i*r)}):null},n.c=o;var s=o.range},46192:function(r,n,i){i.d(n,{Ab:function(){return y},Mf:function(){return u},Oc:function(){return v},QP:function(){return g},Wc:function(){return d},aI:function(){return _},eC:function(){return x},eg:function(){return f},iB:function(){return p},kD:function(){return h},qT:function(){return c},sJ:function(){return b},sn:function(){return m},uU:function(){return l}});var a=i(81628),o=i(69792);function s(r){return(0,a.c)(function(n){n.setDate(n.getDate()-(n.getDay()+7-r)%7),n.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+7*n)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*o.iy)/o.KK})}var l=s(0),c=s(1),u=s(2),f=s(3),h=s(4),p=s(5),d=s(6),y=l.range,g=c.range,v=u.range,m=f.range,x=h.range,b=p.range,_=d.range},32171:function(r,n,i){i.d(n,{Q:function(){return s}});var a=i(81628),o=(0,a.c)(function(r){r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n)},function(r,n){return n.getFullYear()-r.getFullYear()},function(r){return r.getFullYear()});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?(0,a.c)(function(n){n.setFullYear(Math.floor(n.getFullYear()/r)*r),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,i){n.setFullYear(n.getFullYear()+i*r)}):null},n.c=o;var s=o.range},64348:function(r,n,i){var a=i(39640)(),o=i(53664),s=a&&o("%Object.defineProperty%",!0);if(s)try{s({},"a",{value:1})}catch(r){s=!1}var l=o("%SyntaxError%"),c=o("%TypeError%"),u=i(2304);r.exports=function(r,n,i){if(!r||"object"!=typeof r&&"function"!=typeof r)throw new c("`obj` must be an object or a function`");if("string"!=typeof n&&"symbol"!=typeof n)throw new c("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new c("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new c("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new c("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new c("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,h=arguments.length>6&&arguments[6],p=!!u&&u(r,n);if(s)s(r,n,{configurable:null===f&&p?p.configurable:!f,enumerable:null===a&&p?p.enumerable:!a,value:i,writable:null===o&&p?p.writable:!o});else{if(!h&&(a||o||f))throw new l("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");r[n]=i}}},81288:function(r,n,i){var a=i(41820),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,l=Array.prototype.concat,c=Object.defineProperty,u=i(39640)(),f=c&&u,h=function(r,n,i,a){if(n in r){if(!0===a){if(r[n]===i)return}else if("function"!=typeof a||"[object Function]"!==s.call(a)||!a())return}f?c(r,n,{configurable:!0,enumerable:!1,value:i,writable:!0}):r[n]=i},p=function(r,n){var i=arguments.length>2?arguments[2]:{},s=a(n);o&&(s=l.call(s,Object.getOwnPropertySymbols(n)));for(var c=0;c<s.length;c+=1)h(r,s[c],n[s[c]],i[s[c]])};p.supportsDescriptors=!!f,r.exports=p},31264:function(r){r.exports=function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]}},63768:function(r){r.exports=a;var n=(a.canvas=document.createElement("canvas")).getContext("2d"),i=o([32,126]);function a(r,a){Array.isArray(r)&&(r=r.join(", "));var s,l={},c=16,u=.05;a&&(2===a.length&&"number"==typeof a[0]?s=o(a):Array.isArray(a)?s=a:(a.o?s=o(a.o):a.pairs&&(s=a.pairs),a.fontSize&&(c=a.fontSize),null!=a.threshold&&(u=a.threshold))),s||(s=i),n.font=c+"px "+r;for(var f=0;f<s.length;f++){var h=s[f],p=n.measureText(h[0]).width+n.measureText(h[1]).width,d=n.measureText(h).width;if(Math.abs(p-d)>c*u){var y=(d-p)/c;l[h]=1e3*y}}return l}function o(r){for(var n=[],i=r[0];i<=r[1];i++)for(var a=String.fromCharCode(i),o=r[0];o<r[1];o++){var s=a+String.fromCharCode(o);n.push(s)}return n}a.createPairs=o,a.ascii=i},22235:function(r,n,i){var a=i(49972),o=i(48816),s={M:"moveTo",C:"bezierCurveTo"};r.exports=function(r,n){r.beginPath(),o(a(n)).forEach(function(n){var i=n[0],a=n.slice(1);r[s[i]].apply(r,a)}),r.closePath()}},72512:function(r){r.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(r){r.exports=function(r,n){switch(void 0===n&&(n=0),typeof r){case"number":if(r>0)return function(r,n){var i,a;for(i=Array(r),a=0;a<r;++a)i[a]=n;return i}(0|r,n);break;case"object":if("number"==typeof r.length)return function r(n,i,a){var o=0|n[a];if(o<=0)return[];var s,l=Array(o);if(a===n.length-1)for(s=0;s<o;++s)l[s]=i;else for(s=0;s<o;++s)l[s]=r(n,i,a+1);return l}(r,n,0)}return[]}},28912:function(r){function n(r,n,h){h=h||2;var p,g,m,x,b,_,w,T=n&&n.length,A=T?n[0]*h:r.length,k=i(r,0,A,h,!0),M=[];if(!k||k.next===k.prev)return M;if(T&&(k=function(r,n,s,u){var f,h,p,g=[];for(f=0,h=n.length;f<h;f++)(p=i(r,n[f]*u,f<h-1?n[f+1]*u:r.length,u,!1))===p.next&&(p.steiner=!0),g.push(function(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r)return i}(p));for(g.sort(o),f=0;f<g.length;f++)(function(r,n){if(n=function(r,n){var i,a,o,s=n,u=r.x,f=r.y,h=-1/0;do{if(f<=s.y&&f>=s.next.y&&s.next.y!==s.y){var p=s.x+(f-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(p<=u&&p>h){if(h=p,p===u){if(f===s.y)return s;if(f===s.next.y)return s.next}o=s.x<s.next.x?s:s.next}}s=s.next}while(s!==n)if(!o)return null;if(u===h)return o;var y,g=o,v=o.x,m=o.y,x=1/0;s=o;do u>=s.x&&s.x>=v&&u!==s.x&&l(f<m?u:h,f,v,m,f<m?h:u,f,s.x,s.y)&&(y=Math.abs(f-s.y)/(u-s.x),d(s,r)&&(y<x||y===x&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>c(i.prev,i,a.prev)&&0>c(a.next,i,i.next))))&&(o=s,x=y)),s=s.next;while(s!==g)return o}(r,n)){var i=y(n,r);a(n,n.next),a(i,i.next)}})(g[f],s),s=a(s,s.next);return s}(r,n,k,h)),r.length>80*h){p=m=r[0],g=x=r[1];for(var S=h;S<A;S+=h)(b=r[S])<p&&(p=b),(_=r[S+1])<g&&(g=_),b>m&&(m=b),_>x&&(x=_);w=0!==(w=Math.max(m-p,x-g))?1/w:0}return function r(n,i,o,h,p,g,m){if(n){!m&&g&&function(r,n,i,a){var o=r;do null===o.z&&(o.z=s(o.x,o.y,n,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r)o.prevZ.nextZ=null,o.prevZ=null,function(r){var n,i,a,o,s,l,c,u,f=1;do{for(i=r,r=null,s=null,l=0;i;){for(l++,a=i,c=0,n=0;n<f&&(c++,a=a.nextZ);n++);for(u=f;c>0||u>0&&a;)0!==c&&(0===u||!a||i.z<=a.z)?(o=i,i=i.nextZ,c--):(o=a,a=a.nextZ,u--),s?s.nextZ=o:r=o,o.prevZ=s,s=o;i=a}s.nextZ=null,f*=2}while(l>1)}(o)}(n,h,p,g);for(var x,b,_=n;n.prev!==n.next;)if(x=n.prev,b=n.next,g?function(r,n,i,a){var o=r.prev,u=r.next;if(c(o,r,u)>=0)return!1;for(var f=o.x<r.x?o.x<u.x?o.x:u.x:r.x<u.x?r.x:u.x,h=o.y<r.y?o.y<u.y?o.y:u.y:r.y<u.y?r.y:u.y,p=o.x>r.x?o.x>u.x?o.x:u.x:r.x>u.x?r.x:u.x,d=o.y>r.y?o.y>u.y?o.y:u.y:r.y>u.y?r.y:u.y,y=s(f,h,n,i,a),g=s(p,d,n,i,a),v=r.prevZ,m=r.nextZ;v&&v.z>=y&&m&&m.z<=g;){if(v!==r.prev&&v!==r.next&&l(o.x,o.y,r.x,r.y,u.x,u.y,v.x,v.y)&&c(v.prev,v,v.next)>=0||(v=v.prevZ,m!==r.prev&&m!==r.next&&l(o.x,o.y,r.x,r.y,u.x,u.y,m.x,m.y)&&c(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;v&&v.z>=y;){if(v!==r.prev&&v!==r.next&&l(o.x,o.y,r.x,r.y,u.x,u.y,v.x,v.y)&&c(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;m&&m.z<=g;){if(m!==r.prev&&m!==r.next&&l(o.x,o.y,r.x,r.y,u.x,u.y,m.x,m.y)&&c(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}(n,h,p,g):function(r){var n=r.prev,i=r.next;if(c(n,r,i)>=0)return!1;for(var a=r.next.next;a!==r.prev;){if(l(n.x,n.y,r.x,r.y,i.x,i.y,a.x,a.y)&&c(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}(n))i.push(x.i/o),i.push(n.i/o),i.push(b.i/o),v(n),n=b.next,_=b.next;else if((n=b)===_){m?1===m?r(n=function(r,n,i){var o=r;do{var s=o.prev,l=o.next.next;!u(s,l)&&f(s,o,o.next,l)&&d(s,l)&&d(l,s)&&(n.push(s.i/i),n.push(o.i/i),n.push(l.i/i),v(o),v(o.next),o=r=l),o=o.next}while(o!==r)return a(o)}(a(n),i,o),i,o,h,p,g,2):2===m&&function(n,i,o,s,l,h){var p=n;do{for(var g,v,m=p.next.next;m!==p.prev;){if(p.i!==m.i&&(g=p,v=m,g.next.i!==v.i&&g.prev.i!==v.i&&!function(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&f(i,i.next,r,n))return!0;i=i.next}while(i!==r)return!1}(g,v)&&(d(g,v)&&d(v,g)&&function(r,n){var i=r,a=!1,o=(r.x+n.x)/2,s=(r.y+n.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==r)return a}(g,v)&&(c(g.prev,g,v.prev)||c(g,v.prev,v))||u(g,v)&&c(g.prev,g,g.next)>0&&c(v.prev,v,v.next)>0))){var x=y(p,m);return p=a(p,p.next),x=a(x,x.next),r(p,i,o,s,l,h),void r(x,i,o,s,l,h)}m=m.next}p=p.next}while(p!==n)}(n,i,o,h,p,g):r(a(n),i,o,h,p,g,1);break}}}(k,M,h,p,g,w),M}function i(r,n,i,a,o){var s,l;if(o===x(r,n,i,a)>0)for(s=n;s<i;s+=a)l=g(s,r[s],r[s+1],l);else for(s=i-a;s>=n;s-=a)l=g(s,r[s],r[s+1],l);return l&&u(l,l.next)&&(v(l),l=l.next),l}function a(r,n){if(!r)return r;n||(n=r);var i,a=r;do if(i=!1,a.steiner||!u(a,a.next)&&0!==c(a.prev,a,a.next))a=a.next;else{if(v(a),(a=n=a.prev)===a.next)break;i=!0}while(i||a!==n)return n}function o(r,n){return r.x-n.x}function s(r,n,i,a,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*o)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*o)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function l(r,n,i,a,o,s,l,c){return(o-l)*(n-c)-(r-l)*(s-c)>=0&&(r-l)*(a-c)-(i-l)*(n-c)>=0&&(i-l)*(s-c)-(o-l)*(a-c)>=0}function c(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function u(r,n){return r.x===n.x&&r.y===n.y}function f(r,n,i,a){var o=p(c(r,n,i)),s=p(c(r,n,a)),l=p(c(i,a,r)),u=p(c(i,a,n));return o!==s&&l!==u||!(0!==o||!h(r,i,n))||!(0!==s||!h(r,a,n))||!(0!==l||!h(i,r,a))||!(0!==u||!h(i,n,a))}function h(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function p(r){return r>0?1:r<0?-1:0}function d(r,n){return 0>c(r.prev,r,r.next)?c(r,n,r.next)>=0&&c(r,r.prev,n)>=0:0>c(r,n,r.prev)||0>c(r,r.next,n)}function y(r,n){var i=new m(r.i,r.x,r.y),a=new m(n.i,n.x,n.y),o=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a}function g(r,n,i,a){var o=new m(r,n,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}function v(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function m(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x(r,n,i,a){for(var o=0,s=n,l=i-a;s<i;s+=a)o+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return o}r.exports=n,r.exports.default=n,n.deviation=function(r,n,i,a){var o=n&&n.length,s=o?n[0]*i:r.length,l=Math.abs(x(r,0,s,i));if(o)for(var c=0,u=n.length;c<u;c++){var f=n[c]*i,h=c<u-1?n[c+1]*i:r.length;l-=Math.abs(x(r,f,h,i))}var p=0;for(c=0;c<a.length;c+=3){var d=a[c]*i,y=a[c+1]*i,g=a[c+2]*i;p+=Math.abs((r[d]-r[g])*(r[y+1]-r[d+1])-(r[d]-r[y])*(r[g+1]-r[d+1]))}return 0===l&&0===p?0:Math.abs((p-l)/l)},n.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},a=0,o=0;o<r.length;o++){for(var s=0;s<r[o].length;s++)for(var l=0;l<n;l++)i.vertices.push(r[o][s][l]);o>0&&(a+=r[o-1].length,i.holes.push(a))}return i}},6688:function(r,n,i){var a=i(78484);r.exports=function(r,n){var i,o=[],s=[],l=[],c={},u=[];i=0;for(var f=r.length;i<f;){var h=function(n){!function(n){for(var i=0;i<r.length;i++)i<n&&(r[i]=[]),r[i]=r[i].filter(function(r){return r>=n})}(n);for(var i,o=a(r).components.filter(function(r){return r.length>1}),s=1/0,l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]<s&&(s=o[l][c],i=l);var u=o[i];return!!u&&{leastVertex:s,adjList:r.map(function(r,n){return -1===u.indexOf(n)?[]:r.filter(function(r){return -1!==u.indexOf(r)})})}}(i);if(i=h.leastVertex,u=h.adjList){for(var p=0;p<u.length;p++)for(var d=0;d<u[p].length;d++){var y=u[p][d];l[+y]=!1,c[y]={}}(function r(a){var f,h,p=!1;for(s.push(a),l[a]=!0,f=0;f<u[a].length;f++)(h=u[a][f])===i?(function(i,a){var s=[].concat(a).concat(i);n?n(r):o.push(s)}(i,s),p=!0):l[h]||(p=r(h));if(p)!function r(n){l[n]=!1,c.hasOwnProperty(n)&&Object.keys(c[n]).forEach(function(i){delete c[n][i],l[i]&&r(i)})}(a);else for(f=0;f<u[a].length;f++){var d=c[h=u[a][f]];d||(d={},c[h]=d),d[h]=!0}return s.pop(),p})(i),i+=1}else i=f}return n?void 0:o}},41476:function(r,n,i){var a=i(9252);r.exports=function(){return a(this).length=0,this}},74772:function(r,n,i){r.exports=i(44716)()?Array.from:i(80816)},44716:function(r){r.exports=function(){var r,n,i=Array.from;return"function"==typeof i&&!!((n=i(r=["raz","dwa"]))&&n!==r&&"dwa"===n[1])}},80816:function(r,n,i){var a=i(92664).iterator,o=i(60948),s=i(17024),l=i(81304),c=i(34044),u=i(9252),f=i(42584),h=i(29768),p=Array.isArray,d=Function.prototype.call,y={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;r.exports=function(r){var n,i,v,m,x,b,_,w,T,A,k=arguments[1],M=arguments[2];if(r=Object(u(r)),f(k)&&c(k),this&&this!==Array&&s(this))n=this;else{if(!k){if(o(r))return 1!==(x=r.length)?Array.apply(null,r):((m=[,])[0]=r[0],m);if(p(r)){for(m=Array(x=r.length),i=0;i<x;++i)m[i]=r[i];return m}}m=[]}if(!p(r)){if(void 0!==(T=r[a])){for(_=c(T).call(r),n&&(m=new n),w=_.next(),i=0;!w.done;)A=k?d.call(k,M,w.value,i):w.value,n?(y.value=A,g(m,i,y)):m[i]=A,w=_.next(),++i;x=i}else if(h(r)){for(x=r.length,n&&(m=new n),i=0,v=0;i<x;++i)A=r[i],i+1<x&&(b=A.charCodeAt(0))>=55296&&b<=56319&&(A+=r[++i]),A=k?d.call(k,M,A,v):A,n?(y.value=A,g(m,v,y)):m[v]=A,++v;x=v}}if(void 0===x)for(x=l(r.length),n&&(m=new n(x)),i=0;i<x;++i)A=k?d.call(k,M,r[i],i):r[i],n?(y.value=A,g(m,i,y)):m[i]=A;return n&&(y.value=null,m.length=x),m}},60948:function(r){var n=Object.prototype.toString,i=n.call(function(){return arguments}());r.exports=function(r){return n.call(r)===i}},17024:function(r){var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);r.exports=function(r){return"function"==typeof r&&i(n.call(r))}},33208:function(r){r.exports=function(){}},85608:function(r,n,i){r.exports=i(37328)()?Math.sign:i(92928)},37328:function(r){r.exports=function(){var r=Math.sign;return"function"==typeof r&&1===r(10)&&-1===r(-20)}},92928:function(r){r.exports=function(r){return isNaN(r=Number(r))||0===r?r:r>0?1:-1}},96936:function(r,n,i){var a=i(85608),o=Math.abs,s=Math.floor;r.exports=function(r){return isNaN(r)?0:0!==(r=Number(r))&&isFinite(r)?a(r)*s(o(r)):r}},81304:function(r,n,i){var a=i(96936),o=Math.max;r.exports=function(r){return o(0,a(r))}},14428:function(r,n,i){var a=i(34044),o=i(9252),s=Function.prototype.bind,l=Function.prototype.call,c=Object.keys,u=Object.prototype.propertyIsEnumerable;r.exports=function(r,n){return function(i,f){var h,p=arguments[2],d=arguments[3];return i=Object(o(i)),a(f),h=c(i),d&&h.sort("function"==typeof d?s.call(d,i):void 0),"function"!=typeof r&&(r=h[r]),l.call(r,h,function(r,a){return u.call(i,r)?l.call(f,p,i[r],r,i,a):n})}}},38452:function(r,n,i){r.exports=i(96276)()?Object.assign:i(81892)},96276:function(r){r.exports=function(){var r,n=Object.assign;return"function"==typeof n&&(n(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")}},81892:function(r,n,i){var a=i(54768),o=i(9252),s=Math.max;r.exports=function(r,n){var i,l,c,u=s(arguments.length,2);for(r=Object(o(r)),c=function(a){try{r[a]=n[a]}catch(r){i||(i=r)}},l=1;l<u;++l)a(n=arguments[l]).forEach(c);if(void 0!==i)throw i;return r}},95920:function(r,n,i){var a=i(74772),o=i(38452),s=i(9252);r.exports=function(r){var n=Object(s(r)),i=arguments[1],l=Object(arguments[2]);if(n!==r&&!i)return n;var c={};return i?a(i,function(n){(l.ensure||n in r)&&(c[n]=r[n])}):o(c,r),c}},14452:function(r,n,i){var a,o,s,l,c=Object.create;i(63092)()||(a=i(8672)),r.exports=a?1!==a.level?c:(o={},s={},l={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){s[r]="__proto__"!==r?l:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(o,s),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(r,n){return c(null===r?o:r,n)}):c},42748:function(r,n,i){r.exports=i(14428)("forEach")},69127:function(r,n,i){var a=i(42584),o={function:!0,object:!0};r.exports=function(r){return a(r)&&o[typeof r]||!1}},42584:function(r,n,i){var a=i(33208)();r.exports=function(r){return r!==a&&null!==r}},54768:function(r,n,i){r.exports=i(87888)()?Object.keys:i(89592)},87888:function(r){r.exports=function(){try{return Object.keys("primitive"),!0}catch(r){return!1}}},89592:function(r,n,i){var a=i(42584),o=Object.keys;r.exports=function(r){return o(a(r)?Object(r):r)}},84323:function(r,n,i){var a=i(34044),o=i(42748),s=Function.prototype.call;r.exports=function(r,n){var i={},l=arguments[2];return a(n),o(r,function(r,a,o,c){i[a]=s.call(n,l,r,a,o,c)}),i}},50868:function(r,n,i){var a=i(42584),o=Array.prototype.forEach,s=Object.create;r.exports=function(r){var n=s(null);return o.call(arguments,function(r){a(r)&&function(r,n){var i;for(i in r)n[i]=r[i]}(Object(r),n)}),n}},69932:function(r,n,i){r.exports=i(63092)()?Object.setPrototypeOf:i(8672)},63092:function(r){var n=Object.create,i=Object.getPrototypeOf,a={};r.exports=function(){var r=Object.setPrototypeOf;return"function"==typeof r&&i(r((arguments[0]||n)(null),a))===a}},8672:function(r,n,i){var a,o,s,l,c=i(69127),u=i(9252),f=Object.prototype.isPrototypeOf,h=Object.defineProperty,p={configurable:!0,enumerable:!1,writable:!0,value:void 0};a=function(r,n){if(u(r),null===n||c(n))return r;throw TypeError("Prototype must be null or an object")},r.exports=(o=function(){var r,n=Object.create(null),i={},a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(a){try{(r=a.set).call(n,i)}catch(r){}if(Object.getPrototypeOf(n)===i)return{set:r,level:2}}return n.__proto__=i,Object.getPrototypeOf(n)===i?{level:2}:((n={}).__proto__=i,Object.getPrototypeOf(n)===i&&{level:1})}())?(2===o.level?o.set?(l=o.set,s=function(r,n){return l.call(a(r,n),n),r}):s=function(r,n){return a(r,n).__proto__=n,r}:s=function r(n,i){var o;return a(n,i),(o=f.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===i&&(i=r.nullPolyfill),n.__proto__=i,o&&h(r.nullPolyfill,"__proto__",p),n},Object.defineProperty(s,"level",{configurable:!1,enumerable:!1,writable:!1,value:o.level})):null,i(14452)},34044:function(r){r.exports=function(r){if("function"!=typeof r)throw TypeError(r+" is not a function");return r}},92584:function(r,n,i){var a=i(69127);r.exports=function(r){if(!a(r))throw TypeError(r+" is not an Object");return r}},9252:function(r,n,i){var a=i(42584);r.exports=function(r){if(!a(r))throw TypeError("Cannot use null or undefined");return r}},71056:function(r,n,i){r.exports=i(42976)()?String.prototype.contains:i(93040)},42976:function(r){var n="razdwatrzy";r.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},93040:function(r){var n=String.prototype.indexOf;r.exports=function(r){return n.call(this,r,arguments[1])>-1}},29768:function(r){var n=Object.prototype.toString,i=n.call("");r.exports=function(r){return"string"==typeof r||r&&"object"==typeof r&&(r instanceof String||n.call(r)===i)||!1}},82252:function(r){var n=Object.create(null),i=Math.random;r.exports=function(){var r;do r=i().toString(36).slice(2);while(n[r])return r}},52104:function(r,n,i){var a,o=i(69932),s=i(71056),l=i(21092),c=i(92664),u=i(85512),f=Object.defineProperty;a=r.exports=function(r,n){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");u.call(this,r),f(this,"__kind__",l("",n=n?s.call(n,"key+value")?"key+value":s.call(n,"key")?"key":"value":"value"))},o&&o(a,u),delete a.prototype.constructor,a.prototype=Object.create(u.prototype,{_resolve:l(function(r){return"value"===this.__kind__?this.__list__[r]:"key+value"===this.__kind__?[r,this.__list__[r]]:r})}),f(a.prototype,c.toStringTag,l("c","Array Iterator"))},76024:function(r,n,i){var a=i(60948),o=i(34044),s=i(29768),l=i(76252),c=Array.isArray,u=Function.prototype.call,f=Array.prototype.some;r.exports=function(r,n){var i,h,p,d,y,g,v,m,x=arguments[2];if(c(r)||a(r)?i="array":s(r)?i="string":r=l(r),o(n),p=function(){d=!0},"array"!==i){if("string"!==i)for(h=r.next();!h.done;){if(u.call(n,x,h.value,p),d)return;h=r.next()}else for(g=r.length,y=0;y<g&&(v=r[y],y+1<g&&(m=v.charCodeAt(0))>=55296&&m<=56319&&(v+=r[++y]),u.call(n,x,v,p),!d);++y);}else f.call(r,function(r){return u.call(n,x,r,p),d})}},76252:function(r,n,i){var a=i(60948),o=i(29768),s=i(52104),l=i(80940),c=i(52891),u=i(92664).iterator;r.exports=function(r){return"function"==typeof c(r)[u]?r[u]():a(r)?new s(r):o(r)?new l(r):new s(r)}},85512:function(r,n,i){var a,o=i(41476),s=i(38452),l=i(34044),c=i(9252),u=i(21092),f=i(27940),h=i(92664),p=Object.defineProperty,d=Object.defineProperties;r.exports=a=function(r,n){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");d(this,{__list__:u("w",c(r)),__context__:u("w",n),__nextIndex__:u("w",0)}),n&&(l(n.on),n.on("_add",this._onAdd),n.on("_delete",this._onDelete),n.on("_clear",this._onClear))},delete a.prototype.constructor,d(a.prototype,s({_next:u(function(){var r;if(this.__list__)return this.__redo__&&void 0!==(r=this.__redo__.shift())?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(r){return void 0===r?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:u(function(r){return this.__list__[r]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[h.toStringTag]||"Object")+"]"})},f({_onAdd:u(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(n,i){n>=r&&(this.__redo__[i]=++n)},this),this.__redo__.push(r)):p(this,"__redo__",u("c",[r])))}),_onDelete:u(function(r){var n;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(n=this.__redo__.indexOf(r))&&this.__redo__.splice(n,1),this.__redo__.forEach(function(n,i){n>r&&(this.__redo__[i]=--n)},this)))}),_onClear:u(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),p(a.prototype,h.iterator,u(function(){return this}))},76368:function(r,n,i){var a=i(60948),o=i(42584),s=i(29768),l=i(92664).iterator,c=Array.isArray;r.exports=function(r){return!(!o(r)||!c(r)&&!s(r)&&!a(r)&&"function"!=typeof r[l])}},80940:function(r,n,i){var a,o=i(69932),s=i(21092),l=i(92664),c=i(85512),u=Object.defineProperty;a=r.exports=function(r){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");r=String(r),c.call(this,r),u(this,"__length__",s("",r.length))},o&&o(a,c),delete a.prototype.constructor,a.prototype=Object.create(c.prototype,{_next:s(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:s(function(r){var n,i=this.__list__[r];return this.__nextIndex__===this.__length__?i:(n=i.charCodeAt(0))>=55296&&n<=56319?i+this.__list__[this.__nextIndex__++]:i})}),u(a.prototype,l.toStringTag,s("c","String Iterator"))},52891:function(r,n,i){var a=i(76368);r.exports=function(r){if(!a(r))throw TypeError(r+" is not iterable");return r}},60964:function(r){function n(r,n){if(null==r)throw TypeError("Cannot convert first argument to object");for(var i=Object(r),a=1;a<arguments.length;a++){var o=arguments[a];if(null!=o)for(var s=Object.keys(Object(o)),l=0,c=s.length;l<c;l++){var u=s[l],f=Object.getOwnPropertyDescriptor(o,u);void 0!==f&&f.enumerable&&(i[u]=o[u])}}return i}r.exports={assign:n,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}}},92664:function(r,n,i){r.exports=i(43580)()?i(12296).Symbol:i(18376)},43580:function(r,n,i){var a=i(12296),o={object:!0,symbol:!0};r.exports=function(){var r,n=a.Symbol;if("function"!=typeof n)return!1;r=n("test symbol");try{String(r)}catch(r){return!1}return!!o[typeof n.iterator]&&!!o[typeof n.toPrimitive]&&!!o[typeof n.toStringTag]}},53908:function(r){r.exports=function(r){return!!r&&("symbol"==typeof r||!!r.constructor&&"Symbol"===r.constructor.name&&"Symbol"===r[r.constructor.toStringTag])}},96863:function(r,n,i){var a=i(21092),o=Object.defineProperty,s=Object.prototype,l=(0,Object.create)(null);r.exports=function(r){for(var n,i,c=0;l[r+(c||"")];)++c;return l[r+=c||""]=!0,o(s,n="@@"+r,a.gs(null,function(r){i||(i=!0,o(this,n,a(r)),i=!1)})),n}},53540:function(r,n,i){var a=i(21092),o=i(12296).Symbol;r.exports=function(r){return Object.defineProperties(r,{hasInstance:a("",o&&o.hasInstance||r("hasInstance")),isConcatSpreadable:a("",o&&o.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",o&&o.iterator||r("iterator")),match:a("",o&&o.match||r("match")),replace:a("",o&&o.replace||r("replace")),search:a("",o&&o.search||r("search")),species:a("",o&&o.species||r("species")),split:a("",o&&o.split||r("split")),toPrimitive:a("",o&&o.toPrimitive||r("toPrimitive")),toStringTag:a("",o&&o.toStringTag||r("toStringTag")),unscopables:a("",o&&o.unscopables||r("unscopables"))})}},73852:function(r,n,i){var a=i(21092),o=i(63948),s=Object.create(null);r.exports=function(r){return Object.defineProperties(r,{for:a(function(n){return s[n]?s[n]:s[n]=r(String(n))}),keyFor:a(function(r){var n;for(n in o(r),s)if(s[n]===r)return n})})}},18376:function(r,n,i){var a,o,s,l=i(21092),c=i(63948),u=i(12296).Symbol,f=i(96863),h=i(53540),p=i(73852),d=Object.create,y=Object.defineProperties,g=Object.defineProperty;if("function"==typeof u)try{String(u()),s=!0}catch(r){}else u=null;o=function(r){if(this instanceof o)throw TypeError("Symbol is not a constructor");return a(r)},r.exports=a=function r(n){if(this instanceof r)throw TypeError("Symbol is not a constructor");return s?u(n):y(d(o.prototype),{__description__:l("",n=void 0===n?"":String(n)),__name__:l("",f(n))})},h(a),p(a),y(o.prototype,{constructor:l(a),toString:l("",function(){return this.__name__})}),y(a.prototype,{toString:l(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:l(function(){return c(this)})}),g(a.prototype,a.toPrimitive,l("",function(){var r=c(this);return"symbol"==typeof r?r:r.toString()})),g(a.prototype,a.toStringTag,l("c","Symbol")),g(o.prototype,a.toStringTag,l("c",a.prototype[a.toStringTag])),g(o.prototype,a.toPrimitive,l("c",a.prototype[a.toPrimitive]))},63948:function(r,n,i){var a=i(53908);r.exports=function(r){if(!a(r))throw TypeError(r+" is not a symbol");return r}},60463:function(r,n,i){r.exports=i(96979)()?WeakMap:i(64864)},96979:function(r){r.exports=function(){var r,n;if("function"!=typeof WeakMap)return!1;try{r=new WeakMap([[n={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return"[object WeakMap]"===String(r)&&"function"==typeof r.set&&r.set({},1)===r&&"function"==typeof r.delete&&"function"==typeof r.has&&"one"===r.get(n)}},69876:function(r){r.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},64864:function(r,n,i){var a,o=i(42584),s=i(69932),l=i(92584),c=i(9252),u=i(82252),f=i(21092),h=i(76252),p=i(76024),d=i(92664).toStringTag,y=i(69876),g=Array.isArray,v=Object.defineProperty,m=Object.prototype.hasOwnProperty,x=Object.getPrototypeOf;r.exports=a=function(){var r,n=arguments[0];if(!(this instanceof a))throw TypeError("Constructor requires 'new'");return r=y&&s&&WeakMap!==a?s(new WeakMap,x(this)):this,o(n)&&(g(n)||(n=h(n))),v(r,"__weakMapData__",f("c","$weakMap$"+u())),n&&p(n,function(n){c(n),r.set(n[0],n[1])}),r},y&&(s&&s(a,WeakMap),a.prototype=Object.create(WeakMap.prototype,{constructor:f(a)})),Object.defineProperties(a.prototype,{delete:f(function(r){return!!m.call(l(r),this.__weakMapData__)&&(delete r[this.__weakMapData__],!0)}),get:f(function(r){if(m.call(l(r),this.__weakMapData__))return r[this.__weakMapData__]}),has:f(function(r){return m.call(l(r),this.__weakMapData__)}),set:f(function(r,n){return v(l(r),this.__weakMapData__,f("c",n)),this}),toString:f(function(){return"[object WeakMap]"})}),v(a.prototype,d,f("c","WeakMap"))},61252:function(r){var n,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(r,n,i){return Function.prototype.apply.call(r,n,i)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var o=Number.isNaN||function(r){return r!=r};function s(){s.init.call(this)}r.exports=s,r.exports.once=function(r,n){return new Promise(function(i,a){function o(i){r.removeListener(n,s),a(i)}function s(){"function"==typeof r.removeListener&&r.removeListener("error",o),i([].slice.call(arguments))}v(r,n,s,{once:!0}),"error"!==n&&"function"==typeof r.on&&v(r,"error",o,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(r){if("function"!=typeof r)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function u(r){return void 0===r._maxListeners?s.defaultMaxListeners:r._maxListeners}function f(r,n,i,a){var o,s,l;if(c(i),void 0===(s=r._events)?(s=r._events=Object.create(null),r._eventsCount=0):(void 0!==s.newListener&&(r.emit("newListener",n,i.listener?i.listener:i),s=r._events),l=s[n]),void 0===l)l=s[n]=i,++r._eventsCount;else if("function"==typeof l?l=s[n]=a?[i,l]:[l,i]:a?l.unshift(i):l.push(i),(o=u(r))>0&&l.length>o&&!l.warned){l.warned=!0;var f=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=n,f.count=l.length,console&&console.warn&&console.warn(f)}return r}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(r,n,i){var a={fired:!1,wrapFn:void 0,target:r,type:n,listener:i},o=h.bind(a);return o.listener=i,a.wrapFn=o,o}function d(r,n,i){var a=r._events;if(void 0===a)return[];var o=a[n];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(r){for(var n=Array(r.length),i=0;i<n.length;++i)n[i]=r[i].listener||r[i];return n}(o):g(o,o.length)}function y(r){var n=this._events;if(void 0!==n){var i=n[r];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(r,n){for(var i=Array(n),a=0;a<n;++a)i[a]=r[a];return i}function v(r,n,i,a){if("function"==typeof r.on)a.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function o(s){a.once&&r.removeEventListener(n,o),i(s)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(r){if("number"!=typeof r||r<0||o(r))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");l=r}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||o(r))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o="error"===r,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var l,c=Error("Unhandled error."+(l?" ("+l.message+")":""));throw c.context=l,c}var u=s[r];if(void 0===u)return!1;if("function"==typeof u)a(u,this,n);else{var f=u.length,h=g(u,f);for(i=0;i<f;++i)a(h[i],this,n)}return!0},s.prototype.addListener=function(r,n){return f(this,r,n,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(r,n){return f(this,r,n,!0)},s.prototype.once=function(r,n){return c(n),this.on(r,p(this,r,n)),this},s.prototype.prependOnceListener=function(r,n){return c(n),this.prependListener(r,p(this,r,n)),this},s.prototype.removeListener=function(r,n){var i,a,o,s,l;if(c(n),void 0===(a=this._events)||void 0===(i=a[r]))return this;if(i===n||i.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete a[r],a.removeListener&&this.emit("removeListener",r,i.listener||n));else if("function"!=typeof i){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){l=i[s].listener,o=s;break}if(o<0)return this;0===o?i.shift():function(r,n){for(;n+1<r.length;n++)r[n]=r[n+1];r.pop()}(i,o),1===i.length&&(a[r]=i[0]),void 0!==a.removeListener&&this.emit("removeListener",r,l||n)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(r){var n,i,a;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[r]),this;if(0==arguments.length){var o,s=Object.keys(i);for(a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=i[r]))this.removeListener(r,n);else if(void 0!==n)for(a=n.length-1;a>=0;a--)this.removeListener(r,n[a]);return this},s.prototype.listeners=function(r){return d(this,r,!0)},s.prototype.rawListeners=function(r){return d(this,r,!1)},s.listenerCount=function(r,n){return"function"==typeof r.listenerCount?r.listenerCount(n):y.call(r,n)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},39072:function(r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};r.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(r){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},12296:function(r,n,i){r.exports=i(45072)()?globalThis:i(39072)},45072:function(r){r.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},38248:function(r,n,i){var a=i(94576);r.exports=function(r){var n=typeof r;if("string"===n){var i=r;if(0==(r=+r)&&a(i))return!1}else if("number"!==n)return!1;return r-r<1}},47520:function(r,n,i){var a=i(72512);r.exports=function(r,n,i){if(!r)throw TypeError("must specify data as first parameter");if(i=0|+(i||0),Array.isArray(r)&&r[0]&&"number"==typeof r[0][0]){var o,s,l,c,u=r[0].length,f=r.length*u;n&&"string"!=typeof n||(n=new(a(n||"float32"))(f+i));var h=n.length-i;if(f!==h)throw Error("source length "+f+" ("+u+"x"+r.length+") does not match destination length "+h);for(o=0,l=i;o<r.length;o++)for(s=0;s<u;s++)n[l++]=null===r[o][s]?NaN:r[o][s]}else if(n&&"string"!=typeof n)n.set(r,i);else{var p=a(n||"float32");if(Array.isArray(r)||"array"===n)for(o=0,l=i,c=(n=new p(r.length+i)).length;l<c;l++,o++)n[l]=null===r[o]?NaN:r[o];else 0===i?n=new p(r):(n=new p(r.length+i)).set(r,i)}return n}},33888:function(r,n,i){var a=i(49395),o=[32,126];r.exports=function(r){var n=(r=r||{}).shape?r.shape:r.canvas?[r.canvas.width,r.canvas.height]:[512,512],i=r.canvas||document.createElement("canvas"),s=r.font,l="number"==typeof r.step?[r.step,r.step]:r.step||[32,32],c=r.chars||o;if(s&&"string"!=typeof s&&(s=a(s)),Array.isArray(c)){if(2===c.length&&"number"==typeof c[0]&&"number"==typeof c[1]){for(var u=[],f=c[0],h=0;f<=c[1];f++)u[h++]=String.fromCharCode(f);c=u}}else c=String(c).split("");n=n.slice(),i.width=n[0],i.height=n[1];var p=i.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,i.width,i.height),p.font=s,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";var d=l[0]/2,y=l[1]/2;for(f=0;f<c.length;f++)p.fillText(c[f],d,y),(d+=l[0])>n[0]-l[0]/2&&(d=l[0]/2,y+=l[1]);return i}},71920:function(r){function n(r,s){s||(s={}),("string"==typeof r||Array.isArray(r))&&(s.family=r);var l=Array.isArray(s.family)?s.family.join(", "):s.family;if(!l)throw Error("`family` must be defined");var c=s.size||s.fontSize||s.em||48,u=s.weight||s.fontWeight||"",f=(r=[s.style||s.fontStyle||"",u,c].join(" ")+"px "+l,s.origin||"top");if(n.cache[l]&&c<=n.cache[l].em)return i(n.cache[l],f);var h=s.canvas||n.canvas,p=h.getContext("2d"),d={upper:void 0!==s.upper?s.upper:"H",lower:void 0!==s.lower?s.lower:"x",descent:void 0!==s.descent?s.descent:"p",ascent:void 0!==s.ascent?s.ascent:"h",tittle:void 0!==s.tittle?s.tittle:"i",overshoot:void 0!==s.overshoot?s.overshoot:"O"},y=Math.ceil(1.5*c);h.height=y,h.width=.5*y,p.font=r;var g={top:0};p.clearRect(0,0,y,y),p.textBaseline="top",p.fillStyle="black",p.fillText("H",0,0);var v=a(p.getImageData(0,0,y,y));p.clearRect(0,0,y,y),p.textBaseline="bottom",p.fillText("H",0,y);var m=a(p.getImageData(0,0,y,y));g.lineHeight=g.bottom=y-m+v,p.clearRect(0,0,y,y),p.textBaseline="alphabetic",p.fillText("H",0,y);var x=y-a(p.getImageData(0,0,y,y))-1+v;g.baseline=g.alphabetic=x,p.clearRect(0,0,y,y),p.textBaseline="middle",p.fillText("H",0,.5*y);var b=a(p.getImageData(0,0,y,y));g.median=g.middle=y-b-1+v-.5*y,p.clearRect(0,0,y,y),p.textBaseline="hanging",p.fillText("H",0,.5*y);var _=a(p.getImageData(0,0,y,y));g.hanging=y-_-1+v-.5*y,p.clearRect(0,0,y,y),p.textBaseline="ideographic",p.fillText("H",0,y);var w=a(p.getImageData(0,0,y,y));if(g.ideographic=y-w-1+v,d.upper&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.upper,0,0),g.upper=a(p.getImageData(0,0,y,y)),g.capHeight=g.baseline-g.upper),d.lower&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.lower,0,0),g.lower=a(p.getImageData(0,0,y,y)),g.xHeight=g.baseline-g.lower),d.tittle&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.tittle,0,0),g.tittle=a(p.getImageData(0,0,y,y))),d.ascent&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.ascent,0,0),g.ascent=a(p.getImageData(0,0,y,y))),d.descent&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.descent,0,0),g.descent=o(p.getImageData(0,0,y,y))),d.overshoot){p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.overshoot,0,0);var T=o(p.getImageData(0,0,y,y));g.overshoot=T-x}for(var A in g)g[A]/=c;return g.em=c,n.cache[l]=g,i(g,f)}function i(r,n){var i={};for(var a in"string"==typeof n&&(n=r[n]),r)"em"!==a&&(i[a]=r[a]-n);return i}function a(r){for(var n=r.height,i=r.data,a=3;a<i.length;a+=4)if(0!==i[a])return Math.floor(.25*(a-3)/n)}function o(r){for(var n=r.height,i=r.data,a=i.length-1;a>0;a-=4)if(0!==i[a])return Math.floor(.25*(a-3)/n)}r.exports=n,n.canvas=document.createElement("canvas"),n.cache={}},46492:function(r,n,i){var a=i(90720),o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;r.exports=function(r,n,i){var l;if(!a(n))throw TypeError("iterator must be a function");arguments.length>=3&&(l=i),"[object Array]"===o.call(r)?function(r,n,i){for(var a=0,o=r.length;a<o;a++)s.call(r,a)&&(null==i?n(r[a],a,r):n.call(i,r[a],a,r))}(r,n,l):"string"==typeof r?function(r,n,i){for(var a=0,o=r.length;a<o;a++)null==i?n(r.charAt(a),a,r):n.call(i,r.charAt(a),a,r)}(r,n,l):function(r,n,i){for(var a in r)s.call(r,a)&&(null==i?n(r[a],a,r):n.call(i,r[a],a,r))}(r,n,l)}},74336:function(r){var n=Object.prototype.toString,i=Math.max,a=function(r,n){for(var i=[],a=0;a<r.length;a+=1)i[a]=r[a];for(var o=0;o<n.length;o+=1)i[o+r.length]=n[o];return i};r.exports=function(r){var o=this;if("function"!=typeof o||"[object Function]"!==n.apply(o))throw TypeError("Function.prototype.bind called on incompatible "+o);for(var s,l=function(r,n){for(var i=[],a=1,o=0;a<r.length;a+=1,o+=1)i[o]=r[a];return i}(arguments),c=i(0,o.length-l.length),u=[],f=0;f<c;f++)u[f]="$"+f;if(s=Function("binder","return function ("+function(r,n){for(var i="",a=0;a<r.length;a+=1)i+=r[a],a+1<r.length&&(i+=",");return i}(u)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var n=o.apply(this,a(l,arguments));return Object(n)===n?n:this}return o.apply(r,a(l,arguments))}),o.prototype){var h=function(){};h.prototype=o.prototype,s.prototype=new h,h.prototype=null}return s}},8844:function(r,n,i){var a=i(74336);r.exports=Function.prototype.bind||a},13380:function(r){r.exports=function(r,n){if("string"!=typeof r)throw TypeError("must specify type string");if(n=n||{},"undefined"==typeof document&&!n.canvas)return null;var i=n.canvas||document.createElement("canvas");"number"==typeof n.width&&(i.width=n.width),"number"==typeof n.height&&(i.height=n.height);var a,o=n;try{var s=[r];0===r.indexOf("webgl")&&s.push("experimental-"+r);for(var l=0;l<s.length;l++)if(a=i.getContext(s[l],o))return a}catch(r){a=null}return a||null}},53664:function(r,n,i){var a,o=SyntaxError,s=Function,l=TypeError,c=function(r){try{return s('"use strict"; return ('+r+").constructor;")()}catch(r){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(r){u=null}var f=function(){throw new l},h=u?function(){try{return f}catch(r){try{return u(arguments,"callee").get}catch(r){return f}}}():f,p=i(71080)(),d=i(69572)(),y=Object.getPrototypeOf||(d?function(r){return r.__proto__}:null),g={},v="undefined"!=typeof Uint8Array&&y?y(Uint8Array):a,m={"%AggregateError%":"undefined"==typeof AggregateError?a:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?a:ArrayBuffer,"%ArrayIteratorPrototype%":p&&y?y([][Symbol.iterator]()):a,"%AsyncFromSyncIteratorPrototype%":a,"%AsyncFunction%":g,"%AsyncGenerator%":g,"%AsyncGeneratorFunction%":g,"%AsyncIteratorPrototype%":g,"%Atomics%":"undefined"==typeof Atomics?a:Atomics,"%BigInt%":"undefined"==typeof BigInt?a:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?a:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?a:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?a:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?a:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?a:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?a:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":g,"%Int8Array%":"undefined"==typeof Int8Array?a:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?a:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?a:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p&&y?y(y([][Symbol.iterator]())):a,"%JSON%":"object"==typeof JSON?JSON:a,"%Map%":"undefined"==typeof Map?a:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p&&y?y((new Map)[Symbol.iterator]()):a,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?a:Promise,"%Proxy%":"undefined"==typeof Proxy?a:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?a:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?a:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p&&y?y((new Set)[Symbol.iterator]()):a,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?a:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p&&y?y(""[Symbol.iterator]()):a,"%Symbol%":p?Symbol:a,"%SyntaxError%":o,"%ThrowTypeError%":h,"%TypedArray%":v,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?a:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?a:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?a:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?a:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?a:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?a:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?a:WeakSet};if(y)try{null.error}catch(r){var x=y(y(r));m["%Error.prototype%"]=x}var b=function r(n){var i;if("%AsyncFunction%"===n)i=c("async function () {}");else if("%GeneratorFunction%"===n)i=c("function* () {}");else if("%AsyncGeneratorFunction%"===n)i=c("async function* () {}");else if("%AsyncGenerator%"===n){var a=r("%AsyncGeneratorFunction%");a&&(i=a.prototype)}else if("%AsyncIteratorPrototype%"===n){var o=r("%AsyncGenerator%");o&&y&&(i=y(o.prototype))}return m[n]=i,i},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=i(8844),T=i(92064),A=w.call(Function.call,Array.prototype.concat),k=w.call(Function.apply,Array.prototype.splice),M=w.call(Function.call,String.prototype.replace),S=w.call(Function.call,String.prototype.slice),E=w.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,C=function(r,n){var i,a=r;if(T(_,a)&&(a="%"+(i=_[a])[0]+"%"),T(m,a)){var s=m[a];if(s===g&&(s=b(a)),void 0===s&&!n)throw new l("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:i,name:a,value:s}}throw new o("intrinsic "+r+" does not exist!")};r.exports=function(r,n){if("string"!=typeof r||0===r.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof n)throw new l('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,r))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(r){var n=S(r,0,1),i=S(r,-1);if("%"===n&&"%"!==i)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==n)throw new o("invalid intrinsic syntax, expected opening `%`");var a=[];return M(r,I,function(r,n,i,o){a[a.length]=i?M(o,L,"$1"):n||r}),a}(r),a=i.length>0?i[0]:"",s=C("%"+a+"%",n),c=s.name,f=s.value,h=!1,p=s.alias;p&&(a=p[0],k(i,A([0,1],p)));for(var d=1,y=!0;d<i.length;d+=1){var g=i[d],v=S(g,0,1),x=S(g,-1);if(('"'===v||"'"===v||"`"===v||'"'===x||"'"===x||"`"===x)&&v!==x)throw new o("property names with quotes must have matching quotes");if("constructor"!==g&&y||(h=!0),T(m,c="%"+(a+="."+g)+"%"))f=m[c];else if(null!=f){if(!(g in f)){if(!n)throw new l("base intrinsic for "+r+" exists, but the property is not available.");return}if(u&&d+1>=i.length){var b=u(f,g);f=(y=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:f[g]}else y=T(f,g),f=f[g];y&&!h&&(m[c]=f)}}return f}},12408:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],h=n[8],p=n[9],d=n[10],y=n[11],g=n[12],v=n[13],m=n[14],x=n[15];return r[0]=c*(d*x-y*m)-p*(u*x-f*m)+v*(u*y-f*d),r[1]=-(a*(d*x-y*m)-p*(o*x-s*m)+v*(o*y-s*d)),r[2]=a*(u*x-f*m)-c*(o*x-s*m)+v*(o*f-s*u),r[3]=-(a*(u*y-f*d)-c*(o*y-s*d)+p*(o*f-s*u)),r[4]=-(l*(d*x-y*m)-h*(u*x-f*m)+g*(u*y-f*d)),r[5]=i*(d*x-y*m)-h*(o*x-s*m)+g*(o*y-s*d),r[6]=-(i*(u*x-f*m)-l*(o*x-s*m)+g*(o*f-s*u)),r[7]=i*(u*y-f*d)-l*(o*y-s*d)+h*(o*f-s*u),r[8]=l*(p*x-y*v)-h*(c*x-f*v)+g*(c*y-f*p),r[9]=-(i*(p*x-y*v)-h*(a*x-s*v)+g*(a*y-s*p)),r[10]=i*(c*x-f*v)-l*(a*x-s*v)+g*(a*f-s*c),r[11]=-(i*(c*y-f*p)-l*(a*y-s*p)+h*(a*f-s*c)),r[12]=-(l*(p*m-d*v)-h*(c*m-u*v)+g*(c*d-u*p)),r[13]=i*(p*m-d*v)-h*(a*m-o*v)+g*(a*d-o*p),r[14]=-(i*(c*m-u*v)-l*(a*m-o*v)+g*(a*u-o*c)),r[15]=i*(c*d-u*p)-l*(a*d-o*p)+h*(a*u-o*c),r}},76860:function(r){r.exports=function(r){var n=new Float32Array(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}},64492:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},54212:function(r){r.exports=function(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},70800:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],c=r[6],u=r[7],f=r[8],h=r[9],p=r[10],d=r[11],y=r[12],g=r[13],v=r[14],m=r[15];return(n*l-i*s)*(p*m-d*v)-(n*c-a*s)*(h*m-d*g)+(n*u-o*s)*(h*v-p*g)+(i*c-a*l)*(f*m-d*y)-(i*u-o*l)*(f*v-p*y)+(a*u-o*c)*(f*g-h*y)}},61784:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i+i,c=a+a,u=o+o,f=i*l,h=a*l,p=a*c,d=o*l,y=o*c,g=o*u,v=s*l,m=s*c,x=s*u;return r[0]=1-p-g,r[1]=h+x,r[2]=d-m,r[3]=0,r[4]=h-x,r[5]=1-f-g,r[6]=y+v,r[7]=0,r[8]=d+m,r[9]=y-v,r[10]=1-f-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},91616:function(r){r.exports=function(r,n,i){var a,o,s,l=i[0],c=i[1],u=i[2],f=Math.sqrt(l*l+c*c+u*u);return 1e-6>Math.abs(f)?null:(l*=f=1/f,c*=f,u*=f,a=Math.sin(n),s=1-(o=Math.cos(n)),r[0]=l*l*s+o,r[1]=c*l*s+u*a,r[2]=u*l*s-c*a,r[3]=0,r[4]=l*c*s-u*a,r[5]=c*c*s+o,r[6]=u*c*s+l*a,r[7]=0,r[8]=l*u*s+c*a,r[9]=c*u*s-l*a,r[10]=u*u*s+o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}},51944:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=a+a,u=o+o,f=s+s,h=a*c,p=a*u,d=a*f,y=o*u,g=o*f,v=s*f,m=l*c,x=l*u,b=l*f;return r[0]=1-(y+v),r[1]=p+b,r[2]=d-x,r[3]=0,r[4]=p-b,r[5]=1-(h+v),r[6]=g+m,r[7]=0,r[8]=d+x,r[9]=g-m,r[10]=1-(h+y),r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}},69444:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},48268:function(r){r.exports=function(r,n){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}},21856:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=i,r[7]=0,r[8]=0,r[9]=-i,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},79216:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=0,r[2]=-i,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=i,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},57736:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=i,r[2]=0,r[3]=0,r[4]=-i,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},38848:function(r){r.exports=function(r,n,i,a,o,s,l){var c=1/(i-n),u=1/(o-a),f=1/(s-l);return r[0]=2*s*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*s*u,r[6]=0,r[7]=0,r[8]=(i+n)*c,r[9]=(o+a)*u,r[10]=(l+s)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=l*s*2*f,r[15]=0,r}},36635:function(r){r.exports=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},36524:function(r,n,i){r.exports={create:i(54212),clone:i(76860),copy:i(64492),identity:i(36635),transpose:i(86520),invert:i(4308),adjoint:i(12408),determinant:i(70800),multiply:i(80944),translate:i(35176),scale:i(68152),rotate:i(30016),rotateX:i(15456),rotateY:i(64840),rotateZ:i(4192),fromRotation:i(91616),fromRotationTranslation:i(51944),fromScaling:i(69444),fromTranslation:i(48268),fromXRotation:i(21856),fromYRotation:i(79216),fromZRotation:i(57736),fromQuat:i(61784),frustum:i(38848),perspective:i(51296),perspectiveFromFieldOfView:i(63688),ortho:i(97688),lookAt:i(56508),str:i(89412)}},4308:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],h=n[8],p=n[9],d=n[10],y=n[11],g=n[12],v=n[13],m=n[14],x=n[15],b=i*c-a*l,_=i*u-o*l,w=i*f-s*l,T=a*u-o*c,A=a*f-s*c,k=o*f-s*u,M=h*v-p*g,S=h*m-d*g,E=h*x-y*g,I=p*m-d*v,L=p*x-y*v,C=d*x-y*m,O=b*C-_*L+w*I+T*E-A*S+k*M;return O?(O=1/O,r[0]=(c*C-u*L+f*I)*O,r[1]=(o*L-a*C-s*I)*O,r[2]=(v*k-m*A+x*T)*O,r[3]=(d*A-p*k-y*T)*O,r[4]=(u*E-l*C-f*S)*O,r[5]=(i*C-o*E+s*S)*O,r[6]=(m*w-g*k-x*_)*O,r[7]=(h*k-d*w+y*_)*O,r[8]=(l*L-c*E+f*M)*O,r[9]=(a*E-i*L-s*M)*O,r[10]=(g*A-v*w+x*b)*O,r[11]=(p*w-h*A-y*b)*O,r[12]=(c*S-l*I-u*M)*O,r[13]=(i*I-a*S+o*M)*O,r[14]=(v*_-g*T-m*b)*O,r[15]=(h*T-p*_+d*b)*O,r):null}},56508:function(r,n,i){var a=i(36635);r.exports=function(r,n,i,o){var s,l,c,u,f,h,p,d,y,g,v=n[0],m=n[1],x=n[2],b=o[0],_=o[1],w=o[2],T=i[0],A=i[1],k=i[2];return 1e-6>Math.abs(v-T)&&1e-6>Math.abs(m-A)&&1e-6>Math.abs(x-k)?a(r):(p=v-T,d=m-A,y=x-k,(g=Math.sqrt((s=_*(y*=g=1/Math.sqrt(p*p+d*d+y*y))-w*(d*=g))*s+(l=w*(p*=g)-b*y)*l+(c=b*d-_*p)*c))?(s*=g=1/g,l*=g,c*=g):(s=0,l=0,c=0),(g=Math.sqrt((u=d*c-y*l)*u+(f=y*s-p*c)*f+(h=p*l-d*s)*h))?(u*=g=1/g,f*=g,h*=g):(u=0,f=0,h=0),r[0]=s,r[1]=u,r[2]=p,r[3]=0,r[4]=l,r[5]=f,r[6]=d,r[7]=0,r[8]=c,r[9]=h,r[10]=y,r[11]=0,r[12]=-(s*v+l*m+c*x),r[13]=-(u*v+f*m+h*x),r[14]=-(p*v+d*m+y*x),r[15]=1,r)}},80944:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],v=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],A=i[3];return r[0]=_*a+w*c+T*p+A*v,r[1]=_*o+w*u+T*d+A*m,r[2]=_*s+w*f+T*y+A*x,r[3]=_*l+w*h+T*g+A*b,_=i[4],w=i[5],T=i[6],A=i[7],r[4]=_*a+w*c+T*p+A*v,r[5]=_*o+w*u+T*d+A*m,r[6]=_*s+w*f+T*y+A*x,r[7]=_*l+w*h+T*g+A*b,_=i[8],w=i[9],T=i[10],A=i[11],r[8]=_*a+w*c+T*p+A*v,r[9]=_*o+w*u+T*d+A*m,r[10]=_*s+w*f+T*y+A*x,r[11]=_*l+w*h+T*g+A*b,_=i[12],w=i[13],T=i[14],A=i[15],r[12]=_*a+w*c+T*p+A*v,r[13]=_*o+w*u+T*d+A*m,r[14]=_*s+w*f+T*y+A*x,r[15]=_*l+w*h+T*g+A*b,r}},97688:function(r){r.exports=function(r,n,i,a,o,s,l){var c=1/(n-i),u=1/(a-o),f=1/(s-l);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*c,r[13]=(o+a)*u,r[14]=(l+s)*f,r[15]=1,r}},51296:function(r){r.exports=function(r,n,i,a,o){var s=1/Math.tan(n/2),l=1/(a-o);return r[0]=s/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(o+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*o*a*l,r[15]=0,r}},63688:function(r){r.exports=function(r,n,i,a){var o=Math.tan(n.upDegrees*Math.PI/180),s=Math.tan(n.downDegrees*Math.PI/180),l=Math.tan(n.leftDegrees*Math.PI/180),c=Math.tan(n.rightDegrees*Math.PI/180),u=2/(l+c),f=2/(o+s);return r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-(l-c)*u*.5,r[9]=(o-s)*f*.5,r[10]=a/(i-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*i/(i-a),r[15]=0,r}},30016:function(r){r.exports=function(r,n,i,a){var o,s,l,c,u,f,h,p,d,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L=a[0],C=a[1],O=a[2],D=Math.sqrt(L*L+C*C+O*O);return 1e-6>Math.abs(D)?null:(L*=D=1/D,C*=D,O*=D,o=Math.sin(i),l=1-(s=Math.cos(i)),c=n[0],u=n[1],f=n[2],h=n[3],p=n[4],d=n[5],y=n[6],g=n[7],v=n[8],m=n[9],x=n[10],b=n[11],_=L*L*l+s,w=C*L*l+O*o,T=O*L*l-C*o,A=L*C*l-O*o,k=C*C*l+s,M=O*C*l+L*o,S=L*O*l+C*o,E=C*O*l-L*o,I=O*O*l+s,r[0]=c*_+p*w+v*T,r[1]=u*_+d*w+m*T,r[2]=f*_+y*w+x*T,r[3]=h*_+g*w+b*T,r[4]=c*A+p*k+v*M,r[5]=u*A+d*k+m*M,r[6]=f*A+y*k+x*M,r[7]=h*A+g*k+b*M,r[8]=c*S+p*E+v*I,r[9]=u*S+d*E+m*I,r[10]=f*S+y*E+x*I,r[11]=h*S+g*E+b*I,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}},15456:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=c*o+p*a,r[7]=u*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-c*a,r[11]=d*o-u*a,r}},64840:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],c=n[2],u=n[3],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o-f*a,r[1]=l*o-h*a,r[2]=c*o-p*a,r[3]=u*o-d*a,r[8]=s*a+f*o,r[9]=l*a+h*o,r[10]=c*a+p*o,r[11]=u*a+d*o,r}},4192:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],c=n[2],u=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=c*o+p*a,r[3]=u*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-c*a,r[7]=d*o-u*a,r}},68152:function(r){r.exports=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},89412:function(r){r.exports=function(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}},35176:function(r){r.exports=function(r,n,i){var a,o,s,l,c,u,f,h,p,d,y,g,v=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*v+n[4]*m+n[8]*x+n[12],r[13]=n[1]*v+n[5]*m+n[9]*x+n[13],r[14]=n[2]*v+n[6]*m+n[10]*x+n[14],r[15]=n[3]*v+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=c,r[5]=u,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=y,r[11]=g,r[12]=a*v+c*m+p*x+n[12],r[13]=o*v+u*m+d*x+n[13],r[14]=s*v+f*m+y*x+n[14],r[15]=l*v+h*m+g*x+n[15]),r}},86520:function(r){r.exports=function(r,n){if(r===n){var i=n[1],a=n[2],o=n[3],s=n[6],l=n[7],c=n[11];r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=i,r[6]=n[9],r[7]=n[13],r[8]=a,r[9]=s,r[11]=n[14],r[12]=o,r[13]=l,r[14]=c}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}},23352:function(r,n,i){var a=i(42771),o=i(55616),s=i(28624),l=i(55212),c=i(60463),u=i(72160),f=i(33888),h=i(14144),p=i(51160),d=i(58908),y=i(65819),g=i(23464),v=i(63768),m=i(50896),x=i(71920),b=i(47520),_=i(308).nextPow2,w=new c,T=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(T=!0),document.body.removeChild(A)}var k=function(r){var n;"function"==typeof(n=r)&&n._gl&&n.prop&&n.texture&&n.buffer?(r={regl:r},this.gl=r.regl._gl):this.gl=l(r),this.shader=w.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=r.regl||s({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(r)?r:{})};k.prototype.createShader=function(){var r=this.regl,n=r({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:r.prop("count"),offset:r.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:r.this("sizeBuffer")},width:{offset:0,stride:8,buffer:r.this("sizeBuffer")},char:r.this("charBuffer"),position:r.this("position")},uniforms:{atlasSize:function(r,n){return[n.atlas.width,n.atlas.height]},atlasDim:function(r,n){return[n.atlas.cols,n.atlas.rows]},atlas:function(r,n){return n.atlas.texture},charStep:function(r,n){return n.atlas.step},em:function(r,n){return n.atlas.em},color:r.prop("color"),opacity:r.prop("opacity"),viewport:r.this("viewportArray"),scale:r.this("scale"),align:r.prop("align"),baseline:r.prop("baseline"),translate:r.this("translate"),positionOffset:r.prop("positionOffset")},primitive:"points",viewport:r.this("viewport"),vert:"\n			precision highp float;\n			attribute float width, charOffset, char;\n			attribute vec2 position;\n			uniform float fontSize, charStep, em, align, baseline;\n			uniform vec4 viewport;\n			uniform vec4 color;\n			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n			varying vec4 fontColor;\n			void main () {\n				vec2 offset = floor(em * (vec2(align + charOffset, baseline)\n					+ vec2(positionOffset.x, -positionOffset.y)))\n					/ (viewport.zw * scale.xy);\n\n				vec2 position = (position + translate) * scale;\n				position += offset * scale;\n\n				charCoord = position * viewport.zw + viewport.xy;\n\n				gl_Position = vec4(position * 2. - 1., 0, 1);\n\n				gl_PointSize = charStep;\n\n				charId.x = mod(char, atlasDim.x);\n				charId.y = floor(char / atlasDim.x);\n\n				charWidth = width * em;\n\n				fontColor = color / 255.;\n			}",frag:"\n			precision highp float;\n			uniform float fontSize, charStep, opacity;\n			uniform vec2 atlasSize;\n			uniform vec4 viewport;\n			uniform sampler2D atlas;\n			varying vec4 fontColor;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n\n			float lightness(vec4 color) {\n				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n			}\n\n			void main () {\n				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n				float halfCharStep = floor(charStep * .5 + .5);\n\n				// invert y and shift by 1px (FF expecially needs that)\n				uv.y = charStep - uv.y;\n\n				// ignore points outside of character bounding box\n				float halfCharWidth = ceil(charWidth * .5);\n				if (floor(uv.x) > halfCharStep + halfCharWidth ||\n					floor(uv.x) < halfCharStep - halfCharWidth) return;\n\n				uv += charId * charStep;\n				uv = uv / atlasSize;\n\n				vec4 color = fontColor;\n				vec4 mask = texture2D(atlas, uv);\n\n				float maskY = lightness(mask);\n				// float colorY = lightness(color);\n				color.a *= maskY;\n				color.a *= opacity;\n\n				// color.a += .1;\n\n				// antialiasing, see yiq color space y-channel formula\n				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n				gl_FragColor = color;\n			}"});return{regl:r,draw:n,atlas:{}}},k.prototype.update=function(r){var n,i=this;if("string"==typeof r)r={text:r};else if(!r)return;null!=(r=o(r,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(r.opacity)?this.opacity=r.opacity.map(function(r){return parseFloat(r)}):this.opacity=parseFloat(r.opacity)),null!=r.viewport&&(this.viewport=p(r.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=r.kerning&&(this.kerning=r.kerning),null!=r.offset&&("number"==typeof r.offset&&(r.offset=[r.offset,0]),this.positionOffset=b(r.offset)),r.direction&&(this.direction=r.direction),r.range&&(this.range=r.range,this.scale=[1/(r.range[2]-r.range[0]),1/(r.range[3]-r.range[1])],this.translate=[-r.range[0],-r.range[1]]),r.scale&&(this.scale=r.scale),r.translate&&(this.translate=r.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||r.font||(r.font=k.baseFontSize+"px sans-serif");var s,l=!1,c=!1;if(r.font&&(Array.isArray(r.font)?r.font:[r.font]).forEach(function(r,n){if("string"==typeof r)try{r=a.parse(r)}catch(n){r=a.parse(k.baseFontSize+"px "+r)}else{var o=r.style,s=r.weight,u=r.stretch,f=r.variant;r=a.parse(a.stringify(r)),o&&(r.style=o),s&&(r.weight=s),u&&(r.stretch=u),f&&(r.variant=f)}var h=a.stringify({size:k.baseFontSize,family:r.family,stretch:T?r.stretch:void 0,variant:r.variant,weight:r.weight,style:r.style}),p=y(r.size),d=Math.round(p[0]*g(p[1]));if(d!==i.fontSize[n]&&(c=!0,i.fontSize[n]=d),!(i.font[n]&&h==i.font[n].baseString||(l=!0,i.font[n]=k.fonts[h],i.font[n]))){var v=r.family.join(", "),m=[r.style];r.style!=r.variant&&m.push(r.variant),r.variant!=r.weight&&m.push(r.weight),T&&r.weight!=r.stretch&&m.push(r.stretch),i.font[n]={baseString:h,family:v,weight:r.weight,stretch:r.stretch,style:r.style,variant:r.variant,width:{},kerning:{},metrics:x(v,{origin:"top",fontSize:k.baseFontSize,fontStyle:m.join(" ")})},k.fonts[h]=i.font[n]}}),(l||c)&&this.font.forEach(function(n,o){var s=a.stringify({size:i.fontSize[o],family:n.family,stretch:T?n.stretch:void 0,variant:n.variant,weight:n.weight,style:n.style});if(i.fontAtlas[o]=i.shader.atlas[s],!i.fontAtlas[o]){var l=n.metrics;i.shader.atlas[s]=i.fontAtlas[o]={fontString:s,step:2*Math.ceil(i.fontSize[o]*l.bottom*.5),em:i.fontSize[o],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:i.regl.texture()}}null==r.text&&(r.text=i.text)}),"string"==typeof r.text&&r.position&&r.position.length>2){for(var d=Array(.5*r.position.length),w=0;w<d.length;w++)d[w]=r.text;r.text=d}if(null!=r.text||l){if(this.textOffsets=[0],Array.isArray(r.text)){this.count=r.text[0].length,this.counts=[this.count];for(var A=1;A<r.text.length;A++)this.textOffsets[A]=this.textOffsets[A-1]+r.text[A-1].length,this.count+=r.text[A].length,this.counts.push(r.text[A].length);this.text=r.text.join("")}else this.text=r.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(r,n){k.atlasContext.font=r.baseString;for(var a=i.fontAtlas[n],o=0;o<i.text.length;o++){var l=i.text.charAt(o);if(null==a.ids[l]&&(a.ids[l]=a.chars.length,a.chars.push(l),s.push(l)),null==r.width[l]&&(r.width[l]=k.atlasContext.measureText(l).width/k.baseFontSize,i.kerning)){var c=[];for(var u in r.width)c.push(u+l,l+u);m(r.kerning,v(r.family,{pairs:c}))}}})}if(r.position){if(r.position.length>2){for(var M=!r.position[0].length,S=h.mallocFloat(2*this.count),E=0,I=0;E<this.counts.length;E++){var L=this.counts[E];if(M)for(var C=0;C<L;C++)S[I++]=r.position[2*E],S[I++]=r.position[2*E+1];else for(var O=0;O<L;O++)S[I++]=r.position[E][0],S[I++]=r.position[E][1]}this.position.call?this.position({type:"float",data:S}):this.position=this.regl.buffer({type:"float",data:S}),h.freeFloat(S)}else this.position.destroy&&this.position.destroy(),this.position={constant:r.position}}if(r.text||l){var D=h.mallocUint8(this.count),P=h.mallocFloat(2*this.count);this.textWidth=[];for(var B=0,R=0;B<this.counts.length;B++){for(var z=this.counts[B],F=this.font[B]||this.font[0],N=this.fontAtlas[B]||this.fontAtlas[0],U=0;U<z;U++){var j=this.text.charAt(R),V=this.text.charAt(R-1);if(D[R]=N.ids[j],P[2*R]=F.width[j],U){var H=P[2*R-2],q=P[2*R],G=P[2*R-1]+.5*H+.5*q;if(this.kerning){var W=F.kerning[V+j];W&&(G+=.001*W)}P[2*R+1]=G}else P[2*R+1]=.5*P[2*R];R++}this.textWidth.push(P.length?.5*P[2*R-2]+P[2*R-1]:0)}r.align||(r.align=this.align),this.charBuffer({data:D,type:"uint8",usage:"stream"}),this.sizeBuffer({data:P,type:"float",usage:"stream"}),h.freeUint8(D),h.freeFloat(P),s.length&&this.font.forEach(function(r,n){var a=i.fontAtlas[n],o=a.step,s=Math.min(Math.floor(k.maxAtlasSize/o),a.chars.length),l=Math.ceil(a.chars.length/s),c=_(s*o),u=_(l*o);a.width=c,a.height=u,a.rows=l,a.cols=s,a.em&&a.texture({data:f({canvas:k.atlasCanvas,font:a.fontString,chars:a.chars,shape:[c,u],step:[o,o]})})})}if(r.align&&(this.align=r.align,this.alignOffset=this.textWidth.map(function(r,n){var a=Array.isArray(i.align)?i.align.length>1?i.align[n]:i.align[0]:i.align;if("number"==typeof a)return a;switch(a){case"right":case"end":return-r;case"center":case"centre":case"middle":return-(.5*r)}return 0})),null==this.baseline&&null==r.baseline&&(r.baseline=0),null!=r.baseline&&(this.baseline=r.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(r,n){var a=(i.font[n]||i.font[0]).metrics;return -1*(0+(.5*a.bottom+("number"==typeof r?r-a.baseline:-a[r])))})),null!=r.color){if(r.color||(r.color="transparent"),"string"!=typeof r.color&&isNaN(r.color)){if("number"==typeof r.color[0]&&r.color.length>this.counts.length){var Y=r.color.length;n=h.mallocUint8(Y);for(var Z=(r.color.subarray||r.color.slice).bind(r.color),X=0;X<Y;X+=4)n.set(u(Z(X,X+4),"uint8"),X)}else{var K=r.color.length;n=h.mallocUint8(4*K);for(var J=0;J<K;J++)n.set(u(r.color[J]||0,"uint8"),4*J)}this.color=n}else this.color=u(r.color,"uint8")}if(r.position||r.text||r.color||r.baseline||r.align||r.font||r.offset||r.opacity){if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var $=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array($);for(var Q=0;Q<this.batch.length;Q++)this.batch[Q]={count:this.counts.length>1?this.counts[Q]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Q]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Q,4*Q+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Q]:this.opacity,baseline:null!=this.baselineOffset[Q]?this.baselineOffset[Q]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[Q]?this.alignOffset[Q]:this.alignOffset[0]:0,atlas:this.fontAtlas[Q]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Q,2*Q+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={},r.exports=k},55212:function(r,n,i){var a=i(55616);function o(r){if(r.container){if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*i.g.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*i.g.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}}function s(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function l(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}r.exports=function(r){if(r?"string"==typeof r&&(r={container:r}):r={},(r=s(r)||"string"==typeof(n=r).nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect?{container:r}:"function"==typeof(c=r).drawArrays||"function"==typeof c.drawElements?{gl:r}:a(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=i.g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var n,c,u=document.querySelector(r.container);if(!u)throw Error("Element "+r.container+" is not found");r.container=u}s(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=l(),r.container.appendChild(r.canvas),o(r))}else if(!r.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=l(),r.container.appendChild(r.canvas),o(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{r.gl=r.canvas.getContext(n,r.attrs)}catch(r){}return r.gl}),r.gl}},26444:function(r){r.exports=function(r){"string"==typeof r&&(r=[r]);for(var n=[].slice.call(arguments,1),i=[],a=0;a<r.length-1;a++)i.push(r[a],n[a]||"");return i.push(r[a]),i.join("")}},2304:function(r,n,i){var a=i(53664)("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch(r){a=null}r.exports=a},52264:function(r,n,i){var a,o=i(24200);a="function"==typeof i.g.matchMedia?!i.g.matchMedia("(hover: none)").matches:o,r.exports=a},89184:function(r,n,i){var a=i(24200);r.exports=a&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(n){r=!1}return r}()},39640:function(r,n,i){var a=i(53664)("%Object.defineProperty%",!0),o=function(){if(a)try{return a({},"a",{value:1}),!0}catch(r){}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==a([],"length",{value:1}).length}catch(r){return!0}},r.exports=o},69572:function(r){var n={foo:{}},i=Object;r.exports=function(){return({__proto__:n}).foo===n.foo&&!(({__proto__:null})instanceof i)}},71080:function(r,n,i){var a="undefined"!=typeof Symbol&&Symbol,o=i(89320);r.exports=function(){return"function"==typeof a&&"function"==typeof Symbol&&"symbol"==typeof a("foo")&&"symbol"==typeof Symbol("bar")&&o()}},89320:function(r){r.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var r={},n=Symbol("test"),i=Object(n);if("string"==typeof n||"[object Symbol]"!==Object.prototype.toString.call(n)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(n in r[n]=42,r)return!1;if("function"==typeof Object.keys&&0!==Object.keys(r).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(r).length)return!1;var a=Object.getOwnPropertySymbols(r);if(1!==a.length||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(r,n);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},46672:function(r,n,i){var a=i(89320);r.exports=function(){return a()&&!!Symbol.toStringTag}},92064:function(r,n,i){var a=Function.prototype.call,o=Object.prototype.hasOwnProperty,s=i(8844);r.exports=s.call(a,o)},35984:function(r,n){n.read=function(r,n,i,a,o){var s,l,c=8*o-a-1,u=(1<<c)-1,f=u>>1,h=-7,p=i?o-1:0,d=i?-1:1,y=r[n+p];for(p+=d,s=y&(1<<-h)-1,y>>=-h,h+=c;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===u)return l?NaN:1/0*(y?-1:1);l+=Math.pow(2,a),s-=f}return(y?-1:1)*l*Math.pow(2,s-a)},n.write=function(r,n,i,a,o,s){var l,c,u,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,y=a?0:s-1,g=a?1:-1,v=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(c=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-l))<1&&(l--,u*=2),(n+=l+p>=1?d/u:d*Math.pow(2,1-p))*u>=2&&(l++,u/=2),l+p>=h?(c=0,l=h):l+p>=1?(c=(n*u-1)*Math.pow(2,o),l+=p):(c=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+y]=255&c,y+=g,c/=256,o-=8);for(l=l<<o|c,f+=o;f>0;r[i+y]=255&l,y+=g,l/=256,f-=8);r[i+y-g]|=128*v}},6768:function(r){"function"==typeof Object.create?r.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}},91148:function(r,n,i){var a=i(46672)(),o=i(99676)("Object.prototype.toString"),s=function(r){return!(a&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===o(r)},l=function(r){return!!s(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==o(r)&&"[object Function]"===o(r.callee)},c=function(){return s(arguments)}();s.isLegacyArguments=l,r.exports=c?s:l},24200:function(r){r.exports=!0},90720:function(r){var n,i,a=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw i}}),i={},o(function(){throw 42},null,n)}catch(r){r!==i&&(o=null)}else o=null;var s=/^\s*class\b/,l=function(r){try{var n=a.call(r);return s.test(n)}catch(r){return!1}},c=function(r){try{return!l(r)&&(a.call(r),!0)}catch(r){return!1}},u=Object.prototype.toString,f="function"==typeof Symbol&&!!Symbol.toStringTag,h=!(0 in[,]),p=function(){return!1};if("object"==typeof document){var d=document.all;u.call(d)===u.call(document.all)&&(p=function(r){if((h||!r)&&(void 0===r||"object"==typeof r))try{var n=u.call(r);return("[object HTMLAllCollection]"===n||"[object HTML document.all class]"===n||"[object HTMLCollection]"===n||"[object Object]"===n)&&null==r("")}catch(r){}return!1})}r.exports=o?function(r){if(p(r))return!0;if(!r||"function"!=typeof r&&"object"!=typeof r)return!1;try{o(r,null,n)}catch(r){if(r!==i)return!1}return!l(r)&&c(r)}:function(r){if(p(r))return!0;if(!r||"function"!=typeof r&&"object"!=typeof r)return!1;if(f)return c(r);if(l(r))return!1;var n=u.call(r);return!("[object Function]"!==n&&"[object GeneratorFunction]"!==n&&!/^\[object HTML/.test(n))&&c(r)}},84420:function(r,n,i){var a,o=Object.prototype.toString,s=Function.prototype.toString,l=/^\s*(?:function)?\*/,c=i(46672)(),u=Object.getPrototypeOf;r.exports=function(r){if("function"!=typeof r)return!1;if(l.test(s.call(r)))return!0;if(!c)return"[object GeneratorFunction]"===o.call(r);if(!u)return!1;if(void 0===a){var n=function(){if(!c)return!1;try{return Function("return function*() {}")()}catch(r){}}();a=!!n&&u(n)}return u(r)===a}},96604:function(r){r.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(r){r.exports=function(r){return r!=r}},1560:function(r,n,i){var a=i(57916),o=i(81288),s=i(85992),l=i(57740),c=i(59736),u=a(l(),Number);o(u,{getPolyfill:l,implementation:s,shim:c}),r.exports=u},57740:function(r,n,i){var a=i(85992);r.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:a}},59736:function(r,n,i){var a=i(81288),o=i(57740);r.exports=function(){var r=o();return a(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r}},18400:function(r){r.exports=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)}},58908:function(r){var n=Object.prototype.toString;r.exports=function(r){var i;return"[object Object]"===n.call(r)&&(null===(i=Object.getPrototypeOf(r))||i===Object.getPrototypeOf({}))}},94576:function(r){r.exports=function(r){for(var n,i=r.length,a=0;a<i;a++)if(((n=r.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},53520:function(r){r.exports=function(r){return"string"==typeof r&&(r=r.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&r.length>4))}},7728:function(r,n,i){var a=i(46492),o=i(63436),s=i(99676),l=s("Object.prototype.toString"),c=i(46672)(),u=i(2304),f="undefined"==typeof globalThis?i.g:globalThis,h=o(),p=s("Array.prototype.indexOf",!0)||function(r,n){for(var i=0;i<r.length;i+=1)if(r[i]===n)return i;return -1},d=s("String.prototype.slice"),y={},g=Object.getPrototypeOf;c&&u&&g&&a(h,function(r){var n=new f[r];if(Symbol.toStringTag in n){var i=g(n),a=u(i,Symbol.toStringTag);a||(a=u(g(i),Symbol.toStringTag)),y[r]=a.get}}),r.exports=function(r){var n;return!!r&&"object"==typeof r&&(c&&Symbol.toStringTag in r?!!u&&(n=!1,a(y,function(i,a){if(!n)try{n=i.call(r)===a}catch(r){}}),n):p(h,d(l(r),8,-1))>-1)}},76244:function(r){r.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},62644:function(r,n,i){r.exports=function(r,n){n||(n=r,r=window);var i=0,o=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function u(r){var n=!1;return"altKey"in r&&(n=n||r.altKey!==l.alt,l.alt=!!r.altKey),"shiftKey"in r&&(n=n||r.shiftKey!==l.shift,l.shift=!!r.shiftKey),"ctrlKey"in r&&(n=n||r.ctrlKey!==l.control,l.control=!!r.ctrlKey),"metaKey"in r&&(n=n||r.metaKey!==l.meta,l.meta=!!r.metaKey),n}function f(r,c){var f=a.x(c),h=a.y(c);"buttons"in c&&(r=0|c.buttons),(r!==i||f!==o||h!==s||u(c))&&(i=0|r,o=f||0,s=h||0,n&&n(i,o,s,l))}function h(r){f(0,r)}function p(){(i||o||s||l.shift||l.alt||l.meta||l.control)&&(o=s=0,i=0,l.shift=l.alt=l.control=l.meta=!1,n&&n(0,0,0,l))}function d(r){u(r)&&n&&n(i,o,s,l)}function y(r){0===a.buttons(r)?f(0,r):f(i,r)}function g(r){f(i|a.buttons(r),r)}function v(r){f(i&~a.buttons(r),r)}function m(){c||(c=!0,r.addEventListener("mousemove",y),r.addEventListener("mousedown",g),r.addEventListener("mouseup",v),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",p),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var x={element:r};return Object.defineProperties(x,{enabled:{get:function(){return c},set:function(n){n?m():c&&(c=!1,r.removeEventListener("mousemove",y),r.removeEventListener("mousedown",g),r.removeEventListener("mouseup",v),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",p),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),x};var a=i(93784)},29128:function(r){var n={left:0,top:0};r.exports=function(r,i,a){i=i||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var o,s=r.clientX||0,l=r.clientY||0,c=(o=i)===window||o===document||o===document.body?n:o.getBoundingClientRect();return a[0]=s-c.left,a[1]=l-c.top,a}},93784:function(r,n){function i(r){return r.target||r.srcElement||window}n.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},n.element=i,n.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=i(r).getBoundingClientRect();return r.clientX-n.left}return 0},n.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=i(r).getBoundingClientRect();return r.clientY-n.top}return 0}},97264:function(r,n,i){var a=i(23464);r.exports=function(r,n,i){"function"==typeof r&&(i=!!n,n=r,r=window);var o=a("ex",r),s=function(r){i&&r.preventDefault();var a=r.deltaX||0,s=r.deltaY||0,l=r.deltaZ||0,c=1;switch(r.deltaMode){case 1:c=o;break;case 2:c=window.innerHeight}if(s*=c,l*=c,(a*=c)||s||l)return n(a,s,l,r)};return r.addEventListener("wheel",s),s}},88324:function(r,n,i){var a,o,s;o="Promise",(s=void 0!==i.g?i.g:this)[o]=s[o]||function(){var r,n,i,a=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(r){return setImmediate(r)}:setTimeout;try{Object.defineProperty({},"x",{}),r=function(r,n,i,a){return Object.defineProperty(r,n,{value:i,writable:!0,configurable:!1!==a})}}catch(n){r=function(r,n,i){return r[n]=i,r}}function s(r,a){i.add(r,a),n||(n=o(i.drain))}function l(r){var n,i=typeof r;return null==r||"object"!=i&&"function"!=i||(n=r.then),"function"==typeof n&&n}function c(){for(var r=0;r<this.chain.length;r++)(function(r,n,i){var a,o;try{!1===n?i.reject(r.msg):(a=!0===n?r.msg:n.call(void 0,r.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(o=l(a))?o.call(a,i.resolve,i.reject):i.resolve(a)}catch(r){i.reject(r)}})(this,1===this.state?this.chain[r].success:this.chain[r].failure,this.chain[r]);this.chain.length=0}function u(r){var n,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(n=l(r))?s(function(){var a=new p(i);try{n.call(r,function(){u.apply(a,arguments)},function(){f.apply(a,arguments)})}catch(r){f.call(a,r)}}):(i.msg=r,i.state=1,i.chain.length>0&&s(c,i))}catch(r){f.call(new p(i),r)}}}function f(r){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=r,n.state=2,n.chain.length>0&&s(c,n))}function h(r,n,i,a){for(var o=0;o<n.length;o++)!function(o){r.resolve(n[o]).then(function(r){i(o,r)},a)}(o)}function p(r){this.def=r,this.triggered=!1}function d(r){this.promise=r,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function y(r){if("function"!=typeof r)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new d(this);this.then=function(r,i){var a={success:"function"!=typeof r||r,failure:"function"==typeof i&&i};return a.promise=new this.constructor(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");a.resolve=r,a.reject=n}),n.chain.push(a),0!==n.state&&s(c,n),a.promise},this.catch=function(r){return this.then(void 0,r)};try{r.call(void 0,function(r){u.call(n,r)},function(r){f.call(n,r)})}catch(r){f.call(n,r)}}i=function(){var r,i,a;function o(r,n){this.fn=r,this.self=n,this.next=void 0}return{add:function(n,s){a=new o(n,s),i?i.next=a:r=a,i=a,a=void 0},drain:function(){var a=r;for(r=i=n=void 0;a;)a.fn.call(a.self),a=a.next}}}();var g=r({},"constructor",y,!1);return y.prototype=g,r(g,"__NPO__",0,!1),r(y,"resolve",function(r){return r&&"object"==typeof r&&1===r.__NPO__?r:new this(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");n(r)})}),r(y,"reject",function(r){return new this(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");i(r)})}),r(y,"all",function(r){var n=this;return"[object Array]"!=a.call(r)?n.reject(TypeError("Not an array")):0===r.length?n.resolve([]):new n(function(i,a){if("function"!=typeof i||"function"!=typeof a)throw TypeError("Not a function");var o=r.length,s=Array(o),l=0;h(n,r,function(r,n){s[r]=n,++l===o&&i(s)},a)})}),r(y,"race",function(r){var n=this;return"[object Array]"!=a.call(r)?n.reject(TypeError("Not an array")):new n(function(i,a){if("function"!=typeof i||"function"!=typeof a)throw TypeError("Not a function");h(n,r,function(r,n){i(n)},a)})}),y}(),r.exports?r.exports=s[o]:void 0===(a=(function(){return s[o]}).call(n,i,n,r))||(r.exports=a)},48816:function(r){var n=Math.PI,i=n/180*120;function a(r,n,i,a){return["C",r,n,i,a,i,a]}function o(r,n,i,a,o,s){return["C",r/3+2/3*i,n/3+2/3*a,o/3+2/3*i,s/3+2/3*a,o,s]}function s(r,n,i){return{x:r*Math.cos(i)-n*Math.sin(i),y:r*Math.sin(i)+n*Math.cos(i)}}r.exports=function(r){for(var l,c=[],u=0,f=0,h=0,p=0,d=null,y=null,g=0,v=0,m=0,x=r.length;m<x;m++){var b=r[m],_=b[0];switch(_){case"M":h=b[1],p=b[2];break;case"A":(b=function r(a,o,l,c,u,f,h,p,d,y){if(y)k=y[0],M=y[1],T=y[2],A=y[3];else{var g=s(a,o,-u);a=g.x,o=g.y;var v=(a-(p=(g=s(p,d,-u)).x))/2,m=(o-(d=g.y))/2,x=v*v/(l*l)+m*m/(c*c);x>1&&(l*=x=Math.sqrt(x),c*=x);var b=l*l,_=c*c,w=(f==h?-1:1)*Math.sqrt(Math.abs((b*_-b*m*m-_*v*v)/(b*m*m+_*v*v)));w==1/0&&(w=1);var T=w*l*m/c+(a+p)/2,A=-(w*c)*v/l+(o+d)/2,k=Math.asin(((o-A)/c).toFixed(9)),M=Math.asin(((d-A)/c).toFixed(9));(k=a<T?n-k:k)<0&&(k=2*n+k),(M=p<T?n-M:M)<0&&(M=2*n+M),h&&k>M&&(k-=2*n),!h&&M>k&&(M-=2*n)}if(Math.abs(M-k)>i)var S=M,E=p,I=d,L=r(p=T+l*Math.cos(M=k+i*(h&&M>k?1:-1)),d=A+c*Math.sin(M),l,c,u,0,h,E,I,[M,S,T,A]);var C=Math.tan((M-k)/4),O=4/3*l*C,D=4/3*c*C,P=[2*a-(a+O*Math.sin(k)),2*o-(o-D*Math.cos(k)),p+O*Math.sin(M),d-D*Math.cos(M),p,d];if(y)return P;L&&(P=P.concat(L));for(var B=0;B<P.length;){var R=s(P[B],P[B+1],u);P[B++]=R.x,P[B++]=R.y}return P}(g,v,b[1],b[2],n/180*b[3],b[4],b[5],b[6],b[7])).unshift("C"),b.length>7&&(c.push(b.splice(0,7)),b.unshift("C"));break;case"S":var w=g,T=v;"C"!=l&&"S"!=l||(w+=w-u,T+=T-f),b=["C",w,T,b[1],b[2],b[3],b[4]];break;case"T":"Q"==l||"T"==l?(d=2*g-d,y=2*v-y):(d=g,y=v),b=o(g,v,d,y,b[1],b[2]);break;case"Q":d=b[1],y=b[2],b=o(g,v,b[1],b[2],b[3],b[4]);break;case"L":b=a(g,v,b[1],b[2]);break;case"H":b=a(g,v,b[1],v);break;case"V":b=a(g,v,g,b[1]);break;case"Z":b=a(g,v,h,p)}l=_,g=b[b.length-2],v=b[b.length-1],b.length>4?(u=b[b.length-4],f=b[b.length-3]):(u=g,f=v),c.push(b)}return c}},50896:function(r){var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;r.exports=!function(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return!1}}()?function(r,o){for(var s,l,c=function(r){if(null==r)throw TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(r),u=1;u<arguments.length;u++){for(var f in s=Object(arguments[u]))i.call(s,f)&&(c[f]=s[f]);if(n){l=n(s);for(var h=0;h<l.length;h++)a.call(s,l[h])&&(c[l[h]]=s[l[h]])}}return c}:Object.assign},76835:function(r){var n=function(r){return r!=r};r.exports=function(r,i){return 0===r&&0===i?1/r==1/i:r===i||!(!n(r)||!n(i))}},39896:function(r,n,i){var a=i(81288),o=i(57916),s=i(76835),l=i(66148),c=i(16408),u=o(l(),Object);a(u,{getPolyfill:l,implementation:s,shim:c}),r.exports=u},66148:function(r,n,i){var a=i(76835);r.exports=function(){return"function"==typeof Object.is?Object.is:a}},16408:function(r,n,i){var a=i(66148),o=i(81288);r.exports=function(){var r=a();return o(Object,{is:r},{is:function(){return Object.is!==r}}),r}},32764:function(r,n,i){var a;if(!Object.keys){var o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,l=i(97344),c=Object.prototype.propertyIsEnumerable,u=!c.call({toString:null},"toString"),f=c.call(function(){},"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(r){var n=r.constructor;return n&&n.prototype===r},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if("undefined"==typeof window)return!1;for(var r in window)try{if(!d["$"+r]&&o.call(window,r)&&null!==window[r]&&"object"==typeof window[r])try{p(window[r])}catch(r){return!0}}catch(r){return!0}return!1}();a=function(r){var n=null!==r&&"object"==typeof r,i="[object Function]"===s.call(r),a=l(r),c=n&&"[object String]"===s.call(r),d=[];if(!n&&!i&&!a)throw TypeError("Object.keys called on a non-object");var g=f&&i;if(c&&r.length>0&&!o.call(r,0))for(var v=0;v<r.length;++v)d.push(String(v));if(a&&r.length>0)for(var m=0;m<r.length;++m)d.push(String(m));else for(var x in r)g&&"prototype"===x||!o.call(r,x)||d.push(String(x));if(u)for(var b=function(r){if("undefined"==typeof window||!y)return p(r);try{return p(r)}catch(r){return!1}}(r),_=0;_<h.length;++_)b&&"constructor"===h[_]||!o.call(r,h[_])||d.push(h[_]);return d}}r.exports=a},41820:function(r,n,i){var a=Array.prototype.slice,o=i(97344),s=Object.keys,l=s?function(r){return s(r)}:i(32764),c=Object.keys;l.shim=function(){return Object.keys?function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2)||(Object.keys=function(r){return o(r)?c(a.call(r)):c(r)}):Object.keys=l,Object.keys||l},r.exports=l},97344:function(r){var n=Object.prototype.toString;r.exports=function(r){var i=n.call(r),a="[object Arguments]"===i;return a||(a="[object Array]"!==i&&null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Function]"===n.call(r.callee)),a}},32868:function(r){function n(r,n){if("string"!=typeof r)return[r];var i=[r];"string"==typeof n||Array.isArray(n)?n={brackets:n}:n||(n={});var a=n.brackets?Array.isArray(n.brackets)?n.brackets:[n.brackets]:["{}","[]","()"],o=n.escape||"___",s=!!n.flat;a.forEach(function(r){var n=new RegExp(["\\",r[0],"[^\\",r[0],"\\",r[1],"]*\\",r[1]].join("")),a=[];function s(n,s,l){var c=i.push(n.slice(r[0].length,-r[1].length))-1;return a.push(c),o+c+o}i.forEach(function(r,a){for(var o,l=0;r!=o;)if(o=r,r=r.replace(n,s),l++>1e4)throw Error("References have circular dependency. Please, check them.");i[a]=r}),a=a.reverse(),i=i.map(function(n){return a.forEach(function(i){n=n.replace(RegExp("(\\"+o+i+"\\"+o+")","g"),r[0]+"$1"+r[1])}),n})});var l=RegExp("\\"+o+"([0-9]+)\\"+o);return s?i:function r(n,i,a){for(var o,s=[],c=0;o=l.exec(n);){if(c++>1e4)throw Error("Circular references in parenthesis");s.push(n.slice(0,o.index)),s.push(r(i[o[1]],i)),n=n.slice(o.index+o[0].length)}return s.push(n),s}(i[0],i)}function i(r,n){if(n&&n.flat){var i,a=n&&n.escape||"___",o=r[0];if(!o)return"";for(var s=RegExp("\\"+a+"([0-9]+)\\"+a),l=0;o!=i;){if(l++>1e4)throw Error("Circular references in "+r);i=o,o=o.replace(s,c)}return o}return r.reduce(function r(n,i){return Array.isArray(i)&&(i=i.reduce(r,"")),n+i},"");function c(n,i){if(null==r[i])throw Error("Reference "+i+"is undefined");return r[i]}}function a(r,a){return Array.isArray(r)?i(r,a):n(r,a)}a.parse=n,a.stringify=i,r.exports=a},51160:function(r,n,i){var a=i(55616);r.exports=function(r){var n;return arguments.length>1&&(r=arguments),"string"==typeof r?r=r.split(/\s/).map(parseFloat):"number"==typeof r&&(r=[r]),r.length&&"number"==typeof r[0]?n=1===r.length?{width:r[0],height:r[0],x:0,y:0}:2===r.length?{width:r[0],height:r[1],x:0,y:0}:{x:r[0],y:r[1],width:r[2]-r[0]||0,height:r[3]-r[1]||0}:r&&(n={x:(r=a(r,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:r.top||0},null==r.width?r.right?n.width=r.right-n.x:n.width=0:n.width=r.width,null==r.height?r.bottom?n.height=r.bottom-n.y:n.height=0:n.height=r.height),n}},21984:function(r){r.exports=function(r){var o=[];return r.replace(i,function(r,i,s){var l,c=i.toLowerCase();for(s=(l=s.match(a))?l.map(Number):[],"m"==c&&s.length>2&&(o.push([i].concat(s.splice(0,2))),c="l",i="m"==i?"l":"L");;){if(s.length==n[c])return s.unshift(i),o.push(s);if(s.length<n[c])throw Error("malformed path data");o.push([i].concat(s.splice(0,n[c])))}}),o};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(r){r.exports=function(r,n){n||(n=[0,""]);var i=parseFloat(r=String(r),10);return n[0]=i,n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},41984:function(r,n,i){var a=i(4168);(function(){var n,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?r.exports=function(){return performance.now()}:null!=a&&a.hrtime?(r.exports=function(){return(n()-s)/1e6},i=a.hrtime,s=(n=function(){var r;return 1e9*(r=i())[0]+r[1]})()-1e9*a.uptime()):Date.now?(r.exports=function(){return Date.now()-o},o=Date.now()):(r.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)},55616:function(r){r.exports=function(r,n,a){var o,s,l={};if("string"==typeof n&&(n=i(n)),Array.isArray(n)){var c={};for(s=0;s<n.length;s++)c[n[s]]=!0;n=c}for(o in n)n[o]=i(n[o]);var u={};for(o in n){var f=n[o];if(Array.isArray(f))for(s=0;s<f.length;s++){var h=f[s];if(a&&(u[h]=!0),h in r){if(l[o]=r[h],a)for(var p=s;p<f.length;p++)u[f[p]]=!0;break}}else o in r&&(n[o]&&(l[o]=r[o]),a&&(u[o]=!0))}if(a)for(o in r)u[o]||(l[o]=r[o]);return l};var n={};function i(r){return n[r]?n[r]:("string"==typeof r&&(r=n[r]=r.split(/\s*,\s*|\s+/)),r)}},61456:function(r){r.exports=function(r,n,i,a){var o=r[0],s=r[1],l=!1;void 0===i&&(i=0),void 0===a&&(a=n.length);for(var c=a-i,u=0,f=c-1;u<c;f=u++){var h=n[u+i][0],p=n[u+i][1],d=n[f+i][0],y=n[f+i][1];p>s!=y>s&&o<(d-h)*(s-p)/(y-p)+h&&(l=!l)}return l}},14756:function(r,n,i){var a,o=i(7688),s=i(28648),l=i(72200),c=i(11403),u=i(82368),f=i(17792),h=!1,p=s();function d(r,n,i){var o=a.segments(r),s=a.segments(n),l=i(a.combine(o,s));return a.polygon(l)}a={buildLog:function(r){return!0===r?h=o():!1===r&&(h=!1),!1!==h&&h.list},epsilon:function(r){return p.epsilon(r)},segments:function(r){var n=l(!0,p,h);return r.regions.forEach(n.addRegion),{segments:n.calculate(r.inverted),inverted:r.inverted}},combine:function(r,n){return{combined:l(!1,p,h).calculate(r.segments,r.inverted,n.segments,n.inverted),inverted1:r.inverted,inverted2:n.inverted}},selectUnion:function(r){return{segments:u.union(r.combined,h),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:u.intersect(r.combined,h),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:u.difference(r.combined,h),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:u.differenceRev(r.combined,h),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:u.xor(r.combined,h),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:c(r.segments,p,h),inverted:r.inverted}},polygonFromGeoJSON:function(r){return f.toPolygon(a,r)},polygonToGeoJSON:function(r){return f.fromPolygon(a,p,r)},union:function(r,n){return d(r,n,a.selectUnion)},intersect:function(r,n){return d(r,n,a.selectIntersect)},difference:function(r,n){return d(r,n,a.selectDifference)},differenceRev:function(r,n){return d(r,n,a.selectDifferenceRev)},xor:function(r,n){return d(r,n,a.selectXor)}},"object"==typeof window&&(window.PolyBool=a),r.exports=a},7688:function(r){r.exports=function(){var r,n=0,i=!1;function a(n,i){return r.list.push({type:n,data:i?JSON.parse(JSON.stringify(i)):void 0}),r}return r={list:[],segmentId:function(){return n++},checkIntersection:function(r,n){return a("check",{seg1:r,seg2:n})},segmentChop:function(r,n){return a("div_seg",{seg:r,pt:n}),a("chop",{seg:r,pt:n})},statusRemove:function(r){return a("pop_seg",{seg:r})},segmentUpdate:function(r){return a("seg_update",{seg:r})},segmentNew:function(r,n){return a("new_seg",{seg:r,primary:n})},segmentRemove:function(r){return a("rem_seg",{seg:r})},tempStatus:function(r,n,i){return a("temp_status",{seg:r,above:n,below:i})},rewind:function(r){return a("rewind",{seg:r})},status:function(r,n,i){return a("status",{seg:r,above:n,below:i})},vert:function(n){return n===i?r:(i=n,a("vert",{x:n}))},log:function(r){return"string"!=typeof r&&(r=JSON.stringify(r,!1,"  ")),a("log",{txt:r})},reset:function(){return a("reset")},selected:function(r){return a("selected",{segs:r})},chainStart:function(r){return a("chain_start",{seg:r})},chainRemoveHead:function(r,n){return a("chain_rem_head",{index:r,pt:n})},chainRemoveTail:function(r,n){return a("chain_rem_tail",{index:r,pt:n})},chainNew:function(r,n){return a("chain_new",{pt1:r,pt2:n})},chainMatch:function(r){return a("chain_match",{index:r})},chainClose:function(r){return a("chain_close",{index:r})},chainAddHead:function(r,n){return a("chain_add_head",{index:r,pt:n})},chainAddTail:function(r,n){return a("chain_add_tail",{index:r,pt:n})},chainConnect:function(r,n){return a("chain_con",{index1:r,index2:n})},chainReverse:function(r){return a("chain_rev",{index:r})},chainJoin:function(r,n){return a("chain_join",{index1:r,index2:n})},done:function(){return a("done")}}}},28648:function(r){r.exports=function(r){"number"!=typeof r&&(r=1e-10);var n={epsilon:function(n){return"number"==typeof n&&(r=n),r},pointAboveOrOnLine:function(n,i,a){var o=i[0],s=i[1],l=a[0],c=a[1],u=n[0];return(l-o)*(n[1]-s)-(c-s)*(u-o)>=-r},pointBetween:function(n,i,a){var o=n[1]-i[1],s=a[0]-i[0],l=n[0]-i[0],c=a[1]-i[1],u=l*s+o*c;return!(u<r||u-(s*s+c*c)>-r)},pointsSameX:function(n,i){return Math.abs(n[0]-i[0])<r},pointsSameY:function(n,i){return Math.abs(n[1]-i[1])<r},pointsSame:function(r,i){return n.pointsSameX(r,i)&&n.pointsSameY(r,i)},pointsCompare:function(r,i){return n.pointsSameX(r,i)?n.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(n,i,a){var o=n[0]-i[0],s=n[1]-i[1],l=i[0]-a[0];return Math.abs(o*(i[1]-a[1])-l*s)<r},linesIntersect:function(n,i,a,o){var s=i[0]-n[0],l=i[1]-n[1],c=o[0]-a[0],u=o[1]-a[1],f=s*u-l*c;if(Math.abs(f)<r)return!1;var h=n[0]-a[0],p=n[1]-a[1],d=(c*p-u*h)/f,y=(s*p-l*h)/f,g={alongA:0,alongB:0,pt:[n[0]+d*s,n[1]+d*l]};return g.alongA=d<=-r?-2:d<r?-1:d-1<=-r?0:d-1<r?1:2,g.alongB=y<=-r?-2:y<r?-1:y-1<=-r?0:y-1<r?1:2,g},pointInsideRegion:function(n,i){for(var a=n[0],o=n[1],s=i[i.length-1][0],l=i[i.length-1][1],c=!1,u=0;u<i.length;u++){var f=i[u][0],h=i[u][1];h-o>r!=l-o>r&&(s-f)*(o-h)/(l-h)+f-a>r&&(c=!c),s=f,l=h}return c}};return n}},17792:function(r){r.exports={toPolygon:function(r,n){function i(n){if(n.length<=0)return r.segments({inverted:!1,regions:[]});function i(n){var i=n.slice(0,n.length-1);return r.segments({inverted:!1,regions:[i]})}for(var a=i(n[0]),o=1;o<n.length;o++)a=r.selectDifference(r.combine(a,i(n[o])));return a}if("Polygon"===n.type)return r.polygon(i(n.coordinates));if("MultiPolygon"===n.type){for(var a=r.segments({inverted:!1,regions:[]}),o=0;o<n.coordinates.length;o++)a=r.selectUnion(r.combine(a,i(n.coordinates[o])));return r.polygon(a)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(r,n,i){function a(r,i){return n.pointInsideRegion([.5*(r[0][0]+r[1][0]),.5*(r[0][1]+r[1][1])],i)}function o(r){return{region:r,children:[]}}i=r.polygon(r.segments(i));for(var s=o(null),l=0;l<i.regions.length;l++){var c=i.regions[l];c.length<3||function r(n,i){for(var s,l=0;l<n.children.length;l++)if(a(i,(s=n.children[l]).region))return void r(s,i);var c=o(i);for(l=0;l<n.children.length;l++)a((s=n.children[l]).region,i)&&(c.children.push(s),n.children.splice(l,1),l--);n.children.push(c)}(s,c)}function u(r,n){for(var i=0,a=r[r.length-1][0],o=r[r.length-1][1],s=[],l=0;l<r.length;l++){var c=r[l][0],u=r[l][1];s.push([c,u]),i+=u*a-c*o,a=c,o=u}return i<0!==n&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var f=[];for(l=0;l<s.children.length;l++)(function r(n){var i=[u(n.region,!1)];f.push(i);for(var a=0;a<n.children.length;a++)i.push(function(n){for(var i=0;i<n.children.length;i++)r(n.children[i]);return u(n.region,!0)}(n.children[a]))})(s.children[l]);return f.length<=0?{type:"Polygon",coordinates:[]}:1==f.length?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}}},72200:function(r,n,i){var a=i(48088);r.exports=function(r,n,i){function o(r,n,a){return{id:i?i.segmentId():-1,start:r,end:n,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var s=a.create();function l(r,i){s.insertBefore(r,function(a){var o,s,l,c,u,f;return o=r.isStart,s=r.pt,l=a.isStart,c=a.pt,u=a.other.pt,(0!==(f=n.pointsCompare(s,c))?f:n.pointsSame(i,u)?0:o!==l?o?1:-1:n.pointAboveOrOnLine(i,l?c:u,l?u:c)?1:-1)<0})}function c(r,n){var i,o,s=(l(i=a.node({isStart:!0,pt:r.start,seg:r,primary:n,other:null,status:null}),r.end),i);return o=a.node({isStart:!1,pt:r.end,seg:r,primary:n,other:s,status:null}),s.other=o,l(o,s.pt),s}function u(r,n){var a=o(n,r.seg.end,r.seg);return i&&i.segmentChop(r.seg,n),r.other.remove(),r.seg.end=n,r.other.pt=n,l(r.other,r.pt),c(a,r.primary)}function f(o,l){var c=a.create();function f(r,a){var o=r.seg,s=a.seg,l=o.start,c=o.end,f=s.start,h=s.end;i&&i.checkIntersection(o,s);var p=n.linesIntersect(l,c,f,h);if(!1===p){if(!n.pointsCollinear(l,c,f)||n.pointsSame(l,h)||n.pointsSame(c,f))return!1;var d=n.pointsSame(l,f),y=n.pointsSame(c,h);if(d&&y)return a;var g=!d&&n.pointBetween(l,f,h),v=!y&&n.pointBetween(c,f,h);if(d)return v?u(a,c):u(r,h),a;g&&(y||(v?u(a,c):u(r,h)),u(a,l))}else 0===p.alongA&&(-1===p.alongB?u(r,f):0===p.alongB?u(r,p.pt):1===p.alongB&&u(r,h)),0===p.alongB&&(-1===p.alongA?u(a,l):0===p.alongA?u(a,p.pt):1===p.alongA&&u(a,c));return!1}for(var h=[];!s.isEmpty();){var p=s.getHead();if(i&&i.vert(p.pt[0]),p.isStart){i&&i.segmentNew(p.seg,p.primary);var d=function(r){return c.findTransition(function(i){var a,o,s,l,c;return a=i.ev,o=r.seg.start,s=r.seg.end,l=a.seg.start,c=a.seg.end,(n.pointsCollinear(o,l,c)?n.pointsCollinear(s,l,c)||n.pointAboveOrOnLine(s,l,c)?1:-1:n.pointAboveOrOnLine(o,l,c)?1:-1)>0})}(p),y=d.before?d.before.ev:null,g=d.after?d.after.ev:null;i&&i.tempStatus(p.seg,!!y&&y.seg,!!g&&g.seg);var v,m,x=function(){if(y){var r=f(p,y);if(r)return r}return!!g&&f(p,g)}();if(x&&(r?(m=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below)&&(x.seg.myFill.above=!x.seg.myFill.above):x.seg.otherFill=p.seg.myFill,i&&i.segmentUpdate(x.seg),p.other.remove(),p.remove()),s.getHead()!==p){i&&i.rewind(p.seg);continue}r?(m=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below,p.seg.myFill.below=g?g.seg.myFill.above:o,p.seg.myFill.above=m?!p.seg.myFill.below:p.seg.myFill.below):null===p.seg.otherFill&&(v=g?p.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:p.primary?l:o,p.seg.otherFill={above:v,below:v}),i&&i.status(p.seg,!!y&&y.seg,!!g&&g.seg),p.other.status=d.insert(a.node({ev:p}))}else{var b=p.status;if(null===b)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(c.exists(b.prev)&&c.exists(b.next)&&f(b.prev.ev,b.next.ev),i&&i.statusRemove(b.ev.seg),b.remove(),!p.primary){var _=p.seg.myFill;p.seg.myFill=p.seg.otherFill,p.seg.otherFill=_}h.push(p.seg)}s.getHead().remove()}return i&&i.done(),h}return r?{addRegion:function(r){for(var a,o,s,l=r[r.length-1],u=0;u<r.length;u++){a=l,l=r[u];var f=n.pointsCompare(a,l);0!==f&&c((o=f<0?a:l,s=f<0?l:a,{id:i?i.segmentId():-1,start:o,end:s,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return f(r,!1)}}:{calculate:function(r,n,i,a){return r.forEach(function(r){c(o(r.start,r.end,r),!0)}),i.forEach(function(r){c(o(r.start,r.end,r),!1)}),f(n,a)}}}},48088:function(r){r.exports={create:function(){var r={root:{root:!0,next:null},exists:function(n){return null!==n&&n!==r.root},isEmpty:function(){return null===r.root.next},getHead:function(){return r.root.next},insertBefore:function(n,i){for(var a=r.root,o=r.root.next;null!==o;){if(i(o))return n.prev=o.prev,n.next=o,o.prev.next=n,void(o.prev=n);a=o,o=o.next}a.next=n,n.prev=a,n.next=null},findTransition:function(n){for(var i=r.root,a=r.root.next;null!==a&&!n(a);)i=a,a=a.next;return{before:i===r.root?null:i,after:a,insert:function(r){return r.prev=i,r.next=a,i.next=r,null!==a&&(a.prev=r),r}}}};return r},node:function(r){return r.prev=null,r.next=null,r.remove=function(){r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.prev=null,r.next=null},r}}},11403:function(r){r.exports=function(r,n,i){var a=[],o=[];return r.forEach(function(r){var s=r.start,l=r.end;if(n.pointsSame(s,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{i&&i.chainStart(r);for(var c={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},f=c,h=0;h<a.length;h++){var p=(m=a[h])[0],d=(m[1],m[m.length-1]);if(m[m.length-2],n.pointsSame(p,s)){if(M(h,!0,!0))break}else if(n.pointsSame(p,l)){if(M(h,!0,!1))break}else if(n.pointsSame(d,s)){if(M(h,!1,!0))break}else if(n.pointsSame(d,l)&&M(h,!1,!1))break}if(f===c)return a.push([s,l]),void(i&&i.chainNew(s,l));if(f===u){i&&i.chainMatch(c.index);var y=c.index,g=c.matches_pt1?l:s,v=c.matches_head,m=a[y],x=v?m[0]:m[m.length-1],b=v?m[1]:m[m.length-2],_=v?m[m.length-1]:m[0],w=v?m[m.length-2]:m[1];return n.pointsCollinear(b,x,g)&&(v?(i&&i.chainRemoveHead(c.index,g),m.shift()):(i&&i.chainRemoveTail(c.index,g),m.pop()),x=b),n.pointsSame(_,g)?(a.splice(y,1),n.pointsCollinear(w,_,x)&&(v?(i&&i.chainRemoveTail(c.index,x),m.pop()):(i&&i.chainRemoveHead(c.index,x),m.shift())),i&&i.chainClose(c.index),void o.push(m)):void(v?(i&&i.chainAddHead(c.index,g),m.unshift(g)):(i&&i.chainAddTail(c.index,g),m.push(g)))}var T=c.index,A=u.index;i&&i.chainConnect(T,A);var k=a[T].length<a[A].length;c.matches_head?u.matches_head?k?(S(T),E(T,A)):(S(A),E(A,T)):E(A,T):u.matches_head?E(T,A):k?(S(T),E(A,T)):(S(A),E(T,A))}function M(r,n,i){return f.index=r,f.matches_head=n,f.matches_pt1=i,f===c?(f=u,!1):(f=null,!0)}function S(r){i&&i.chainReverse(r),a[r].reverse()}function E(r,o){var s=a[r],l=a[o],c=s[s.length-1],u=s[s.length-2],f=l[0],h=l[1];n.pointsCollinear(u,c,f)&&(i&&i.chainRemoveTail(r,c),s.pop(),c=u),n.pointsCollinear(c,f,h)&&(i&&i.chainRemoveHead(o,f),l.shift()),i&&i.chainJoin(r,o),a[r]=s.concat(l),a.splice(o,1)}}),o}},82368:function(r){function n(r,n,i){var a=[];return r.forEach(function(r){var o=(r.myFill.above?8:0)+(r.myFill.below?4:0)+(r.otherFill&&r.otherFill.above?2:0)+(r.otherFill&&r.otherFill.below?1:0);0!==n[o]&&a.push({id:i?i.segmentId():-1,start:r.start,end:r.end,myFill:{above:1===n[o],below:2===n[o]},otherFill:null})}),i&&i.selected(a),a}r.exports={union:function(r,i){return n(r,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],i)},intersect:function(r,i){return n(r,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],i)},difference:function(r,i){return n(r,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],i)},differenceRev:function(r,i){return n(r,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],i)},xor:function(r,i){return n(r,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],i)}}},9696:function(r,n,i){var a=i(29936).Transform,o=i(55619);function s(){a.call(this,{readableObjectMode:!0})}function l(r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack||"",this.name=this.constructor.name,this.message=r,n&&(this.code=n),i&&(this.statusCode=i)}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,o(s.prototype),n.gS=function(r,n,i){for(var a=n,o=0;o<i.length;)if(r[a++]!==i[o++])return!1;return!0},n.wR=function(r,n){var i=[],a=0;if(n&&"hex"===n)for(;a<r.length;)i.push(parseInt(r.slice(a,a+2),16)),a+=2;else for(;a<r.length;a++)i.push(255&r.charCodeAt(a));return i},n.Bz=function(r,n){return r[n]|r[n+1]<<8},n.eW=function(r,n){return r[n+1]|r[n]<<8},n.st=function(r,n){return r[n]|r[n+1]<<8|r[n+2]<<16|16777216*r[n+3]},n.eI=function(r,n){return r[n+3]|r[n+2]<<8|r[n+1]<<16|16777216*r[n]},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l},11688:function(r){function n(r,n){var i=Error(r);return i.code=n,i}function i(r,i,a){this.input=r.subarray(i,a),this.start=i;var o=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==o&&"MM\0*"!==o)throw n("invalid TIFF signature","EBADDATA");this.big_endian="M"===o[0]}i.prototype.each=function(r){this.aborted=!1;var n=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:n}];this.ifds_to_read.length>0&&!this.aborted;){var i=this.ifds_to_read.shift();i.offset&&this.scan_ifd(i.id,i.offset,r)}},i.prototype.read_uint16=function(r){var i=this.input;if(r+2>i.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?256*i[r]+i[r+1]:i[r]+256*i[r+1]},i.prototype.read_uint32=function(r){var i=this.input;if(r+4>i.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?16777216*i[r]+65536*i[r+1]+256*i[r+2]+i[r+3]:i[r]+256*i[r+1]+65536*i[r+2]+16777216*i[r+3]},i.prototype.is_subifd_link=function(r,n){return 0===r&&34665===n||0===r&&34853===n||34665===r&&40965===n},i.prototype.exif_format_length=function(r){switch(r){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},i.prototype.exif_format_read=function(r,n){var i;switch(r){case 1:case 2:return this.input[n];case 6:return(i=this.input[n])|33554430*(128&i);case 3:return this.read_uint16(n);case 8:return(i=this.read_uint16(n))|131070*(32768&i);case 4:return this.read_uint32(n);case 9:return 0|this.read_uint32(n);default:return null}},i.prototype.scan_ifd=function(r,i,a){var o=this.read_uint16(i);i+=2;for(var s=0;s<o;s++){var l=this.read_uint16(i),c=this.read_uint16(i+2),u=this.read_uint32(i+4),f=this.exif_format_length(c),h=u*f,p=h<=4?i+8:this.read_uint32(i+8),d=!1;if(p+h>this.input.length)throw n("unexpected EOF","EBADDATA");for(var y=[],g=p,v=0;v<u;v++,g+=f){var m=this.exif_format_read(c,g);if(null===m){y=null;break}y.push(m)}if(Array.isArray(y)&&2===c&&(y=function(r){try{return decodeURIComponent(escape(r))}catch(n){return r}}(String.fromCharCode.apply(null,y)))&&"\0"===y[y.length-1]&&(y=y.slice(0,-1)),this.is_subifd_link(r,l)&&Array.isArray(y)&&Number.isInteger(y[0])&&y[0]>0&&(this.ifds_to_read.push({id:l,offset:y[0]}),d=!0),!1===a({is_big_endian:this.big_endian,ifd:r,tag:l,format:c,count:u,entry_offset:i+this.start,data_length:h,data_offset:p+this.start,value:y,is_subifd_link:d}))return void(this.aborted=!0);i+=12}0===r&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},r.exports.ExifParser=i,r.exports.get_orientation=function(r){var n=0;try{return new i(r,0,r.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return n=r.value[0],!1}),n}catch(r){return -1}}},44600:function(r,n,i){var a=i(9696).eW,o=i(9696).eI;function s(r,n){if(r.length<4+n)return null;var i=o(r,n);return r.length<i+n||i<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(n+4,n+8)),data:r.slice(n+8,n+i),end:n+i}}function l(r,n,i){for(var a=0,o=0;o<i;o++)a=256*a+(r[n+o]||0);return a}r.exports.unbox=s,r.exports.readSizeFromMeta=function(r){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(r,n){for(var i=4;;){var c=s(r,i);if(!c)break;"iprp"===c.boxtype&&function(r,n){for(var i=0;;){var a=s(r,i);if(!a)break;"ipco"===a.boxtype&&function(r,n){for(var i=0;;){var a=s(r,i);if(!a)break;switch(a.boxtype){case"ispe":n.sizes.push({width:o(a.data,4),height:o(a.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&a.data[0]})}i=a.end}}(a.data,n),i=a.end}}(c.data,n),"iloc"===c.boxtype&&function(r,n){for(var i=r[4]>>4&15,o=15&r[4],s=r[5]>>4&15,c=a(r,6),u=8,f=0;f<c;f++){var h=a(r,u),p=a(r,u+=2),d=l(r,u+=2,s),y=a(r,u+=s);if(u+=2,0===p&&1===y){var g=l(r,u,i),v=l(r,u+i,o);n.item_loc[h]={length:v,offset:g+d}}u+=y*(i+o)}}(c.data,n),"iinf"===c.boxtype&&function(r,n){for(var i=a(r,4),o=6,l=0;l<i;l++){var c=s(r,o);if(!c)break;if("infe"===c.boxtype){for(var u=a(c.data,4),f="",h=8;h<c.data.length&&c.data[h];h++)f+=String.fromCharCode(c.data[h]);n.item_inf[f]=u}o=c.end}}(c.data,n),i=c.end}}(r,n),n.sizes.length){var i,c,u,f=(c=(i=n.sizes).reduce(function(r,n){return r.width>n.width||r.width===n.width&&r.height>n.height?r:n}),u=i.reduce(function(r,n){return r.height>n.height||r.height===n.height&&r.width>n.width?r:n}),c.width>u.height||c.width===u.height&&c.height>u.width?c:u),h=1;n.transforms.forEach(function(r){var n={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},i={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===r.type&&(h=0===r.value?i[h]:n[h=n[h=i[h]]]),"irot"===r.type)for(var a=0;a<r.value;a++)h=n[h]});var p=null;return n.item_inf.Exif&&(p=n.item_loc[n.item_inf.Exif]),{width:f.width,height:f.height,orientation:n.transforms.length?h:null,variants:n.sizes,exif_location:p}}},r.exports.getMimeType=function(r){var n=String.fromCharCode.apply(null,r.slice(0,4)),i={};i[n]=!0;for(var a=8;a<r.length;a+=4)i[String.fromCharCode.apply(null,r.slice(a,a+4))]=!0;if(i.mif1||i.msf1||i.miaf)return"avif"===n||"avis"===n||"avio"===n?{type:"avif",mime:"image/avif"}:"heic"===n||"heix"===n?{type:"heic",mime:"image/heic"}:"hevc"===n||"hevx"===n?{type:"heic",mime:"image/heic-sequence"}:i.avif||i.avis?{type:"avif",mime:"image/avif"}:i.heic||i.heix||i.hevc||i.hevx||i.heis?i.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).eI,l=i(44600),c=i(11688),u=a("ftyp");r.exports=function(r){if(o(r,4,u)){var n=l.unbox(r,0);if(n){var i=l.getMimeType(n.data);if(i){for(var a,f=n.end;;){var h=l.unbox(r,f);if(!h)break;if(f=h.end,"mdat"===h.boxtype)return;if("meta"===h.boxtype){a=h.data;break}}if(a){var p=l.readSizeFromMeta(a);if(p){var d={width:p.width,height:p.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(p.variants.length>1&&(d.variants=p.variants),p.orientation&&(d.orientation=p.orientation),p.exif_location&&p.exif_location.offset+p.exif_location.length<=r.length){var y=s(r,p.exif_location.offset),g=r.slice(p.exif_location.offset+y+4,p.exif_location.offset+p.exif_location.length),v=c.get_orientation(g);v>0&&(d.orientation=v)}return d}}}}}}},38728:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).Bz,l=a("BM");r.exports=function(r){if(!(r.length<26)&&o(r,0,l))return{width:s(r,18),height:s(r,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).Bz,l=a("GIF87a"),c=a("GIF89a");r.exports=function(r){if(!(r.length<10)&&(o(r,0,l)||o(r,0,c)))return{width:s(r,6),height:s(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(r,n,i){var a=i(9696).Bz;r.exports=function(r){var n=a(r,0),i=a(r,2),o=a(r,4);if(0===n&&1===i&&o){for(var s=[],l={width:0,height:0},c=0;c<o;c++){var u=r[6+16*c]||256,f=r[6+16*c+1]||256,h={width:u,height:f};s.push(h),(u>l.width||f>l.height)&&(l=h)}return{width:l.width,height:l.height,variants:s,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(r,n,i){var a=i(9696).eW,o=i(9696).wR,s=i(9696).gS,l=i(11688),c=o("Exif\0\0");r.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var n=2;;){for(;;){if(r.length-n<2)return;if(255===r[n++])break}for(var i,o,u=r[n++];255===u;)u=r[n++];if(208<=u&&u<=217||1===u)i=0;else{if(!(192<=u&&u<=254)||r.length-n<2)return;i=a(r,n)-2,n+=2}if(217===u||218===u)return;if(225===u&&i>=10&&s(r,n,c)&&(o=l.get_orientation(r.slice(n+6,n+i))),i>=5&&192<=u&&u<=207&&196!==u&&200!==u&&204!==u){if(r.length-n<i)return;var f={width:a(r,n+3),height:a(r,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(f.orientation=o),f}n+=i}}},37276:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).eI,l=a("PNG\r\n\x1a\n"),c=a("IHDR");r.exports=function(r){if(!(r.length<24)&&o(r,0,l)&&o(r,12,c))return{width:s(r,16),height:s(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).eI,l=a("8BPS\0\x01");r.exports=function(r){if(!(r.length<22)&&o(r,0,l))return{width:s(r,18),height:s(r,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(r){function n(r){return"number"==typeof r&&isFinite(r)&&r>0}var i=/<[-_.:a-zA-Z0-9][^>]*>/,a=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,s=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,l=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,c=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function u(r){return c.test(r)?r.match(c)[0]:"px"}r.exports=function(r){if(function(r){var n,i=0,a=r.length;for(239===r[0]&&187===r[1]&&191===r[2]&&(i=3);i<a&&(32===(n=r[i])||9===n||13===n||10===n);)i++;return i!==a&&60===r[i]}(r)){for(var c="",f=0;f<r.length;f++)c+=String.fromCharCode(r[f]);var h=(c.match(i)||[""])[0];if(a.test(h)){var p,d,y,g=(p=h.match(o),d=h.match(s),y=h.match(l),{width:p&&(p[1]||p[2]),height:d&&(d[1]||d[2]),viewbox:y&&(y[1]||y[2])}),v=parseFloat(g.width),m=parseFloat(g.height);if(g.width&&g.height){if(!n(v)||!n(m))return;return{width:v,height:m,type:"svg",mime:"image/svg+xml",wUnits:u(g.width),hUnits:u(g.height)}}var x=(g.viewbox||"").split(" "),b={width:x[2],height:x[3]},_=parseFloat(b.width),w=parseFloat(b.height);if(n(_)&&n(w)&&u(b.width)===u(b.height)){var T=_/w;if(g.width){if(!n(v))return;return{width:v,height:v/T,type:"svg",mime:"image/svg+xml",wUnits:u(g.width),hUnits:u(g.width)}}if(g.height){if(!n(m))return;return{width:m*T,height:m,type:"svg",mime:"image/svg+xml",wUnits:u(g.height),hUnits:u(g.height)}}return{width:_,height:w,type:"svg",mime:"image/svg+xml",wUnits:u(b.width),hUnits:u(b.height)}}}}}},98792:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).Bz,l=i(9696).eW,c=i(9696).st,u=i(9696).eI,f=a("II*\0"),h=a("MM\0*");function p(r,n,i){return i?l(r,n):s(r,n)}function d(r,n,i){return i?u(r,n):c(r,n)}function y(r,n,i){var a=p(r,n+2,i);return 1!==d(r,n+4,i)||3!==a&&4!==a?null:3===a?p(r,n+8,i):d(r,n+8,i)}r.exports=function(r){if(!(r.length<8)&&(o(r,0,f)||o(r,0,h))){var n=77===r[0],i=d(r,4,n)-8;if(!(i<0)){var a=i+8;if(!(r.length-a<2)){var s,l,c,u,g=12*p(r,a+0,n);if(!(g<=0||(a+=2,r.length-a<g))){for(s=0;s<g;s+=12)256===(u=p(r,a+s,n))?l=y(r,a+s,n):257===u&&(c=y(r,a+s,n));return l&&c?{width:l,height:c,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(r,n,i){var a=i(9696).wR,o=i(9696).gS,s=i(9696).Bz,l=i(9696).st,c=i(11688),u=a("RIFF"),f=a("WEBP");r.exports=function(r){if(!(r.length<16)&&(o(r,0,u)||o(r,8,f))){var n=12,i=null,a=0,h=l(r,4)+8;if(!(h>r.length)){for(;n+8<h;)if(0!==r[n]){var p,d=String.fromCharCode.apply(null,r.slice(n,n+4)),y=l(r,n+4);"VP8 "===d&&y>=10?i=i||function(r,n){if(157===r[n+3]&&1===r[n+4]&&42===r[n+5])return{width:16383&s(r,n+6),height:16383&s(r,n+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(r,n+8):"VP8L"===d&&y>=9?i=i||function(r,n){if(47===r[n]){var i=l(r,n+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}(r,n+8):"VP8X"===d&&y>=10?i=i||{width:1+(r[(p=n+8)+6]<<16|r[p+5]<<8|r[p+4]),height:1+(r[p+9]<<p|r[p+8]<<8|r[p+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===d&&(a=c.get_orientation(r.slice(n+8,n+8+y)),n=1/0),n+=8+y}else n++;if(i)return a>0&&(i.orientation=a),i}}}},87480:function(r,n,i){r.exports={avif:i(40528),bmp:i(38728),gif:i(5588),ico:i(41924),jpeg:i(87968),png:i(37276),psd:i(90328),svg:i(16024),tiff:i(98792),webp:i(20704)}},19480:function(r,n,i){var a=i(87480);r.exports=function(r){return function(r){for(var n=Object.keys(a),i=0;i<n.length;i++){var o=a[n[i]](r);if(o)return o}return null}(r)},r.exports.parsers=a},4168:function(r){var n,i,a=r.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(r){if(n===setTimeout)return setTimeout(r,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(r,0);try{return n(r,0)}catch(i){try{return n.call(null,r,0)}catch(i){return n.call(this,r,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(r){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(r){i=s}}();var c,u=[],f=!1,h=-1;function p(){f&&c&&(f=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!f){var r=l(p);f=!0;for(var n=u.length;n;){for(c=u,u=[];++h<n;)c&&c[h].run();h=-1,n=u.length}c=null,f=!1,function(r){if(i===clearTimeout)return clearTimeout(r);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(r);try{i(r)}catch(n){try{return i.call(null,r)}catch(n){return i.call(this,r)}}}(r)}}function y(r,n){this.fun=r,this.array=n}function g(){}a.nextTick=function(r){var n=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];u.push(new y(r,n)),1!==u.length||f||l(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(r){return[]},a.binding=function(r){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(r){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},3951:function(r,n,i){for(var a=i(41984),o="undefined"==typeof window?i.g:window,s=["moz","webkit"],l="AnimationFrame",c=o["request"+l],u=o["cancel"+l]||o["cancelRequest"+l],f=0;!c&&f<s.length;f++)c=o[s[f]+"Request"+l],u=o[s[f]+"Cancel"+l]||o[s[f]+"CancelRequest"+l];if(!c||!u){var h=0,p=0,d=[];c=function(r){if(0===d.length){var n=a(),i=Math.max(0,16.666666666666668-(n-h));h=i+n,setTimeout(function(){var r=d.slice(0);d.length=0;for(var n=0;n<r.length;n++)if(!r[n].cancelled)try{r[n].callback(h)}catch(r){setTimeout(function(){throw r},0)}},Math.round(i))}return d.push({handle:++p,callback:r,cancelled:!1}),p},u=function(r){for(var n=0;n<d.length;n++)d[n].handle===r&&(d[n].cancelled=!0)}}r.exports=function(r){return c.call(o,r)},r.exports.cancel=function(){u.apply(o,arguments)},r.exports.polyfill=function(r){r||(r=o),r.requestAnimationFrame=c,r.cancelAnimationFrame=u}},24544:function(r,n,i){var a=i(76752),o=i(72160),s=i(45223),l=i(55616),c=i(50896),u=i(47520),f=i(37816),h=f.float32,p=f.fract32;r.exports=function(r,n){if("function"==typeof r?(n||(n={}),n.regl=r):n=r,n.length&&(n.positions=n),!(r=n.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,f,y,g,v,m,x=r._gl,b={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return g=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=r.buffer({usage:"static",type:"float",data:d}),k(n),i=r({vert:"\n		precision highp float;\n\n		attribute vec2 position, positionFract;\n		attribute vec4 error;\n		attribute vec4 color;\n\n		attribute vec2 direction, lineOffset, capOffset;\n\n		uniform vec4 viewport;\n		uniform float lineWidth, capSize;\n		uniform vec2 scale, scaleFract, translate, translateFract;\n\n		varying vec4 fragColor;\n\n		void main() {\n			fragColor = color / 255.;\n\n			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n			vec2 position = position + dxy;\n\n			vec2 pos = (position + translate) * scale\n				+ (positionFract + translateFract) * scale\n				+ (position + translate) * scaleFract\n				+ (positionFract + translateFract) * scaleFract;\n\n			pos += pixelOffset / viewport.zw;\n\n			gl_Position = vec4(pos * 2. - 1., 0, 1);\n		}\n		",frag:"\n		precision highp float;\n\n		varying vec4 fragColor;\n\n		uniform float opacity;\n\n		void main() {\n			gl_FragColor = fragColor;\n			gl_FragColor.a *= opacity;\n		}\n		",uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]}},attributes:{color:{buffer:g,offset:function(r,n){return 4*n.offset},divisor:1},position:{buffer:f,offset:function(r,n){return 8*n.offset},divisor:1},positionFract:{buffer:y,offset:function(r,n){return 8*n.offset},divisor:1},error:{buffer:v,offset:function(r,n){return 16*n.offset},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:d.length}),c(w,{update:k,draw:T,destroy:M,regl:r,gl:x,canvas:x.canvas,groups:_}),w;function w(r){r?k(r):null===r&&M(),T()}function T(n){if("number"==typeof n)return A(n);n&&!Array.isArray(n)&&(n=[n]),r._refresh(),_.forEach(function(r,i){r&&(n&&(n[i]?r.draw=!0:r.draw=!1),r.draw?A(i):r.draw=!0)})}function A(r){"number"==typeof r&&(r=_[r]),null!=r&&r&&r.count&&r.color&&r.opacity&&r.positions&&r.positions.length>1&&(r.scaleRatio=[r.scale[0]*r.viewport.width,r.scale[1]*r.viewport.height],i(r),r.after&&r.after(r))}function k(r){if(r){null!=r.length?"number"==typeof r[0]&&(r=[{positions:r}]):Array.isArray(r)||(r=[r]);var n=0,i=0;if(w.groups=_=r.map(function(r,f){var h=_[f];return r&&("function"==typeof r?r={after:r}:"number"==typeof r[0]&&(r={positions:r}),r=l(r,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),h||(_[f]=h={id:f,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},r=c({},b,r)),s(h,r,[{lineWidth:function(r){return .5*+r},capSize:function(r){return .5*+r},opacity:parseFloat,errors:function(r){return r=u(r),i+=r.length,r},positions:function(r,i){return r=u(r,"float64"),i.count=Math.floor(r.length/2),i.bounds=a(r,2),i.offset=n,n+=i.count,r}},{color:function(r,n){var i=n.count;if(r||(r="transparent"),!Array.isArray(r)||"number"==typeof r[0]){var a=r;r=Array(i);for(var s=0;s<i;s++)r[s]=a}if(r.length<i)throw Error("Not enough colors");for(var l=new Uint8Array(4*i),c=0;c<i;c++){var u=o(r[c],"uint8");l.set(u,4*c)}return l},range:function(r,n,i){var a=n.bounds;return r||(r=a),n.scale=[1/(r[2]-r[0]),1/(r[3]-r[1])],n.translate=[-r[0],-r[1]],n.scaleFract=p(n.scale),n.translateFract=p(n.translate),r},viewport:function(r){var n;return Array.isArray(r)?n={x:r[0],y:r[1],width:r[2]-r[0],height:r[3]-r[1]}:r?(n={x:r.x||r.left||0,y:r.y||r.top||0},r.right?n.width=r.right-n.x:n.width=r.w||r.width||0,r.bottom?n.height=r.bottom-n.y:n.height=r.h||r.height||0):n={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},n}}])),h}),n||i){var d=_.reduce(function(r,n,i){return r+(n?n.count:0)},0),m=new Float64Array(2*d),T=new Uint8Array(4*d),A=new Float32Array(4*d);_.forEach(function(r,n){if(r){var i=r.positions,a=r.count,o=r.offset,s=r.color,l=r.errors;a&&(T.set(s,4*o),A.set(l,4*o),m.set(i,2*o))}});var k=h(m);f(k),y(p(m,k)),g(T),v(A)}}}function M(){f.destroy(),y.destroy(),g.destroy(),v.destroy(),m.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(r,n,i){var a=i(72160),o=i(76752),s=i(50896),l=i(55616),c=i(47520),u=i(28912),f=i(71152),h=i(37816),p=h.float32,d=h.fract32,y=i(60463),g=i(51160),v=i(10272);function m(r,n){if(!(this instanceof m))return new m(r,n);if("function"==typeof r?(n||(n={}),n.regl=r):n=r,n.length&&(n.positions=n),!(r=n.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=r._gl,this.regl=r,this.passes=[],this.shaders=m.shaders.has(r)?m.shaders.get(r):m.shaders.set(r,m.createShaders(r)).get(r),this.update(n)}r.exports=m,m.dashMult=2,m.maxPatternLength=256,m.precisionThreshold=3e6,m.maxPoints=1e4,m.maxLines=2048,m.shaders=new y,m.createShaders=function(r){var n,i=r.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),a={primitive:"triangle strip",instances:r.prop("count"),count:4,offset:0,uniforms:{miterMode:function(r,n){return"round"===n.join?2:1},miterLimit:r.prop("miterLimit"),scale:r.prop("scale"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),translate:r.prop("translate"),thickness:r.prop("thickness"),dashTexture:r.prop("dashTexture"),opacity:r.prop("opacity"),pixelRatio:r.context("pixelRatio"),id:r.prop("id"),dashLength:r.prop("dashLength"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]},depth:r.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(r,n){return!n.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport")},o=r(s({vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n	// the order is important\n	return position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n	float lineStart = 1. - lineEnd;\n	float lineOffset = lineTop * 2. - 1.;\n\n	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n	tangent = normalize(diff * scale * viewport.zw);\n	vec2 normal = vec2(-tangent.y, tangent.x);\n\n	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n		+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n	float alpha = 1.;\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:r.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},a));try{n=r(s({cull:{enable:!0,face:"back"},vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n	vec2 normalWidth = thickness / scaleRatio;\n\n	float lineStart = 1. - lineEnd;\n	float lineBot = 1. - lineTop;\n\n	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\n	vec2 prevDiff = aCoord - prevCoord;\n	vec2 currDiff = bCoord - aCoord;\n	vec2 nextDiff = nextCoord - bCoord;\n\n	vec2 prevTangent = normalize(prevDiff * scaleRatio);\n	vec2 currTangent = normalize(currDiff * scaleRatio);\n	vec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n	vec2 currNormal = vec2(-currTangent.y, currTangent.x);\n	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n	vec2 startJoinDirection = normalize(prevTangent - currTangent);\n	vec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n	// collapsed/unidirectional segment cases\n	// FIXME: there should be more elegant solution\n	vec2 prevTanDiff = abs(prevTangent - currTangent);\n	vec2 nextTanDiff = abs(nextTangent - currTangent);\n	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n		startJoinDirection = currNormal;\n	}\n	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n		endJoinDirection = currNormal;\n	}\n	if (aCoord == bCoord) {\n		endJoinDirection = startJoinDirection;\n		currNormal = prevNormal;\n		currTangent = prevTangent;\n	}\n\n	tangent = currTangent;\n\n	//calculate join shifts relative to normals\n	float startJoinShift = dot(currNormal, startJoinDirection);\n	float endJoinShift = dot(currNormal, endJoinDirection);\n\n	float startMiterRatio = abs(1. / startJoinShift);\n	float endMiterRatio = abs(1. / endJoinShift);\n\n	vec2 startJoin = startJoinDirection * startMiterRatio;\n	vec2 endJoin = endJoinDirection * endMiterRatio;\n\n	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n	startTopJoin = sign(startJoinShift) * startJoin * .5;\n	startBotJoin = -startTopJoin;\n\n	endTopJoin = sign(endJoinShift) * endJoin * .5;\n	endBotJoin = -endTopJoin;\n\n	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n	//miter anti-clipping\n	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n	//prevent close to reverse direction switch\n	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n	if (prevReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n		//handle miter clipping\n		bTopCoord -= normalWidth * endTopJoin;\n		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n	}\n\n	if (nextReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n		//handle miter clipping\n		aBotCoord -= normalWidth * startBotJoin;\n		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n	}\n\n	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n	//position is normalized 0..1 coord on the screen\n	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n	enableStartMiter = step(dot(currTangent, prevTangent), .5);\n	enableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n	//bevel miter cutoffs\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n\n	//round miter cutoffs\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nvoid main() {\n	float alpha = 1., distToStart, distToEnd;\n	float cutoff = thickness * .5;\n\n	//bevel miter\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToStart + 1., 0.), 1.);\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToEnd + 1., 0.), 1.);\n		}\n	}\n\n	// round miter\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < 0.) {\n				float radius = length(gl_FragCoord.xy - startCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < 0.) {\n				float radius = length(gl_FragCoord.xy - endCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n	}\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aColor:{buffer:r.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:r.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},a))}catch(r){n=o}return{fill:r({primitive:"triangle",elements:function(r,n){return n.triangles},offset:0,vert:"\nprecision highp float;\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n	vec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n	fragColor.a *= opacity;\n}\n",frag:"\nprecision highp float;\nvarying vec4 fragColor;\n\nvoid main() {\n	gl_FragColor = fragColor;\n}\n",uniforms:{scale:r.prop("scale"),color:r.prop("fill"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),translate:r.prop("translate"),opacity:r.prop("opacity"),pixelRatio:r.context("pixelRatio"),id:r.prop("id"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]}},attributes:{position:{buffer:r.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:8}},blend:a.blend,depth:{enable:!1},scissor:a.scissor,stencil:a.stencil,viewport:a.viewport}),rect:o,miter:n}},m.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},m.prototype.render=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];r.length&&this.update.apply(this,r),this.draw()},m.prototype.draw=function(){for(var r=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];return(n.length?n:this.passes).forEach(function(n,i){if(n&&Array.isArray(n))return r.draw.apply(r,n);"number"==typeof n&&(n=r.passes[n]),n&&n.count>1&&n.opacity&&(r.regl._refresh(),n.fill&&n.triangles&&n.triangles.length>2&&r.shaders.fill(n),n.thickness&&(n.scale[0]*n.viewport.width>m.precisionThreshold||n.scale[1]*n.viewport.height>m.precisionThreshold||"rect"===n.join||!n.join&&(n.thickness<=2||n.count>=m.maxPoints)?r.shaders.rect(n):r.shaders.miter(n)))}),this},m.prototype.update=function(r){var n=this;if(r){null!=r.length?"number"==typeof r[0]&&(r=[{positions:r}]):Array.isArray(r)||(r=[r]);var i=this.regl,h=this.gl;if(r.forEach(function(r,y){var x=n.passes[y];if(void 0!==r){if(null!==r){if("number"==typeof r[0]&&(r={positions:r}),r=l(r,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),x||(n.passes[y]=x={id:y,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:i.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},r=s({},m.defaults,r)),null!=r.thickness&&(x.thickness=parseFloat(r.thickness)),null!=r.opacity&&(x.opacity=parseFloat(r.opacity)),null!=r.miterLimit&&(x.miterLimit=parseFloat(r.miterLimit)),null!=r.overlay&&(x.overlay=!!r.overlay,y<m.maxLines&&(x.depth=2*(m.maxLines-1-y%m.maxLines)/m.maxLines-1)),null!=r.join&&(x.join=r.join),null!=r.hole&&(x.hole=r.hole),null!=r.fill&&(x.fill=r.fill?a(r.fill,"uint8"):null),null!=r.viewport&&(x.viewport=g(r.viewport)),x.viewport||(x.viewport=g([h.drawingBufferWidth,h.drawingBufferHeight])),null!=r.close&&(x.close=r.close),null===r.positions&&(r.positions=[]),r.positions){if(r.positions.x&&r.positions.y){var b,_,w=r.positions.x,T=r.positions.y;b=new Float64Array(2*(_=x.count=Math.max(w.length,T.length)));for(var A=0;A<_;A++)b[2*A]=w[A],b[2*A+1]=T[A]}else b=c(r.positions,"float64"),_=x.count=Math.floor(b.length/2);var k=x.bounds=o(b,2);if(x.fill){for(var M=[],S={},E=0,I=0,L=0,C=x.count;I<C;I++){var O=b[2*I],D=b[2*I+1];isNaN(O)||isNaN(D)||null==O||null==D?(O=b[2*E],D=b[2*E+1],S[I]=E):E=I,M[L++]=O,M[L++]=D}if(r.splitNull){x.count-1 in S||(S[x.count]=x.count-1);var P=Object.keys(S).map(Number).sort(function(r,n){return r-n}),B=[],R=0,z=null!=x.hole?x.hole[0]:null;if(null!=z){var F=v(P,function(r){return r>=z});(P=P.slice(0,F)).push(z)}for(var N=function(r){var n=u(M.slice(2*R,2*P[r]).concat(z?M.slice(2*z):[]),(x.hole||[]).map(function(n){return n-z+(P[r]-R)}));n=n.map(function(n){return n+R+(n+R<P[r]?0:z-P[r])}),B.push.apply(B,n),R=P[r]+1},U=0;U<P.length;U++)N(U);for(var j=0,V=B.length;j<V;j++)null!=S[B[j]]&&(B[j]=S[B[j]]);x.triangles=B}else{for(var H=u(M,x.hole||[]),q=0,G=H.length;q<G;q++)null!=S[H[q]]&&(H[q]=S[H[q]]);x.triangles=H}}var W=new Float64Array(b);f(W,2,k);var Y=new Float64Array(2*_+6);x.close?b[0]===b[2*_-2]&&b[1]===b[2*_-1]?(Y[0]=W[2*_-4],Y[1]=W[2*_-3]):(Y[0]=W[2*_-2],Y[1]=W[2*_-1]):(Y[0]=W[0],Y[1]=W[1]),Y.set(W,2),x.close?b[0]===b[2*_-2]&&b[1]===b[2*_-1]?(Y[2*_+2]=W[2],Y[2*_+3]=W[3],x.count-=1):(Y[2*_+2]=W[0],Y[2*_+3]=W[1],Y[2*_+4]=W[2],Y[2*_+5]=W[3]):(Y[2*_+2]=W[2*_-2],Y[2*_+3]=W[2*_-1],Y[2*_+4]=W[2*_-2],Y[2*_+5]=W[2*_-1]);var Z=p(Y);x.positionBuffer(Z);var X=d(Y,Z);x.positionFractBuffer(X)}if(r.range?x.range=r.range:x.range||(x.range=x.bounds),(r.range||r.positions)&&x.count){var K=x.bounds,J=K[2]-K[0],$=K[3]-K[1],Q=x.range[2]-x.range[0],tt=x.range[3]-x.range[1];x.scale=[J/Q,$/tt],x.translate=[-x.range[0]/Q+K[0]/Q||0,-x.range[1]/tt+K[1]/tt||0],x.scaleFract=d(x.scale),x.translateFract=d(x.translate)}if(r.dashes){var te,tr=0;if(!r.dashes||r.dashes.length<2)tr=1,te=new Uint8Array([255,255,255,255,255,255,255,255]);else{tr=0;for(var tn=0;tn<r.dashes.length;++tn)tr+=r.dashes[tn];te=new Uint8Array(tr*m.dashMult);for(var ti=0,ta=255,to=0;to<2;to++)for(var ts=0;ts<r.dashes.length;++ts){for(var tl=0,tc=r.dashes[ts]*m.dashMult*.5;tl<tc;++tl)te[ti++]=ta;ta^=255}}x.dashLength=tr,x.dashTexture({channels:1,data:te,width:te.length,height:1,mag:"linear",min:"linear"},0,0)}if(r.color){var tu=x.count,tf=r.color;tf||(tf="transparent");var th=new Uint8Array(4*tu+4);if(Array.isArray(tf)&&"number"!=typeof tf[0]){for(var tp=0;tp<tu;tp++){var td=a(tf[tp],"uint8");th.set(td,4*tp)}th.set(a(tf[0],"uint8"),4*tu)}else for(var ty=a(tf,"uint8"),tg=0;tg<tu+1;tg++)th.set(ty,4*tg);x.colorBuffer({usage:"dynamic",type:"uint8",data:th})}}else n.passes[y]=null}}),r.length<this.passes.length){for(var y=r.length;y<this.passes.length;y++){var x=this.passes[y];x&&(x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy())}this.passes.length=r.length}for(var b=[],_=0;_<this.passes.length;_++)null!==this.passes[_]&&b.push(this.passes[_]);return this.passes=b,this}},m.prototype.destroy=function(){return this.passes.forEach(function(r){r.colorBuffer.destroy(),r.positionBuffer.destroy(),r.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(r,n,i){function a(r,n){if(r){if("string"==typeof r)return o(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);return"Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i?Array.from(r):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(r,n):void 0}}function o(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,a=Array(n);i<n;i++)a[i]=r[i];return a}var s=i(72160),l=i(76752),c=i(3808),u=i(3108),f=i(50896),h=i(26444),p=i(55616),d=i(45223),y=i(47520),g=i(96604),v=i(37816),m=i(51160);function x(r,n){var i=this;if(!(this instanceof x))return new x(r,n);"function"==typeof r?(n||(n={}),n.regl=r):(n=r,r=null),n&&n.length&&(n.positions=n);var a,o=(r=n.regl)._gl,s=[];this.tooManyColors=g,a=r.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),f(this,{regl:r,gl:o,groups:[],markerCache:[null],markerTextures:[null],palette:s,paletteIds:{},paletteTexture:a,maxColors:255,maxSize:100,canvas:o.canvas}),this.update(n);var l={uniforms:{constPointSize:!!n.constPointSize,opacity:r.prop("opacity"),paletteSize:function(r,n){return[i.tooManyColors?0:255,a.height]},pixelRatio:r.context("pixelRatio"),scale:r.prop("scale"),scaleFract:r.prop("scaleFract"),translate:r.prop("translate"),translateFract:r.prop("translateFract"),markerTexture:r.prop("markerTexture"),paletteTexture:a},attributes:{x:function(r,n){return n.xAttr||{buffer:n.positionBuffer,stride:8,offset:0}},y:function(r,n){return n.yAttr||{buffer:n.positionBuffer,stride:8,offset:4}},xFract:function(r,n){return n.xAttr?{constant:[0,0]}:{buffer:n.positionFractBuffer,stride:8,offset:0}},yFract:function(r,n){return n.yAttr?{constant:[0,0]}:{buffer:n.positionFractBuffer,stride:8,offset:4}},size:function(r,n){return n.size.length?{buffer:n.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*n.size/i.maxSize)]}},borderSize:function(r,n){return n.borderSize.length?{buffer:n.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*n.borderSize/i.maxSize)]}},colorId:function(r,n){return n.color.length?{buffer:n.colorBuffer,stride:i.tooManyColors?8:4,offset:0}:{constant:i.tooManyColors?s.slice(4*n.color,4*n.color+4):[n.color]}},borderColorId:function(r,n){return n.borderColor.length?{buffer:n.colorBuffer,stride:i.tooManyColors?8:4,offset:i.tooManyColors?4:2}:{constant:i.tooManyColors?s.slice(4*n.borderColor,4*n.borderColor+4):[n.borderColor]}},isActive:function(r,n){return!0===n.activation?{constant:[1]}:n.activation?n.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:r.prop("elements"),count:r.prop("count"),offset:r.prop("offset"),primitive:"points"},c=f({},l);c.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),c.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=r(c);var u=f({},l);u.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n	float t;\n	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n	return t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n	float radius, alpha = 1.0, delta = fragWidth;\n\n	radius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n	if (radius > 1.0 + delta) {\n		discard;\n	}\n\n	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n	float borderRadius = fragBorderRadius;\n	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n	vec4 color = mix(fragColor, fragBorderColor, ratio);\n	color.a *= alpha * opacity;\n	gl_FragColor = color;\n}\n"]),u.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),g&&(u.frag=u.frag.replace("smoothstep","smoothStep"),c.frag=c.frag.replace("smoothstep","smoothStep")),this.drawCircle=r(u)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var r=this,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=this.groups;if(1===i.length&&Array.isArray(i[0])&&(null===i[0][0]||Array.isArray(i[0][0]))&&(i=i[0]),this.regl._refresh(),i.length)for(var s=0;s<i.length;s++)this.drawItem(s,i[s]);else o.forEach(function(n,i){r.drawItem(i)});return this},x.prototype.drawItem=function(r,n){var i,s=this.groups,l=s[r];if("number"==typeof n&&(r=n,l=s[n],n=null),l&&l.count&&l.opacity){l.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,l,n));for(var c=[],u=1;u<l.activation.length;u++)l.activation[u]&&(!0===l.activation[u]||l.activation[u].data.length)&&c.push.apply(c,function(r){if(Array.isArray(r))return o(r)}(i=this.getMarkerDrawOptions(u,l,n))||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(i)||a(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());c.length&&this.drawMarker(c)}},x.prototype.getMarkerDrawOptions=function(r,n,i){var o=n.range,s=n.tree,l=n.viewport,c=n.activation,u=n.selectionBuffer,h=n.count;if(this.regl,!s)return i?[f({},n,{markerTexture:this.markerTextures[r],activation:c[r],count:i.length,elements:i,offset:0})]:[f({},n,{markerTexture:this.markerTextures[r],activation:c[r],offset:0})];var p=[],d=s.range(o,{lod:!0,px:[(o[2]-o[0])/l.width,(o[3]-o[1])/l.height]});if(i){for(var y=c[r].data,g=new Uint8Array(h),v=0;v<i.length;v++){var m=i[v];g[m]=y?y[m]:1}u.subdata(g)}for(var x=d.length;x--;){var b,_=function(r){if(Array.isArray(r))return r}(b=d[x])||function(r,n){var i=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=i){var a,o,s,l,c=[],u=!0,f=!1;try{for(s=(i=i.call(r)).next;!(u=(a=s.call(i)).done)&&(c.push(a.value),2!==c.length);u=!0);}catch(r){f=!0,o=r}finally{try{if(!u&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw o}}return c}}(b,2)||a(b,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=_[0],T=_[1];p.push(f({},n,{markerTexture:this.markerTextures[r],activation:i?u:c[r],offset:w,count:T-w}))}return p},x.prototype.update=function(){for(var r=this,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if(i.length){1===i.length&&Array.isArray(i[0])&&(i=i[0]);var o=this.groups,s=this.gl,c=this.regl,h=this.maxSize,g=this.maxColors,b=this.palette;this.groups=o=i.map(function(n,i){var a=o[i];if(void 0===n)return a;null===n?n={positions:null}:"function"==typeof n?n={ondraw:n}:"number"==typeof n[0]&&(n={positions:n}),null===(n=p(n,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(n.positions=[]),null!=n.tooManyColors&&(r.tooManyColors=n.tooManyColors),a||(o[i]=a={id:i,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:c.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:c.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:c.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:c.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:c.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},n=f({},x.defaults,n)),!n.positions||"marker"in n||(n.marker=a.marker,delete a.marker),!n.marker||"positions"in n||(n.positions=a.positions,delete a.positions);var _=0,w=0;if(d(a,n,[{snap:!0,size:function(r,n){return null==r&&(r=x.defaults.size),_+=r&&r.length?1:0,r},borderSize:function(r,n){return null==r&&(r=x.defaults.borderSize),_+=r&&r.length?1:0,r},opacity:parseFloat,color:function(n,i){return null==n&&(n=x.defaults.color),n=r.updateColor(n),w++,n},borderColor:function(n,i){return null==n&&(n=x.defaults.borderColor),n=r.updateColor(n),w++,n},bounds:function(r,n,i){return"range"in i||(i.range=null),r},positions:function(r,n,i){var a=n.snap,o=n.positionBuffer,s=n.positionFractBuffer,f=n.selectionBuffer;if(r.x||r.y)return r.x.length?n.xAttr={buffer:c.buffer(r.x),offset:0,stride:4,count:r.x.length}:n.xAttr={buffer:r.x.buffer,offset:4*r.x.offset||0,stride:4*(r.x.stride||1),count:r.x.count},r.y.length?n.yAttr={buffer:c.buffer(r.y),offset:0,stride:4,count:r.y.length}:n.yAttr={buffer:r.y.buffer,offset:4*r.y.offset||0,stride:4*(r.y.stride||1),count:r.y.count},n.count=Math.max(n.xAttr.count,n.yAttr.count),r;r=y(r,"float64");var h=n.count=Math.floor(r.length/2),p=n.bounds=h?l(r,2):null;if(i.range||n.range||(delete n.range,i.range=p),i.marker||n.marker||(delete n.marker,i.marker=null),a&&(!0===a||h>a)?n.tree=u(r,{bounds:p}):a&&a.length&&(n.tree=a),n.tree){var d={primitive:"points",usage:"static",data:n.tree,type:"uint32"};n.elements?n.elements(d):n.elements=c.elements(d)}var g=v.float32(r);return o({data:g,usage:"dynamic"}),s({data:v.fract32(r,g),usage:"dynamic"}),f({data:new Uint8Array(h),type:"uint8",usage:"stream"}),r}},{marker:function(n,i,a){var o=i.activation;if(o.forEach(function(r){return r&&r.destroy&&r.destroy()}),o.length=0,n&&"number"!=typeof n[0]){for(var s=[],l=0,u=Math.min(n.length,i.count);l<u;l++){var f=r.addMarker(n[l]);s[f]||(s[f]=new Uint8Array(i.count)),s[f][l]=1}for(var h=0;h<s.length;h++)if(s[h]){var p={data:s[h],type:"uint8",usage:"static"};o[h]?o[h](p):o[h]=c.buffer(p),o[h].data=s[h]}}else o[r.addMarker(n)]=!0;return n},range:function(r,n,i){var a=n.bounds;if(a)return r||(r=a),n.scale=[1/(r[2]-r[0]),1/(r[3]-r[1])],n.translate=[-r[0],-r[1]],n.scaleFract=v.fract(n.scale),n.translateFract=v.fract(n.translate),r},viewport:function(r){return m(r||[s.drawingBufferWidth,s.drawingBufferHeight])}}]),_){var T=a,A=T.count,k=T.size,M=T.borderSize,S=T.sizeBuffer,E=new Uint8Array(2*A);if(k.length||M.length)for(var I=0;I<A;I++)E[2*I]=Math.round(255*(null==k[I]?k:k[I])/h),E[2*I+1]=Math.round(255*(null==M[I]?M:M[I])/h);S({data:E,usage:"dynamic"})}if(w){var L,C=a,O=C.count,D=C.color,P=C.borderColor,B=C.colorBuffer;if(r.tooManyColors){if(D.length||P.length){L=new Uint8Array(8*O);for(var R=0;R<O;R++){var z=D[R];L[8*R]=b[4*z],L[8*R+1]=b[4*z+1],L[8*R+2]=b[4*z+2],L[8*R+3]=b[4*z+3];var F=P[R];L[8*R+4]=b[4*F],L[8*R+5]=b[4*F+1],L[8*R+6]=b[4*F+2],L[8*R+7]=b[4*F+3]}}}else if(D.length||P.length){L=new Uint8Array(4*O+2);for(var N=0;N<O;N++)null!=D[N]&&(L[4*N]=D[N]%g,L[4*N+1]=Math.floor(D[N]/g)),null!=P[N]&&(L[4*N+2]=P[N]%g,L[4*N+3]=Math.floor(P[N]/g))}B({data:L||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return a})}},x.prototype.addMarker=function(r){var n,i=this.markerTextures,a=this.regl,o=this.markerCache,s=null==r?0:o.indexOf(r);if(s>=0)return s;if(r instanceof Uint8Array||r instanceof Uint8ClampedArray)n=r;else{n=new Uint8Array(r.length);for(var l=0,c=r.length;l<c;l++)n[l]=255*r[l]}var u=Math.floor(Math.sqrt(n.length));return s=i.length,o.push(r),i.push(a.texture({channels:1,data:n,radius:u,mag:"linear",min:"linear"})),s},x.prototype.updateColor=function(r){var n=this.paletteIds,i=this.palette,a=this.maxColors;Array.isArray(r)||(r=[r]);var o=[];if("number"==typeof r[0]){var l=[];if(Array.isArray(r))for(var u=0;u<r.length;u+=4)l.push(r.slice(u,u+4));else for(var f=0;f<r.length;f+=4)l.push(r.subarray(f,f+4));r=l}for(var h=0;h<r.length;h++){var p=r[h],d=c(p=s(p,"uint8"),!1);if(null==n[d]){var y=i.length;n[d]=Math.floor(y/4),i[y]=p[0],i[y+1]=p[1],i[y+2]=p[2],i[y+3]=p[3]}o[h]=n[d]}return!this.tooManyColors&&i.length>4*a&&(this.tooManyColors=!0),this.updatePalette(i),1===o.length?o[0]:o},x.prototype.updatePalette=function(r){if(!this.tooManyColors){var n=this.maxColors,i=this.paletteTexture,a=Math.ceil(.25*r.length/n);if(a>1)for(var o=.25*(r=r.slice()).length%n;o<a*n;o++)r.push(0,0,0,0);i.height<a&&i.resize(n,a),i.subimage({width:Math.min(.25*r.length,n),height:a,data:r},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(r){r.sizeBuffer.destroy(),r.positionBuffer.destroy(),r.positionFractBuffer.destroy(),r.colorBuffer.destroy(),r.activation.forEach(function(r){return r&&r.destroy&&r.destroy()}),r.selectionBuffer.destroy(),r.elements&&r.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(r){return r&&r.destroy&&r.destroy()}),this};var b=i(50896);r.exports=function(r,n){var i=new x(r,n),a=i.render.bind(i);return b(a,{render:a,update:i.update.bind(i),draw:i.draw.bind(i),destroy:i.destroy.bind(i),regl:i.regl,gl:i.gl,canvas:i.gl.canvas,groups:i.groups,markers:i.markerCache,palette:i.palette}),a}},55795:function(r,n,i){var a=i(38540),o=i(55616),s=i(76752),l=i(3951),c=i(67752),u=i(51160),f=i(47520);function h(r,n){if(!(this instanceof h))return new h(r,n);this.traces=[],this.passes={},this.regl=r,this.scatter=a(r),this.canvas=this.scatter.canvas}function p(r,n,i){var a,o,s,l,c=r[n],u=r[i];return c.length>2?(c[0],c[2],a=c[1],o=c[3]):c.length?(a=c[0],o=c[1]):(c.x,a=c.y,c.x,c.width,o=c.y+c.height),u.length>2?(s=u[0],l=u[2],u[1],u[3]):u.length?(s=u[0],l=u[1]):(s=u.x,u.y,l=u.x+u.width,u.y,u.height),[s,a,l,o]}function d(r){if("number"==typeof r)return[r,r,r,r];if(2===r.length)return[r[0],r[1],r[0],r[1]];var n=u(r);return[n.x,n.y,n.x+n.width,n.y+n.height]}r.exports=h,h.prototype.render=function(){for(var r=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];return n.length&&this.update.apply(this,n),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=l(function(){r.draw(),r.dirty=!0,r.planned=null})):(this.draw(),this.dirty=!0,l(function(){r.dirty=!1})),this)},h.prototype.update=function(){for(var r,n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length){for(var a=0;a<n.length;a++)this.updateItem(a,n[a]);this.traces=this.traces.filter(Boolean);for(var o=[],s=0,l=0;l<this.traces.length;l++){for(var c=this.traces[l],u=this.traces[l].passes,f=0;f<u.length;f++)o.push(this.passes[u[f]]);c.passOffset=s,s+=c.passes.length}return(r=this.scatter).update.apply(r,o),this}},h.prototype.updateItem=function(r,n){var i=this.regl;if(null===n)return this.traces[r]=null,this;if(!n)return this;var a,l=o(n,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),c=this.traces[r]||(this.traces[r]={id:r,buffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:u([i._gl.drawingBufferWidth,i._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=l.color&&(c.color=l.color),null!=l.size&&(c.size=l.size),null!=l.marker&&(c.marker=l.marker),null!=l.borderColor&&(c.borderColor=l.borderColor),null!=l.borderSize&&(c.borderSize=l.borderSize),null!=l.opacity&&(c.opacity=l.opacity),l.viewport&&(c.viewport=u(l.viewport)),null!=l.diagonal&&(c.diagonal=l.diagonal),null!=l.upper&&(c.upper=l.upper),null!=l.lower&&(c.lower=l.lower),l.data){c.buffer(f(l.data)),c.columns=l.data.length,c.count=l.data[0].length,c.bounds=[];for(var h=0;h<c.columns;h++)c.bounds[h]=s(l.data[h],1)}l.range&&(c.range=l.range,a=c.range&&"number"!=typeof c.range[0]),l.domain&&(c.domain=l.domain);var y=!1;null!=l.padding&&(Array.isArray(l.padding)&&l.padding.length===c.columns&&"number"==typeof l.padding[l.padding.length-1]?(c.padding=l.padding.map(d),y=!0):c.padding=d(l.padding));var g=c.columns,v=c.count,m=c.viewport.width,x=c.viewport.height,b=c.viewport.x,_=c.viewport.y,w=m/g,T=x/g;c.passes=[];for(var A=0;A<g;A++)for(var k=0;k<g;k++)if((c.diagonal||k!==A)&&(c.upper||!(A>k))&&(c.lower||!(A<k))){var M,S,E,I=(M=c.id,S=A,E=k,(null!=M.id?M.id:M)<<16|(255&S)<<8|255&E),L=this.passes[I]||(this.passes[I]={});if(l.data&&(l.transpose?L.positions={x:{buffer:c.buffer,offset:k,count:v,stride:g},y:{buffer:c.buffer,offset:A,count:v,stride:g}}:L.positions={x:{buffer:c.buffer,offset:k*v,count:v},y:{buffer:c.buffer,offset:A*v,count:v}},L.bounds=p(c.bounds,A,k)),l.domain||l.viewport||l.data){var C=y?p(c.padding,A,k):c.padding;if(c.domain){var O=p(c.domain,A,k),D=O[0],P=O[1],B=O[2],R=O[3];L.viewport=[b+D*m+C[0],_+P*x+C[1],b+B*m-C[2],_+R*x-C[3]]}else L.viewport=[b+k*w+w*C[0],_+A*T+T*C[1],b+(k+1)*w-w*C[2],_+(A+1)*T-T*C[3]]}l.color&&(L.color=c.color),l.size&&(L.size=c.size),l.marker&&(L.marker=c.marker),l.borderSize&&(L.borderSize=c.borderSize),l.borderColor&&(L.borderColor=c.borderColor),l.opacity&&(L.opacity=c.opacity),l.range&&(L.range=a?p(c.range,A,k):c.range||L.bounds),c.passes.push(I)}return this},h.prototype.draw=function(){for(var r,n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length){for(var a=[],o=0;o<n.length;o++)if("number"==typeof n[o]){var s=this.traces[n[o]],l=s.passes,u=s.passOffset;a.push.apply(a,c(u,u+l.length))}else if(n[o].length){var f=n[o],h=this.traces[o],p=h.passes,d=h.passOffset;p=p.map(function(r,n){a[d+n]=f})}(r=this.scatter).draw.apply(r,a)}else this.scatter.draw();return this},h.prototype.destroy=function(){return this.traces.forEach(function(r){r.buffer&&r.buffer.destroy&&r.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(r){r.exports=function(){function r(r,n){this.id=B++,this.type=r,this.data=n}function n(r){return"string"==typeof r?r.split():r}function i(r){return"string"==typeof r?document.querySelector(r):r}function a(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n(a);return i}function o(r){var n,i;return n=(65535<r)<<4,n|=i=(255<(r>>>=n))<<3,(n|=i=(15<(r>>>=i))<<2)|(i=(3<(r>>>=i))<<1)|r>>>i>>1}function s(){function r(r){e:{for(var n=16;268435456>=n;n*=16)if(r<=n){r=n;break e}r=0}return 0<(n=i[o(r)>>2]).length?n.pop():new ArrayBuffer(r)}function n(r){i[o(r.byteLength)>>2].push(r)}var i=a(8,function(){return[]});return{alloc:r,free:n,allocType:function(n,i){var a=null;switch(n){case 5120:a=new Int8Array(r(i),0,i);break;case 5121:a=new Uint8Array(r(i),0,i);break;case 5122:a=new Int16Array(r(2*i),0,i);break;case 5123:a=new Uint16Array(r(2*i),0,i);break;case 5124:a=new Int32Array(r(4*i),0,i);break;case 5125:a=new Uint32Array(r(4*i),0,i);break;case 5126:a=new Float32Array(r(4*i),0,i);break;default:return null}return a.length!==i?a.subarray(0,i):a},freeType:function(r){n(r.buffer)}}}function l(r){return!!r&&"object"==typeof r&&Array.isArray(r.shape)&&Array.isArray(r.stride)&&"number"==typeof r.offset&&r.shape.length===r.stride.length&&(Array.isArray(r.data)||j(r.data))}function c(r,n,i,a,o,s){for(var l=0;l<n;++l)for(var c=r[l],u=0;u<i;++u)for(var f=c[u],h=0;h<a;++h)o[s++]=f[h]}function u(r){return 0|q[Object.prototype.toString.call(r)]}function f(r,n){for(var i=0;i<n.length;++i)r[i]=n[i]}function h(r,n,i,a,o,s,l){for(var c=0,u=0;u<i;++u)for(var f=0;f<a;++f)r[c++]=n[o*u+s*f+l]}function p(r){for(var n=N.allocType(5123,r.length),i=0;i<r.length;++i)if(isNaN(r[i]))n[i]=65535;else if(1/0===r[i])n[i]=31744;else if(-1/0===r[i])n[i]=64512;else{J[0]=r[i];var a=(s=$[0])>>>31<<15,o=(s<<1>>>24)-127,s=s>>13&1023;n[i]=-24>o?a:-14>o?a+(s+1024>>-14-o):15<o?a+31744:a+(o+15<<10)+s}return n}function d(r){return Array.isArray(r)||j(r)}function y(r){return"[object "+r+"]"}function g(r){return Array.isArray(r)&&(0===r.length||"number"==typeof r[0])}function v(r){return!(!Array.isArray(r)||0===r.length||!d(r[0]))}function m(r){return Object.prototype.toString.call(r)}function x(r){if(!r)return!1;var n=m(r);return 0<=tl.indexOf(n)||g(r)||v(r)||l(r)}function b(r,n){36193===r.type?(r.data=p(n),N.freeType(n)):r.data=n}function _(r,n,i,a,o,s){if(r=void 0!==tu[r]?tu[r]:te[r]*tc[n],s&&(r*=6),o){for(a=0;1<=i;)a+=r*i*i,i/=2;return a}return r*i*a}function w(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function T(r,n){return r>>>n|r<<32-n}function A(r,n){var i=(65535&r)+(65535&n);return(r>>16)+(n>>16)+(i>>16)<<16|65535&i}function k(r){return Array.prototype.slice.call(r)}function M(r){return k(r).join("")}function S(r){return Array.isArray(r)||j(r)||l(r)}function E(r){return r.sort(function(r,n){return"viewport"===r?-1:"viewport"===n?1:r<n?-1:1})}function I(r,n,i,a){this.thisDep=r,this.contextDep=n,this.propDep=i,this.append=a}function L(r){return r&&!(r.thisDep||r.contextDep||r.propDep)}function C(r){return new I(!1,!1,!1,r)}function O(r,n){var i=r.type;if(0===i)return new I(!0,1<=(i=r.data.length),2<=i,n);if(4===i)return new I((i=r.data).thisDep,i.contextDep,i.propDep,n);if(5===i)return new I(!1,!1,!1,n);if(6===i){for(var a=i=!1,o=!1,s=0;s<r.data.length;++s){var l=r.data[s];1===l.type?o=!0:2===l.type?a=!0:3===l.type?i=!0:0===l.type?(i=!0,1<=(l=l.data)&&(a=!0),2<=l&&(o=!0)):4===l.type&&(i=i||l.data.thisDep,a=a||l.data.contextDep,o=o||l.data.propDep)}return new I(i,a,o,n)}return new I(3===i,2===i,1===i,n)}function D(r,n){for(var i=0;i<r.length;++i)if(r[i]===n)return i;return -1}var P=function(r,n){for(var i=Object.keys(n),a=0;a<i.length;++a)r[i[a]]=n[i[a]];return r},B=0,R={DynamicVariable:r,define:function(n,i){return new r(n,"["+(function r(n){if(0===n.length)return[];var i=n.charAt(0),a=n.charAt(n.length-1);if(1<n.length&&i===a&&('"'===i||"'"===i))return['"'+n.substr(1,n.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(n))return r(n.substr(0,i.index)).concat(r(i[1])).concat(r(n.substr(i.index+i[0].length)));if(1===(i=n.split(".")).length)return['"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(n=[],a=0;a<i.length;++a)n=n.concat(r(i[a]));return n})(i+"").join("][")+"]")},isDynamic:function(n){return"function"==typeof n&&!n._reglType||n instanceof r},unbox:function n(i,a){return"function"==typeof i?new r(0,i):"number"==typeof i||"boolean"==typeof i?new r(5,i):Array.isArray(i)?new r(6,i.map(function(r,i){return n(r,a+"["+i+"]")})):i instanceof r?i:void 0}},z={next:"function"==typeof requestAnimationFrame?function(r){return requestAnimationFrame(r)}:function(r){return setTimeout(r,16)},cancel:"function"==typeof cancelAnimationFrame?function(r){return cancelAnimationFrame(r)}:clearTimeout},F="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},N=s();N.zero=s();var U=function(r,n){var i=1;n.ext_texture_filter_anisotropic&&(i=r.getParameter(34047));var a=1,o=1;n.webgl_draw_buffers&&(a=r.getParameter(34852),o=r.getParameter(36063));var s=!!n.oes_texture_float;if(s){s=r.createTexture(),r.bindTexture(3553,s),r.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var l=r.createFramebuffer();if(r.bindFramebuffer(36160,l),r.framebufferTexture2D(36160,36064,3553,s,0),r.bindTexture(3553,null),36053!==r.checkFramebufferStatus(36160))s=!1;else{r.viewport(0,0,1,1),r.clearColor(1,0,0,1),r.clear(16384);var c=N.allocType(5126,4);r.readPixels(0,0,1,1,6408,5126,c),r.getError()?s=!1:(r.deleteFramebuffer(l),r.deleteTexture(s),s=1===c[0]),N.freeType(c)}}return c=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(c=r.createTexture(),l=N.allocType(5121,36),r.activeTexture(33984),r.bindTexture(34067,c),r.texImage2D(34069,0,6408,3,3,0,6408,5121,l),N.freeType(l),r.bindTexture(34067,null),r.deleteTexture(c),c=!r.getError()),{colorBits:[r.getParameter(3410),r.getParameter(3411),r.getParameter(3412),r.getParameter(3413)],depthBits:r.getParameter(3414),stencilBits:r.getParameter(3415),subpixelBits:r.getParameter(3408),extensions:Object.keys(n).filter(function(r){return!!n[r]}),maxAnisotropic:i,maxDrawbuffers:a,maxColorAttachments:o,pointSizeDims:r.getParameter(33901),lineWidthDims:r.getParameter(33902),maxViewportDims:r.getParameter(3386),maxCombinedTextureUnits:r.getParameter(35661),maxCubeMapSize:r.getParameter(34076),maxRenderbufferSize:r.getParameter(34024),maxTextureUnits:r.getParameter(34930),maxTextureSize:r.getParameter(3379),maxAttributes:r.getParameter(34921),maxVertexUniforms:r.getParameter(36347),maxVertexTextureUnits:r.getParameter(35660),maxVaryingVectors:r.getParameter(36348),maxFragmentUniforms:r.getParameter(36349),glsl:r.getParameter(35724),renderer:r.getParameter(7937),vendor:r.getParameter(7936),version:r.getParameter(7938),readFloat:s,npotTextureCube:c}},j=function(r){return r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Float32Array||r instanceof Float64Array||r instanceof Uint8ClampedArray},V=function(r){return Object.keys(r).map(function(n){return r[n]})},H={shape:function(r){for(var n=[];r.length;r=r[0])n.push(r.length);return n},flatten:function(r,n,i,a){var o=1;if(n.length)for(var s=0;s<n.length;++s)o*=n[s];else o=0;switch(i=a||N.allocType(i,o),n.length){case 0:break;case 1:for(a=n[0],n=0;n<a;++n)i[n]=r[n];break;case 2:for(a=n[0],n=n[1],s=o=0;s<a;++s)for(var l=r[s],u=0;u<n;++u)i[o++]=l[u];break;case 3:c(r,n[0],n[1],n[2],i,0);break;default:!function r(n,i,a,o,s){for(var l=1,u=a+1;u<i.length;++u)l*=i[u];var f=i[a];if(4==i.length-a){var h=i[a+1],p=i[a+2];for(i=i[a+3],u=0;u<f;++u)c(n[u],h,p,i,o,s),s+=l}else for(u=0;u<f;++u)r(n[u],i,a+1,o,s),s+=l}(r,n,0,i,0)}return i}},q={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},W={dynamic:35048,stream:35040,static:35044},Y=H.flatten,Z=H.shape,X=[];X[5120]=1,X[5122]=2,X[5124]=4,X[5121]=1,X[5123]=2,X[5125]=4,X[5126]=4;var K={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},J=new Float32Array(1),$=new Uint32Array(J.buffer),Q=[9984,9986,9985,9987],tt=[0,6409,6410,6407,6408],te={};te[6409]=te[6406]=te[6402]=1,te[34041]=te[6410]=2,te[6407]=te[35904]=3,te[6408]=te[35906]=4;var tr=y("HTMLCanvasElement"),tn=y("OffscreenCanvas"),ti=y("CanvasRenderingContext2D"),ta=y("ImageBitmap"),to=y("HTMLImageElement"),ts=y("HTMLVideoElement"),tl=Object.keys(q).concat([tr,tn,ti,ta,to,ts]),tc=[];tc[5121]=1,tc[5126]=4,tc[36193]=2,tc[5123]=2,tc[5125]=4;var tu=[];tu[32854]=2,tu[32855]=2,tu[36194]=2,tu[34041]=4,tu[33776]=.5,tu[33777]=.5,tu[33778]=1,tu[33779]=1,tu[35986]=.5,tu[35987]=1,tu[34798]=1,tu[35840]=.5,tu[35841]=.25,tu[35842]=.5,tu[35843]=.25,tu[36196]=.5;var tf=[];tf[32854]=2,tf[32855]=2,tf[36194]=2,tf[33189]=2,tf[36168]=1,tf[34041]=4,tf[35907]=4,tf[34836]=16,tf[34842]=8,tf[34843]=6;var th=function(r,n,i,a,o){function s(r){this.id=f++,this.refCount=1,this.renderbuffer=r,this.format=32854,this.height=this.width=0,o.profile&&(this.stats={size:0})}function l(n){var i=n.renderbuffer;r.bindRenderbuffer(36161,null),r.deleteRenderbuffer(i),n.renderbuffer=null,n.refCount=0,delete h[n.id],a.renderbufferCount--}var c={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};n.ext_srgb&&(c.srgba=35907),n.ext_color_buffer_half_float&&(c.rgba16f=34842,c.rgb16f=34843),n.webgl_color_buffer_float&&(c.rgba32f=34836);var u=[];Object.keys(c).forEach(function(r){u[c[r]]=r});var f=0,h={};return s.prototype.decRef=function(){0>=--this.refCount&&l(this)},o.profile&&(a.getTotalRenderbufferSize=function(){var r=0;return Object.keys(h).forEach(function(n){r+=h[n].stats.size}),r}),{create:function(n,i){function l(n,i){var a=0,s=0,h=32854;if("object"==typeof n&&n?("shape"in n?(a=0|(s=n.shape)[0],s=0|s[1]):("radius"in n&&(a=s=0|n.radius),"width"in n&&(a=0|n.width),"height"in n&&(s=0|n.height)),"format"in n&&(h=c[n.format])):"number"==typeof n?(a=0|n,s="number"==typeof i?0|i:a):n||(a=s=1),a!==f.width||s!==f.height||h!==f.format)return l.width=f.width=a,l.height=f.height=s,f.format=h,r.bindRenderbuffer(36161,f.renderbuffer),r.renderbufferStorage(36161,h,a,s),o.profile&&(f.stats.size=tf[f.format]*f.width*f.height),l.format=u[f.format],l}var f=new s(r.createRenderbuffer());return h[f.id]=f,a.renderbufferCount++,l(n,i),l.resize=function(n,i){var a=0|n,s=0|i||a;return a===f.width&&s===f.height||(l.width=f.width=a,l.height=f.height=s,r.bindRenderbuffer(36161,f.renderbuffer),r.renderbufferStorage(36161,f.format,a,s),o.profile&&(f.stats.size=tf[f.format]*f.width*f.height)),l},l._reglType="renderbuffer",l._renderbuffer=f,o.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){V(h).forEach(l)},restore:function(){V(h).forEach(function(n){n.renderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,n.renderbuffer),r.renderbufferStorage(36161,n.format,n.width,n.height)}),r.bindRenderbuffer(36161,null)}}},tp=[];tp[6408]=4,tp[6407]=3;var td=[];td[5121]=1,td[5126]=4,td[36193]=2;var ty=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tg=["x","y","z","w"],tv="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),tm={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},tx={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},tb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},t_={cw:2304,ccw:2305},tw=new I(!1,!1,!1,function(){});return function(r){function o(){if(0===tX.length)tD&&tD.update(),tQ=null;else{tQ=z.next(o),tu();for(var r=tX.length-1;0<=r;--r){var n=tX[r];n&&n(tz,null,0)}tM.flush(),tD&&tD.update()}}function s(){!tQ&&0<tX.length&&(tQ=z.next(o))}function c(){tQ&&(z.cancel(o),tQ=null)}function y(r){r.preventDefault(),c(),tK.forEach(function(r){r()})}function B(r){tM.getError(),tE.restore(),tV.restore(),tN.restore(),tH.restore(),tq.restore(),tG.restore(),tj.restore(),tD&&tD.restore(),tW.procs.refresh(),s(),tJ.forEach(function(r){r()})}function J(r){function n(r,n){var i={},a={};return Object.keys(r).forEach(function(o){var s=r[o];if(R.isDynamic(s))a[o]=R.unbox(s,o);else{if(n&&Array.isArray(s)){for(var l=0;l<s.length;++l)if(R.isDynamic(s[l]))return void(a[o]=R.unbox(s,o))}i[o]=s}}),{dynamic:a,static:i}}var i=n(r.context||{},!0),a=n(r.uniforms||{},!0),o=n(r.attributes||{},!1);r=n(function(r){function n(r){if(r in i){var n=i[r];delete i[r],Object.keys(n).forEach(function(a){i[r+"."+a]=n[a]})}}var i=P({},r);return delete i.uniforms,delete i.attributes,delete i.context,delete i.vao,"stencil"in i&&i.stencil.op&&(i.stencil.opBack=i.stencil.opFront=i.stencil.op,delete i.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in r&&(i.vao=r.vao),i}(r),!1);var s={gpuTime:0,cpuTime:0,count:0},l=tW.compile(r,o,a,i,s),c=l.draw,u=l.batch,f=l.scope,h=[];return P(function(r,n){var i;if("function"==typeof r)return f.call(this,null,r,0);if("function"==typeof n){if("number"==typeof r)for(i=0;i<r;++i)f.call(this,null,n,i);else{if(!Array.isArray(r))return f.call(this,r,n,0);for(i=0;i<r.length;++i)f.call(this,r[i],n,i)}}else if("number"==typeof r){if(0<r)return u.call(this,function(r){for(;h.length<r;)h.push(null);return h}(0|r),0|r)}else{if(!Array.isArray(r))return c.call(this,r);if(r.length)return u.call(this,r,r.length)}},{stats:s,destroy:function(){l.destroy()}})}function $(r,n){var i=0;tW.procs.poll();var a=n.color;a&&(tM.clearColor(+a[0]||0,+a[1]||0,+a[2]||0,+a[3]||0),i|=16384),"depth"in n&&(tM.clearDepth(+n.depth),i|=256),"stencil"in n&&(tM.clearStencil(0|n.stencil),i|=1024),tM.clear(i)}function tl(r){return tX.push(r),s(),{cancel:function(){var n=D(tX,r);tX[n]=function r(){var n=D(tX,r);tX[n]=tX[tX.length-1],--tX.length,0>=tX.length&&c()}}}}function tc(){var r=tY.viewport,n=tY.scissor_box;r[0]=r[1]=n[0]=n[1]=0,tz.viewportWidth=tz.framebufferWidth=tz.drawingBufferWidth=r[2]=n[2]=tM.drawingBufferWidth,tz.viewportHeight=tz.framebufferHeight=tz.drawingBufferHeight=r[3]=n[3]=tM.drawingBufferHeight}function tu(){tz.tick+=1,tz.time=tT(),tc(),tW.procs.poll()}function tf(){tH.refresh(),tc(),tW.procs.refresh(),tD&&tD.update()}function tT(){return(F()-tP)/1e3}if(!(r=function(r){var a,o,s,l,c=r||{};r={};var u=[],f=[],h="undefined"==typeof window?1:window.devicePixelRatio,p=!1,d={},y=function(r){},g=function(){};if("string"==typeof c?a=document.querySelector(c):"object"==typeof c&&("string"==typeof c.nodeName&&"function"==typeof c.appendChild&&"function"==typeof c.getBoundingClientRect?a=c:"function"==typeof c.drawArrays||"function"==typeof c.drawElements?s=(l=c).canvas:("gl"in c?l=c.gl:"canvas"in c?s=i(c.canvas):"container"in c&&(o=i(c.container)),"attributes"in c&&(r=c.attributes),"extensions"in c&&(u=n(c.extensions)),"optionalExtensions"in c&&(f=n(c.optionalExtensions)),"onDone"in c&&(y=c.onDone),"profile"in c&&(p=!!c.profile),"pixelRatio"in c&&(h=+c.pixelRatio),"cachedCode"in c&&(d=c.cachedCode))),a&&("canvas"===a.nodeName.toLowerCase()?s=a:o=a),!l){if(!s){if(!(a=function(r,n,i){function a(){var n=window.innerWidth,a=window.innerHeight;r!==document.body&&(n=(a=s.getBoundingClientRect()).right-a.left,a=a.bottom-a.top),s.width=i*n,s.height=i*a}var o,s=document.createElement("canvas");return P(s.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),r.appendChild(s),r===document.body&&(s.style.position="absolute",P(r.style,{margin:0,padding:0})),r!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(a)})).observe(r):window.addEventListener("resize",a,!1),a(),{canvas:s,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),r.removeChild(s)}}}(o||document.body,0,h)))return null;s=a.canvas,g=a.onDestroy}void 0===r.premultipliedAlpha&&(r.premultipliedAlpha=!0),l=function(r,n){function i(i){try{return r.getContext(i,n)}catch(r){return null}}return i("webgl")||i("experimental-webgl")||i("webgl-experimental")}(s,r)}return l?{gl:l,canvas:s,container:o,extensions:u,optionalExtensions:f,pixelRatio:h,profile:p,cachedCode:d,onDone:y,onDestroy:g}:(g(),y("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(r)))return null;var tA,tk,tM=r.gl,tS=tM.getContextAttributes();tM.isContextLost();var tE=function(r,n){function i(n){var i;n=n.toLowerCase();try{i=a[n]=r.getExtension(n)}catch(r){}return!!i}for(var a={},o=0;o<n.extensions.length;++o){var s=n.extensions[o];if(!i(s))return n.onDestroy(),n.onDone('"'+s+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return n.optionalExtensions.forEach(i),{extensions:a,restore:function(){Object.keys(a).forEach(function(r){if(a[r]&&!i(r))throw Error("(regl): error restoring extension "+r)})}}}(tM,r);if(!tE)return null;var tI=(tA={"":0},tk=[""],{id:function(r){var n=tA[r];return n||(n=tA[r]=tk.length,tk.push(r),n)},str:function(r){return tk[r]}}),tL={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},tC=r.cachedCode||{},tO=tE.extensions,tD=function(r,n){function i(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function a(r,n,a){var o=l.pop()||new i;o.startQueryIndex=r,o.endQueryIndex=n,o.sum=0,o.stats=a,c.push(o)}if(!n.ext_disjoint_timer_query)return null;var o=[],s=[],l=[],c=[],u=[],f=[];return{beginQuery:function(r){var i=o.pop()||n.ext_disjoint_timer_query.createQueryEXT();n.ext_disjoint_timer_query.beginQueryEXT(35007,i),s.push(i),a(s.length-1,s.length,r)},endQuery:function(){n.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:a,update:function(){var r,i;if(0!==(r=s.length)){f.length=Math.max(f.length,r+1),u.length=Math.max(u.length,r+1),u[0]=0;var a=f[0]=0;for(i=r=0;i<s.length;++i){var h=s[i];n.ext_disjoint_timer_query.getQueryObjectEXT(h,34919)?(a+=n.ext_disjoint_timer_query.getQueryObjectEXT(h,34918),o.push(h)):s[r++]=h,u[i+1]=a,f[i+1]=r}for(s.length=r,i=r=0;i<c.length;++i){var p=(a=c[i]).startQueryIndex;h=a.endQueryIndex,a.sum+=u[h]-u[p],p=f[p],(h=f[h])===p?(a.stats.gpuTime+=a.sum/1e6,l.push(a)):(a.startQueryIndex=p,a.endQueryIndex=h,c[r++]=a)}c.length=r}},getNumPendingQueries:function(){return s.length},clear:function(){o.push.apply(o,s);for(var r=0;r<o.length;r++)n.ext_disjoint_timer_query.deleteQueryEXT(o[r]);s.length=0,o.length=0},restore:function(){s.length=0,o.length=0}}}(0,tO),tP=F(),tB=tM.drawingBufferWidth,tR=tM.drawingBufferHeight,tz={tick:0,time:0,viewportWidth:tB,viewportHeight:tR,framebufferWidth:tB,framebufferHeight:tR,drawingBufferWidth:tB,drawingBufferHeight:tR,pixelRatio:r.pixelRatio},tF=(tB={elements:null,primitive:4,count:-1,offset:0,instances:-1},U(tM,tO)),tN=function(r,n,i,a){function o(n){this.id=d++,this.buffer=r.createBuffer(),this.type=n,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,i.profile&&(this.stats={size:0})}function s(n,i,a){n.byteLength=i.byteLength,r.bufferData(n.type,i,a)}function c(r,n,i,a,o,c){if(r.usage=i,Array.isArray(n)){if(r.dtype=a||5126,0<n.length){if(Array.isArray(n[0])){o=Z(n);for(var p=a=1;p<o.length;++p)a*=o[p];r.dimension=a,s(r,n=Y(n,o,r.dtype),i),c?r.persistentData=n:N.freeType(n)}else"number"==typeof n[0]?(r.dimension=o,f(o=N.allocType(r.dtype,n.length),n),s(r,o,i),c?r.persistentData=o:N.freeType(o)):j(n[0])&&(r.dimension=n[0].length,r.dtype=a||u(n[0])||5126,s(r,n=Y(n,[n.length,n[0].length],r.dtype),i),c?r.persistentData=n:N.freeType(n))}}else if(j(n))r.dtype=a||u(n),r.dimension=o,s(r,n,i),c&&(r.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(l(n)){o=n.shape;var d=n.stride,y=(p=n.offset,0),g=0,v=0,m=0;1===o.length?(y=o[0],g=1,v=d[0],m=0):2===o.length&&(y=o[0],g=o[1],v=d[0],m=d[1]),r.dtype=a||u(n.data)||5126,r.dimension=g,h(o=N.allocType(r.dtype,y*g),n.data,y,g,v,m,p),s(r,o,i),c?r.persistentData=o:N.freeType(o)}else n instanceof ArrayBuffer&&(r.dtype=5121,r.dimension=o,s(r,n,i),c&&(r.persistentData=new Uint8Array(new Uint8Array(n))))}function p(i){n.bufferCount--,a(i),r.deleteBuffer(i.buffer),i.buffer=null,delete y[i.id]}var d=0,y={};o.prototype.bind=function(){r.bindBuffer(this.type,this.buffer)},o.prototype.destroy=function(){p(this)};var g=[];return i.profile&&(n.getTotalBufferSize=function(){var r=0;return Object.keys(y).forEach(function(n){r+=y[n].stats.size}),r}),{create:function(a,s,d,g){function v(n){var a=35044,o=null,s=0,u=0,f=1;return Array.isArray(n)||j(n)||l(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?s=0|n:n&&("data"in n&&(o=n.data),"usage"in n&&(a=W[n.usage]),"type"in n&&(u=G[n.type]),"dimension"in n&&(f=0|n.dimension),"length"in n&&(s=0|n.length)),m.bind(),o?c(m,o,a,u,f,g):(s&&r.bufferData(m.type,s,a),m.dtype=u||5121,m.usage=a,m.dimension=f,m.byteLength=s),i.profile&&(m.stats.size=m.byteLength*X[m.dtype]),v}n.bufferCount++;var m=new o(s);return y[m.id]=m,d||v(a),v._reglType="buffer",v._buffer=m,v.subdata=function(n,i){var a,o=0|(i||0);if(m.bind(),j(n)||n instanceof ArrayBuffer)r.bufferSubData(m.type,o,n);else if(Array.isArray(n)){if(0<n.length){if("number"==typeof n[0]){var s=N.allocType(m.dtype,n.length);f(s,n),r.bufferSubData(m.type,o,s),N.freeType(s)}else(Array.isArray(n[0])||j(n[0]))&&(a=Z(n),s=Y(n,a,m.dtype),r.bufferSubData(m.type,o,s),N.freeType(s))}}else if(l(n)){a=n.shape;var c=n.stride,p=s=0,d=0,y=0;1===a.length?(s=a[0],p=1,d=c[0],y=0):2===a.length&&(s=a[0],p=a[1],d=c[0],y=c[1]),a=Array.isArray(n.data)?m.dtype:u(n.data),h(a=N.allocType(a,s*p),n.data,s,p,d,y,n.offset),r.bufferSubData(m.type,o,a),N.freeType(a)}return v},i.profile&&(v.stats=m.stats),v.destroy=function(){p(m)},v},createStream:function(r,n){var i=g.pop();return i||(i=new o(r)),i.bind(),c(i,n,35040,0,1,!1),i},destroyStream:function(r){g.push(r)},clear:function(){V(y).forEach(p),g.forEach(p)},getBuffer:function(r){return r&&r._buffer instanceof o?r._buffer:null},restore:function(){V(y).forEach(function(n){n.buffer=r.createBuffer(),r.bindBuffer(n.type,n.buffer),r.bufferData(n.type,n.persistentData||n.byteLength,n.usage)})},_initBuffer:c}}(tM,tL,r,function(r){return tj.destroyBuffer(r)}),tU=function(r,n,i,a){function o(r){this.id=f++,u[this.id]=this,this.buffer=r,this.primType=4,this.type=this.vertCount=0}function s(a,o,s,c,u,f,h){var p;if(a.buffer.bind(),o?((p=h)||j(o)&&(!l(o)||j(o.data))||(p=n.oes_element_index_uint?5125:5123),i._initBuffer(a.buffer,o,s,p,3)):(r.bufferData(34963,f,s),a.buffer.dtype=p||5121,a.buffer.usage=s,a.buffer.dimension=3,a.buffer.byteLength=f),p=h,!h){switch(a.buffer.dtype){case 5121:case 5120:p=5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125}a.buffer.dtype=p}a.type=p,0>(o=u)&&(o=a.buffer.byteLength,5123===p?o>>=1:5125===p&&(o>>=2)),a.vertCount=o,o=c,0>c&&(o=4,1===(c=a.buffer.dimension)&&(o=0),2===c&&(o=1),3===c&&(o=4)),a.primType=o}function c(r){a.elementsCount--,delete u[r.id],r.buffer.destroy(),r.buffer=null}var u={},f=0,h={uint8:5121,uint16:5123};n.oes_element_index_uint&&(h.uint32=5125),o.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(r,n){function u(r){if(r){if("number"==typeof r)f(r),p.primType=4,p.vertCount=0|r,p.type=5121;else{var n=null,i=35044,a=-1,o=-1,c=0,d=0;Array.isArray(r)||j(r)||l(r)?n=r:("data"in r&&(n=r.data),"usage"in r&&(i=W[r.usage]),"primitive"in r&&(a=K[r.primitive]),"count"in r&&(o=0|r.count),"type"in r&&(d=h[r.type]),"length"in r?c=0|r.length:(c=o,5123===d||5122===d?c*=2:5125!==d&&5124!==d||(c*=4))),s(p,n,i,a,o,c,d)}}else f(),p.primType=4,p.vertCount=0,p.type=5121;return u}var f=i.create(null,34963,!0),p=new o(f._buffer);return a.elementsCount++,u(r),u._reglType="elements",u._elements=p,u.subdata=function(r,n){return f.subdata(r,n),u},u.destroy=function(){c(p)},u},createStream:function(r){var n=p.pop();return n||(n=new o(i.create(null,34963,!0,!1)._buffer)),s(n,r,35040,-1,-1,0,0),n},destroyStream:function(r){p.push(r)},getElements:function(r){return"function"==typeof r&&r._elements instanceof o?r._elements:null},clear:function(){V(u).forEach(c)}}}(tM,tO,tN,tL),tj=function(r,n,i,a,o,s,c){function u(){this.id=++p,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var r=n.oes_vertex_array_object;this.vao=r?r.createVertexArrayOES():null,d[this.id]=this,this.buffers=[]}var f=i.maxAttributes,h=Array(f);for(i=0;i<f;++i)h[i]=new w;var p=0,d={},y={Record:w,scope:{},state:h,currentVAO:null,targetVAO:null,restore:n.oes_vertex_array_object?function(){n.oes_vertex_array_object&&V(d).forEach(function(r){r.refresh()})}:function(){},createVAO:function(r){function n(r){Array.isArray(r)?(u=r,i.elements&&i.ownsElements&&i.elements.destroy(),i.elements=null,i.ownsElements=!1,i.offset=0,i.count=0,i.instances=-1,i.primitive=4):(r.elements?(u=r.elements,i.ownsElements?("function"==typeof u&&"elements"===u._reglType?i.elements.destroy():i.elements(u),i.ownsElements=!1):s.getElements(r.elements)?(i.elements=r.elements,i.ownsElements=!1):(i.elements=s.create(r.elements),i.ownsElements=!0)):(i.elements=null,i.ownsElements=!1),u=r.attributes,i.offset=0,i.count=-1,i.instances=-1,i.primitive=4,i.elements&&(i.count=i.elements._elements.vertCount,i.primitive=i.elements._elements.primType),"offset"in r&&(i.offset=0|r.offset),"count"in r&&(i.count=0|r.count),"instances"in r&&(i.instances=0|r.instances),"primitive"in r&&(i.primitive=K[r.primitive])),r={};var a=i.attributes;a.length=u.length;for(var c=0;c<u.length;++c){var u,f,h=u[c],p=a[c]=new w,d=h.data||h;Array.isArray(d)||j(d)||l(d)?(i.buffers[c]&&(f=i.buffers[c],j(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),i.buffers[c]=null)),i.buffers[c]||(f=i.buffers[c]=o.create(h,34962,!1,!0)),p.buffer=o.getBuffer(f),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1,r[c]=1):o.getBuffer(h)?(p.buffer=o.getBuffer(h),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1):o.getBuffer(h.buffer)?(p.buffer=o.getBuffer(h.buffer),p.size=0|(+h.size||p.buffer.dimension),p.normalized=!!h.normalized,p.type="type"in h?G[h.type]:p.buffer.dtype,p.offset=0|(h.offset||0),p.stride=0|(h.stride||0),p.divisor=0|(h.divisor||0),p.state=1):"x"in h&&(p.x=+h.x||0,p.y=+h.y||0,p.z=+h.z||0,p.w=+h.w||0,p.state=2)}for(f=0;f<i.buffers.length;++f)!r[f]&&i.buffers[f]&&(i.buffers[f].destroy(),i.buffers[f]=null);return i.refresh(),n}var i=new u;return a.vaoCount+=1,n.destroy=function(){for(var r=0;r<i.buffers.length;++r)i.buffers[r]&&i.buffers[r].destroy();i.buffers.length=0,i.ownsElements&&(i.elements.destroy(),i.elements=null,i.ownsElements=!1),i.destroy()},n._vao=i,n._reglType="vao",n(r)},getVAO:function(r){return"function"==typeof r&&r._vao?r._vao:null},destroyBuffer:function(n){for(var i=0;i<h.length;++i){var a=h[i];a.buffer===n&&(r.disableVertexAttribArray(i),a.buffer=null)}},setVAO:n.oes_vertex_array_object?function(r){if(r!==y.currentVAO){var i=n.oes_vertex_array_object;r?i.bindVertexArrayOES(r.vao):i.bindVertexArrayOES(null),y.currentVAO=r}}:function(i){if(i!==y.currentVAO){if(i)i.bindAttrs();else{for(var a=n.angle_instanced_arrays,o=0;o<h.length;++o){var s=h[o];s.buffer?(r.enableVertexAttribArray(o),s.buffer.bind(),r.vertexAttribPointer(o,s.size,s.type,s.normalized,s.stride,s.offfset),a&&s.divisor&&a.vertexAttribDivisorANGLE(o,s.divisor)):(r.disableVertexAttribArray(o),r.vertexAttrib4f(o,s.x,s.y,s.z,s.w))}c.elements?r.bindBuffer(34963,c.elements.buffer.buffer):r.bindBuffer(34963,null)}y.currentVAO=i}},clear:n.oes_vertex_array_object?function(){V(d).forEach(function(r){r.destroy()})}:function(){}};return u.prototype.bindAttrs=function(){for(var i=n.angle_instanced_arrays,a=this.attributes,o=0;o<a.length;++o){var l=a[o];l.buffer?(r.enableVertexAttribArray(o),r.bindBuffer(34962,l.buffer.buffer),r.vertexAttribPointer(o,l.size,l.type,l.normalized,l.stride,l.offset),i&&l.divisor&&i.vertexAttribDivisorANGLE(o,l.divisor)):(r.disableVertexAttribArray(o),r.vertexAttrib4f(o,l.x,l.y,l.z,l.w))}for(i=a.length;i<f;++i)r.disableVertexAttribArray(i);(i=s.getElements(this.elements))?r.bindBuffer(34963,i.buffer.buffer):r.bindBuffer(34963,null)},u.prototype.refresh=function(){var r=n.oes_vertex_array_object;r&&(r.bindVertexArrayOES(this.vao),this.bindAttrs(),y.currentVAO=null,r.bindVertexArrayOES(null))},u.prototype.destroy=function(){if(this.vao){var r=n.oes_vertex_array_object;this===y.currentVAO&&(y.currentVAO=null,r.bindVertexArrayOES(null)),r.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),d[this.id]&&(delete d[this.id],--a.vaoCount)},y}(tM,tO,tF,tL,tN,tU,tB),tV=function(r,n,i,a){function o(r,n,i,a){this.name=r,this.id=n,this.location=i,this.info=a}function s(r,n){for(var i=0;i<r.length;++i)if(r[i].id===n.id)return void(r[i].location=n.location);r.push(n)}function l(i,a,o){if(!(l=(o=35632===i?f:h)[a])){var s=n.str(a),l=r.createShader(i);r.shaderSource(l,s),r.compileShader(l),o[a]=l}return l}function c(r,n){this.id=y++,this.fragId=r,this.vertId=n,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(i,c,u){f=l(35632,i.fragId);var f,h=l(35633,i.vertId);if(c=i.program=r.createProgram(),r.attachShader(c,f),r.attachShader(c,h),u)for(f=0;f<u.length;++f)h=u[f],r.bindAttribLocation(c,h[0],h[1]);r.linkProgram(c),h=r.getProgramParameter(c,35718),a.profile&&(i.stats.uniformsCount=h);var p=i.uniforms;for(f=0;f<h;++f)if(u=r.getActiveUniform(c,f)){if(1<u.size)for(var d=0;d<u.size;++d){var y=u.name.replace("[0]","["+d+"]");s(p,new o(y,n.id(y),r.getUniformLocation(c,y),u))}else s(p,new o(u.name,n.id(u.name),r.getUniformLocation(c,u.name),u))}for(h=r.getProgramParameter(c,35721),a.profile&&(i.stats.attributesCount=h),i=i.attributes,f=0;f<h;++f)(u=r.getActiveAttrib(c,f))&&s(i,new o(u.name,n.id(u.name),r.getAttribLocation(c,u.name),u))}var f={},h={},p={},d=[],y=0;return a.profile&&(i.getMaxUniformsCount=function(){var r=0;return d.forEach(function(n){n.stats.uniformsCount>r&&(r=n.stats.uniformsCount)}),r},i.getMaxAttributesCount=function(){var r=0;return d.forEach(function(n){n.stats.attributesCount>r&&(r=n.stats.attributesCount)}),r}),{clear:function(){var n=r.deleteShader.bind(r);V(f).forEach(n),f={},V(h).forEach(n),h={},d.forEach(function(n){r.deleteProgram(n.program)}),d.length=0,p={},i.shaderCount=0},program:function(n,a,o,s){var l=p[a];l||(l=p[a]={});var y=l[n];if(y&&(y.refCount++,!s))return y;var g=new c(a,n);return i.shaderCount++,u(g,o,s),y||(l[n]=g),d.push(g),P(g,{destroy:function(){if(g.refCount--,0>=g.refCount){r.deleteProgram(g.program);var n=d.indexOf(g);d.splice(n,1),i.shaderCount--}0>=l[g.vertId].refCount&&(r.deleteShader(h[g.vertId]),delete h[g.vertId],delete p[g.fragId][g.vertId]),Object.keys(p[g.fragId]).length||(r.deleteShader(f[g.fragId]),delete f[g.fragId],delete p[g.fragId])}})},restore:function(){f={},h={};for(var r=0;r<d.length;++r)u(d[r],null,d[r].attributes.map(function(r){return[r.location,r.name]}))},shader:l,frag:-1,vert:-1}}(tM,tI,tL,r),tH=function(r,n,i,a,o,s,c){function u(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function f(r,n){r.internalformat=n.internalformat,r.format=n.format,r.type=n.type,r.compressed=n.compressed,r.premultiplyAlpha=n.premultiplyAlpha,r.flipY=n.flipY,r.unpackAlignment=n.unpackAlignment,r.colorSpace=n.colorSpace,r.width=n.width,r.height=n.height,r.channels=n.channels}function h(r,n){if("object"==typeof n&&n){"premultiplyAlpha"in n&&(r.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(r.flipY=n.flipY),"alignment"in n&&(r.unpackAlignment=n.alignment),"colorSpace"in n&&(r.colorSpace=K[n.colorSpace]),"type"in n&&(r.type=J[n.type]);var i=r.width,a=r.height,o=r.channels,s=!1;"shape"in n?(i=n.shape[0],a=n.shape[1],3===n.shape.length&&(o=n.shape[2],s=!0)):("radius"in n&&(i=a=n.radius),"width"in n&&(i=n.width),"height"in n&&(a=n.height),"channels"in n&&(o=n.channels,s=!0)),r.width=0|i,r.height=0|a,r.channels=0|o,i=!1,"format"in n&&(i=n.format,a=r.internalformat=$[i],r.format=tg[a],i in J&&!("type"in n)&&(r.type=J[i]),i in tl&&(r.compressed=!0),i=!0),!s&&i?r.channels=te[r.format]:s&&!i&&r.channels!==tt[r.format]&&(r.format=r.internalformat=tt[r.channels])}}function y(n){r.pixelStorei(37440,n.flipY),r.pixelStorei(37441,n.premultiplyAlpha),r.pixelStorei(37443,n.colorSpace),r.pixelStorei(3317,n.unpackAlignment)}function w(){u.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(r,n){var i=null;if(x(n)?i=n:n&&(h(r,n),"x"in n&&(r.xOffset=0|n.x),"y"in n&&(r.yOffset=0|n.y),x(n.data)&&(i=n.data)),n.copy){var a=o.viewportWidth,s=o.viewportHeight;r.width=r.width||a-r.xOffset,r.height=r.height||s-r.yOffset,r.needsCopy=!0}else if(i){if(j(i))r.channels=r.channels||4,r.data=i,"type"in n||5121!==r.type||(r.type=0|q[Object.prototype.toString.call(i)]);else if(g(i)){switch(r.channels=r.channels||4,s=(a=i).length,r.type){case 5121:case 5123:case 5125:case 5126:(s=N.allocType(r.type,s)).set(a),r.data=s;break;case 36193:r.data=p(a)}r.alignment=1,r.needsFree=!0}else if(l(i)){Array.isArray(a=i.data)||5121!==r.type||(r.type=0|q[Object.prototype.toString.call(a)]),s=i.shape;var c,u,f,y,_=i.stride;3===s.length?(f=s[2],y=_[2]):y=f=1,c=s[0],u=s[1],s=_[0],_=_[1],r.alignment=1,r.width=c,r.height=u,r.channels=f,r.format=r.internalformat=tt[f],r.needsFree=!0,c=y,i=i.offset,f=r.width,y=r.height,u=r.channels;for(var w=N.allocType(36193===r.type?5126:r.type,f*y*u),T=0,A=0;A<y;++A)for(var k=0;k<f;++k)for(var M=0;M<u;++M)w[T++]=a[s*k+_*A+c*M+i];b(r,w)}else if(m(i)===tr||m(i)===tn||m(i)===ti)m(i)===tr||m(i)===tn?r.element=i:r.element=i.canvas,r.width=r.element.width,r.height=r.element.height,r.channels=4;else if(m(i)===ta)r.element=i,r.width=i.width,r.height=i.height,r.channels=4;else if(m(i)===to)r.element=i,r.width=i.naturalWidth,r.height=i.naturalHeight,r.channels=4;else if(m(i)===ts)r.element=i,r.width=i.videoWidth,r.height=i.videoHeight,r.channels=4;else if(v(i)){for(a=r.width||i[0].length,s=r.height||i.length,_=r.channels,_=d(i[0][0])?_||i[0][0].length:_||1,c=H.shape(i),f=1,y=0;y<c.length;++y)f*=c[y];f=N.allocType(36193===r.type?5126:r.type,f),H.flatten(i,c,"",f),b(r,f),r.alignment=1,r.width=a,r.height=s,r.channels=_,r.format=r.internalformat=tt[_],r.needsFree=!0}}else r.width=r.width||1,r.height=r.height||1,r.channels=r.channels||4}function A(n,i,o,s,l){var c=n.element,u=n.data,f=n.internalformat,h=n.format,p=n.type,d=n.width,g=n.height;y(n),c?r.texSubImage2D(i,l,o,s,h,p,c):n.compressed?r.compressedTexSubImage2D(i,l,o,s,f,d,g,u):n.needsCopy?(a(),r.copyTexSubImage2D(i,l,o,s,n.xOffset,n.yOffset,d,g)):r.texSubImage2D(i,l,o,s,d,g,h,p,u)}function k(){return tv.pop()||new w}function M(r){r.needsFree&&N.freeType(r.data),w.call(r),tv.push(r)}function S(){u.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function E(r,n,i){var a=r.images[0]=k();r.mipmask=1,a.width=r.width=n,a.height=r.height=i,a.channels=r.channels=4}function I(r,n){var i=null;if(x(n))f(i=r.images[0]=k(),r),T(i,n),r.mipmask=1;else if(h(r,n),Array.isArray(n.mipmap))for(var a=n.mipmap,o=0;o<a.length;++o)f(i=r.images[o]=k(),r),i.width>>=o,i.height>>=o,T(i,a[o]),r.mipmask|=1<<o;else f(i=r.images[0]=k(),r),T(i,n),r.mipmask=1;f(r,r.images[0])}function L(n,i){for(var o=n.images,s=0;s<o.length&&o[s];++s){var l=o[s],c=s,u=l.element,f=l.data,h=l.internalformat,p=l.format,d=l.type,g=l.width,v=l.height;y(l),u?r.texImage2D(i,c,p,p,d,u):l.compressed?r.compressedTexImage2D(i,c,h,g,v,0,f):l.needsCopy?(a(),r.copyTexImage2D(i,c,p,l.xOffset,l.yOffset,g,v,0)):r.texImage2D(i,c,p,g,v,0,p,d,f||null)}}function C(){var r=tm.pop()||new S;u.call(r);for(var n=r.mipmask=0;16>n;++n)r.images[n]=null;return r}function O(r){for(var n=r.images,i=0;i<n.length;++i)n[i]&&M(n[i]),n[i]=null;tm.push(r)}function D(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function B(r,n){"min"in n&&(r.minFilter=X[n.min],!(0<=Q.indexOf(r.minFilter))||"faces"in n||(r.genMipmaps=!0)),"mag"in n&&(r.magFilter=Z[n.mag]);var i=r.wrapS,a=r.wrapT;if("wrap"in n){var o=n.wrap;"string"==typeof o?i=a=Y[o]:Array.isArray(o)&&(i=Y[o[0]],a=Y[o[1]])}else"wrapS"in n&&(i=Y[n.wrapS]),"wrapT"in n&&(a=Y[n.wrapT]);if(r.wrapS=i,r.wrapT=a,"anisotropic"in n&&(r.anisotropic=n.anisotropic),"mipmap"in n){switch(i=!1,typeof n.mipmap){case"string":r.mipmapHint=W[n.mipmap],i=r.genMipmaps=!0;break;case"boolean":i=r.genMipmaps=n.mipmap;break;case"object":r.genMipmaps=!1,i=!0}!i||"min"in n||(r.minFilter=9984)}}function R(i,a){r.texParameteri(a,10241,i.minFilter),r.texParameteri(a,10240,i.magFilter),r.texParameteri(a,10242,i.wrapS),r.texParameteri(a,10243,i.wrapT),n.ext_texture_filter_anisotropic&&r.texParameteri(a,34046,i.anisotropic),i.genMipmaps&&(r.hint(33170,i.mipmapHint),r.generateMipmap(a))}function z(n){u.call(this),this.mipmask=0,this.internalformat=6408,this.id=tx++,this.refCount=1,this.target=n,this.texture=r.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new D,c.profile&&(this.stats={size:0})}function F(n){r.activeTexture(33984),r.bindTexture(n.target,n.texture)}function U(){var n=tw[0];n?r.bindTexture(n.target,n.texture):r.bindTexture(3553,null)}function G(n){var i=n.texture,a=n.unit,o=n.target;0<=a&&(r.activeTexture(33984+a),r.bindTexture(o,null),tw[a]=null),r.deleteTexture(i),n.texture=null,n.params=null,n.pixels=null,n.refCount=0,delete tb[n.id],s.textureCount--}var W={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Y={repeat:10497,clamp:33071,mirror:33648},Z={nearest:9728,linear:9729},X=P({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Z),K={none:0,browser:37444},J={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},$={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},tl={};n.ext_srgb&&($.srgb=35904,$.srgba=35906),n.oes_texture_float&&(J.float32=J.float=5126),n.oes_texture_half_float&&(J.float16=J["half float"]=36193),n.webgl_depth_texture&&(P($,{depth:6402,"depth stencil":34041}),P(J,{uint16:5123,uint32:5125,"depth stencil":34042})),n.webgl_compressed_texture_s3tc&&P(tl,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),n.webgl_compressed_texture_atc&&P(tl,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),n.webgl_compressed_texture_pvrtc&&P(tl,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),n.webgl_compressed_texture_etc1&&(tl["rgb etc1"]=36196);var tc=Array.prototype.slice.call(r.getParameter(34467));Object.keys(tl).forEach(function(r){var n=tl[r];0<=tc.indexOf(n)&&($[r]=n)});var tu=Object.keys($);i.textureFormats=tu;var tf=[];Object.keys($).forEach(function(r){tf[$[r]]=r});var th=[];Object.keys(J).forEach(function(r){th[J[r]]=r});var tp=[];Object.keys(Z).forEach(function(r){tp[Z[r]]=r});var td=[];Object.keys(X).forEach(function(r){td[X[r]]=r});var ty=[];Object.keys(Y).forEach(function(r){ty[Y[r]]=r});var tg=tu.reduce(function(r,i){var a=$[i];return 6409===a||6406===a||6409===a||6410===a||6402===a||34041===a||n.ext_srgb&&(35904===a||35906===a)?r[a]=a:32855===a||0<=i.indexOf("rgba")?r[a]=6408:r[a]=6407,r},{}),tv=[],tm=[],tx=0,tb={},t_=i.maxTextureUnits,tw=Array(t_).map(function(){return null});return P(z.prototype,{bind:function(){this.bindCount+=1;var n=this.unit;if(0>n){for(var i=0;i<t_;++i){var a=tw[i];if(a){if(0<a.bindCount)continue;a.unit=-1}tw[i]=this,n=i;break}c.profile&&s.maxTextureUnits<n+1&&(s.maxTextureUnits=n+1),this.unit=n,r.activeTexture(33984+n),r.bindTexture(this.target,this.texture)}return n},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&G(this)}}),c.profile&&(s.getTotalTextureSize=function(){var r=0;return Object.keys(tb).forEach(function(n){r+=tb[n].stats.size}),r}),{create2D:function(n,i){function a(r,n){var i=o.texInfo;D.call(i);var s=C();return"number"==typeof r?E(s,0|r,"number"==typeof n?0|n:0|r):r?(B(i,r),I(s,r)):E(s,1,1),i.genMipmaps&&(s.mipmask=(s.width<<1)-1),o.mipmask=s.mipmask,f(o,s),o.internalformat=s.internalformat,a.width=s.width,a.height=s.height,F(o),L(s,3553),R(i,3553),U(),O(s),c.profile&&(o.stats.size=_(o.internalformat,o.type,s.width,s.height,i.genMipmaps,!1)),a.format=tf[o.internalformat],a.type=th[o.type],a.mag=tp[i.magFilter],a.min=td[i.minFilter],a.wrapS=ty[i.wrapS],a.wrapT=ty[i.wrapT],a}var o=new z(3553);return tb[o.id]=o,s.textureCount++,a(n,i),a.subimage=function(r,n,i,s){n|=0,i|=0,s|=0;var l=k();return f(l,o),l.width=0,l.height=0,T(l,r),l.width=l.width||(o.width>>s)-n,l.height=l.height||(o.height>>s)-i,F(o),A(l,3553,n,i,s),U(),M(l),a},a.resize=function(n,i){var s=0|n,l=0|i||s;if(s===o.width&&l===o.height)return a;a.width=o.width=s,a.height=o.height=l,F(o);for(var u=0;o.mipmask>>u;++u){var f=s>>u,h=l>>u;if(!f||!h)break;r.texImage2D(3553,u,o.format,f,h,0,o.format,o.type,null)}return U(),c.profile&&(o.stats.size=_(o.internalformat,o.type,s,l,!1,!1)),a},a._reglType="texture2d",a._texture=o,c.profile&&(a.stats=o.stats),a.destroy=function(){o.decRef()},a},createCube:function(n,i,a,o,l,u){function p(r,n,i,a,o,s){var l,u=d.texInfo;for(D.call(u),l=0;6>l;++l)y[l]=C();if("number"!=typeof r&&r){if("object"==typeof r){if(n)I(y[0],r),I(y[1],n),I(y[2],i),I(y[3],a),I(y[4],o),I(y[5],s);else if(B(u,r),h(d,r),"faces"in r)for(r=r.faces,l=0;6>l;++l)f(y[l],d),I(y[l],r[l]);else for(l=0;6>l;++l)I(y[l],r)}}else for(r=0|r||1,l=0;6>l;++l)E(y[l],r,r);for(f(d,y[0]),d.mipmask=u.genMipmaps?(y[0].width<<1)-1:y[0].mipmask,d.internalformat=y[0].internalformat,p.width=y[0].width,p.height=y[0].height,F(d),l=0;6>l;++l)L(y[l],34069+l);for(R(u,34067),U(),c.profile&&(d.stats.size=_(d.internalformat,d.type,p.width,p.height,u.genMipmaps,!0)),p.format=tf[d.internalformat],p.type=th[d.type],p.mag=tp[u.magFilter],p.min=td[u.minFilter],p.wrapS=ty[u.wrapS],p.wrapT=ty[u.wrapT],l=0;6>l;++l)O(y[l]);return p}var d=new z(34067);tb[d.id]=d,s.cubeCount++;var y=Array(6);return p(n,i,a,o,l,u),p.subimage=function(r,n,i,a,o){i|=0,a|=0,o|=0;var s=k();return f(s,d),s.width=0,s.height=0,T(s,n),s.width=s.width||(d.width>>o)-i,s.height=s.height||(d.height>>o)-a,F(d),A(s,34069+r,i,a,o),U(),M(s),p},p.resize=function(n){if((n|=0)!==d.width){p.width=d.width=n,p.height=d.height=n,F(d);for(var i=0;6>i;++i)for(var a=0;d.mipmask>>a;++a)r.texImage2D(34069+i,a,d.format,n>>a,n>>a,0,d.format,d.type,null);return U(),c.profile&&(d.stats.size=_(d.internalformat,d.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=d,c.profile&&(p.stats=d.stats),p.destroy=function(){d.decRef()},p},clear:function(){for(var n=0;n<t_;++n)r.activeTexture(33984+n),r.bindTexture(3553,null),tw[n]=null;V(tb).forEach(G),s.cubeCount=0,s.textureCount=0},getTexture:function(r){return null},restore:function(){for(var n=0;n<t_;++n){var i=tw[n];i&&(i.bindCount=0,i.unit=-1,tw[n]=null)}V(tb).forEach(function(n){n.texture=r.createTexture(),r.bindTexture(n.target,n.texture);for(var i=0;32>i;++i)if(0!=(n.mipmask&1<<i)){if(3553===n.target)r.texImage2D(3553,i,n.internalformat,n.width>>i,n.height>>i,0,n.internalformat,n.type,null);else for(var a=0;6>a;++a)r.texImage2D(34069+a,i,n.internalformat,n.width>>i,n.height>>i,0,n.internalformat,n.type,null)}R(n.texInfo,n.target)})},refresh:function(){for(var n=0;n<t_;++n){var i=tw[n];i&&(i.bindCount=0,i.unit=-1,tw[n]=null),r.activeTexture(33984+n),r.bindTexture(3553,null),r.bindTexture(34067,null)}}}}(tM,tO,tF,function(){tW.procs.poll()},tz,tL,r),tq=th(tM,tO,0,tL,r),tG=function(r,n,i,a,o,s){function l(r,n,i){this.target=r,this.texture=n,this.renderbuffer=i;var a=r=0;n?(r=n.width,a=n.height):i&&(r=i.width,a=i.height),this.width=r,this.height=a}function c(r){r&&(r.texture&&r.texture._texture.decRef(),r.renderbuffer&&r.renderbuffer._renderbuffer.decRef())}function u(r,n,i){r&&(r.texture?r.texture._texture.refCount+=1:r.renderbuffer._renderbuffer.refCount+=1)}function f(n,i){i&&(i.texture?r.framebufferTexture2D(36160,n,i.target,i.texture._texture.texture,0):r.framebufferRenderbuffer(36160,n,36161,i.renderbuffer._renderbuffer.renderbuffer))}function h(r){var n=3553,i=null,a=null,o=r;return"object"==typeof r&&(o=r.data,"target"in r&&(n=0|r.target)),"texture2d"===(r=o._reglType)||"textureCube"===r?i=o:"renderbuffer"===r&&(a=o,n=36161),new l(n,i,a)}function p(r,n,i,s,c){return i?((r=a.create2D({width:r,height:n,format:s,type:c}))._texture.refCount=0,new l(3553,r,null)):((r=o.create({width:r,height:n,format:s}))._renderbuffer.refCount=0,new l(36161,null,r))}function d(r){return r&&(r.texture||r.renderbuffer)}function y(r,n,i){r&&(r.texture?r.texture.resize(n,i):r.renderbuffer&&r.renderbuffer.resize(n,i),r.width=n,r.height=i)}function g(){this.id=k++,M[this.id]=this,this.framebuffer=r.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function v(r){r.colorAttachments.forEach(c),c(r.depthAttachment),c(r.stencilAttachment),c(r.depthStencilAttachment)}function m(n){r.deleteFramebuffer(n.framebuffer),n.framebuffer=null,s.framebufferCount--,delete M[n.id]}function x(n){r.bindFramebuffer(36160,n.framebuffer);var a,o=n.colorAttachments;for(a=0;a<o.length;++a)f(36064+a,o[a]);for(a=o.length;a<i.maxColorAttachments;++a)r.framebufferTexture2D(36160,36064+a,3553,null,0);r.framebufferTexture2D(36160,33306,3553,null,0),r.framebufferTexture2D(36160,36096,3553,null,0),r.framebufferTexture2D(36160,36128,3553,null,0),f(36096,n.depthAttachment),f(36128,n.stencilAttachment),f(33306,n.depthStencilAttachment),r.checkFramebufferStatus(36160),r.isContextLost(),r.bindFramebuffer(36160,_.next?_.next.framebuffer:null),_.cur=_.next,r.getError()}function b(r,n){function i(r,n){var o,s=0,l=0,c=!0,f=!0;o=null;var y=!0,g="rgba",m="uint8",b=1,_=null,A=null,k=null,M=!1;"number"==typeof r?(s=0|r,l=0|n||s):r?("shape"in r?(s=(l=r.shape)[0],l=l[1]):("radius"in r&&(s=l=r.radius),"width"in r&&(s=r.width),"height"in r&&(l=r.height)),("color"in r||"colors"in r)&&Array.isArray(o=r.color||r.colors),o||("colorCount"in r&&(b=0|r.colorCount),"colorTexture"in r&&(y=!!r.colorTexture,g="rgba4"),"colorType"in r&&(m=r.colorType,!y)&&("half float"===m||"float16"===m?g="rgba16f":"float"!==m&&"float32"!==m||(g="rgba32f")),"colorFormat"in r&&(0<=w.indexOf(g=r.colorFormat)?y=!0:0<=T.indexOf(g)&&(y=!1))),("depthTexture"in r||"depthStencilTexture"in r)&&(M=!(!r.depthTexture&&!r.depthStencilTexture)),"depth"in r&&("boolean"==typeof r.depth?c=r.depth:(_=r.depth,f=!1)),"stencil"in r&&("boolean"==typeof r.stencil?f=r.stencil:(A=r.stencil,c=!1)),"depthStencil"in r&&("boolean"==typeof r.depthStencil?c=f=r.depthStencil:(k=r.depthStencil,f=c=!1))):s=l=1;var S=null,E=null,I=null,L=null;if(Array.isArray(o))S=o.map(h);else if(o)S=[h(o)];else for(S=Array(b),o=0;o<b;++o)S[o]=p(s,l,y,g,m);for(s=s||S[0].width,l=l||S[0].height,_?E=h(_):c&&!f&&(E=p(s,l,M,"depth","uint32")),A?I=h(A):f&&!c&&(I=p(s,l,!1,"stencil","uint8")),k?L=h(k):!_&&!A&&f&&c&&(L=p(s,l,M,"depth stencil","depth stencil")),c=null,o=0;o<S.length;++o)u(S[o]),S[o]&&S[o].texture&&(f=tp[S[o].texture._texture.format]*td[S[o].texture._texture.type],null===c&&(c=f));return u(E),u(I),u(L),v(a),a.width=s,a.height=l,a.colorAttachments=S,a.depthAttachment=E,a.stencilAttachment=I,a.depthStencilAttachment=L,i.color=S.map(d),i.depth=d(E),i.stencil=d(I),i.depthStencil=d(L),i.width=a.width,i.height=a.height,x(a),i}var a=new g;return s.framebufferCount++,i(r,n),P(i,{resize:function(r,n){var o=Math.max(0|r,1),s=Math.max(0|n||o,1);if(o===a.width&&s===a.height)return i;for(var l=a.colorAttachments,c=0;c<l.length;++c)y(l[c],o,s);return y(a.depthAttachment,o,s),y(a.stencilAttachment,o,s),y(a.depthStencilAttachment,o,s),a.width=i.width=o,a.height=i.height=s,x(a),i},_reglType:"framebuffer",_framebuffer:a,destroy:function(){m(a),v(a)},use:function(r){_.setFBO({framebuffer:i},r)}})}var _={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],T=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&T.push("srgba"),n.ext_color_buffer_half_float&&T.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&T.push("rgba32f");var A=["uint8"];n.oes_texture_half_float&&A.push("half float","float16"),n.oes_texture_float&&A.push("float","float32");var k=0,M={};return P(_,{getFramebuffer:function(r){return"function"==typeof r&&"framebuffer"===r._reglType&&(r=r._framebuffer)instanceof g?r:null},create:b,createCube:function(r){function n(r){var o,s={color:null},l=0,c=null;o="rgba";var u="uint8",f=1;if("number"==typeof r?l=0|r:r?("shape"in r?l=r.shape[0]:("radius"in r&&(l=0|r.radius),"width"in r?l=0|r.width:"height"in r&&(l=0|r.height)),("color"in r||"colors"in r)&&Array.isArray(c=r.color||r.colors),c||("colorCount"in r&&(f=0|r.colorCount),"colorType"in r&&(u=r.colorType),"colorFormat"in r&&(o=r.colorFormat)),"depth"in r&&(s.depth=r.depth),"stencil"in r&&(s.stencil=r.stencil),"depthStencil"in r&&(s.depthStencil=r.depthStencil)):l=1,c){if(Array.isArray(c))for(r=[],o=0;o<c.length;++o)r[o]=c[o];else r=[c]}else for(r=Array(f),c={radius:l,format:o,type:u},o=0;o<f;++o)r[o]=a.createCube(c);for(s.color=Array(r.length),o=0;o<r.length;++o)f=r[o],l=l||f.width,s.color[o]={target:34069,data:r[o]};for(o=0;6>o;++o){for(f=0;f<r.length;++f)s.color[f].target=34069+o;0<o&&(s.depth=i[0].depth,s.stencil=i[0].stencil,s.depthStencil=i[0].depthStencil),i[o]?i[o](s):i[o]=b(s)}return P(n,{width:l,height:l,color:r})}var i=Array(6);return n(r),P(n,{faces:i,resize:function(r){var a=0|r;if(a===n.width)return n;var o=n.color;for(r=0;r<o.length;++r)o[r].resize(a);for(r=0;6>r;++r)i[r].resize(a);return n.width=n.height=a,n},_reglType:"framebufferCube",destroy:function(){i.forEach(function(r){r.destroy()})}})},clear:function(){V(M).forEach(m)},restore:function(){_.cur=null,_.next=null,_.dirty=!0,V(M).forEach(function(n){n.framebuffer=r.createFramebuffer(),x(n)})}})}(tM,tO,tF,tH,tq,tL),tW=function(r,n,i,o,s,l,c,u,f,h,p,y,g,v,m,x){function b(r){return r.replace(".","_")}function _(r,n,i){var a=b(r);tk.push(r),tA[a]=tT[a]=!!i,tM[a]=n}function w(r,n,i){var a=b(r);tk.push(r),Array.isArray(i)?(tT[a]=i.slice(),tA[a]=i.slice()):tT[a]=tA[a]=i,tS[a]=n}function D(){var r=function(r){function n(){var r=[],n=[];return P(function(){r.push.apply(r,k(arguments))},{def:function(){var i="v"+o++;return n.push(i),0<arguments.length&&(r.push(i,"="),r.push.apply(r,k(arguments)),r.push(";")),i},toString:function(){return M([0<n.length?"var "+n.join(",")+";":"",M(r)])}})}function i(){function r(r,n){a(r,n,"=",i.def(r,n),";")}var i=n(),a=n(),o=i.toString,s=a.toString;return P(function(){i.apply(i,k(arguments))},{def:i.def,entry:i,exit:a,save:r,set:function(n,a,o){r(n,a),i(n,a,"=",o,";")},toString:function(){return o()+s()}})}var a=r&&r.cache,o=0,s=[],l=[],c=[],u=n(),f={};return{global:u,link:function(r,n){var i=n&&n.stable;if(!i){for(var a=0;a<l.length;++a)if(l[a]===r&&!c[a])return s[a]}return a="g"+o++,s.push(a),l.push(r),c.push(i),a},block:n,proc:function(r,n){function a(){var r="a"+o.length;return o.push(r),r}var o=[];n=n||0;for(var s=0;s<n;++s)a();var l=(s=i()).toString;return f[r]=P(s,{arg:a,toString:function(){return M(["function(",o.join(),"){",l(),"}"])}})},scope:i,cond:function(){var r=M(arguments),n=i(),a=i(),o=n.toString,s=a.toString;return P(n,{then:function(){return n.apply(n,k(arguments)),this},else:function(){return a.apply(a,k(arguments)),this},toString:function(){var n=s();return n&&(n="else{"+n+"}"),M(["if(",r,"){",o(),"}",n])}})},compile:function(){var r=['"use strict";',u,"return {"];Object.keys(f).forEach(function(n){r.push('"',n,'":',f[n].toString(),",")}),r.push("}");var n,i=M(r).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return a&&a[n=function(r){for(var n,i="",a=0;a<r.length;a++)n=r.charCodeAt(a),i+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return i}(function(r){for(var n,i=Array(r.length>>2),a=0;a<i.length;a++)i[a]=0;for(a=0;a<8*r.length;a+=8)i[a>>5]|=(255&r.charCodeAt(a/8))<<24-a%32;var o,s,l,c,u,f,h,p,d,y,g,v=8*r.length;for(r=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],a=Array(64),i[v>>5]|=128<<24-v%32,i[15+(v+64>>9<<4)]=v,p=0;p<i.length;p+=16){for(v=r[0],o=r[1],s=r[2],l=r[3],c=r[4],u=r[5],f=r[6],h=r[7],d=0;64>d;d++)16>d?a[d]=i[d+p]:(y=d,g=A(g=T(g=a[d-2],17)^T(g,19)^g>>>10,a[d-7]),n=T(n=a[d-15],7)^T(n,18)^n>>>3,a[y]=A(A(g,n),a[d-16])),y=A(A(A(A(h,y=T(y=c,6)^T(y,11)^T(y,25)),c&u^~c&f),ty[d]),a[d]),g=A(h=T(h=v,2)^T(h,13)^T(h,22),v&o^v&s^o&s),h=f,f=u,u=c,c=A(l,y),l=s,s=o,o=v,v=A(y,g);r[0]=A(v,r[0]),r[1]=A(o,r[1]),r[2]=A(s,r[2]),r[3]=A(l,r[3]),r[4]=A(c,r[4]),r[5]=A(u,r[5]),r[6]=A(f,r[6]),r[7]=A(h,r[7])}for(i="",a=0;a<32*r.length;a+=8)i+=String.fromCharCode(r[a>>5]>>>24-a%32&255);return i}(function(r){for(var n,i,a="",o=-1;++o<r.length;)n=r.charCodeAt(o),i=o+1<r.length?r.charCodeAt(o+1):0,55296<=n&&56319>=n&&56320<=i&&57343>=i&&(n=65536+((1023&n)<<10)+(1023&i),o++),127>=n?a+=String.fromCharCode(n):2047>=n?a+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?a+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(a+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return a}(i)))]?a[n].apply(null,l):(i=Function.apply(null,s.concat(i)),a&&(a[n]=i),i.apply(null,l))}}}({cache:m}),i=r.link,a=r.global;r.id=tL++,r.batchId="0";var o=i(tE),s=r.shared={props:"a0"};Object.keys(tE).forEach(function(r){s[r]=a.def(o,".",r)});var l=r.next={},c=r.current={};Object.keys(tS).forEach(function(r){Array.isArray(tT[r])&&(l[r]=a.def(s.next,".",r),c[r]=a.def(s.current,".",r))});var u=r.constants={};Object.keys(tI).forEach(function(r){u[r]=a.def(JSON.stringify(tI[r]))}),r.invoke=function(n,a){switch(a.type){case 0:var o=["this",s.context,s.props,r.batchId];return n.def(i(a.data),".call(",o.slice(0,Math.max(a.data.length+1,4)),")");case 1:return n.def(s.props,a.data);case 2:return n.def(s.context,a.data);case 3:return n.def("this",a.data);case 4:return a.data.append(r,n),a.data.ref;case 5:return a.data.toString();case 6:return a.data.map(function(i){return r.invoke(n,i)})}},r.attribCache={};var f={};return r.scopeAttrib=function(r){if((r=n.id(r))in f)return f[r];var a=h.scope[r];return a||(a=h.scope[r]=new tu),f[r]=i(a)},r}function B(r,n,i){var a=r.shared.context,o=r.scope();Object.keys(i).forEach(function(s){n.save(a,"."+s);var l=i[s].append(r,n);Array.isArray(l)?o(a,".",s,"=[",l.join(),"];"):o(a,".",s,"=",l,";")}),n(o)}function z(r,n,i,a){var o,s=(c=r.shared).gl,l=c.framebuffer;tp&&(o=n.def(c.extensions,".webgl_draw_buffers"));var c=(u=r.constants).drawBuffer,u=u.backBuffer;r=i?i.append(r,n):n.def(l,".next"),a||n("if(",r,"!==",l,".cur){"),n("if(",r,"){",s,".bindFramebuffer(",36160,",",r,".framebuffer);"),tp&&n(o,".drawBuffersWEBGL(",c,"[",r,".colorAttachments.length]);"),n("}else{",s,".bindFramebuffer(",36160,",null);"),tp&&n(o,".drawBuffersWEBGL(",u,");"),n("}",l,".cur=",r,";"),a||n("}")}function F(r,n,i){var o=r.shared,s=o.gl,l=r.current,c=r.next,u=o.current,f=o.next,h=r.cond(u,".dirty");tk.forEach(function(n){var o,p;if(!((n=b(n))in i.state)){if(n in c){o=c[n],p=l[n];var d=a(tT[n].length,function(r){return h.def(o,"[",r,"]")});h(r.cond(d.map(function(r,n){return r+"!=="+p+"["+n+"]"}).join("||")).then(s,".",tS[n],"(",d,");",d.map(function(r,n){return p+"["+n+"]="+r}).join(";"),";"))}else o=h.def(f,".",n),h(d=r.cond(o,"!==",u,".",n)),n in tM?d(r.cond(o).then(s,".enable(",tM[n],");").else(s,".disable(",tM[n],");"),u,".",n,"=",o,";"):d(s,".",tS[n],"(",o,");",u,".",n,"=",o,";")}}),0===Object.keys(i.state).length&&h(u,".dirty=false;"),n(h)}function N(r,n,i,a){var o,s=r.shared,l=r.current,c=s.current,u=s.gl;E(Object.keys(i)).forEach(function(s){var f=i[s];if(!a||a(f)){var h=f.append(r,n);if(tM[s]){var p=tM[s];L(f)?(o=r.link(h,{stable:!0}),n(r.cond(o).then(u,".enable(",p,");").else(u,".disable(",p,");")),n(c,".",s,"=",o,";")):(n(r.cond(h).then(u,".enable(",p,");").else(u,".disable(",p,");")),n(c,".",s,"=",h,";"))}else if(d(h)){var y=l[s];n(u,".",tS[s],"(",h,");",h.map(function(r,n){return y+"["+n+"]="+r}).join(";"),";")}else L(f)?(o=r.link(h,{stable:!0}),n(u,".",tS[s],"(",o,");",c,".",s,"=",o,";")):n(u,".",tS[s],"(",h,");",c,".",s,"=",h,";")}})}function U(r,n){th&&(r.instancing=n.def(r.shared.extensions,".angle_instanced_arrays"))}function j(r,n,i,a,o){function s(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function l(r){r(f=n.def(),"=",s(),";"),"string"==typeof o?r(d,".count+=",o,";"):r(d,".count++;"),v&&(a?r(h=n.def(),"=",g,".getNumPendingQueries();"):r(g,".beginQuery(",d,");"))}function c(r){r(d,".cpuTime+=",s(),"-",f,";"),v&&(a?r(g,".pushScopeStats(",h,",",g,".getNumPendingQueries(),",d,");"):r(g,".endQuery();"))}function u(r){var i=n.def(y,".profile");n(y,".profile=",r,";"),n.exit(y,".profile=",i,";")}var f,h,p=r.shared,d=r.stats,y=p.current,g=p.timer;if(i=i.profile){if(L(i))return void(i.enable?(l(n),c(n.exit),u("true")):u("false"));u(i=i.append(r,n))}else i=n.def(y,".profile");l(p=r.block()),n("if(",i,"){",p,"}"),c(r=r.block()),n.exit("if(",i,"){",r,"}")}function V(r,n,i,a,o){var s=r.shared;a.forEach(function(a){var l,c=a.name,u=i.attributes[c];if(u){if(!o(u))return;l=u.append(r,n)}else{if(!o(tw))return;var f=r.scopeAttrib(c);l={},Object.keys(new tu).forEach(function(r){l[r]=n.def(f,".",r)})}!function(i,a,o){function l(){n("if(!",h,".buffer){",u,".enableVertexAttribArray(",f,");}");var i,s=o.type;i=o.size?n.def(o.size,"||",a):a,n("if(",h,".type!==",s,"||",h,".size!==",i,"||",y.map(function(r){return h+"."+r+"!=="+o[r]}).join("||"),"){",u,".bindBuffer(",34962,",",p,".buffer);",u,".vertexAttribPointer(",[f,i,s,o.normalized,o.stride,o.offset],");",h,".type=",s,";",h,".size=",i,";",y.map(function(r){return h+"."+r+"="+o[r]+";"}).join(""),"}"),th&&n("if(",h,".divisor!==",s=o.divisor,"){",r.instancing,".vertexAttribDivisorANGLE(",[f,s],");",h,".divisor=",s,";}")}function c(){n("if(",h,".buffer){",u,".disableVertexAttribArray(",f,");",h,".buffer=null;","}if(",tg.map(function(r,n){return h+"."+r+"!=="+d[n]}).join("||"),"){",u,".vertexAttrib4f(",f,",",d,");",tg.map(function(r,n){return h+"."+r+"="+d[n]+";"}).join(""),"}")}var u=s.gl,f=n.def(i,".location"),h=n.def(s.attributes,"[",f,"]");i=o.state;var p=o.buffer,d=[o.x,o.y,o.z,o.w],y=["buffer","normalized","offset","stride"];1===i?l():2===i?c():(n("if(",i,"===",1,"){"),l(),n("}else{"),c(),n("}"))}(r.link(a),function(r){switch(r){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(a.info.type),l)})}function H(r,i,o,s,l,c){for(var u,f=r.shared,h=f.gl,p=0;p<s.length;++p){var y,g=(x=s[p]).name,v=x.info.type,m=o.uniforms[g],x=r.link(x)+".location";if(m){if(!l(m))continue;if(L(m)){if(g=m.value,35678===v||35680===v)i(h,".uniform1i(",x,",",(v=r.link(g._texture||g.color[0]._texture))+".bind());"),i.exit(v,".unbind();");else if(35674===v||35675===v||35676===v)m=2,35675===v?m=3:35676===v&&(m=4),i(h,".uniformMatrix",m,"fv(",x,",false,",g=r.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),");");else{switch(v){case 5126:u="1f";break;case 35664:u="2f";break;case 35665:u="3f";break;case 35666:u="4f";break;case 35670:case 5124:u="1i";break;case 35671:case 35667:u="2i";break;case 35672:case 35668:u="3i";break;case 35673:case 35669:u="4i"}i(h,".uniform",u,"(",x,",",d(g)?Array.prototype.slice.call(g):g,");")}continue}y=m.append(r,i)}else{if(!l(tw))continue;y=i.def(f.uniforms,"[",n.id(g),"]")}switch(35678===v?i("if(",y,"&&",y,'._reglType==="framebuffer"){',y,"=",y,".color[0];","}"):35680===v&&i("if(",y,"&&",y,'._reglType==="framebufferCube"){',y,"=",y,".color[0];","}"),g=1,v){case 35678:case 35680:v=i.def(y,"._texture"),i(h,".uniform1i(",x,",",v,".bind());"),i.exit(v,".unbind();");continue;case 5124:case 35670:u="1i";break;case 35667:case 35671:u="2i",g=2;break;case 35668:case 35672:u="3i",g=3;break;case 35669:case 35673:u="4i",g=4;break;case 5126:u="1f";break;case 35664:u="2f",g=2;break;case 35665:u="3f",g=3;break;case 35666:u="4f",g=4;break;case 35674:u="Matrix2fv";break;case 35675:u="Matrix3fv";break;case 35676:u="Matrix4fv"}if("M"===u.charAt(0)){i(h,".uniform",u,"(",x,","),x=Math.pow(v-35674+2,2);var b=r.global.def("new Float32Array(",x,")");Array.isArray(y)?i("false,(",a(x,function(r){return b+"["+r+"]="+y[r]}),",",b,")"):i("false,(Array.isArray(",y,")||",y," instanceof Float32Array)?",y,":(",a(x,function(r){return b+"["+r+"]="+y+"["+r+"]"}),",",b,")"),i(");")}else{if(1<g){v=[];var _=[];for(m=0;m<g;++m)Array.isArray(y)?_.push(y[m]):_.push(i.def(y+"["+m+"]")),c&&v.push(i.def());c&&i("if(!",r.batchId,"||",v.map(function(r,n){return r+"!=="+_[n]}).join("||"),"){",v.map(function(r,n){return r+"="+_[n]+";"}).join("")),i(h,".uniform",u,"(",x,",",_.join(","),");")}else c&&(v=i.def(),i("if(!",r.batchId,"||",v,"!==",y,"){",v,"=",y,";")),i(h,".uniform",u,"(",x,",",y,");");c&&i("}")}}}function q(r,n,i,a){function o(o){var s=m[o];return s?s.contextDep&&a.contextDynamic||s.propDep?s.append(r,i):s.append(r,n):n.def(v,".",o)}function s(){function r(){i(d,".drawElementsInstancedANGLE(",[b,w,T,_+"<<(("+T+"-5121)>>1)",p],");")}function n(){i(d,".drawArraysInstancedANGLE(",[b,_,w,p],");")}x&&"null"!==x?A?r():(i("if(",x,"){"),r(),i("}else{"),n(),i("}")):n()}function l(){function r(){i(g+".drawElements("+[b,w,T,_+"<<(("+T+"-5121)>>1)"]+");")}function n(){i(g+".drawArrays("+[b,_,w]+");")}x&&"null"!==x?A?r():(i("if(",x,"){"),r(),i("}else{"),n(),i("}")):n()}var c,u,f,h,p,d,y=r.shared,g=y.gl,v=y.draw,m=a.draw,x=(c=m.elements,u=n,c?((c.contextDep&&a.contextDynamic||c.propDep)&&(u=i),c=c.append(r,u),m.elementsActive&&u("if("+c+")"+g+".bindBuffer(34963,"+c+".buffer.buffer);")):(c=u.def(),u(c,"=",v,".","elements",";","if(",c,"){",g,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",y.vao,".currentVAO){",c,"=",r.shared.elements+".getElements("+y.vao,".currentVAO.elements);",td?"":"if("+c+")"+g+".bindBuffer(34963,"+c+".buffer.buffer);","}")),c),b=o("primitive"),_=o("offset"),w=(f=m.count,h=n,f?((f.contextDep&&a.contextDynamic||f.propDep)&&(h=i),f=f.append(r,h)):f=h.def(v,".","count"),f);if("number"==typeof w){if(0===w)return}else i("if(",w,"){"),i.exit("}");th&&(p=o("instances"),d=r.instancing);var T=x+".type",A=m.elements&&L(m.elements)&&!m.vaoActive;th&&("number"!=typeof p||0<=p)?"string"==typeof p?(i("if(",p,">0){"),s(),i("}else if(",p,"<0){"),l(),i("}")):s():l()}function W(r,n,i,a,o){return o=(n=D()).proc("body",o),th&&(n.instancing=o.def(n.shared.extensions,".angle_instanced_arrays")),r(n,o,i,a),n.compile().body}function Y(r,n,i,a){U(r,n),i.useVAO?i.drawVAO?n(r.shared.vao,".setVAO(",i.drawVAO.append(r,n),");"):n(r.shared.vao,".setVAO(",r.shared.vao,".targetVAO);"):(n(r.shared.vao,".setVAO(null);"),V(r,n,i,a.attributes,function(){return!0})),H(r,n,i,a.uniforms,function(){return!0},!1),q(r,n,n,i)}function Z(r,n,i,a){function o(){return!0}r.batchId="a1",U(r,n),V(r,n,i,a.attributes,o),H(r,n,i,a.uniforms,o,!1),q(r,n,n,i)}function X(r,n,i,a){function o(r){return r.contextDep&&l||r.propDep}function s(r){return!o(r)}U(r,n);var l=i.contextDep,c=n.def(),u=n.def();r.shared.props=u,r.batchId=c;var f=r.scope(),h=r.scope();n(f.entry,"for(",c,"=0;",c,"<","a1",";++",c,"){",u,"=","a0","[",c,"];",h,"}",f.exit),i.needsContext&&B(r,h,i.context),i.needsFramebuffer&&z(r,h,i.framebuffer),N(r,h,i.state,o),i.profile&&o(i.profile)&&j(r,h,i,!1,!0),a?(i.useVAO?i.drawVAO?o(i.drawVAO)?h(r.shared.vao,".setVAO(",i.drawVAO.append(r,h),");"):f(r.shared.vao,".setVAO(",i.drawVAO.append(r,f),");"):f(r.shared.vao,".setVAO(",r.shared.vao,".targetVAO);"):(f(r.shared.vao,".setVAO(null);"),V(r,f,i,a.attributes,s),V(r,h,i,a.attributes,o)),H(r,f,i,a.uniforms,s,!1),H(r,h,i,a.uniforms,o,!0),q(r,f,h,i)):(n=r.global.def("{}"),a=i.shader.progVar.append(r,h),u=h.def(a,".id"),f=h.def(n,"[",u,"]"),h(r.shared.gl,".useProgram(",a,".program);","if(!",f,"){",f,"=",n,"[",u,"]=",r.link(function(n){return W(Z,r,i,n,2)}),"(",a,");}",f,".call(this,a0[",c,"],",c,");"))}function J(r,n,i){var a=n.static[i];if(a&&function(r){if("object"==typeof r&&!d(r)){for(var n=Object.keys(r),i=0;i<n.length;++i)if(R.isDynamic(r[n[i]]))return!0;return!1}}(a)){var o=r.global,s=Object.keys(a),l=!1,c=!1,u=!1,f=r.global.def("{}");s.forEach(function(n){var i=a[n];if(R.isDynamic(i))"function"==typeof i&&(i=a[n]=R.unbox(i)),n=O(i,null),l=l||n.thisDep,u=u||n.propDep,c=c||n.contextDep;else{switch(o(f,".",n,"="),typeof i){case"number":o(i);break;case"string":o('"',i,'"');break;case"object":Array.isArray(i)&&o("[",i.join(),"]");break;default:o(r.link(i))}o(";")}}),n.dynamic[i]=new R.DynamicVariable(4,{thisDep:l,contextDep:c,propDep:u,ref:f,append:function(r,n){s.forEach(function(i){var o=a[i];R.isDynamic(o)&&(o=r.invoke(n,o),n(f,".",i,"=",o,";"))})}}),delete n.static[i]}}var $,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tc,tu=h.Record,tf={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(tf.min=32775,tf.max=32776);var th=i.angle_instanced_arrays,tp=i.webgl_draw_buffers,td=i.oes_vertex_array_object,tT={dirty:!0,profile:x.profile},tA={},tk=[],tM={},tS={};_("dither",3024),_("blend.enable",3042),w("blend.color","blendColor",[0,0,0,0]),w("blend.equation","blendEquationSeparate",[32774,32774]),w("blend.func","blendFuncSeparate",[1,0,1,0]),_("depth.enable",2929,!0),w("depth.func","depthFunc",513),w("depth.range","depthRange",[0,1]),w("depth.mask","depthMask",!0),w("colorMask","colorMask",[!0,!0,!0,!0]),_("cull.enable",2884),w("cull.face","cullFace",1029),w("frontFace","frontFace",2305),w("lineWidth","lineWidth",1),_("polygonOffset.enable",32823),w("polygonOffset.offset","polygonOffset",[0,0]),_("sample.alpha",32926),_("sample.enable",32928),w("sample.coverage","sampleCoverage",[1,!1]),_("stencil.enable",2960),w("stencil.mask","stencilMask",-1),w("stencil.func","stencilFunc",[519,0,-1]),w("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),w("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),_("scissor.enable",3089),w("scissor.box","scissor",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]),w("viewport","viewport",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]);var tE={gl:r,context:g,strings:n,next:tA,current:tT,draw:y,elements:l,buffer:s,shader:p,attributes:h.state,vao:h,uniforms:f,framebuffer:u,extensions:i,timer:v,isBufferArgs:S},tI={primTypes:K,compareFuncs:tx,blendFuncs:tm,blendEquations:tf,stencilOps:tb,glTypes:G,orientationType:t_};tp&&(tI.backBuffer=[1029],tI.drawBuffer=a(o.maxDrawbuffers,function(r){return 0===r?[0]:a(r,function(r){return 36064+r})}));var tL=0;return{next:tA,current:tT,procs:(Q=($=D()).proc("poll"),tt=$.proc("refresh"),Q(te=$.block()),tt(te),tn=(to=$.shared).gl,ti=to.next,te(ta=to.current,".dirty=false;"),z($,Q),z($,tt,null,!0),th&&(tr=$.link(th)),i.oes_vertex_array_object&&tt($.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);"),to=tt.def(to.attributes),ts=tt.def(0),(tl=$.cond(ts,".buffer")).then(tn,".enableVertexAttribArray(i);",tn,".bindBuffer(",34962,",",ts,".buffer.buffer);",tn,".vertexAttribPointer(i,",ts,".size,",ts,".type,",ts,".normalized,",ts,".stride,",ts,".offset);").else(tn,".disableVertexAttribArray(i);",tn,".vertexAttrib4f(i,",ts,".x,",ts,".y,",ts,".z,",ts,".w);",ts,".buffer=null;"),tt("for(var i=0;i<",tc=$.link(o.maxAttributes,{stable:!0}),";++i){",ts,"=",to,"[i];",tl,"}"),th&&tt("for(var i=0;i<",tc,";++i){",tr,".vertexAttribDivisorANGLE(i,",to,"[i].divisor);","}"),tt($.shared.vao,".currentVAO=null;",$.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"),Object.keys(tM).forEach(function(r){var n=tM[r],i=te.def(ti,".",r),a=$.block();a("if(",i,"){",tn,".enable(",n,")}else{",tn,".disable(",n,")}",ta,".",r,"=",i,";"),tt(a),Q("if(",i,"!==",ta,".",r,"){",a,"}")}),Object.keys(tS).forEach(function(r){var n,i,o=tS[r],s=tT[r],l=$.block();l(tn,".",o,"("),d(s)?(o=s.length,n=$.global.def(ti,".",r),i=$.global.def(ta,".",r),l(a(o,function(r){return n+"["+r+"]"}),");",a(o,function(r){return i+"["+r+"]="+n+"["+r+"];"}).join("")),Q("if(",a(o,function(r){return n+"["+r+"]!=="+i+"["+r+"]"}).join("||"),"){",l,"}")):(n=te.def(ti,".",r),i=te.def(ta,".",r),l(n,");",ta,".",r,"=",n,";"),Q("if(",n,"!==",i,"){",l,"}")),tt(l)}),$.compile()),compile:function(r,o,c,f,y){var g=D();g.stats=g.link(y),Object.keys(o.static).forEach(function(r){J(g,o,r)}),tv.forEach(function(n){J(g,r,n)});var v=function(r,o,c,f,y){function g(r){var n=D[r];n&&(B[r]=n)}var v,m,x,_,w,T,A,k,M,E=function(r,n){if("string"==typeof(i=r.static).frag&&"string"==typeof i.vert){if(0<Object.keys(n.dynamic).length)return null;var i=n.static,a=Object.keys(i);if(0<a.length&&"number"==typeof i[a[0]]){for(var o=[],s=0;s<a.length;++s)o.push([0|i[a[s]],a[s]]);return o}}return null}(r,o),D=function(r,n,i){function a(r){if(r in o){var i=o[r];r=!0;var a,l,c=0|i.x,u=0|i.y;return"width"in i?a=0|i.width:r=!1,"height"in i?l=0|i.height:r=!1,new I(!r&&n&&n.thisDep,!r&&n&&n.contextDep,!r&&n&&n.propDep,function(r,n){var o=r.shared.context,s=a;"width"in i||(s=n.def(o,".","framebufferWidth","-",c));var f=l;return"height"in i||(f=n.def(o,".","framebufferHeight","-",u)),[c,u,s,f]})}if(r in s){var f=s[r];return r=O(f,function(r,n){var i=r.invoke(n,f),a=r.shared.context,o=n.def(i,".x|0"),s=n.def(i,".y|0");return[o,s,n.def('"width" in ',i,"?",i,".width|0:","(",a,".","framebufferWidth","-",o,")"),i=n.def('"height" in ',i,"?",i,".height|0:","(",a,".","framebufferHeight","-",s,")")]}),n&&(r.thisDep=r.thisDep||n.thisDep,r.contextDep=r.contextDep||n.contextDep,r.propDep=r.propDep||n.propDep),r}return n?new I(n.thisDep,n.contextDep,n.propDep,function(r,n){var i=r.shared.context;return[0,0,n.def(i,".","framebufferWidth"),n.def(i,".","framebufferHeight")]}):null}var o=r.static,s=r.dynamic;if(r=a("viewport")){var l=r;r=new I(r.thisDep,r.contextDep,r.propDep,function(r,n){var i=l.append(r,n),a=r.shared.context;return n.set(a,".viewportWidth",i[2]),n.set(a,".viewportHeight",i[3]),i})}return{viewport:r,scissor_box:a("scissor.box")}}(r,j=function(r,n){var i=r.static,a=r.dynamic;if("framebuffer"in i){var o=i.framebuffer;return o?(o=u.getFramebuffer(o),C(function(r,n){var i=r.link(o),a=r.shared;return n.set(a.framebuffer,".next",i),a=a.context,n.set(a,".framebufferWidth",i+".width"),n.set(a,".framebufferHeight",i+".height"),i})):C(function(r,n){var i=r.shared;return n.set(i.framebuffer,".next","null"),i=i.context,n.set(i,".framebufferWidth",i+".drawingBufferWidth"),n.set(i,".framebufferHeight",i+".drawingBufferHeight"),"null"})}if("framebuffer"in a){var s=a.framebuffer;return O(s,function(r,n){var i=r.invoke(n,s),a=r.shared,o=a.framebuffer;return i=n.def(o,".getFramebuffer(",i,")"),n.set(o,".next",i),a=a.context,n.set(a,".framebufferWidth",i+"?"+i+".width:"+a+".drawingBufferWidth"),n.set(a,".framebufferHeight",i+"?"+i+".height:"+a+".drawingBufferHeight"),i})}return null}(r)),P=function(r,n){function i(r,n){if(r in a){var i=0|a[r];return n?s.offset=i:s.instances=i,C(function(r,a){return n&&(r.OFFSET=i),i})}if(r in o){var l=o[r];return O(l,function(r,i){var a=r.invoke(i,l);return n&&(r.OFFSET=a),a})}if(n){if(f)return C(function(r,n){return r.OFFSET=0});if(c)return new I(u.thisDep,u.contextDep,u.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.offset:0")})}else if(c)return new I(u.thisDep,u.contextDep,u.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.instances:-1")});return null}var a=r.static,o=r.dynamic,s={},c=!1,u=function(){if("vao"in a){var r=a.vao;return null!==r&&null===h.getVAO(r)&&(r=h.createVAO(r)),c=!0,s.vao=r,C(function(n){var i=h.getVAO(r);return i?n.link(i):"null"})}if("vao"in o){c=!0;var n=o.vao;return O(n,function(r,i){var a=r.invoke(i,n);return i.def(r.shared.vao+".getVAO("+a+")")})}return null}(),f=!1,p=function(){if("elements"in a){var r=a.elements;if(s.elements=r,S(r)){var n=s.elements=l.create(r,!0);r=l.getElements(n),f=!0}else r&&(r=l.getElements(r),f=!0);return(n=C(function(n,i){if(r){var a=n.link(r);return n.ELEMENTS=a}return n.ELEMENTS=null})).value=r,n}if("elements"in o){f=!0;var i=o.elements;return O(i,function(r,n){var a=(o=r.shared).isBufferArgs,o=o.elements,s=r.invoke(n,i),l=n.def("null");return a=n.def(a,"(",s,")"),s=r.cond(a).then(l,"=",o,".createStream(",s,");").else(l,"=",o,".getElements(",s,");"),n.entry(s),n.exit(r.cond(a).then(o,".destroyStream(",l,");")),r.ELEMENTS=l})}return c?new I(u.thisDep,u.contextDep,u.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.elements+".getElements("+r.shared.vao+".currentVAO.elements):null")}):null}(),d=i("offset",!0),y=function(){if("primitive"in a){var r=a.primitive;return s.primitive=r,C(function(n,i){return K[r]})}if("primitive"in o){var n=o.primitive;return O(n,function(r,i){var a=r.constants.primTypes,o=r.invoke(i,n);return i.def(a,"[",o,"]")})}return f?L(p)?p.value?C(function(r,n){return n.def(r.ELEMENTS,".primType")}):C(function(){return 4}):new I(p.thisDep,p.contextDep,p.propDep,function(r,n){var i=r.ELEMENTS;return n.def(i,"?",i,".primType:",4)}):c?new I(u.thisDep,u.contextDep,u.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.primitive:4")}):null}(),g=function(){if("count"in a){var r=0|a.count;return s.count=r,C(function(){return r})}if("count"in o){var n=o.count;return O(n,function(r,i){return r.invoke(i,n)})}return f?L(p)?p?d?new I(d.thisDep,d.contextDep,d.propDep,function(r,n){return n.def(r.ELEMENTS,".vertCount-",r.OFFSET)}):C(function(r,n){return n.def(r.ELEMENTS,".vertCount")}):C(function(){return -1}):new I(p.thisDep||d.thisDep,p.contextDep||d.contextDep,p.propDep||d.propDep,function(r,n){var i=r.ELEMENTS;return r.OFFSET?n.def(i,"?",i,".vertCount-",r.OFFSET,":-1"):n.def(i,"?",i,".vertCount:-1")}):c?new I(u.thisDep,u.contextDep,u.propDep,function(r,n){return n.def(r.shared.vao,".currentVAO?",r.shared.vao,".currentVAO.count:-1")}):null}();return{elements:p,primitive:y,count:g,instances:i("instances",!1),offset:d,vao:u,vaoActive:c,elementsActive:f,static:s}}(r),B=(F=(z=r).static,N=z.dynamic,U={},tk.forEach(function(r){function n(n,a){if(r in F){var o=n(F[r]);U[i]=C(function(){return o})}else if(r in N){var s=N[r];U[i]=O(s,function(r,n){return a(r,n,r.invoke(n,s))})}}var i=b(r);switch(r){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return n(function(r){return r},function(r,n,i){return i});case"depth.func":return n(function(r){return tx[r]},function(r,n,i){return n.def(r.constants.compareFuncs,"[",i,"]")});case"depth.range":return n(function(r){return r},function(r,n,i){return[n.def("+",i,"[0]"),n=n.def("+",i,"[1]")]});case"blend.func":return n(function(r){return[tm["srcRGB"in r?r.srcRGB:r.src],tm["dstRGB"in r?r.dstRGB:r.dst],tm["srcAlpha"in r?r.srcAlpha:r.src],tm["dstAlpha"in r?r.dstAlpha:r.dst]]},function(r,n,i){function a(r,a){return n.def('"',r,a,'" in ',i,"?",i,".",r,a,":",i,".",r)}r=r.constants.blendFuncs;var o=a("src","RGB"),s=a("dst","RGB"),l=(o=n.def(r,"[",o,"]"),n.def(r,"[",a("src","Alpha"),"]"));return[o,s=n.def(r,"[",s,"]"),l,r=n.def(r,"[",a("dst","Alpha"),"]")]});case"blend.equation":return n(function(r){return"string"==typeof r?[tf[r],tf[r]]:"object"==typeof r?[tf[r.rgb],tf[r.alpha]]:void 0},function(r,n,i){var a=r.constants.blendEquations,o=n.def(),s=n.def();return(r=r.cond("typeof ",i,'==="string"')).then(o,"=",s,"=",a,"[",i,"];"),r.else(o,"=",a,"[",i,".rgb];",s,"=",a,"[",i,".alpha];"),n(r),[o,s]});case"blend.color":return n(function(r){return a(4,function(n){return+r[n]})},function(r,n,i){return a(4,function(r){return n.def("+",i,"[",r,"]")})});case"stencil.mask":return n(function(r){return 0|r},function(r,n,i){return n.def(i,"|0")});case"stencil.func":return n(function(r){return[tx[r.cmp||"keep"],r.ref||0,"mask"in r?r.mask:-1]},function(r,n,i){return[r=n.def('"cmp" in ',i,"?",r.constants.compareFuncs,"[",i,".cmp]",":",7680),n.def(i,".ref|0"),n=n.def('"mask" in ',i,"?",i,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return n(function(n){return["stencil.opBack"===r?1029:1028,tb[n.fail||"keep"],tb[n.zfail||"keep"],tb[n.zpass||"keep"]]},function(n,i,a){function o(r){return i.def('"',r,'" in ',a,"?",s,"[",a,".",r,"]:",7680)}var s=n.constants.stencilOps;return["stencil.opBack"===r?1029:1028,o("fail"),o("zfail"),o("zpass")]});case"polygonOffset.offset":return n(function(r){return[0|r.factor,0|r.units]},function(r,n,i){return[n.def(i,".factor|0"),n=n.def(i,".units|0")]});case"cull.face":return n(function(r){var n=0;return"front"===r?n=1028:"back"===r&&(n=1029),n},function(r,n,i){return n.def(i,'==="front"?',1028,":",1029)});case"frontFace":return n(function(r){return t_[r]},function(r,n,i){return n.def(i+'==="cw"?2304:2305')});case"colorMask":return n(function(r){return r.map(function(r){return!!r})},function(r,n,i){return a(4,function(r){return"!!"+i+"["+r+"]"})});case"sample.coverage":return n(function(r){return["value"in r?r.value:1,!!r.invert]},function(r,n,i){return[n.def('"value" in ',i,"?+",i,".value:1"),n=n.def("!!",i,".invert")]})}}),U),R=function(r,i,a){function o(r){if(r in s){var i=n.id(s[r]);return(r=C(function(){return i})).id=i,r}if(r in l){var a=l[r];return O(a,function(r,n){var i=r.invoke(n,a);return n.def(r.shared.strings,".id(",i,")")})}return null}var s=r.static,l=r.dynamic,c=o("frag"),u=o("vert"),f=null;return L(c)&&L(u)?(f=p.program(u.id,c.id,null,a),r=C(function(r,n){return r.link(f)})):r=new I(c&&c.thisDep||u&&u.thisDep,c&&c.contextDep||u&&u.contextDep,c&&c.propDep||u&&u.propDep,function(r,n){var i,a,o=r.shared.shader;return i=c?c.append(r,n):n.def(o,".","frag"),a=u?u.append(r,n):n.def(o,".","vert"),n.def(o+".program("+a+","+i+")")}),{frag:c,vert:u,progVar:r,program:f}}(r,0,E);g("viewport"),g(b("scissor.box"));var z,F,N,U,j,V=0<Object.keys(B).length;if((j={framebuffer:j,draw:P,shader:R,state:B,dirty:V,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(r){var n,i=r.static;if(r=r.dynamic,"profile"in i){var a=!!i.profile;(n=C(function(r,n){return a})).enable=a}else if("profile"in r){var o=r.profile;n=O(o,function(r,n){return r.invoke(n,o)})}return n}(r),j.uniforms=(v=c.static,m=c.dynamic,x={},Object.keys(v).forEach(function(r){var n,i=v[r];if("number"==typeof i||"boolean"==typeof i)n=C(function(){return i});else if("function"==typeof i){var o=i._reglType;"texture2d"===o||"textureCube"===o?n=C(function(r){return r.link(i)}):"framebuffer"!==o&&"framebufferCube"!==o||(n=C(function(r){return r.link(i.color[0])}))}else d(i)&&(n=C(function(r){return r.global.def("[",a(i.length,function(r){return i[r]}),"]")}));n.value=i,x[r]=n}),Object.keys(m).forEach(function(r){var n=m[r];x[r]=O(n,function(r,i){return r.invoke(i,n)})}),x),j.drawVAO=j.scopeVAO=P.vao,!j.drawVAO&&R.program&&!E&&i.angle_instanced_arrays&&P.static.elements){var H=!0;if(r=R.program.attributes.map(function(r){return r=o.static[r],H=H&&!!r,r}),H&&0<r.length){var q=h.getVAO(h.createVAO({attributes:r,elements:P.static.elements}));j.drawVAO=new I(null,null,null,function(r,n){return r.link(q)}),j.useVAO=!0}}return E?j.useVAO=!0:j.attributes=(_=o.static,w=o.dynamic,T={},Object.keys(_).forEach(function(r){var i=_[r],a=n.id(r),o=new tu;if(S(i))o.state=1,o.buffer=s.getBuffer(s.create(i,34962,!1,!0)),o.type=0;else if(c=s.getBuffer(i))o.state=1,o.buffer=c,o.type=0;else if("constant"in i){var l=i.constant;o.buffer="null",o.state=2,"number"==typeof l?o.x=l:tg.forEach(function(r,n){n<l.length&&(o[r]=l[n])})}else{var c=S(i.buffer)?s.getBuffer(s.create(i.buffer,34962,!1,!0)):s.getBuffer(i.buffer),u=0|i.offset,f=0|i.stride,h=0|i.size,p=!!i.normalized,d=0;"type"in i&&(d=G[i.type]),i=0|i.divisor,o.buffer=c,o.state=1,o.size=h,o.normalized=p,o.type=d||c.dtype,o.offset=u,o.stride=f,o.divisor=i}T[r]=C(function(r,n){var i=r.attribCache;if(a in i)return i[a];var s={isStream:!1};return Object.keys(o).forEach(function(r){s[r]=o[r]}),o.buffer&&(s.buffer=r.link(o.buffer),s.type=s.type||s.buffer+".dtype"),i[a]=s})}),Object.keys(w).forEach(function(r){var n=w[r];T[r]=O(n,function(r,i){function a(r){i(u[r],"=",o,".",r,"|0;")}var o=r.invoke(i,n),s=r.shared,l=r.constants,c=s.isBufferArgs,u=(s=s.buffer,{isStream:i.def(!1)}),f=new tu;f.state=1,Object.keys(f).forEach(function(r){u[r]=i.def(""+f[r])});var h=u.buffer,p=u.type;return i("if(",c,"(",o,")){",u.isStream,"=true;",h,"=",s,".createStream(",34962,",",o,");",p,"=",h,".dtype;","}else{",h,"=",s,".getBuffer(",o,");","if(",h,"){",p,"=",h,".dtype;",'}else if("constant" in ',o,"){",u.state,"=",2,";","if(typeof "+o+'.constant === "number"){',u[tg[0]],"=",o,".constant;",tg.slice(1).map(function(r){return u[r]}).join("="),"=0;","}else{",tg.map(function(r,n){return u[r]+"="+o+".constant.length>"+n+"?"+o+".constant["+n+"]:0;"}).join(""),"}}else{","if(",c,"(",o,".buffer)){",h,"=",s,".createStream(",34962,",",o,".buffer);","}else{",h,"=",s,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",l.glTypes,"[",o,".type]:",h,".dtype;",u.normalized,"=!!",o,".normalized;"),a("size"),a("offset"),a("stride"),a("divisor"),i("}}"),i.exit("if(",u.isStream,"){",s,".destroyStream(",h,");","}"),u})}),T),j.context=(A=f.static,k=f.dynamic,M={},Object.keys(A).forEach(function(r){var n=A[r];M[r]=C(function(r,i){return"number"==typeof n||"boolean"==typeof n?""+n:r.link(n)})}),Object.keys(k).forEach(function(r){var n=k[r];M[r]=O(n,function(r,i){return r.invoke(i,n)})}),M),j}(r,o,c,f);return v.shader.program&&(v.shader.program.attributes.sort(function(r,n){return r.name<n.name?-1:1}),v.shader.program.uniforms.sort(function(r,n){return r.name<n.name?-1:1})),function(r,n){var i=r.proc("draw",1);U(r,i),B(r,i,n.context),z(r,i,n.framebuffer),F(r,i,n),N(r,i,n.state),j(r,i,n,!1,!0);var a=n.shader.progVar.append(r,i);if(i(r.shared.gl,".useProgram(",a,".program);"),n.shader.program)Y(r,i,n,n.shader.program);else{i(r.shared.vao,".setVAO(null);");var o=r.global.def("{}"),s=i.def(a,".id"),l=i.def(o,"[",s,"]");i(r.cond(l).then(l,".call(this,a0);").else(l,"=",o,"[",s,"]=",r.link(function(i){return W(Y,r,n,i,1)}),"(",a,");",l,".call(this,a0);"))}0<Object.keys(n.state).length&&i(r.shared.current,".dirty=true;"),r.shared.vao&&i(r.shared.vao,".setVAO(null);")}(g,v),function(r,i){function a(n){var a=i.shader[n];a&&(isNaN(a=a.append(r,o))?o.set(s.shader,"."+n,a):o.set(s.shader,"."+n,r.link(a,{stable:!0})))}var o=r.proc("scope",3);r.batchId="a2";var s=r.shared,l=s.current;if(B(r,o,i.context),i.framebuffer&&i.framebuffer.append(r,o),E(Object.keys(i.state)).forEach(function(n){var a=i.state[n],l=a.append(r,o);d(l)?l.forEach(function(i,a){isNaN(i)?o.set(r.next[n],"["+a+"]",i):o.set(r.next[n],"["+a+"]",r.link(i,{stable:!0}))}):L(a)?o.set(s.next,"."+n,r.link(l,{stable:!0})):o.set(s.next,"."+n,l)}),j(r,o,i,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(n){var a=i.draw[n];a&&(isNaN(a=a.append(r,o))?o.set(s.draw,"."+n,a):o.set(s.draw,"."+n,r.link(a),{stable:!0}))}),Object.keys(i.uniforms).forEach(function(a){var l=i.uniforms[a].append(r,o);Array.isArray(l)&&(l="["+l.map(function(n){return isNaN(n)?n:r.link(n,{stable:!0})})+"]"),o.set(s.uniforms,"["+r.link(n.id(a),{stable:!0})+"]",l)}),Object.keys(i.attributes).forEach(function(n){var a=i.attributes[n].append(r,o),s=r.scopeAttrib(n);Object.keys(new tu).forEach(function(r){o.set(s,"."+r,a[r])})}),i.scopeVAO){var c=i.scopeVAO.append(r,o);isNaN(c)?o.set(s.vao,".targetVAO",c):o.set(s.vao,".targetVAO",r.link(c,{stable:!0}))}a("vert"),a("frag"),0<Object.keys(i.state).length&&(o(l,".dirty=true;"),o.exit(l,".dirty=true;")),o("a1(",r.shared.context,",a0,",r.batchId,");")}(g,v),function(r,n){function i(r){return r.contextDep&&o||r.propDep}var a=r.proc("batch",2);r.batchId="0",U(r,a);var o=!1,s=!0;Object.keys(n.context).forEach(function(r){o=o||n.context[r].propDep}),o||(B(r,a,n.context),s=!1);var l=!1;if((c=n.framebuffer)?(c.propDep?o=l=!0:c.contextDep&&o&&(l=!0),l||z(r,a,c)):z(r,a,null),n.state.viewport&&n.state.viewport.propDep&&(o=!0),F(r,a,n),N(r,a,n.state,function(r){return!i(r)}),n.profile&&i(n.profile)||j(r,a,n,!1,"a1"),n.contextDep=o,n.needsContext=s,n.needsFramebuffer=l,(s=n.shader.progVar).contextDep&&o||s.propDep)X(r,a,n,null);else if(s=s.append(r,a),a(r.shared.gl,".useProgram(",s,".program);"),n.shader.program)X(r,a,n,n.shader.program);else{a(r.shared.vao,".setVAO(null);");var c=r.global.def("{}"),u=(l=a.def(s,".id"),a.def(c,"[",l,"]"));a(r.cond(u).then(u,".call(this,a0,a1);").else(u,"=",c,"[",l,"]=",r.link(function(i){return W(X,r,n,i,2)}),"(",s,");",u,".call(this,a0,a1);"))}0<Object.keys(n.state).length&&a(r.shared.current,".dirty=true;"),r.shared.vao&&a(r.shared.vao,".setVAO(null);")}(g,v),P(g.compile(),{destroy:function(){v.shader.program.destroy()}})}}}(tM,tI,tO,tF,tN,tU,0,tG,{},tj,tV,tB,tz,tD,tC,r),tY=(tI=function(r,n,i,a,o,s,l){function c(o){s=null===n.next?5121:n.next.colorAttachments[0].texture._texture.type;var s,l=0,c=0,u=a.framebufferWidth,f=a.framebufferHeight,h=null;return j(o)?h=o:o&&(l=0|o.x,c=0|o.y,u=0|(o.width||a.framebufferWidth-l),f=0|(o.height||a.framebufferHeight-c),h=o.data||null),i(),o=u*f*4,h||(5121===s?h=new Uint8Array(o):5126===s&&(h=h||new Float32Array(o))),r.pixelStorei(3333,4),r.readPixels(l,c,u,f,6408,s,h),h}return function(r){var i;return r&&"framebuffer"in r?(n.setFBO({framebuffer:r.framebuffer},function(){i=c(r)}),i):c(r)}}(tM,tG,tW.procs.poll,tz),tW.next),tZ=tM.canvas,tX=[],tK=[],tJ=[],t$=[r.onDestroy],tQ=null;tZ&&(tZ.addEventListener("webglcontextlost",y,!1),tZ.addEventListener("webglcontextrestored",B,!1));var t0=tG.setFBO=J({framebuffer:R.define.call(null,1,"framebuffer")});return tf(),tS=P(J,{clear:function(r){if("framebuffer"in r){if(r.framebuffer&&"framebufferCube"===r.framebuffer_reglType)for(var n=0;6>n;++n)t0(P({framebuffer:r.framebuffer.faces[n]},r),$);else t0(r,$)}else $(0,r)},prop:R.define.bind(null,1),context:R.define.bind(null,2),this:R.define.bind(null,3),draw:J({}),buffer:function(r){return tN.create(r,34962,!1,!1)},elements:function(r){return tU.create(r,!1)},texture:tH.create2D,cube:tH.createCube,renderbuffer:tq.create,framebuffer:tG.create,framebufferCube:tG.createCube,vao:tj.createVAO,attributes:tS,frame:tl,on:function(r,n){var i;switch(r){case"frame":return tl(n);case"lost":i=tK;break;case"restore":i=tJ;break;case"destroy":i=t$}return i.push(n),{cancel:function(){for(var r=0;r<i.length;++r)if(i[r]===n){i[r]=i[i.length-1],i.pop();break}}}},limits:tF,hasExtension:function(r){return 0<=tF.extensions.indexOf(r.toLowerCase())},read:tI,destroy:function(){tX.length=0,c(),tZ&&(tZ.removeEventListener("webglcontextlost",y),tZ.removeEventListener("webglcontextrestored",B)),tV.clear(),tG.clear(),tq.clear(),tj.clear(),tH.clear(),tU.clear(),tN.clear(),tD&&tD.clear(),t$.forEach(function(r){r()})},_gl:tM,_refresh:tf,poll:function(){tu(),tD&&tD.update()},now:tT,stats:tL,getCachedCode:function(){return tC},preloadCachedCode:function(r){Object.entries(r).forEach(function(r){tC[r[0]]=r[1]})}}),r.onDone(null,tS),tS}}()},30456:function(r,n,i){var a=i(33576),o=a.Buffer;function s(r,n){for(var i in r)n[i]=r[i]}function l(r,n,i){return o(r,n,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=a:(s(a,n),n.Buffer=l),l.prototype=Object.create(o.prototype),s(o,l),l.from=function(r,n,i){if("number"==typeof r)throw TypeError("Argument must not be a number");return o(r,n,i)},l.alloc=function(r,n,i){if("number"!=typeof r)throw TypeError("Argument must be a number");var a=o(r);return void 0!==n?"string"==typeof i?a.fill(n,i):a.fill(n):a.fill(0),a},l.allocUnsafe=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return o(r)},l.allocUnsafeSlow=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return a.SlowBuffer(r)}},14500:function(r,n,i){var a=i(53664),o=i(64348),s=i(39640)(),l=i(2304),c=a("%TypeError%"),u=a("%Math.floor%");r.exports=function(r,n){if("function"!=typeof r)throw new c("`fn` is not a function");if("number"!=typeof n||n<0||n>4294967295||u(n)!==n)throw new c("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],a=!0,f=!0;if("length"in r&&l){var h=l(r,"length");h&&!h.configurable&&(a=!1),h&&!h.writable&&(f=!1)}return(a||f||!i)&&(s?o(r,"length",n,!0,!0):o(r,"length",n)),r}},29936:function(r,n,i){r.exports=o;var a=i(61252).EventEmitter;function o(){a.call(this)}i(6768)(o,a),o.Readable=i(12348),o.Writable=i(11288),o.Duplex=i(15316),o.Transform=i(22477),o.PassThrough=i(27136),o.finished=i(15932),o.pipeline=i(38180),o.Stream=o,o.prototype.pipe=function(r,n){var i=this;function o(n){r.writable&&!1===r.write(n)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",o),r.on("drain",s),r._isStdio||n&&!1===n.end||(i.on("end",c),i.on("close",u));var l=!1;function c(){l||(l=!0,r.end())}function u(){l||(l=!0,"function"==typeof r.destroy&&r.destroy())}function f(r){if(h(),0===a.listenerCount(this,"error"))throw r}function h(){i.removeListener("data",o),r.removeListener("drain",s),i.removeListener("end",c),i.removeListener("close",u),i.removeListener("error",f),r.removeListener("error",f),i.removeListener("end",h),i.removeListener("close",h),r.removeListener("close",h)}return i.on("error",f),r.on("error",f),i.on("end",h),i.on("close",h),r.on("close",h),r.emit("pipe",i),r}},92784:function(r){var n={};function i(r,i,a){a||(a=Error);var o=function(r){function n(n,a,o){return r.call(this,"string"==typeof i?i:i(n,a,o))||this}return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,n}(a);o.prototype.name=a.name,o.prototype.code=r,n[r]=o}function a(r,n){if(Array.isArray(r)){var i=r.length;return r=r.map(function(r){return String(r)}),i>2?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:2===i?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}return"of ".concat(n," ").concat(String(r))}i("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(r,n,i){if("string"==typeof n&&(s="not ",n.substr(0,4)===s)?(o="must not be",n=n.replace(/^not /,"")):o="must be",(void 0===u||u>r.length)&&(u=r.length)," argument"===r.substring(u-9,u))l="The ".concat(r," ").concat(o," ").concat(a(n,"type"));else{var o,s,l,c,u,f=("number"!=typeof c&&(c=0),c+1>r.length||-1===r.indexOf(".",c)?"argument":"property");l='The "'.concat(r,'" ').concat(f," ").concat(o," ").concat(a(n,"type"))}return l+". Received type ".concat(typeof i)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.i=n},15316:function(r,n,i){var a=i(4168),o=Object.keys||function(r){var n=[];for(var i in r)n.push(i);return n};r.exports=h;var s=i(12348),l=i(11288);i(6768)(h,s);for(var c=o(l.prototype),u=0;u<c.length;u++){var f=c[u];h.prototype[f]||(h.prototype[f]=l.prototype[f])}function h(r){if(!(this instanceof h))return new h(r);s.call(this,r),l.call(this,r),this.allowHalfOpen=!0,r&&(!1===r.readable&&(this.readable=!1),!1===r.writable&&(this.writable=!1),!1===r.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||a.nextTick(d,this)}function d(r){r.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},27136:function(r,n,i){r.exports=o;var a=i(22477);function o(r){if(!(this instanceof o))return new o(r);a.call(this,r)}i(6768)(o,a),o.prototype._transform=function(r,n,i){i(null,r)}},12348:function(r,n,i){var a,o=i(4168);r.exports=S,S.ReadableState=M,i(61252).EventEmitter;var s,l=function(r,n){return r.listeners(n).length},c=i(4776),u=i(33576).Buffer,f=i.g.Uint8Array||function(){},h=i(19768);s=h&&h.debuglog?h.debuglog("stream"):function(){};var p,d,y,g=i(47264),v=i(55324),m=i(24888).getHighWaterMark,x=i(92784).i,b=x.ERR_INVALID_ARG_TYPE,_=x.ERR_STREAM_PUSH_AFTER_EOF,w=x.ERR_METHOD_NOT_IMPLEMENTED,T=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(6768)(S,c);var A=v.errorOrDestroy,k=["error","close","destroy","pause","resume"];function M(r,n,o){a=a||i(15316),r=r||{},"boolean"!=typeof o&&(o=n instanceof a),this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=m(this,r,"readableHighWaterMark",o),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(p||(p=i(86032).o),this.decoder=new p(r.encoding),this.encoding=r.encoding)}function S(r){if(a=a||i(15316),!(this instanceof S))return new S(r);var n=this instanceof a;this._readableState=new M(r,this,n),this.readable=!0,r&&("function"==typeof r.read&&(this._read=r.read),"function"==typeof r.destroy&&(this._destroy=r.destroy)),c.call(this)}function E(r,n,i,a,o){s("readableAddChunk",n);var l,c,h,p,d=r._readableState;if(null===n)d.reading=!1,function(r,n){if(s("onEofChunk"),!n.ended){if(n.decoder){var i=n.decoder.end();i&&i.length&&(n.buffer.push(i),n.length+=n.objectMode?1:i.length)}n.ended=!0,n.sync?C(r):(n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,O(r)))}}(r,d);else if(o||(l=n,u.isBuffer(l)||l instanceof f||"string"==typeof l||void 0===l||d.objectMode||(c=new b("chunk",["string","Buffer","Uint8Array"],l)),p=c),p)A(r,p);else if(d.objectMode||n&&n.length>0){if("string"==typeof n||d.objectMode||Object.getPrototypeOf(n)===u.prototype||(h=n,n=u.from(h)),a)d.endEmitted?A(r,new T):I(r,d,n,!0);else if(d.ended)A(r,new _);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!i?(n=d.decoder.write(n),d.objectMode||0!==n.length?I(r,d,n,!1):D(r,d)):I(r,d,n,!1)}}else a||(d.reading=!1,D(r,d));return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function I(r,n,i,a){n.flowing&&0===n.length&&!n.sync?(n.awaitDrain=0,r.emit("data",i)):(n.length+=n.objectMode?1:i.length,a?n.buffer.unshift(i):n.buffer.push(i),n.needReadable&&C(r)),D(r,n)}function L(r,n){var i;return r<=0||0===n.length&&n.ended?0:n.objectMode?1:r!=r?n.flowing&&n.length?n.buffer.head.data.length:n.length:(r>n.highWaterMark&&(n.highWaterMark=((i=r)>=1073741824?i=1073741824:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),r<=n.length?r:n.ended?n.length:(n.needReadable=!0,0))}function C(r){var n=r._readableState;s("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(s("emitReadable",n.flowing),n.emittedReadable=!0,o.nextTick(O,r))}function O(r){var n=r._readableState;s("emitReadable_",n.destroyed,n.length,n.ended),!n.destroyed&&(n.length||n.ended)&&(r.emit("readable"),n.emittedReadable=!1),n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,F(r)}function D(r,n){n.readingMore||(n.readingMore=!0,o.nextTick(P,r,n))}function P(r,n){for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var i=n.length;if(s("maybeReadMore read 0"),r.read(0),i===n.length)break}n.readingMore=!1}function B(r){var n=r._readableState;n.readableListening=r.listenerCount("readable")>0,n.resumeScheduled&&!n.paused?n.flowing=!0:r.listenerCount("data")>0&&r.resume()}function R(r){s("readable nexttick read 0"),r.read(0)}function z(r,n){s("resume",n.reading),n.reading||r.read(0),n.resumeScheduled=!1,r.emit("resume"),F(r),n.flowing&&!n.reading&&r.read(0)}function F(r){var n=r._readableState;for(s("flow",n.flowing);n.flowing&&null!==r.read(););}function N(r,n){var i;return 0===n.length?null:(n.objectMode?i=n.buffer.shift():!r||r>=n.length?(i=n.decoder?n.buffer.join(""):1===n.buffer.length?n.buffer.first():n.buffer.concat(n.length),n.buffer.clear()):i=n.buffer.consume(r,n.decoder),i)}function U(r){var n=r._readableState;s("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,o.nextTick(j,n,r))}function j(r,n){if(s("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&0===r.length&&(r.endEmitted=!0,n.readable=!1,n.emit("end"),r.autoDestroy)){var i=n._writableState;(!i||i.autoDestroy&&i.finished)&&n.destroy()}}function V(r,n){for(var i=0,a=r.length;i<a;i++)if(r[i]===n)return i;return -1}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(r){this._readableState&&(this._readableState.destroyed=r)}}),S.prototype.destroy=v.destroy,S.prototype._undestroy=v.undestroy,S.prototype._destroy=function(r,n){n(r)},S.prototype.push=function(r,n){var i,a=this._readableState;return a.objectMode?i=!0:"string"==typeof r&&((n=n||a.defaultEncoding)!==a.encoding&&(r=u.from(r,n),n=""),i=!0),E(this,r,n,!1,i)},S.prototype.unshift=function(r){return E(this,r,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(r){p||(p=i(86032).o);var n=new p(r);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var a=this._readableState.buffer.head,o="";null!==a;)o+=n.write(a.data),a=a.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this},S.prototype.read=function(r){s("read",r),r=parseInt(r,10);var n=this._readableState,i=r;if(0!==r&&(n.emittedReadable=!1),0===r&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return s("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?U(this):C(this),null;if(0===(r=L(r,n))&&n.ended)return 0===n.length&&U(this),null;var a,o=n.needReadable;return s("need readable",o),(0===n.length||n.length-r<n.highWaterMark)&&s("length less than watermark",o=!0),n.ended||n.reading?s("reading or ended",o=!1):o&&(s("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(r=L(i,n))),null===(a=r>0?N(r,n):null)?(n.needReadable=n.length<=n.highWaterMark,r=0):(n.length-=r,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),i!==r&&n.ended&&U(this)),null!==a&&this.emit("data",a),a},S.prototype._read=function(r){A(this,new w("_read()"))},S.prototype.pipe=function(r,n){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=r;break;case 1:a.pipes=[a.pipes,r];break;default:a.pipes.push(r)}a.pipesCount+=1,s("pipe count=%d opts=%j",a.pipesCount,n);var c=n&&!1===n.end||r===o.stdout||r===o.stderr?v:u;function u(){s("onend"),r.end()}a.endEmitted?o.nextTick(c):i.once("end",c),r.on("unpipe",function n(o,l){s("onunpipe"),o===i&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,s("cleanup"),r.removeListener("close",y),r.removeListener("finish",g),r.removeListener("drain",f),r.removeListener("error",d),r.removeListener("unpipe",n),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",p),h=!0,a.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&f())});var f=function(){var r=i._readableState;s("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&l(i,"data")&&(r.flowing=!0,F(i))};r.on("drain",f);var h=!1;function p(n){s("ondata");var o=r.write(n);s("dest.write",o),!1===o&&((1===a.pipesCount&&a.pipes===r||a.pipesCount>1&&-1!==V(a.pipes,r))&&!h&&(s("false write response, pause",a.awaitDrain),a.awaitDrain++),i.pause())}function d(n){s("onerror",n),v(),r.removeListener("error",d),0===l(r,"error")&&A(r,n)}function y(){r.removeListener("finish",g),v()}function g(){s("onfinish"),r.removeListener("close",y),v()}function v(){s("unpipe"),i.unpipe(r)}return i.on("data",p),function(r,n,i){if("function"==typeof r.prependListener)return r.prependListener(n,i);r._events&&r._events[n]?Array.isArray(r._events[n])?r._events[n].unshift(i):r._events[n]=[i,r._events[n]]:r.on(n,i)}(r,"error",d),r.once("close",y),r.once("finish",g),r.emit("pipe",i),a.flowing||(s("pipe resume"),i.resume()),r},S.prototype.unpipe=function(r){var n=this._readableState,i={hasUnpiped:!1};if(0===n.pipesCount)return this;if(1===n.pipesCount)return r&&r!==n.pipes||(r||(r=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,r&&r.emit("unpipe",this,i)),this;if(!r){var a=n.pipes,o=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<o;s++)a[s].emit("unpipe",this,{hasUnpiped:!1});return this}var l=V(n.pipes,r);return -1===l||(n.pipes.splice(l,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),r.emit("unpipe",this,i)),this},S.prototype.on=function(r,n){var i=c.prototype.on.call(this,r,n),a=this._readableState;return"data"===r?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===r&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,s("on readable",a.length,a.reading),a.length?C(this):a.reading||o.nextTick(R,this))),i},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(r,n){var i=c.prototype.removeListener.call(this,r,n);return"readable"===r&&o.nextTick(B,this),i},S.prototype.removeAllListeners=function(r){var n=c.prototype.removeAllListeners.apply(this,arguments);return"readable"!==r&&void 0!==r||o.nextTick(B,this),n},S.prototype.resume=function(){var r=this._readableState;return r.flowing||(s("resume"),r.flowing=!r.readableListening,r.resumeScheduled||(r.resumeScheduled=!0,o.nextTick(z,this,r))),r.paused=!1,this},S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(r){var n=this,i=this._readableState,a=!1;for(var o in r.on("end",function(){if(s("wrapped end"),i.decoder&&!i.ended){var r=i.decoder.end();r&&r.length&&n.push(r)}n.push(null)}),r.on("data",function(o){s("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o||(i.objectMode||o&&o.length)&&(n.push(o)||(a=!0,r.pause()))}),r)void 0===this[o]&&"function"==typeof r[o]&&(this[o]=function(n){return function(){return r[n].apply(r,arguments)}}(o));for(var l=0;l<k.length;l++)r.on(k[l],this.emit.bind(this,k[l]));return this._read=function(n){s("wrapped _read",n),a&&(a=!1,r.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=i(60328)),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),S._fromList=N,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(r,n){return void 0===y&&(y=i(90555)),y(S,r,n)})},22477:function(r,n,i){r.exports=h;var a=i(92784).i,o=a.ERR_METHOD_NOT_IMPLEMENTED,s=a.ERR_MULTIPLE_CALLBACK,l=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=a.ERR_TRANSFORM_WITH_LENGTH_0,u=i(15316);function f(r,n){var i=this._transformState;i.transforming=!1;var a=i.writecb;if(null===a)return this.emit("error",new s);i.writechunk=null,i.writecb=null,null!=n&&this.push(n),a(r);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function h(r){if(!(this instanceof h))return new h(r);u.call(this,r),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",p)}function p(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(n,i){d(r,n,i)})}function d(r,n,i){if(n)return r.emit("error",n);if(null!=i&&r.push(i),r._writableState.length)throw new c;if(r._transformState.transforming)throw new l;return r.push(null)}i(6768)(h,u),h.prototype.push=function(r,n){return this._transformState.needTransform=!1,u.prototype.push.call(this,r,n)},h.prototype._transform=function(r,n,i){i(new o("_transform()"))},h.prototype._write=function(r,n,i){var a=this._transformState;if(a.writecb=i,a.writechunk=r,a.writeencoding=n,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},h.prototype._read=function(r){var n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))},h.prototype._destroy=function(r,n){u.prototype._destroy.call(this,r,function(r){n(r)})}},11288:function(r,n,i){var a,o=i(4168);function s(r){var n=this;this.next=null,this.entry=null,this.finish=function(){!function(r,n,i){var a=r.entry;for(r.entry=null;a;){var o=a.callback;n.pendingcb--,o(void 0),a=a.next}n.corkedRequestsFree.next=r}(n,r)}}r.exports=S,S.WritableState=M;var l,c={deprecate:i(96656)},u=i(4776),f=i(33576).Buffer,h=i.g.Uint8Array||function(){},p=i(55324),d=i(24888).getHighWaterMark,y=i(92784).i,g=y.ERR_INVALID_ARG_TYPE,v=y.ERR_METHOD_NOT_IMPLEMENTED,m=y.ERR_MULTIPLE_CALLBACK,x=y.ERR_STREAM_CANNOT_PIPE,b=y.ERR_STREAM_DESTROYED,_=y.ERR_STREAM_NULL_VALUES,w=y.ERR_STREAM_WRITE_AFTER_END,T=y.ERR_UNKNOWN_ENCODING,A=p.errorOrDestroy;function k(){}function M(r,n,l){a=a||i(15316),r=r||{},"boolean"!=typeof l&&(l=n instanceof a),this.objectMode=!!r.objectMode,l&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=d(this,r,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===r.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){!function(r,n){var i=r._writableState,a=i.sync,s=i.writecb;if("function"!=typeof s)throw new m;if(i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,n)--i.pendingcb,a?(o.nextTick(s,n),o.nextTick(D,r,i),r._writableState.errorEmitted=!0,A(r,n)):(s(n),r._writableState.errorEmitted=!0,A(r,n),D(r,i));else{var l=C(i)||r.destroyed;l||i.corked||i.bufferProcessing||!i.bufferedRequest||L(r,i),a?o.nextTick(I,r,i,l,s):I(r,i,l,s)}}(n,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function S(r){var n=this instanceof(a=a||i(15316));if(!n&&!l.call(S,this))return new S(r);this._writableState=new M(r,this,n),this.writable=!0,r&&("function"==typeof r.write&&(this._write=r.write),"function"==typeof r.writev&&(this._writev=r.writev),"function"==typeof r.destroy&&(this._destroy=r.destroy),"function"==typeof r.final&&(this._final=r.final)),u.call(this)}function E(r,n,i,a,o,s,l){n.writelen=a,n.writecb=l,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new b("write")):i?r._writev(o,n.onwrite):r._write(o,s,n.onwrite),n.sync=!1}function I(r,n,i,a){i||0===n.length&&n.needDrain&&(n.needDrain=!1,r.emit("drain")),n.pendingcb--,a(),D(r,n)}function L(r,n){n.bufferProcessing=!0;var i=n.bufferedRequest;if(r._writev&&i&&i.next){var a=Array(n.bufferedRequestCount),o=n.corkedRequestsFree;o.entry=i;for(var l=0,c=!0;i;)a[l]=i,i.isBuf||(c=!1),i=i.next,l+=1;a.allBuffers=c,E(r,n,!0,n.length,a,"",o.finish),n.pendingcb++,n.lastBufferedRequest=null,o.next?(n.corkedRequestsFree=o.next,o.next=null):n.corkedRequestsFree=new s(n),n.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,f=i.encoding,h=i.callback;if(E(r,n,!1,n.objectMode?1:u.length,u,f,h),i=i.next,n.bufferedRequestCount--,n.writing)break}null===i&&(n.lastBufferedRequest=null)}n.bufferedRequest=i,n.bufferProcessing=!1}function C(r){return r.ending&&0===r.length&&null===r.bufferedRequest&&!r.finished&&!r.writing}function O(r,n){r._final(function(i){n.pendingcb--,i&&A(r,i),n.prefinished=!0,r.emit("prefinish"),D(r,n)})}function D(r,n){var i=C(n);if(i&&(n.prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,o.nextTick(O,r,n))),0===n.pendingcb&&(n.finished=!0,r.emit("finish"),n.autoDestroy))){var a=r._readableState;(!a||a.autoDestroy&&a.endEmitted)&&r.destroy()}return i}i(6768)(S,u),M.prototype.getBuffer=function(){for(var r=this.bufferedRequest,n=[];r;)n.push(r),r=r.next;return n},function(){try{Object.defineProperty(M.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(r){return!!l.call(this,r)||this===S&&r&&r._writableState instanceof M}})):l=function(r){return r instanceof this},S.prototype.pipe=function(){A(this,new x)},S.prototype.write=function(r,n,i){var a,s,l,c,u,p,d,y=this._writableState,v=!1,m=!y.objectMode&&(d=r,f.isBuffer(d)||d instanceof h);return m&&!f.isBuffer(r)&&(a=r,r=f.from(a)),"function"==typeof n&&(i=n,n=null),m?n="buffer":n||(n=y.defaultEncoding),"function"!=typeof i&&(i=k),y.ending?(s=i,A(this,l=new w),o.nextTick(s,l)):!m&&(c=r,u=i,null===c?p=new _:"string"==typeof c||y.objectMode||(p=new g("chunk",["string","Buffer"],c)),p&&(A(this,p),o.nextTick(u,p),1))||(y.pendingcb++,v=function(r,n,i,a,o,s){if(!i){var l,c,u=(l=a,c=o,n.objectMode||!1===n.decodeStrings||"string"!=typeof l||(l=f.from(l,c)),l);a!==u&&(i=!0,o="buffer",a=u)}var h=n.objectMode?1:a.length;n.length+=h;var p=n.length<n.highWaterMark;if(p||(n.needDrain=!0),n.writing||n.corked){var d=n.lastBufferedRequest;n.lastBufferedRequest={chunk:a,encoding:o,isBuf:i,callback:s,next:null},d?d.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else E(r,n,!1,h,a,o,s);return p}(this,y,m,r,n,i)),v},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,r.writing||r.corked||r.bufferProcessing||!r.bufferedRequest||L(this,r))},S.prototype.setDefaultEncoding=function(r){if("string"==typeof r&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new T(r);return this._writableState.defaultEncoding=r,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(r,n,i){i(new v("_write()"))},S.prototype._writev=null,S.prototype.end=function(r,n,i){var a,s=this._writableState;return"function"==typeof r?(i=r,r=null,n=null):"function"==typeof n&&(i=n,n=null),null!=r&&this.write(r,n),s.corked&&(s.corked=1,this.uncork()),s.ending||(a=i,s.ending=!0,D(this,s),a&&(s.finished?o.nextTick(a):this.once("finish",a)),s.ended=!0,this.writable=!1),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(r){this._writableState&&(this._writableState.destroyed=r)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(r,n){n(r)}},60328:function(r,n,i){var a,o=i(4168);function s(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var l=i(15932),c=Symbol("lastResolve"),u=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),d=Symbol("handlePromise"),y=Symbol("stream");function g(r,n){return{value:r,done:n}}function v(r){var n=r[c];if(null!==n){var i=r[y].read();null!==i&&(r[p]=null,r[c]=null,r[u]=null,n(g(i,!1)))}}function m(r){o.nextTick(v,r)}var x=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((s(a={get stream(){return this[y]},next:function(){var r,n=this,i=this[f];if(null!==i)return Promise.reject(i);if(this[h])return Promise.resolve(g(void 0,!0));if(this[y].destroyed)return new Promise(function(r,i){o.nextTick(function(){n[f]?i(n[f]):r(g(void 0,!0))})});var a,s=this[p];if(s)a=new Promise((r=this,function(n,i){s.then(function(){r[h]?n(g(void 0,!0)):r[d](n,i)},i)}));else{var l=this[y].read();if(null!==l)return Promise.resolve(g(l,!1));a=new Promise(this[d])}return this[p]=a,a}},Symbol.asyncIterator,function(){return this}),s(a,"return",function(){var r=this;return new Promise(function(n,i){r[y].destroy(null,function(r){r?i(r):n(g(void 0,!0))})})}),a),x);r.exports=function(r){var n,i=Object.create(b,(s(n={},y,{value:r,writable:!0}),s(n,c,{value:null,writable:!0}),s(n,u,{value:null,writable:!0}),s(n,f,{value:null,writable:!0}),s(n,h,{value:r._readableState.endEmitted,writable:!0}),s(n,d,{value:function(r,n){var a=i[y].read();a?(i[p]=null,i[c]=null,i[u]=null,r(g(a,!1))):(i[c]=r,i[u]=n)},writable:!0}),n));return i[p]=null,l(r,function(r){if(r&&"ERR_STREAM_PREMATURE_CLOSE"!==r.code){var n=i[u];return null!==n&&(i[p]=null,i[c]=null,i[u]=null,n(r)),void(i[f]=r)}var a=i[c];null!==a&&(i[p]=null,i[c]=null,i[u]=null,a(g(void 0,!0))),i[h]=!0}),r.on("readable",m.bind(null,i)),i}},47264:function(r,n,i){function a(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,a)}return i}var o=i(33576).Buffer,s=i(21576).inspect,l=s&&s.custom||"inspect";r.exports=function(){var r;function n(){(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}return r=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(0===this.length)return o.alloc(0);for(var n,i,a=o.allocUnsafe(r>>>0),s=this.head,l=0;s;)n=s.data,i=l,o.prototype.copy.call(n,a,i),l+=s.data.length,s=s.next;return a}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):i=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,a=n.data;for(r-=a.length;n=n.next;){var o=n.data,s=r>o.length?o.length:r;if(s===o.length?a+=o:a+=o.slice(0,r),0==(r-=s)){s===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++i}return this.length-=i,a}},{key:"_getBuffer",value:function(r){var n=o.allocUnsafe(r),i=this.head,a=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,l=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,l),0==(r-=l)){l===s.length?(++a,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(l));break}++a}return this.length-=a,n}},{key:l,value:function(r,n){return s(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach(function(n){var a;a=i[n],n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}({},n,{depth:0,customInspect:!1}))}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(n.prototype,r),n}()},55324:function(r,n,i){var a=i(4168);function o(r,n){l(r,n),s(r)}function s(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function l(r,n){r.emit("error",n)}r.exports={destroy:function(r,n){var i=this,c=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return c||u?n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,a.nextTick(l,this,r)):a.nextTick(l,this,r)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!n&&r?i._writableState?i._writableState.errorEmitted?a.nextTick(s,i):(i._writableState.errorEmitted=!0,a.nextTick(o,i,r)):a.nextTick(o,i,r):n?(a.nextTick(s,i),n(r)):a.nextTick(s,i)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,n){var i=r._readableState,a=r._writableState;i&&i.autoDestroy||a&&a.autoDestroy?r.destroy(n):r.emit("error",n)}}},15932:function(r,n,i){var a=i(92784).i.ERR_STREAM_PREMATURE_CLOSE;function o(){}r.exports=function r(n,i,s){if("function"==typeof i)return r(n,null,i);i||(i={}),l=s||o,c=!1,s=function(){if(!c){c=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];l.apply(this,n)}};var l,c,u=i.readable||!1!==i.readable&&n.readable,f=i.writable||!1!==i.writable&&n.writable,h=function(){n.writable||d()},p=n._writableState&&n._writableState.finished,d=function(){f=!1,p=!0,u||s.call(n)},y=n._readableState&&n._readableState.endEmitted,g=function(){u=!1,y=!0,f||s.call(n)},v=function(r){s.call(n,r)},m=function(){var r;return u&&!y?(n._readableState&&n._readableState.ended||(r=new a),s.call(n,r)):f&&!p?(n._writableState&&n._writableState.ended||(r=new a),s.call(n,r)):void 0},x=function(){n.req.on("finish",d)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",d),n.on("abort",m),n.req?x():n.on("request",x)):f&&!n._writableState&&(n.on("end",h),n.on("close",h)),n.on("end",g),n.on("finish",d),!1!==i.error&&n.on("error",v),n.on("close",m),function(){n.removeListener("complete",d),n.removeListener("abort",m),n.removeListener("request",x),n.req&&n.req.removeListener("finish",d),n.removeListener("end",h),n.removeListener("close",h),n.removeListener("finish",d),n.removeListener("end",g),n.removeListener("error",v),n.removeListener("close",m)}}},90555:function(r){r.exports=function(){throw Error("Readable.from is not available in the browser")}},38180:function(r,n,i){var a,o=i(92784).i,s=o.ERR_MISSING_ARGS,l=o.ERR_STREAM_DESTROYED;function c(r){if(r)throw r}function u(r){r()}function f(r,n){return r.pipe(n)}r.exports=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var h,p,d=(h=n).length?"function"!=typeof h[h.length-1]?c:h.pop():c;if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new s("streams");var y=n.map(function(r,o){var s,c,f,h,g,v,m=o<n.length-1;return s=o>0,f=c=function(r){p||(p=r),r&&y.forEach(u),m||(y.forEach(u),d(p))},h=!1,c=function(){h||(h=!0,f.apply(void 0,arguments))},g=!1,r.on("close",function(){g=!0}),void 0===a&&(a=i(15932)),a(r,{readable:m,writable:s},function(r){if(r)return c(r);g=!0,c()}),v=!1,function(n){if(!g&&!v)return v=!0,r.setHeader&&"function"==typeof r.abort?r.abort():"function"==typeof r.destroy?r.destroy():void c(n||new l("pipe"))}});return n.reduce(f)}},24888:function(r,n,i){var a=i(92784).i.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(r,n,i,o){var s=null!=n.highWaterMark?n.highWaterMark:o?n[i]:null;if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new a(o?i:"highWaterMark",s);return Math.floor(s)}return r.objectMode?16:16384}}},4776:function(r,n,i){r.exports=i(61252).EventEmitter},86032:function(r,n,i){var a=i(30456).Buffer,o=a.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(r){var n;switch(this.encoding=function(r){var n=function(r){if(!r)return"utf8";for(var n;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(n)return;r=(""+r).toLowerCase(),n=!0}}(r);if("string"!=typeof n&&(a.isEncoding===o||!o(r)))throw Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=u,this.end=f,n=4;break;case"utf8":this.fillLast=c,n=4;break;case"base64":this.text=h,this.end=p,n=3;break;default:return this.write=d,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(n)}function l(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function c(r){var n=this.lastTotal-this.lastNeed,i=function(r,n,i){if(128!=(192&n[0]))return r.lastNeed=0,"�";if(r.lastNeed>1&&n.length>1){if(128!=(192&n[1]))return r.lastNeed=1,"�";if(r.lastNeed>2&&n.length>2&&128!=(192&n[2]))return r.lastNeed=2,"�"}}(this,r);return void 0!==i?i:this.lastNeed<=r.length?(r.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,n,0,r.length),void(this.lastNeed-=r.length))}function u(r,n){if((r.length-n)%2==0){var i=r.toString("utf16le",n);if(i){var a=i.charCodeAt(i.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",n,r.length-1)}function f(r){var n=r&&r.length?this.write(r):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,i)}return n}function h(r,n){var i=(r.length-n)%3;return 0===i?r.toString("base64",n):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",n,r.length-i))}function p(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function d(r){return r.toString(this.encoding)}function y(r){return r&&r.length?this.write(r):""}n.o=s,s.prototype.write=function(r){var n,i;if(0===r.length)return"";if(this.lastNeed){if(void 0===(n=this.fillLast(r)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<r.length?n?n+this.text(r,i):this.text(r,i):n||""},s.prototype.end=function(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+"�":n},s.prototype.text=function(r,n){var i=function(r,n,i){var a=n.length-1;if(a<i)return 0;var o=l(n[a]);return o>=0?(o>0&&(r.lastNeed=o-1),o):--a<i||-2===o?0:(o=l(n[a]))>=0?(o>0&&(r.lastNeed=o-2),o):--a<i||-2===o?0:(o=l(n[a]))>=0?(o>0&&(2===o?o=0:r.lastNeed=o-3),o):0}(this,r,n);if(!this.lastNeed)return r.toString("utf8",n);this.lastTotal=i;var a=r.length-(i-this.lastNeed);return r.copy(this.lastChar,0,a),r.toString("utf8",n,a)},s.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length}},55619:function(r,n,i){var a=i(45408),o=i(86844)("stream-parser");function s(r){o("initializing parser stream"),r._parserBytesLeft=0,r._parserBuffers=[],r._parserBuffered=0,r._parserState=-1,r._parserCallback=null,"function"==typeof r.push&&(r._parserOutput=r.push.bind(r)),r._parserInit=!0}function l(r,n){a(!this._parserCallback,'there is already a "callback" set!'),a(isFinite(r)&&r>0,'can only buffer a finite number of bytes > 0, got "'+r+'"'),this._parserInit||s(this),o("buffering %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=0}function c(r,n){a(!this._parserCallback,'there is already a "callback" set!'),a(r>0,'can only skip > 0 bytes, got "'+r+'"'),this._parserInit||s(this),o("skipping %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=1}function u(r,n){a(!this._parserCallback,'There is already a "callback" set!'),a(r>0,'can only pass through > 0 bytes, got "'+r+'"'),this._parserInit||s(this),o("passing through %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=2}function f(r,n,i){this._parserInit||s(this),o("write(%o bytes)",r.length),"function"==typeof n&&(i=n),d(this,r,null,i)}function h(r,n,i){this._parserInit||s(this),o("transform(%o bytes)",r.length),"function"!=typeof n&&(n=this._parserOutput),d(this,r,n,i)}function p(r,n,i,a){if(r._parserBytesLeft-=n.length,o("%o bytes left for stream piece",r._parserBytesLeft),0===r._parserState?(r._parserBuffers.push(n),r._parserBuffered+=n.length):2===r._parserState&&i(n),0!==r._parserBytesLeft)return a;var s=r._parserCallback;if(s&&0===r._parserState&&r._parserBuffers.length>1&&(n=rO.concat(r._parserBuffers,r._parserBuffered)),0!==r._parserState&&(n=null),r._parserCallback=null,r._parserBuffered=0,r._parserState=-1,r._parserBuffers.splice(0),s){var l=[];n&&l.push(n),i&&l.push(i);var c=s.length>l.length;c&&l.push(y(a));var u=s.apply(r,l);if(!c||a===u)return a}}r.exports=function(r){var n=r&&"function"==typeof r._transform,i=r&&"function"==typeof r._write;if(!n&&!i)throw Error("must pass a Writable or Transform stream in");o("extending Parser into stream"),r._bytes=l,r._skipBytes=c,n&&(r._passthrough=u),n?r._transform=h:r._write=f};var d=y(function r(n,i,a,o){return n._parserBytesLeft<=0?o(Error("got data but not currently parsing anything")):i.length<=n._parserBytesLeft?function(){return p(n,i,a,o)}:function(){var s=i.slice(0,n._parserBytesLeft);return p(n,s,a,function(l){return l?o(l):i.length>s.length?function(){return r(n,i.slice(s.length),a,o)}:void 0})}});function y(r){return function(){for(var n=r.apply(this,arguments);"function"==typeof n;)n=n();return n}}},86844:function(r,n,i){var a=i(4168);function o(){var r;try{r=n.storage.debug}catch(r){}return!r&&void 0!==a&&"env"in a&&(r=a.env.DEBUG),r}(n=r.exports=i(89416)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(r){var i=this.useColors;if(r[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+r[0]+(i?"%c ":" ")+"+"+n.humanize(this.diff),i){var a="color: "+this.color;r.splice(1,0,a,"color: inherit");var o=0,s=0;r[0].replace(/%[a-zA-Z%]/g,function(r){"%%"!==r&&(o++,"%c"===r&&(s=o))}),r.splice(s,0,a)}},n.save=function(r){try{null==r?n.storage.removeItem("debug"):n.storage.debug=r}catch(r){}},n.load=o,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(r){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(r){try{return JSON.stringify(r)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}},n.enable(o())},89416:function(r,n,i){var a;function o(r){function i(){if(i.enabled){var r=+new Date,o=r-(a||r);i.diff=o,i.prev=a,i.curr=r,a=r;for(var s=Array(arguments.length),l=0;l<s.length;l++)s[l]=arguments[l];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,a){if("%%"===r)return r;c++;var o=n.formatters[a];if("function"==typeof o){var l=s[c];r=o.call(i,l),s.splice(c,1),c--}return r}),n.formatArgs.call(i,s),(i.log||n.log||console.log.bind(console)).apply(i,s)}}return i.namespace=r,i.enabled=n.enabled(r),i.useColors=n.useColors(),i.color=function(r){var i,a=0;for(i in r)a=(a<<5)-a+r.charCodeAt(i)|0;return n.colors[Math.abs(a)%n.colors.length]}(r),"function"==typeof n.init&&n.init(i),i}(n=r.exports=o.debug=o.default=o).coerce=function(r){return r instanceof Error?r.stack||r.message:r},n.disable=function(){n.enable("")},n.enable=function(r){n.save(r),n.names=[],n.skips=[];for(var i=("string"==typeof r?r:"").split(/[\s,]+/),a=i.length,o=0;o<a;o++)i[o]&&("-"===(r=i[o].replace(/\*/g,".*?"))[0]?n.skips.push(RegExp("^"+r.substr(1)+"$")):n.names.push(RegExp("^"+r+"$")))},n.enabled=function(r){var i,a;for(i=0,a=n.skips.length;i<a;i++)if(n.skips[i].test(r))return!1;for(i=0,a=n.names.length;i<a;i++)if(n.names[i].test(r))return!0;return!1},n.humanize=i(93744),n.names=[],n.skips=[],n.formatters={}},93744:function(r){function n(r,n,i){if(!(r<n))return r<1.5*n?Math.floor(r/n)+" "+i:Math.ceil(r/n)+" "+i+"s"}r.exports=function(r,i){i=i||{};var a=typeof r;if("string"===a&&r.length>0)return function(r){if(!((r=String(r)).length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===a&&!1===isNaN(r))return i.long?n(r,864e5,"day")||n(r,36e5,"hour")||n(r,6e4,"minute")||n(r,1e3,"second")||r+" ms":r>=864e5?Math.round(r/864e5)+"d":r>=36e5?Math.round(r/36e5)+"h":r>=6e4?Math.round(r/6e4)+"m":r>=1e3?Math.round(r/1e3)+"s":r+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},39956:function(r,n,i){var a=i(32868);r.exports=function(r,n,i){if(null==r)throw Error("First argument should be a string");if(null==n)throw Error("Separator should be a string or a RegExp");i?("string"==typeof i||Array.isArray(i))&&(i={ignore:i}):i={},null==i.escape&&(i.escape=!0),null==i.ignore?i.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:("string"==typeof i.ignore&&(i.ignore=[i.ignore]),i.ignore=i.ignore.map(function(r){return 1===r.length&&(r+=r),r}));var o=a.parse(r,{flat:!0,brackets:i.ignore}),s=o[0].split(n);if(i.escape){for(var l=[],c=0;c<s.length;c++){var u=s[c],f=s[c+1];"\\"===u[u.length-1]&&"\\"!==u[u.length-2]?(l.push(u+n+f),c++):l.push(u)}s=l}for(c=0;c<s.length;c++)o[0]=s[c],s[c]=a.stringify(o,{flat:!0});return s}},78484:function(r){r.exports=function(r){for(var n=r.length,i=Array(n),a=Array(n),o=Array(n),s=Array(n),l=Array(n),c=Array(n),u=0;u<n;++u)i[u]=-1,a[u]=0,o[u]=!1,s[u]=0,l[u]=-1,c[u]=[];var f,h=0,p=[],d=[];for(u=0;u<n;++u)i[u]<0&&function(n){var u=[n],f=[n];for(i[n]=a[n]=h,o[n]=!0,h+=1;f.length>0;){var y=r[n=f[f.length-1]];if(s[n]<y.length){for(var g=s[n];g<y.length;++g){var v=y[g];if(i[v]<0){i[v]=a[v]=h,o[v]=!0,h+=1,u.push(v),f.push(v);break}o[v]&&(a[n]=0|Math.min(a[n],a[v])),l[v]>=0&&c[n].push(l[v])}s[n]=g}else{if(a[n]===i[n]){var m=[],x=[],b=0;for(g=u.length-1;g>=0;--g){var _=u[g];if(o[_]=!1,m.push(_),x.push(c[_]),b+=c[_].length,l[_]=p.length,_===n){u.length=g;break}}p.push(m);var w=Array(b);for(g=0;g<x.length;g++)for(var T=0;T<x[g].length;T++)w[--b]=x[g][T];d.push(w)}f.pop()}}}(u);for(u=0;u<d.length;u++){var y=d[u];if(0!==y.length){y.sort(function(r,n){return r-n}),f=[y[0]];for(var g=1;g<y.length;g++)y[g]!==y[g-1]&&f.push(y[g]);d[u]=f}}return{components:p,adjacencyList:d}}},92848:function(r,n,i){i.r(n);var a=2*Math.PI,o=function(r,n,i,a,o,s,l){var c=r.x,u=r.y;return{x:a*(c*=n)-o*(u*=i)+s,y:o*c+a*u+l}},s=function(r,n){var i=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:4/3*Math.tan(n/4),a=Math.cos(r),o=Math.sin(r),s=Math.cos(r+n),l=Math.sin(r+n);return[{x:a-o*i,y:o+a*i},{x:s+l*i,y:l-s*i},{x:s,y:l}]},l=function(r,n,i,a){var o=r*i+n*a;return o>1&&(o=1),o<-1&&(o=-1),(r*a-n*i<0?-1:1)*Math.acos(o)};n.default=function(r){var n,i,c,u,f,h,p,d,y,g,v,m,x,b,_,w=r.px,T=r.py,A=r.cx,k=r.cy,M=r.rx,S=r.ry,E=r.xAxisRotation,I=void 0===E?0:E,L=r.largeArcFlag,C=r.sweepFlag,O=[];if(0===M||0===S)return[];var D=Math.sin(I*a/360),P=Math.cos(I*a/360),B=P*(w-A)/2+D*(T-k)/2,R=-D*(w-A)/2+P*(T-k)/2;if(0===B&&0===R)return[];var z=Math.pow(B,2)/Math.pow(M=Math.abs(M),2)+Math.pow(R,2)/Math.pow(S=Math.abs(S),2);z>1&&(M*=Math.sqrt(z),S*=Math.sqrt(z));var F=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var i=[],a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done)&&(i.push(l.value),4!==i.length);a=!0);}catch(r){o=!0,s=r}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return i}(r,4);throw TypeError("Invalid attempt to destructure non-iterable instance")}((n=M,i=S,c=void 0===L?0:L,u=void 0===C?0:C,f=Math.pow(n,2),h=Math.pow(i,2),p=Math.pow(B,2),(y=f*h-f*(d=Math.pow(R,2))-h*p)<0&&(y=0),y/=f*d+h*p,g=(y=Math.sqrt(y)*(c===u?-1:1))*n/i*R,v=-(y*i)/n*B,b=l(1,0,m=(B-g)/n,x=(R-v)/i),_=l(m,x,(-B-g)/n,(-R-v)/i),0===u&&_>0&&(_-=a),1===u&&_<0&&(_+=a),[P*g-D*v+(w+A)/2,D*g+P*v+(T+k)/2,b,_]),0),N=F[0],U=F[1],j=F[2],V=F[3],H=Math.abs(V)/(a/4);1e-7>Math.abs(1-H)&&(H=1);var q=Math.max(Math.ceil(H),1);V/=q;for(var G=0;G<q;G++)O.push(s(j,V)),j+=V;return O.map(function(r){var n=o(r[0],M,S,P,D,N,U),i=n.x,a=n.y,s=o(r[1],M,S,P,D,N,U),l=s.x,c=s.y,u=o(r[2],M,S,P,D,N,U);return{x1:i,y1:a,x2:l,y2:c,x:u.x,y:u.y}})}},74840:function(r,n,i){var a=i(21984),o=i(49972),s=i(41976),l=i(53520),c=i(45408);r.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(c(l(r),"String is not an SVG path."),r=a(r)),c(Array.isArray(r),"Argument should be a string or an array of path segments."),!(r=s(r=o(r))).length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],i=0,u=r.length;i<u;i++)for(var f=r[i].slice(1),h=0;h<f.length;h+=2)f[h+0]<n[0]&&(n[0]=f[h+0]),f[h+1]<n[1]&&(n[1]=f[h+1]),f[h+0]>n[2]&&(n[2]=f[h+0]),f[h+1]>n[3]&&(n[3]=f[h+1]);return n}},41976:function(r,n,i){r.exports=function(r){for(var n,i=[],l=0,c=0,u=0,f=0,h=null,p=null,d=0,y=0,g=0,v=r.length;g<v;g++){var m=r[g],x=m[0];switch(x){case"M":u=m[1],f=m[2];break;case"A":var b=a({px:d,py:y,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!b.length)continue;for(var _,w=0;w<b.length;w++)m=["C",(_=b[w]).x1,_.y1,_.x2,_.y2,_.x,_.y],w<b.length-1&&i.push(m);break;case"S":var T=d,A=y;"C"!=n&&"S"!=n||(T+=T-l,A+=A-c),m=["C",T,A,m[1],m[2],m[3],m[4]];break;case"T":"Q"==n||"T"==n?(h=2*d-h,p=2*y-p):(h=d,p=y),m=s(d,y,h,p,m[1],m[2]);break;case"Q":h=m[1],p=m[2],m=s(d,y,m[1],m[2],m[3],m[4]);break;case"L":m=o(d,y,m[1],m[2]);break;case"H":m=o(d,y,m[1],y);break;case"V":m=o(d,y,d,m[1]);break;case"Z":m=o(d,y,u,f)}n=x,d=m[m.length-2],y=m[m.length-1],m.length>4?(l=m[m.length-4],c=m[m.length-3]):(l=d,c=y),i.push(m)}return i};var a=i(92848);function o(r,n,i,a){return["C",r,n,i,a,i,a]}function s(r,n,i,a,o,s){return["C",r/3+2/3*i,n/3+2/3*a,o/3+2/3*i,s/3+2/3*a,o,s]}},20472:function(r,n,i){var a,o=i(74840),s=i(21984),l=i(22235),c=i(53520),u=i(29620),f=document.createElement("canvas"),h=f.getContext("2d");r.exports=function(r,n){if(!c(r))throw Error("Argument should be valid svg path string");n||(n={}),n.shape?(i=n.shape[0],p=n.shape[1]):(i=f.width=n.w||n.width||200,p=f.height=n.h||n.height||200);var i,p,d=Math.min(i,p),y=n.stroke||0,g=n.viewbox||n.viewBox||o(r),v=[i/(g[2]-g[0]),p/(g[3]-g[1])],m=Math.min(v[0]||0,v[1]||0)/2;if(h.fillStyle="black",h.fillRect(0,0,i,p),h.fillStyle="white",y&&("number"!=typeof y&&(y=1),h.strokeStyle=y>0?"white":"black",h.lineWidth=Math.abs(y)),h.translate(.5*i,.5*p),h.scale(m,m),function(){if(null!=a)return a;var r=document.createElement("canvas").getContext("2d");if(r.canvas.width=r.canvas.height=1,!window.Path2D)return a=!1;var n=new Path2D("M0,0h1v1h-1v-1Z");r.fillStyle="black",r.fill(n);var i=r.getImageData(0,0,1,1);return a=i&&i.data&&255===i.data[3]}()){var x=new Path2D(r);h.fill(x),y&&h.stroke(x)}else l(h,s(r)),h.fill(),y&&h.stroke();return h.setTransform(1,0,0,1,0,0),u(h,{cutoff:null!=n.cutoff?n.cutoff:.5,radius:null!=n.radius?n.radius:.5*d})}},49760:function(r,n,i){var a;!function(o){var s=/^\s+/,l=/\s+$/,c=0,u=o.round,f=o.min,h=o.max,p=o.random;function d(r,n){if(n=n||{},(r=r||"")instanceof d)return r;if(!(this instanceof d))return new d(r,n);var i,a,p,y,g,v,m,x,b,_,w,T,A,k,M,S,E,I,L,C,D=(g={r:0,g:0,b:0},v=1,m=null,x=null,b=null,_=!1,w=!1,"string"==typeof(i=r)&&(i=function(r){r=r.replace(s,"").replace(l,"").toLowerCase();var n,i=!1;if(O[r])r=O[r],i=!0;else if("transparent"==r)return{r:0,g:0,b:0,a:0,format:"name"};return(n=q.rgb.exec(r))?{r:n[1],g:n[2],b:n[3]}:(n=q.rgba.exec(r))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=q.hsl.exec(r))?{h:n[1],s:n[2],l:n[3]}:(n=q.hsla.exec(r))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=q.hsv.exec(r))?{h:n[1],s:n[2],v:n[3]}:(n=q.hsva.exec(r))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=q.hex8.exec(r))?{r:z(n[1]),g:z(n[2]),b:z(n[3]),a:z(n[4])/255,format:i?"name":"hex8"}:(n=q.hex6.exec(r))?{r:z(n[1]),g:z(n[2]),b:z(n[3]),format:i?"name":"hex"}:(n=q.hex4.exec(r))?{r:z(n[1]+""+n[1]),g:z(n[2]+""+n[2]),b:z(n[3]+""+n[3]),a:z(n[4]+""+n[4])/255,format:i?"name":"hex8"}:!!(n=q.hex3.exec(r))&&{r:z(n[1]+""+n[1]),g:z(n[2]+""+n[2]),b:z(n[3]+""+n[3]),format:i?"name":"hex"}}(i)),"object"==typeof i&&(G(i.r)&&G(i.g)&&G(i.b)?(a=i.r,p=i.g,y=i.b,g={r:255*B(a,255),g:255*B(p,255),b:255*B(y,255)},_=!0,w="%"===String(i.r).substr(-1)?"prgb":"rgb"):G(i.h)&&G(i.s)&&G(i.v)?(m=N(i.s),x=N(i.v),T=i.h,A=m,k=x,T=6*B(T,360),A=B(A,100),k=B(k,100),M=o.floor(T),S=T-M,E=k*(1-A),I=k*(1-S*A),L=k*(1-(1-S)*A),g={r:255*[k,I,E,E,L,k][C=M%6],g:255*[L,k,k,I,E,E][C],b:255*[E,E,L,k,k,I][C]},_=!0,w="hsv"):G(i.h)&&G(i.s)&&G(i.l)&&(m=N(i.s),b=N(i.l),g=function(r,n,i){var a,o,s;function l(r,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?r+6*(n-r)*i:i<.5?n:i<2/3?r+(n-r)*(2/3-i)*6:r}if(r=B(r,360),n=B(n,100),i=B(i,100),0===n)a=o=s=i;else{var c=i<.5?i*(1+n):i+n-i*n,u=2*i-c;a=l(u,c,r+1/3),o=l(u,c,r),s=l(u,c,r-1/3)}return{r:255*a,g:255*o,b:255*s}}(i.h,m,b),_=!0,w="hsl"),i.hasOwnProperty("a")&&(v=i.a)),v=P(v),{ok:_,format:i.format||w,r:f(255,h(g.r,0)),g:f(255,h(g.g,0)),b:f(255,h(g.b,0)),a:v});this._originalInput=r,this._r=D.r,this._g=D.g,this._b=D.b,this._a=D.a,this._roundA=u(100*this._a)/100,this._format=n.format||D.format,this._gradientType=n.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=D.ok,this._tc_id=c++}function y(r,n,i){var a,o,s=h(r=B(r,255),n=B(n,255),i=B(i,255)),l=f(r,n,i),c=(s+l)/2;if(s==l)a=o=0;else{var u=s-l;switch(o=c>.5?u/(2-s-l):u/(s+l),s){case r:a=(n-i)/u+(n<i?6:0);break;case n:a=(i-r)/u+2;break;case i:a=(r-n)/u+4}a/=6}return{h:a,s:o,l:c}}function g(r,n,i){var a,o,s=h(r=B(r,255),n=B(n,255),i=B(i,255)),l=f(r,n,i),c=s-l;if(o=0===s?0:c/s,s==l)a=0;else{switch(s){case r:a=(n-i)/c+(n<i?6:0);break;case n:a=(i-r)/c+2;break;case i:a=(r-n)/c+4}a/=6}return{h:a,s:o,v:s}}function v(r,n,i,a){var o=[F(u(r).toString(16)),F(u(n).toString(16)),F(u(i).toString(16))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function m(r,n,i,a){return[F(U(a)),F(u(r).toString(16)),F(u(n).toString(16)),F(u(i).toString(16))].join("")}function x(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.s-=n/100,i.s=R(i.s),d(i)}function b(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.s+=n/100,i.s=R(i.s),d(i)}function _(r){return d(r).desaturate(100)}function w(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.l+=n/100,i.l=R(i.l),d(i)}function T(r,n){n=0===n?0:n||10;var i=d(r).toRgb();return i.r=h(0,f(255,i.r-u(-n/100*255))),i.g=h(0,f(255,i.g-u(-n/100*255))),i.b=h(0,f(255,i.b-u(-n/100*255))),d(i)}function A(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.l-=n/100,i.l=R(i.l),d(i)}function k(r,n){var i=d(r).toHsl(),a=(i.h+n)%360;return i.h=a<0?360+a:a,d(i)}function M(r){var n=d(r).toHsl();return n.h=(n.h+180)%360,d(n)}function S(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+120)%360,s:n.s,l:n.l}),d({h:(i+240)%360,s:n.s,l:n.l})]}function E(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+90)%360,s:n.s,l:n.l}),d({h:(i+180)%360,s:n.s,l:n.l}),d({h:(i+270)%360,s:n.s,l:n.l})]}function I(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+72)%360,s:n.s,l:n.l}),d({h:(i+216)%360,s:n.s,l:n.l})]}function L(r,n,i){n=n||6,i=i||30;var a=d(r).toHsl(),o=360/i,s=[d(r)];for(a.h=(a.h-(o*n>>1)+720)%360;--n;)a.h=(a.h+o)%360,s.push(d(a));return s}function C(r,n){n=n||6;for(var i=d(r).toHsv(),a=i.h,o=i.s,s=i.v,l=[],c=1/n;n--;)l.push(d({h:a,s:o,v:s})),s=(s+c)%1;return l}d.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(299*r.r+587*r.g+114*r.b)/1e3},getLuminance:function(){var r,n,i,a=this.toRgb();return r=a.r/255,n=a.g/255,i=a.b/255,.2126*(r<=.03928?r/12.92:o.pow((r+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:o.pow((i+.055)/1.055,2.4))},setAlpha:function(r){return this._a=P(r),this._roundA=u(100*this._a)/100,this},toHsv:function(){var r=g(this._r,this._g,this._b);return{h:360*r.h,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=g(this._r,this._g,this._b),n=u(360*r.h),i=u(100*r.s),a=u(100*r.v);return 1==this._a?"hsv("+n+", "+i+"%, "+a+"%)":"hsva("+n+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var r=y(this._r,this._g,this._b);return{h:360*r.h,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=y(this._r,this._g,this._b),n=u(360*r.h),i=u(100*r.s),a=u(100*r.l);return 1==this._a?"hsl("+n+", "+i+"%, "+a+"%)":"hsla("+n+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(r){return v(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){var n,i,a,o,s;return n=this._r,i=this._g,a=this._b,o=this._a,s=[F(u(n).toString(16)),F(u(i).toString(16)),F(u(a).toString(16)),F(U(o))],r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*B(this._r,255))+"%",g:u(100*B(this._g,255))+"%",b:u(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*B(this._r,255))+"%, "+u(100*B(this._g,255))+"%, "+u(100*B(this._b,255))+"%)":"rgba("+u(100*B(this._r,255))+"%, "+u(100*B(this._g,255))+"%, "+u(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(D[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(r){var n="#"+m(this._r,this._g,this._b,this._a),i=n,a=this._gradientType?"GradientType = 1, ":"";if(r){var o=d(r);i="#"+m(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+n+",endColorstr="+i+")"},toString:function(r){var n=!!r;r=r||this._format;var i=!1,a=this._a<1&&this._a>=0;return n||!a||"hex"!==r&&"hex6"!==r&&"hex3"!==r&&"hex4"!==r&&"hex8"!==r&&"name"!==r?("rgb"===r&&(i=this.toRgbString()),"prgb"===r&&(i=this.toPercentageRgbString()),"hex"!==r&&"hex6"!==r||(i=this.toHexString()),"hex3"===r&&(i=this.toHexString(!0)),"hex4"===r&&(i=this.toHex8String(!0)),"hex8"===r&&(i=this.toHex8String()),"name"===r&&(i=this.toName()),"hsl"===r&&(i=this.toHslString()),"hsv"===r&&(i=this.toHsvString()),i||this.toHexString()):"name"===r&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(r,n){var i=r.apply(null,[this].concat([].slice.call(n)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(r,n){return r.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(r,n){if("object"==typeof r){var i={};for(var a in r)r.hasOwnProperty(a)&&(i[a]="a"===a?r[a]:N(r[a]));r=i}return d(r,n)},d.equals=function(r,n){return!(!r||!n)&&d(r).toRgbString()==d(n).toRgbString()},d.random=function(){return d.fromRatio({r:p(),g:p(),b:p()})},d.mix=function(r,n,i){i=0===i?0:i||50;var a=d(r).toRgb(),o=d(n).toRgb(),s=i/100;return d({r:(o.r-a.r)*s+a.r,g:(o.g-a.g)*s+a.g,b:(o.b-a.b)*s+a.b,a:(o.a-a.a)*s+a.a})},d.readability=function(r,n){var i=d(r),a=d(n);return(o.max(i.getLuminance(),a.getLuminance())+.05)/(o.min(i.getLuminance(),a.getLuminance())+.05)},d.isReadable=function(r,n,i){var a,o,s,l,c,u=d.readability(r,n);switch(o=!1,("AA"!==(l=((s=(s=i)||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==l&&(l="AA"),"small"!==(c=(s.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:l,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=u>=4.5;break;case"AAlarge":o=u>=3;break;case"AAAsmall":o=u>=7}return o},d.mostReadable=function(r,n,i){var a,o,s,l,c=null,u=0;o=(i=i||{}).includeFallbackColors,s=i.level,l=i.size;for(var f=0;f<n.length;f++)(a=d.readability(r,n[f]))>u&&(u=a,c=d(n[f]));return d.isReadable(r,c,{level:s,size:l})||!o?c:(i.includeFallbackColors=!1,d.mostReadable(r,["#fff","#000"],i))};var O=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=d.hexNames=function(r){var n={};for(var i in r)r.hasOwnProperty(i)&&(n[r[i]]=i);return n}(O);function P(r){return(isNaN(r=parseFloat(r))||r<0||r>1)&&(r=1),r}function B(r,n){"string"==typeof(i=r)&&-1!=i.indexOf(".")&&1===parseFloat(i)&&(r="100%");var i,a,s="string"==typeof(a=r)&&-1!=a.indexOf("%");return r=f(n,h(0,parseFloat(r))),s&&(r=parseInt(r*n,10)/100),1e-6>o.abs(r-n)?1:r%n/parseFloat(n)}function R(r){return f(1,h(0,r))}function z(r){return parseInt(r,16)}function F(r){return 1==r.length?"0"+r:""+r}function N(r){return r<=1&&(r=100*r+"%"),r}function U(r){return o.round(255*parseFloat(r)).toString(16)}var j,V,H,q=(V="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",H="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:RegExp("rgb"+V),rgba:RegExp("rgba"+H),hsl:RegExp("hsl"+V),hsla:RegExp("hsla"+H),hsv:RegExp("hsv"+V),hsva:RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(r){return!!q.CSS_UNIT.exec(r)}r.exports?r.exports=d:void 0===(a=(function(){return d}).call(n,i,n,r))||(r.exports=a)}(Math)},37816:function(r){r.exports=i,r.exports.float32=r.exports.float=i,r.exports.fract32=r.exports.fract=function(r,n){if(r.length){if(r instanceof Float32Array)return new Float32Array(r.length);n instanceof Float32Array||(n=i(r));for(var a=0,o=n.length;a<o;a++)n[a]=r[a]-n[a];return n}return i(r-i(r))};var n=new Float32Array(1);function i(r){return r.length?r instanceof Float32Array?r:new Float32Array(r):(n[0]=r,n[0])}},23464:function(r,n,i){var a=i(65819);function o(r,n){var i=a(getComputedStyle(r).getPropertyValue(n));return i[0]*s(i[1],r)}function s(r,n){switch(n=n||document.body,r=(r||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),r){case"%":return n.clientHeight/100;case"ch":case"ex":var i,a,s,l;return i=r,a=n,(s=document.createElement("div")).style["font-size"]="128"+i,a.appendChild(s),l=o(s,"font-size")/128,a.removeChild(s),l;case"em":return o(n,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}r.exports=s},55712:function(r,n,i){function a(r){return r}function o(r,n){return"string"==typeof n&&(n=r.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return s(r,n)})}:s(r,n)}function s(r,n){var i=n.id,o=n.bbox,s=null==n.properties?{}:n.properties,l=function(r,n){var i=function(r){if(null==r)return a;var n,i,o=r.scale[0],s=r.scale[1],l=r.translate[0],c=r.translate[1];return function(r,a){a||(n=i=0);var u=2,f=r.length,h=Array(f);for(h[0]=(n+=r[0])*o+l,h[1]=(i+=r[1])*s+c;u<f;)h[u]=r[u],++u;return h}}(r.transform),o=r.arcs;function s(r){return i(r)}function l(r){for(var n=[],a=0,s=r.length;a<s;++a)!function(r,n){n.length&&n.pop();for(var a=o[r<0?~r:r],s=0,l=a.length;s<l;++s)n.push(i(a[s],s));r<0&&function(r,n){for(var i,a=r.length,o=a-n;o<--a;)i=r[o],r[o++]=r[a],r[a]=i}(n,l)}(r[a],n);return n.length<2&&n.push(n[0]),n}function c(r){for(var n=l(r);n.length<4;)n.push(n[0]);return n}function u(r){return r.map(c)}return function r(n){var i,a=n.type;switch(a){case"GeometryCollection":return{type:a,geometries:n.geometries.map(r)};case"Point":i=s(n.coordinates);break;case"MultiPoint":i=n.coordinates.map(s);break;case"LineString":i=l(n.arcs);break;case"MultiLineString":i=n.arcs.map(l);break;case"Polygon":i=u(n.arcs);break;case"MultiPolygon":i=n.arcs.map(u);break;default:return null}return{type:a,coordinates:i}}(n)}(r,n);return null==i&&null==o?{type:"Feature",properties:s,geometry:l}:null==o?{type:"Feature",id:i,properties:s,geometry:l}:{type:"Feature",id:i,bbox:o,properties:s,geometry:l}}i.d(n,{NO:function(){return o}})},73384:function(r,n,i){var a=i(54612);r.exports=function(r){if("function"!=typeof r||!hasOwnProperty.call(r,"length"))return!1;try{if("number"!=typeof r.length||"function"!=typeof r.call||"function"!=typeof r.apply)return!1}catch(r){return!1}return!a(r)}},57980:function(r,n,i){var a=i(81680),o=i(7328),s=i(33940),l=i(18856),c=function(r,n){return r.replace("%v",l(n))};r.exports=function(r,n,i){if(!o(i))throw TypeError(c(n,r));if(!a(r)){if("default"in i)return i.default;if(i.isOptional)return null}var l=s(i.errorMessage);throw a(l)||(l=n),TypeError(c(l,r))}},32336:function(r){r.exports=function(r){try{return r.toString()}catch(n){try{return String(r)}catch(r){return null}}}},18856:function(r,n,i){var a=i(32336),o=/[\n\r\u2028\u2029]/g;r.exports=function(r){var n=a(r);return null===n?"<Non-coercible to string value>":(n.length>100&&(n=n.slice(0,99)+"…"),n=n.replace(o,function(r){switch(r){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},7328:function(r,n,i){var a=i(81680),o={object:!0,function:!0,undefined:!0};r.exports=function(r){return!!a(r)&&hasOwnProperty.call(o,typeof r)}},87396:function(r,n,i){var a=i(57980),o=i(85488);r.exports=function(r){return o(r)?r:a(r,"%v is not a plain function",arguments[1])}},85488:function(r,n,i){var a=i(73384),o=/^\s*class[\s{/}]/,s=Function.prototype.toString;r.exports=function(r){return!!a(r)&&!o.test(s.call(r))}},54612:function(r,n,i){var a=i(7328);r.exports=function(r){if(!a(r))return!1;try{return!!r.constructor&&r.constructor.prototype===r}catch(r){return!1}}},33940:function(r,n,i){var a=i(81680),o=i(7328),s=Object.prototype.toString;r.exports=function(r){if(!a(r))return null;if(o(r)){var n=r.toString;if("function"!=typeof n||n===s)return null}try{return""+r}catch(r){return null}}},18496:function(r,n,i){var a=i(57980),o=i(81680);r.exports=function(r){return o(r)?r:a(r,"Cannot use %v",arguments[1])}},81680:function(r){r.exports=function(r){return null!=r}},14144:function(r,n,i){var a=i(308),o=i(10352),s=i(33576).Buffer;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var l="undefined"!=typeof Uint8ClampedArray,c="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,f=i.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=o([32,0])),f.BIGUINT64||(f.BIGUINT64=o([32,0])),f.BIGINT64||(f.BIGINT64=o([32,0])),f.BUFFER||(f.BUFFER=o([32,0]));var h=f.DATA,p=f.BUFFER;function d(r){if(r){var n=r.length||r.byteLength;h[a.log2(n)].push(r)}}function y(r){r=a.nextPow2(r);var n=h[a.log2(r)];return n.length>0?n.pop():new ArrayBuffer(r)}function g(r){return new Uint8Array(y(r),0,r)}function v(r){return new Uint16Array(y(2*r),0,r)}function m(r){return new Uint32Array(y(4*r),0,r)}function x(r){return new Int8Array(y(r),0,r)}function b(r){return new Int16Array(y(2*r),0,r)}function _(r){return new Int32Array(y(4*r),0,r)}function w(r){return new Float32Array(y(4*r),0,r)}function T(r){return new Float64Array(y(8*r),0,r)}function A(r){return l?new Uint8ClampedArray(y(r),0,r):g(r)}function k(r){return c?new BigUint64Array(y(8*r),0,r):null}function M(r){return u?new BigInt64Array(y(8*r),0,r):null}function S(r){return new DataView(y(r),0,r)}function E(r){r=a.nextPow2(r);var n=p[a.log2(r)];return n.length>0?n.pop():new s(r)}n.free=function(r){if(s.isBuffer(r))p[a.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var n=r.length||r.byteLength;h[0|a.log2(n)].push(r)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(r){d(r.buffer)},n.freeArrayBuffer=d,n.freeBuffer=function(r){p[a.log2(r.length)].push(r)},n.malloc=function(r,n){if(void 0===n||"arraybuffer"===n)return y(r);switch(n){case"uint8":return g(r);case"uint16":return v(r);case"uint32":return m(r);case"int8":return x(r);case"int16":return b(r);case"int32":return _(r);case"float":case"float32":return w(r);case"double":case"float64":return T(r);case"uint8_clamped":return A(r);case"bigint64":return M(r);case"biguint64":return k(r);case"buffer":return E(r);case"data":case"dataview":return S(r)}return null},n.mallocArrayBuffer=y,n.mallocUint8=g,n.mallocUint16=v,n.mallocUint32=m,n.mallocInt8=x,n.mallocInt16=b,n.mallocInt32=_,n.mallocFloat32=n.mallocFloat=w,n.mallocFloat64=n.mallocDouble=T,n.mallocUint8Clamped=A,n.mallocBigUint64=k,n.mallocBigInt64=M,n.mallocDataView=S,n.mallocBuffer=E,n.clearCache=function(){for(var r=0;r<32;++r)f.UINT8[r].length=0,f.UINT16[r].length=0,f.UINT32[r].length=0,f.INT8[r].length=0,f.INT16[r].length=0,f.INT32[r].length=0,f.FLOAT[r].length=0,f.DOUBLE[r].length=0,f.BIGUINT64[r].length=0,f.BIGINT64[r].length=0,f.UINT8C[r].length=0,h[r].length=0,p[r].length=0}},92384:function(r){var n=/[\'\"]/;r.exports=function(r){return r?(n.test(r.charAt(0))&&(r=r.substr(1)),n.test(r.charAt(r.length-1))&&(r=r.substr(0,r.length-1)),r):""}},45223:function(r){r.exports=function(r,n,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var a=0,o=i.length;a<o;a++){var s,l=i[a];for(var c in l)if((void 0===n[c]||Array.isArray(n[c])||r[c]!==n[c])&&c in n){if(!0===l[c])s=n[c];else if(!1===l[c]||"function"==typeof l[c]&&void 0===(s=l[c](n[c],r,n)))continue;r[c]=s}}return r}},96656:function(r,n,i){function a(r){try{if(!i.g.localStorage)return!1}catch(r){return!1}var n=i.g.localStorage[r];return null!=n&&"true"===String(n).toLowerCase()}r.exports=function(r,n){if(a("noDeprecation"))return r;var i=!1;return function(){if(!i){if(a("throwDeprecation"))throw Error(n);a("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}}},75272:function(r){r.exports=function(r){return r&&"object"==typeof r&&"function"==typeof r.copy&&"function"==typeof r.fill&&"function"==typeof r.readUInt8}},41088:function(r,n,i){var a=i(91148),o=i(84420),s=i(96632),l=i(7728);function c(r){return r.call.bind(r)}var u="undefined"!=typeof BigInt,f="undefined"!=typeof Symbol,h=c(Object.prototype.toString),p=c(Number.prototype.valueOf),d=c(String.prototype.valueOf),y=c(Boolean.prototype.valueOf);if(u)var g=c(BigInt.prototype.valueOf);if(f)var v=c(Symbol.prototype.valueOf);function m(r,n){if("object"!=typeof r)return!1;try{return n(r),!0}catch(r){return!1}}function x(r){return"[object Map]"===h(r)}function b(r){return"[object Set]"===h(r)}function _(r){return"[object WeakMap]"===h(r)}function w(r){return"[object WeakSet]"===h(r)}function T(r){return"[object ArrayBuffer]"===h(r)}function A(r){return"undefined"!=typeof ArrayBuffer&&(T.working?T(r):r instanceof ArrayBuffer)}function k(r){return"[object DataView]"===h(r)}function M(r){return"undefined"!=typeof DataView&&(k.working?k(r):r instanceof DataView)}n.isArgumentsObject=a,n.isGeneratorFunction=o,n.isTypedArray=l,n.isPromise=function(r){return"undefined"!=typeof Promise&&r instanceof Promise||null!==r&&"object"==typeof r&&"function"==typeof r.then&&"function"==typeof r.catch},n.isArrayBufferView=function(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):l(r)||M(r)},n.isUint8Array=function(r){return"Uint8Array"===s(r)},n.isUint8ClampedArray=function(r){return"Uint8ClampedArray"===s(r)},n.isUint16Array=function(r){return"Uint16Array"===s(r)},n.isUint32Array=function(r){return"Uint32Array"===s(r)},n.isInt8Array=function(r){return"Int8Array"===s(r)},n.isInt16Array=function(r){return"Int16Array"===s(r)},n.isInt32Array=function(r){return"Int32Array"===s(r)},n.isFloat32Array=function(r){return"Float32Array"===s(r)},n.isFloat64Array=function(r){return"Float64Array"===s(r)},n.isBigInt64Array=function(r){return"BigInt64Array"===s(r)},n.isBigUint64Array=function(r){return"BigUint64Array"===s(r)},x.working="undefined"!=typeof Map&&x(new Map),n.isMap=function(r){return"undefined"!=typeof Map&&(x.working?x(r):r instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),n.isSet=function(r){return"undefined"!=typeof Set&&(b.working?b(r):r instanceof Set)},_.working="undefined"!=typeof WeakMap&&_(new WeakMap),n.isWeakMap=function(r){return"undefined"!=typeof WeakMap&&(_.working?_(r):r instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),n.isWeakSet=function(r){return w(r)},T.working="undefined"!=typeof ArrayBuffer&&T(new ArrayBuffer),n.isArrayBuffer=A,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),n.isDataView=M;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(r){return"[object SharedArrayBuffer]"===h(r)}function I(r){return void 0!==S&&(void 0===E.working&&(E.working=E(new S)),E.working?E(r):r instanceof S)}function L(r){return m(r,p)}function C(r){return m(r,d)}function O(r){return m(r,y)}function D(r){return u&&m(r,g)}function P(r){return f&&m(r,v)}n.isSharedArrayBuffer=I,n.isAsyncFunction=function(r){return"[object AsyncFunction]"===h(r)},n.isMapIterator=function(r){return"[object Map Iterator]"===h(r)},n.isSetIterator=function(r){return"[object Set Iterator]"===h(r)},n.isGeneratorObject=function(r){return"[object Generator]"===h(r)},n.isWebAssemblyCompiledModule=function(r){return"[object WebAssembly.Module]"===h(r)},n.isNumberObject=L,n.isStringObject=C,n.isBooleanObject=O,n.isBigIntObject=D,n.isSymbolObject=P,n.isBoxedPrimitive=function(r){return L(r)||C(r)||O(r)||D(r)||P(r)},n.isAnyArrayBuffer=function(r){return"undefined"!=typeof Uint8Array&&(A(r)||I(r))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(n,r,{enumerable:!1,value:function(){throw Error(r+" is not supported in userland")}})})},35840:function(r,n,i){var a=i(4168),o=Object.getOwnPropertyDescriptors||function(r){for(var n=Object.keys(r),i={},a=0;a<n.length;a++)i[n[a]]=Object.getOwnPropertyDescriptor(r,n[a]);return i},s=/%[sdj%]/g;n.format=function(r){if(!_(r)){for(var n=[],i=0;i<arguments.length;i++)n.push(f(arguments[i]));return n.join(" ")}i=1;for(var a=arguments,o=a.length,l=String(r).replace(s,function(r){if("%%"===r)return"%";if(i>=o)return r;switch(r){case"%s":return String(a[i++]);case"%d":return Number(a[i++]);case"%j":try{return JSON.stringify(a[i++])}catch(r){return"[Circular]"}default:return r}}),c=a[i];i<o;c=a[++i])x(c)||!A(c)?l+=" "+c:l+=" "+f(c);return l},n.deprecate=function(r,i){if(void 0!==a&&!0===a.noDeprecation)return r;if(void 0===a)return function(){return n.deprecate(r,i).apply(this,arguments)};var o=!1;return function(){if(!o){if(a.throwDeprecation)throw Error(i);a.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var l={},c=/^$/;if(a.env.NODE_DEBUG){var u=a.env.NODE_DEBUG;c=RegExp("^"+(u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function f(r,i){var a={seen:[],stylize:p};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),m(i)?a.showHidden=i:i&&n._extend(a,i),w(a.showHidden)&&(a.showHidden=!1),w(a.depth)&&(a.depth=2),w(a.colors)&&(a.colors=!1),w(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=h),d(a,r,a.depth)}function h(r,n){var i=f.styles[n];return i?"\x1b["+f.colors[i][0]+"m"+r+"\x1b["+f.colors[i][1]+"m":r}function p(r,n){return r}function d(r,i,a){if(r.customInspect&&i&&S(i.inspect)&&i.inspect!==n.inspect&&(!i.constructor||i.constructor.prototype!==i)){var o,s,l=i.inspect(a,r);return _(l)||(l=d(r,l,a)),l}var c=function(r,n){if(w(n))return r.stylize("undefined","undefined");if(_(n)){var i="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(i,"string")}return b(n)?r.stylize(""+n,"number"):m(n)?r.stylize(""+n,"boolean"):x(n)?r.stylize("null","null"):void 0}(r,i);if(c)return c;var u=Object.keys(i),f=(p={},u.forEach(function(r,n){p[r]=!0}),p);if(r.showHidden&&(u=Object.getOwnPropertyNames(i)),M(i)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return y(i);if(0===u.length){if(S(i)){var h=i.name?": "+i.name:"";return r.stylize("[Function"+h+"]","special")}if(T(i))return r.stylize(RegExp.prototype.toString.call(i),"regexp");if(k(i))return r.stylize(Date.prototype.toString.call(i),"date");if(M(i))return y(i)}var p,A,E="",I=!1,L=["{","}"];return v(i)&&(I=!0,L=["[","]"]),S(i)&&(E=" [Function"+(i.name?": "+i.name:"")+"]"),T(i)&&(E=" "+RegExp.prototype.toString.call(i)),k(i)&&(E=" "+Date.prototype.toUTCString.call(i)),M(i)&&(E=" "+y(i)),0!==u.length||I&&0!=i.length?a<0?T(i)?r.stylize(RegExp.prototype.toString.call(i),"regexp"):r.stylize("[Object]","special"):(r.seen.push(i),A=I?function(r,n,i,a,o){for(var s=[],l=0,c=n.length;l<c;++l)C(n,String(l))?s.push(g(r,n,i,a,String(l),!0)):s.push("");return o.forEach(function(o){o.match(/^\d+$/)||s.push(g(r,n,i,a,o,!0))}),s}(r,i,a,f,u):u.map(function(n){return g(r,i,a,f,n,I)}),r.seen.pop(),o=E,s=L,A.reduce(function(r,n){return n.indexOf("\n"),r+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?s[0]+(""===o?"":o+"\n ")+" "+A.join(",\n  ")+" "+s[1]:s[0]+o+" "+A.join(", ")+" "+s[1]):L[0]+E+L[1]}function y(r){return"["+Error.prototype.toString.call(r)+"]"}function g(r,n,i,a,o,s){var l,c,u;if((u=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]}).get?c=u.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):u.set&&(c=r.stylize("[Setter]","special")),C(a,o)||(l="["+o+"]"),c||(0>r.seen.indexOf(u.value)?(c=x(i)?d(r,u.value,null):d(r,u.value,i-1)).indexOf("\n")>-1&&(c=s?c.split("\n").map(function(r){return"  "+r}).join("\n").slice(2):"\n"+c.split("\n").map(function(r){return"   "+r}).join("\n")):c=r.stylize("[Circular]","special")),w(l)){if(s&&o.match(/^\d+$/))return c;(l=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.slice(1,-1),l=r.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=r.stylize(l,"string"))}return l+": "+c}function v(r){return Array.isArray(r)}function m(r){return"boolean"==typeof r}function x(r){return null===r}function b(r){return"number"==typeof r}function _(r){return"string"==typeof r}function w(r){return void 0===r}function T(r){return A(r)&&"[object RegExp]"===E(r)}function A(r){return"object"==typeof r&&null!==r}function k(r){return A(r)&&"[object Date]"===E(r)}function M(r){return A(r)&&("[object Error]"===E(r)||r instanceof Error)}function S(r){return"function"==typeof r}function E(r){return Object.prototype.toString.call(r)}function I(r){return r<10?"0"+r.toString(10):r.toString(10)}n.debuglog=function(r){if(!l[r=r.toUpperCase()]){if(c.test(r)){var i=a.pid;l[r]=function(){var a=n.format.apply(n,arguments);console.error("%s %d: %s",r,i,a)}}else l[r]=function(){}}return l[r]},n.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.types=i(41088),n.isArray=v,n.isBoolean=m,n.isNull=x,n.isNullOrUndefined=function(r){return null==r},n.isNumber=b,n.isString=_,n.isSymbol=function(r){return"symbol"==typeof r},n.isUndefined=w,n.isRegExp=T,n.types.isRegExp=T,n.isObject=A,n.isDate=k,n.types.isDate=k,n.isError=M,n.types.isNativeError=M,n.isFunction=S,n.isPrimitive=function(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r},n.isBuffer=i(75272);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(r,n){return Object.prototype.hasOwnProperty.call(r,n)}n.log=function(){var r,i;console.log("%s - %s",(i=[I((r=new Date).getHours()),I(r.getMinutes()),I(r.getSeconds())].join(":"),[r.getDate(),L[r.getMonth()],i].join(" ")),n.format.apply(n,arguments))},n.inherits=i(6768),n._extend=function(r,n){if(!n||!A(n))return r;for(var i=Object.keys(n),a=i.length;a--;)r[i[a]]=n[i[a]];return r};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(r,n){if(!r){var i=Error("Promise was rejected with a falsy value");i.reason=r,r=i}return n(r)}n.promisify=function(r){if("function"!=typeof r)throw TypeError('The "original" argument must be of type Function');if(O&&r[O]){var n;if("function"!=typeof(n=r[O]))throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,O,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,i,a=new Promise(function(r,a){n=r,i=a}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(r,a){r?i(r):n(a)});try{r.apply(this,o)}catch(r){i(r)}return a}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),O&&Object.defineProperty(n,O,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,o(r))},n.promisify.custom=O,n.callbackify=function(r){if("function"!=typeof r)throw TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw TypeError("The last argument must be of type Function");var s=this,l=function(){return o.apply(s,arguments)};r.apply(this,n).then(function(r){a.nextTick(l.bind(null,null,r))},function(r){a.nextTick(D.bind(null,r,l))})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,o(r)),n}},5408:function(r,n,i){var a=i(13380);r.exports=function(r){return a("webgl",r)}},96632:function(r,n,i){var a=i(46492),o=i(63436),s=i(57916),l=i(99676),c=i(2304),u=l("Object.prototype.toString"),f=i(46672)(),h="undefined"==typeof globalThis?i.g:globalThis,p=o(),d=l("String.prototype.slice"),y=Object.getPrototypeOf,g=l("Array.prototype.indexOf",!0)||function(r,n){for(var i=0;i<r.length;i+=1)if(r[i]===n)return i;return -1},v={__proto__:null};a(p,f&&c&&y?function(r){var n=new h[r];if(Symbol.toStringTag in n){var i=y(n),a=c(i,Symbol.toStringTag);a||(a=c(y(i),Symbol.toStringTag)),v["$"+r]=s(a.get)}}:function(r){var n=new h[r],i=n.slice||n.set;i&&(v["$"+r]=s(i))}),r.exports=function(r){if(!r||"object"!=typeof r)return!1;if(!f){var n,i,o=d(u(r),8,-1);return g(p,o)>-1?o:"Object"===o&&(i=!1,a(v,function(n,a){if(!i)try{n(r),i=d(a,1)}catch(r){}}),i)}return c?(n=!1,a(v,function(i,a){if(!n)try{"$"+i(r)===a&&(n=d(a,1))}catch(r){}}),n):null}},67020:function(r,n,i){var a=i(38700),o=i(50896),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,n){if("string"==typeof r){var i=r.match(u);return i?i[0]:""}var a=this._validateYear(r),o=r.month(),s=""+this.toChineseMonth(a,o);return n&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(a,o)&&(s+="i"),s},monthNames:function(r){if("string"==typeof r){var n=r.match(f);return n?n[0]:""}var i=this._validateYear(r),a=r.month(),o=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(i,a)-1];return this.isIntercalaryMonth(i,a)&&(o="闰"+o),o},monthNamesShort:function(r){if("string"==typeof r){var n=r.match(h);return n?n[0]:""}var i=this._validateYear(r),a=r.month(),o=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(i,a)-1];return this.isIntercalaryMonth(i,a)&&(o="闰"+o),o},parseMonth:function(r,n){r=this._validateYear(r);var i,a=parseInt(n);if(isNaN(a))"闰"===n[0]&&(i=!0,n=n.substring(1)),"月"===n[n.length-1]&&(n=n.substring(0,n.length-1)),a=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(n);else{var o=n[n.length-1];i="i"===o||"I"===o}return this.toMonthIndex(r,a,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,n){if(r.year&&(r=r.year()),"number"!=typeof r||r<1888||r>2111)throw n.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,n,i){var o=this.intercalaryMonth(r);if(i&&n!==o||n<1||n>12)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return o?!i&&n<=o?n-1:n:n-1},toChineseMonth:function(r,n){r.year&&(n=(r=r.year()).month());var i=this.intercalaryMonth(r);if(n<0||n>(i?12:11))throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?n<i?n+1:n:n+1},intercalaryMonth:function(r){return p[(r=this._validateYear(r))-p[0]]>>13},isIntercalaryMonth:function(r,n){r.year&&(n=(r=r.year()).month());var i=this.intercalaryMonth(r);return!!i&&i===n},leapYear:function(r){return 0!==this.intercalaryMonth(r)},weekOfYear:function(r,n,i){var o,l=d[this._validateYear(r,a.local.invalidyear)-d[0]];return(o=s.newDate(l>>9&4095,l>>5&15,31&l)).add(4-(o.dayOfWeek()||7),"d"),1+Math.floor((this.toJD(r,n,i)-o.toJD())/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,n){r.year&&(n=r.month(),r=r.year());var i=p[(r=this._validateYear(r))-p[0]];if(n>(i>>13?12:11))throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-n?30:29},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,c,i,a.local.invalidDate);r=this._validateYear(o.year()),n=o.month(),i=o.day();var l=this.isIntercalaryMonth(r,n),c=this.toChineseMonth(r,n),u=function(r,n,i,a,o){if("object"==typeof r)l=r,s=n||{};else{if(!("number"==typeof r&&r>=1888&&r<=2111))throw Error("Lunar year outside range 1888-2111");if(!("number"==typeof n&&n>=1&&n<=12))throw Error("Lunar month outside range 1 - 12");if(!("number"==typeof i&&i>=1&&i<=30))throw Error("Lunar day outside range 1 - 30");"object"==typeof a?(u=!1,s=a):(u=!!a,s={}),l={year:r,month:n,day:i,isIntercalary:u}}c=l.day-1;var s,l,c,u,f,h=p[l.year-p[0]],y=h>>13;f=y&&(l.month>y||l.isIntercalary)?l.month:l.month-1;for(var g=0;g<f;g++)c+=h&1<<12-g?30:29;var v=d[l.year-d[0]],m=new Date(v>>9&4095,(v>>5&15)-1,(31&v)+c);return s.year=m.getFullYear(),s.month=1+m.getMonth(),s.day=m.getDate(),s}(r,c,i,l);return s.toJD(u.year,u.month,u.day)},fromJD:function(r){var n=s.fromJD(r),i=function(r,n,i,a){if("object"==typeof r)l=r,c=n||{};else{if(!("number"==typeof r&&r>=1888&&r<=2111))throw Error("Solar year outside range 1888-2111");if(!("number"==typeof n&&n>=1&&n<=12))throw Error("Solar month outside range 1 - 12");if(!("number"==typeof i&&i>=1&&i<=31))throw Error("Solar day outside range 1 - 31");l={year:r,month:n,day:i},c={}}var o=d[l.year-d[0]],s=l.year<<9|l.month<<5|l.day;c.year=s>=o?l.year:l.year-1;var l,c,u,f=new Date((o=d[c.year-d[0]])>>9&4095,(o>>5&15)-1,31&o);u=Math.round((new Date(l.year,l.month-1,l.day)-f)/864e5);var h,y=p[c.year-p[0]];for(h=0;h<13;h++){var g=y&1<<12-h?30:29;if(u<g)break;u-=g}var v=y>>13;return!v||h<v?(c.isIntercalary=!1,c.month=1+h):(h===v?c.isIntercalary=!0:c.isIntercalary=!1,c.month=h),c.day=1+u,c}(n.year(),n.month(),n.day()),a=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,a,i.day)},fromString:function(r){var n=r.match(c),i=this._validateYear(+n[1]),a=+n[2],o=!!n[3],s=this.toMonthIndex(i,a,o),l=+n[4];return this.newDate(i,s,l)},add:function(r,n,i){var a=r.year(),o=r.month(),s=this.isIntercalaryMonth(a,o),c=this.toChineseMonth(a,o),u=Object.getPrototypeOf(l.prototype).add.call(this,r,n,i);if("y"===i){var f=u.year(),h=u.month(),p=this.isIntercalaryMonth(f,c),d=s&&p?this.toMonthIndex(f,c,!0):this.toMonthIndex(f,c,!1);d!==h&&u.month(d)}return u}});var c=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,u=/^\d?\d[iI]?/m,f=/^闰?十?[一二三四五六七八九]?月/m,h=/^闰?十?[一二三四五六七八九]?/m;a.calendars.chinese=l;var p=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==3||r%4==-1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return(r=o.year())<0&&r++,o.day()+30*(o.month()-1)+365*(r-1)+Math.floor(r/4)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor(r)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--;var a=Math.floor((n=Math.floor(r)+.5-this.newDate(i,1,1).toJD())/30)+1,o=n-30*(a-1)+1;return this.newDate(i,a,o)}}),a.calendars.coptic=s},55668:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(r,n,i){return(this._validate(r,n,i,a.local.invalidDate).day()+1)%8},weekDay:function(r,n,i){var a=this.dayOfWeek(r,n,i);return a>=2&&a<=6},extraInfo:function(r,n,i){return{century:l[Math.floor((this._validate(r,n,i,a.local.invalidDate).year()-1)/100)+1]||""}},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year()+(0>o.year()?1:0),n=o.month(),(i=o.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(r-1)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor((r=Math.floor(r+.5)-Math.floor(this.jdEpoch)-1)/400)+1;r-=400*(n-1);var i=Math.floor((r+=r>15?16:0)/32)+1,a=r-32*(i-1)+1;return this.newDate(n<=0?n-1:n,i,a)}});var l={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=s},65168:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==3||r%4==-1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return(r=o.year())<0&&r++,o.day()+30*(o.month()-1)+365*(r-1)+Math.floor(r/4)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor(r)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--;var a=Math.floor((n=Math.floor(r)+.5-this.newDate(i,1,1).toJD())/30)+1,o=n-30*(a-1)+1;return this.newDate(i,a,o)}}),a.calendars.ethiopian=s},2084:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(r){return 7>l(7*(r=r<0?r+1:r)+1,19)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),this._leapYear(r.year?r.year():r)?13:12},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){return r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year(),this.toJD(-1===r?1:r+1,7,1)-this.toJD(r,7,1)},daysInMonth:function(r,n){return r.year&&(n=r.month(),r=r.year()),this._validate(r,n,this.minDay,a.local.invalidMonth),12===n&&this.leapYear(r)||8===n&&5===l(this.daysInYear(r),10)?30:9===n&&3===l(this.daysInYear(r),10)?29:this.daysPerMonth[n-1]},weekDay:function(r,n,i){return 6!==this.dayOfWeek(r,n,i)},extraInfo:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=r<=0?r+1:r,l=this.jdEpoch+this._delay1(s)+this._delay2(s)+i+1;if(n<7){for(var c=7;c<=this.monthsInYear(r);c++)l+=this.daysInMonth(r,c);for(c=1;c<n;c++)l+=this.daysInMonth(r,c)}else for(c=7;c<n;c++)l+=this.daysInMonth(r,c);return l},_delay1:function(r){var n=Math.floor((235*r-234)/19),i=29*n+Math.floor((12084+13753*n)/25920);return 3>l(3*(i+1),7)&&i++,i},_delay2:function(r){var n=this._delay1(r-1),i=this._delay1(r);return this._delay1(r+1)-i==356?2:i-n==382?1:0},fromJD:function(r){r=Math.floor(r)+.5;for(var n=Math.floor(98496*(r-this.jdEpoch)/35975351)-1;r>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var i=r<this.toJD(n,1,1)?7:1;r>this.toJD(n,i,this.daysInMonth(n,i));)i++;var a=r-this.toJD(n,i,1)+1;return this.newDate(n,i,a)}}),a.calendars.hebrew=s},26368:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(r){return(11*this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year()+14)%30<11},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){return this.leapYear(r)?355:354},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year(),n=o.month(),r=r<=0?r+1:r,(i=o.day())+Math.ceil(29.5*(n-1))+354*(r-1)+Math.floor((3+11*r)/30)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor((30*((r=Math.floor(r)+.5)-this.jdEpoch)+10646)/10631);n=n<=0?n-1:n;var i=Math.min(12,Math.ceil((r-29-this.toJD(n,1,1))/29.5)+1),a=r-this.toJD(n,i,1)+1;return this.newDate(n,i,a)}}),a.calendars.islamic=s},24747:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=0>n.year()?n.year()+1:n.year())%4==0},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year(),n=o.month(),i=o.day(),r<0&&r++,n<=2&&(r--,n+=12),Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+i-1524.5},fromJD:function(r){var n=Math.floor(r+.5)+1524,i=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*i),o=Math.floor((n-a)/30.6001),s=o-Math.floor(o<14?1:13),l=i-Math.floor(s>2?4716:4715),c=n-a-Math.floor(30.6001*o);return l<=0&&l--,this.newDate(l,s,c)}}),a.calendars.julian=s},65616:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),!1},formatYear:function(r){var n=Math.floor((r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year())/400);return r%=400,n+"."+Math.floor((r+=r<0?400:0)/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var n=0,i=0;i<r.length;i++){var a=parseInt(r[i],10);if(Math.abs(a)>19||i>0&&a<0)throw"Invalid Mayan year";n=20*n+a}return n},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),18},weekOfYear:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),360},daysInMonth:function(r,n){return this._validate(r,n,this.minDay,a.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate).day()},weekDay:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate),!0},extraInfo:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate).toJD(),s=this._toHaab(o),l=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(r){var n=l(8+(r-=this.jdEpoch)+340,365);return[Math.floor(n/20)+1,l(n,20)]},_toTzolkin:function(r){return[l(20+(r-=this.jdEpoch)-1,20)+1,l(r+4-1,13)+1]},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(r){var n=Math.floor((r=Math.floor(r)+.5-this.jdEpoch)/360);r%=360;var i=Math.floor((r+=r<0?360:0)/20),a=r%20;return this.newDate(n,i,a)}}),a.calendars.mayan=s},30632:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar;var l=a.instance("gregorian");o(s.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return l.leapYear(n.year()+(1>n.year()?1:0)+1469)},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidMonth);(r=o.year())<0&&r++;for(var s=o.day(),c=1;c<o.month();c++)s+=this.daysPerMonth[c-1];return s+l.toJD(r+1468,3,13)},fromJD:function(r){r=Math.floor(r+.5);for(var n=Math.floor((r-(this.jdEpoch-1))/366);r>=this.toJD(n+1,1,1);)n++;for(var i=r-Math.floor(this.toJD(n,1,1)+.5)+1,a=1;i>this.daysInMonth(n,a);)i-=this.daysInMonth(n,a),a++;return this.newDate(n,a,i)}}),a.calendars.nanakshahi=s},73040:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(r){return this.daysInYear(r)!==this.daysPerYear},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){if(r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[r])return this.daysPerYear;for(var n=0,i=this.minMonth;i<=12;i++)n+=this.NEPALI_CALENDAR_DATA[r][i];return n},daysInMonth:function(r,n){return r.year&&(n=r.month(),r=r.year()),this._validate(r,n,this.minDay,a.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[r]?this.daysPerMonth[n-1]:this.NEPALI_CALENDAR_DATA[r][n]},weekDay:function(r,n,i){return 6!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=a.instance(),l=0,c=n,u=r;this._createMissingCalendarData(r);var f=r-(c>9||9===c&&i>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(9!==n&&(l=i,c--);9!==c;)c<=0&&(c=12,u--),l+=this.NEPALI_CALENDAR_DATA[u][c],c--;return 9===n?(l+=i-this.NEPALI_CALENDAR_DATA[u][0])<0&&(l+=s.daysInYear(f)):l+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],s.newDate(f,1,1).add(l,"d").toJD()},fromJD:function(r){var n=a.instance().fromJD(r),i=n.year(),o=n.dayOfYear(),s=i+56;this._createMissingCalendarData(s);for(var l=9,c=this.NEPALI_CALENDAR_DATA[s][0],u=this.NEPALI_CALENDAR_DATA[s][l]-c+1;o>u;)++l>12&&(l=1,s++),u+=this.NEPALI_CALENDAR_DATA[s][l];var f=this.NEPALI_CALENDAR_DATA[s][l]-(u-o);return this.newDate(s,l,f)},_createMissingCalendarData:function(r){var n=this.daysPerMonth.slice(0);n.unshift(17);for(var i=r-1;i<r+2;i++)void 0===this.NEPALI_CALENDAR_DATA[i]&&(this.NEPALI_CALENDAR_DATA[i]=n)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),a.calendars.nepali=s},1104:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=r-(r>=0?474:473),c=474+l(s,2820);return i+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*c-110)/2816)+365*(c-1)+1029983*Math.floor(s/2820)+this.jdEpoch-1},fromJD:function(r){var n=(r=Math.floor(r)+.5)-this.toJD(475,1,1),i=Math.floor(n/1029983),a=l(n,1029983),o=2820;if(1029982!==a){var s=Math.floor(a/366);o=Math.floor((2134*s+2816*l(a,366)+2815)/1028522)+s+1}var c=o+2820*i+474;c=c<=0?c-1:c;var u=r-this.toJD(c,1,1)+1,f=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),h=r-this.toJD(c,f,1)+1;return this.newDate(c,f,h)}}),a.calendars.persian=s,a.calendars.jalali=s},51456:function(r,n,i){var a=i(38700),o=i(50896),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(n.year()),s.leapYear(r)},weekOfYear:function(r,n,i){var o=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(o.year()),s.weekOfYear(r,o.month(),o.day())},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=this._t2gYear(o.year()),s.toJD(r,o.month(),o.day())},fromJD:function(r){var n=s.fromJD(r),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)},_g2tYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)}}),a.calendars.taiwan=l},4592:function(r,n,i){var a=i(38700),o=i(50896),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(n.year()),s.leapYear(r)},weekOfYear:function(r,n,i){var o=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(o.year()),s.weekOfYear(r,o.month(),o.day())},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=this._t2gYear(o.year()),s.toJD(r,o.month(),o.day())},fromJD:function(r){var n=s.fromJD(r),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)},_g2tYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)}}),a.calendars.thai=l},45348:function(r,n,i){var a=i(38700),o=i(50896);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){for(var n=0,i=1;i<=12;i++)n+=this.daysInMonth(r,i);return n},daysInMonth:function(r,n){for(var i=this._validate(r,n,this.minDay,a.local.invalidMonth).toJD()-24e5+.5,o=0,s=0;s<l.length;s++){if(l[s]>i)return l[o]-l[o-1];o++}return 30},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate),s=12*(o.year()-1)+o.month()-15292;return o.day()+l[s-1]-1+24e5-.5},fromJD:function(r){for(var n=r-24e5+.5,i=0,a=0;a<l.length&&!(l[a]>n);a++)i++;var o=i+15292,s=Math.floor((o-1)/12),c=n-l[i-1]+1;return this.newDate(s+1,o-12*s,c)},isValid:function(r,n,i){var o=a.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(o=(r=null!=r.year?r.year:r)>=1276&&r<=1500),o},_validate:function(r,n,i,o){var s=a.baseCalendar.prototype._validate.apply(this,arguments);if(s.year<1276||s.year>1500)throw o.replace(/\{0\}/,this.local.name);return s}}),a.calendars.ummalqura=s;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(r,n,i){var a=i(50896);function o(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function s(r,n,i,a){if(this._calendar=r,this._year=n,this._month=i,this._day=a,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function l(r,n){return"000000".substring(0,n-(r=""+r).length)+r}function c(){this.shortYearCutoff="+10"}function u(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a(o.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var i=this._localCals[r+"-"+n];if(!i&&this.calendars[r]&&(i=new this.calendars[r](n),this._localCals[r+"-"+n]=i),!i)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return i},newDate:function(r,n,i,a,o){return(a=(null!=r&&r.year?r.calendar():"string"==typeof a?this.instance(a,o):a)||this.instance()).newDate(r,n,i)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(n){return r[n]})}},substituteChineseDigits:function(r,n){return function(i){for(var a="",o=0;i>0;){var s=i%10;a=(0===s?"":r[s]+n[o])+a,o++,i=Math.floor(i/10)}return 0===a.indexOf(r[1]+n[1])&&(a=a.substr(1)),a||r[0]}}}),a(s.prototype,{newDate:function(r,n,i){return this._calendar.newDate(null==r?this:r,n,i)},year:function(r){return 0==arguments.length?this._year:this.set(r,"y")},month:function(r){return 0==arguments.length?this._month:this.set(r,"m")},day:function(r){return 0==arguments.length?this._day:this.set(r,"d")},date:function(r,n,i){if(!this._calendar.isValid(r,n,i))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=i,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return 0===n?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(0>this.year()?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}}),a(c.prototype,{_validateLevel:0,newDate:function(r,n,i){return null==r?this.today():(r.year&&(this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),i=r.day(),n=r.month(),r=r.year()),new s(this,r,n,i))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){return 0>this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(0>n.year()?"-":"")+l(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var i=this._validate(r,n,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return(i.month()+this.monthsInYear(i)-this.firstMonth)%this.monthsInYear(i)+this.minMonth},fromMonthOfYear:function(r,n){var i=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,i,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth),i},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(r,n,i){return this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),{}},add:function(r,n,i){return this._validate(r,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,i),n,i)},_add:function(r,n,i){if(this._validateLevel++,"d"===i||"w"===i){var a=r.toJD()+n*("w"===i?this.daysInWeek():1),o=r.calendar().fromJD(a);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var s=r.year()+("y"===i?n:0),l=r.monthOfYear()+("m"===i?n:0);o=r.day(),"y"===i?(r.month()!==this.fromMonthOfYear(s,l)&&(l=this.newDate(s,r.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(s)),o=Math.min(o,this.daysInMonth(s,this.fromMonthOfYear(s,l)))):"m"===i&&(function(r){for(;l<r.minMonth;)s--,l+=r.monthsInYear(s);for(var n=r.monthsInYear(s);l>n-1+r.minMonth;)s++,l-=n,n=r.monthsInYear(s)}(this),o=Math.min(o,this.daysInMonth(s,this.fromMonthOfYear(s,l))));var c=[s,this.fromMonthOfYear(s,l),o];return this._validateLevel--,c}catch(r){throw this._validateLevel--,r}},_correctAdd:function(r,n,i,a){if(!(this.hasYearZero||"y"!==a&&"m"!==a||0!==n[0]&&r.year()>0==n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];n=this._add(r,i*o[0]+(i<0?-1:1)*o[1],o[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,i){this._validate(r,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate);var a="y"===i?n:r.year(),o="m"===i?n:r.month(),s="d"===i?n:r.day();return"y"!==i&&"m"!==i||(s=Math.min(s,this.daysInMonth(a,o))),r.date(a,o,s)},isValid:function(r,n,i){this._validateLevel++;var a=this.hasYearZero||0!==r;if(a){var o=this.newDate(r,n,this.minDay);a=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&i>=this.minDay&&i-this.minDay<this.daysInMonth(o)}return this._validateLevel--,a},toJSDate:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return f.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(r){return this.fromJD(f.instance().fromJSDate(r).toJD())},_validate:function(r,n,i,a){if(r.year){if(0===this._validateLevel&&this.name!==r.calendar().name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(r,n,i))throw a.replace(/\{0\}/,this.local.name);var o=this.newDate(r,n,i);return this._validateLevel--,o}catch(r){throw this._validateLevel--,r}}}),u.prototype=new c,a(u.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==0&&(r%100!=0||r%400==0)},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);r=a.year(),n=a.month(),i=a.day(),r<0&&r++,n<3&&(n+=12,r--);var o=Math.floor(r/100);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+i+(2-o+Math.floor(o/4))-1524.5},fromJD:function(r){var n=Math.floor(r+.5),i=Math.floor((n-1867216.25)/36524.25),a=1524+(i=n+1+i-Math.floor(i/4)),o=Math.floor((a-122.1)/365.25),s=Math.floor(365.25*o),l=Math.floor((a-s)/30.6001),c=a-s-Math.floor(30.6001*l),u=l-(l>13.5?13:1),f=o-(u>2.5?4716:4715);return f<=0&&f--,this.newDate(f,u,c)},toJSDate:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),o=new Date(a.year(),a.month()-1,a.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var f=r.exports=new o;f.cdate=s,f.baseCalendar=c,f.calendars.gregorian=u},15168:function(r,n,i){var a=i(50896),o=i(38700);a(o.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),o.local=o.regionalOptions[""],a(o.cdate.prototype,{formatDate:function(r,n){return"string"!=typeof r&&(n=r,r=""),this._calendar.formatDate(r||"",this,n)}}),a(o.baseCalendar.prototype,{UNIX_EPOCH:o.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:o.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,n,i){if("string"!=typeof r&&(i=n,n=r,r=""),!n)return"";if(n.calendar()!==this)throw o.local.invalidFormat||o.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var a,s,l,c=(i=i||{}).dayNamesShort||this.local.dayNamesShort,u=i.dayNames||this.local.dayNames,f=i.monthNumbers||this.local.monthNumbers,h=i.monthNamesShort||this.local.monthNamesShort,p=i.monthNames||this.local.monthNames,d=(i.calculateWeek||this.local.calculateWeek,function(n,i){for(var a=1;b+a<r.length&&r.charAt(b+a)===n;)a++;return b+=a-1,Math.floor(a/(i||1))>1}),y=function(r,n,i,a){var o=""+n;if(d(r,a))for(;o.length<i;)o="0"+o;return o},g=this.local.digits,v=function(r){return i.localNumbers&&g?g(r):r},m="",x=!1,b=0;b<r.length;b++)if(x)"'"!==r.charAt(b)||d("'")?m+=r.charAt(b):x=!1;else switch(r.charAt(b)){case"d":m+=v(y("d",n.day(),2));break;case"D":m+=(l=n.dayOfWeek(),d("D")?u[l]:c[l]);break;case"o":m+=y("o",n.dayOfYear(),3);break;case"w":m+=y("w",n.weekOfYear(),2);break;case"m":m+=(a=n,"function"==typeof f?f.call(this,a,d("m")):v(y("m",a.month(),2)));break;case"M":m+=(s=n,d("M")?"function"==typeof p?p.call(this,s):p[s.month()-this.minMonth]:"function"==typeof h?h.call(this,s):h[s.month()-this.minMonth]);break;case"y":m+=d("y",2)?n.year():(n.year()%100<10?"0":"")+n.year()%100;break;case"Y":d("Y",2),m+=n.formatYear();break;case"J":m+=n.toJD();break;case"@":m+=(n.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(n.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":d("'")?m+="'":x=!0;break;default:m+=r.charAt(b)}return m},parseDate:function(r,n,i){if(null==n)throw o.local.invalidArguments||o.regionalOptions[""].invalidArguments;if(""===(n="object"==typeof n?n.toString():n+""))return null;r=r||this.local.dateFormat;var a=(i=i||{}).shortYearCutoff||this.shortYearCutoff;a="string"!=typeof a?a:this.today().year()%100+parseInt(a,10);for(var s=i.dayNamesShort||this.local.dayNamesShort,l=i.dayNames||this.local.dayNames,c=i.parseMonth||this.local.parseMonth,u=i.monthNumbers||this.local.monthNumbers,f=i.monthNamesShort||this.local.monthNamesShort,h=i.monthNames||this.local.monthNames,p=-1,d=-1,y=-1,g=-1,v=-1,m=!1,x=!1,b=function(n,i){for(var a=1;M+a<r.length&&r.charAt(M+a)===n;)a++;return M+=a-1,Math.floor(a/(i||1))>1},_=function(r,i){var a=b(r,i),s=RegExp("^-?\\d{1,"+[2,3,a?4:2,a?4:2,10,11,20]["oyYJ@!".indexOf(r)+1]+"}"),l=n.substring(k).match(s);if(!l)throw(o.local.missingNumberAt||o.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=l[0].length,parseInt(l[0],10)},w=this,T=function(r,i,a,s){for(var l=b(r,s)?a:i,c=0;c<l.length;c++)if(n.substr(k,l[c].length).toLowerCase()===l[c].toLowerCase())return k+=l[c].length,c+w.minMonth;throw(o.local.unknownNameAt||o.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},A=function(){if(n.charAt(k)!==r.charAt(M))throw(o.local.unexpectedLiteralAt||o.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,M=0;M<r.length;M++)if(x)"'"!==r.charAt(M)||b("'")?A():x=!1;else switch(r.charAt(M)){case"d":g=_("d");break;case"D":T("D",s,l);break;case"o":v=_("o");break;case"w":_("w");break;case"m":y=function(){if("function"==typeof u){b("m");var r=u.call(w,n.substring(k));return k+=r.length,r}return _("m")}();break;case"M":y=function(){if("function"==typeof h){var r=b("M")?h.call(w,n.substring(k)):f.call(w,n.substring(k));return k+=r.length,r}return T("M",f,h)}();break;case"y":var S=M;m=!b("y",2),M=S,d=_("y",2);break;case"Y":d=_("Y",2);break;case"J":p=_("J")+.5,"."===n.charAt(k)&&(k++,_("J"));break;case"@":p=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=n.length;break;case"'":b("'")?A():x=!0;break;default:A()}if(k<n.length)throw o.local.unexpectedText||o.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&m&&(d+=-1===a?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),"string"==typeof y&&(y=c.call(this,d,y)),v>-1){y=1,g=v;for(var E=this.daysInMonth(d,y);g>E;E=this.daysInMonth(d,y))y++,g-=E}return p>-1?this.fromJD(p):this.newDate(d,y,g)},determineDate:function(r,n,i,a,o){i&&"object"!=typeof i&&(o=a,a=i,i=null),"string"!=typeof a&&(o=a,a="");var s=this;return n=n?n.newDate():null,null==r?n:"string"==typeof r?function(r){try{return s.parseDate(a,r,o)}catch(r){}for(var n=((r=r.toLowerCase()).match(/^c/)&&i?i.newDate():null)||s.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=l.exec(r);c;)n.add(parseInt(c[1],10),c[2]||"d"),c=l.exec(r);return n}(r):"number"==typeof r?isNaN(r)||r===1/0||r===-1/0?n:s.today().add(r,"d"):s.newDate(r)}})},21576:function(){},19768:function(){},63436:function(r,n,i){var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?i.g:globalThis;r.exports=function(){for(var r=[],n=0;n<a.length;n++)"function"==typeof o[a[n]]&&(r[r.length]=a[n]);return r}},67756:function(r,n,i){function a(r,n,i){r.prototype=n.prototype=i,i.constructor=r}function o(r,n){var i=Object.create(r.prototype);for(var a in n)i[a]=n[a];return i}function s(){}i.d(n,{qy:function(){return function r(n,i){var a,o,s=W(i);return null==i||"boolean"===s?F(i):("number"===s?V:"string"===s?(a=_(i))?(i=a,U):function(r,n){var i,a,o,s,l,c=q.lastIndex=G.lastIndex=0,u=-1,f=[],h=[];for(r+="",n+="";(o=q.exec(r))&&(s=G.exec(n));)(l=s.index)>c&&(l=n.slice(c,l),f[u]?f[u]+=l:f[++u]=l),(o=o[0])===(s=s[0])?f[u]?f[u]+=s:f[++u]=s:(f[++u]=null,h.push({i:u,x:V(o,s)})),c=G.lastIndex;return c<n.length&&(l=n.slice(c),f[u]?f[u]+=l:f[++u]=l),f.length<2?h[0]?(i=h[0].x,function(r){return i(r)+""}):(a=n,function(){return a}):(n=h.length,function(r){for(var i,a=0;a<n;++a)f[(i=h[a]).i]=i.x(r);return f.join("")})}:i instanceof _?U:i instanceof Date?function(r,n){var i=new Date;return r=+r,n=+n,function(a){return i.setTime(r*(1-a)+n*a),i}}:!ArrayBuffer.isView(o=i)||o instanceof DataView?Array.isArray(i)?function(n,i){var a,o=i?i.length:0,s=n?Math.min(o,n.length):0,l=Array(s),c=Array(o);for(a=0;a<s;++a)l[a]=r(n[a],i[a]);for(;a<o;++a)c[a]=i[a];return function(r){for(a=0;a<s;++a)c[a]=l[a](r);return c}}:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?function(n,i){var a,o={},s={};for(a in null!==n&&"object"===H(n)||(n={}),null!==i&&"object"===H(i)||(i={}),i)a in n?o[a]=r(n[a],i[a]):s[a]=i[a];return function(r){for(a in o)s[a]=o[a](r);return s}}:V:function(r,n){n||(n=[]);var i,a=r?Math.min(n.length,r.length):0,o=n.slice();return function(s){for(i=0;i<a;++i)o[i]=r[i]*(1-s)+n[i]*s;return o}})(n,i)}},Gz:function(){return V}});var l="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\(".concat(l,",").concat(l,",").concat(l,"\\)$")),p=new RegExp("^rgb\\(".concat(u,",").concat(u,",").concat(u,"\\)$")),d=new RegExp("^rgba\\(".concat(l,",").concat(l,",").concat(l,",").concat(c,"\\)$")),y=new RegExp("^rgba\\(".concat(u,",").concat(u,",").concat(u,",").concat(c,"\\)$")),g=new RegExp("^hsl\\(".concat(c,",").concat(u,",").concat(u,"\\)$")),v=new RegExp("^hsla\\(".concat(c,",").concat(u,",").concat(u,",").concat(c,"\\)$")),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function _(r){var n,i;return r=(r+"").trim().toLowerCase(),(n=f.exec(r))?(i=n[1].length,n=parseInt(n[1],16),6===i?w(n):3===i?new k(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===i?T(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===i?T(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=h.exec(r))?new k(n[1],n[2],n[3],1):(n=p.exec(r))?new k(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=d.exec(r))?T(n[1],n[2],n[3],n[4]):(n=y.exec(r))?T(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=g.exec(r))?C(n[1],n[2]/100,n[3]/100,1):(n=v.exec(r))?C(n[1],n[2]/100,n[3]/100,n[4]):m.hasOwnProperty(r)?w(m[r]):"transparent"===r?new k(NaN,NaN,NaN,0):null}function w(r){return new k(r>>16&255,r>>8&255,255&r,1)}function T(r,n,i,a){return a<=0&&(r=n=i=NaN),new k(r,n,i,a)}function A(r,n,i,a){var o;return 1==arguments.length?((o=r)instanceof s||(o=_(o)),o?new k((o=o.rgb()).r,o.g,o.b,o.opacity):new k):new k(r,n,i,null==a?1:a)}function k(r,n,i,a){this.r=+r,this.g=+n,this.b=+i,this.opacity=+a}function M(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b))}function S(){var r=E(this.opacity);return"".concat(1===r?"rgb(":"rgba(").concat(I(this.r),", ").concat(I(this.g),", ").concat(I(this.b)).concat(1===r?")":", ".concat(r,")"))}function E(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function I(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function L(r){return((r=I(r))<16?"0":"")+r.toString(16)}function C(r,n,i,a){return a<=0?r=n=i=NaN:i<=0||i>=1?r=n=NaN:n<=0&&(r=NaN),new D(r,n,i,a)}function O(r){if(r instanceof D)return new D(r.h,r.s,r.l,r.opacity);if(r instanceof s||(r=_(r)),!r)return new D;if(r instanceof D)return r;var n=(r=r.rgb()).r/255,i=r.g/255,a=r.b/255,o=Math.min(n,i,a),l=Math.max(n,i,a),c=NaN,u=l-o,f=(l+o)/2;return u?(c=n===l?(i-a)/u+6*(i<a):i===l?(a-n)/u+2:(n-i)/u+4,u/=f<.5?l+o:2-l-o,c*=60):u=f>0&&f<1?0:c,new D(c,u,f,r.opacity)}function D(r,n,i,a){this.h=+r,this.s=+n,this.l=+i,this.opacity=+a}function P(r){return(r=(r||0)%360)<0?r+360:r}function B(r){return Math.max(0,Math.min(1,r||0))}function R(r,n,i){return 255*(r<60?n+(i-n)*r/60:r<180?i:r<240?n+(i-n)*(240-r)/60:n)}function z(r,n,i,a,o){var s=r*r,l=s*r;return((1-3*r+3*s-l)*n+(4-6*s+3*l)*i+(1+3*r+3*s-3*l)*a+l*o)/6}a(s,_,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:b,toString:b}),a(k,A,o(s,{brighter:function(r){return r=null==r?1.4285714285714286:Math.pow(1.4285714285714286,r),new k(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new k(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},clamp:function(){return new k(I(this.r),I(this.g),I(this.b),E(this.opacity))},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatHex8:function(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b)).concat(L(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),a(D,function(r,n,i,a){return 1==arguments.length?O(r):new D(r,n,i,null==a?1:a)},o(s,{brighter:function(r){return r=null==r?1.4285714285714286:Math.pow(1.4285714285714286,r),new D(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new D(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+360*(this.h<0),n=isNaN(r)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*n,o=2*i-a;return new k(R(r>=240?r-240:r+120,o,a),R(r,o,a),R(r<120?r+240:r-120,o,a),this.opacity)},clamp:function(){return new D(P(this.h),B(this.s),B(this.l),E(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=E(this.opacity);return"".concat(1===r?"hsl(":"hsla(").concat(P(this.h),", ").concat(100*B(this.s),"%, ").concat(100*B(this.l),"%").concat(1===r?")":", ".concat(r,")"))}}));var F=function(r){return function(){return r}};function N(r,n){var i=n-r;return i?function(n){return r+n*i}:F(isNaN(r)?n:r)}var U=function r(n){var i,a=1==(i=+(i=n))?N:function(r,n){var a,o,s;return n-r?(a=r,o=n,a=Math.pow(a,s=i),o=Math.pow(o,s)-a,s=1/s,function(r){return Math.pow(a+r*o,s)}):F(isNaN(r)?n:r)};function o(r,n){var i=a((r=A(r)).r,(n=A(n)).r),o=a(r.g,n.g),s=a(r.b,n.b),l=N(r.opacity,n.opacity);return function(n){return r.r=i(n),r.g=o(n),r.b=s(n),r.opacity=l(n),r+""}}return o.gamma=r,o}(1);function j(r){return function(n){var i,a,o=n.length,s=Array(o),l=Array(o),c=Array(o);for(i=0;i<o;++i)a=A(n[i]),s[i]=a.r||0,l[i]=a.g||0,c[i]=a.b||0;return s=r(s),l=r(l),c=r(c),a.opacity=1,function(r){return a.r=s(r),a.g=l(r),a.b=c(r),a+""}}}function V(r,n){return r=+r,n=+n,function(i){return r*(1-i)+n*i}}function H(r){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}j(function(r){var n=r.length-1;return function(i){var a=i<=0?i=0:i>=1?(i=1,n-1):Math.floor(i*n),o=r[a],s=r[a+1],l=a>0?r[a-1]:2*o-s,c=a<n-1?r[a+2]:2*s-o;return z((i-a/n)*n,l,o,s,c)}}),j(function(r){var n=r.length;return function(i){var a=Math.floor(((i%=1)<0?++i:i)*n),o=r[(a+n-1)%n],s=r[a%n],l=r[(a+1)%n],c=r[(a+2)%n];return z((i-a/n)*n,o,s,l,c)}});var q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G=RegExp(q.source,"g");function W(r){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}},30584:function(r){r.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(r){r.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(r){r.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(r){r.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(r){r.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(r){r.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},n={};function i(a){var o=n[a];if(void 0!==o)return o.exports;var s=n[a]={exports:{}};return r[a].call(s.exports,s,s.exports,i),s.exports}return i.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(n,{a:n}),n},i.d=function(r,n){for(var a in n)i.o(n,a)&&!i.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:n[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(r){if("object"==typeof window)return window}}(),i.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},i.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i(13792)}();const uj=document.body.appendChild(document.createElement("div"));uz.events.addEventListener(uz.RENDER_EVENT,r=>{let n=JSON.parse(r.detail.args.spec);console.log(n),o(uU).newPlot(uj,n),uj.on("plotly_click",r=>{let n=r.points.map(r=>({x:r.x,y:r.y}));uz.setComponentValue(n)}),uz.setFrameHeight()}),uz.setComponentReady();
//# sourceMappingURL=index.ac170d65.js.map
